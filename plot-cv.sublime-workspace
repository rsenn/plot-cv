{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"pathTo",
				"pathToPointIterator"
			],
			[
				"Element",
				"ElementTransformMatrix"
			],
			[
				"Elemen",
				"ElementTransformList"
			],
			[
				"getTra",
				"getTransformationList"
			],
			[
				"serialize",
				"serializeToString"
			],
			[
				"unitConv",
				"unitConvToMM"
			],
			[
				"lazy",
				"lazyProperties"
			],
			[
				"ex",
				"expansion"
			],
			[
				"isArra",
				"isArrayBuffer"
			],
			[
				"Extra",
				"ExtractRotation"
			],
			[
				"tra",
				"transformation"
			],
			[
				"define",
				"defineProperties"
			],
			[
				"getters",
				"gettersSetters"
			],
			[
				"circui",
				"circuitFilePath"
			],
			[
				"Conn",
				"ConnectionPoint"
			],
			[
				"parseCom",
				"parseCommentOrEmpty"
			],
			[
				"circ",
				"circuitFilePath"
			],
			[
				"built",
				"builtin_attr"
			],
			[
				"dep",
				"depthOrPred"
			],
			[
				"exte",
				"extendAsyncGenerator"
			],
			[
				"extend",
				"extendArray"
			],
			[
				"allo",
				"allowedDirs"
			],
			[
				"getOwnPr",
				"getOwnPropertyNames(...)"
			],
			[
				"Prom",
				"PromiseWorker"
			],
			[
				"trans",
				"transformation"
			],
			[
				"allow",
				"allowedDirs"
			],
			[
				"Get",
				"GetElementsBySignal"
			],
			[
				"GetEle",
				"GetElementsBySignal"
			],
			[
				"getOwn",
				"getOwnPropertyNames(...)"
			],
			[
				"ColorSi",
				"ColorSignals"
			],
			[
				"HTML",
				"HTMLTableRow"
			],
			[
				"HTMLTable",
				"HTMLTableColumn"
			],
			[
				"rend",
				"renderToString"
			],
			[
				"Pack",
				"Package2Circuit"
			],
			[
				"lazyP",
				"lazyProperties"
			],
			[
				"JS_Get",
				"JS_GetProperty"
			],
			[
				"Ret",
				"ReturnValuePathFunction"
			],
			[
				"cFunc",
				"cFuncListObjects"
			],
			[
				"isC",
				"isCFuncCall"
			],
			[
				"En",
				"EntityNames"
			],
			[
				"parseFrom",
				"parseFromString"
			],
			[
				"pseu",
				"pseudoClassArg"
			],
			[
				"pseudoC",
				"pseudoClassName"
			],
			[
				"Key",
				"KeyboardEvent"
			],
			[
				"getOp",
				"getOptionEntries"
			],
			[
				"setProp",
				"setPropertyValue"
			],
			[
				"parse",
				"parseSelectors"
			],
			[
				"JS_SetPr",
				"JS_SetPropertyStr"
			],
			[
				"jsm_buil",
				"jsm_builtin_init"
			],
			[
				"JS_Free",
				"JS_FreeCString"
			],
			[
				"JS_Set",
				"JS_SetProperty"
			],
			[
				"JS_New",
				"JS_NewObject"
			],
			[
				"ide",
				"importIdentifiers"
			],
			[
				"iden",
				"importIdentifiers"
			],
			[
				"import",
				"importIdentifiers"
			],
			[
				"ident",
				"identifierSets"
			],
			[
				"path_is",
				"path_is_absolute"
			],
			[
				"js_is_",
				"js_is_null_or_undefined"
			],
			[
				"path_skip_se",
				"path_skip_separator_s"
			],
			[
				"WRITABLE_METHO",
				"WRITABLE_METHOD_CLOSE"
			],
			[
				"list_fo",
				"list_for_each_prev"
			],
			[
				"JS_Th",
				"JS_ThrowOutOfMemory"
			],
			[
				"JS_",
				"JS_ThrowOutOfMemory"
			],
			[
				"underly",
				"underlying_source"
			],
			[
				"Tok",
				"TokenSequence"
			],
			[
				"JS_GetPr",
				"JS_GetPropertyStr"
			],
			[
				"JS_Thro",
				"JS_ThrowOutOfMemory"
			],
			[
				"getAt",
				"getAttributeNames"
			],
			[
				"self",
				"self_closing_tags"
			],
			[
				"self_",
				"self_closing_tags"
			],
			[
				"JS_PROP",
				"JS_PROP_ENUMERABLE"
			],
			[
				"depe",
				"dependencyMap"
			],
			[
				"de",
				"dependencyMap"
			],
			[
				"js_is_null",
				"js_is_null_or_undefined"
			],
			[
				"JS_P",
				"JS_PROP_ENUMERABLE"
			],
			[
				"JS_SetP",
				"JS_SetPropertyUint32"
			],
			[
				"spec",
				"specifiers"
			],
			[
				"Num",
				"NumericRange"
			],
			[
				"token_r",
				"token_release_rt"
			],
			[
				"JS_Thr",
				"JS_ThrowTypeError"
			],
			[
				"js_",
				"js_location_data"
			],
			[
				"debug_js_mall",
				"debug_js_malloc_usable_size"
			],
			[
				"repl",
				"replaceRange"
			],
			[
				"js_malloc_u",
				"js_malloc_usable_size_rt"
			],
			[
				"malloc",
				"malloc_usable_size"
			],
			[
				"all",
				"alloc_block_list"
			],
			[
				"alloc",
				"alloc_block_list"
			],
			[
				"path_skip",
				"path_skip_component"
			],
			[
				"jsm_mo",
				"jsm_module_loader"
			],
			[
				"JS_Throw",
				"JS_ThrowInternalError"
			],
			[
				"JS_AtomTo",
				"JS_AtomToValue"
			],
			[
				"inspect",
				"inspectSymbol"
			],
			[
				"at",
				"attributes"
			],
			[
				"parent",
				"parentElement"
			],
			[
				"owner",
				"ownerElement"
			],
			[
				"get",
				"getPrototypeOf"
			],
			[
				"child",
				"childElementCount"
			],
			[
				"getO",
				"getOwnPropertyNames"
			],
			[
				"js_misc_im",
				"js_misc_immutable_constructor"
			],
			[
				"obj",
				"object_tostring"
			],
			[
				"js_misc_immu",
				"js_misc_immutable_free"
			],
			[
				"js_misc_imm",
				"js_misc_immutable_constructor"
			],
			[
				"CMAKE_IMPORT",
				"CMAKE_IMPORT_LIBRARY_SUFFIX"
			],
			[
				"CMAKE_CUR",
				"CMAKE_CURRENT_BINARY_DIR"
			],
			[
				"js_is",
				"js_is_null_or_undefined"
			],
			[
				"js_asy",
				"js_async_socket_class_id"
			],
			[
				"JS_NewObj",
				"JS_NewObjectProtoClass"
			],
			[
				"async_",
				"async_socket_proto"
			],
			[
				"js_socket_class",
				"js_socket_class_id"
			],
			[
				"g",
				"getOwnPropertyNames(...)"
			],
			[
				"js_sockaddr_cl",
				"js_sockaddr_class_id"
			],
			[
				"js_so",
				"js_sockaddr_constructor"
			],
			[
				"js_sys",
				"js_syscallerror_class_id"
			],
			[
				"js_string",
				"js_stringdecoder_class_id"
			],
			[
				"js_pred",
				"js_predicate_class_id"
			],
			[
				"js_syn",
				"js_syntaxerror_class"
			],
			[
				"js_child",
				"js_child_process_class_id"
			],
			[
				"js_b",
				"js_blob_class_id"
			],
			[
				"js_loca",
				"js_location_class_id"
			],
			[
				"js_token_in",
				"js_token_inspect_funcs"
			],
			[
				"set",
				"setReadHandler"
			],
			[
				"js_get_",
				"js_get_propertystr_bool"
			],
			[
				"js_misc_ate",
				"js_misc_atexit_functions"
			],
			[
				"isF",
				"isFunction"
			],
			[
				"tab",
				"tab_atom_len"
			],
			[
				"isARr",
				"isArrayBuffer"
			],
			[
				"BIT",
				"BITFIELD_FROMARRAY"
			],
			[
				"to",
				"toStringTag"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "",
			"settings":
			{
				"buffer_size": 0,
				"line_ending": "Unix",
				"name": "ðŒ† Outline",
				"scratch": true
			},
			"undo_stack":
			[
				[
					209,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					210,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					211,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					212,
					2,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					213,
					2,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					214,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					215,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					216,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					217,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					218,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					219,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/resolve-imports.js",
						"symkeys":
						[
							[
								676,
								689
							],
							[
								708,
								728
							],
							[
								1250,
								1265
							],
							[
								1272,
								1283
							],
							[
								1435,
								1447
							],
							[
								1673,
								1679
							],
							[
								1757,
								1784
							],
							[
								1912,
								1917
							],
							[
								1972,
								2003
							],
							[
								2165,
								2196
							],
							[
								2408,
								2439
							],
							[
								2544,
								2569
							],
							[
								2807,
								2843
							],
							[
								3190,
								3215
							],
							[
								3252,
								3279
							],
							[
								3364,
								3390
							],
							[
								3448,
								3468
							],
							[
								3539,
								3557
							],
							[
								3819,
								3832
							],
							[
								3860,
								3866
							],
							[
								3919,
								3941
							],
							[
								4291,
								4315
							],
							[
								4636,
								4666
							],
							[
								4775,
								4796
							],
							[
								4843,
								4871
							],
							[
								4882,
								4895
							],
							[
								4985,
								4998
							],
							[
								5264,
								5270
							],
							[
								5349,
								5396
							],
							[
								5468,
								5484
							],
							[
								5739,
								5757
							],
							[
								5925,
								5964
							],
							[
								6080,
								6092
							],
							[
								6115,
								6142
							],
							[
								6268,
								6280
							],
							[
								6673,
								6700
							],
							[
								6715,
								6733
							],
							[
								6973,
								6985
							],
							[
								6994,
								7019
							],
							[
								7102,
								7111
							],
							[
								7200,
								7265
							],
							[
								7278,
								7291
							],
							[
								7304,
								7326
							],
							[
								7331,
								7364
							],
							[
								7373,
								7391
							],
							[
								7485,
								7497
							],
							[
								7547,
								7556
							],
							[
								7646,
								7672
							],
							[
								7681,
								7699
							],
							[
								7777,
								7789
							],
							[
								7798,
								7809
							],
							[
								7870,
								7879
							],
							[
								7968,
								7991
							],
							[
								8014,
								8020
							],
							[
								8050,
								8075
							],
							[
								9487,
								9511
							],
							[
								9528,
								9534
							],
							[
								9596,
								9602
							],
							[
								9653,
								9677
							],
							[
								9995,
								10019
							],
							[
								10068,
								10074
							],
							[
								10316,
								10340
							],
							[
								10369,
								10375
							],
							[
								10526,
								10555
							],
							[
								10671,
								10680
							],
							[
								10831,
								10860
							],
							[
								11120,
								11186
							],
							[
								12022,
								12039
							],
							[
								12340,
								12358
							],
							[
								12401,
								12417
							],
							[
								12511,
								12550
							],
							[
								12884,
								12888
							],
							[
								13028,
								13035
							],
							[
								13098,
								13109
							],
							[
								13308,
								13326
							],
							[
								13657,
								13674
							],
							[
								16108,
								16112
							],
							[
								16731,
								16779
							],
							[
								17036,
								17042
							],
							[
								17546,
								17552
							],
							[
								17608,
								17614
							],
							[
								18405,
								18411
							],
							[
								18442,
								18448
							],
							[
								18537,
								18543
							],
							[
								18896,
								18902
							],
							[
								19066,
								19072
							],
							[
								19099,
								19105
							],
							[
								19123,
								19128
							],
							[
								19171,
								19186
							],
							[
								19207,
								19214
							],
							[
								19269,
								19324
							],
							[
								20282,
								20288
							],
							[
								20430,
								20436
							],
							[
								20559,
								20565
							],
							[
								20721,
								20727
							],
							[
								21302,
								21308
							],
							[
								21357,
								21363
							],
							[
								21531,
								21537
							],
							[
								21591,
								21596
							],
							[
								21647,
								21662
							],
							[
								21683,
								21690
							],
							[
								21751,
								21781
							],
							[
								21884,
								21890
							],
							[
								22002,
								22018
							],
							[
								22861,
								22867
							],
							[
								22887,
								22893
							],
							[
								22910,
								22916
							],
							[
								23127,
								23136
							],
							[
								23208,
								23214
							],
							[
								23291,
								23304
							],
							[
								23406,
								23410
							],
							[
								23496,
								23502
							],
							[
								24142,
								24147
							],
							[
								24250,
								24255
							],
							[
								29293,
								29322
							],
							[
								29472,
								29490
							],
							[
								29531,
								29553
							],
							[
								29579,
								29585
							],
							[
								29602,
								29625
							],
							[
								29685,
								29715
							],
							[
								29750,
								29756
							],
							[
								29782,
								29792
							],
							[
								29847,
								29877
							],
							[
								29903,
								29916
							],
							[
								30123,
								30147
							],
							[
								30208,
								30240
							],
							[
								30266,
								30279
							],
							[
								30306,
								30336
							],
							[
								30389,
								30424
							],
							[
								30429,
								30449
							],
							[
								30564,
								30595
							],
							[
								30875,
								30907
							],
							[
								31083,
								31120
							],
							[
								31204,
								31237
							],
							[
								31300,
								31321
							],
							[
								31427,
								31439
							],
							[
								31458,
								31481
							],
							[
								31614,
								31625
							],
							[
								31655,
								31671
							],
							[
								31703,
								31712
							],
							[
								31742,
								31756
							],
							[
								31788,
								31798
							],
							[
								31838,
								31845
							],
							[
								31893,
								31902
							],
							[
								31963,
								31981
							],
							[
								32214,
								32249
							],
							[
								32788,
								32822
							],
							[
								32905,
								32917
							],
							[
								33061,
								33071
							],
							[
								33257,
								33264
							],
							[
								33372,
								33394
							],
							[
								33647,
								33659
							],
							[
								33724,
								33742
							],
							[
								33883,
								33892
							],
							[
								33920,
								33941
							],
							[
								34132,
								34141
							],
							[
								34186,
								34196
							],
							[
								34327,
								34334
							],
							[
								34500,
								34514
							],
							[
								34766,
								34783
							],
							[
								34827,
								34839
							],
							[
								35157,
								35169
							],
							[
								35417,
								35436
							],
							[
								35717,
								35736
							],
							[
								35877,
								35902
							],
							[
								36016,
								36033
							],
							[
								37929,
								37940
							],
							[
								37990,
								38004
							],
							[
								38227,
								38237
							],
							[
								38681,
								38693
							],
							[
								38850,
								38856
							],
							[
								38998,
								39010
							],
							[
								39054,
								39084
							],
							[
								39593,
								39598
							],
							[
								39999,
								40008
							],
							[
								40031,
								40040
							],
							[
								40153,
								40160
							],
							[
								40193,
								40205
							],
							[
								40569,
								40581
							],
							[
								40610,
								40630
							],
							[
								40701,
								40712
							],
							[
								40745,
								40765
							],
							[
								40829,
								40858
							],
							[
								42450,
								42460
							],
							[
								42836,
								42848
							],
							[
								43269,
								43281
							],
							[
								43670,
								43682
							],
							[
								43800,
								43807
							],
							[
								43852,
								43882
							],
							[
								44197,
								44225
							],
							[
								44255,
								44259
							],
							[
								44278,
								44306
							],
							[
								44339,
								44358
							],
							[
								44417,
								44444
							],
							[
								44477,
								44496
							],
							[
								44571,
								44612
							],
							[
								45078,
								45101
							],
							[
								45241,
								45264
							],
							[
								45393,
								45533
							],
							[
								46236,
								46270
							],
							[
								46337,
								46385
							],
							[
								46431,
								46470
							],
							[
								47045,
								47073
							],
							[
								47122,
								47143
							],
							[
								47217,
								47238
							],
							[
								47299,
								47320
							],
							[
								47393,
								47439
							],
							[
								47488,
								47494
							],
							[
								47568,
								47574
							],
							[
								47640,
								47646
							],
							[
								47717,
								47739
							],
							[
								48438,
								48453
							],
							[
								48539,
								48546
							],
							[
								48642,
								48649
							],
							[
								48704,
								48711
							],
							[
								48751,
								48762
							],
							[
								49093,
								49099
							],
							[
								49171,
								49179
							],
							[
								49367,
								49373
							],
							[
								49416,
								49422
							],
							[
								49478,
								49485
							],
							[
								49547,
								49555
							],
							[
								49607,
								49613
							],
							[
								49669,
								49675
							],
							[
								49734,
								49740
							],
							[
								49802,
								49808
							],
							[
								49869,
								49875
							],
							[
								49947,
								49953
							],
							[
								50027,
								50033
							],
							[
								50096,
								50102
							],
							[
								50160,
								50166
							],
							[
								50213,
								50219
							],
							[
								50278,
								50284
							],
							[
								50342,
								50348
							],
							[
								50409,
								50415
							],
							[
								50470,
								50476
							],
							[
								50523,
								50529
							],
							[
								50599,
								50620
							],
							[
								50695,
								50711
							],
							[
								50799,
								50845
							],
							[
								51349,
								51355
							],
							[
								52020,
								52026
							],
							[
								52031,
								52044
							],
							[
								52136,
								52158
							],
							[
								53295,
								53325
							],
							[
								53338,
								53344
							],
							[
								53407,
								53416
							],
							[
								53455,
								53461
							],
							[
								53509,
								53538
							],
							[
								54241,
								54255
							],
							[
								55160,
								55174
							],
							[
								55393,
								55406
							],
							[
								55443,
								55450
							]
						],
						"symlist":
						[
							"ArgumentError",
							"constructor(...args)",
							"logFile = () =>",
							"log = () =>",
							"allImports()",
							"arg =>",
							"function ReadJSON(filename)",
							"() =>",
							"function ImportedBy(importFile)",
							"function ResolveAlias(filename)",
							"function IsFileImport(filename)",
							"function NormalizePath(p)",
							"FileBannerComment = (filename, i) =>",
							"IsBuiltin = moduleName =>",
							"compact = (n, more = {}) =>",
							"AddUnique = (arr, item) =>",
							"IntToDWord = ival =>",
							"IntToBinary = i =>",
							"(n, value) =>",
							"num =>",
							"(type, lexeme, tok) =>",
							"CompareRange = (a, b) =>",
							"PutsFunction = outFn => str =>",
							"IsWhiteSpace = str =>",
							"debugLog = (str, ...args) =>",
							"pred = arg =>",
							"(acc, opt) =>",
							"arg =>",
							"function OutputImports(imports = globalImports)",
							"([name, obj]) =>",
							"([local, name]) =>",
							"function FileWriter(file, mode = 0o755)",
							"close: () =>",
							"function FileReplacer(file)",
							"close: () =>",
							"function FdWriter(fd, file)",
							"fn = (buf, len) =>",
							"close: () =>",
							"seek: (whence, offset) =>",
							"inspect()",
							"function ArrayWriter( arr, t = (buf, len) => { if(!types.",
							"(buf)) buf = ",
							"(buf); return buf.",
							"(0, len ?? buf.byteLength); } )",
							"fn = (buf, len) =>",
							"close: () =>",
							"inspect()",
							"function DummyWriter(name)",
							"fn = (buf, len) =>",
							"close: () =>",
							"seek: () =>",
							"inspect()",
							"function ImportIds(seq)",
							"tok =>",
							"function ImportIdMap(seq)",
							"function ImpExpType(seq)",
							"tok =>",
							"tok =>",
							"function ImportType(seq)",
							"function ImportFile(seq)",
							"tok =>",
							"function ExportName(seq)",
							"tok =>",
							"function ByteSequence(tokens)",
							"(n, t) =>",
							"function ModuleLoader(module)",
							"function ProcessFile(source, log = () => {}, recursive, depth = 0)",
							".handler = lex =>",
							".beginCode = () =>",
							"balancer = () =>",
							"self = function ParentheseBalancer(tok)",
							"s =>",
							"reset()",
							"get depth()",
							"showToken = tok =>",
							"PathAdjust = s =>",
							"i =>",
							" function Export(tokens, relativePath = s => s)",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"path()",
							"Export",
							"Export",
							"ids()",
							"({ lexeme }) =>",
							"idmap()",
							" function Import(tokens, relativePath = s => s, depth)",
							"path()",
							"Import",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"Import",
							"ids()",
							"({ lexeme }) =>",
							"idmap()",
							"toCode(filterIds = id => true)",
							"tok =>",
							"(acc, tok, i) =>",
							"exp =>",
							"exp =>",
							"tok =>",
							"(a, b) =>",
							"imp =>",
							"(acc, imp) =>",
							"b =>",
							"imp =>",
							"id =>",
							"id =>",
							"function AddDep(source, file)",
							"function IsWS(tok)",
							"function NonWS(tokens)",
							"tok =>",
							"function LeadingWS(str)",
							"function TokenSequence(tokens)",
							"tok =>",
							"toString()",
							"function AddWhitespace(tokens)",
							"(acc, tok) =>",
							"function Unquote(lexeme)",
							"function LiteralSequence(tokens)",
							"(acc, tok) =>",
							"function UntilEOL(idx, tokens)",
							"function Until(idx, tokens, pred = ",
							"(null, [';', '\\n']))",
							"function WholeLine(idx, tokens)",
							"function Range(file, start, end)",
							"Range.prototype.toString = function()",
							"function InRange([start, end], i)",
							"function IsRange(obj)",
							"NumericRange",
							"constructor(start, end)",
							"get start()",
							"set start(value)",
							"get end()",
							"set end(value)",
							"get size()",
							"clone()",
							"inside(n)",
							"static from(range)",
							"static *holes(ranges, only = false)",
							"static between([s1, e1], [s2, e2])",
							"NumericRange",
							"pad = s =>",
							"FileMap",
							"constructor(file, buf)",
							"get buffer()",
							"static empty(file)",
							"isEmpty()",
							"static for(file, buf)",
							"isEmpty()",
							"toString()",
							"FileMap",
							"findSlice(pos)",
							"([range, buf]) =>",
							"splitAt(pos)",
							"findPos(pos)",
							"insertAt(pos, file)",
							"insert(index, file)",
							"replaceRange(range, file)",
							"sliceIndex = n =>",
							"stringAt(n)",
							" (buf, len) =>",
							"rangeAt(n)",
							"get ranges()",
							"dump()",
							"(item, i) =>",
							"(acc, [range, buf, str], i) =>",
							"at(i)",
							"toArray()",
							"(s, i) =>",
							"holes()",
							"([range]) =>",
							"firstChunk()",
							"([range, buf], i) =>",
							"lastChunk()",
							"([range, buf], i) =>",
							"write(out, depth = 0, serial)",
							"toString()",
							"(item, i) =>",
							"(part, i) =>",
							"(item, i) =>",
							"FileMap",
							"function BufferFile(file, buf)",
							"function BufferLengths(file)",
							"b =>",
							"function BufferOffsets(file)",
							"([pos, list], b) =>",
							"function BufferRanges(file)",
							"([pos, list], b) =>",
							"function WriteFile(name, data, opts = {})",
							"function DumpLexer(lex)",
							"function DumpToken(tok)",
							"function* DependencyTree( root, indent = ' ', spacing = false, depth = 0, pre = '', fn = (name, depth) => `${name} (${depth})` )",
							" function stripLeadingDotSlash(n)",
							"function SpreadAndJoin(iterator, separator = '')",
							"function* PrintUserscriptBanner(fields)",
							"function PrintES6Import(imp)",
							" ({ local, file }) =>",
							" ({ local, file }) =>",
							" ({ local, file }) =>",
							"function PrintCJSImport({ type, local, file })",
							" () =>",
							" () =>",
							" () =>",
							"function main(...args)",
							"write(buf, len)",
							"puts(s)",
							"line =>",
							"close()",
							"isWS = s =>",
							" () =>",
							" file =>",
							" () =>",
							" () =>",
							" arg =>",
							" file =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" function ShowHelp()",
							"(acc, [name]) =>",
							" (acc, [name, [hasArg, fn, shortOpt]]) =>",
							"arg =>",
							" () =>",
							" (...args) =>",
							"RelativePath = file =>",
							"ContainsAny = (arr, tokens) =>",
							"tok =>",
							"impexp =>",
							"hdr =>",
							" ([acc, prev], hdr) =>",
							"(acc, line) =>",
							"({ depth }) =>",
							"({ name }) =>",
							"name =>"
						]
					},
					"AwAAAAAAAAAAAAAAqhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKoQAABBcmd1bWVudEVycm9yCiAgY29uc3RydWN0b3IoLi4uYXJncykKICBsb2dGaWxlID0gKCkgPT4KICBsb2cgPSAoKSA9PgogIGFsbEltcG9ydHMoKQogIGFyZyA9PgpSZWFkSlNPTihmaWxlbmFtZSkKKCkgPT4KSW1wb3J0ZWRCeShpbXBvcnRGaWxlKQpSZXNvbHZlQWxpYXMoZmlsZW5hbWUpCklzRmlsZUltcG9ydChmaWxlbmFtZSkKTm9ybWFsaXplUGF0aChwKQpGaWxlQmFubmVyQ29tbWVudCA9IChmaWxlbmFtZSwgaSkgPT4KSXNCdWlsdGluID0gbW9kdWxlTmFtZSA9PgogIGNvbXBhY3QgPSAobiwgbW9yZSA9IHt9KSA9PgpBZGRVbmlxdWUgPSAoYXJyLCBpdGVtKSA9PgpJbnRUb0RXb3JkID0gaXZhbCA9PgpJbnRUb0JpbmFyeSA9IGkgPT4KKG4sIHZhbHVlKSA9PgogIG51bSA9PgoodHlwZSwgbGV4ZW1lLCB0b2spID0+CkNvbXBhcmVSYW5nZSA9IChhLCBiKSA9PgpQdXRzRnVuY3Rpb24gPSBvdXRGbiA9PiBzdHIgPT4KSXNXaGl0ZVNwYWNlID0gc3RyID0+CiAgZGVidWdMb2cgPSAoc3RyLCAuLi5hcmdzKSA9PgogIHByZWQgPSBhcmcgPT4KKGFjYywgb3B0KSA9PgogIGFyZyA9PgpPdXRwdXRJbXBvcnRzKGltcG9ydHMgPSBnbG9iYWxJbXBvcnRzKQooW25hbWUsIG9ial0pID0+CihbbG9jYWwsIG5hbWVdKSA9PgpGaWxlV3JpdGVyKGZpbGUsIG1vZGUgPSAwbzc1NSkKICBjbG9zZTogKCkgPT4KRmlsZVJlcGxhY2VyKGZpbGUpCiAgY2xvc2U6ICgpID0+CkZkV3JpdGVyKGZkLCBmaWxlKQogIGZuID0gKGJ1ZiwgbGVuKSA9PgogIGNsb3NlOiAoKSA9PgogIHNlZWs6ICh3aGVuY2UsIG9mZnNldCkgPT4KICBpbnNwZWN0KCkKQXJyYXlXcml0ZXIoIGFyciwgdCA9IChidWYsIGxlbikgPT4geyBpZighdHlwZXMuCihidWYpKSBidWYgPSAKKGJ1Zik7IHJldHVybiBidWYuCigwLCBsZW4gPz8gYnVmLmJ5dGVMZW5ndGgpOyB9ICkKICBmbiA9IChidWYsIGxlbikgPT4KICBjbG9zZTogKCkgPT4KICBpbnNwZWN0KCkKRHVtbXlXcml0ZXIobmFtZSkKICBmbiA9IChidWYsIGxlbikgPT4KICBjbG9zZTogKCkgPT4KICBzZWVrOiAoKSA9PgogIGluc3BlY3QoKQpJbXBvcnRJZHMoc2VxKQogIHRvayA9PgpJbXBvcnRJZE1hcChzZXEpCkltcEV4cFR5cGUoc2VxKQogIHRvayA9PgogIHRvayA9PgpJbXBvcnRUeXBlKHNlcSkKSW1wb3J0RmlsZShzZXEpCiAgdG9rID0+CkV4cG9ydE5hbWUoc2VxKQogIHRvayA9PgpCeXRlU2VxdWVuY2UodG9rZW5zKQoobiwgdCkgPT4KTW9kdWxlTG9hZGVyKG1vZHVsZSkKUHJvY2Vzc0ZpbGUoc291cmNlLCBsb2cgPSAoKSA9PiB7fSwgcmVjdXJzaXZlLCBkZXB0aCA9IDApCiAgLmhhbmRsZXIgPSBsZXggPT4KICAuYmVnaW5Db2RlID0gKCkgPT4KICBiYWxhbmNlciA9ICgpID0+CiAgc2VsZiA9IGZ1bmN0aW9uIFBhcmVudGhlc2VCYWxhbmNlcih0b2spCiAgcyA9PgogIHJlc2V0KCkKICBnZXQgZGVwdGgoKQogIHNob3dUb2tlbiA9IHRvayA9PgpQYXRoQWRqdXN0ID0gcyA9PgogIGkgPT4KRXhwb3J0KHRva2VucywgcmVsYXRpdmVQYXRoID0gcyA9PiBzKQogIHRvayA9PgogIHRvayA9PgogIHRvayA9PgogIHRvayA9PgogIHRvayA9PgogIHRvayA9PgogIHBhdGgoKQpFeHBvcnQKRXhwb3J0CiAgaWRzKCkKKHsgbGV4ZW1lIH0pID0+CiAgaWRtYXAoKQpJbXBvcnQodG9rZW5zLCByZWxhdGl2ZVBhdGggPSBzID0+IHMsIGRlcHRoKQogIHBhdGgoKQpJbXBvcnQKICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KSW1wb3J0CiAgaWRzKCkKKHsgbGV4ZW1lIH0pID0+CiAgaWRtYXAoKQogIHRvQ29kZShmaWx0ZXJJZHMgPSBpZCA9PiB0cnVlKQogIHRvayA9PgooYWNjLCB0b2ssIGkpID0+CiAgZXhwID0+CiAgZXhwID0+CiAgdG9rID0+CihhLCBiKSA9PgogIGltcCA9PgooYWNjLCBpbXApID0+CiAgYiA9PgogIGltcCA9PgogIGlkID0+CiAgaWQgPT4KQWRkRGVwKHNvdXJjZSwgZmlsZSkKSXNXUyh0b2spCk5vbldTKHRva2VucykKICB0b2sgPT4KTGVhZGluZ1dTKHN0cikKVG9rZW5TZXF1ZW5jZSh0b2tlbnMpCiAgdG9rID0+CiAgdG9TdHJpbmcoKQpBZGRXaGl0ZXNwYWNlKHRva2VucykKKGFjYywgdG9rKSA9PgpVbnF1b3RlKGxleGVtZSkKTGl0ZXJhbFNlcXVlbmNlKHRva2VucykKKGFjYywgdG9rKSA9PgpVbnRpbEVPTChpZHgsIHRva2VucykKVW50aWwoaWR4LCB0b2tlbnMsIHByZWQgPSAKKG51bGwsIFsnOycsICdcbiddKSkKV2hvbGVMaW5lKGlkeCwgdG9rZW5zKQpSYW5nZShmaWxlLCBzdGFydCwgZW5kKQpSYW5nZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpCkluUmFuZ2UoW3N0YXJ0LCBlbmRdLCBpKQpJc1JhbmdlKG9iaikKTnVtZXJpY1JhbmdlCiAgY29uc3RydWN0b3Ioc3RhcnQsIGVuZCkKICBnZXQgc3RhcnQoKQogIHNldCBzdGFydCh2YWx1ZSkKICBnZXQgZW5kKCkKICBzZXQgZW5kKHZhbHVlKQogIGdldCBzaXplKCkKICBjbG9uZSgpCiAgaW5zaWRlKG4pCiAgc3RhdGljIGZyb20ocmFuZ2UpCiAgc3RhdGljICpob2xlcyhyYW5nZXMsIG9ubHkgPSBmYWxzZSkKICBzdGF0aWMgYmV0d2VlbihbczEsIGUxXSwgW3MyLCBlMl0pCk51bWVyaWNSYW5nZQogIHBhZCA9IHMgPT4KRmlsZU1hcAogIGNvbnN0cnVjdG9yKGZpbGUsIGJ1ZikKICBnZXQgYnVmZmVyKCkKICBzdGF0aWMgZW1wdHkoZmlsZSkKICBpc0VtcHR5KCkKICBzdGF0aWMgZm9yKGZpbGUsIGJ1ZikKICBpc0VtcHR5KCkKICB0b1N0cmluZygpCkZpbGVNYXAKICBmaW5kU2xpY2UocG9zKQooW3JhbmdlLCBidWZdKSA9PgogIHNwbGl0QXQocG9zKQogIGZpbmRQb3MocG9zKQogIGluc2VydEF0KHBvcywgZmlsZSkKICBpbnNlcnQoaW5kZXgsIGZpbGUpCiAgcmVwbGFjZVJhbmdlKHJhbmdlLCBmaWxlKQogIHNsaWNlSW5kZXggPSBuID0+CiAgc3RyaW5nQXQobikKICAoYnVmLCBsZW4pID0+CiAgcmFuZ2VBdChuKQogIGdldCByYW5nZXMoKQogIGR1bXAoKQooaXRlbSwgaSkgPT4KKGFjYywgW3JhbmdlLCBidWYsIHN0cl0sIGkpID0+CiAgYXQoaSkKICB0b0FycmF5KCkKKHMsIGkpID0+CiAgaG9sZXMoKQooW3JhbmdlXSkgPT4KICBmaXJzdENodW5rKCkKKFtyYW5nZSwgYnVmXSwgaSkgPT4KICBsYXN0Q2h1bmsoKQooW3JhbmdlLCBidWZdLCBpKSA9PgogIHdyaXRlKG91dCwgZGVwdGggPSAwLCBzZXJpYWwpCiAgdG9TdHJpbmcoKQooaXRlbSwgaSkgPT4KKHBhcnQsIGkpID0+CihpdGVtLCBpKSA9PgpGaWxlTWFwCkJ1ZmZlckZpbGUoZmlsZSwgYnVmKQpCdWZmZXJMZW5ndGhzKGZpbGUpCiAgYiA9PgpCdWZmZXJPZmZzZXRzKGZpbGUpCihbcG9zLCBsaXN0XSwgYikgPT4KQnVmZmVyUmFuZ2VzKGZpbGUpCihbcG9zLCBsaXN0XSwgYikgPT4KV3JpdGVGaWxlKG5hbWUsIGRhdGEsIG9wdHMgPSB7fSkKRHVtcExleGVyKGxleCkKRHVtcFRva2VuKHRvaykKRGVwZW5kZW5jeVRyZWUoIHJvb3QsIGluZGVudCA9ICcgJywgc3BhY2luZyA9IGZhbHNlLCBkZXB0aCA9IDAsIHByZSA9ICcnLCBmbiA9IChuYW1lLCBkZXB0aCkgPT4gYCR7bmFtZX0gKCR7ZGVwdGh9KWAgKQogIHN0cmlwTGVhZGluZ0RvdFNsYXNoKG4pClNwcmVhZEFuZEpvaW4oaXRlcmF0b3IsIHNlcGFyYXRvciA9ICcnKQpQcmludFVzZXJzY3JpcHRCYW5uZXIoZmllbGRzKQpQcmludEVTNkltcG9ydChpbXApCiAgKHsgbG9jYWwsIGZpbGUgfSkgPT4KICAoeyBsb2NhbCwgZmlsZSB9KSA9PgogICh7IGxvY2FsLCBmaWxlIH0pID0+ClByaW50Q0pTSW1wb3J0KHsgdHlwZSwgbG9jYWwsIGZpbGUgfSkKICAoKSA9PgogICgpID0+CiAgKCkgPT4KICBtYWluKC4uLmFyZ3MpCiAgd3JpdGUoYnVmLCBsZW4pCiAgcHV0cyhzKQogIGxpbmUgPT4KICBjbG9zZSgpCiAgaXNXUyA9IHMgPT4KICAoKSA9PgogIGZpbGUgPT4KICAoKSA9PgogICgpID0+CiAgYXJnID0+CiAgZmlsZSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgpTaG93SGVscCgpCihhY2MsIFtuYW1lXSkgPT4KICAoYWNjLCBbbmFtZSwgW2hhc0FyZywgZm4sIHNob3J0T3B0XV0pID0+CiAgYXJnID0+CiAgKCkgPT4KICAoLi4uYXJncykgPT4KUmVsYXRpdmVQYXRoID0gZmlsZSA9PgpDb250YWluc0FueSA9IChhcnIsIHRva2VucykgPT4KICB0b2sgPT4KICBpbXBleHAgPT4KICBoZHIgPT4KICAoW2FjYywgcHJldl0sIGhkcikgPT4KKGFjYywgbGluZSkgPT4KKHsgZGVwdGggfSkgPT4KKHsgbmFtZSB9KSA9PgogIG5hbWUgPT4AAAAAAAAAAKoQAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					220,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqEAAAQXJndW1lbnRFcnJvcgogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpCiAgbG9nRmlsZSA9ICgpID0+CiAgbG9nID0gKCkgPT4KICBhbGxJbXBvcnRzKCkKICBhcmcgPT4KUmVhZEpTT04oZmlsZW5hbWUpCigpID0+CkltcG9ydGVkQnkoaW1wb3J0RmlsZSkKUmVzb2x2ZUFsaWFzKGZpbGVuYW1lKQpJc0ZpbGVJbXBvcnQoZmlsZW5hbWUpCk5vcm1hbGl6ZVBhdGgocCkKRmlsZUJhbm5lckNvbW1lbnQgPSAoZmlsZW5hbWUsIGkpID0+CklzQnVpbHRpbiA9IG1vZHVsZU5hbWUgPT4KICBjb21wYWN0ID0gKG4sIG1vcmUgPSB7fSkgPT4KQWRkVW5pcXVlID0gKGFyciwgaXRlbSkgPT4KSW50VG9EV29yZCA9IGl2YWwgPT4KSW50VG9CaW5hcnkgPSBpID0+CihuLCB2YWx1ZSkgPT4KICBudW0gPT4KKHR5cGUsIGxleGVtZSwgdG9rKSA9PgpDb21wYXJlUmFuZ2UgPSAoYSwgYikgPT4KUHV0c0Z1bmN0aW9uID0gb3V0Rm4gPT4gc3RyID0+CklzV2hpdGVTcGFjZSA9IHN0ciA9PgogIGRlYnVnTG9nID0gKHN0ciwgLi4uYXJncykgPT4KICBwcmVkID0gYXJnID0+CihhY2MsIG9wdCkgPT4KICBhcmcgPT4KT3V0cHV0SW1wb3J0cyhpbXBvcnRzID0gZ2xvYmFsSW1wb3J0cykKKFtuYW1lLCBvYmpdKSA9PgooW2xvY2FsLCBuYW1lXSkgPT4KRmlsZVdyaXRlcihmaWxlLCBtb2RlID0gMG83NTUpCiAgY2xvc2U6ICgpID0+CkZpbGVSZXBsYWNlcihmaWxlKQogIGNsb3NlOiAoKSA9PgpGZFdyaXRlcihmZCwgZmlsZSkKICBmbiA9IChidWYsIGxlbikgPT4KICBjbG9zZTogKCkgPT4KICBzZWVrOiAod2hlbmNlLCBvZmZzZXQpID0+CiAgaW5zcGVjdCgpCkFycmF5V3JpdGVyKCBhcnIsIHQgPSAoYnVmLCBsZW4pID0+IHsgaWYoIXR5cGVzLgooYnVmKSkgYnVmID0gCihidWYpOyByZXR1cm4gYnVmLgooMCwgbGVuID8/IGJ1Zi5ieXRlTGVuZ3RoKTsgfSApCiAgZm4gPSAoYnVmLCBsZW4pID0+CiAgY2xvc2U6ICgpID0+CiAgaW5zcGVjdCgpCkR1bW15V3JpdGVyKG5hbWUpCiAgZm4gPSAoYnVmLCBsZW4pID0+CiAgY2xvc2U6ICgpID0+CiAgc2VlazogKCkgPT4KICBpbnNwZWN0KCkKSW1wb3J0SWRzKHNlcSkKICB0b2sgPT4KSW1wb3J0SWRNYXAoc2VxKQpJbXBFeHBUeXBlKHNlcSkKICB0b2sgPT4KICB0b2sgPT4KSW1wb3J0VHlwZShzZXEpCkltcG9ydEZpbGUoc2VxKQogIHRvayA9PgpFeHBvcnROYW1lKHNlcSkKICB0b2sgPT4KQnl0ZVNlcXVlbmNlKHRva2VucykKKG4sIHQpID0+Ck1vZHVsZUxvYWRlcihtb2R1bGUpClByb2Nlc3NGaWxlKHNvdXJjZSwgbG9nID0gKCkgPT4ge30sIHJlY3Vyc2l2ZSwgZGVwdGggPSAwKQogIC5oYW5kbGVyID0gbGV4ID0+CiAgLmJlZ2luQ29kZSA9ICgpID0+CiAgYmFsYW5jZXIgPSAoKSA9PgogIHNlbGYgPSBmdW5jdGlvbiBQYXJlbnRoZXNlQmFsYW5jZXIodG9rKQogIHMgPT4KICByZXNldCgpCiAgZ2V0IGRlcHRoKCkKICBzaG93VG9rZW4gPSB0b2sgPT4KUGF0aEFkanVzdCA9IHMgPT4KICBpID0+CkV4cG9ydCh0b2tlbnMsIHJlbGF0aXZlUGF0aCA9IHMgPT4gcykKICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICBwYXRoKCkKRXhwb3J0CkV4cG9ydAogIGlkcygpCih7IGxleGVtZSB9KSA9PgogIGlkbWFwKCkKSW1wb3J0KHRva2VucywgcmVsYXRpdmVQYXRoID0gcyA9PiBzLCBkZXB0aCkKICBwYXRoKCkKSW1wb3J0CiAgdG9rID0+CiAgdG9rID0+CiAgdG9rID0+CiAgdG9rID0+CkltcG9ydAogIGlkcygpCih7IGxleGVtZSB9KSA9PgogIGlkbWFwKCkKICB0b0NvZGUoZmlsdGVySWRzID0gaWQgPT4gdHJ1ZSkKICB0b2sgPT4KKGFjYywgdG9rLCBpKSA9PgogIGV4cCA9PgogIGV4cCA9PgogIHRvayA9PgooYSwgYikgPT4KICBpbXAgPT4KKGFjYywgaW1wKSA9PgogIGIgPT4KICBpbXAgPT4KICBpZCA9PgogIGlkID0+CkFkZERlcChzb3VyY2UsIGZpbGUpCklzV1ModG9rKQpOb25XUyh0b2tlbnMpCiAgdG9rID0+CkxlYWRpbmdXUyhzdHIpClRva2VuU2VxdWVuY2UodG9rZW5zKQogIHRvayA9PgogIHRvU3RyaW5nKCkKQWRkV2hpdGVzcGFjZSh0b2tlbnMpCihhY2MsIHRvaykgPT4KVW5xdW90ZShsZXhlbWUpCkxpdGVyYWxTZXF1ZW5jZSh0b2tlbnMpCihhY2MsIHRvaykgPT4KVW50aWxFT0woaWR4LCB0b2tlbnMpClVudGlsKGlkeCwgdG9rZW5zLCBwcmVkID0gCihudWxsLCBbJzsnLCAnXG4nXSkpCldob2xlTGluZShpZHgsIHRva2VucykKUmFuZ2UoZmlsZSwgc3RhcnQsIGVuZCkKUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKQpJblJhbmdlKFtzdGFydCwgZW5kXSwgaSkKSXNSYW5nZShvYmopCk51bWVyaWNSYW5nZQogIGNvbnN0cnVjdG9yKHN0YXJ0LCBlbmQpCiAgZ2V0IHN0YXJ0KCkKICBzZXQgc3RhcnQodmFsdWUpCiAgZ2V0IGVuZCgpCiAgc2V0IGVuZCh2YWx1ZSkKICBnZXQgc2l6ZSgpCiAgY2xvbmUoKQogIGluc2lkZShuKQogIHN0YXRpYyBmcm9tKHJhbmdlKQogIHN0YXRpYyAqaG9sZXMocmFuZ2VzLCBvbmx5ID0gZmFsc2UpCiAgc3RhdGljIGJldHdlZW4oW3MxLCBlMV0sIFtzMiwgZTJdKQpOdW1lcmljUmFuZ2UKICBwYWQgPSBzID0+CkZpbGVNYXAKICBjb25zdHJ1Y3RvcihmaWxlLCBidWYpCiAgZ2V0IGJ1ZmZlcigpCiAgc3RhdGljIGVtcHR5KGZpbGUpCiAgaXNFbXB0eSgpCiAgc3RhdGljIGZvcihmaWxlLCBidWYpCiAgaXNFbXB0eSgpCiAgdG9TdHJpbmcoKQpGaWxlTWFwCiAgZmluZFNsaWNlKHBvcykKKFtyYW5nZSwgYnVmXSkgPT4KICBzcGxpdEF0KHBvcykKICBmaW5kUG9zKHBvcykKICBpbnNlcnRBdChwb3MsIGZpbGUpCiAgaW5zZXJ0KGluZGV4LCBmaWxlKQogIHJlcGxhY2VSYW5nZShyYW5nZSwgZmlsZSkKICBzbGljZUluZGV4ID0gbiA9PgogIHN0cmluZ0F0KG4pCiAgKGJ1ZiwgbGVuKSA9PgogIHJhbmdlQXQobikKICBnZXQgcmFuZ2VzKCkKICBkdW1wKCkKKGl0ZW0sIGkpID0+CihhY2MsIFtyYW5nZSwgYnVmLCBzdHJdLCBpKSA9PgogIGF0KGkpCiAgdG9BcnJheSgpCihzLCBpKSA9PgogIGhvbGVzKCkKKFtyYW5nZV0pID0+CiAgZmlyc3RDaHVuaygpCihbcmFuZ2UsIGJ1Zl0sIGkpID0+CiAgbGFzdENodW5rKCkKKFtyYW5nZSwgYnVmXSwgaSkgPT4KICB3cml0ZShvdXQsIGRlcHRoID0gMCwgc2VyaWFsKQogIHRvU3RyaW5nKCkKKGl0ZW0sIGkpID0+CihwYXJ0LCBpKSA9PgooaXRlbSwgaSkgPT4KRmlsZU1hcApCdWZmZXJGaWxlKGZpbGUsIGJ1ZikKQnVmZmVyTGVuZ3RocyhmaWxlKQogIGIgPT4KQnVmZmVyT2Zmc2V0cyhmaWxlKQooW3BvcywgbGlzdF0sIGIpID0+CkJ1ZmZlclJhbmdlcyhmaWxlKQooW3BvcywgbGlzdF0sIGIpID0+CldyaXRlRmlsZShuYW1lLCBkYXRhLCBvcHRzID0ge30pCkR1bXBMZXhlcihsZXgpCkR1bXBUb2tlbih0b2spCkRlcGVuZGVuY3lUcmVlKCByb290LCBpbmRlbnQgPSAnICcsIHNwYWNpbmcgPSBmYWxzZSwgZGVwdGggPSAwLCBwcmUgPSAnJywgZm4gPSAobmFtZSwgZGVwdGgpID0+IGAke25hbWV9ICgke2RlcHRofSlgICkKICBzdHJpcExlYWRpbmdEb3RTbGFzaChuKQpTcHJlYWRBbmRKb2luKGl0ZXJhdG9yLCBzZXBhcmF0b3IgPSAnJykKUHJpbnRVc2Vyc2NyaXB0QmFubmVyKGZpZWxkcykKUHJpbnRFUzZJbXBvcnQoaW1wKQogICh7IGxvY2FsLCBmaWxlIH0pID0+CiAgKHsgbG9jYWwsIGZpbGUgfSkgPT4KICAoeyBsb2NhbCwgZmlsZSB9KSA9PgpQcmludENKU0ltcG9ydCh7IHR5cGUsIGxvY2FsLCBmaWxlIH0pCiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgbWFpbiguLi5hcmdzKQogIHdyaXRlKGJ1ZiwgbGVuKQogIHB1dHMocykKICBsaW5lID0+CiAgY2xvc2UoKQogIGlzV1MgPSBzID0+CiAgKCkgPT4KICBmaWxlID0+CiAgKCkgPT4KICAoKSA9PgogIGFyZyA9PgogIGZpbGUgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KU2hvd0hlbHAoKQooYWNjLCBbbmFtZV0pID0+CiAgKGFjYywgW25hbWUsIFtoYXNBcmcsIGZuLCBzaG9ydE9wdF1dKSA9PgogIGFyZyA9PgogICgpID0+CiAgKC4uLmFyZ3MpID0+ClJlbGF0aXZlUGF0aCA9IGZpbGUgPT4KQ29udGFpbnNBbnkgPSAoYXJyLCB0b2tlbnMpID0+CiAgdG9rID0+CiAgaW1wZXhwID0+CiAgaGRyID0+CiAgKFthY2MsIHByZXZdLCBoZHIpID0+CihhY2MsIGxpbmUpID0+Cih7IGRlcHRoIH0pID0+Cih7IG5hbWUgfSkgPT4KICBuYW1lID0+AAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					221,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/location.h",
						"symkeys":
						[
							[
								27,
								37
							],
							[
								317,
								325
							],
							[
								377,
								390
							],
							[
								448,
								462
							],
							[
								508,
								525
							],
							[
								562,
								575
							],
							[
								614,
								630
							],
							[
								666,
								679
							],
							[
								697,
								710
							],
							[
								728,
								740
							],
							[
								775,
								787
							],
							[
								822,
								841
							],
							[
								876,
								892
							],
							[
								924,
								938
							],
							[
								985,
								998
							],
							[
								1050,
								1064
							],
							[
								1105,
								1117
							],
							[
								1151,
								1167
							],
							[
								1283,
								1296
							],
							[
								1403,
								1418
							],
							[
								1546,
								1558
							]
						],
						"symlist":
						[
							"LOCATION_H",
							"LOCATION",
							"LOCATION_FILE",
							"location_print",
							"location_tostring",
							"location_file",
							"location_tovalue",
							"location_init",
							"location_zero",
							"location_add",
							"location_sub",
							"location_release_rt",
							"location_free_rt",
							"location_count",
							"location_copy",
							"location_clone",
							"location_new",
							"location_release",
							"location_free",
							"location_isnull",
							"location_dup"
						]
					},
					"AQAAAAAAAAAAAAAAVQEAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					222,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABVAQAATE9DQVRJT05fSApMT0NBVElPTgpMT0NBVElPTl9GSUxFCiAgbG9jYXRpb25fcHJpbnQKICBsb2NhdGlvbl90b3N0cmluZwogIGxvY2F0aW9uX2ZpbGUKICBsb2NhdGlvbl90b3ZhbHVlCiAgbG9jYXRpb25faW5pdAogIGxvY2F0aW9uX3plcm8KICBsb2NhdGlvbl9hZGQKICBsb2NhdGlvbl9zdWIKICBsb2NhdGlvbl9yZWxlYXNlX3J0CiAgbG9jYXRpb25fZnJlZV9ydAogIGxvY2F0aW9uX2NvdW50CiAgbG9jYXRpb25fY29weQogIGxvY2F0aW9uX2Nsb25lCiAgbG9jYXRpb25fbmV3CiAgbG9jYXRpb25fcmVsZWFzZQogIGxvY2F0aW9uX2ZyZWUKICBsb2NhdGlvbl9pc251bGwKICBsb2NhdGlvbl9kdXAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					223,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/location.h",
						"symkeys":
						[
							[
								27,
								37
							],
							[
								317,
								325
							],
							[
								377,
								390
							],
							[
								448,
								462
							],
							[
								508,
								525
							],
							[
								562,
								575
							],
							[
								614,
								630
							],
							[
								666,
								679
							],
							[
								697,
								710
							],
							[
								728,
								740
							],
							[
								775,
								787
							],
							[
								822,
								841
							],
							[
								876,
								892
							],
							[
								924,
								938
							],
							[
								985,
								998
							],
							[
								1050,
								1064
							],
							[
								1105,
								1117
							],
							[
								1151,
								1167
							],
							[
								1283,
								1296
							],
							[
								1403,
								1418
							],
							[
								1546,
								1558
							]
						],
						"symlist":
						[
							"LOCATION_H",
							"LOCATION",
							"LOCATION_FILE",
							"location_print",
							"location_tostring",
							"location_file",
							"location_tovalue",
							"location_init",
							"location_zero",
							"location_add",
							"location_sub",
							"location_release_rt",
							"location_free_rt",
							"location_count",
							"location_copy",
							"location_clone",
							"location_new",
							"location_release",
							"location_free",
							"location_isnull",
							"location_dup"
						]
					},
					"AQAAAAAAAAAAAAAAVQEAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					224,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/location.h",
						"symkeys":
						[
							[
								27,
								37
							],
							[
								317,
								325
							],
							[
								377,
								390
							],
							[
								448,
								462
							],
							[
								508,
								525
							],
							[
								562,
								575
							],
							[
								614,
								630
							],
							[
								666,
								679
							],
							[
								697,
								710
							],
							[
								728,
								740
							],
							[
								775,
								787
							],
							[
								822,
								841
							],
							[
								876,
								892
							],
							[
								924,
								938
							],
							[
								985,
								998
							],
							[
								1050,
								1064
							],
							[
								1105,
								1117
							],
							[
								1407,
								1422
							],
							[
								1550,
								1562
							]
						],
						"symlist":
						[
							"LOCATION_H",
							"LOCATION",
							"LOCATION_FILE",
							"location_print",
							"location_tostring",
							"location_file",
							"location_tovalue",
							"location_init",
							"location_zero",
							"location_add",
							"location_sub",
							"location_release_rt",
							"location_free_rt",
							"location_count",
							"location_copy",
							"location_clone",
							"location_new",
							"location_isnull",
							"location_dup"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAABVAQAATE9DQVRJT05fSApMT0NBVElPTgpMT0NBVElPTl9GSUxFCiAgbG9jYXRpb25fcHJpbnQKICBsb2NhdGlvbl90b3N0cmluZwogIGxvY2F0aW9uX2ZpbGUKICBsb2NhdGlvbl90b3ZhbHVlCiAgbG9jYXRpb25faW5pdAogIGxvY2F0aW9uX3plcm8KICBsb2NhdGlvbl9hZGQKICBsb2NhdGlvbl9zdWIKICBsb2NhdGlvbl9yZWxlYXNlX3J0CiAgbG9jYXRpb25fZnJlZV9ydAogIGxvY2F0aW9uX2NvdW50CiAgbG9jYXRpb25fY29weQogIGxvY2F0aW9uX2Nsb25lCiAgbG9jYXRpb25fbmV3CiAgbG9jYXRpb25fcmVsZWFzZQogIGxvY2F0aW9uX2ZyZWUKICBsb2NhdGlvbl9pc251bGwKICBsb2NhdGlvbl9kdXAAAAAAAAAAADIBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyAQAATE9DQVRJT05fSApMT0NBVElPTgpMT0NBVElPTl9GSUxFCiAgbG9jYXRpb25fcHJpbnQKICBsb2NhdGlvbl90b3N0cmluZwogIGxvY2F0aW9uX2ZpbGUKICBsb2NhdGlvbl90b3ZhbHVlCiAgbG9jYXRpb25faW5pdAogIGxvY2F0aW9uX3plcm8KICBsb2NhdGlvbl9hZGQKICBsb2NhdGlvbl9zdWIKICBsb2NhdGlvbl9yZWxlYXNlX3J0CiAgbG9jYXRpb25fZnJlZV9ydAogIGxvY2F0aW9uX2NvdW50CiAgbG9jYXRpb25fY29weQogIGxvY2F0aW9uX2Nsb25lCiAgbG9jYXRpb25fbmV3CiAgbG9jYXRpb25faXNudWxsCiAgbG9jYXRpb25fZHVwAAAAAAAAAAAyAQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					225,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAyAQAATE9DQVRJT05fSApMT0NBVElPTgpMT0NBVElPTl9GSUxFCiAgbG9jYXRpb25fcHJpbnQKICBsb2NhdGlvbl90b3N0cmluZwogIGxvY2F0aW9uX2ZpbGUKICBsb2NhdGlvbl90b3ZhbHVlCiAgbG9jYXRpb25faW5pdAogIGxvY2F0aW9uX3plcm8KICBsb2NhdGlvbl9hZGQKICBsb2NhdGlvbl9zdWIKICBsb2NhdGlvbl9yZWxlYXNlX3J0CiAgbG9jYXRpb25fZnJlZV9ydAogIGxvY2F0aW9uX2NvdW50CiAgbG9jYXRpb25fY29weQogIGxvY2F0aW9uX2Nsb25lCiAgbG9jYXRpb25fbmV3CiAgbG9jYXRpb25faXNudWxsCiAgbG9jYXRpb25fZHVwAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					226,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
						"symkeys":
						[
							[
								359,
								370
							],
							[
								650,
								664
							],
							[
								934,
								951
							],
							[
								2322,
								2335
							],
							[
								2517,
								2537
							],
							[
								3752,
								3769
							],
							[
								4012,
								4032
							],
							[
								4651,
								4667
							],
							[
								6156,
								6168
							],
							[
								7638,
								7656
							],
							[
								9228,
								9242
							],
							[
								9510,
								9524
							],
							[
								9853,
								9865
							],
							[
								10495,
								10504
							],
							[
								11657,
								11674
							],
							[
								11990,
								12009
							],
							[
								12265,
								12283
							],
							[
								12566,
								12580
							],
							[
								12843,
								12854
							],
							[
								13182,
								13194
							],
							[
								13783,
								13796
							],
							[
								13964,
								13981
							],
							[
								15168,
								15188
							],
							[
								16482,
								16497
							],
							[
								24230,
								24242
							],
							[
								27581,
								27593
							],
							[
								29003,
								29018
							],
							[
								29406,
								29421
							],
							[
								29771,
								29790
							],
							[
								30539,
								30554
							],
							[
								30992,
								31009
							],
							[
								31481,
								31493
							],
							[
								33288,
								33303
							],
							[
								34136,
								34149
							],
							[
								34372,
								34385
							],
							[
								34990,
								35007
							],
							[
								35404,
								35420
							],
							[
								36470,
								36488
							],
							[
								40587,
								40600
							],
							[
								42068,
								42082
							],
							[
								42112,
								42126
							]
						],
						"symlist":
						[
							"â€ƒâ“‰â€‚â€ƒJSLexerRuleâ€‰;â€ƒâ€”â€ƒtypedef",
							"â€”â’»â€“â€ƒoffset_toarrayâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_rule_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_toprimitiveâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_continueâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_to_stateâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_handleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_escape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_unescape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_current_lineâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexeme_sâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_tokenâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_add_ruleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_methodâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_setâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tokensâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statesâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statestackâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_escapeâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextfnâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_callâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_iteratorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_initâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object"
						]
					},
					"AQAAAAAAAAAAAAAAgAYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					227,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAMCAAAICDik4kgIEpTTGV4ZXJSdWxlIDsg4oCUIHR5cGVkZWYK4oCU4pK74oCTIG9mZnNldF90b2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfcnVsZV9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl93cmFwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl90b3N0cmluZyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3RvcHJpbWl0aXZlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5faW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2NvbnRpbnVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdG9fc3RhdGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9oYW5kbGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9lc2NhcGVfcHJlZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3VuZXNjYXBlX3ByZWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9jdXJyZW50X2xpbmUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXhlbWVfcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3Rva2VuICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfd3JhcCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2FkZF9ydWxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9tZXRob2QgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9nZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl90b2tlbnMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXN0YWNrICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfZXNjYXBlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfdG9zdHJpbmcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0Zm4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY2FsbCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2l0ZXJhdG9yICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAg4pOCICBKU19JTklUX01PRFVMRSDigKYg4oCUIG1hY3JvIG9iamVjdAogIOKTgiAgSlNfSU5JVF9NT0RVTEUg4oCmIOKAlCBtYWNybyBvYmplY3QAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					228,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
						"symkeys":
						[
							[
								359,
								370
							],
							[
								650,
								664
							],
							[
								934,
								951
							],
							[
								2322,
								2335
							],
							[
								2517,
								2537
							],
							[
								3752,
								3769
							],
							[
								4012,
								4032
							],
							[
								4651,
								4667
							],
							[
								6156,
								6168
							],
							[
								7638,
								7656
							],
							[
								9228,
								9242
							],
							[
								9510,
								9524
							],
							[
								9853,
								9865
							],
							[
								10495,
								10504
							],
							[
								11657,
								11674
							],
							[
								11990,
								12009
							],
							[
								12265,
								12283
							],
							[
								12566,
								12580
							],
							[
								12843,
								12854
							],
							[
								13182,
								13194
							],
							[
								13783,
								13796
							],
							[
								13964,
								13981
							],
							[
								15168,
								15188
							],
							[
								16482,
								16497
							],
							[
								24230,
								24242
							],
							[
								27581,
								27593
							],
							[
								29003,
								29018
							],
							[
								29406,
								29421
							],
							[
								29771,
								29790
							],
							[
								30539,
								30554
							],
							[
								30992,
								31009
							],
							[
								31481,
								31493
							],
							[
								33288,
								33303
							],
							[
								34136,
								34149
							],
							[
								34372,
								34385
							],
							[
								34990,
								35007
							],
							[
								35404,
								35420
							],
							[
								36470,
								36488
							],
							[
								40587,
								40600
							],
							[
								42068,
								42082
							],
							[
								42112,
								42126
							]
						],
						"symlist":
						[
							"â€ƒâ“‰â€‚â€ƒJSLexerRuleâ€‰;â€ƒâ€”â€ƒtypedef",
							"â€”â’»â€“â€ƒoffset_toarrayâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_rule_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_toprimitiveâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_continueâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_to_stateâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_handleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_escape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_unescape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_current_lineâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexeme_sâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_tokenâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_add_ruleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_methodâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_setâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tokensâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statesâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statestackâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_escapeâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextfnâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_callâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_iteratorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_initâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object"
						]
					},
					"AQAAAAAAAAAAAAAAgAYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					229,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAMCAAAICDik4kgIEpTTGV4ZXJSdWxlIDsg4oCUIHR5cGVkZWYK4oCU4pK74oCTIG9mZnNldF90b2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfcnVsZV9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl93cmFwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl90b3N0cmluZyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3RvcHJpbWl0aXZlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5faW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2NvbnRpbnVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdG9fc3RhdGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9oYW5kbGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9lc2NhcGVfcHJlZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3VuZXNjYXBlX3ByZWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9jdXJyZW50X2xpbmUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXhlbWVfcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3Rva2VuICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfd3JhcCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2FkZF9ydWxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9tZXRob2QgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9nZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl90b2tlbnMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXN0YWNrICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfZXNjYXBlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfdG9zdHJpbmcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0Zm4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY2FsbCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2l0ZXJhdG9yICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAg4pOCICBKU19JTklUX01PRFVMRSDigKYg4oCUIG1hY3JvIG9iamVjdAogIOKTgiAgSlNfSU5JVF9NT0RVTEUg4oCmIOKAlCBtYWNybyBvYmplY3QAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					230,
					3,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
						"symkeys":
						[
							[
								359,
								370
							],
							[
								650,
								664
							],
							[
								934,
								951
							],
							[
								2322,
								2335
							],
							[
								2517,
								2537
							],
							[
								3752,
								3769
							],
							[
								4012,
								4032
							],
							[
								4651,
								4667
							],
							[
								6156,
								6168
							],
							[
								7638,
								7656
							],
							[
								9228,
								9242
							],
							[
								9510,
								9524
							],
							[
								9853,
								9865
							],
							[
								10495,
								10504
							],
							[
								11657,
								11674
							],
							[
								11990,
								12009
							],
							[
								12265,
								12283
							],
							[
								12566,
								12580
							],
							[
								12843,
								12854
							],
							[
								13182,
								13194
							],
							[
								13783,
								13796
							],
							[
								13964,
								13981
							],
							[
								15168,
								15188
							],
							[
								16482,
								16497
							],
							[
								24230,
								24242
							],
							[
								27581,
								27593
							],
							[
								29003,
								29018
							],
							[
								29406,
								29421
							],
							[
								29771,
								29790
							],
							[
								30539,
								30554
							],
							[
								30992,
								31009
							],
							[
								31481,
								31493
							],
							[
								33288,
								33303
							],
							[
								34136,
								34149
							],
							[
								34372,
								34385
							],
							[
								34990,
								35007
							],
							[
								35404,
								35420
							],
							[
								36470,
								36488
							],
							[
								40587,
								40600
							],
							[
								42068,
								42082
							],
							[
								42112,
								42126
							]
						],
						"symlist":
						[
							"â€ƒâ“‰â€‚â€ƒJSLexerRuleâ€‰;â€ƒâ€”â€ƒtypedef",
							"â€”â’»â€“â€ƒoffset_toarrayâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_rule_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_toprimitiveâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_continueâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_to_stateâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_handleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_escape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_unescape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_current_lineâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexeme_sâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_tokenâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_add_ruleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_methodâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_setâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tokensâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statesâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statestackâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_escapeâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextfnâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_callâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_iteratorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_initâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object"
						]
					},
					"BQAAAAAAAAAAAAAAgAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwIAAAgIOKTiSAgSlNMZXhlclJ1bGUgOyDigJQgdHlwZWRlZgrigJTikrvigJMgb2Zmc2V0X3RvYXJyYXkgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9ydWxlX25ldyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3dyYXAgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl9jb25zdHJ1Y3RvciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3Rvc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fdG9wcmltaXRpdmUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl9pbnNwZWN0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fZ2V0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fZmluYWxpemVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfY29udGludWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl90b19zdGF0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2hhbmRsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2xleCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2VzY2FwZV9wcmVkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdW5lc2NhcGVfcHJlZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2N1cnJlbnRfbGluZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2xleGVtZV9zICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdG9rZW4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl93cmFwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfYWRkX3J1bGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9jb25zdHJ1Y3RvciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX21ldGhvZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3NldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3Rva2VucyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3N0YXRlcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3N0YXRlc3RhY2sgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9lc2NhcGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl90b3N0cmluZyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2xleCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX25leHRmbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX25leHQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9jYWxsICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaXRlcmF0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9pbnNwZWN0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfZmluYWxpemVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaW5pdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICDik4IgIEpTX0lOSVRfTU9EVUxFIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBKU19JTklUX01PRFVMRSDigKYg4oCUIG1hY3JvIG9iamVjdAAAAAAAAAAAgAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwIAAAgIOKTiSAgSlNMZXhlclJ1bGUgOyDigJQgdHlwZWRlZgrigJTikrvigJMgb2Zmc2V0X3RvYXJyYXkgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9ydWxlX25ldyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3dyYXAgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl9jb25zdHJ1Y3RvciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3Rvc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fdG9wcmltaXRpdmUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl9pbnNwZWN0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fZ2V0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fZmluYWxpemVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfY29udGludWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl90b19zdGF0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2hhbmRsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2xleCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2VzY2FwZV9wcmVkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdW5lc2NhcGVfcHJlZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2N1cnJlbnRfbGluZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2xleGVtZV9zICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdG9rZW4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl93cmFwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfYWRkX3J1bGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9jb25zdHJ1Y3RvciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX21ldGhvZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3NldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3Rva2VucyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3N0YXRlcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX3N0YXRlc3RhY2sgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9lc2NhcGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl90b3N0cmluZyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2xleCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX25leHRmbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX25leHQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9jYWxsICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaXRlcmF0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9pbnNwZWN0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfZmluYWxpemVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaW5pdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICDik4IgIEpTX0lOSVRfTU9EVUxFIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBKU19JTklUX01PRFVMRSDigKYg4oCUIG1hY3JvIG9iamVjdAAAAAAAAAAAgAYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					231,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/location.h",
						"symkeys":
						[
							[
								27,
								37
							],
							[
								317,
								325
							],
							[
								377,
								390
							],
							[
								448,
								462
							],
							[
								508,
								525
							],
							[
								562,
								575
							],
							[
								614,
								630
							],
							[
								666,
								679
							],
							[
								697,
								710
							],
							[
								728,
								740
							],
							[
								775,
								787
							],
							[
								822,
								841
							],
							[
								876,
								892
							],
							[
								924,
								938
							],
							[
								985,
								998
							],
							[
								1050,
								1064
							],
							[
								1105,
								1117
							],
							[
								1407,
								1422
							],
							[
								1550,
								1562
							]
						],
						"symlist":
						[
							"LOCATION_H",
							"LOCATION",
							"LOCATION_FILE",
							"location_print",
							"location_tostring",
							"location_file",
							"location_tovalue",
							"location_init",
							"location_zero",
							"location_add",
							"location_sub",
							"location_release_rt",
							"location_free_rt",
							"location_count",
							"location_copy",
							"location_clone",
							"location_new",
							"location_isnull",
							"location_dup"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAMCAAAICDik4kgIEpTTGV4ZXJSdWxlIDsg4oCUIHR5cGVkZWYK4oCU4pK74oCTIG9mZnNldF90b2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfcnVsZV9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl93cmFwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl90b3N0cmluZyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3RvcHJpbWl0aXZlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5faW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2NvbnRpbnVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdG9fc3RhdGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9oYW5kbGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9lc2NhcGVfcHJlZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3VuZXNjYXBlX3ByZWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9jdXJyZW50X2xpbmUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXhlbWVfcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3Rva2VuICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfd3JhcCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2FkZF9ydWxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9tZXRob2QgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9nZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl90b2tlbnMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXN0YWNrICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfZXNjYXBlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfdG9zdHJpbmcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0Zm4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY2FsbCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2l0ZXJhdG9yICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAg4pOCICBKU19JTklUX01PRFVMRSDigKYg4oCUIG1hY3JvIG9iamVjdAogIOKTgiAgSlNfSU5JVF9NT0RVTEUg4oCmIOKAlCBtYWNybyBvYmplY3QAAAAAAAAAADIBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					232,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/location.h",
						"symkeys":
						[
							[
								27,
								37
							],
							[
								317,
								325
							],
							[
								377,
								390
							],
							[
								448,
								462
							],
							[
								508,
								525
							],
							[
								562,
								575
							],
							[
								614,
								630
							],
							[
								666,
								679
							],
							[
								697,
								710
							],
							[
								728,
								740
							],
							[
								775,
								787
							],
							[
								822,
								841
							],
							[
								876,
								892
							],
							[
								924,
								938
							],
							[
								985,
								998
							],
							[
								1050,
								1064
							],
							[
								1105,
								1117
							],
							[
								1151,
								1167
							],
							[
								1283,
								1296
							],
							[
								1403,
								1418
							],
							[
								1546,
								1558
							]
						],
						"symlist":
						[
							"LOCATION_H",
							"LOCATION",
							"LOCATION_FILE",
							"location_print",
							"location_tostring",
							"location_file",
							"location_tovalue",
							"location_init",
							"location_zero",
							"location_add",
							"location_sub",
							"location_release_rt",
							"location_free_rt",
							"location_count",
							"location_copy",
							"location_clone",
							"location_new",
							"location_release",
							"location_free",
							"location_isnull",
							"location_dup"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAyAQAATE9DQVRJT05fSApMT0NBVElPTgpMT0NBVElPTl9GSUxFCiAgbG9jYXRpb25fcHJpbnQKICBsb2NhdGlvbl90b3N0cmluZwogIGxvY2F0aW9uX2ZpbGUKICBsb2NhdGlvbl90b3ZhbHVlCiAgbG9jYXRpb25faW5pdAogIGxvY2F0aW9uX3plcm8KICBsb2NhdGlvbl9hZGQKICBsb2NhdGlvbl9zdWIKICBsb2NhdGlvbl9yZWxlYXNlX3J0CiAgbG9jYXRpb25fZnJlZV9ydAogIGxvY2F0aW9uX2NvdW50CiAgbG9jYXRpb25fY29weQogIGxvY2F0aW9uX2Nsb25lCiAgbG9jYXRpb25fbmV3CiAgbG9jYXRpb25faXNudWxsCiAgbG9jYXRpb25fZHVwAAAAAAAAAABVAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVQEAAExPQ0FUSU9OX0gKTE9DQVRJT04KTE9DQVRJT05fRklMRQogIGxvY2F0aW9uX3ByaW50CiAgbG9jYXRpb25fdG9zdHJpbmcKICBsb2NhdGlvbl9maWxlCiAgbG9jYXRpb25fdG92YWx1ZQogIGxvY2F0aW9uX2luaXQKICBsb2NhdGlvbl96ZXJvCiAgbG9jYXRpb25fYWRkCiAgbG9jYXRpb25fc3ViCiAgbG9jYXRpb25fcmVsZWFzZV9ydAogIGxvY2F0aW9uX2ZyZWVfcnQKICBsb2NhdGlvbl9jb3VudAogIGxvY2F0aW9uX2NvcHkKICBsb2NhdGlvbl9jbG9uZQogIGxvY2F0aW9uX25ldwogIGxvY2F0aW9uX3JlbGVhc2UKICBsb2NhdGlvbl9mcmVlCiAgbG9jYXRpb25faXNudWxsCiAgbG9jYXRpb25fZHVwAAAAAAAAAABVAQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					233,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABVAQAATE9DQVRJT05fSApMT0NBVElPTgpMT0NBVElPTl9GSUxFCiAgbG9jYXRpb25fcHJpbnQKICBsb2NhdGlvbl90b3N0cmluZwogIGxvY2F0aW9uX2ZpbGUKICBsb2NhdGlvbl90b3ZhbHVlCiAgbG9jYXRpb25faW5pdAogIGxvY2F0aW9uX3plcm8KICBsb2NhdGlvbl9hZGQKICBsb2NhdGlvbl9zdWIKICBsb2NhdGlvbl9yZWxlYXNlX3J0CiAgbG9jYXRpb25fZnJlZV9ydAogIGxvY2F0aW9uX2NvdW50CiAgbG9jYXRpb25fY29weQogIGxvY2F0aW9uX2Nsb25lCiAgbG9jYXRpb25fbmV3CiAgbG9jYXRpb25fcmVsZWFzZQogIGxvY2F0aW9uX2ZyZWUKICBsb2NhdGlvbl9pc251bGwKICBsb2NhdGlvbl9kdXAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					234,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/location.h",
						"symkeys":
						[
							[
								27,
								37
							],
							[
								317,
								325
							],
							[
								377,
								390
							],
							[
								448,
								462
							],
							[
								508,
								525
							],
							[
								562,
								575
							],
							[
								614,
								630
							],
							[
								666,
								679
							],
							[
								697,
								710
							],
							[
								728,
								740
							],
							[
								775,
								787
							],
							[
								822,
								841
							],
							[
								876,
								892
							],
							[
								924,
								938
							],
							[
								985,
								998
							],
							[
								1050,
								1064
							],
							[
								1105,
								1117
							],
							[
								1151,
								1167
							],
							[
								1283,
								1296
							],
							[
								1403,
								1418
							],
							[
								1546,
								1558
							]
						],
						"symlist":
						[
							"LOCATION_H",
							"LOCATION",
							"LOCATION_FILE",
							"location_print",
							"location_tostring",
							"location_file",
							"location_tovalue",
							"location_init",
							"location_zero",
							"location_add",
							"location_sub",
							"location_release_rt",
							"location_free_rt",
							"location_count",
							"location_copy",
							"location_clone",
							"location_new",
							"location_release",
							"location_free",
							"location_isnull",
							"location_dup"
						]
					},
					"AQAAAAAAAAAAAAAAVQEAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					235,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
						"symkeys":
						[
							[
								359,
								370
							],
							[
								650,
								664
							],
							[
								934,
								951
							],
							[
								2322,
								2335
							],
							[
								2517,
								2537
							],
							[
								3752,
								3769
							],
							[
								4012,
								4032
							],
							[
								4651,
								4667
							],
							[
								6156,
								6168
							],
							[
								7638,
								7656
							],
							[
								9228,
								9242
							],
							[
								9510,
								9524
							],
							[
								9853,
								9865
							],
							[
								10495,
								10504
							],
							[
								11657,
								11674
							],
							[
								11990,
								12009
							],
							[
								12265,
								12283
							],
							[
								12566,
								12580
							],
							[
								12843,
								12854
							],
							[
								13182,
								13194
							],
							[
								13783,
								13796
							],
							[
								13964,
								13981
							],
							[
								15168,
								15188
							],
							[
								16482,
								16497
							],
							[
								24230,
								24242
							],
							[
								27581,
								27593
							],
							[
								29003,
								29018
							],
							[
								29406,
								29421
							],
							[
								29771,
								29790
							],
							[
								30539,
								30554
							],
							[
								30992,
								31009
							],
							[
								31481,
								31493
							],
							[
								33288,
								33303
							],
							[
								34136,
								34149
							],
							[
								34372,
								34385
							],
							[
								34990,
								35007
							],
							[
								35404,
								35420
							],
							[
								36470,
								36488
							],
							[
								40587,
								40600
							],
							[
								42068,
								42082
							],
							[
								42112,
								42126
							]
						],
						"symlist":
						[
							"â€ƒâ“‰â€‚â€ƒJSLexerRuleâ€‰;â€ƒâ€”â€ƒtypedef",
							"â€”â’»â€“â€ƒoffset_toarrayâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_rule_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_toprimitiveâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_token_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_continueâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_to_stateâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_handleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_escape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_unescape_predâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_current_lineâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_lexeme_sâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒlexer_tokenâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_newâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_wrapâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_add_ruleâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_constructorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_methodâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_getâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_setâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tokensâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statesâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_statestackâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_escapeâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_tostringâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_lexâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextfnâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_nextâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_callâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_iteratorâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_inspectâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_finalizerâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€”â’»â€“â€ƒjs_lexer_initâ€‰(â€‰)â€ƒ{â€‰â€¦â€‰}â€ƒâ€”â€ƒfunction",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object",
							"â€ƒâ“‚â€‚â€ƒJS_INIT_MODULEâ€ƒâ€¦â€ƒâ€”â€ƒmacro object"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABVAQAATE9DQVRJT05fSApMT0NBVElPTgpMT0NBVElPTl9GSUxFCiAgbG9jYXRpb25fcHJpbnQKICBsb2NhdGlvbl90b3N0cmluZwogIGxvY2F0aW9uX2ZpbGUKICBsb2NhdGlvbl90b3ZhbHVlCiAgbG9jYXRpb25faW5pdAogIGxvY2F0aW9uX3plcm8KICBsb2NhdGlvbl9hZGQKICBsb2NhdGlvbl9zdWIKICBsb2NhdGlvbl9yZWxlYXNlX3J0CiAgbG9jYXRpb25fZnJlZV9ydAogIGxvY2F0aW9uX2NvdW50CiAgbG9jYXRpb25fY29weQogIGxvY2F0aW9uX2Nsb25lCiAgbG9jYXRpb25fbmV3CiAgbG9jYXRpb25fcmVsZWFzZQogIGxvY2F0aW9uX2ZyZWUKICBsb2NhdGlvbl9pc251bGwKICBsb2NhdGlvbl9kdXAAAAAAAAAAAIAGAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					236,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/resolve-imports.js",
						"symkeys":
						[
							[
								676,
								689
							],
							[
								708,
								728
							],
							[
								1250,
								1265
							],
							[
								1272,
								1283
							],
							[
								1435,
								1447
							],
							[
								1673,
								1679
							],
							[
								1757,
								1784
							],
							[
								1912,
								1917
							],
							[
								1972,
								2003
							],
							[
								2165,
								2196
							],
							[
								2408,
								2439
							],
							[
								2544,
								2569
							],
							[
								2807,
								2843
							],
							[
								3190,
								3215
							],
							[
								3252,
								3279
							],
							[
								3364,
								3390
							],
							[
								3448,
								3468
							],
							[
								3539,
								3557
							],
							[
								3819,
								3832
							],
							[
								3860,
								3866
							],
							[
								3919,
								3941
							],
							[
								4291,
								4315
							],
							[
								4636,
								4666
							],
							[
								4775,
								4796
							],
							[
								4843,
								4871
							],
							[
								4882,
								4895
							],
							[
								4985,
								4998
							],
							[
								5264,
								5270
							],
							[
								5349,
								5396
							],
							[
								5468,
								5484
							],
							[
								5739,
								5757
							],
							[
								5925,
								5964
							],
							[
								6080,
								6092
							],
							[
								6115,
								6142
							],
							[
								6268,
								6280
							],
							[
								6673,
								6700
							],
							[
								6715,
								6733
							],
							[
								6973,
								6985
							],
							[
								6994,
								7019
							],
							[
								7102,
								7111
							],
							[
								7200,
								7265
							],
							[
								7278,
								7291
							],
							[
								7304,
								7326
							],
							[
								7331,
								7364
							],
							[
								7373,
								7391
							],
							[
								7485,
								7497
							],
							[
								7547,
								7556
							],
							[
								7646,
								7672
							],
							[
								7681,
								7699
							],
							[
								7777,
								7789
							],
							[
								7798,
								7809
							],
							[
								7870,
								7879
							],
							[
								7968,
								7991
							],
							[
								8014,
								8020
							],
							[
								8050,
								8075
							],
							[
								9487,
								9511
							],
							[
								9528,
								9534
							],
							[
								9596,
								9602
							],
							[
								9653,
								9677
							],
							[
								9995,
								10019
							],
							[
								10068,
								10074
							],
							[
								10316,
								10340
							],
							[
								10369,
								10375
							],
							[
								10526,
								10555
							],
							[
								10671,
								10680
							],
							[
								10831,
								10860
							],
							[
								11120,
								11186
							],
							[
								12022,
								12039
							],
							[
								12340,
								12358
							],
							[
								12401,
								12417
							],
							[
								12511,
								12550
							],
							[
								12884,
								12888
							],
							[
								13028,
								13035
							],
							[
								13098,
								13109
							],
							[
								13308,
								13326
							],
							[
								13657,
								13674
							],
							[
								16108,
								16112
							],
							[
								16731,
								16779
							],
							[
								17036,
								17042
							],
							[
								17546,
								17552
							],
							[
								17608,
								17614
							],
							[
								18405,
								18411
							],
							[
								18442,
								18448
							],
							[
								18537,
								18543
							],
							[
								18896,
								18902
							],
							[
								19066,
								19072
							],
							[
								19099,
								19105
							],
							[
								19123,
								19128
							],
							[
								19171,
								19186
							],
							[
								19207,
								19214
							],
							[
								19269,
								19324
							],
							[
								20282,
								20288
							],
							[
								20430,
								20436
							],
							[
								20559,
								20565
							],
							[
								20721,
								20727
							],
							[
								21302,
								21308
							],
							[
								21357,
								21363
							],
							[
								21531,
								21537
							],
							[
								21591,
								21596
							],
							[
								21647,
								21662
							],
							[
								21683,
								21690
							],
							[
								21751,
								21781
							],
							[
								21884,
								21890
							],
							[
								22002,
								22018
							],
							[
								22861,
								22867
							],
							[
								22887,
								22893
							],
							[
								22910,
								22916
							],
							[
								23127,
								23136
							],
							[
								23208,
								23214
							],
							[
								23291,
								23304
							],
							[
								23406,
								23410
							],
							[
								23496,
								23502
							],
							[
								24142,
								24147
							],
							[
								24250,
								24255
							],
							[
								29293,
								29322
							],
							[
								29472,
								29490
							],
							[
								29531,
								29553
							],
							[
								29579,
								29585
							],
							[
								29602,
								29625
							],
							[
								29685,
								29715
							],
							[
								29750,
								29756
							],
							[
								29782,
								29792
							],
							[
								29847,
								29877
							],
							[
								29903,
								29916
							],
							[
								30123,
								30147
							],
							[
								30208,
								30240
							],
							[
								30266,
								30279
							],
							[
								30306,
								30336
							],
							[
								30389,
								30424
							],
							[
								30429,
								30449
							],
							[
								30564,
								30595
							],
							[
								30875,
								30907
							],
							[
								31083,
								31120
							],
							[
								31204,
								31237
							],
							[
								31300,
								31321
							],
							[
								31427,
								31439
							],
							[
								31458,
								31481
							],
							[
								31614,
								31625
							],
							[
								31655,
								31671
							],
							[
								31703,
								31712
							],
							[
								31742,
								31756
							],
							[
								31788,
								31798
							],
							[
								31838,
								31845
							],
							[
								31893,
								31902
							],
							[
								31963,
								31981
							],
							[
								32214,
								32249
							],
							[
								32788,
								32822
							],
							[
								32905,
								32917
							],
							[
								33061,
								33071
							],
							[
								33257,
								33264
							],
							[
								33372,
								33394
							],
							[
								33647,
								33659
							],
							[
								33724,
								33742
							],
							[
								33883,
								33892
							],
							[
								33920,
								33941
							],
							[
								34132,
								34141
							],
							[
								34186,
								34196
							],
							[
								34327,
								34334
							],
							[
								34500,
								34514
							],
							[
								34766,
								34783
							],
							[
								34827,
								34839
							],
							[
								35157,
								35169
							],
							[
								35417,
								35436
							],
							[
								35717,
								35736
							],
							[
								35877,
								35902
							],
							[
								36016,
								36033
							],
							[
								37929,
								37940
							],
							[
								37990,
								38004
							],
							[
								38227,
								38237
							],
							[
								38681,
								38693
							],
							[
								38850,
								38856
							],
							[
								38998,
								39010
							],
							[
								39054,
								39084
							],
							[
								39593,
								39598
							],
							[
								39999,
								40008
							],
							[
								40031,
								40040
							],
							[
								40153,
								40160
							],
							[
								40193,
								40205
							],
							[
								40569,
								40581
							],
							[
								40610,
								40630
							],
							[
								40701,
								40712
							],
							[
								40745,
								40765
							],
							[
								40829,
								40858
							],
							[
								42450,
								42460
							],
							[
								42836,
								42848
							],
							[
								43269,
								43281
							],
							[
								43670,
								43682
							],
							[
								43800,
								43807
							],
							[
								43852,
								43882
							],
							[
								44197,
								44225
							],
							[
								44255,
								44259
							],
							[
								44278,
								44306
							],
							[
								44339,
								44358
							],
							[
								44417,
								44444
							],
							[
								44477,
								44496
							],
							[
								44571,
								44612
							],
							[
								45078,
								45101
							],
							[
								45241,
								45264
							],
							[
								45393,
								45533
							],
							[
								46236,
								46270
							],
							[
								46337,
								46385
							],
							[
								46431,
								46470
							],
							[
								47045,
								47073
							],
							[
								47122,
								47143
							],
							[
								47217,
								47238
							],
							[
								47299,
								47320
							],
							[
								47393,
								47439
							],
							[
								47488,
								47494
							],
							[
								47568,
								47574
							],
							[
								47640,
								47646
							],
							[
								47717,
								47739
							],
							[
								48438,
								48453
							],
							[
								48539,
								48546
							],
							[
								48642,
								48649
							],
							[
								48704,
								48711
							],
							[
								48751,
								48762
							],
							[
								49093,
								49099
							],
							[
								49171,
								49179
							],
							[
								49367,
								49373
							],
							[
								49416,
								49422
							],
							[
								49478,
								49485
							],
							[
								49547,
								49555
							],
							[
								49607,
								49613
							],
							[
								49669,
								49675
							],
							[
								49734,
								49740
							],
							[
								49802,
								49808
							],
							[
								49869,
								49875
							],
							[
								49947,
								49953
							],
							[
								50027,
								50033
							],
							[
								50096,
								50102
							],
							[
								50160,
								50166
							],
							[
								50213,
								50219
							],
							[
								50278,
								50284
							],
							[
								50342,
								50348
							],
							[
								50409,
								50415
							],
							[
								50470,
								50476
							],
							[
								50523,
								50529
							],
							[
								50599,
								50620
							],
							[
								50695,
								50711
							],
							[
								50799,
								50845
							],
							[
								51349,
								51355
							],
							[
								52020,
								52026
							],
							[
								52031,
								52044
							],
							[
								52136,
								52158
							],
							[
								53295,
								53325
							],
							[
								53338,
								53344
							],
							[
								53407,
								53416
							],
							[
								53455,
								53461
							],
							[
								53509,
								53538
							],
							[
								54241,
								54255
							],
							[
								55160,
								55174
							],
							[
								55393,
								55406
							],
							[
								55443,
								55450
							]
						],
						"symlist":
						[
							"ArgumentError",
							"constructor(...args)",
							"logFile = () =>",
							"log = () =>",
							"allImports()",
							"arg =>",
							"function ReadJSON(filename)",
							"() =>",
							"function ImportedBy(importFile)",
							"function ResolveAlias(filename)",
							"function IsFileImport(filename)",
							"function NormalizePath(p)",
							"FileBannerComment = (filename, i) =>",
							"IsBuiltin = moduleName =>",
							"compact = (n, more = {}) =>",
							"AddUnique = (arr, item) =>",
							"IntToDWord = ival =>",
							"IntToBinary = i =>",
							"(n, value) =>",
							"num =>",
							"(type, lexeme, tok) =>",
							"CompareRange = (a, b) =>",
							"PutsFunction = outFn => str =>",
							"IsWhiteSpace = str =>",
							"debugLog = (str, ...args) =>",
							"pred = arg =>",
							"(acc, opt) =>",
							"arg =>",
							"function OutputImports(imports = globalImports)",
							"([name, obj]) =>",
							"([local, name]) =>",
							"function FileWriter(file, mode = 0o755)",
							"close: () =>",
							"function FileReplacer(file)",
							"close: () =>",
							"function FdWriter(fd, file)",
							"fn = (buf, len) =>",
							"close: () =>",
							"seek: (whence, offset) =>",
							"inspect()",
							"function ArrayWriter( arr, t = (buf, len) => { if(!types.",
							"(buf)) buf = ",
							"(buf); return buf.",
							"(0, len ?? buf.byteLength); } )",
							"fn = (buf, len) =>",
							"close: () =>",
							"inspect()",
							"function DummyWriter(name)",
							"fn = (buf, len) =>",
							"close: () =>",
							"seek: () =>",
							"inspect()",
							"function ImportIds(seq)",
							"tok =>",
							"function ImportIdMap(seq)",
							"function ImpExpType(seq)",
							"tok =>",
							"tok =>",
							"function ImportType(seq)",
							"function ImportFile(seq)",
							"tok =>",
							"function ExportName(seq)",
							"tok =>",
							"function ByteSequence(tokens)",
							"(n, t) =>",
							"function ModuleLoader(module)",
							"function ProcessFile(source, log = () => {}, recursive, depth = 0)",
							".handler = lex =>",
							".beginCode = () =>",
							"balancer = () =>",
							"self = function ParentheseBalancer(tok)",
							"s =>",
							"reset()",
							"get depth()",
							"showToken = tok =>",
							"PathAdjust = s =>",
							"i =>",
							" function Export(tokens, relativePath = s => s)",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"path()",
							"Export",
							"Export",
							"ids()",
							"({ lexeme }) =>",
							"idmap()",
							" function Import(tokens, relativePath = s => s, depth)",
							"path()",
							"Import",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"Import",
							"ids()",
							"({ lexeme }) =>",
							"idmap()",
							"toCode(filterIds = id => true)",
							"tok =>",
							"(acc, tok, i) =>",
							"exp =>",
							"exp =>",
							"tok =>",
							"(a, b) =>",
							"imp =>",
							"(acc, imp) =>",
							"b =>",
							"imp =>",
							"id =>",
							"id =>",
							"function AddDep(source, file)",
							"function IsWS(tok)",
							"function NonWS(tokens)",
							"tok =>",
							"function LeadingWS(str)",
							"function TokenSequence(tokens)",
							"tok =>",
							"toString()",
							"function AddWhitespace(tokens)",
							"(acc, tok) =>",
							"function Unquote(lexeme)",
							"function LiteralSequence(tokens)",
							"(acc, tok) =>",
							"function UntilEOL(idx, tokens)",
							"function Until(idx, tokens, pred = ",
							"(null, [';', '\\n']))",
							"function WholeLine(idx, tokens)",
							"function Range(file, start, end)",
							"Range.prototype.toString = function()",
							"function InRange([start, end], i)",
							"function IsRange(obj)",
							"NumericRange",
							"constructor(start, end)",
							"get start()",
							"set start(value)",
							"get end()",
							"set end(value)",
							"get size()",
							"clone()",
							"inside(n)",
							"static from(range)",
							"static *holes(ranges, only = false)",
							"static between([s1, e1], [s2, e2])",
							"NumericRange",
							"pad = s =>",
							"FileMap",
							"constructor(file, buf)",
							"get buffer()",
							"static empty(file)",
							"isEmpty()",
							"static for(file, buf)",
							"isEmpty()",
							"toString()",
							"FileMap",
							"findSlice(pos)",
							"([range, buf]) =>",
							"splitAt(pos)",
							"findPos(pos)",
							"insertAt(pos, file)",
							"insert(index, file)",
							"replaceRange(range, file)",
							"sliceIndex = n =>",
							"stringAt(n)",
							" (buf, len) =>",
							"rangeAt(n)",
							"get ranges()",
							"dump()",
							"(item, i) =>",
							"(acc, [range, buf, str], i) =>",
							"at(i)",
							"toArray()",
							"(s, i) =>",
							"holes()",
							"([range]) =>",
							"firstChunk()",
							"([range, buf], i) =>",
							"lastChunk()",
							"([range, buf], i) =>",
							"write(out, depth = 0, serial)",
							"toString()",
							"(item, i) =>",
							"(part, i) =>",
							"(item, i) =>",
							"FileMap",
							"function BufferFile(file, buf)",
							"function BufferLengths(file)",
							"b =>",
							"function BufferOffsets(file)",
							"([pos, list], b) =>",
							"function BufferRanges(file)",
							"([pos, list], b) =>",
							"function WriteFile(name, data, opts = {})",
							"function DumpLexer(lex)",
							"function DumpToken(tok)",
							"function* DependencyTree( root, indent = ' ', spacing = false, depth = 0, pre = '', fn = (name, depth) => `${name} (${depth})` )",
							" function stripLeadingDotSlash(n)",
							"function SpreadAndJoin(iterator, separator = '')",
							"function* PrintUserscriptBanner(fields)",
							"function PrintES6Import(imp)",
							" ({ local, file }) =>",
							" ({ local, file }) =>",
							" ({ local, file }) =>",
							"function PrintCJSImport({ type, local, file })",
							" () =>",
							" () =>",
							" () =>",
							"function main(...args)",
							"write(buf, len)",
							"puts(s)",
							"line =>",
							"close()",
							"isWS = s =>",
							" () =>",
							" file =>",
							" () =>",
							" () =>",
							" arg =>",
							" file =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" function ShowHelp()",
							"(acc, [name]) =>",
							" (acc, [name, [hasArg, fn, shortOpt]]) =>",
							"arg =>",
							" () =>",
							" (...args) =>",
							"RelativePath = file =>",
							"ContainsAny = (arr, tokens) =>",
							"tok =>",
							"impexp =>",
							"hdr =>",
							" ([acc, prev], hdr) =>",
							"(acc, line) =>",
							"({ depth }) =>",
							"({ name }) =>",
							"name =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAMCAAAICDik4kgIEpTTGV4ZXJSdWxlIDsg4oCUIHR5cGVkZWYK4oCU4pK74oCTIG9mZnNldF90b2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfcnVsZV9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl93cmFwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5fY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b2tlbl90b3N0cmluZyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX3RvcHJpbWl0aXZlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG9rZW5faW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rva2VuX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX2NvbnRpbnVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbGV4ZXJfdG9fc3RhdGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9oYW5kbGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9lc2NhcGVfcHJlZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3VuZXNjYXBlX3ByZWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9jdXJyZW50X2xpbmUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBsZXhlcl9sZXhlbWVfcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGxleGVyX3Rva2VuICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfd3JhcCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2FkZF9ydWxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY29uc3RydWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9tZXRob2QgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9nZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl90b2tlbnMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9zdGF0ZXN0YWNrICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfZXNjYXBlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfdG9zdHJpbmcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9sZXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0Zm4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19sZXhlcl9uZXh0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfY2FsbCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2l0ZXJhdG9yICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfbGV4ZXJfaW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2ZpbmFsaXplciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2xleGVyX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAg4pOCICBKU19JTklUX01PRFVMRSDigKYg4oCUIG1hY3JvIG9iamVjdAogIOKTgiAgSlNfSU5JVF9NT0RVTEUg4oCmIOKAlCBtYWNybyBvYmplY3QAAAAAAAAAAKoQAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					237,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1495,
								1519
							],
							[
								1739,
								1760
							],
							[
								1986,
								2002
							],
							[
								2556,
								2578
							],
							[
								2877,
								2907
							],
							[
								3067,
								3094
							],
							[
								3231,
								3245
							],
							[
								3351,
								3372
							],
							[
								3804,
								3808
							],
							[
								3968,
								3998
							],
							[
								4050,
								4064
							],
							[
								5088,
								5102
							],
							[
								5353,
								5389
							],
							[
								5500,
								5519
							],
							[
								5529,
								5538
							],
							[
								5552,
								5576
							],
							[
								5662,
								5690
							],
							[
								5780,
								5806
							],
							[
								5966,
								6028
							],
							[
								6203,
								6238
							],
							[
								6330,
								6367
							],
							[
								6448,
								6468
							],
							[
								6544,
								6568
							],
							[
								6910,
								6914
							],
							[
								7373,
								7377
							],
							[
								7402,
								7406
							],
							[
								7471,
								7482
							],
							[
								7687,
								7722
							],
							[
								7864,
								7888
							],
							[
								7944,
								7969
							],
							[
								8048,
								8052
							],
							[
								8086,
								8090
							],
							[
								8120,
								8146
							],
							[
								8205,
								8209
							],
							[
								8243,
								8292
							],
							[
								8307,
								8312
							],
							[
								8440,
								8450
							],
							[
								8563,
								8568
							],
							[
								8590,
								8594
							],
							[
								8851,
								8882
							],
							[
								9171,
								9204
							],
							[
								9604,
								9628
							],
							[
								9983,
								10011
							],
							[
								10627,
								10636
							],
							[
								10653,
								10662
							],
							[
								10694,
								10703
							],
							[
								10722,
								10731
							],
							[
								10745,
								10755
							],
							[
								10771,
								10780
							],
							[
								10794,
								10803
							],
							[
								10810,
								10818
							],
							[
								10833,
								10856
							],
							[
								10867,
								10876
							],
							[
								10921,
								10953
							],
							[
								11031,
								11065
							],
							[
								11261,
								11286
							],
							[
								11343,
								11393
							],
							[
								11663,
								11696
							],
							[
								11796,
								11831
							],
							[
								11908,
								11930
							],
							[
								12547,
								12565
							],
							[
								12608,
								12614
							],
							[
								12648,
								12653
							],
							[
								12695,
								12700
							],
							[
								12817,
								12822
							],
							[
								13117,
								13143
							],
							[
								13244,
								13270
							],
							[
								14576,
								14580
							],
							[
								14670,
								14679
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqEAAAQXJndW1lbnRFcnJvcgogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpCiAgbG9nRmlsZSA9ICgpID0+CiAgbG9nID0gKCkgPT4KICBhbGxJbXBvcnRzKCkKICBhcmcgPT4KUmVhZEpTT04oZmlsZW5hbWUpCigpID0+CkltcG9ydGVkQnkoaW1wb3J0RmlsZSkKUmVzb2x2ZUFsaWFzKGZpbGVuYW1lKQpJc0ZpbGVJbXBvcnQoZmlsZW5hbWUpCk5vcm1hbGl6ZVBhdGgocCkKRmlsZUJhbm5lckNvbW1lbnQgPSAoZmlsZW5hbWUsIGkpID0+CklzQnVpbHRpbiA9IG1vZHVsZU5hbWUgPT4KICBjb21wYWN0ID0gKG4sIG1vcmUgPSB7fSkgPT4KQWRkVW5pcXVlID0gKGFyciwgaXRlbSkgPT4KSW50VG9EV29yZCA9IGl2YWwgPT4KSW50VG9CaW5hcnkgPSBpID0+CihuLCB2YWx1ZSkgPT4KICBudW0gPT4KKHR5cGUsIGxleGVtZSwgdG9rKSA9PgpDb21wYXJlUmFuZ2UgPSAoYSwgYikgPT4KUHV0c0Z1bmN0aW9uID0gb3V0Rm4gPT4gc3RyID0+CklzV2hpdGVTcGFjZSA9IHN0ciA9PgogIGRlYnVnTG9nID0gKHN0ciwgLi4uYXJncykgPT4KICBwcmVkID0gYXJnID0+CihhY2MsIG9wdCkgPT4KICBhcmcgPT4KT3V0cHV0SW1wb3J0cyhpbXBvcnRzID0gZ2xvYmFsSW1wb3J0cykKKFtuYW1lLCBvYmpdKSA9PgooW2xvY2FsLCBuYW1lXSkgPT4KRmlsZVdyaXRlcihmaWxlLCBtb2RlID0gMG83NTUpCiAgY2xvc2U6ICgpID0+CkZpbGVSZXBsYWNlcihmaWxlKQogIGNsb3NlOiAoKSA9PgpGZFdyaXRlcihmZCwgZmlsZSkKICBmbiA9IChidWYsIGxlbikgPT4KICBjbG9zZTogKCkgPT4KICBzZWVrOiAod2hlbmNlLCBvZmZzZXQpID0+CiAgaW5zcGVjdCgpCkFycmF5V3JpdGVyKCBhcnIsIHQgPSAoYnVmLCBsZW4pID0+IHsgaWYoIXR5cGVzLgooYnVmKSkgYnVmID0gCihidWYpOyByZXR1cm4gYnVmLgooMCwgbGVuID8/IGJ1Zi5ieXRlTGVuZ3RoKTsgfSApCiAgZm4gPSAoYnVmLCBsZW4pID0+CiAgY2xvc2U6ICgpID0+CiAgaW5zcGVjdCgpCkR1bW15V3JpdGVyKG5hbWUpCiAgZm4gPSAoYnVmLCBsZW4pID0+CiAgY2xvc2U6ICgpID0+CiAgc2VlazogKCkgPT4KICBpbnNwZWN0KCkKSW1wb3J0SWRzKHNlcSkKICB0b2sgPT4KSW1wb3J0SWRNYXAoc2VxKQpJbXBFeHBUeXBlKHNlcSkKICB0b2sgPT4KICB0b2sgPT4KSW1wb3J0VHlwZShzZXEpCkltcG9ydEZpbGUoc2VxKQogIHRvayA9PgpFeHBvcnROYW1lKHNlcSkKICB0b2sgPT4KQnl0ZVNlcXVlbmNlKHRva2VucykKKG4sIHQpID0+Ck1vZHVsZUxvYWRlcihtb2R1bGUpClByb2Nlc3NGaWxlKHNvdXJjZSwgbG9nID0gKCkgPT4ge30sIHJlY3Vyc2l2ZSwgZGVwdGggPSAwKQogIC5oYW5kbGVyID0gbGV4ID0+CiAgLmJlZ2luQ29kZSA9ICgpID0+CiAgYmFsYW5jZXIgPSAoKSA9PgogIHNlbGYgPSBmdW5jdGlvbiBQYXJlbnRoZXNlQmFsYW5jZXIodG9rKQogIHMgPT4KICByZXNldCgpCiAgZ2V0IGRlcHRoKCkKICBzaG93VG9rZW4gPSB0b2sgPT4KUGF0aEFkanVzdCA9IHMgPT4KICBpID0+CkV4cG9ydCh0b2tlbnMsIHJlbGF0aXZlUGF0aCA9IHMgPT4gcykKICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICBwYXRoKCkKRXhwb3J0CkV4cG9ydAogIGlkcygpCih7IGxleGVtZSB9KSA9PgogIGlkbWFwKCkKSW1wb3J0KHRva2VucywgcmVsYXRpdmVQYXRoID0gcyA9PiBzLCBkZXB0aCkKICBwYXRoKCkKSW1wb3J0CiAgdG9rID0+CiAgdG9rID0+CiAgdG9rID0+CiAgdG9rID0+CkltcG9ydAogIGlkcygpCih7IGxleGVtZSB9KSA9PgogIGlkbWFwKCkKICB0b0NvZGUoZmlsdGVySWRzID0gaWQgPT4gdHJ1ZSkKICB0b2sgPT4KKGFjYywgdG9rLCBpKSA9PgogIGV4cCA9PgogIGV4cCA9PgogIHRvayA9PgooYSwgYikgPT4KICBpbXAgPT4KKGFjYywgaW1wKSA9PgogIGIgPT4KICBpbXAgPT4KICBpZCA9PgogIGlkID0+CkFkZERlcChzb3VyY2UsIGZpbGUpCklzV1ModG9rKQpOb25XUyh0b2tlbnMpCiAgdG9rID0+CkxlYWRpbmdXUyhzdHIpClRva2VuU2VxdWVuY2UodG9rZW5zKQogIHRvayA9PgogIHRvU3RyaW5nKCkKQWRkV2hpdGVzcGFjZSh0b2tlbnMpCihhY2MsIHRvaykgPT4KVW5xdW90ZShsZXhlbWUpCkxpdGVyYWxTZXF1ZW5jZSh0b2tlbnMpCihhY2MsIHRvaykgPT4KVW50aWxFT0woaWR4LCB0b2tlbnMpClVudGlsKGlkeCwgdG9rZW5zLCBwcmVkID0gCihudWxsLCBbJzsnLCAnXG4nXSkpCldob2xlTGluZShpZHgsIHRva2VucykKUmFuZ2UoZmlsZSwgc3RhcnQsIGVuZCkKUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKQpJblJhbmdlKFtzdGFydCwgZW5kXSwgaSkKSXNSYW5nZShvYmopCk51bWVyaWNSYW5nZQogIGNvbnN0cnVjdG9yKHN0YXJ0LCBlbmQpCiAgZ2V0IHN0YXJ0KCkKICBzZXQgc3RhcnQodmFsdWUpCiAgZ2V0IGVuZCgpCiAgc2V0IGVuZCh2YWx1ZSkKICBnZXQgc2l6ZSgpCiAgY2xvbmUoKQogIGluc2lkZShuKQogIHN0YXRpYyBmcm9tKHJhbmdlKQogIHN0YXRpYyAqaG9sZXMocmFuZ2VzLCBvbmx5ID0gZmFsc2UpCiAgc3RhdGljIGJldHdlZW4oW3MxLCBlMV0sIFtzMiwgZTJdKQpOdW1lcmljUmFuZ2UKICBwYWQgPSBzID0+CkZpbGVNYXAKICBjb25zdHJ1Y3RvcihmaWxlLCBidWYpCiAgZ2V0IGJ1ZmZlcigpCiAgc3RhdGljIGVtcHR5KGZpbGUpCiAgaXNFbXB0eSgpCiAgc3RhdGljIGZvcihmaWxlLCBidWYpCiAgaXNFbXB0eSgpCiAgdG9TdHJpbmcoKQpGaWxlTWFwCiAgZmluZFNsaWNlKHBvcykKKFtyYW5nZSwgYnVmXSkgPT4KICBzcGxpdEF0KHBvcykKICBmaW5kUG9zKHBvcykKICBpbnNlcnRBdChwb3MsIGZpbGUpCiAgaW5zZXJ0KGluZGV4LCBmaWxlKQogIHJlcGxhY2VSYW5nZShyYW5nZSwgZmlsZSkKICBzbGljZUluZGV4ID0gbiA9PgogIHN0cmluZ0F0KG4pCiAgKGJ1ZiwgbGVuKSA9PgogIHJhbmdlQXQobikKICBnZXQgcmFuZ2VzKCkKICBkdW1wKCkKKGl0ZW0sIGkpID0+CihhY2MsIFtyYW5nZSwgYnVmLCBzdHJdLCBpKSA9PgogIGF0KGkpCiAgdG9BcnJheSgpCihzLCBpKSA9PgogIGhvbGVzKCkKKFtyYW5nZV0pID0+CiAgZmlyc3RDaHVuaygpCihbcmFuZ2UsIGJ1Zl0sIGkpID0+CiAgbGFzdENodW5rKCkKKFtyYW5nZSwgYnVmXSwgaSkgPT4KICB3cml0ZShvdXQsIGRlcHRoID0gMCwgc2VyaWFsKQogIHRvU3RyaW5nKCkKKGl0ZW0sIGkpID0+CihwYXJ0LCBpKSA9PgooaXRlbSwgaSkgPT4KRmlsZU1hcApCdWZmZXJGaWxlKGZpbGUsIGJ1ZikKQnVmZmVyTGVuZ3RocyhmaWxlKQogIGIgPT4KQnVmZmVyT2Zmc2V0cyhmaWxlKQooW3BvcywgbGlzdF0sIGIpID0+CkJ1ZmZlclJhbmdlcyhmaWxlKQooW3BvcywgbGlzdF0sIGIpID0+CldyaXRlRmlsZShuYW1lLCBkYXRhLCBvcHRzID0ge30pCkR1bXBMZXhlcihsZXgpCkR1bXBUb2tlbih0b2spCkRlcGVuZGVuY3lUcmVlKCByb290LCBpbmRlbnQgPSAnICcsIHNwYWNpbmcgPSBmYWxzZSwgZGVwdGggPSAwLCBwcmUgPSAnJywgZm4gPSAobmFtZSwgZGVwdGgpID0+IGAke25hbWV9ICgke2RlcHRofSlgICkKICBzdHJpcExlYWRpbmdEb3RTbGFzaChuKQpTcHJlYWRBbmRKb2luKGl0ZXJhdG9yLCBzZXBhcmF0b3IgPSAnJykKUHJpbnRVc2Vyc2NyaXB0QmFubmVyKGZpZWxkcykKUHJpbnRFUzZJbXBvcnQoaW1wKQogICh7IGxvY2FsLCBmaWxlIH0pID0+CiAgKHsgbG9jYWwsIGZpbGUgfSkgPT4KICAoeyBsb2NhbCwgZmlsZSB9KSA9PgpQcmludENKU0ltcG9ydCh7IHR5cGUsIGxvY2FsLCBmaWxlIH0pCiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgbWFpbiguLi5hcmdzKQogIHdyaXRlKGJ1ZiwgbGVuKQogIHB1dHMocykKICBsaW5lID0+CiAgY2xvc2UoKQogIGlzV1MgPSBzID0+CiAgKCkgPT4KICBmaWxlID0+CiAgKCkgPT4KICAoKSA9PgogIGFyZyA9PgogIGZpbGUgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KU2hvd0hlbHAoKQooYWNjLCBbbmFtZV0pID0+CiAgKGFjYywgW25hbWUsIFtoYXNBcmcsIGZuLCBzaG9ydE9wdF1dKSA9PgogIGFyZyA9PgogICgpID0+CiAgKC4uLmFyZ3MpID0+ClJlbGF0aXZlUGF0aCA9IGZpbGUgPT4KQ29udGFpbnNBbnkgPSAoYXJyLCB0b2tlbnMpID0+CiAgdG9rID0+CiAgaW1wZXhwID0+CiAgaGRyID0+CiAgKFthY2MsIHByZXZdLCBoZHIpID0+CihhY2MsIGxpbmUpID0+Cih7IGRlcHRoIH0pID0+Cih7IG5hbWUgfSkgPT4KICBuYW1lID0+AAAAAAAAAACqBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					238,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqBAAAICBwYXJzZVNWR1BhdGgocykKICBwYXJzZVZhbHVlcyA9IGFyZ3MgPT4KICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgKHYsIHApID0+CiAgZSA9PgogIG4gPT4KSGFzUGFyZW50KGVsZW0sIG90aGVyKQpHZXRCb3VuZHMoc3ZnRWxlbSA9IHN2ZykKUHJvY2Vzc1BhdGgoZCkKICB1bml0Q29udlRvTU0odmFsdWUpCiAgcGM6IG1tID0+CiAgcHg6IG1tID0+CiAgcHQ6IG1tID0+CiAgaW46IG1tID0+CiAgbWlsOiBtbSA9PgogIGNtOiBtbSA9PgogIG1tOiBtbSA9PgogIG06IG1tID0+CiAgdW5pdENvbnYodW5pdCkKICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAoX3gsIF95LCBvcHRzKSA9PgogICgpID0+CiAgYSA9PgogIGEgPT4KICBhID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					239,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					240,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1495,
								1519
							],
							[
								1739,
								1760
							],
							[
								1986,
								2002
							],
							[
								2556,
								2578
							],
							[
								2877,
								2907
							],
							[
								3067,
								3094
							],
							[
								3231,
								3245
							],
							[
								3351,
								3372
							],
							[
								3804,
								3808
							],
							[
								3968,
								3998
							],
							[
								4050,
								4064
							],
							[
								5088,
								5102
							],
							[
								5353,
								5389
							],
							[
								5500,
								5519
							],
							[
								5529,
								5538
							],
							[
								5552,
								5576
							],
							[
								5662,
								5690
							],
							[
								5780,
								5806
							],
							[
								5966,
								6028
							],
							[
								6203,
								6238
							],
							[
								6330,
								6367
							],
							[
								6448,
								6468
							],
							[
								6544,
								6568
							],
							[
								6910,
								6914
							],
							[
								7373,
								7377
							],
							[
								7402,
								7406
							],
							[
								7471,
								7482
							],
							[
								7687,
								7722
							],
							[
								7864,
								7888
							],
							[
								7944,
								7969
							],
							[
								8048,
								8052
							],
							[
								8086,
								8090
							],
							[
								8120,
								8146
							],
							[
								8205,
								8209
							],
							[
								8243,
								8292
							],
							[
								8307,
								8312
							],
							[
								8440,
								8450
							],
							[
								8563,
								8568
							],
							[
								8590,
								8594
							],
							[
								8851,
								8882
							],
							[
								9171,
								9204
							],
							[
								9604,
								9628
							],
							[
								9983,
								10011
							],
							[
								10627,
								10636
							],
							[
								10653,
								10662
							],
							[
								10694,
								10703
							],
							[
								10722,
								10731
							],
							[
								10745,
								10755
							],
							[
								10771,
								10780
							],
							[
								10794,
								10803
							],
							[
								10810,
								10818
							],
							[
								10833,
								10856
							],
							[
								10867,
								10876
							],
							[
								10921,
								10953
							],
							[
								11031,
								11065
							],
							[
								11261,
								11286
							],
							[
								11343,
								11393
							],
							[
								11663,
								11696
							],
							[
								11796,
								11831
							],
							[
								11908,
								11930
							],
							[
								12547,
								12565
							],
							[
								12608,
								12614
							],
							[
								12648,
								12653
							],
							[
								12695,
								12700
							],
							[
								12817,
								12822
							],
							[
								13117,
								13143
							],
							[
								13244,
								13270
							],
							[
								14576,
								14580
							],
							[
								14670,
								14679
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"AQAAAAAAAAAAAAAAqgQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					241,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1495,
								1519
							],
							[
								1739,
								1760
							],
							[
								1986,
								2002
							],
							[
								2556,
								2578
							],
							[
								2877,
								2907
							],
							[
								3067,
								3094
							],
							[
								3231,
								3245
							],
							[
								3351,
								3372
							],
							[
								3804,
								3808
							],
							[
								3968,
								3998
							],
							[
								4050,
								4064
							],
							[
								5088,
								5102
							],
							[
								5353,
								5389
							],
							[
								5500,
								5519
							],
							[
								5529,
								5538
							],
							[
								5552,
								5576
							],
							[
								5662,
								5690
							],
							[
								5780,
								5806
							],
							[
								5966,
								6028
							],
							[
								6203,
								6238
							],
							[
								6330,
								6367
							],
							[
								6448,
								6468
							],
							[
								6544,
								6568
							],
							[
								6910,
								6914
							],
							[
								7373,
								7377
							],
							[
								7402,
								7406
							],
							[
								7471,
								7482
							],
							[
								7687,
								7722
							],
							[
								7864,
								7888
							],
							[
								7944,
								7969
							],
							[
								8048,
								8052
							],
							[
								8086,
								8090
							],
							[
								8120,
								8146
							],
							[
								8205,
								8209
							],
							[
								8243,
								8292
							],
							[
								8307,
								8312
							],
							[
								8440,
								8450
							],
							[
								8563,
								8568
							],
							[
								8590,
								8594
							],
							[
								8851,
								8882
							],
							[
								9171,
								9204
							],
							[
								9604,
								9628
							],
							[
								9983,
								10011
							],
							[
								10627,
								10636
							],
							[
								10653,
								10662
							],
							[
								10694,
								10703
							],
							[
								10722,
								10731
							],
							[
								10745,
								10755
							],
							[
								10771,
								10780
							],
							[
								10794,
								10803
							],
							[
								10810,
								10818
							],
							[
								10833,
								10856
							],
							[
								10867,
								10876
							],
							[
								10921,
								10953
							],
							[
								11031,
								11065
							],
							[
								11261,
								11286
							],
							[
								11343,
								11393
							],
							[
								11663,
								11696
							],
							[
								11796,
								11831
							],
							[
								11908,
								11930
							],
							[
								12547,
								12565
							],
							[
								12608,
								12614
							],
							[
								12648,
								12653
							],
							[
								12695,
								12700
							],
							[
								12817,
								12822
							],
							[
								13117,
								13143
							],
							[
								13244,
								13270
							],
							[
								14580,
								14584
							],
							[
								14674,
								14683
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAACqBAAAICBwYXJzZVNWR1BhdGgocykKICBwYXJzZVZhbHVlcyA9IGFyZ3MgPT4KICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgKHYsIHApID0+CiAgZSA9PgogIG4gPT4KSGFzUGFyZW50KGVsZW0sIG90aGVyKQpHZXRCb3VuZHMoc3ZnRWxlbSA9IHN2ZykKUHJvY2Vzc1BhdGgoZCkKICB1bml0Q29udlRvTU0odmFsdWUpCiAgcGM6IG1tID0+CiAgcHg6IG1tID0+CiAgcHQ6IG1tID0+CiAgaW46IG1tID0+CiAgbWlsOiBtbSA9PgogIGNtOiBtbSA9PgogIG1tOiBtbSA9PgogIG06IG1tID0+CiAgdW5pdENvbnYodW5pdCkKICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAoX3gsIF95LCBvcHRzKSA9PgogICgpID0+CiAgYSA9PgogIGEgPT4KICBhID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAACqBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqgQAACAgcGFyc2VTVkdQYXRoKHMpCiAgcGFyc2VWYWx1ZXMgPSBhcmdzID0+CiAgKF8sIGMsIGFyZ3MpID0+CiAgc3BsaXRQYXRoKHBzKQogIHBhdGhUb0Fic29sdXRlKHBhdGgpCiAgcGF0aFRvUG9pbnRzKHBhdGgpCiAgaXNVcHBlciA9IHMgPT4KTWFrZVBvaW50ID0gKHgsIHkpID0+CiAgbiA9PgogIHBvaW50c1RvQWJzb2x1dGUoaXQpCiAgaXNVcHBlciA9IHMgPT4KICBzYXZlKGZpbGVuYW1lKQpOdW1lcmljQXJncyhzLCB0ID0gYSA9PiBhKQogIGRlcmVmID0gcCA9PiBvYmogPT4KKG8sIGspID0+ClBhcmVudFBhdGhzKHApCkN1bXVsYXRpdmVQYXRocyhwKQpBbGxQYXJlbnRzKGVsZW0pCkFsbFRyYW5zZm9ybXMoZWxlbSwgZ2V0dGVyID0gZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgpCkVsZW1lbnRUcmFuc2Zvcm1MaXN0KGVsZW0pCkVsZW1lbnRUcmFuc2Zvcm1NYXRyaXgoZWxlbSkKR2V0WFkoZWxlbSkKR2V0UG9pbnRzKGVsZW0pCiAgcCA9PgogIGMgPT4KICBhID0+CihbeCwgeV0pID0+CkdldFRyYW5zZm9ybWVkUG9pbnRzKGVsZW0pCkdldE1hdHJpeChlbGVtKQpJc0NsaXBQYXRoKGVsZW0pCiAgZSA9PgogIGUgPT4KSGFzQ2xpcFBhdGgoZWxlbSkKICBlID0+ClBvc2l0aW9uZWRFbGVtZW50cyhzdmdFbGVtID0gc3ZnLCBza2lwKQooKSA9PgogICh2LCBwKSA9PgogIGUgPT4KICBuID0+Ckhhc1BhcmVudChlbGVtLCBvdGhlcikKR2V0Qm91bmRzKHN2Z0VsZW0gPSBzdmcpClByb2Nlc3NQYXRoKGQpCiAgdW5pdENvbnZUb01NKHZhbHVlKQogIHBjOiBtbSA9PgogIHB4OiBtbSA9PgogIHB0OiBtbSA9PgogIGluOiBtbSA9PgogIG1pbDogbW0gPT4KICBjbTogbW0gPT4KICBtbTogbW0gPT4KICBtOiBtbSA9PgogIHVuaXRDb252KHVuaXQpCiAgdmFsdWUgPT4KICB1bml0Q29udlRvKHZhbHVlLCB1bml0KQogIGdldFZpZXdCb3goc3ZnRWxlbSA9IHN2ZykKWE1MMlN0cmluZyhlbGVtKQogIGdldFdpZHRoSGVpZ2h0KHN2Z0VsZW0gPSBzdmcsIHQgPSBhID0+IGEpCiAgZ2V0VHJhbnNmb3JtYXRpb25MaXN0KGUpCiAgZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgoZSkKICBtYWluKC4uLmFyZ3MpCiAgKF94LCBfeSwgb3B0cykgPT4KICAoKSA9PgogIGEgPT4KICBhID0+CiAgYSA9PgogIHByaW50ID0gKGZpbGUsIC4uLmFyZ3MpID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICB1ID0+CihhLCBpKSA9PgAAAAAAAAAAqgQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					242,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqBAAAICBwYXJzZVNWR1BhdGgocykKICBwYXJzZVZhbHVlcyA9IGFyZ3MgPT4KICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgKHYsIHApID0+CiAgZSA9PgogIG4gPT4KSGFzUGFyZW50KGVsZW0sIG90aGVyKQpHZXRCb3VuZHMoc3ZnRWxlbSA9IHN2ZykKUHJvY2Vzc1BhdGgoZCkKICB1bml0Q29udlRvTU0odmFsdWUpCiAgcGM6IG1tID0+CiAgcHg6IG1tID0+CiAgcHQ6IG1tID0+CiAgaW46IG1tID0+CiAgbWlsOiBtbSA9PgogIGNtOiBtbSA9PgogIG1tOiBtbSA9PgogIG06IG1tID0+CiAgdW5pdENvbnYodW5pdCkKICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAoX3gsIF95LCBvcHRzKSA9PgogICgpID0+CiAgYSA9PgogIGEgPT4KICBhID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					243,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1495,
								1519
							],
							[
								1739,
								1760
							],
							[
								1986,
								2002
							],
							[
								2556,
								2578
							],
							[
								2877,
								2907
							],
							[
								3067,
								3094
							],
							[
								3231,
								3245
							],
							[
								3351,
								3372
							],
							[
								3804,
								3808
							],
							[
								3968,
								3998
							],
							[
								4050,
								4064
							],
							[
								5088,
								5102
							],
							[
								5353,
								5389
							],
							[
								5500,
								5519
							],
							[
								5529,
								5538
							],
							[
								5552,
								5576
							],
							[
								5662,
								5690
							],
							[
								5780,
								5806
							],
							[
								5966,
								6028
							],
							[
								6203,
								6238
							],
							[
								6330,
								6367
							],
							[
								6448,
								6468
							],
							[
								6544,
								6568
							],
							[
								6910,
								6914
							],
							[
								7373,
								7377
							],
							[
								7402,
								7406
							],
							[
								7471,
								7482
							],
							[
								7687,
								7722
							],
							[
								7864,
								7888
							],
							[
								7944,
								7969
							],
							[
								8048,
								8052
							],
							[
								8086,
								8090
							],
							[
								8120,
								8146
							],
							[
								8205,
								8209
							],
							[
								8243,
								8292
							],
							[
								8307,
								8312
							],
							[
								8440,
								8450
							],
							[
								8563,
								8568
							],
							[
								8590,
								8594
							],
							[
								8851,
								8882
							],
							[
								9171,
								9204
							],
							[
								9604,
								9628
							],
							[
								9983,
								10011
							],
							[
								10627,
								10636
							],
							[
								10653,
								10662
							],
							[
								10694,
								10703
							],
							[
								10722,
								10731
							],
							[
								10745,
								10755
							],
							[
								10771,
								10780
							],
							[
								10794,
								10803
							],
							[
								10810,
								10818
							],
							[
								10833,
								10856
							],
							[
								10867,
								10876
							],
							[
								10921,
								10953
							],
							[
								11031,
								11065
							],
							[
								11261,
								11286
							],
							[
								11343,
								11393
							],
							[
								11663,
								11696
							],
							[
								11796,
								11831
							],
							[
								11908,
								11930
							],
							[
								12547,
								12565
							],
							[
								12608,
								12614
							],
							[
								12648,
								12653
							],
							[
								12695,
								12700
							],
							[
								12817,
								12822
							],
							[
								13117,
								13143
							],
							[
								13244,
								13270
							],
							[
								14580,
								14584
							],
							[
								14674,
								14683
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"AQAAAAAAAAAAAAAAqgQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					244,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1495,
								1519
							],
							[
								1739,
								1760
							],
							[
								1986,
								2002
							],
							[
								2556,
								2578
							],
							[
								2877,
								2907
							],
							[
								3067,
								3094
							],
							[
								3231,
								3245
							],
							[
								3351,
								3372
							],
							[
								3804,
								3808
							],
							[
								3968,
								3998
							],
							[
								4050,
								4064
							],
							[
								5088,
								5102
							],
							[
								5353,
								5389
							],
							[
								5500,
								5519
							],
							[
								5529,
								5538
							],
							[
								5552,
								5576
							],
							[
								5662,
								5690
							],
							[
								5780,
								5806
							],
							[
								5966,
								6028
							],
							[
								6203,
								6238
							],
							[
								6330,
								6367
							],
							[
								6448,
								6468
							],
							[
								6544,
								6568
							],
							[
								6910,
								6914
							],
							[
								7373,
								7377
							],
							[
								7402,
								7406
							],
							[
								7471,
								7482
							],
							[
								7687,
								7722
							],
							[
								7864,
								7888
							],
							[
								7944,
								7969
							],
							[
								8048,
								8052
							],
							[
								8086,
								8090
							],
							[
								8120,
								8146
							],
							[
								8205,
								8209
							],
							[
								8243,
								8292
							],
							[
								8307,
								8312
							],
							[
								8440,
								8450
							],
							[
								8563,
								8568
							],
							[
								8590,
								8594
							],
							[
								8851,
								8882
							],
							[
								9171,
								9204
							],
							[
								9604,
								9628
							],
							[
								9983,
								10011
							],
							[
								10627,
								10636
							],
							[
								10653,
								10662
							],
							[
								10694,
								10703
							],
							[
								10722,
								10731
							],
							[
								10745,
								10755
							],
							[
								10771,
								10780
							],
							[
								10794,
								10803
							],
							[
								10810,
								10818
							],
							[
								10833,
								10856
							],
							[
								10867,
								10876
							],
							[
								10921,
								10953
							],
							[
								11031,
								11065
							],
							[
								11261,
								11286
							],
							[
								11343,
								11393
							],
							[
								11663,
								11696
							],
							[
								11796,
								11831
							],
							[
								11908,
								11930
							],
							[
								12547,
								12565
							],
							[
								12608,
								12614
							],
							[
								12648,
								12653
							],
							[
								12695,
								12700
							],
							[
								12817,
								12822
							],
							[
								13117,
								13143
							],
							[
								13244,
								13270
							],
							[
								14675,
								14679
							],
							[
								14769,
								14778
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqBAAAICBwYXJzZVNWR1BhdGgocykKICBwYXJzZVZhbHVlcyA9IGFyZ3MgPT4KICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgKHYsIHApID0+CiAgZSA9PgogIG4gPT4KSGFzUGFyZW50KGVsZW0sIG90aGVyKQpHZXRCb3VuZHMoc3ZnRWxlbSA9IHN2ZykKUHJvY2Vzc1BhdGgoZCkKICB1bml0Q29udlRvTU0odmFsdWUpCiAgcGM6IG1tID0+CiAgcHg6IG1tID0+CiAgcHQ6IG1tID0+CiAgaW46IG1tID0+CiAgbWlsOiBtbSA9PgogIGNtOiBtbSA9PgogIG1tOiBtbSA9PgogIG06IG1tID0+CiAgdW5pdENvbnYodW5pdCkKICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAoX3gsIF95LCBvcHRzKSA9PgogICgpID0+CiAgYSA9PgogIGEgPT4KICBhID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAACqBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					245,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1495,
								1519
							],
							[
								1739,
								1760
							],
							[
								1986,
								2002
							],
							[
								2556,
								2578
							],
							[
								2877,
								2907
							],
							[
								3067,
								3094
							],
							[
								3231,
								3245
							],
							[
								3351,
								3372
							],
							[
								3804,
								3808
							],
							[
								3968,
								3998
							],
							[
								4050,
								4064
							],
							[
								5088,
								5102
							],
							[
								5353,
								5389
							],
							[
								5500,
								5519
							],
							[
								5529,
								5538
							],
							[
								5552,
								5576
							],
							[
								5662,
								5690
							],
							[
								5780,
								5806
							],
							[
								5966,
								6028
							],
							[
								6203,
								6238
							],
							[
								6330,
								6367
							],
							[
								6448,
								6468
							],
							[
								6544,
								6568
							],
							[
								6910,
								6914
							],
							[
								7373,
								7377
							],
							[
								7402,
								7406
							],
							[
								7471,
								7482
							],
							[
								7687,
								7722
							],
							[
								7864,
								7888
							],
							[
								7944,
								7969
							],
							[
								8048,
								8052
							],
							[
								8086,
								8090
							],
							[
								8120,
								8146
							],
							[
								8205,
								8209
							],
							[
								8243,
								8292
							],
							[
								8307,
								8312
							],
							[
								8440,
								8450
							],
							[
								8563,
								8568
							],
							[
								8590,
								8594
							],
							[
								8851,
								8882
							],
							[
								9171,
								9204
							],
							[
								9604,
								9628
							],
							[
								9983,
								10011
							],
							[
								10627,
								10636
							],
							[
								10653,
								10662
							],
							[
								10694,
								10703
							],
							[
								10722,
								10731
							],
							[
								10745,
								10755
							],
							[
								10771,
								10780
							],
							[
								10794,
								10803
							],
							[
								10810,
								10818
							],
							[
								10833,
								10856
							],
							[
								10867,
								10876
							],
							[
								10921,
								10953
							],
							[
								11031,
								11065
							],
							[
								11261,
								11286
							],
							[
								11343,
								11393
							],
							[
								11663,
								11696
							],
							[
								11796,
								11831
							],
							[
								11908,
								11930
							],
							[
								12547,
								12565
							],
							[
								12608,
								12614
							],
							[
								12648,
								12653
							],
							[
								12695,
								12700
							],
							[
								12817,
								12822
							],
							[
								13117,
								13143
							],
							[
								13244,
								13270
							],
							[
								14677,
								14681
							],
							[
								14771,
								14780
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqBAAAICBwYXJzZVNWR1BhdGgocykKICBwYXJzZVZhbHVlcyA9IGFyZ3MgPT4KICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgKHYsIHApID0+CiAgZSA9PgogIG4gPT4KSGFzUGFyZW50KGVsZW0sIG90aGVyKQpHZXRCb3VuZHMoc3ZnRWxlbSA9IHN2ZykKUHJvY2Vzc1BhdGgoZCkKICB1bml0Q29udlRvTU0odmFsdWUpCiAgcGM6IG1tID0+CiAgcHg6IG1tID0+CiAgcHQ6IG1tID0+CiAgaW46IG1tID0+CiAgbWlsOiBtbSA9PgogIGNtOiBtbSA9PgogIG1tOiBtbSA9PgogIG06IG1tID0+CiAgdW5pdENvbnYodW5pdCkKICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAoX3gsIF95LCBvcHRzKSA9PgogICgpID0+CiAgYSA9PgogIGEgPT4KICBhID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAACqBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					246,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1495,
								1519
							],
							[
								1739,
								1760
							],
							[
								1986,
								2002
							],
							[
								2556,
								2578
							],
							[
								2877,
								2907
							],
							[
								3067,
								3094
							],
							[
								3231,
								3245
							],
							[
								3351,
								3372
							],
							[
								3804,
								3808
							],
							[
								3968,
								3998
							],
							[
								4050,
								4064
							],
							[
								5088,
								5102
							],
							[
								5353,
								5389
							],
							[
								5500,
								5519
							],
							[
								5529,
								5538
							],
							[
								5552,
								5576
							],
							[
								5662,
								5690
							],
							[
								5780,
								5806
							],
							[
								5966,
								6028
							],
							[
								6203,
								6238
							],
							[
								6330,
								6367
							],
							[
								6448,
								6468
							],
							[
								6544,
								6568
							],
							[
								6910,
								6914
							],
							[
								7373,
								7377
							],
							[
								7402,
								7406
							],
							[
								7471,
								7482
							],
							[
								7687,
								7722
							],
							[
								7864,
								7888
							],
							[
								7944,
								7969
							],
							[
								8048,
								8052
							],
							[
								8086,
								8090
							],
							[
								8120,
								8146
							],
							[
								8205,
								8209
							],
							[
								8243,
								8292
							],
							[
								8307,
								8312
							],
							[
								8440,
								8450
							],
							[
								8563,
								8568
							],
							[
								8590,
								8594
							],
							[
								8851,
								8882
							],
							[
								9171,
								9204
							],
							[
								9604,
								9628
							],
							[
								9983,
								10011
							],
							[
								10627,
								10636
							],
							[
								10653,
								10662
							],
							[
								10694,
								10703
							],
							[
								10722,
								10731
							],
							[
								10745,
								10755
							],
							[
								10771,
								10780
							],
							[
								10794,
								10803
							],
							[
								10810,
								10818
							],
							[
								10833,
								10856
							],
							[
								10867,
								10876
							],
							[
								10921,
								10953
							],
							[
								11031,
								11065
							],
							[
								11261,
								11286
							],
							[
								11343,
								11393
							],
							[
								11663,
								11696
							],
							[
								11796,
								11831
							],
							[
								11908,
								11930
							],
							[
								12547,
								12565
							],
							[
								12608,
								12614
							],
							[
								12648,
								12653
							],
							[
								12695,
								12700
							],
							[
								12817,
								12822
							],
							[
								13117,
								13143
							],
							[
								13244,
								13270
							],
							[
								14679,
								14683
							],
							[
								14773,
								14782
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAACqBAAAICBwYXJzZVNWR1BhdGgocykKICBwYXJzZVZhbHVlcyA9IGFyZ3MgPT4KICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgKHYsIHApID0+CiAgZSA9PgogIG4gPT4KSGFzUGFyZW50KGVsZW0sIG90aGVyKQpHZXRCb3VuZHMoc3ZnRWxlbSA9IHN2ZykKUHJvY2Vzc1BhdGgoZCkKICB1bml0Q29udlRvTU0odmFsdWUpCiAgcGM6IG1tID0+CiAgcHg6IG1tID0+CiAgcHQ6IG1tID0+CiAgaW46IG1tID0+CiAgbWlsOiBtbSA9PgogIGNtOiBtbSA9PgogIG1tOiBtbSA9PgogIG06IG1tID0+CiAgdW5pdENvbnYodW5pdCkKICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAoX3gsIF95LCBvcHRzKSA9PgogICgpID0+CiAgYSA9PgogIGEgPT4KICBhID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAACqBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqgQAACAgcGFyc2VTVkdQYXRoKHMpCiAgcGFyc2VWYWx1ZXMgPSBhcmdzID0+CiAgKF8sIGMsIGFyZ3MpID0+CiAgc3BsaXRQYXRoKHBzKQogIHBhdGhUb0Fic29sdXRlKHBhdGgpCiAgcGF0aFRvUG9pbnRzKHBhdGgpCiAgaXNVcHBlciA9IHMgPT4KTWFrZVBvaW50ID0gKHgsIHkpID0+CiAgbiA9PgogIHBvaW50c1RvQWJzb2x1dGUoaXQpCiAgaXNVcHBlciA9IHMgPT4KICBzYXZlKGZpbGVuYW1lKQpOdW1lcmljQXJncyhzLCB0ID0gYSA9PiBhKQogIGRlcmVmID0gcCA9PiBvYmogPT4KKG8sIGspID0+ClBhcmVudFBhdGhzKHApCkN1bXVsYXRpdmVQYXRocyhwKQpBbGxQYXJlbnRzKGVsZW0pCkFsbFRyYW5zZm9ybXMoZWxlbSwgZ2V0dGVyID0gZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgpCkVsZW1lbnRUcmFuc2Zvcm1MaXN0KGVsZW0pCkVsZW1lbnRUcmFuc2Zvcm1NYXRyaXgoZWxlbSkKR2V0WFkoZWxlbSkKR2V0UG9pbnRzKGVsZW0pCiAgcCA9PgogIGMgPT4KICBhID0+CihbeCwgeV0pID0+CkdldFRyYW5zZm9ybWVkUG9pbnRzKGVsZW0pCkdldE1hdHJpeChlbGVtKQpJc0NsaXBQYXRoKGVsZW0pCiAgZSA9PgogIGUgPT4KSGFzQ2xpcFBhdGgoZWxlbSkKICBlID0+ClBvc2l0aW9uZWRFbGVtZW50cyhzdmdFbGVtID0gc3ZnLCBza2lwKQooKSA9PgogICh2LCBwKSA9PgogIGUgPT4KICBuID0+Ckhhc1BhcmVudChlbGVtLCBvdGhlcikKR2V0Qm91bmRzKHN2Z0VsZW0gPSBzdmcpClByb2Nlc3NQYXRoKGQpCiAgdW5pdENvbnZUb01NKHZhbHVlKQogIHBjOiBtbSA9PgogIHB4OiBtbSA9PgogIHB0OiBtbSA9PgogIGluOiBtbSA9PgogIG1pbDogbW0gPT4KICBjbTogbW0gPT4KICBtbTogbW0gPT4KICBtOiBtbSA9PgogIHVuaXRDb252KHVuaXQpCiAgdmFsdWUgPT4KICB1bml0Q29udlRvKHZhbHVlLCB1bml0KQogIGdldFZpZXdCb3goc3ZnRWxlbSA9IHN2ZykKWE1MMlN0cmluZyhlbGVtKQogIGdldFdpZHRoSGVpZ2h0KHN2Z0VsZW0gPSBzdmcsIHQgPSBhID0+IGEpCiAgZ2V0VHJhbnNmb3JtYXRpb25MaXN0KGUpCiAgZ2V0VHJhbnNmb3JtYXRpb25NYXRyaXgoZSkKICBtYWluKC4uLmFyZ3MpCiAgKF94LCBfeSwgb3B0cykgPT4KICAoKSA9PgogIGEgPT4KICBhID0+CiAgYSA9PgogIHByaW50ID0gKGZpbGUsIC4uLmFyZ3MpID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICB1ID0+CihhLCBpKSA9PgAAAAAAAAAAqgQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					247,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/resolve-imports.js",
						"symkeys":
						[
							[
								676,
								689
							],
							[
								708,
								728
							],
							[
								1250,
								1265
							],
							[
								1272,
								1283
							],
							[
								1435,
								1447
							],
							[
								1673,
								1679
							],
							[
								1757,
								1784
							],
							[
								1912,
								1917
							],
							[
								1972,
								2003
							],
							[
								2165,
								2196
							],
							[
								2408,
								2439
							],
							[
								2544,
								2569
							],
							[
								2807,
								2843
							],
							[
								3190,
								3215
							],
							[
								3252,
								3279
							],
							[
								3364,
								3390
							],
							[
								3448,
								3468
							],
							[
								3539,
								3557
							],
							[
								3819,
								3832
							],
							[
								3860,
								3866
							],
							[
								3919,
								3941
							],
							[
								4291,
								4315
							],
							[
								4636,
								4666
							],
							[
								4775,
								4796
							],
							[
								4843,
								4871
							],
							[
								4882,
								4895
							],
							[
								4985,
								4998
							],
							[
								5264,
								5270
							],
							[
								5349,
								5396
							],
							[
								5468,
								5484
							],
							[
								5739,
								5757
							],
							[
								5925,
								5964
							],
							[
								6080,
								6092
							],
							[
								6115,
								6142
							],
							[
								6268,
								6280
							],
							[
								6673,
								6700
							],
							[
								6715,
								6733
							],
							[
								6973,
								6985
							],
							[
								6994,
								7019
							],
							[
								7102,
								7111
							],
							[
								7200,
								7265
							],
							[
								7278,
								7291
							],
							[
								7304,
								7326
							],
							[
								7331,
								7364
							],
							[
								7373,
								7391
							],
							[
								7485,
								7497
							],
							[
								7547,
								7556
							],
							[
								7646,
								7672
							],
							[
								7681,
								7699
							],
							[
								7777,
								7789
							],
							[
								7798,
								7809
							],
							[
								7870,
								7879
							],
							[
								7968,
								7991
							],
							[
								8014,
								8020
							],
							[
								8050,
								8075
							],
							[
								9487,
								9511
							],
							[
								9528,
								9534
							],
							[
								9596,
								9602
							],
							[
								9653,
								9677
							],
							[
								9995,
								10019
							],
							[
								10068,
								10074
							],
							[
								10316,
								10340
							],
							[
								10369,
								10375
							],
							[
								10526,
								10555
							],
							[
								10671,
								10680
							],
							[
								10831,
								10860
							],
							[
								11120,
								11186
							],
							[
								12022,
								12039
							],
							[
								12340,
								12358
							],
							[
								12401,
								12417
							],
							[
								12511,
								12550
							],
							[
								12884,
								12888
							],
							[
								13028,
								13035
							],
							[
								13098,
								13109
							],
							[
								13308,
								13326
							],
							[
								13657,
								13674
							],
							[
								16108,
								16112
							],
							[
								16731,
								16779
							],
							[
								17036,
								17042
							],
							[
								17546,
								17552
							],
							[
								17608,
								17614
							],
							[
								18405,
								18411
							],
							[
								18442,
								18448
							],
							[
								18537,
								18543
							],
							[
								18896,
								18902
							],
							[
								19066,
								19072
							],
							[
								19099,
								19105
							],
							[
								19123,
								19128
							],
							[
								19171,
								19186
							],
							[
								19207,
								19214
							],
							[
								19269,
								19324
							],
							[
								20282,
								20288
							],
							[
								20430,
								20436
							],
							[
								20559,
								20565
							],
							[
								20721,
								20727
							],
							[
								21302,
								21308
							],
							[
								21357,
								21363
							],
							[
								21531,
								21537
							],
							[
								21591,
								21596
							],
							[
								21647,
								21662
							],
							[
								21683,
								21690
							],
							[
								21751,
								21781
							],
							[
								21884,
								21890
							],
							[
								22002,
								22018
							],
							[
								22861,
								22867
							],
							[
								22887,
								22893
							],
							[
								22910,
								22916
							],
							[
								23127,
								23136
							],
							[
								23208,
								23214
							],
							[
								23291,
								23304
							],
							[
								23406,
								23410
							],
							[
								23496,
								23502
							],
							[
								24142,
								24147
							],
							[
								24250,
								24255
							],
							[
								29293,
								29322
							],
							[
								29472,
								29490
							],
							[
								29531,
								29553
							],
							[
								29579,
								29585
							],
							[
								29602,
								29625
							],
							[
								29685,
								29715
							],
							[
								29750,
								29756
							],
							[
								29782,
								29792
							],
							[
								29847,
								29877
							],
							[
								29903,
								29916
							],
							[
								30123,
								30147
							],
							[
								30208,
								30240
							],
							[
								30266,
								30279
							],
							[
								30306,
								30336
							],
							[
								30389,
								30424
							],
							[
								30429,
								30449
							],
							[
								30564,
								30595
							],
							[
								30875,
								30907
							],
							[
								31083,
								31120
							],
							[
								31204,
								31237
							],
							[
								31300,
								31321
							],
							[
								31427,
								31439
							],
							[
								31458,
								31481
							],
							[
								31614,
								31625
							],
							[
								31655,
								31671
							],
							[
								31703,
								31712
							],
							[
								31742,
								31756
							],
							[
								31788,
								31798
							],
							[
								31838,
								31845
							],
							[
								31893,
								31902
							],
							[
								31963,
								31981
							],
							[
								32214,
								32249
							],
							[
								32788,
								32822
							],
							[
								32905,
								32917
							],
							[
								33061,
								33071
							],
							[
								33257,
								33264
							],
							[
								33372,
								33394
							],
							[
								33647,
								33659
							],
							[
								33724,
								33742
							],
							[
								33883,
								33892
							],
							[
								33920,
								33941
							],
							[
								34132,
								34141
							],
							[
								34186,
								34196
							],
							[
								34327,
								34334
							],
							[
								34500,
								34514
							],
							[
								34766,
								34783
							],
							[
								34827,
								34839
							],
							[
								35157,
								35169
							],
							[
								35417,
								35436
							],
							[
								35717,
								35736
							],
							[
								35877,
								35902
							],
							[
								36016,
								36033
							],
							[
								37929,
								37940
							],
							[
								37990,
								38004
							],
							[
								38227,
								38237
							],
							[
								38681,
								38693
							],
							[
								38850,
								38856
							],
							[
								38998,
								39010
							],
							[
								39054,
								39084
							],
							[
								39593,
								39598
							],
							[
								39999,
								40008
							],
							[
								40031,
								40040
							],
							[
								40153,
								40160
							],
							[
								40193,
								40205
							],
							[
								40569,
								40581
							],
							[
								40610,
								40630
							],
							[
								40701,
								40712
							],
							[
								40745,
								40765
							],
							[
								40829,
								40858
							],
							[
								42450,
								42460
							],
							[
								42836,
								42848
							],
							[
								43269,
								43281
							],
							[
								43670,
								43682
							],
							[
								43800,
								43807
							],
							[
								43852,
								43882
							],
							[
								44197,
								44225
							],
							[
								44255,
								44259
							],
							[
								44278,
								44306
							],
							[
								44339,
								44358
							],
							[
								44417,
								44444
							],
							[
								44477,
								44496
							],
							[
								44571,
								44612
							],
							[
								45078,
								45101
							],
							[
								45241,
								45264
							],
							[
								45393,
								45533
							],
							[
								46236,
								46270
							],
							[
								46337,
								46385
							],
							[
								46431,
								46470
							],
							[
								47045,
								47073
							],
							[
								47122,
								47143
							],
							[
								47217,
								47238
							],
							[
								47299,
								47320
							],
							[
								47393,
								47439
							],
							[
								47488,
								47494
							],
							[
								47568,
								47574
							],
							[
								47640,
								47646
							],
							[
								47717,
								47739
							],
							[
								48438,
								48453
							],
							[
								48539,
								48546
							],
							[
								48642,
								48649
							],
							[
								48704,
								48711
							],
							[
								48751,
								48762
							],
							[
								49093,
								49099
							],
							[
								49171,
								49179
							],
							[
								49367,
								49373
							],
							[
								49416,
								49422
							],
							[
								49478,
								49485
							],
							[
								49547,
								49555
							],
							[
								49607,
								49613
							],
							[
								49669,
								49675
							],
							[
								49734,
								49740
							],
							[
								49802,
								49808
							],
							[
								49869,
								49875
							],
							[
								49947,
								49953
							],
							[
								50027,
								50033
							],
							[
								50096,
								50102
							],
							[
								50160,
								50166
							],
							[
								50213,
								50219
							],
							[
								50278,
								50284
							],
							[
								50342,
								50348
							],
							[
								50409,
								50415
							],
							[
								50470,
								50476
							],
							[
								50523,
								50529
							],
							[
								50599,
								50620
							],
							[
								50695,
								50711
							],
							[
								50799,
								50845
							],
							[
								51349,
								51355
							],
							[
								52020,
								52026
							],
							[
								52031,
								52044
							],
							[
								52136,
								52158
							],
							[
								53295,
								53325
							],
							[
								53338,
								53344
							],
							[
								53407,
								53416
							],
							[
								53455,
								53461
							],
							[
								53509,
								53538
							],
							[
								54241,
								54255
							],
							[
								55160,
								55174
							],
							[
								55393,
								55406
							],
							[
								55443,
								55450
							]
						],
						"symlist":
						[
							"ArgumentError",
							"constructor(...args)",
							"logFile = () =>",
							"log = () =>",
							"allImports()",
							"arg =>",
							"function ReadJSON(filename)",
							"() =>",
							"function ImportedBy(importFile)",
							"function ResolveAlias(filename)",
							"function IsFileImport(filename)",
							"function NormalizePath(p)",
							"FileBannerComment = (filename, i) =>",
							"IsBuiltin = moduleName =>",
							"compact = (n, more = {}) =>",
							"AddUnique = (arr, item) =>",
							"IntToDWord = ival =>",
							"IntToBinary = i =>",
							"(n, value) =>",
							"num =>",
							"(type, lexeme, tok) =>",
							"CompareRange = (a, b) =>",
							"PutsFunction = outFn => str =>",
							"IsWhiteSpace = str =>",
							"debugLog = (str, ...args) =>",
							"pred = arg =>",
							"(acc, opt) =>",
							"arg =>",
							"function OutputImports(imports = globalImports)",
							"([name, obj]) =>",
							"([local, name]) =>",
							"function FileWriter(file, mode = 0o755)",
							"close: () =>",
							"function FileReplacer(file)",
							"close: () =>",
							"function FdWriter(fd, file)",
							"fn = (buf, len) =>",
							"close: () =>",
							"seek: (whence, offset) =>",
							"inspect()",
							"function ArrayWriter( arr, t = (buf, len) => { if(!types.",
							"(buf)) buf = ",
							"(buf); return buf.",
							"(0, len ?? buf.byteLength); } )",
							"fn = (buf, len) =>",
							"close: () =>",
							"inspect()",
							"function DummyWriter(name)",
							"fn = (buf, len) =>",
							"close: () =>",
							"seek: () =>",
							"inspect()",
							"function ImportIds(seq)",
							"tok =>",
							"function ImportIdMap(seq)",
							"function ImpExpType(seq)",
							"tok =>",
							"tok =>",
							"function ImportType(seq)",
							"function ImportFile(seq)",
							"tok =>",
							"function ExportName(seq)",
							"tok =>",
							"function ByteSequence(tokens)",
							"(n, t) =>",
							"function ModuleLoader(module)",
							"function ProcessFile(source, log = () => {}, recursive, depth = 0)",
							".handler = lex =>",
							".beginCode = () =>",
							"balancer = () =>",
							"self = function ParentheseBalancer(tok)",
							"s =>",
							"reset()",
							"get depth()",
							"showToken = tok =>",
							"PathAdjust = s =>",
							"i =>",
							" function Export(tokens, relativePath = s => s)",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"path()",
							"Export",
							"Export",
							"ids()",
							"({ lexeme }) =>",
							"idmap()",
							" function Import(tokens, relativePath = s => s, depth)",
							"path()",
							"Import",
							"tok =>",
							"tok =>",
							"tok =>",
							"tok =>",
							"Import",
							"ids()",
							"({ lexeme }) =>",
							"idmap()",
							"toCode(filterIds = id => true)",
							"tok =>",
							"(acc, tok, i) =>",
							"exp =>",
							"exp =>",
							"tok =>",
							"(a, b) =>",
							"imp =>",
							"(acc, imp) =>",
							"b =>",
							"imp =>",
							"id =>",
							"id =>",
							"function AddDep(source, file)",
							"function IsWS(tok)",
							"function NonWS(tokens)",
							"tok =>",
							"function LeadingWS(str)",
							"function TokenSequence(tokens)",
							"tok =>",
							"toString()",
							"function AddWhitespace(tokens)",
							"(acc, tok) =>",
							"function Unquote(lexeme)",
							"function LiteralSequence(tokens)",
							"(acc, tok) =>",
							"function UntilEOL(idx, tokens)",
							"function Until(idx, tokens, pred = ",
							"(null, [';', '\\n']))",
							"function WholeLine(idx, tokens)",
							"function Range(file, start, end)",
							"Range.prototype.toString = function()",
							"function InRange([start, end], i)",
							"function IsRange(obj)",
							"NumericRange",
							"constructor(start, end)",
							"get start()",
							"set start(value)",
							"get end()",
							"set end(value)",
							"get size()",
							"clone()",
							"inside(n)",
							"static from(range)",
							"static *holes(ranges, only = false)",
							"static between([s1, e1], [s2, e2])",
							"NumericRange",
							"pad = s =>",
							"FileMap",
							"constructor(file, buf)",
							"get buffer()",
							"static empty(file)",
							"isEmpty()",
							"static for(file, buf)",
							"isEmpty()",
							"toString()",
							"FileMap",
							"findSlice(pos)",
							"([range, buf]) =>",
							"splitAt(pos)",
							"findPos(pos)",
							"insertAt(pos, file)",
							"insert(index, file)",
							"replaceRange(range, file)",
							"sliceIndex = n =>",
							"stringAt(n)",
							" (buf, len) =>",
							"rangeAt(n)",
							"get ranges()",
							"dump()",
							"(item, i) =>",
							"(acc, [range, buf, str], i) =>",
							"at(i)",
							"toArray()",
							"(s, i) =>",
							"holes()",
							"([range]) =>",
							"firstChunk()",
							"([range, buf], i) =>",
							"lastChunk()",
							"([range, buf], i) =>",
							"write(out, depth = 0, serial)",
							"toString()",
							"(item, i) =>",
							"(part, i) =>",
							"(item, i) =>",
							"FileMap",
							"function BufferFile(file, buf)",
							"function BufferLengths(file)",
							"b =>",
							"function BufferOffsets(file)",
							"([pos, list], b) =>",
							"function BufferRanges(file)",
							"([pos, list], b) =>",
							"function WriteFile(name, data, opts = {})",
							"function DumpLexer(lex)",
							"function DumpToken(tok)",
							"function* DependencyTree( root, indent = ' ', spacing = false, depth = 0, pre = '', fn = (name, depth) => `${name} (${depth})` )",
							" function stripLeadingDotSlash(n)",
							"function SpreadAndJoin(iterator, separator = '')",
							"function* PrintUserscriptBanner(fields)",
							"function PrintES6Import(imp)",
							" ({ local, file }) =>",
							" ({ local, file }) =>",
							" ({ local, file }) =>",
							"function PrintCJSImport({ type, local, file })",
							" () =>",
							" () =>",
							" () =>",
							"function main(...args)",
							"write(buf, len)",
							"puts(s)",
							"line =>",
							"close()",
							"isWS = s =>",
							" () =>",
							" file =>",
							" () =>",
							" () =>",
							" arg =>",
							" file =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" () =>",
							" function ShowHelp()",
							"(acc, [name]) =>",
							" (acc, [name, [hasArg, fn, shortOpt]]) =>",
							"arg =>",
							" () =>",
							" (...args) =>",
							"RelativePath = file =>",
							"ContainsAny = (arr, tokens) =>",
							"tok =>",
							"impexp =>",
							"hdr =>",
							" ([acc, prev], hdr) =>",
							"(acc, line) =>",
							"({ depth }) =>",
							"({ name }) =>",
							"name =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqBAAAICBwYXJzZVNWR1BhdGgocykKICBwYXJzZVZhbHVlcyA9IGFyZ3MgPT4KICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgKHYsIHApID0+CiAgZSA9PgogIG4gPT4KSGFzUGFyZW50KGVsZW0sIG90aGVyKQpHZXRCb3VuZHMoc3ZnRWxlbSA9IHN2ZykKUHJvY2Vzc1BhdGgoZCkKICB1bml0Q29udlRvTU0odmFsdWUpCiAgcGM6IG1tID0+CiAgcHg6IG1tID0+CiAgcHQ6IG1tID0+CiAgaW46IG1tID0+CiAgbWlsOiBtbSA9PgogIGNtOiBtbSA9PgogIG1tOiBtbSA9PgogIG06IG1tID0+CiAgdW5pdENvbnYodW5pdCkKICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAoX3gsIF95LCBvcHRzKSA9PgogICgpID0+CiAgYSA9PgogIGEgPT4KICBhID0+CiAgcHJpbnQgPSAoZmlsZSwgLi4uYXJncykgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAACqEAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					248,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACqEAAAQXJndW1lbnRFcnJvcgogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpCiAgbG9nRmlsZSA9ICgpID0+CiAgbG9nID0gKCkgPT4KICBhbGxJbXBvcnRzKCkKICBhcmcgPT4KUmVhZEpTT04oZmlsZW5hbWUpCigpID0+CkltcG9ydGVkQnkoaW1wb3J0RmlsZSkKUmVzb2x2ZUFsaWFzKGZpbGVuYW1lKQpJc0ZpbGVJbXBvcnQoZmlsZW5hbWUpCk5vcm1hbGl6ZVBhdGgocCkKRmlsZUJhbm5lckNvbW1lbnQgPSAoZmlsZW5hbWUsIGkpID0+CklzQnVpbHRpbiA9IG1vZHVsZU5hbWUgPT4KICBjb21wYWN0ID0gKG4sIG1vcmUgPSB7fSkgPT4KQWRkVW5pcXVlID0gKGFyciwgaXRlbSkgPT4KSW50VG9EV29yZCA9IGl2YWwgPT4KSW50VG9CaW5hcnkgPSBpID0+CihuLCB2YWx1ZSkgPT4KICBudW0gPT4KKHR5cGUsIGxleGVtZSwgdG9rKSA9PgpDb21wYXJlUmFuZ2UgPSAoYSwgYikgPT4KUHV0c0Z1bmN0aW9uID0gb3V0Rm4gPT4gc3RyID0+CklzV2hpdGVTcGFjZSA9IHN0ciA9PgogIGRlYnVnTG9nID0gKHN0ciwgLi4uYXJncykgPT4KICBwcmVkID0gYXJnID0+CihhY2MsIG9wdCkgPT4KICBhcmcgPT4KT3V0cHV0SW1wb3J0cyhpbXBvcnRzID0gZ2xvYmFsSW1wb3J0cykKKFtuYW1lLCBvYmpdKSA9PgooW2xvY2FsLCBuYW1lXSkgPT4KRmlsZVdyaXRlcihmaWxlLCBtb2RlID0gMG83NTUpCiAgY2xvc2U6ICgpID0+CkZpbGVSZXBsYWNlcihmaWxlKQogIGNsb3NlOiAoKSA9PgpGZFdyaXRlcihmZCwgZmlsZSkKICBmbiA9IChidWYsIGxlbikgPT4KICBjbG9zZTogKCkgPT4KICBzZWVrOiAod2hlbmNlLCBvZmZzZXQpID0+CiAgaW5zcGVjdCgpCkFycmF5V3JpdGVyKCBhcnIsIHQgPSAoYnVmLCBsZW4pID0+IHsgaWYoIXR5cGVzLgooYnVmKSkgYnVmID0gCihidWYpOyByZXR1cm4gYnVmLgooMCwgbGVuID8/IGJ1Zi5ieXRlTGVuZ3RoKTsgfSApCiAgZm4gPSAoYnVmLCBsZW4pID0+CiAgY2xvc2U6ICgpID0+CiAgaW5zcGVjdCgpCkR1bW15V3JpdGVyKG5hbWUpCiAgZm4gPSAoYnVmLCBsZW4pID0+CiAgY2xvc2U6ICgpID0+CiAgc2VlazogKCkgPT4KICBpbnNwZWN0KCkKSW1wb3J0SWRzKHNlcSkKICB0b2sgPT4KSW1wb3J0SWRNYXAoc2VxKQpJbXBFeHBUeXBlKHNlcSkKICB0b2sgPT4KICB0b2sgPT4KSW1wb3J0VHlwZShzZXEpCkltcG9ydEZpbGUoc2VxKQogIHRvayA9PgpFeHBvcnROYW1lKHNlcSkKICB0b2sgPT4KQnl0ZVNlcXVlbmNlKHRva2VucykKKG4sIHQpID0+Ck1vZHVsZUxvYWRlcihtb2R1bGUpClByb2Nlc3NGaWxlKHNvdXJjZSwgbG9nID0gKCkgPT4ge30sIHJlY3Vyc2l2ZSwgZGVwdGggPSAwKQogIC5oYW5kbGVyID0gbGV4ID0+CiAgLmJlZ2luQ29kZSA9ICgpID0+CiAgYmFsYW5jZXIgPSAoKSA9PgogIHNlbGYgPSBmdW5jdGlvbiBQYXJlbnRoZXNlQmFsYW5jZXIodG9rKQogIHMgPT4KICByZXNldCgpCiAgZ2V0IGRlcHRoKCkKICBzaG93VG9rZW4gPSB0b2sgPT4KUGF0aEFkanVzdCA9IHMgPT4KICBpID0+CkV4cG9ydCh0b2tlbnMsIHJlbGF0aXZlUGF0aCA9IHMgPT4gcykKICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICB0b2sgPT4KICBwYXRoKCkKRXhwb3J0CkV4cG9ydAogIGlkcygpCih7IGxleGVtZSB9KSA9PgogIGlkbWFwKCkKSW1wb3J0KHRva2VucywgcmVsYXRpdmVQYXRoID0gcyA9PiBzLCBkZXB0aCkKICBwYXRoKCkKSW1wb3J0CiAgdG9rID0+CiAgdG9rID0+CiAgdG9rID0+CiAgdG9rID0+CkltcG9ydAogIGlkcygpCih7IGxleGVtZSB9KSA9PgogIGlkbWFwKCkKICB0b0NvZGUoZmlsdGVySWRzID0gaWQgPT4gdHJ1ZSkKICB0b2sgPT4KKGFjYywgdG9rLCBpKSA9PgogIGV4cCA9PgogIGV4cCA9PgogIHRvayA9PgooYSwgYikgPT4KICBpbXAgPT4KKGFjYywgaW1wKSA9PgogIGIgPT4KICBpbXAgPT4KICBpZCA9PgogIGlkID0+CkFkZERlcChzb3VyY2UsIGZpbGUpCklzV1ModG9rKQpOb25XUyh0b2tlbnMpCiAgdG9rID0+CkxlYWRpbmdXUyhzdHIpClRva2VuU2VxdWVuY2UodG9rZW5zKQogIHRvayA9PgogIHRvU3RyaW5nKCkKQWRkV2hpdGVzcGFjZSh0b2tlbnMpCihhY2MsIHRvaykgPT4KVW5xdW90ZShsZXhlbWUpCkxpdGVyYWxTZXF1ZW5jZSh0b2tlbnMpCihhY2MsIHRvaykgPT4KVW50aWxFT0woaWR4LCB0b2tlbnMpClVudGlsKGlkeCwgdG9rZW5zLCBwcmVkID0gCihudWxsLCBbJzsnLCAnXG4nXSkpCldob2xlTGluZShpZHgsIHRva2VucykKUmFuZ2UoZmlsZSwgc3RhcnQsIGVuZCkKUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKQpJblJhbmdlKFtzdGFydCwgZW5kXSwgaSkKSXNSYW5nZShvYmopCk51bWVyaWNSYW5nZQogIGNvbnN0cnVjdG9yKHN0YXJ0LCBlbmQpCiAgZ2V0IHN0YXJ0KCkKICBzZXQgc3RhcnQodmFsdWUpCiAgZ2V0IGVuZCgpCiAgc2V0IGVuZCh2YWx1ZSkKICBnZXQgc2l6ZSgpCiAgY2xvbmUoKQogIGluc2lkZShuKQogIHN0YXRpYyBmcm9tKHJhbmdlKQogIHN0YXRpYyAqaG9sZXMocmFuZ2VzLCBvbmx5ID0gZmFsc2UpCiAgc3RhdGljIGJldHdlZW4oW3MxLCBlMV0sIFtzMiwgZTJdKQpOdW1lcmljUmFuZ2UKICBwYWQgPSBzID0+CkZpbGVNYXAKICBjb25zdHJ1Y3RvcihmaWxlLCBidWYpCiAgZ2V0IGJ1ZmZlcigpCiAgc3RhdGljIGVtcHR5KGZpbGUpCiAgaXNFbXB0eSgpCiAgc3RhdGljIGZvcihmaWxlLCBidWYpCiAgaXNFbXB0eSgpCiAgdG9TdHJpbmcoKQpGaWxlTWFwCiAgZmluZFNsaWNlKHBvcykKKFtyYW5nZSwgYnVmXSkgPT4KICBzcGxpdEF0KHBvcykKICBmaW5kUG9zKHBvcykKICBpbnNlcnRBdChwb3MsIGZpbGUpCiAgaW5zZXJ0KGluZGV4LCBmaWxlKQogIHJlcGxhY2VSYW5nZShyYW5nZSwgZmlsZSkKICBzbGljZUluZGV4ID0gbiA9PgogIHN0cmluZ0F0KG4pCiAgKGJ1ZiwgbGVuKSA9PgogIHJhbmdlQXQobikKICBnZXQgcmFuZ2VzKCkKICBkdW1wKCkKKGl0ZW0sIGkpID0+CihhY2MsIFtyYW5nZSwgYnVmLCBzdHJdLCBpKSA9PgogIGF0KGkpCiAgdG9BcnJheSgpCihzLCBpKSA9PgogIGhvbGVzKCkKKFtyYW5nZV0pID0+CiAgZmlyc3RDaHVuaygpCihbcmFuZ2UsIGJ1Zl0sIGkpID0+CiAgbGFzdENodW5rKCkKKFtyYW5nZSwgYnVmXSwgaSkgPT4KICB3cml0ZShvdXQsIGRlcHRoID0gMCwgc2VyaWFsKQogIHRvU3RyaW5nKCkKKGl0ZW0sIGkpID0+CihwYXJ0LCBpKSA9PgooaXRlbSwgaSkgPT4KRmlsZU1hcApCdWZmZXJGaWxlKGZpbGUsIGJ1ZikKQnVmZmVyTGVuZ3RocyhmaWxlKQogIGIgPT4KQnVmZmVyT2Zmc2V0cyhmaWxlKQooW3BvcywgbGlzdF0sIGIpID0+CkJ1ZmZlclJhbmdlcyhmaWxlKQooW3BvcywgbGlzdF0sIGIpID0+CldyaXRlRmlsZShuYW1lLCBkYXRhLCBvcHRzID0ge30pCkR1bXBMZXhlcihsZXgpCkR1bXBUb2tlbih0b2spCkRlcGVuZGVuY3lUcmVlKCByb290LCBpbmRlbnQgPSAnICcsIHNwYWNpbmcgPSBmYWxzZSwgZGVwdGggPSAwLCBwcmUgPSAnJywgZm4gPSAobmFtZSwgZGVwdGgpID0+IGAke25hbWV9ICgke2RlcHRofSlgICkKICBzdHJpcExlYWRpbmdEb3RTbGFzaChuKQpTcHJlYWRBbmRKb2luKGl0ZXJhdG9yLCBzZXBhcmF0b3IgPSAnJykKUHJpbnRVc2Vyc2NyaXB0QmFubmVyKGZpZWxkcykKUHJpbnRFUzZJbXBvcnQoaW1wKQogICh7IGxvY2FsLCBmaWxlIH0pID0+CiAgKHsgbG9jYWwsIGZpbGUgfSkgPT4KICAoeyBsb2NhbCwgZmlsZSB9KSA9PgpQcmludENKU0ltcG9ydCh7IHR5cGUsIGxvY2FsLCBmaWxlIH0pCiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgbWFpbiguLi5hcmdzKQogIHdyaXRlKGJ1ZiwgbGVuKQogIHB1dHMocykKICBsaW5lID0+CiAgY2xvc2UoKQogIGlzV1MgPSBzID0+CiAgKCkgPT4KICBmaWxlID0+CiAgKCkgPT4KICAoKSA9PgogIGFyZyA9PgogIGZpbGUgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KICAoKSA9PgogICgpID0+CiAgKCkgPT4KU2hvd0hlbHAoKQooYWNjLCBbbmFtZV0pID0+CiAgKGFjYywgW25hbWUsIFtoYXNBcmcsIGZuLCBzaG9ydE9wdF1dKSA9PgogIGFyZyA9PgogICgpID0+CiAgKC4uLmFyZ3MpID0+ClJlbGF0aXZlUGF0aCA9IGZpbGUgPT4KQ29udGFpbnNBbnkgPSAoYXJyLCB0b2tlbnMpID0+CiAgdG9rID0+CiAgaW1wZXhwID0+CiAgaGRyID0+CiAgKFthY2MsIHByZXZdLCBoZHIpID0+CihhY2MsIGxpbmUpID0+Cih7IGRlcHRoIH0pID0+Cih7IG5hbWUgfSkgPT4KICBuYW1lID0+AAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				]
			]
		},
		{
			"file": "quickjs/qjs-modules/resolve-imports.js",
			"settings":
			{
				"buffer_size": 55973,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					167,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAPMWAAAAAAAA9BYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8xYAAAAAAADzFgAAAAAAAAAAAAAAAPC/"
				],
				[
					168,
					1,
					"insert",
					{
						"characters": " mnodfe"
					},
					"BwAAAPQWAAAAAAAA9RYAAAAAAAAAAAAA9RYAAAAAAAD2FgAAAAAAAAAAAAD2FgAAAAAAAPcWAAAAAAAAAAAAAPcWAAAAAAAA+BYAAAAAAAAAAAAA+BYAAAAAAAD5FgAAAAAAAAAAAAD5FgAAAAAAAPoWAAAAAAAAAAAAAPoWAAAAAAAA+xYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9BYAAAAAAAD0FgAAAAAAAAAAAAAAAPC/"
				],
				[
					169,
					5,
					"left_delete",
					null,
					"BQAAAPoWAAAAAAAA+hYAAAAAAAABAAAAZfkWAAAAAAAA+RYAAAAAAAABAAAAZvgWAAAAAAAA+BYAAAAAAAABAAAAZPcWAAAAAAAA9xYAAAAAAAABAAAAb/YWAAAAAAAA9hYAAAAAAAABAAAAbg",
					"AQAAAAAAAAABAAAA+xYAAAAAAAD7FgAAAAAAAAAAAAAAAPC/"
				],
				[
					170,
					1,
					"insert",
					{
						"characters": "ode="
					},
					"BAAAAPYWAAAAAAAA9xYAAAAAAAAAAAAA9xYAAAAAAAD4FgAAAAAAAAAAAAD4FgAAAAAAAPkWAAAAAAAAAAAAAPkWAAAAAAAA+hYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9hYAAAAAAAD2FgAAAAAAAAAAAAAAAPC/"
				],
				[
					171,
					1,
					"insert",
					{
						"characters": "0o"
					},
					"AgAAAPoWAAAAAAAA+xYAAAAAAAAAAAAA+xYAAAAAAAD8FgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+hYAAAAAAAD6FgAAAAAAAAAAAAAAAPC/"
				],
				[
					172,
					1,
					"left_delete",
					null,
					"AQAAAPsWAAAAAAAA+xYAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAA/BYAAAAAAAD8FgAAAAAAAAAAAAAAAPC/"
				],
				[
					173,
					1,
					"insert",
					{
						"characters": "o755"
					},
					"BAAAAPsWAAAAAAAA/BYAAAAAAAAAAAAA/BYAAAAAAAD9FgAAAAAAAAAAAAD9FgAAAAAAAP4WAAAAAAAAAAAAAP4WAAAAAAAA/xYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+xYAAAAAAAD7FgAAAAAAAAAAAAAAAPC/"
				],
				[
					179,
					5,
					"left_delete",
					null,
					"BQAAAEcXAAAAAAAARxcAAAAAAAABAAAANEYXAAAAAAAARhcAAAAAAAABAAAANEUXAAAAAAAARRcAAAAAAAABAAAANkQXAAAAAAAARBcAAAAAAAABAAAAb0MXAAAAAAAAQxcAAAAAAAABAAAAMA",
					"AQAAAAAAAAABAAAASBcAAAAAAABIFwAAAAAAAAAAAAAAAPC/"
				],
				[
					180,
					1,
					"insert",
					{
						"characters": "mode"
					},
					"BAAAAEMXAAAAAAAARBcAAAAAAAAAAAAARBcAAAAAAABFFwAAAAAAAAAAAABFFwAAAAAAAEYXAAAAAAAAAAAAAEYXAAAAAAAARxcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQxcAAAAAAABDFwAAAAAAAAAAAAAAAPC/"
				],
				[
					210,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC42AAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwppbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnOwppbXBvcnQgeyBMZXhlciwgVG9rZW4gfSBmcm9tICdsZXhlcic7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IEVDTUFTY3JpcHRMZXhlciBmcm9tICdsaWIvbGV4ZXIvZWNtYXNjcmlwdC5qcyc7CmltcG9ydCB7IG1hcFdyYXBwZXIsIGludGVyc2VjdGlvbiwgZGlmZmVyZW5jZSwgc3ltbWV0cmljRGlmZmVyZW5jZSwgdW5pb24sIGVycm9yLCBnZXRzZXQsIG1lbW9pemUsIHJhbmRJbnQsIGdldFR5cGVOYW1lLCBnZXRUeXBlU3RyLCBpc09iamVjdCwgc2hvcnRlbiwgdG9TdHJpbmcsIHRvQXJyYXlCdWZmZXIsIGRlZmluZSwgY3VycnksIHVuaXF1ZSwgc3BsaXQsIGV4dGVuZEFycmF5LCBjYW1lbGl6ZSwgZ2V0T3B0LCBxdW90ZSwgZXNjYXBlLCB0eXBlcywgcGFkU3RhcnRBbnNpIH0gZnJvbSAndXRpbCc7CgooJ3VzZSBzdHJpY3QnKTsKKCd1c2UgbWF0aCcpOwoKY29uc3QgaW5zcGVjdFN5bWJvbCA9IFN5bWJvbC5mb3IoJ3F1aWNranMuaW5zcGVjdC5jdXN0b20nKTsKCmNsYXNzIEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgc3VwZXIoLi4uYXJncyk7CiAgICB0aGlzLnN0YWNrID0gbnVsbDsKICB9Cn0KCmxldCBidWZmZXJzID0ge30sCiAgbW9kdWxlcyA9IHt9LAogIHNob3dUaW1pbmcsCiAgcmVtb3ZlRXhwb3J0cyA9IGZhbHNlLAogIG9ubHlJbXBvcnRzID0gZmFsc2UsCiAgZ2xvYmFsRXhwb3J0cyA9IDAsCiAgc2hvd0RlcHMgPSAwLAogIHJlbW92ZUltcG9ydHMgPSBmYWxzZSwKICByZW1vdmVDb21tZW50cyA9IGZhbHNlLAogIHJlYWRQYWNrYWdlID0gZmFsc2UsCiAgdXNlclNjcmlwdCA9IGZhbHNlLAogIHJlbGF0aXZlVG8sCiAgb3V0cHV0RmlsZSwKICByZWN1cnNpdmUsCiAgZGVidWcgPSAwLAogIHByb2Nlc3NlZCA9IG5ldyBTZXQoKSwKICBidWZmZXJSZWYgPSBuZXcgV2Vha01hcCgpLAogIGZpbGVCdWZmZXJzID0gbmV3IE1hcCgpLAogIGZpbGVNYXBzID0gbmV3IE1hcCgpLAogIGRlcGVuZGVuY3lNYXAgPSBuZXcgTWFwKCksCiAgcHJpbnRGaWxlcywKICBxdWlldCA9IGZhbHNlLAogIGltcG9ydHNGb3IgPSB7fSwKICBsb2dGaWxlID0gKCkgPT4ge30sCiAgbG9nID0gKCkgPT4ge30sCiAgZ2xvYmFsSW1wb3J0cyA9IHt9OwoKT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7CiAgYnVmZmVycywKICBmaWxlQnVmZmVycywKICBmaWxlTWFwcywKICBtb2R1bGVzLAogIEltcG9ydGVkQnksCiAgaW1wb3J0c0ZvciwKICBnbG9iYWxJbXBvcnRzLAogIGFsbEltcG9ydHMoKSB7CiAgICBsZXQgciA9IFtdOwogICAgZm9yKGxldCBzb3VyY2UgaW4gaW1wb3J0c0ZvcikgewogICAgICBsZXQgaW1wb3J0cyA9IGltcG9ydHNGb3Jbc291cmNlXTsKICAgICAgci5wdXNoKC4uLmltcG9ydHMpOwogICAgfQogICAgcmV0dXJuIFsuLi5uZXcgU2V0KHIpXTsKICB9Cn0pOwoKbGV0IGhlYWRlciA9IFtdLAogIGZvb3RlciA9IFtdOwoKbGV0IGRlcGVuZGVuY3lUcmVlID0gbWVtb2l6ZShhcmcgPT4gW10sIGRlcGVuZGVuY3lNYXApOwpsZXQgYnVmZmVyTWFwID0gZ2V0c2V0KGJ1ZmZlclJlZik7CmxldCBpZGVudGlmaWVyc1VzZWQ7CgpmdW5jdGlvbiBSZWFkSlNPTihmaWxlbmFtZSkgewogIGxldCBkYXRhID0gZnMucmVhZEZpbGVTeW5jKGZpbGVuYW1lLCAndXRmLTgnKTsKICByZXR1cm4gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiBudWxsOwp9Cgpjb25zdCBSZWFkUGFja2FnZUpTT04gPSBtZW1vaXplKCgpID0+IFJlYWRKU09OKCdwYWNrYWdlLmpzb24nKSA/PyB7IF9tb2R1bGVBbGlhc2VzOiB7fSB9KTsKCmZ1bmN0aW9uIEltcG9ydGVkQnkoaW1wb3J0RmlsZSkgewogIGxldCByID0gW107CiAgZm9yKGxldCBzb3VyY2UgaW4gaW1wb3J0c0ZvcikgewogICAgbGV0IGltcG9ydHMgPSBpbXBvcnRzRm9yW3NvdXJjZV07CgogICAgaWYoaW1wb3J0cy5jb250YWlucyhpbXBvcnRGaWxlKSkgci5wdXNoKHNvdXJjZSk7CiAgfQogIHJldHVybiByOwp9CgpmdW5jdGlvbiBSZXNvbHZlQWxpYXMoZmlsZW5hbWUpIHsKICBpZih0eXBlb2YgZmlsZW5hbWUgPT0gJ3N0cmluZycpIHsKICAgIGxldCBrZXkgPSBwYXRoLm5vcm1hbGl6ZShmaWxlbmFtZSk7CiAgICBsZXQgeyBfbW9kdWxlQWxpYXNlcyB9ID0gUmVhZFBhY2thZ2VKU09OKCk7CgogICAgaWYoa2V5IGluIF9tb2R1bGVBbGlhc2VzKSByZXR1cm4gX21vZHVsZUFsaWFzZXNba2V5XTsKICB9CiAgcmV0dXJuIGZpbGVuYW1lOwp9CgpmdW5jdGlvbiBJc0ZpbGVJbXBvcnQoZmlsZW5hbWUpIHsKICBpZihyZWFkUGFja2FnZSkgZmlsZW5hbWUgPSBSZXNvbHZlQWxpYXMoZmlsZW5hbWUpOwogIGlmKC9cLnxcLy8udGVzdChmaWxlbmFtZSkpIHJldHVybiBmaWxlbmFtZTsKfQoKZnVuY3Rpb24gTm9ybWFsaXplUGF0aChwKSB7CiAgcCA9IHBhdGguYWJzb2x1dGUocCk7CiAgcCA9IHBhdGguY29sbGFwc2UocCk7CiAgcCA9IHBhdGgucmVsYXRpdmUocGF0aC5nZXRjd2QoKSwgcCk7CiAgcCA9IHBhdGgubm9ybWFsaXplKHApOwogIGlmKCFwYXRoLmlzQWJzb2x1dGUocCkpIGlmICghcC5zdGFydHNXaXRoKCcuLycpICYmICFwLnN0YXJ0c1dpdGgoJy4uLycpICYmIHAgIT0gJy4uJykgcCA9ICcuLycgKyBwOwogIHJldHVybiBwOwp9Cgpjb25zdCBGaWxlQmFubmVyQ29tbWVudCA9IChmaWxlbmFtZSwgaSkgPT4gewogIGxldCBzID0gJyc7CiAgcyArPSBgICR7aSA/ICdlbmQnIDogJ3N0YXJ0J30gb2YgJyR7LypwYXRoLmJhc2VuYW1lKi8gZmlsZW5hbWV9JyBgOwogIGxldCBuID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcigoODAgLSA2IC0gcy5sZW5ndGgpIC8gMikpOwogIHMgPSAnLyogJyArICctJy5yZXBlYXQobikgKyBzOwogIHMgKz0gJy0nLnJlcGVhdChNYXRoLm1heCgwLCA4MCAtIDMgLSBzLmxlbmd0aCkpICsgJyAqLyc7CiAgaWYoaSA9PSAwKSBzID0gJ1xuJyArIHMgKyAnXG4nOwogIGVsc2UgcyA9IHMgKyAnXG4nOwogIHJldHVybiBzOwp9OwoKZXh0ZW5kQXJyYXkoQXJyYXkucHJvdG90eXBlKTsKCmNvbnN0IElzQnVpbHRpbiA9IG1vZHVsZU5hbWUgPT4gL15bXlwvLl0rJC8udGVzdChtb2R1bGVOYW1lKTsKY29uc3QgY29tcGFjdCA9IChuLCBtb3JlID0ge30pID0+CiAgY29uc29sZS5jb25maWcoewogICAgY29tcGFjdDogbiwKICAgIG1heEFycmF5TGVuZ3RoOiAxMDAsCiAgICAuLi5tb3JlCiAgfSk7CmNvbnN0IEFkZFVuaXF1ZSA9IChhcnIsIGl0ZW0pID0+IChhcnIuaW5kZXhPZihpdGVtKSA9PSAtMSA/IGFyci5wdXNoKGl0ZW0pIDogbnVsbCk7CmNvbnN0IEludFRvRFdvcmQgPSBpdmFsID0+IChpc05hTihpdmFsKSA9PT0gZmFsc2UgJiYgaXZhbCA8IDAgPyBpdmFsICsgNDI5NDk2NzI5NiA6IGl2YWwpOwpjb25zdCBJbnRUb0JpbmFyeSA9IGkgPT4gKGkgPT0gLTEgfHwgdHlwZW9mIGkgIT0gJ251bWJlcicgPyBpIDogJzBiJyArIEludFRvRFdvcmQoaSkudG9TdHJpbmcoMikpOwoKY29uc3QgV2hhdCA9IHsKICBJTVBPUlQ6IFN5bWJvbC5mb3IoJ2ltcG9ydCcpLAogIEVYUE9SVDogU3ltYm9sLmZvcignZXhwb3J0JykKfTsKCmNvbnN0IEltcG9ydFR5cGVzID0gewogIElNUE9SVDogMCwKICBJTVBPUlRfREVGQVVMVDogMSwKICBJTVBPUlRfTkFNRVNQQUNFOiAyCn07Cgpjb25zdCBJc09uZU9mID0gY3VycnkoKG4sIHZhbHVlKSA9PiAoQXJyYXkuaXNBcnJheShuKSA/IG4uc29tZShudW0gPT4gbnVtID09PSB2YWx1ZSkgOiBuID09PSB2YWx1ZSkpOwpjb25zdCBUb2tJcyA9IGN1cnJ5KCh0eXBlLCBsZXhlbWUsIHRvaykgPT4gewogIGlmKHRvayAhPSB1bmRlZmluZWQpIHsKICAgIGlmKGxleGVtZSAhPSB1bmRlZmluZWQpIGlmICh0eXBlb2YgbGV4ZW1lID09ICdzdHJpbmcnICYmICFJc09uZU9mKGxleGVtZSwgdG9rLmxleGVtZSkpIHJldHVybiBmYWxzZTsKICAgIGlmKHR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgICBpZih0eXBlb2YgdHlwZSA9PSAnc3RyaW5nJyAmJiAhSXNPbmVPZih0eXBlLCB0b2sudHlwZSkpIHJldHVybiBmYWxzZTsKICAgICAgaWYodHlwZW9mIHR5cGUgPT0gJ251bWJlcicgJiYgIUlzT25lT2YodHlwZSwgdG9rLmlkKSkgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0KfSk7CmNvbnN0IENvbXBhcmVSYW5nZSA9IChhLCBiKSA9PiAoYSA9PT0gbnVsbCB8fCBiID09PSBudWxsID8gMCA6IHR5cGVvZiBhWzBdID09ICdudW1iZXInICYmIHR5cGVvZiBiWzBdID09ICdudW1iZXInICYmIGFbMF0gIT0gYlswXSA/IGFbMF0gLSBiWzBdIDogYVsxXSAtIGJbMV0pOwoKY29uc3QgSXNLZXl3b3JkID0gVG9rSXMoJ2tleXdvcmQnKTsKY29uc3QgSXNQdW5jdHVhdG9yID0gVG9rSXMoJ3B1bmN0dWF0b3InKTsKY29uc3QgSXNJZGVudGlmaWVyID0gVG9rSXMoJ2lkZW50aWZpZXInKTsKY29uc3QgSXNTdHJpbmdMaXRlcmFsID0gVG9rSXMoJ3N0cmluZ0xpdGVyYWwnKTsKY29uc3QgUHV0c0Z1bmN0aW9uID0gb3V0Rm4gPT4gc3RyID0+IHsKICBsZXQgYiA9IHR5cGVzLmlzQXJyYXlCdWZmZXIoc3RyKSA/IHN0ciA6IHRvQXJyYXlCdWZmZXIoc3RyKTsKICByZXR1cm4gb3V0Rm4oYiwgYi5ieXRlTGVuZ3RoKTsKfTsKCmNvbnN0IElzV2hpdGVTcGFjZSA9IHN0ciA9PiAvXlxzKiQvLnRlc3Qoc3RyKSB8fCBzdHIudHJpbSgpID09ICcnOwoKY29uc3QgZGVidWdMb2cgPSAoc3RyLCAuLi5hcmdzKSA9PiB7CiAgY29uc3QgcHJlZCA9IGFyZyA9PiBpc09iamVjdChhcmcpICYmICdjb21wYWN0JyBpbiBhcmc7CiAgbGV0IG9wdHMgPSBhcmdzLmZpbHRlcihwcmVkKTsKCiAgb3B0cyA9IG9wdHMucmVkdWNlKChhY2MsIG9wdCkgPT4gZGVmaW5lKGFjYywgb3B0KSwgb3B0cy5zaGlmdCgpID8/IHt9KTsKCiAgaWYob3B0cy5jb21wYWN0ID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCBjb21wYWN0KDEpKTsKICBpZihvcHRzLm1heEFycmF5TGVuZ3RoID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCB7IG1heEFycmF5TGVuZ3RoOiAxMCB9KTsKICBpZihvcHRzLmRlcHRoID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCB7IGRlcHRoOiBJbmZpbml0eSB9KTsKCiAgYXJncyA9IGFyZ3MuZmlsdGVyKGFyZyA9PiAhcHJlZChhcmcpKTsKCiAgb3B0cy5jb21wYWN0ID0gZmFsc2U7CgogIGNvbnNvbGUubG9nKHN0ciwgb3B0cywgLi4uYXJncyk7Cn07CgpmdW5jdGlvbiBPdXRwdXRJbXBvcnRzKGltcG9ydHMgPSBnbG9iYWxJbXBvcnRzKSB7CiAgbGV0IHMgPSAnJzsKICBmb3IobGV0IFtuYW1lLCBpZG1hcF0gb2YgT2JqZWN0LmVudHJpZXMoaW1wb3J0cykubWFwKChbbmFtZSwgb2JqXSkgPT4gW25hbWUsIE9iamVjdC5lbnRyaWVzKG9iaildKSkgewogICAgcyArPSBgaW1wb3J0IGA7CgogICAgaWYoaWRtYXAubGVuZ3RoID09IDEgJiYgWycqJywgJ2RlZmF1bHQnXS5jb250YWlucyhpZG1hcFswXVsxXSkpIHMgKz0gaWRtYXBbMF1bMV0gPT0gJyonID8gYCogYXMgJHtpZG1hcFswXVswXX1gIDogaWRtYXBbMF1bMF07CiAgICBlbHNlIHMgKz0gJ3sgJyArIGlkbWFwLm1hcCgoW2xvY2FsLCBuYW1lXSkgPT4gKGxvY2FsID09PSBuYW1lID8gbG9jYWwgOiAobmFtZSA9PSAnKicgPyAnZGVmYXVsdCcgOiBuYW1lKSArICcgYXMgJyArIGxvY2FsKSkuam9pbignLCAnKSArICcgfSc7CgogICAgcyArPSBgIGZyb20gJyR7bmFtZX0nO1xuYDsKICB9CiAgcmV0dXJuIHM7Cn0KCmZ1bmN0aW9uIEZpbGVXcml0ZXIoZmlsZSwgbW9kZT0wbzc1NSkgewogIGxldCBmZCA9IG9zLm9wZW4oZmlsZSwgb3MuT19XUk9OTFkgfCBvcy5PX0NSRUFUIHwgb3MuT19UUlVOQywgbW9kZSk7CiAgcmV0dXJuIGRlZmluZShGZFdyaXRlcihmZCwgZmlsZSksIHsKICAgIGNsb3NlOiAoKSA9PiBvcy5jbG9zZShmZCkKICB9KTsKfQoKZnVuY3Rpb24gRmlsZVJlcGxhY2VyKGZpbGUpIHsKICBsZXQgZmQgPSBvcy5vcGVuKGZpbGUgKyAnLm5ldycsIG9zLk9fV1JPTkxZIHwgb3MuT19DUkVBVCB8IG9zLk9fVFJVTkMsIDBvNjQ0KTsKICByZXR1cm4gZGVmaW5lKEZkV3JpdGVyKGZkLCBmaWxlKSwgewogICAgY2xvc2U6ICgpID0+IHsKICAgICAgLy9jb25zb2xlLmxvZygnRmlsZVJlcGxhY2VyLmNsb3NlJywgZmQpOwogICAgICBsZXQgc2l6ZSA9IGZzLnNpemVTeW5jKGZkKTsKICAgICAgb3MuY2xvc2UoZmQpOwogICAgICBsZXQgZXJyID0gb3MucmVuYW1lKGZpbGUsIGZpbGUgKyAnLm9sZCcpOwogICAgICBlcnIgPSBvcy5yZW5hbWUoZmlsZSArICcubmV3JywgZmlsZSk7CiAgICAgIC8vY29uc29sZS5sb2coJ29zLnJlbmFtZSgpID0nLCBlcnIpOwogICAgICBpZihlcnIpIHRocm93IG5ldyBFcnJvcihgRmlsZVJlcGxhY2VyIHJlbmFtZSgpIGVycm9yOiAke3N0ZC5zdHJlcnJvcigtZXJyKX1gKTsKICAgICAgY29uc29sZS5sb2coYCR7ZmlsZX0gd3JpdHRlbiAoJHtzaXplfSBieXRlcylgKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gRmRXcml0ZXIoZmQsIGZpbGUpIHsKICBsZXQgZm47CiAgZm4gPSAoYnVmLCBsZW4pID0+IHsKICAgIGlmKCF0eXBlcy5pc0FycmF5QnVmZmVyKGJ1ZikpIGJ1ZiA9IHRvQXJyYXlCdWZmZXIoYnVmKTsKICAgIGxlbiA/Pz0gYnVmLmJ5dGVMZW5ndGg7CiAgICBsZXQgcmVzdWx0ID0gb3Mud3JpdGUoZmQsIGJ1ZiwgMCwgbGVuKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgZGVmaW5lKGZuLCB7CiAgICBmZCwKICAgIGZpbGUsCiAgICBwdXRzOiBQdXRzRnVuY3Rpb24oZm4pLAogICAgd3JpdGU6IGZuLAogICAgY2xvc2U6ICgpID0+IHt9LAogICAgc2VlazogKHdoZW5jZSwgb2Zmc2V0KSA9PiBvcy5zZWVrKGZkLCB3aGVuY2UsIG9mZnNldCksCiAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogYEZpbGVXcml0ZXI8ICR7ZmR9ID5gLAogICAgaW5zcGVjdCgpIHsKICAgICAgcmV0dXJuIGluc3BlY3QoeyBmZCB9KSA/PyB0aGlzW1N5bWJvbC50b1N0cmluZ1RhZ107CiAgICB9CiAgfSk7CiAgcmV0dXJuIGZuOwp9CgpmdW5jdGlvbiBBcnJheVdyaXRlcigKICBhcnIsCiAgdCA9IChidWYsIGxlbikgPT4gewogICAgaWYoIXR5cGVzLmlzQXJyYXlCdWZmZXIoYnVmKSkgYnVmID0gdG9BcnJheUJ1ZmZlcihidWYpOwogICAgcmV0dXJuIGJ1Zi5zbGljZSgwLCBsZW4gPz8gYnVmLmJ5dGVMZW5ndGgpOwogIH0KKSB7CiAgbGV0IGZuID0gKGJ1ZiwgbGVuKSA9PiAoYXJyLnB1c2godChidWYsIGxlbikpLCBsZW4pOwoKICBkZWZpbmUoZm4sIHsKICAgIHB1dHM6IFB1dHNGdW5jdGlvbihmbiksCiAgICB3cml0ZTogZm4sCiAgICBjbG9zZTogKCkgPT4ge30sCiAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogYEFycmF5V3JpdGVyYCwKICAgIGluc3BlY3QoKSB7CiAgICAgIHJldHVybiBpbnNwZWN0KHsgYXJyIH0pID8/IHRoaXNbU3ltYm9sLnRvU3RyaW5nVGFnXTsKICAgIH0KICB9KTsKICByZXR1cm4gZm47Cn0KCmZ1bmN0aW9uIER1bW15V3JpdGVyKG5hbWUpIHsKICBsZXQgZm4gPSAoYnVmLCBsZW4pID0+IGxlbjsKICBkZWZpbmUoZm4sIHsKICAgIG5hbWUsCiAgICBwdXRzOiBQdXRzRnVuY3Rpb24oZm4pLAogICAgd3JpdGU6IGZuLAogICAgY2xvc2U6ICgpID0+IHt9LAogICAgc2VlazogKCkgPT4ge30sCiAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogYER1bW15V3JpdGVyPCAke25hbWV9ID5gLAogICAgaW5zcGVjdCgpIHsKICAgICAgcmV0dXJuIGluc3BlY3QoeyBmZCB9KSA/PyB0aGlzW1N5bWJvbC50b1N0cmluZ1RhZ107CiAgICB9CiAgfSk7CiAgcmV0dXJuIGZuOwp9CgpmdW5jdGlvbiBJbXBvcnRJZHMoc2VxKSB7CiAgcmV0dXJuIHNlcS5maWx0ZXIodG9rID0+IElzSWRlbnRpZmllcihudWxsLCB0b2spKTsKfQoKZnVuY3Rpb24gSW1wb3J0SWRNYXAoc2VxKSB7CiAgbGV0IGkgPSAwLAogICAgbmFtZSwKICAgIGxvY2FsLAogICAgZW50cmllcyA9IFtdOwogIHNlcSA9IE5vbldTKHNlcSk7CgogIGlmKCFJc0tleXdvcmQoJ2ltcG9ydCcsIHNlcVswXSkpIHJldHVybiBudWxsOwogIHdoaWxlKHNlcVtpXSkgewogICAgaWYoc2VxW2ldLnR5cGUgIT0gJ2tleXdvcmQnKSBicmVhazsKICAgICsraTsKICB9CiAgZm9yKDsgOyBpKyspIHsKICAgIGlmKElzS2V5d29yZCgnZnJvbScsIHNlcVtpXSkpIGJyZWFrOwogICAgaWYoc2VxW2ldLnR5cGUgPT0gJ3N0cmluZ0xpdGVyYWwnKSBicmVhazsKICAgIGxldCB0b2sgPSBzZXFbaV07CiAgICBsZXQgeyBsb2MgfSA9IHRvazsKICAgIC8qIHByZXR0aWVyLWlnbm9yZSAqLyAvL2NvbnNvbGUubG9nKCdJbXBvcnRJZE1hcCcsIGksIGxvYyArICcnLCB7IHRvayB9LCBzZXEuc2xpY2UoaSAtIDEsIGkgKyAyKS5tYXAodCA9PiB0LmxleGVtZSksIElzUHVuY3R1YXRvcignKicsIHNlcVtpXSkpOwogICAgaWYoSXNQdW5jdHVhdG9yKCcqJywgc2VxW2ldKSAmJiBzZXFbaSArIDFdLmxleGVtZSA9PSAnYXMnKSB7CiAgICAgIG5hbWUgPSBzZXFbaV0ubGV4ZW1lOwogICAgICBsb2NhbCA9IHNlcVtpICsgMl0ubGV4ZW1lOwogICAgICBlbnRyaWVzLnB1c2goW2xvY2FsLCBuYW1lXSk7CiAgICAgIGkgKz0gMzsKICAgIH0gZWxzZSBpZihJc0tleXdvcmQoJ2Zyb20nLCBzZXFbaSArIDFdKSAmJiBzZXFbaV0udHlwZSA9PSAnaWRlbnRpZmllcicpIHsKICAgICAgbG9jYWwgPSBzZXFbaV0ubGV4ZW1lOwogICAgICBuYW1lID0gJ2RlZmF1bHQnOwogICAgICBlbnRyaWVzLnB1c2goW2xvY2FsLCBuYW1lXSk7CiAgICB9IGVsc2UgaWYoSXNQdW5jdHVhdG9yKCd7Jywgc2VxW2ldKSkgewogICAgICArK2k7CiAgICAgIHdoaWxlKHNlcVtpXSkgewogICAgICAgIGlmKElzUHVuY3R1YXRvcignfScsIHNlcVtpXSkpIHsKICAgICAgICAgIGkrKzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZihJc0tleXdvcmQoJ2FzJywgc2VxW2kgKyAxXSkpIHsKICAgICAgICAgIG5hbWUgPSBzZXFbaV0ubGV4ZW1lOwogICAgICAgICAgbG9jYWwgPSBzZXFbaSArIDJdLmxleGVtZTsKICAgICAgICAgIGkgKz0gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbG9jYWwgPSBuYW1lID0gc2VxW2ldLmxleGVtZTsKICAgICAgICB9CiAgICAgICAgZW50cmllcy5wdXNoKFtsb2NhbCwgbmFtZV0pOwogICAgICAgICsraTsKICAgICAgIHdoaWxlKElzUHVuY3R1YXRvcignLCcsIHNlcVtpXSkpICsraTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBzdWNoIHRva2VuICR7c2VxW2ldLmxleGVtZX0gJHtpbnNwZWN0KGVudHJpZXMpfWApOwogICAgfQogIH0KICByZXR1cm4gZW50cmllczsKfQoKZnVuY3Rpb24gSW1wRXhwVHlwZShzZXEpIHsKICBpZihzZXEuc29tZSh0b2sgPT4gSXNLZXl3b3JkKCdpbXBvcnQnLCB0b2spKSkgcmV0dXJuIFdoYXQuSU1QT1JUOwogIGlmKHNlcS5zb21lKHRvayA9PiBJc0tleXdvcmQoJ2V4cG9ydCcsIHRvaykpKSByZXR1cm4gV2hhdC5FWFBPUlQ7Cn0KCmZ1bmN0aW9uIEltcG9ydFR5cGUoc2VxKSB7CiAgaWYoSXNLZXl3b3JkKFsnaW1wb3J0JywgJ2V4cG9ydCddLCBzZXFbMF0pKSBzZXEuc2hpZnQoKTsKICBpZihJc1B1bmN0dWF0b3IoJyonLCBzZXFbMF0pKSB7CiAgICBpZihJc0tleXdvcmQoJ2FzJywgc2VxWzFdKSkgcmV0dXJuIEltcG9ydFR5cGVzLklNUE9SVF9OQU1FU1BBQ0U7CiAgfSBlbHNlIGlmKElzSWRlbnRpZmllcih1bmRlZmluZWQsIHNlcVswXSkpIHsKICAgIGlmKElzS2V5d29yZCgnZnJvbScsIHNlcVsxXSkpIHJldHVybiBJbXBvcnRUeXBlcy5JTVBPUlRfREVGQVVMVDsKICB9CgogIHJldHVybiBJbXBvcnRUeXBlcy5JTVBPUlQ7Cn0KCmZ1bmN0aW9uIEltcG9ydEZpbGUoc2VxKSB7CiAgc2VxID0gTm9uV1Moc2VxKTsKICBsZXQgaWR4ID0gc2VxLmZpbmRJbmRleCh0b2sgPT4gSXNLZXl3b3JkKCdmcm9tJywgdG9rKSk7CiAgd2hpbGUoc2VxW2lkeF0gJiYgc2VxW2lkeF0udHlwZSAhPSAnc3RyaW5nTGl0ZXJhbCcpICsraWR4OwogIGlmKHNlcVtpZHhdKQogICAgaWYoc2VxW2lkeF0udHlwZSA9PSAnc3RyaW5nTGl0ZXJhbCcpIHsKICAgICAgbGV0IGYgPSBzZXFbaWR4XS5sZXhlbWUucmVwbGFjZSgvXltcJ1wiXGBdKC4qKVtcJ1wiXGBdJC9nLCAnJDEnKTsKICAgICAgcmV0dXJuIGY7CiAgICB9Cn0KCmZ1bmN0aW9uIEV4cG9ydE5hbWUoc2VxKSB7CiAgbGV0IGlkeCA9IHNlcS5maW5kSW5kZXgodG9rID0+IElzSWRlbnRpZmllcih1bmRlZmluZWQsIHRvaykgfHwgSXNLZXl3b3JkKCdkZWZhdWx0JywgdG9rKSk7CgogIHdoaWxlKHNlcVtpZHhdICYmIHNlcVtpZHhdLnR5cGUgIT0gJ2lkZW50aWZpZXInKSBpZHgrKzsKCiAgcmV0dXJuIHNlcVtpZHhdPy5sZXhlbWU7Cn0KCmZ1bmN0aW9uIEJ5dGVTZXF1ZW5jZSh0b2tlbnMpIHsKICBpZih0b2tlbnMubGVuZ3RoKSB7CiAgICBsZXQgeyBsb2MgfSA9IHRva2Vuc1swXTsKICAgIGxldCBzdGFydCA9IGxvYy5ieXRlT2Zmc2V0OwogICAgbGV0IHRvdGFsID0gdG9rZW5zLnJlZHVjZSgobiwgdCkgPT4gbiArIHQuYnl0ZUxlbmd0aCwgMCk7CiAgICBsZXQgZW5kID0gc3RhcnQgKyB0b3RhbDsKICAgIC8vbGV0IGxpbmUgPSB0b1N0cmluZyhCdWZmZXJGaWxlKGxvYy5maWxlKS5zbGljZShzdGFydCwgZW5kKSk7CiAgICByZXR1cm4gW3N0YXJ0LCBlbmRdOwogIH0KfQoKZnVuY3Rpb24gTW9kdWxlTG9hZGVyKG1vZHVsZSkgewogIGxldCBmaWxlOwoKICBpZihwYXRoLmlzRGlyZWN0b3J5KG1vZHVsZSkpIHsKICAgIGZpbGUgPSBNb2R1bGVMb2FkZXIocGF0aC5qb2luKG1vZHVsZSwgJ2luZGV4LmpzJykpOwogIH0gZWxzZSBpZihwYXRoLmlzRmlsZShtb2R1bGUpKSB7CiAgICBmaWxlID0gbW9kdWxlOwogIH0gZWxzZSBpZighL1wuanMkLy50ZXN0KG1vZHVsZSkpIHsKICAgIGZpbGUgPSBNb2R1bGVMb2FkZXIobW9kdWxlICsgJy5qcycpOwogIH0KCiAgcmV0dXJuIGZpbGU7Cn0KCmZ1bmN0aW9uIFByb2Nlc3NGaWxlKHNvdXJjZSwgbG9nID0gKCkgPT4ge30sIHJlY3Vyc2l2ZSwgZGVwdGggPSAwKSB7CiAgaWYoZGVidWcgPiAxKSBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyAke3NvdXJjZX1gKTsKCiAgc291cmNlID0gcGF0aC5ub3JtYWxpemUoc291cmNlKTsKCiAgaWYocHJpbnRGaWxlcykgc3RkLnB1dHMoYCR7c291cmNlfVxuYCk7CgogIGxldCBzdGFydCA9IERhdGUubm93KCk7CiAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKHNvdXJjZSk7CgogIGlmKGRlYnVnID49IDIpIGNvbnNvbGUubG9nKCdQcm9jZXNzRmlsZScsIHsgc291cmNlIH0pOwoKICBsZXQgYnl0ZWJ1ZiA9IEJ1ZmZlckZpbGUoc291cmNlKTsKCiAgbGV0IGxlbiA9IGJ5dGVidWYuYnl0ZUxlbmd0aCwKICAgIHR5cGUgPSBwYXRoLmV4dG5hbWUoc291cmNlKS5zdWJzdHJpbmcoMSksCiAgICBiYXNlID0gY2FtZWxpemUocGF0aC5iYXNlbmFtZShzb3VyY2UsICcuJyArIHR5cGUpLnJlcGxhY2UoL1teMC05QS1aYS16X10vZywgJ18nKSk7CgogIGxldCBsZXggPSB7CiAgICBqczogbmV3IEVDTUFTY3JpcHRMZXhlcihieXRlYnVmLCBzb3VyY2UpCiAgfTsKCiAgbGV4Lm1qcyA9IGxleC5qczsKICBsZXguY2pzID0gbGV4LmpzOwogIGxleC5qc29uID0gbGV4LmpzOwoKICBjb25zdCBsZXhlciA9IGxleFt0eXBlXTsKICBpZihkZWJ1ZyA+PSAzKSBjb25zb2xlLmxvZygnbGV4ZXInLCBsZXhlcik7CgogIC8vIFQgPSBsZXhlci50b2tlbnMucmVkdWNlKChhY2MsIG5hbWUsIGlkKSA9PiAoeyAuLi5hY2MsIFtuYW1lXTogaWQgfSksIHt9KTsKCiAgbGV0IGUgPSBuZXcgU3ludGF4RXJyb3IoKTsKCiAgaWYoIWxleGVyKSB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGxleGluZzogJHtzb3VyY2V9YCk7CgogIGxleGVyLmhhbmRsZXIgPSBsZXggPT4gewogICAgY29uc3QgeyBsb2MsIG1vZGUsIHBvcywgc3RhcnQsIGJ5dGVMZW5ndGgsIHN0YXRlIH0gPSBsZXg7CiAgICBsb2coJyAnLnJlcGVhdChsb2MuY29sdW1uIC0gMSkgKyAnXicpOwogIH07CgogIGxldCB0b2tlbkxpc3QgPSBbXSwKICAgIGRlY2xhcmF0aW9ucyA9IFtdOwogIGNvbnN0IGNvbFNpemVzID0gWzEyLCA4LCA0LCAyMCwgMzIsIDEwLCAwXTsKCiAgbGV0IHRvaywKICAgIGkgPSAwLAogICAgbWFzayA9IEludFRvQmluYXJ5KGxleGVyLm1hc2spLAogICAgc3RhdGUgPSBsZXhlci50b3BTdGF0ZSgpOwogIGxleGVyLmJlZ2luQ29kZSA9ICgpID0+IChjb2RlID09ICdqcycgPyAwYjEwMDAgOiAwYjAxMDApOwogIGNvbnN0IGJhbGFuY2VyID0gKCkgPT4gewogICAgbGV0IHNlbGY7CiAgICBsZXQgc3RhY2sgPSBbXTsKICAgIGNvbnN0IHRhYmxlID0geyAnfSc6ICd7JywgJ10nOiAnWycsICcpJzogJygnIH07CgogICAgc2VsZiA9IGZ1bmN0aW9uIFBhcmVudGhlc2VCYWxhbmNlcih0b2spIHsKICAgICAgc3dpdGNoICh0b2s/LmxleGVtZSkgewogICAgICAgIGNhc2UgJ3snOgogICAgICAgIGNhc2UgJ1snOgogICAgICAgIGNhc2UgJygnOiB7CiAgICAgICAgICBzdGFjay5wdXNoKHRvay5sZXhlbWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBjYXNlICd9JzoKICAgICAgICBjYXNlICddJzoKICAgICAgICBjYXNlICcpJzogewogICAgICAgICAgaWYoc3RhY2subGFzdCAhPSB0YWJsZVt0b2subGV4ZW1lXSkgdGhyb3cgbmV3IEVycm9yKGB0b3AgJyR7c3RhY2subGFzdH0nICE9ICcke3Rvay5sZXhlbWV9JyBbICR7c3RhY2subWFwKHMgPT4gYCcke3N9J2ApLmpvaW4oJywgJyl9IF1gKTsKCiAgICAgICAgICBzdGFjay5wb3AoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBPYmplY3QuYXNzaWduKHNlbGYsIHsKICAgICAgc3RhY2ssCiAgICAgIHJlc2V0KCkgewogICAgICAgIHN0YWNrLmNsZWFyKCk7CiAgICAgIH0sCiAgICAgIC8qIHByZXR0aWVyLWlnbm9yZSAqLyBnZXQgZGVwdGgoKSB7CiAgICAgICAgcmV0dXJuIHN0YWNrLmxlbmd0aDsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIHNlbGY7CiAgfTsKCiAgbGV0IGJhbGFuY2VycyA9IFtiYWxhbmNlcigpXSwKICAgIGltcG9ydHMgPSBbXSwKICAgIGV4cG9ydHMgPSBbXSwKICAgIGNvbW1lbnRzID0gW10sCiAgICBpbXBleHAsCiAgICBjb25kLAogICAgaW1wID0gW10sCiAgICBzaG93VG9rZW4gPSB0b2sgPT4gewogICAgICBpZigobGV4ZXIuY29uc3RydWN0b3IgIT0gRUNNQVNjcmlwdExleGVyICYmIHRvay50eXBlICE9ICd3aGl0ZXNwYWNlJykgfHwgL14oKGltfGV4KXBvcnR8ZnJvbXxhcykkLy50ZXN0KHRvay5sZXhlbWUpKSB7CiAgICAgICAgbGV0IGEgPSBbLyooZmlsZSArICc6JyArIHRvay5sb2MpLnBhZEVuZChmaWxlLmxlbmd0aCsxMCksKi8gdG9rLnR5cGUucGFkRW5kKDIwLCAnICcpLCBlc2NhcGUodG9rLmxleGVtZSldOwogICAgICAgIC8vIHN0ZC5wdXRzKGEuam9pbignJykgKyAnXG4nKTsKICAgICAgfQogICAgfTsKCiAgY29uc3QgUGF0aEFkanVzdCA9IHMgPT4gewogICAgbGV0IGogPSBwYXRoLmpvaW4oZGlyLCBzKTsKICAgIGogPSBwYXRoLmNvbGxhcHNlKGopOwogICAgaiA9IHBhdGgubm9ybWFsaXplKGopOwogICAgaWYocGF0aC5pc1JlbGF0aXZlKGopKSBqID0gJy4vJyArIGo7CiAgICByZXR1cm4gTW9kdWxlTG9hZGVyKGopOwogIH07CgogIGxldCBwcmV2VG9rZW4sCiAgICBkb25lSW1wb3J0cywKICAgIHVzZWQgPSBpZGVudGlmaWVyc1VzZWQgPyBpZGVudGlmaWVyc1VzZWQoc291cmNlKSA6IG51bGw7CiAgZm9yKDs7KSB7CiAgICBsZXQgeyBzdGF0ZURlcHRoIH0gPSBsZXhlcjsKICAgIGxldCB2YWx1ZSA9IGxleGVyLm5leHQoKTsKICAgIGxldCBkb25lID0gdmFsdWUgPT09IHVuZGVmaW5lZDsKICAgIGlmKGRvbmUpIGJyZWFrOwogICAgbGV0IG5ld1N0YXRlID0gbGV4ZXIudG9wU3RhdGUoKTsKICAgIGlmKG5ld1N0YXRlICE9IHN0YXRlKSB7CiAgICAgIGlmKHN0YXRlID09ICdURU1QTEFURScgJiYgbGV4ZXIuc3RhdGVEZXB0aCA+IHN0YXRlRGVwdGgpIGJhbGFuY2Vycy5wdXNoKGJhbGFuY2VyKCkpOwogICAgICBpZihuZXdTdGF0ZSA9PSAnVEVNUExBVEUnICYmIGxleGVyLnN0YXRlRGVwdGggPCBzdGF0ZURlcHRoKSBiYWxhbmNlcnMucG9wKCk7CiAgICB9CgogICAgbGV0IG4gPSBiYWxhbmNlcnMubGFzdC5kZXB0aDsKICAgIGNvbnN0IHsgdG9rZW4gfSA9IGxleGVyOwogICAgaWYoIXRva2VuKSBicmVhazsKICAgIGNvbnN0IHsgbGVuZ3RoLCBzZXEgfSA9IHRva2VuOwoKICAgIGlmKHRva2VuLnR5cGUgPT0gJ2lkZW50aWZpZXInKSB7CiAgICAgIGlmKGRvbmVJbXBvcnRzKSB7CiAgICAgICAgaWYodXNlZCkgewogICAgICAgICAgbGV0IHsgc2l6ZSB9ID0gdXNlZDsKICAgICAgICAgIHVzZWQuYWRkKHRva2VuLmxleGVtZSk7CiAgICAgICAgICBpZihkZWJ1ZyA+PSAyKSBjb25zb2xlLmxvZyhgYWRkZWRbJHtzaXplfV1gLCBzb3VyY2UsIHRva2VuLmxleGVtZSk7CiAgICAgICAgfQogICAgICB9IC8qZWxzZSB7CiAgICAgICAgaW1wb3J0ZWQuYWRkKHRva2VuLmxleGVtZSk7CiAgICAgIH0qLwogICAgfQoKICAgIGlmKGRlYnVnID4gMikgY29uc29sZS5sb2coJ3Rva2VuJywgdG9rZW4pOwogICAgLyogICBpZihkZWJ1ZyA+PSAxKSBjb25zb2xlLmxvZygnbGV4ZXIubW9kZScsIGxleGVyLm1vZGUpOwogICAgICovCiAgICBpZihuID09IDAgJiYgdG9rZW4ubGV4ZW1lID09ICd9JyAmJiBsZXhlci5zdGF0ZURlcHRoID4gMCkgewogICAgICBsZXhlci5wb3BTdGF0ZSgpOwogICAgfSBlbHNlIHsKICAgICAgYmFsYW5jZXIodG9rZW4pOwogICAgICBpZihuID4gMCAmJiBiYWxhbmNlcnMubGFzdC5kZXB0aCA9PSAwKSBsb2coJ2JhbGFuY2VyJyk7CiAgICAgIGlmKC9jb21tZW50L2kudGVzdCh0b2tlbi50eXBlKSkgewogICAgICAgIGNvbW1lbnRzLnB1c2godG9rZW4pOwogICAgICB9CgogICAgICBpZihbJ2ltcG9ydCcsICdleHBvcnQnXS5pbmRleE9mKHRva2VuLmxleGVtZSkgPj0gMCkgewogICAgICAgIGltcGV4cCA9IFdoYXRbdG9rZW4ubGV4ZW1lLnRvVXBwZXJDYXNlKCldOwogICAgICAgIGNvbmQgPSB0cnVlOwogICAgICAgIGltcCA9IHRva2VuLmxleGVtZSA9PSAnZXhwb3J0JyA/IFt0b2tlbl0gOiBbXTsKICAgICAgfQoKICAgICAgaWYoZGVidWcgPj0gMykgY29uc29sZS5sb2coYHRva2VuWyR7aW1wLmxlbmd0aH1dYCwgdG9rZW4ubG9jICsgJycsIGNvbnNvbGUuY29uZmlnKHsgYnJlYWtMZW5ndGg6IDgwLCBjb21wYWN0OiAwIH0pLCB0b2tlbik7CgogICAgICBpZih0b2tlbi5sZXhlbWUgPT0gJzsnICYmIGNvbmQgIT09IHRydWUpIGRvbmVJbXBvcnRzID0gdHJ1ZTsKCiAgICAgIGlmKG9ubHlJbXBvcnRzICYmIGRvbmVJbXBvcnRzKSBicmVhazsKCiAgICAgIGlmKGNvbmQgPT0gdHJ1ZSkgewogICAgICAgIGlmKGltcC5pbmRleE9mKHRva2VuKSA9PSAtMSkgaW1wLnB1c2godG9rZW4pOwogICAgICAgIC8vY29uc29sZS5sb2coIGltcFswXS5sb2MrJycsY29uc29sZS5jb25maWcoe2JyZWFrTGVuZ3RoOjgwLCBjb21wYWN0OiAwfSksIE5vbldTKGltcCkpOwogICAgICAgIGlmKGltcC5sYXN0LmxleGVtZSA9PSAnOycpIHsKICAgICAgICAgIGlmKGRlYnVnID4gMikKICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgJ2ltcCcsCiAgICAgICAgICAgICAgaW1wWzBdLmxvYyArICcnLAogICAgICAgICAgICAgIGNvbnNvbGUuY29uZmlnKHsKICAgICAgICAgICAgICAgIGJyZWFrTGVuZ3RoOiA4MCwKICAgICAgICAgICAgICAgIGNvbXBhY3Q6IDAKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBUb2tlblNlcXVlbmNlKGltcCkgKyAnJwogICAgICAgICAgICApOwogICAgICAgICAgY29uZCA9IGZhbHNlOwogICAgICAgICAgaWYoaW1wZXhwID09IFdoYXQuSU1QT1JUIHx8IGltcC5zb21lKGkgPT4gSXNLZXl3b3JkKCdmcm9tJywgaSkpKSB7CiAgICAgICAgICAgIGlmKGltcFsxXS5sZXhlbWUgIT0gJygnKSB7CiAgICAgICAgICAgICAgbGV0IG9iaiA9IG5ldyBJbXBvcnQoaW1wLCBQYXRoQWRqdXN0LCBkZXB0aCk7CiAgICAgICAgICAgICAgaWYob2JqKSB7CiAgICAgICAgICAgICAgICBvYmouc291cmNlID0gc291cmNlOwogICAgICAgICAgICAgICAgaW1wb3J0cy5wdXNoKG9iaik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgb2JqID0gbmV3IEV4cG9ydChpbXAsIFBhdGhBZGp1c3QsIGRlcHRoKTsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnb2JqJyxjb25zb2xlLmNvbmZpZyh7YnJlYWtMZW5ndGg6ODAsIGNvbXBhY3Q6IDF9KSwgb2JqLCBvYmoubG9jKycnKTsKICAgICAgICAgICAgaWYob2JqKSB7CiAgICAgICAgICAgICAgb2JqLnNvdXJjZSA9IHNvdXJjZTsKCiAgICAgICAgICAgICAgZXhwb3J0cy5wdXNoKG9iaik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHByZXZUb2tlbiA9IHRva2VuOwogICAgfQoKICAgIHN0YXRlID0gbmV3U3RhdGU7CiAgfQoKICBmdW5jdGlvbiBFeHBvcnQodG9rZW5zLCByZWxhdGl2ZVBhdGggPSBzID0+IHMpIHsKICAgIGlmKHRva2Vuc1swXS5zZXEgPT0gdG9rZW5zWzFdLnNlcSkgdG9rZW5zLnNoaWZ0KCk7CiAgICBjb25zdCB7IGxvYywgc2VxIH0gPSB0b2tlbnNbMF07CiAgICBpZighL14oaW18ZXgpcG9ydCQvaS50ZXN0KHRva2Vuc1swXS5sZXhlbWUpKSB0aHJvdyBuZXcgRXJyb3IoYEFkZEV4cG9ydCB0b2tlbnM6IGAgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBsZXQgZGVmID0gdG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gSXNLZXl3b3JkKCdkZWZhdWx0JywgdG9rKSk7CiAgICBsZXQgayA9IDE7CiAgICB3aGlsZSh0b2tlbnNba10udHlwZSA9PSAnd2hpdGVzcGFjZScgfHwgSXNLZXl3b3JkKFsnbGV0JywgJ2NsYXNzJywgJ2Z1bmN0aW9uJywgJ2NvbnN0J10sIHRva2Vuc1trXSkpIGsrKzsKICAgIHdoaWxlKHRva2Vuc1trXSAmJiB0b2tlbnNba10udHlwZSAhPSAnaWRlbnRpZmllcicpIGsrKzsKICAgIGxldCBuYW1lID0gRXhwb3J0TmFtZSh0b2tlbnMpOwogICAgbGV0IGV4cG9ydGVkID0gZGVmICE9IC0xID8gJ2RlZmF1bHQnIDogbmFtZTsKICAgIGxldCBmaWxlID0gSW1wb3J0RmlsZSh0b2tlbnMpOwogICAgaWYoZmlsZSA9PSAnICcpIHRocm93IG5ldyBFcnJvcignWFhYICcgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBjb25zdCBpZHggPSBkZWYgIT0gLTEgPyBkZWYgOiBmaWxlID8gdG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gdG9rLmxleGVtZSA9PSAnOycpIDogdG9rZW5zLnNsaWNlKDEpLmZpbmRJbmRleCh0b2sgPT4gdG9rLnR5cGUgIT0gJ3doaXRlc3BhY2UnKTsKICAgIGNvbnN0IG8gPSBOb25XUyh0b2tlbnMpWzFdLmxleGVtZSA9PSAneyc7CiAgICBjb25zdCByZW1vdmUgPSBvIHx8IGRlZiAhPSAtMSA/IHRva2Vucy5zbGljZSgpIDogdG9rZW5zLnNsaWNlKDAsIGRlZiA9PSBpZHggPyBpZHggKyAyIDogaWR4ICsgMSk7CiAgICBpZihyZW1vdmVbMF0pIGlmIChyZW1vdmVbMF0ubGV4ZW1lICE9ICdleHBvcnQnKSB0aHJvdyBuZXcgRXJyb3IoYEFkZEV4cG9ydCB0b2tlbnM6IGAgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBjb25zdCByYW5nZSA9IEJ5dGVTZXF1ZW5jZShyZW1vdmUpID8/IEJ5dGVTZXF1ZW5jZSh0b2tlbnMpOwogICAgbGV0IHNvdXJjZSA9IGxvYy5maWxlOwogICAgbGV0IHR5cGUgPSBJbXBFeHBUeXBlKHRva2Vucyk7CiAgICBsZXQgY29kZSA9IFRva2VuU2VxdWVuY2UodG9rZW5zKS50b1N0cmluZygpOyAvLyB0b1N0cmluZyhCdWZmZXJGaWxlKHNvdXJjZSkuc2xpY2UoLi4ucmFuZ2UpKTsKICAgIGlmKGRlZiAhPSAtMSkKICAgICAgaWYoZGVidWcgPj0gMikKICAgICAgICBjb25zb2xlLmxvZygnQWRkRXhwb3J0JywgewogICAgICAgICAgc291cmNlLAogICAgICAgICAgZmlsZSwKICAgICAgICAgIGNvZGUsCiAgICAgICAgICByYW5nZSwKICAgICAgICAgIGxvYywKICAgICAgICAgIHRva2VucwogICAgICAgIH0pOwogICAgbGV0IGxlbiA9IHRva2Vucy5sZW5ndGg7CiAgICBpZihvKSB7CiAgICAgIGV4cG9ydGVkID0gdG9rZW5zLmZpbHRlcih0b2sgPT4gdG9rLnR5cGUgPT0gJ2lkZW50aWZpZXInKS5tYXAodG9rID0+IHRvay5sZXhlbWUpOwogICAgfQoKICAgIGlmKE5vbldTKHRva2VucylbMV0ubGV4ZW1lICE9ICd7JykgbGVuID0gdG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gSXNJZGVudGlmaWVyKHVuZGVmaW5lZCwgdG9rKSB8fCBJc0tleXdvcmQoJ2RlZmF1bHQnLCB0b2spKSArIDE7CiAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgbGVuKTsKICAgIGxldCBleHAgPSBkZWZpbmUoCiAgICAgIHsKICAgICAgICB0eXBlOiBXaGF0LkVYUE9SVCwKICAgICAgICBmaWxlOiBmaWxlICYmIC9cLi8udGVzdChmaWxlKSA/IHJlbGF0aXZlUGF0aChmaWxlKSA6IGZpbGUsCiAgICAgICAgdG9rZW5zLAogICAgICAgIGV4cG9ydGVkLAogICAgICAgIG5hbWUsCiAgICAgICAgcmFuZ2UKICAgICAgfSwKICAgICAgewogICAgICAgIGNvZGUsCiAgICAgICAgbG9jLAogICAgICAgIGRlcHRoLAogICAgICAgIHBhdGgoKSB7CiAgICAgICAgICBjb25zdCB7IGZpbGUgfSA9IHRoaXM7CiAgICAgICAgICBpZih0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJykgcmV0dXJuIHJlbGF0aXZlUGF0aChmaWxlKTsKICAgICAgICB9CiAgICAgIH0KICAgICk7CiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGV4cCwgRXhwb3J0LnByb3RvdHlwZSk7CiAgfQoKICBkZWZpbmUoRXhwb3J0LnByb3RvdHlwZSwgewogICAgaWRzKCkgewogICAgICByZXR1cm4gSW1wb3J0SWRzKHRoaXMudG9rZW5zKS5tYXAoKHsgbGV4ZW1lIH0pID0+IGxleGVtZSk7CiAgICB9LAogICAgaWRtYXAoKSB7CiAgICAgIHJldHVybiBJbXBvcnRJZE1hcCh0aGlzLnRva2Vucyk7CiAgICB9CiAgfSk7CgogIGZ1bmN0aW9uIEltcG9ydCh0b2tlbnMsIHJlbGF0aXZlUGF0aCA9IHMgPT4gcywgZGVwdGgpIHsKICAgIHRva2VucyA9IHRva2Vuc1swXS5zZXEgPT09IHRva2Vuc1sxXS5zZXEgPyB0b2tlbnMuc2xpY2UoMSkgOiB0b2tlbnMuc2xpY2UoKTsKICAgIGlmKCEvXihpbXxleClwb3J0JC9pLnRlc3QodG9rZW5zWzBdLmxleGVtZSkpIHRocm93IG5ldyBFcnJvcihgQWRkSW1wb3J0IHRva2VuczogYCArIGluc3BlY3QodG9rZW5zLCB7IGNvbXBhY3Q6IGZhbHNlIH0pKTsKICAgIGNvbnN0IHRvayA9IHRva2Vuc1swXTsKICAgIGNvbnN0IHsgbG9jLCBzZXEgfSA9IHRvazsKICAgIGxldCBzb3VyY2UgPSBsb2MuZmlsZTsKICAgIGxldCB0eXBlID0gSW1wRXhwVHlwZSh0b2tlbnMuc2xpY2UoKSksCiAgICAgIGZpbGUgPSBJbXBvcnRGaWxlKHRva2Vucy5zbGljZSgpKTsKICAgIGNvbnN0IHJhbmdlID0gQnl0ZVNlcXVlbmNlKHRva2Vucy5zbGljZSgpKTsKICAgIHJhbmdlWzBdID0gbG9jLmJ5dGVPZmZzZXQ7CiAgICBsZXQgY29kZSA9IHRvU3RyaW5nKEJ1ZmZlckZpbGUoc291cmNlKS5zbGljZSguLi5yYW5nZSkpOwogICAgaWYoZGVidWcgPj0gMikKICAgICAgY29uc29sZS5sb2coJ0FkZEltcG9ydCcsIGNvbXBhY3QoMSksIHsKICAgICAgICBzb3VyY2UsCiAgICAgICAgZmlsZSwKICAgICAgICBjb2RlLAogICAgICAgIGxvYywKICAgICAgICByYW5nZQogICAgICB9KTsKICAgIGxldCBpbXAgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YoCiAgICAgIGRlZmluZSgKICAgICAgICB7CiAgICAgICAgICBmaWxlOiBSZXNvbHZlQWxpYXMoZmlsZSAmJiAvXC4vLnRlc3QoZmlsZSkgPyByZWxhdGl2ZVBhdGgoZmlsZSkgOiBmaWxlKSwKICAgICAgICAgIHJhbmdlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgdG9rZW5zOiB0b2tlbnMuc2xpY2UoKSwKICAgICAgICAgIGNvZGUsCiAgICAgICAgICBsb2MsCiAgICAgICAgICBkZXB0aCwKICAgICAgICAgIHBhdGgoKSB7CiAgICAgICAgICAgIGNvbnN0IHsgZmlsZSB9ID0gdGhpczsKICAgICAgICAgICAgaWYodHlwZW9mIGZpbGUgPT0gJ3N0cmluZycpIHJldHVybiByZWxhdGl2ZVBhdGgoZmlsZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApLAogICAgICBJbXBvcnQucHJvdG90eXBlCiAgICApOwogICAgbGV0IGZuID0gewogICAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX05BTUVTUEFDRV0oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gSXNLZXl3b3JkKCdhcycsIHRvaykpICsgMV0ubGV4ZW1lOwogICAgICB9LAogICAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX0RFRkFVTFRdKCkgewogICAgICAgIGNvbnN0IHsgdG9rZW5zIH0gPSB0aGlzOwogICAgICAgIHJldHVybiB0b2tlbnNbdG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gSXNLZXl3b3JkKCdpbXBvcnQnLCB0b2spKSArIDFdLmxleGVtZTsKICAgICAgfSwKICAgICAgW0ltcG9ydFR5cGVzLklNUE9SVF0oKSB7CiAgICAgICAgY29uc3QgeyB0b2tlbnMgfSA9IHRoaXM7CiAgICAgICAgbGV0IGkgPSAwLAogICAgICAgICAgcyA9IFtdLAogICAgICAgICAgYSA9IFtdOwogICAgICAgIGlmKElzS2V5d29yZChbJ2ltcG9ydCcsICdleHBvcnQnXSwgdG9rZW5zW2ldKSkgKytpOwogICAgICAgIGlmKElzUHVuY3R1YXRvcigneycsIHRva2Vuc1tpXSkpICsraTsKICAgICAgICBmb3IoOyB0b2tlbnNbaV0gJiYgIUlzS2V5d29yZCgnZnJvbScsIHRva2Vuc1tpXSk7ICsraSkgewogICAgICAgICAgaWYoSXNQdW5jdHVhdG9yKFsnLCcsICd9J10sIHRva2Vuc1tpXSkpIHsKICAgICAgICAgICAgaWYocy5sZW5ndGgpIGEucHVzaChzKTsKICAgICAgICAgICAgcyA9IFtdOwogICAgICAgICAgfSBlbHNlIGlmKElzSWRlbnRpZmllcih0b2tlbnNbaV0pKSB7CiAgICAgICAgICAgIHMucHVzaCh0b2tlbnNbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhID0gYS5mbGF0KCkuZmlsdGVyKHRvayA9PiB0b2sudHlwZSA9PSAnaWRlbnRpZmllcicpOwogICAgICAgIHJldHVybiBhLm1hcCh0b2sgPT4gdG9rLmxleGVtZSk7CiAgICAgIH0KICAgIH1bdHlwZV07CiAgICBpZih0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJykgewogICAgICBsZXQgbG9jYWwgPSBmbi5jYWxsKGltcCk7CiAgICAgIGRlZmluZShpbXAsIHsgbG9jYWwgfSk7CiAgICB9CgogICAgcmV0dXJuIGltcDsKICB9CgogIGRlZmluZShJbXBvcnQucHJvdG90eXBlLCB7CiAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0ltcG9ydCcsCiAgICBpZHMoKSB7CiAgICAgIHJldHVybiBJbXBvcnRJZHModGhpcy50b2tlbnMuc2xpY2UoKSkubWFwKCh7IGxleGVtZSB9KSA9PiBsZXhlbWUpOwogICAgfSwKICAgIGlkbWFwKCkgewogICAgICByZXR1cm4gSW1wb3J0SWRNYXAodGhpcy50b2tlbnMuc2xpY2UoKSk7CiAgICB9LAogICAgdG9Db2RlKGZpbHRlcklkcyA9IGlkID0+IHRydWUpIHsKICAgICAgaWYodGhpcy5pZHMoKS5maWx0ZXIoZmlsdGVySWRzKS5sZW5ndGggPT0gMCkgcmV0dXJuICcnOwogICAgICBsZXQgdG9rZW5zID0gdGhpcy50b2tlbnMuZmlsdGVyKHRvayA9PiAodG9rLnR5cGUgPT0gJ2lkZW50aWZpZXInID8gZmlsdGVySWRzKHRvay5sZXhlbWUpIDogdHJ1ZSkpOwogICAgICBsZXQgcHJldiwgcG53czsKICAgICAgdG9rZW5zID0gdG9rZW5zLnJlZHVjZSgoYWNjLCB0b2ssIGkpID0+IHsKICAgICAgICBpZihwcmV2ICYmIHByZXYudHlwZSA9PSAnd2hpdGVzcGFjZScgJiYgdG9rLnR5cGUgPT0gJ3doaXRlc3BhY2UnKSByZXR1cm4gYWNjOwogICAgICAgIGlmKHBud3MgIT09IHVuZGVmaW5lZCAmJiBbJywnLCAneyddLmluZGV4T2YoYWNjW3Bud3NdLmxleGVtZSkgIT0gLTEgJiYgWycsJywgJ30nXS5pbmRleE9mKHRvay5sZXhlbWUpICE9IC0xKSB7CiAgICAgICAgICBpZih0b2subGV4ZW1lID09ICd9JykgYWNjLnNwbGljZShwbndzLCAxKTsKICAgICAgICAgIGlmKHRvay5sZXhlbWUgPT0gJ30nKSB7CiAgICAgICAgICAgIHBud3MgPSBhY2MubGVuZ3RoOwogICAgICAgICAgICBhY2MucHVzaCh0b2spOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgICB9CiAgICAgICAgaWYodG9rLnR5cGUgIT0gJ3doaXRlc3BhY2UnKSBwbndzID0gYWNjLmxlbmd0aDsKICAgICAgICBwcmV2ID0gdG9rOwogICAgICAgIGFjYy5wdXNoKHRvayk7CiAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgfSwgW10pOwogICAgICB0b2tlbnMgPSBBZGRXaGl0ZXNwYWNlKHRva2Vucyk7CiAgICAgIGNvbnNvbGUubG9nKCd0b2tlbnMnLCB0b2tlbnMpOwogICAgICByZXR1cm4gVG9rZW5TZXF1ZW5jZSh0b2tlbnMpLnRvU3RyaW5nKCk7CiAgICB9CiAgfSk7CgogIGxldCBlbmQgPSBEYXRlLm5vdygpOwoKICBpZihzaG93VGltaW5nKSBjb25zb2xlLmxvZyhgTGV4aW5nICcke3NvdXJjZS5yZXBsYWNlKC9eXC5cLy8sICcnKX0nIHRvb2sgJHtlbmQgLSBzdGFydH1tc2ApOwogIHN0YXJ0ID0gRGF0ZS5ub3coKTsKCiAgbGV0IGV4cG9ydHNGcm9tID0gZXhwb3J0cy5maWx0ZXIoZXhwID0+IGV4cC50b2tlbnMpLmZpbHRlcihleHAgPT4gZXhwLnRva2Vucy5zb21lKHRvayA9PiB0b2subGV4ZW1lID09ICdmcm9tJykpOwoKICBpZihwYXRoLmlzUmVsYXRpdmUoc291cmNlKSAmJiAhL14oXC58XC5cLilcLy8udGVzdChzb3VyY2UpKSBzb3VyY2UgPSAnLi8nICsgc291cmNlOwoKICBtb2R1bGVzW3NvdXJjZV0gPSB7IGltcG9ydHMsIGV4cG9ydHMgfTsKCiAgbGV0IGFsbEV4cG9ydHNJbXBvcnRzID0gZXhwb3J0cy5jb25jYXQoaW1wb3J0cykuc29ydCgoYSwgYikgPT4gYS5yYW5nZVswXSAtIGIucmFuZ2VbMF0pOwogIGxldCBmaWxlSW1wb3J0cyA9IGFsbEV4cG9ydHNJbXBvcnRzLmZpbHRlcihpbXAgPT4gdHlwZW9mIGltcC5maWxlID09ICdzdHJpbmcnKTsKICBsZXQgc3BsaXRQb2ludHMgPSB1bmlxdWUoZmlsZUltcG9ydHMucmVkdWNlKChhY2MsIGltcCkgPT4gWy4uLmFjYywgLi4uaW1wLnJhbmdlXSwgW10pKTsKICBidWZmZXJzW3NvdXJjZV0gPSBbLi4uc3BsaXQoQnVmZmVyRmlsZShzb3VyY2UpLCAuLi5zcGxpdFBvaW50cyldLm1hcChiID0+IGIgPz8gdG9TdHJpbmcoYiwgMCwgYi5ieXRlTGVuZ3RoKSk7CgogIGltcG9ydHNGb3Jbc291cmNlXSA9IGFsbEV4cG9ydHNJbXBvcnRzLmZpbHRlcihpbXAgPT4gaW1wLnR5cGUgPT0gV2hhdC5JTVBPUlQpOyAvL2ZpbGVJbXBvcnRzLm1hcChpID0+IGkuZmlsZSk7CgogIGxldCBtYXAgPSBGaWxlTWFwLmZvcihzb3VyY2UpOwogIGxldCBpbXBvcnRlZCA9IHVzZWQgJiYgbmV3IFNldCgpOwoKICAvKiBmb3IobGV0IGltcGV4cCBvZiBmaWxlSW1wb3J0cykgewogICAgbGV0IGZpbGUgPSBSZXNvbHZlQWxpYXMoaW1wZXhwLmZpbGUpOwogICAgbGV0IHMgPSAoZ2xvYmFsSW1wb3J0c1tmaWxlXSA/Pz0gbmV3IFNldCgpKTsKCiAgICBmb3IobGV0IGlkIG9mIGltcGV4cC5pZHMoKSkgcy5hZGQoaWQpOwogIH0qLwoKICBpZih1c2VkKSB7CiAgICBmb3IobGV0IGltcGV4cCBvZiAxKSB7CiAgICAgIGlmKGltcGV4cC50eXBlID09IFdoYXQuSU1QT1JUKSB7CiAgICAgICAgbGV0IGlkcyA9IGltcGV4cC5pZHMoKTsKICAgICAgICBmb3IobGV0IGlkIG9mIGlkcykgaW1wb3J0ZWQuYWRkKGlkKTsKICAgICAgfQogICAgfQoKICAgIGxldCBudW1SZXBsYWNlID0gMDsKICAgIGZvcihsZXQgaW1wZXhwIG9mIGFsbEV4cG9ydHNJbXBvcnRzKSB7CiAgICAgIGlmKGltcGV4cC50eXBlID09IFdoYXQuSU1QT1JUKSB7CiAgICAgICAgbGV0IGlkcyA9IGltcGV4cC5pZHMoKTsKCiAgICAgICAgaWYoaWRzLnNvbWUoaWQgPT4gIXVzZWQuaGFzKGlkKSkpIHsKICAgICAgICAgIGxldCB7IGNvZGUsIHJhbmdlLCBmaWxlIH0gPSBpbXBleHA7CiAgICAgICAgICBsZXQgbmV3Q29kZSA9IGltcGV4cC50b0NvZGUoaWQgPT4gdXNlZC5oYXMoaWQpKTsKICAgICAgICAgIGlmKGNvZGUgIT0gbmV3Q29kZSkgewogICAgICAgICAgICBtYXAucmVwbGFjZVJhbmdlKHJhbmdlLCB0b0FycmF5QnVmZmVyKG5ld0NvZGUpKTsKICAgICAgICAgICAgKytudW1SZXBsYWNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmKGRlYnVnID49IDEpIGNvbnNvbGUubG9nKGBpbXBvcnRlZCBbICR7c291cmNlfSBdYCwgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAxIH0pLCBbLi4uaW1wb3J0ZWRdKTsKICAgIHVzZWQgPSBpbnRlcnNlY3Rpb24odXNlZCwgaW1wb3J0ZWQpOwogICAgaWYoZGVidWcgPj0gMSkgY29uc29sZS5sb2coYHVzZWQgICAgIFsgJHtzb3VyY2V9IF1gLCBjb25zb2xlLmNvbmZpZyh7IGNvbXBhY3Q6IDEgfSksIFsuLi51c2VkXSk7CgogICAgbGV0IHVudXNlZCA9IGRpZmZlcmVuY2UoaW1wb3J0ZWQsIHVzZWQpOwoKICAgIGlmKGRlYnVnID49IDEpIGNvbnNvbGUubG9nKGB1bnVzZWQgICBbICR7c291cmNlfSBdYCwgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAxIH0pLCBbLi4udW51c2VkXSk7CgogICAgaWYobnVtUmVwbGFjZSkgewogICAgICBsZXQgb3V0ID0gRmlsZVJlcGxhY2VyKHNvdXJjZSk7CiAgICAgIGxldCByZXN1bHQgPSBtYXAud3JpdGUob3V0KTsKICAgICAgb3V0LmNsb3NlKCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGZvcihsZXQgaW1wZXhwIG9mIGFsbEV4cG9ydHNJbXBvcnRzKSB7CiAgICAgIGNvbnN0IHsgdHlwZSwgZmlsZSwgcmFuZ2UsIGNvZGUsIGxvYyB9ID0gaW1wZXhwOwogICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSByYW5nZTsKICAgICAgLy8gbGV0IGJ5dGVidWYgPSBCdWZmZXJGaWxlKHNvdXJjZSk7CiAgICAgIGxldCBidWZzdHIgPSB0b1N0cmluZyhieXRlYnVmLnNsaWNlKC4uLnJhbmdlKSk7CiAgICAgIGxldCBhcnJidWYgPSB0b0FycmF5QnVmZmVyKGJ1ZnN0cik7CgogICAgICBsZXQgcmVwbGFjZW1lbnQgPSB0eXBlID09IFdoYXQuRVhQT1JUID8gbnVsbCA6IC8qRmlsZU1hcC5mb3IqLyBmaWxlOwogICAgICBsZXQgeyBieXRlT2Zmc2V0IH0gPSBsb2M7CiAgICAgIGxldCBwOwoKICAgICAgaWYoZGVidWcgPiAyKQogICAgICAgIGNvbnNvbGUubG9nKCdpbXBleHAnLCBjb21wYWN0KDIpLCB7CiAgICAgICAgICBjb2RlLAogICAgICAgICAgcmFuZ2U6IG5ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpLAogICAgICAgICAgcmVwbGFjZW1lbnQsCiAgICAgICAgICBsb2M6IGxvYyArICcnCiAgICAgICAgfSk7CgogICAgICBpZih0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJyAmJiAhSXNGaWxlSW1wb3J0KGZpbGUpKSB7CiAgICAgICAgaWYoZGVidWcgPiAxKSBjb25zb2xlLmxvZyhgXHgxYlsxOzMxbUluZXhpc3RlbnRceDFiWzBtIGZpbGUgJyR7ZmlsZX0nYCk7CgogICAgICAgIC8vIGlmKHByaW50RmlsZXMpIHN0ZC5wdXRzKGAke3BhdGgubm9ybWFsaXplKHNvdXJjZSl9OiAke2ZpbGV9XG5gKTsKCiAgICAgICAgcmVwbGFjZW1lbnQgPSBudWxsOwogICAgICB9IGVsc2UgaWYoZmlsZSAmJiBwYXRoLmlzRmlsZShmaWxlKSkgewogICAgICAgIHJlcGxhY2VtZW50ID0gZmlsZTsKICAgICAgfSBlbHNlIGlmKCh0eXBlb2YgcmVwbGFjZW1lbnQgPT0gJ3N0cmluZycgJiYgIXBhdGguaXNGaWxlKHJlcGxhY2VtZW50KSkgfHwgdHlwZSA9PSBXaGF0LklNUE9SVCB8fCB0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJykgewogICAgICAgIHJlcGxhY2VtZW50ID0gbnVsbDsKICAgICAgfSBlbHNlIGlmKGNvZGUuc3RhcnRzV2l0aCgnZXhwb3J0JykpIHsKICAgICAgICBpZighcmVtb3ZlRXhwb3J0cykgY29udGludWU7CiAgICAgICAgcmVwbGFjZW1lbnQgPSBmaWxlOwogICAgICB9CgogICAgICBsZXQgbGlzdCA9IHR5cGUgPT0gV2hhdC5FWFBPUlQgPyBmb290ZXIgOiBoZWFkZXI7CiAgICAgIGxpc3QucHVzaChpbXBleHApOwoKICAgICAgLyogcHJldHRpZXItaWdub3JlICovIGlmKGRlYnVnID49IDIpIGNvbnNvbGUubG9nKCdpbXBleHAnLCBjb21wYWN0KDIpLCB7IGNvZGUsIHJhbmdlOiBuZXcgTnVtZXJpY1JhbmdlKC4uLnJhbmdlKSwgcmVwbGFjZW1lbnQsIGxvYzogbG9jICsgJyd9KTsKICAgICAgLyogcHJldHRpZXItaWdub3JlICovIGlmKGRlYnVnID4gMSkgY29uc29sZS5sb2coJ2ltcGV4cCcsIGNvbXBhY3QoMSksIHsgcmFuZ2U6IG5ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpLCBsb2M6IGxvYyArICcnfSk7CgogICAgICAvKiAgIGNvbnN0IGJ1aWx0aW4gPSB0eXBlb2YgcmVwbGFjZW1lbnQgPT0gJ3N0cmluZycgJiYgIUlzRmlsZUltcG9ydChyZXBsYWNlbWVudCk7CiAgICAgIGNvbnN0IHJlc29sdmVkID0gUmVzb2x2ZUFsaWFzKHJlcGxhY2VtZW50KTsKCiAgICAgIGlmKGJ1aWx0aW4pIHsKICAgICAgICBpZihkZWJ1ZyA+IDApIGNvbnNvbGUubG9nKCdCVUlMVElOJywgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAxMCB9KSwgeyByZXNvbHZlZCwgZmlsZSwgcmVwbGFjZW1lbnQsIHJhbmdlIH0pOwogICAgICB9CiAgICAgICovCiAgICAgIGxldCBzdHI7CiAgICAgIGlmKHJhbmdlKSBzdHIgPSB0b1N0cmluZyhtYXAuYnVmZmVyLnNsaWNlKC4uLnJhbmdlKSk7CiAgICAgIGlmKGRlYnVnID4gMSkgY29uc29sZS5sb2coJ1x4MWJbMzg7NTszM21SRVBMQUNFXHgxYlswbScsIGNvbnNvbGUuY29uZmlnKHsgY29tcGFjdDogMTAgfSksIHsgcmVwbGFjZW1lbnQsIGZpbGUsIHJhbmdlLCBzdHIgfSk7CgogICAgICBtYXAucmVwbGFjZVJhbmdlKHJhbmdlLCByZXBsYWNlbWVudCk7IC8qIHsKCiAgICAgIC8qIGlmKHJlcGxhY2VtZW50ID09PSBudWxsKSovIC8qewogICAgICAgIGxldCBtYXAgPSAoZ2xvYmFsSW1wb3J0c1tSZXNvbHZlQWxpYXMoaW1wZXhwLmZpbGUpXSA/Pz0ge30pOwogICAgICAgIGlmKGRlYnVnID4gMSkgY29uc29sZS5sb2coJ1x4MWJbMzg7NTszM21JRE1BUFx4MWJbMG0nLCBpZG1hcCk7CiAgICAgICAgbGV0IGlkbWFwOwoKICAgICAgICBpZigoaWRtYXAgPSBpbXBleHAuaWRtYXAoKSkpIGZvcihsZXQgW2xvY2FsLCBuYW1lXSBvZiBpZG1hcCkgbWFwW2xvY2FsXSA9IG5hbWU7CiAgICAgIH0qLwogICAgfQogIH0KCiAgLy9lYnVnTG9nKCdjb21tZW50cycsIGNvbW1lbnRzLm1hcCgoe2J5dGVSYW5nZSwgbGV4ZW1lfSk9PltieXRlUmFuZ2UsbGV4ZW1lLHRvU3RyaW5nKGJ5dGVidWYuc2xpY2UoLi4uYnl0ZVJhbmdlKSldKSk7CgogIGlmKHJlbW92ZUNvbW1lbnRzICYmIGNvbW1lbnRzLmxlbmd0aCkgewogICAgaSA9IC0xOwogICAgZGVidWdMb2coYFJlbW92aW5nICR7Y29tbWVudHMubGVuZ3RofSBjb21tZW50cyBmcm9tICcke3NvdXJjZX0nYCk7CiAgICBmb3IobGV0IHsgYnl0ZVJhbmdlLCBsZXhlbWUgfSBvZiBjb21tZW50cykgewogICAgICBsZXQgc2wgPSBieXRlYnVmLnNsaWNlKC4uLmJ5dGVSYW5nZSk7CiAgICAgIGlmKGRlYnVnID4gMSkKICAgICAgICBkZWJ1Z0xvZyhgY29tbWVudFskeysraX1dYCwgY29tcGFjdCgyKSwgewogICAgICAgICAgYnl0ZVJhbmdlLAogICAgICAgICAgc3RyOiB0b1N0cmluZyhzbCkKICAgICAgICB9KTsKCiAgICAgIG1hcC5yZXBsYWNlUmFuZ2UoYnl0ZVJhbmdlLCBudWxsKTsKICAgIH0KICB9CgogIGVuZCA9IERhdGUubm93KCk7CgogIC8vIGNvbnNvbGUubG9nKGBTdWJzdGl0dXRpbmcgJyR7c291cmNlLnJlcGxhY2UoL15cLlwvLywgJycpfScgdG9vayAke2VuZCAtIHN0YXJ0fW1zYCk7CiAgcHJvY2Vzc2VkLmFkZChzb3VyY2UpOwoKICBpZihyZWN1cnNpdmUgPiAwKSB7CiAgICBmb3IobGV0IGltcCBvZiBmaWxlSW1wb3J0cykgewogICAgICBsZXQgeyBmaWxlLCByYW5nZSwgdG9rZW5zIH0gPSBpbXA7CgogICAgICBpZihyZWFkUGFja2FnZSkgewogICAgICAgIGxldCBhbGlhcyA9IFJlc29sdmVBbGlhcyhmaWxlKTsKICAgICAgICBpZihhbGlhcyAhPSBmaWxlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgXHgxYlsxOzMxbUFsaWFzaW5nICcke2ZpbGV9JyB0byAnJHthbGlhc30nXHgxYlswbWApOwogICAgICAgICAgZmlsZSA9IGFsaWFzOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYoIS9cLnxcLy8udGVzdChmaWxlKSkgewogICAgICAgIC8vY29uc29sZS5sb2coYEJ1aWx0aW4gbW9kdWxlICcke2ZpbGV9J2ApOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBpZighcGF0aC5pc0ZpbGUoZmlsZSkpIHsKICAgICAgICBjb25zb2xlLmxvZyhgUGF0aCBtdXN0IGV4aXN0ICcke2ZpbGV9J2ApOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBpZihwcm9jZXNzZWQuaGFzKGZpbGUpIHx8IGZpbGUgPT0gc291cmNlKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZyhgQWxyZWFkeSBwcm9jZXNzZWQgJyR7ZmlsZX0nYCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGZpbGUgPSBOb3JtYWxpemVQYXRoKGZpbGUpOwogICAgICBmaWxlID0gTW9kdWxlTG9hZGVyKGZpbGUpOwoKICAgICAgaWYoZmlsZSkgewogICAgICAgIHByb2Nlc3NlZC5hZGQoZmlsZSk7CgogICAgICAgIEFkZERlcChzb3VyY2UsIGZpbGUpOwoKICAgICAgICBpZihkZWJ1ZyA+IDIpIGNvbnNvbGUubG9nKGBSZWN1cnNpbmdgLCB7IHNvdXJjZSwgZmlsZSB9KTsKCiAgICAgICAgUHJvY2Vzc0ZpbGUoZmlsZSwgbG9nLCB0eXBlb2YgcmVjdXJzaXZlID09ICdudW1iZXInID8gcmVjdXJzaXZlIC0gMSA6IHJlY3Vyc2l2ZSwgZGVwdGggKyAxKTsKICAgICAgfQogICAgfQogIH0KCiAgc3RkLmdjKCk7CgogIGlmKHNob3dEZXBzKSB7CiAgICBsZXQgZGVwcyA9IFsuLi5EZXBlbmRlbmN5VHJlZShzb3VyY2UsICcgJywgZmFsc2UsIDAsICcgICAgJyldOwogICAgY29uc29sZS5sb2coYERlcGVuZGVuY2llcyBvZiAnJHtzb3VyY2V9JzpcbiR7U3ByZWFkQW5kSm9pbihkZXBzKX1gKTsKICAgIC8vY29uc29sZS5sb2coYGRlcGVuZGVuY3lNYXBgLFsuLi5kZXBlbmRlbmN5TWFwXSk7CiAgfQoKICByZXR1cm4gbWFwOwp9CgpmdW5jdGlvbiBBZGREZXAoc291cmNlLCBmaWxlKSB7CiAgc291cmNlID0gTm9ybWFsaXplUGF0aChzb3VyY2UpOwoKICBpZihkZWJ1ZyA+IDIpIGNvbnNvbGUubG9nKGBBZGQgZGVwZW5kZW5jeSAnJHtmaWxlfScgdG8gJyR7c291cmNlfSdgKTsKICBkZXBlbmRlbmN5VHJlZShzb3VyY2UpLnB1c2goZmlsZSk7Cn0KCmZ1bmN0aW9uIElzV1ModG9rKSB7CiAgcmV0dXJuIHRvay50eXBlID09ICd3aGl0ZXNwYWNlJzsKfQoKZnVuY3Rpb24gTm9uV1ModG9rZW5zKSB7CiAgcmV0dXJuIHRva2Vucy5maWx0ZXIodG9rID0+ICFJc1dTKHRvaykpOwp9CgpmdW5jdGlvbiBMZWFkaW5nV1Moc3RyKSB7CiAgbGV0IG0gPSBzdHIubWF0Y2goL1teXHNdLyk7CiAgcmV0dXJuIG0/LmluZGV4ID8/IDA7Cn0KCmZ1bmN0aW9uIFRva2VuU2VxdWVuY2UodG9rZW5zKSB7CiAgcmV0dXJuIGRlZmluZSgKICAgIHRva2Vucy5tYXAodG9rID0+IHRvay5sZXhlbWUpLAogICAgewogICAgICB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gdGhpcy5qb2luKCcnKTsKICAgICAgfQogICAgfQogICk7Cn0KCmZ1bmN0aW9uIEFkZFdoaXRlc3BhY2UodG9rZW5zKSB7CiAgcmV0dXJuIHRva2Vucy5yZWR1Y2UoKGFjYywgdG9rKSA9PiB7CiAgICBpZihhY2MubGVuZ3RoKSB7CiAgICAgIGlmKHRvay5sZXhlbWUgIT0gJywnKSBpZiAoIUlzV1MoYWNjW2FjYy5sZW5ndGggLSAxXSkgJiYgIUlzV1ModG9rKSkgYWNjLnB1c2goeyB0eXBlOiAnd2hpdGVzcGFjZScsIGxleGVtZTogJyAnIH0pOwogICAgfQoKICAgIGFjYy5wdXNoKHRvayk7CiAgICByZXR1cm4gYWNjOwogIH0sIFtdKTsKfQoKZnVuY3Rpb24gVW5xdW90ZShsZXhlbWUpIHsKICByZXR1cm4gbGV4ZW1lLnJlcGxhY2UoLyheW1wnXCJcYF18W1wnXCJcYF0kKS9nLCAnJyk7Cn0KCmZ1bmN0aW9uIExpdGVyYWxTZXF1ZW5jZSh0b2tlbnMpIHsKICByZXR1cm4gdG9rZW5zLnJlZHVjZSgoYWNjLCB0b2spID0+IGFjYyArIHRvay5sZXhlbWUsICcnKTsKfQoKZnVuY3Rpb24gVW50aWxFT0woaWR4LCB0b2tlbnMpIHsKICByZXR1cm4gVW50aWwoaWR4LCB0b2tlbnMsIFRva0lzKG51bGwsICc7JykpOwp9CgpmdW5jdGlvbiBVbnRpbChpZHgsIHRva2VucywgcHJlZCA9IFRva0lzKG51bGwsIFsnOycsICdcbiddKSkgewogIGxldCBpOwogIGZvcihpID0gaWR4OyB0b2tlbnNbaV07IGkrKykgewogICAgaWYocHJlZCh0b2tlbnNbaV0pKSBicmVhazsKICB9CgogIHJldHVybiB0b2tlbnMuc2xpY2UoaWR4LCBpKTsKfQoKZnVuY3Rpb24gV2hvbGVMaW5lKGlkeCwgdG9rZW5zKSB7CiAgbGV0IGksIGo7CiAgZm9yKGkgPSBpZHg7IHRva2Vuc1tpXTsgaSsrKSB7CiAgICBpZihbJzsnLCAnXG4nXS5pbmRleE9mKHRva2Vuc1tpXS5sZXhlbWUpICE9IC0xKSBicmVhazsKICB9CgogIGZvcihqID0gaWR4OyBqID4gMDsgai0tKSB7CiAgICBjb25zdCB0b2sgPSB0b2tlbnNbaiAtIDFdOwogICAgaWYoIXRvayB8fCBbJzsnLCAnXG4nXS5pbmRleE9mKHRva2Vuc1tqIC0gMV0ubGV4ZW1lKSAhPSAtMSkgYnJlYWs7CiAgfQoKICByZXR1cm4gdG9rZW5zLnNsaWNlKGosIGkpOwp9CgpmdW5jdGlvbiBSYW5nZShmaWxlLCBzdGFydCwgZW5kKSB7CiAgbGV0IGJ1ZjsKICBpZigoYnVmID0gQnVmZmVyRmlsZShmaWxlKSkpIHsKICAgIHRoaXMuZmlsZSA9IGZpbGU7CiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQgPz8gMDsKICAgIHRoaXMuZW5kID0gZW5kID8/IGJ1Zi5ieXRlTGVuZ3RoOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICByZXR1cm4gbnVsbDsKfQoKUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgbGV0IGJ1ZiA9IEJ1ZmZlckZpbGUodGhpcy5maWxlKTsKICByZXR1cm4gYnVmLnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTsKfTsKCmZ1bmN0aW9uIEluUmFuZ2UoW3N0YXJ0LCBlbmRdLCBpKSB7CiAgaWYoaSA+PSBzdGFydCAmJiBpIDwgZW5kKSByZXR1cm4gdHJ1ZTsKICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIElzUmFuZ2Uob2JqKSB7CiAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgKCdsZW5ndGgnIGluIG9iaiB8fCAnc3RhcnQnIGluIG9iaiB8fCBvYmogaW5zdGFuY2VvZiBOdW1lcmljUmFuZ2UpOwp9CgpjbGFzcyBOdW1lcmljUmFuZ2UgZXh0ZW5kcyBBcnJheSB7CiAgY29uc3RydWN0b3Ioc3RhcnQsIGVuZCkgewogICAgc3VwZXIoMik7CiAgICBpZihpc05hTigrc3RhcnQpKSBzdGFydCA9IDA7CiAgICB0aGlzWzBdID0gK3N0YXJ0OwogICAgaWYoaXNOYU4oK2VuZCkpIGVuZCA9IHRoaXNbMF07CiAgICB0aGlzWzFdID0gZW5kOwogIH0KCiAgZ2V0IHN0YXJ0KCkgewogICAgcmV0dXJuIHRoaXNbMF07CiAgfQoKICBzZXQgc3RhcnQodmFsdWUpIHsKICAgIHRoaXNbMF0gPSArdmFsdWU7CiAgfQoKICBnZXQgZW5kKCkgewogICAgcmV0dXJuIHRoaXNbMV07CiAgfQoKICBzZXQgZW5kKHZhbHVlKSB7CiAgICB0aGlzWzFdID0gK3ZhbHVlOwogIH0KCiAgZ2V0IHNpemUoKSB7CiAgICByZXR1cm4gdGhpc1sxXSAtIHRoaXNbMF07CiAgfQoKICBjbG9uZSgpIHsKICAgIHJldHVybiBuZXcgTnVtZXJpY1JhbmdlKC4uLnRoaXMpOwogIH0KCiAgaW5zaWRlKG4pIHsKICAgIGxldCBbcywgZV0gPSB0aGlzOwogICAgcmV0dXJuIG4gPj0gcyAmJiBuIDwgZTsKICB9CgogIHN0YXRpYyBmcm9tKHJhbmdlKSB7CiAgICBpZihpc09iamVjdChyYW5nZSkgJiYgcmFuZ2UgaW5zdGFuY2VvZiBOdW1lcmljUmFuZ2UpIHJldHVybiByYW5nZTsKCiAgICB0cnkgewogICAgICBsZXQgciA9IG5ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpOwogICAgICByYW5nZSA9IHI7CiAgICB9IGNhdGNoKGUpIHt9CgogICAgY29uc29sZS5sb2coJ051bWVyaWNSYW5nZS5mcm9tJywgcmFuZ2UpOwogICAgcmV0dXJuIHJhbmdlOwogIH0KCiAgc3RhdGljICpob2xlcyhyYW5nZXMsIG9ubHkgPSBmYWxzZSkgewogICAgbGV0IHByZXYgPSBbMCwgMF07CiAgICBsZXQgaSA9IC0xOwogICAgZm9yKGxldCByYW5nZSBvZiByYW5nZXMpIHsKICAgICAgaWYoSXNSYW5nZShyYW5nZSkpIHsKICAgICAgICByYW5nZSA9IFsuLi5yYW5nZV07CiAgICAgICAgY29uc29sZS5sb2coJ3JhbmdlIycgKyArK2ksIGluc3BlY3QocmFuZ2UpKTsKICAgICAgICBpZihJc1JhbmdlKHByZXYpICYmIElzUmFuZ2UocmFuZ2UpKSB7CiAgICAgICAgICBsZXQgW3N0YXJ0LCBlbmRdID0gcmFuZ2U7CiAgICAgICAgICBpZihzdGFydCA+PSBwcmV2WzFdKSB5aWVsZCBuZXcgTnVtZXJpY1JhbmdlKHByZXZbMV0sIHN0YXJ0KTsKICAgICAgICB9CiAgICAgICAgaWYoIW9ubHkpIHsKICAgICAgICAgIGlmKCEoaXNPYmVjdChyYW5nZSkgJiYgcmFuZ2UgaW5zdGFuY2VvZiBOdW1lcmljUmFuZ2UpKSByYW5nZSA9IG5ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpOwogICAgICAgICAgeWllbGQgcmFuZ2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHByZXYgPSByYW5nZTsKICAgIH0KICB9CgogIHN0YXRpYyBiZXR3ZWVuKFtzMSwgZTFdLCBbczIsIGUyXSkgewogICAgaWYoczIgPiBlMSkgcmV0dXJuIFtlMSwgczJdOwogICAgaWYoczEgPiBlMikgcmV0dXJuIFtlMiwgczFdOwogIH0KfQoKZGVmaW5lKE51bWVyaWNSYW5nZS5wcm90b3R5cGUsIHsKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ051bWVyaWNSYW5nZScsCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzOwogICAgbGV0IHMgPSAnJzsKICAgIGNvbnN0IHBhZCA9IHMgPT4gKHMgKyAnJykucGFkRW5kKDUpOwogICAgcyArPSBgXHgxYlsxOzM2bSR7cGFkKHN0YXJ0KX1ceDFiWzBtYDsKICAgIHMgKz0gYCAtIGA7CiAgICBzICs9IGBceDFiWzE7MzZtJHtwYWQoJysnICsgKGVuZCAtIHN0YXJ0KSl9XHgxYlswbWA7CiAgICBzID0gYFsgJHtzfSBdYDsKICAgIHJldHVybiBzOwogIH0KfSk7CgpjbGFzcyBGaWxlTWFwIGV4dGVuZHMgQXJyYXkgewogIHN0YXRpYyBidWZmZXJzID0gbWFwV3JhcHBlcihmaWxlQnVmZmVycyk7CiAgc3RhdGljIGZpbGVuYW1lcyA9IG1hcFdyYXBwZXIoYnVmZmVyUmVmKTsKCiAgY29uc3RydWN0b3IoZmlsZSwgYnVmKSB7CiAgICBzdXBlcigpOwogICAgaWYodHlwZW9mIGZpbGUgIT0gJ251bWJlcicpIHsKICAgICAgdGhpcy5maWxlID0gZmlsZTsKICAgICAgYnVmID8/PSBCdWZmZXJGaWxlKGZpbGUpOwogICAgICBpZighYnVmKSB0aHJvdyBuZXcgRXJyb3IoYEZpbGVNYXAgYnVmID09ICR7YnVmfWApOwogICAgICB0aGlzLnB1c2goW1swLCBidWYuYnl0ZUxlbmd0aF0sIGJ1Zl0pOwogICAgICBmaWxlTWFwcy5zZXQoZmlsZSwgdGhpcyk7CiAgICB9CiAgfQoKICBnZXQgYnVmZmVyKCkgewogICAgcmV0dXJuIEZpbGVNYXAuYnVmZmVycyhwYXRoLm5vcm1hbGl6ZSh0aGlzLmZpbGUpKTsKICB9CgogIHN0YXRpYyBlbXB0eShmaWxlKSB7CiAgICBpZih0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJykgZmlsZSA9IEZpbGVNYXAuZm9yKGZpbGUpOwogICAgaWYoaXNPYmplY3QoZmlsZSkgJiYgZmlsZSBpbnN0YW5jZW9mIEZpbGVNYXApIHJldHVybiBmaWxlLmlzRW1wdHkoKTsKICB9CgogIGlzRW1wdHkoKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBzdGF0aWMgZm9yKGZpbGUsIGJ1ZikgewogICAgbGV0IG07CiAgICBpZihmaWxlICYmIChtID0gZmlsZU1hcHMuZ2V0KGZpbGUpKSkgcmV0dXJuIG07CiAgICBpZihpc09iamVjdChmaWxlKSAmJiBmaWxlIGluc3RhbmNlb2YgRmlsZU1hcCkgcmV0dXJuIGZpbGU7CiAgICBlbHNlIGlmKGZpbGUgPT09IG51bGwgJiYgIWJ1ZikgewogICAgICBsZXQgb2JqID0gewogICAgICAgIGlzRW1wdHkoKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0sCiAgICAgICAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdGaWxlTWFwKGVtcHR5KScKICAgICAgfTsKICAgICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIEZpbGVNYXAucHJvdG90eXBlKTsKICAgIH0KICAgIGlmKGZpbGVNYXBzLmhhcyhmaWxlKSkgcmV0dXJuIGZpbGVNYXBzLmdldChmaWxlKTsKICAgIGJ1ZiA/Pz0gRmlsZU1hcC5idWZmZXJzKHBhdGgubm9ybWFsaXplKGZpbGUpKTsKICAgIHJldHVybiBuZXcgRmlsZU1hcChmaWxlLCBidWYpOwogIH0KCiAgZmluZFNsaWNlKHBvcykgewogICAgY29uc3QgbiA9IHRoaXMubGVuZ3RoOwogICAgZm9yKGxldCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICBsZXQgcmFuZ2U7CiAgICAgIGlmKChyYW5nZSA9IHRoaXMucmFuZ2VzW2ldKSkgewogICAgICAgIHJhbmdlID0gWy4uLnJhbmdlXTsKICAgICAgICBpZihJblJhbmdlKFsuLi5yYW5nZV0sIHBvcykpIHJldHVybiBpOwogICAgICB9CiAgICB9CgogICAgLy8gIHJldHVybiAtMTsKICAgIHJldHVybiB0aGlzLmZpbmRJbmRleCgoW3JhbmdlLCBidWZdKSA9PiByYW5nZSAmJiBJblJhbmdlKFsuLi5yYW5nZV0sIHBvcykpOwogIH0KCiAgc3BsaXRBdChwb3MpIHsKICAgIGxldCBpOwogICAgaWYoKGkgPSB0aGlzLmZpbmRQb3MocG9zKSkgIT0gLTEpIHsKICAgICAgY29uc29sZS5sb2coJ3NwbGl0QXQnLCB7IGkgfSk7CiAgICAgIGxldCBbcmFuZ2UsIGJ1Zl0gPSB0aGlzW2ldOwogICAgICBsZXQgW3N0YXJ0LCBlbmRdID0gcmFuZ2U7CgogICAgICBpZihzdGFydCA9PT0gcG9zKSByZXR1cm4gaTsKCiAgICAgIHRoaXMuc3BsaWNlKGkgKyAxLCAwLCBbbmV3IE51bWVyaWNSYW5nZSgocmFuZ2VbMV0gPSBwb3MpLCBlbmQpLCBidWZdKTsKICAgICAgcmV0dXJuIGkgKyAxOwogICAgfQogICAgcmV0dXJuIC0xOwogIH0KCiAgZmluZFBvcyhwb3MpIHsKICAgIGNvbnN0IG4gPSB0aGlzLmxlbmd0aDsKCiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIGxldCBbcmFuZ2UsIGJ1Zl0gPSB0aGlzW2ldOwogICAgICBsZXQgbmV4dCA9IHRoaXNbaSArIDFdOwogICAgICBpZihyYW5nZSkgewogICAgICAgIGxldCBbc3RhcnQsIGVuZF0gPSByYW5nZTsKICAgICAgICBpZihwb3MgPCBlbmQpIHJldHVybiBpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gLTE7CiAgfQoKICBpbnNlcnRBdChwb3MsIGZpbGUpIHsKICAgIGxldCBpOwogICAgbGV0IGVudHJ5ID0gdHlwZXMuaXNBcnJheUJ1ZmZlcihmaWxlKSA/IFtudWxsLCBmaWxlXSA6IFtudWxsLCBudWxsLCBmaWxlXTsKCiAgICBpZihwb3MgPD0gdGhpcy5yYW5nZUF0KDApWzBdKSB7CiAgICAgIHRoaXMudW5zaGlmdChlbnRyeSk7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGlmKChpID0gdGhpcy5zcGxpdEF0KHBvcykpICE9IC0xKSB7CiAgICAgIHRoaXMuc3BsaWNlKGksIDAsIGVudHJ5KTsKICAgICAgcmV0dXJuIGk7CiAgICB9CiAgfQoKICBpbnNlcnQoaW5kZXgsIGZpbGUpIHsKICAgIGxldCBlbnRyeSA9IHR5cGVzLmlzQXJyYXlCdWZmZXIoZmlsZSkgPyBbbnVsbCwgZmlsZV0gOiBbbnVsbCwgbnVsbCwgZmlsZV07CiAgICB0aGlzLnNwbGljZShpbmRleCwgMCwgZW50cnkpOwogICAgcmV0dXJuIGluZGV4OwogIH0KCiAgcmVwbGFjZVJhbmdlKHJhbmdlLCBmaWxlKSB7CiAgICBpZihBcnJheS5pc0FycmF5KHJhbmdlKSAmJiAhKHJhbmdlIGluc3RhbmNlb2YgTnVtZXJpY1JhbmdlKSkgcmFuZ2UgPSBuZXcgTnVtZXJpY1JhbmdlKC4uLnJhbmdlKTsKICAgIGNvbnN0IHNsaWNlSW5kZXggPSBuID0+IHsKICAgICAgbGV0IGksIHIsIGl0ZW07CiAgICAgIGlmKHRoaXNbMF0gJiYgdGhpc1swXVswXSAhPSBudWxsKSB7CiAgICAgICAgY29uc3QgcmFuZ2UgPSBuZXcgTnVtZXJpY1JhbmdlKC4uLnRoaXNbMF1bMF0pOwogICAgICAgIGlmKG4gPCByYW5nZS5zdGFydCkgcmV0dXJuIDA7CiAgICAgIH0KICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYoIXR5cGVzLmlzQXJyYXlCdWZmZXIodGhpc1tpXVsxXSkpIGNvbnRpbnVlOwoKICAgICAgICBpZih0aGlzW2ldICYmIChpdGVtID0gdGhpc1tpXVswXSkpIHsKICAgICAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IGl0ZW07CiAgICAgICAgICBpZihuIDwgZW5kKSBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGk7CiAgICB9OwogICAgLyogcHJldHRpZXItaWdub3JlICovIGlmKGRlYnVnID4gMSkgY29uc29sZS5sb2coJ0ZpbGVNYXAucmVwbGFjZVJhbmdlJywgY29tcGFjdCgyLCB7IGN1c3RvbUluc3BlY3Q6IHRydWUgfSksIHsgZmlsZSwgcmFuZ2U6IFtyYW5nZVswXSwgcmFuZ2VbMV1dIH0pOwoKICAgIGxldCBpID0gc2xpY2VJbmRleChyYW5nZVswXSk7CiAgICBsZXQgaiA9IHNsaWNlSW5kZXgocmFuZ2VbMV0pOwoKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwoKICAgIGlmKHJhbmdlWzBdIDwgdGhpc1tpXVswXSkgcmFuZ2VbMF0gPSB0aGlzW2ldWzBdOwoKICAgIGlmKCF0aGlzW2ldWzBdKQogICAgICB0aHJvdyBuZXcgRXJyb3IoYHJhbmdlPSR7cmFuZ2V9XG5sZW5ndGg9JHt0aGlzLmxlbmd0aH1cbnN0YXJ0PSR7aX1cbmVuZD0ke2p9XG50aGlzWyR7aX1dPSR7aW5zcGVjdCh0aGlzW2ldKX1cbnRoaXNbJHtpIC0gMX1dPSR7aW5zcGVjdCh0aGlzW2kgLSAxXSl9XG50aGlzWyR7aSArIDF9XT0ke2luc3BlY3QodGhpc1tpICsgMV0pfWApOwoKICAgIGxldCBbLCBidWZdID0gdGhpc1tpXTsKICAgIGxldCBlbXB0eSA9IHR5cGVvZiBmaWxlICE9ICdzdHJpbmcnOwogICAgbGV0IGVudHJ5ID0gW3JhbmdlLCBudWxsXS5jb25jYXQoZW1wdHkgPyBbXSA6IFtmaWxlXSk7CgogICAgaWYocmFuZ2VbMF0gPiB0aGlzW2ldWzBdWzBdKSB7CiAgICAgIGlmKGkgPT0gaikgewogICAgICAgIGxldCBbcmFuZ2VdID0gdGhpc1tpXTsKICAgICAgICBsZXQgaW5zZXJ0ID0gW25ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpLCBidWZdOwogICAgICAgIHRoaXMuc3BsaWNlKCsraiwgMCwgaW5zZXJ0KTsKICAgICAgfQogICAgICB0aGlzW2ldWzBdWzFdID0gcmFuZ2VbMF07CgogICAgICBpZih0aGlzW2pdICYmIHRoaXNbal1bMF0pIHRoaXNbal1bMF1bMF0gPSByYW5nZVsxXTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXNbaV1bMF1bMF0gPSByYW5nZVsxXTsKICAgICAgbGV0IFtbc3RhcnQsIGVuZF1dID0gdGhpc1tpXTsKCiAgICAgIGxldCByZW1haW4gPSBlbmQgLSBzdGFydDsKCiAgICAgIHRoaXMuc3BsaWNlKGksIHJlbWFpbiA9PSAwID8gMSA6IDAsIC4uLihlbXB0eSA/IFtdIDogW2VudHJ5XSkpOwogICAgICBmaWxlID0gbnVsbDsKICAgIH0KCiAgICBpZihmaWxlICE9IG51bGwpIHRoaXMuc3BsaWNlKGkgKyAxLCAwLCBlbnRyeSk7CgogICAgLyogcHJldHRpZXItaWdub3JlICovIGlmKGRlYnVnID4gMikgY29uc29sZS5sb2coJ0ZpbGVNYXAucmVwbGFjZVJhbmdlJywgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAxMCB9KSwgeyBpLCBqLCBsZW5ndGgsIHRoaXM6IHRoaXMgfSk7CgogICAgLy9pZih0aGlzLnJhbmdlQXQoMClbMF0gIT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbmNvbnNpc3RlbnQgRmlsZU1hcCcpOwogIH0KCiAgc3RyaW5nQXQobikgewogICAgbGV0IGFyciA9IFtdOwogICAgbGV0IHdyID0gQXJyYXlXcml0ZXIoYXJyLCAoYnVmLCBsZW4pID0+IHRvU3RyaW5nKGJ1ZiwgbGVuKSk7CiAgICBsZXQgaXRlbSA9IHRoaXMuYXQobikgPz8gJyc7CgogICAgaWYoaXNPYmplY3QoaXRlbSkgJiYgJ3dyaXRlJyBpbiBpdGVtKSBpdGVtLndyaXRlKHdyKTsKICAgIGVsc2UgaWYodHlwZW9mIGl0ZW0gPT0gJ3N0cmluZycpIHdyLnB1dHMoaXRlbSk7CiAgICBlbHNlIHdyLndyaXRlKGl0ZW0pOwogICAgcmV0dXJuIGFyci5qb2luKCcnKTsKICB9CgogIHJhbmdlQXQobikgewogICAgaWYobiBpbiB0aGlzKSB7CiAgICAgIGxldCByOwogICAgICBpZih0aGlzW25dWzBdKSByID0gdGhpc1tuXVswXTsKICAgICAgZWxzZSBpZih0eXBlcy5pc0FycmF5QnVmZmVyKHRoaXNbbl1bMV0pKSB7CiAgICAgICAgbGV0IHN0YXJ0ID0gbiA+IDAgPyB0aGlzLnJhbmdlQXQobiAtIDEpWzFdIDogMDsKICAgICAgICBsZXQgZW5kID0gc3RhcnQgKyB0aGlzW25dWzFdLmJ5dGVMZW5ndGg7CiAgICAgICAgciA9IFtzdGFydCwgZW5kXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByID0gW24gPiAwID8gdGhpcy5yYW5nZUF0KG4gLSAxKVsxXSA6IDAsIG4gKyAxIDwgdGhpcy5sZW5ndGggPyB0aGlzLnJhbmdlQXQobiArIDEpWzBdIDogSW5maW5pdHldOwogICAgICB9CiAgICAgIHJldHVybiByID8gbmV3IE51bWVyaWNSYW5nZSguLi5yKSA6IG51bGw7CiAgICB9CiAgfQoKICBnZXQgcmFuZ2VzKCkgewogICAgbGV0IHIgPSBbXTsKICAgIGxldCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgci5wdXNoKHRoaXNbaV1bMF0gPT09IG51bGwgPyBudWxsIDogdGhpcy5yYW5nZUF0KGkpKTsKICAgIHJldHVybiByOwogIH0KCiAgZHVtcCgpIHsKICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZmlsZTsKICAgIHJldHVybiAoCiAgICAgIGBGaWxlTWFwIHtcblx0ZmlsZTogXHgxYlszODs1OzIxNW0ke3NvdXJjZX0sXG5cdFx4MWJbMG1bIGAgKwogICAgICBbLi4udGhpc10KICAgICAgICAubWFwKChpdGVtLCBpKSA9PiBpdGVtLmNvbmNhdChbdGhpcy5hdChpKV0pKQogICAgICAgIC5yZWR1Y2UoKGFjYywgW3JhbmdlLCBidWYsIHN0cl0sIGkpID0+IHsKICAgICAgICAgIGxldCBzID0gYWNjICsgYFxuXHRcdFsgYDsKICAgICAgICAgIHMgKz0gKCcnICsgKHJhbmdlID8gJ1snICsgTnVtZXJpY1JhbmdlLmZyb20ocmFuZ2UpICsgJ10nIDogcmFuZ2UpKS5wYWRFbmQoMTApOwogICAgICAgICAgcyArPSAnLCAnOwogICAgICAgICAgaWYoaXNPYmplY3QoYnVmKSAmJiAnYnl0ZUxlbmd0aCcgaW4gYnVmKSB7CiAgICAgICAgICAgIGxldCBmaWxlbmFtZSA9IGJ1ZmZlclJlZi5nZXQoYnVmKTsKICAgICAgICAgICAgYnVmID0gZmlsZW5hbWUgPz8gYDx0aGlzPmA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYodHlwZW9mIGJ1ZiA9PSAnc3RyaW5nJykgYnVmID0gcGF0aC5ub3JtYWxpemUoYnVmKTsKICAgICAgICAgIHMgKz0gaW5zcGVjdChidWYsIHsgbWF4QXJyYXlMZW5ndGg6IDMwIH0pOwogICAgICAgICAgcyArPSBgIF0sYDsKICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0sICcnKSArCiAgICAgIGBcblx0XVxufWAKICAgICk7CiAgfQoKICBhdChpKSB7CiAgICBpZighdGhpc1tpXSkgcmV0dXJuIG51bGw7CiAgICBjb25zdCBbcmFuZ2UsIGJ1ZiwgZmlsZV0gPSB0aGlzW2ldOwogICAgLy9jb25zb2xlLmxvZyhgYXQoJHtpfSlgLCB7IHJhbmdlLCBidWYsIGZpbGUgfSk7CgogICAgaWYodHlwZXMuaXNBcnJheUJ1ZmZlcihidWYpKSByZXR1cm4gYnVmLnNsaWNlKC4uLihyYW5nZSA/PyBbXSkpOwoKICAgIGlmKGJ1ZiA9PSBudWxsICYmIHR5cGVvZiBmaWxlID09ICdzdHJpbmcnKSB7CiAgICAgIGlmKCFwYXRoLmlzRmlsZShmaWxlKSkgdGhyb3cgRXJyb3IoYEZpbGVNYXBceDFiWzE7MzVtPCR7dGhpcy5maWxlfT5ceDFiWzBtIEluZXhpc3RlbnQgZmlsZSAnJHtmaWxlfSdgKTsKICAgICAgcmV0dXJuIEZpbGVNYXAuZm9yKGZpbGUpOwogICAgfQogIH0KCiAgdG9BcnJheSgpIHsKICAgIHJldHVybiB0aGlzLm1hcCgocywgaSkgPT4gewogICAgICBzID0gdGhpcy5hdChpKTsKICAgICAgaWYoaXNPYmplY3QocykgJiYgJ3RvQXJyYXknIGluIHMpIHMgPSBzLnRvQXJyYXkoKTsKICAgICAgcmV0dXJuIHM7CiAgICB9KTsKICB9CgogIGhvbGVzKCkgewogICAgbGV0IHJhbmdlcyA9IFsuLi50aGlzLm1hcCgoW3JhbmdlXSkgPT4gcmFuZ2UpXS5zb3J0KENvbXBhcmVSYW5nZSk7CiAgICBsZXQgaXRlciA9IE51bWVyaWNSYW5nZS5ob2xlcyhyYW5nZXMsIHRydWUpOwogICAgbGV0IGhvbGVzID0gWy4uLml0ZXJdOwogICAgbGV0IGxlbiA9IGhvbGVzLmxlbmd0aDsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBjb25zdCBob2xlID0gaG9sZXNbaV07CiAgICAgIGNvbnN0IFtyYW5nZV0gPSB0aGlzW2ldOwogICAgICBjb25zb2xlLmxvZygnIycgKyAoaSArIDEpLCBjb21wYWN0KDIpLCBpbnNwZWN0KHsgaG9sZSwgcmFuZ2UgfSwgeyBjb21wYWN0OiAyLCBkZXB0aDogSW5maW5pdHkgfSkpOwogICAgfQogICAgcmV0dXJuIGhvbGVzOwogIH0KCiAgZmlyc3RDaHVuaygpIHsKICAgIHJldHVybiB0aGlzLmZpbmRJbmRleCgoW3JhbmdlLCBidWZdLCBpKSA9PiByYW5nZSAmJiBidWYgJiYgIUlzV2hpdGVTcGFjZSh0b1N0cmluZyhidWYuc2xpY2UoLi4ucmFuZ2UpKSkpOwogIH0KCiAgbGFzdENodW5rKCkgewogICAgcmV0dXJuIHRoaXMuZmluZExhc3RJbmRleCgoW3JhbmdlLCBidWZdLCBpKSA9PiByYW5nZSAmJiAhSXNXaGl0ZVNwYWNlKHRvU3RyaW5nKGJ1Zi5zbGljZSguLi5yYW5nZSkpKSk7CiAgfQoKICB3cml0ZShvdXQsIGRlcHRoID0gMCwgc2VyaWFsKSB7CiAgICBpZihkZWJ1ZyA+IDIpIGRlYnVnTG9nKGBGaWxlTWFwXHgxYlsxOzM1bTwke3RoaXMuZmlsZX0+XHgxYlswbS53cml0ZWAsIGNvbXBhY3QoMSksIHsgb3V0LCBkZXB0aCwgc2VyaWFsIH0pOwogICAgbGV0IHIsCiAgICAgIHdyaXR0ZW4gPSAwOwogICAgbGV0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgc2VyaWFsID8/PSByYW5kSW50KDAsIDEwMDApOwogICAgaWYodGhpcy5zZXJpYWwgPT09IHNlcmlhbCkgcmV0dXJuIDA7CiAgICB0aGlzLnNlcmlhbCA9IHNlcmlhbDsKICAgIGlmKHR5cGVvZiBvdXQgPT0gJ3N0cmluZycpIG91dCA9IEZpbGVXcml0ZXIob3V0KTsKICAgIGxldCBmaXJzdCA9IHRoaXMuZmlyc3RDaHVuaygpOwogICAgbGV0IGxhc3QgPSB0aGlzLmxhc3RDaHVuaygpOwoKICAgIGlmKGRlYnVnID4gMikKICAgICAgZGVidWdMb2coYEZpbGVNYXBceDFiWzE7MzVtPCR7dGhpcy5maWxlfT5ceDFiWzBtLndyaXRlYCwgY29tcGFjdCgyKSwgewogICAgICAgIGNodW5rczogW3RoaXMuYXQoZmlyc3QpLCB0aGlzLmF0KGxhc3QpXQogICAgICB9KTsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBsZXQgc3RyID0gdGhpcy5hdChpKTsKICAgICAgaWYoc3RyID09PSBudWxsIHx8IHN0ciA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTsKICAgICAgbGV0IGxlbiA9IHN0ci5ieXRlTGVuZ3RoID8/IHN0ci5sZW5ndGg7CiAgICAgIGlmKGlzT2JqZWN0KHN0cikpIHsKICAgICAgICBpZihzdHIgaW5zdGFuY2VvZiBGaWxlTWFwKSB7CiAgICAgICAgICBpZihzdHIuc2VyaWFsID09PSBzZXJpYWwpIHsKICAgICAgICAgICAgciA9IDA7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgciA9IHN0ci53cml0ZShvdXQsIGRlcHRoICsgMSwgc2VyaWFsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYoZGVwdGggPiAwICYmIGkgPT0gZmlyc3QpIG91dC5wdXRzKEZpbGVCYW5uZXJDb21tZW50KHRoaXMuZmlsZSwgMCkpOwogICAgICAgICAgciA9IG91dC53cml0ZShzdHIsIGxlbik7CiAgICAgICAgICBpZihkZXB0aCA+IDAgJiYgaSA9PSBsYXN0KSBvdXQucHV0cyhGaWxlQmFubmVyQ29tbWVudCh0aGlzLmZpbGUsIDEpKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHR5cGUgPSBnZXRUeXBlTmFtZShzdHIpOwogICAgICAgIGNvbnNvbGUubG9nKCdpbnZhbGlkIHR5cGU6JywgdHlwZSk7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHR5cGUpOwogICAgICB9CiAgICAgIGlmKGRlYnVnID49IDIpIGRlYnVnTG9nKGBGaWxlTWFwXHgxYlsxOzM1bTwke3RoaXMuZmlsZX0+XHgxYlswbS53cml0ZWAsIGBbJHtpICsgMX0vJHtsZW5ndGh9XWAsIGByZXN1bHQ9JHtyfWApOwogICAgICBpZihyIDwgMCkgewogICAgICAgIGxldCBlcnIgPSBlcnJvcigpOwogICAgICAgIHRocm93IG5ldyBFcnJvcignZXJyb3Igd3JpdGluZyAnICsgbGVuICsgJyBieXRlczogJyArIGluc3BlY3QoZXJyKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgd3JpdHRlbiArPSByOwogICAgfQoKICAgIHJldHVybiB3cml0dGVuOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICBjb25zdCBuID0gdGhpcy5sZW5ndGg7CiAgICBsZXQgcyA9ICcnOwogICAgZm9yKGxldCBpID0gMDsgaSA8IG47IGkrKykgcyArPSB0aGlzLnN0cmluZ0F0KGkpOwogICAgcmV0dXJuIHM7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIG9wdHMgPSB7CiAgICAgIC4uLm9wdHMsCiAgICAgIGNvbXBhY3Q6IDIsCiAgICAgIG1heEFycmF5TGVuZ3RoOiBJbmZpbml0eSwKICAgICAgbWF4U3RyaW5nTGVuZ3RoOiA0MCwKICAgICAgc3RyaW5nQnJlYWtOZXdsaW5lOiBmYWxzZSwKICAgICAgY3VzdG9tSW5zcGVjdDogdHJ1ZSwKICAgICAgZGVwdGg6IGRlcHRoICsgNAogICAgfTsKCiAgICBsZXQgYXJyID0gWy4uLnRoaXNdLm1hcCgoaXRlbSwgaSkgPT4gewogICAgICBsZXQgW3JhbmdlLCBidWYsIHJlcGxhY2VtZW50XSA9IGl0ZW07CgogICAgICBjb25zdCBpc0J1ZiA9IGlzT2JqZWN0KGJ1ZikgJiYgdHlwZXMuaXNBcnJheUJ1ZmZlcihidWYpOwogICAgICBjb25zdCBmaWxlbmFtZSA9IGlzQnVmID8gRmlsZU1hcC5maWxlbmFtZXMoYnVmKSA6IHVuZGVmaW5lZDsKCiAgICAgIHJldHVybiBbdHlwZXMuaXNBcnJheUJ1ZmZlcihidWYpID8gcmFuZ2UgOiBudWxsLCBmaWxlbmFtZSA/IGA8QnVmZmVyW1x4MWJbMTszNm0ke2J1Zi5ieXRlTGVuZ3RofVx4MWJbMTswbV0gXHgxYlsxOzMzbScke2ZpbGVuYW1lfSdceDFiWzBtPmAgOiBidWYsIHJlcGxhY2VtZW50XQogICAgICAgIC5zbGljZSgwLCBpdGVtLmxlbmd0aCkKICAgICAgICAubWFwKChwYXJ0LCBpKSA9PgogICAgICAgICAgcGFkU3RhcnRBbnNpKHR5cGVvZiBwYXJ0ID09ICdzdHJpbmcnID8gcGFydCA6IGluc3BlY3QocGFydCwgeyAuLi5vcHRzLCBjb21wYWN0OiAxLCBjdXN0b21JbnNwZWN0OiB0cnVlLCBtYXhBcnJheUxlbmd0aDogMTAgfSkgKyAoaSA8IGl0ZW0ubGVuZ3RoIC0gMSA/ICcsJyA6ICcnKSwgWzIwLCAzNCwgMF1baV0pCiAgICAgICAgKQogICAgICAgIC5qb2luKCcgJyk7CiAgICB9KTsKCiAgICByZXR1cm4gKAogICAgICBgRmlsZU1hcFx4MWJbMTszNW08JHt0aGlzLmZpbGV9Plx4MWJbMG0gYCArIGFyci5tYXAoKGl0ZW0sIGkpID0+IGBbICR7KCcjJyArIGkpLnBhZFN0YXJ0KDMpfSAke2l0ZW19IF1gKS5qb2luKCcsXG4gICcpID8/CiAgICAgIGluc3BlY3QoYXJyLCB7CiAgICAgICAgLi4ub3B0cwogICAgICB9KQogICAgKTsKICB9Cn0KCkZpbGVNYXAucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnRmlsZU1hcCc7CgpmdW5jdGlvbiBCdWZmZXJGaWxlKGZpbGUsIGJ1ZikgewogIGZpbGUgPSBwYXRoLm5vcm1hbGl6ZShmaWxlKTsKICBpZighYnVmKSBidWYgPSBmaWxlQnVmZmVycy5nZXQoZmlsZSkgPz8gYnVmZmVyc1tmaWxlXTsKICBpZighYnVmKSBidWYgPSBidWZmZXJzW2ZpbGVdID8/IGZzLnJlYWRGaWxlU3luYyhmaWxlLCB7IGZsYWc6ICdyJyB9KTsKICBpZih0eXBlb2YgYnVmID09ICdvYmplY3QnICYmIGJ1ZiAhPT0gbnVsbCkgewogICAgYnVmZmVyUmVmLnNldChidWYsIGZpbGUpOwogICAgZmlsZUJ1ZmZlcnMuc2V0KGZpbGUsIGJ1Zik7CiAgICBidWYuZmlsZSA9IGZpbGU7CiAgfQogIHJldHVybiBidWY7Cn0KCmZ1bmN0aW9uIEJ1ZmZlckxlbmd0aHMoZmlsZSkgewogIHJldHVybiBidWZmZXJzW2ZpbGVdLm1hcChiID0+IGIuYnl0ZUxlbmd0aCk7Cn0KCmZ1bmN0aW9uIEJ1ZmZlck9mZnNldHMoZmlsZSkgewogIHJldHVybiBidWZmZXJzW2ZpbGVdLnJlZHVjZSgoW3BvcywgbGlzdF0sIGIpID0+IFtwb3MgKyBiLmJ5dGVMZW5ndGgsIGxpc3QuY29uY2F0KFtwb3NdKV0sIFswLCBbXV0pWzFdOwp9CgpmdW5jdGlvbiBCdWZmZXJSYW5nZXMoZmlsZSkgewogIHJldHVybiBidWZmZXJzW2ZpbGVdLnJlZHVjZSgoW3BvcywgbGlzdF0sIGIpID0+IFtwb3MgKyBiLmJ5dGVMZW5ndGgsIGxpc3QuY29uY2F0KFtbcG9zLCBiLmJ5dGVMZW5ndGhdXSldLCBbMCwgW11dKVsxXTsKfQoKZnVuY3Rpb24gV3JpdGVGaWxlKG5hbWUsIGRhdGEsIG9wdHMgPSB7fSkgewogIGNvbnN0IHsgbW9kZSA9IDBvNjQ0LCB2ZXJib3NlID0gdHJ1ZSB9ID0gb3B0czsKCiAgaWYodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycpIGRhdGEgPSB0b0FycmF5QnVmZmVyKGRhdGEpOwoKICBpZih0eXBlcy5pc0FycmF5QnVmZmVyKGRhdGEpKSBkYXRhID0gW2RhdGFdOwoKICBsZXQgZmQgPSBmcy5vcGVuU3luYyhuYW1lLCBvcy5PX1dST05MWSB8IG9zLk9fVFJVTkMgfCBvcy5PX0NSRUFULCBtb2RlKTsKICBsZXQgciA9IDA7CiAgZm9yKGxldCBpdGVtIG9mIGRhdGEpIHsKICAgIHIgKz0gZnMud3JpdGVTeW5jKGZkLCB0b0FycmF5QnVmZmVyKGl0ZW0gKyAnJykpOwogIH0KICBmcy5jbG9zZVN5bmMoZmQpOwogIGxldCBzdGF0ID0gZnMuc3RhdFN5bmMobmFtZSk7CiAgaWYodmVyYm9zZSkgZGVidWcoYFdyb3RlICR7bmFtZX06ICR7c3RhdD8uc2l6ZX0gYnl0ZXNgKTsKICByZXR1cm4gc3RhdD8uc2l6ZTsKfQoKZnVuY3Rpb24gRHVtcExleGVyKGxleCkgewogIGNvbnN0IHsgc2l6ZSwgcG9zLCBzdGFydCwgbGluZSwgY29sdW1uLCBsaW5lU3RhcnQsIGxpbmVFbmQsIGNvbHVtbkluZGV4IH0gPSBsZXg7CiAgcmV0dXJuICdMZXhlciAnICsgaW5zcGVjdCh7IHN0YXJ0LCBwb3MsIHNpemUgfSk7Cn0KCmZ1bmN0aW9uIER1bXBUb2tlbih0b2spIHsKICBjb25zdCB7IGxlbmd0aCwgb2Zmc2V0LCBjaGFycywgbG9jIH0gPSB0b2s7CiAgcmV0dXJuIGDimIUgVG9rZW4gJHtpbnNwZWN0KHsgY2hhcnMsIG9mZnNldCwgbGVuZ3RoLCBsb2MgfSwgeyBkZXB0aDogMSB9KX1gOwp9CgpmdW5jdGlvbiogRGVwZW5kZW5jeVRyZWUocm9vdCwgaW5kZW50ID0gJyAnLCBzcGFjaW5nID0gZmFsc2UsIGRlcHRoID0gMCwgcHJlID0gJycsIGZuID0gKG5hbWUsIGRlcHRoKSA9PiBgJHtuYW1lfSAoJHtkZXB0aH0pYCkgewogIGlmKCFBcnJheS5pc0FycmF5KGRlcGVuZGVuY3lUcmVlKHJvb3QpKSkgdGhyb3cgbmV3IEVycm9yKGBObyBzdWNoIGZpbGUgJyR7cm9vdH0nIGluIGRlcGVuZGVuY3kgTWFwIChbJHtbLi4uZGVwZW5kZW5jeU1hcC5rZXlzKCldfV0pYCk7CgogIGlmKGRlcHRoID09IDApIHlpZWxkIHByZSArIHN0cmlwTGVhZGluZ0RvdFNsYXNoKGZuKHJvb3QsIGRlcHRoKSkgKyBgXG5gOwoKICBsZXQgYSA9IGRlcGVuZGVuY3lNYXAuZ2V0KHJvb3QpOwogIGxldCBpID0gMCwKICAgIG4gPSBhLmxlbmd0aDsKCiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBpZihzcGFjaW5nKSB5aWVsZCAocHJlICsgaW5kZW50ICsgYOKUgiAgYCArICdcbicpLnJlcGVhdChOdW1iZXIoc3BhY2luZykpOwoKICAgIHlpZWxkIHByZSArIGluZGVudCArIChuID09IDEgPyBg4pSU4pSAIGAgOiBpIDwgbiAtIDEgPyBg4pSc4pSAIGAgOiBg4pSU4pSAIGApICsgc3RyaXBMZWFkaW5nRG90U2xhc2goZm4oYVtpXSwgZGVwdGggKyAxKSkgKyAnXG4nOwoKICAgIHlpZWxkKiBEZXBlbmRlbmN5VHJlZShhW2ldLCBpbmRlbnQsIHNwYWNpbmcsIGRlcHRoICsgMSwgcHJlICsgaW5kZW50ICsgKG4gPT0gMSA/IGAgICBgIDogaSA8IG4gLSAxID8gYOKUgiAgYCA6IGAgICBgKSk7CiAgfQoKICBmdW5jdGlvbiBzdHJpcExlYWRpbmdEb3RTbGFzaChuKSB7CiAgICBpZihuLnN0YXJ0c1dpdGgoJy4vJykpIG4gPSBuLnNsaWNlKDIpOwogICAgcmV0dXJuIG47CiAgfQp9CgpmdW5jdGlvbiBTcHJlYWRBbmRKb2luKGl0ZXJhdG9yLCBzZXBhcmF0b3IgPSAnJykgewogIHJldHVybiBbLi4uaXRlcmF0b3JdLmpvaW4oc2VwYXJhdG9yKTsKfQoKZnVuY3Rpb24qIFByaW50VXNlcnNjcmlwdEJhbm5lcihmaWVsZHMpIHsKICBjb25zdCBkZWZhdWx0cyA9IHsKICAgIG5hbWU6ICdodHRwczovL2dpdGh1Yi5jb20vcnNlbm4nLAogICAgbmFtZXNwYWNlOiAnaHR0cHM6Ly9naXRodWIuY29tL3JzZW5uJywKICAgIHZlcnNpb246ICcxLjAnLAogICAgZGVzY3JpcHRpb246ICcnLAogICAgYXV0aG9yOiAnUm9tYW4gTC4gU2VubicsCiAgICBtYXRjaDogJ2h0dHAqOi8vKi8qJywKICAgIGljb246ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PScsCiAgICBncmFudDogJ25vbmUnCiAgfTsKCiAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhkZWZhdWx0cykuY29uY2F0KE9iamVjdC5rZXlzKGZpZWxkcykpLnVuaXF1ZSgpOwogIHlpZWxkIGAvLyA9PVVzZXJTY3JpcHQ9PWA7CiAgZm9yKGxldCBuYW1lIG9mIGtleXMpIHsKICAgIGNvbnN0IHZhbHVlID0gZmllbGRzW25hbWVdID8/IGRlZmF1bHRzW25hbWVdOwoKICAgIHlpZWxkIGAvLyBAJHtuYW1lLnBhZEVuZCgxMil9ICR7dmFsdWV9YDsKICB9CgogIHlpZWxkIGAvLyA9PS9Vc2VyU2NyaXB0PT1gOwp9CgpmdW5jdGlvbiBQcmludEVTNkltcG9ydChpbXApIHsKICByZXR1cm4gewogICAgW0ltcG9ydFR5cGVzLklNUE9SVF9OQU1FU1BBQ0VdOiAoeyBsb2NhbCwgZmlsZSB9KSA9PiBgaW1wb3J0ICogYXMgJHtsb2NhbH0gZnJvbSAnJHtmaWxlfSc7YCwKICAgIFtJbXBvcnRUeXBlcy5JTVBPUlRfREVGQVVMVF06ICh7IGxvY2FsLCBmaWxlIH0pID0+IGBpbXBvcnQgJHtsb2NhbH0gZnJvbSAnJHtmaWxlfSc7YCwKICAgIFtJbXBvcnRUeXBlcy5JTVBPUlRdOiAoeyBsb2NhbCwgZmlsZSB9KSA9PiBgaW1wb3J0IHsgJHtsb2NhbC5qb2luKCcsICcpfSB9IGZyb20gJyR7ZmlsZX0nO2AKICB9W2ltcC50eXBlXShpbXApOwp9CgpmdW5jdGlvbiBQcmludENKU0ltcG9ydCh7IHR5cGUsIGxvY2FsLCBmaWxlIH0pIHsKICByZXR1cm4gewogICAgW0ltcG9ydFR5cGVzLklNUE9SVF9OQU1FU1BBQ0VdOiAoKSA9PiBgY29uc3QgJHtsb2NhbH0gPSByZXF1aXJlKCcke2ZpbGV9Jyk7YCwKICAgIFtJbXBvcnRUeXBlcy5JTVBPUlRfREVGQVVMVF06ICgpID0+IGBjb25zdCAke2xvY2FsfSA9IHJlcXVpcmUoJyR7ZmlsZX0nKTtgLAogICAgW0ltcG9ydFR5cGVzLklNUE9SVF06ICgpID0+IGBjb25zdCB7ICR7bG9jYWwuam9pbignLCAnKX0gfSA9IHJlcXVpcmUoJyR7ZmlsZX0nKTtgCiAgfVt0eXBlXSgpOwp9CgpmdW5jdGlvbiBtYWluKC4uLmFyZ3MpIHsKICBPYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsKICAgIElzS2V5d29yZCwKICAgIElzUHVuY3R1YXRvciwKICAgIE5vbldTLAogICAgTGVhZGluZ1dTLAogICAgSW1wb3J0SWRzLAogICAgSW1wb3J0SWRNYXAsCiAgICBGaWxlTWFwLAogICAgTnVtZXJpY1JhbmdlLAogICAgQXJyYXlXcml0ZXIsCiAgICBEdW1teVdyaXRlciwKICAgIEZkV3JpdGVyLAogICAgRmlsZVdyaXRlciwKICAgIE91dHB1dEltcG9ydHMsCiAgICBSZXNvbHZlQWxpYXMKICB9KTsKCiAgZ2xvYmFsVGhpcy5jb25zb2xlID0gbmV3IENvbnNvbGUoc3RkLmVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBkZXB0aDogSW5maW5pdHksCiAgICAgIHN0cmluZ0JyZWFrTmV3bGluZTogdHJ1ZSwKICAgICAgbWF4U3RyaW5nTGVuZ3RoOiAxMDAwLAogICAgICBtYXhBcnJheUxlbmd0aDogMTAwLAogICAgICBjb21wYWN0OiAxLAogICAgICBoaWRlS2V5czogW1N5bWJvbC50b1N0cmluZ1RhZyAvKiwgJ2NvZGUnKi9dCiAgICB9CiAgfSk7CgogIGxldCBvcHRpbmQgPSAwLAogICAgY29kZSA9ICdjJywKICAgIGV4cCA9IHRydWU7CgogIGxldCBvdXQgPSBGZFdyaXRlcigxLCAnc3Rkb3V0Jyk7CiAgbGV0IHN0cmVhbSA9IGRlZmluZSgKICAgIHsgaW5kZW50OiAwIH0sCiAgICB7CiAgICAgIGxpbmVzOiBbXSwKICAgICAgd3JpdGUoYnVmLCBsZW4pIHsKICAgICAgICBsZXQgcyA9IHRvU3RyaW5nKGJ1ZiwgMCwgbGVuKTsKICAgICAgICByZXR1cm4gdGhpcy5wdXRzKHMpOwogICAgICB9LAogICAgICBwdXRzKHMpIHsKICAgICAgICBsZXQgcGFkID0gJyAgJy5yZXBlYXQodGhpcy5pbmRlbnQpOwogICAgICAgIHRoaXMubGluZXMucHVzaCguLi5zLnNwbGl0KC9ccj9cbi9nKS5tYXAobGluZSA9PiBwYWQgKyBsaW5lKSk7CiAgICAgICAgcmV0dXJuIHMubGVuZ3RoOwogICAgICB9LAogICAgICBjbG9zZSgpIHsKICAgICAgICBsZXQgcHJldiA9ICcnOwogICAgICAgIGNvbnN0IGlzV1MgPSBzID0+IHMudHJpbSgpID09ICcnOwogICAgICAgIGZvcihsZXQgbGluZSBvZiB0aGlzLmxpbmVzKSB7CiAgICAgICAgICBpZighKGlzV1MobGluZSkgJiYgaXNXUyhwcmV2KSkpIHsKICAgICAgICAgICAgb3V0LnB1dHMobGluZS50cmltRW5kKCkgKyAnXG4nKTsKICAgICAgICAgIH0KICAgICAgICAgIHByZXYgPSBsaW5lOwogICAgICAgIH0KICAgICAgICBvdXQuY2xvc2UoKTsKICAgICAgfQogICAgfQogICk7CgogIGxldCBvcHRzOwogIGxldCBwYXJhbXMgPSBnZXRPcHQoCiAgICAob3B0cyA9IHsKICAgICAgaGVscDogW2ZhbHNlLCBudWxsLCAnaCddLAogICAgICBkZWJ1ZzogW2ZhbHNlLCAoKSA9PiArK2RlYnVnLCAneCddLAogICAgICBpbnRlcmFjdGl2ZTogW2ZhbHNlLCBudWxsLCAneSddLAogICAgICBsb2c6IFt0cnVlLCBmaWxlID0+IChsb2dGaWxlID0gRmlsZVdyaXRlcihmaWxlKSksICd2J10sCiAgICAgIHNvcnQ6IFtmYWxzZSwgbnVsbCwgJ3MnXSwKICAgICAgJ2Nhc2Utc2Vuc2l0aXZlJzogW2ZhbHNlLCBudWxsLCAnYyddLAogICAgICBxdWlldDogW2ZhbHNlLCAocXVpZXQgPSAocXVpZXQgfCAwKSArIDEpLCAncSddLAogICAgICBleHBvcnQ6IFtmYWxzZSwgKCkgPT4gKGV4cCA9IHRydWUpLCAnZSddLAogICAgICBpbXBvcnRzOiBbZmFsc2UsICgpID0+IChvbmx5SW1wb3J0cyA9IHRydWUpLCAnaSddLAogICAgICAncmVsYXRpdmUtdG8nOiBbdHJ1ZSwgYXJnID0+IChyZWxhdGl2ZVRvID0gcGF0aC5hYnNvbHV0ZShhcmcpKSwgJ1InXSwKICAgICAgb3V0cHV0OiBbdHJ1ZSwgZmlsZSA9PiAob3V0cHV0RmlsZSA9IGZpbGUpLCAnbyddLAogICAgICByZWN1cnNpdmU6IFtmYWxzZSwgKCkgPT4gKHJlY3Vyc2l2ZSA9IHRydWUpLCAnciddLAogICAgICAnbm8tcmVjdXJzaXZlJzogW2ZhbHNlLCAoKSA9PiAocmVjdXJzaXZlID0gZmFsc2UpLCAnUiddLAogICAgICAncmVtb3ZlLWV4cG9ydHMnOiBbZmFsc2UsICgpID0+IChyZW1vdmVFeHBvcnRzID0gdHJ1ZSksICdFJ10sCiAgICAgICdyZW1vdmUtaW1wb3J0cyc6IFtmYWxzZSwgKCkgPT4gKHJlbW92ZUltcG9ydHMgPSB0cnVlKSwgJ0knXSwKICAgICAgJ2NoZWNrLWltcG9ydHMnOiBbZmFsc2UsICgpID0+IChzY3JpcHRBcmdzWzBdID0gJ2NoZWNrLWltcG9ydHMnKSwgbnVsbF0sCiAgICAgICdsaXN0LWltcG9ydHMnOiBbZmFsc2UsICgpID0+IChzY3JpcHRBcmdzWzBdID0gJ2xpc3QtaW1wb3J0cycpLCBudWxsXSwKICAgICAgJ3JlbW92ZS1jb21tZW50cyc6IFtmYWxzZSwgKCkgPT4gKHJlbW92ZUNvbW1lbnRzID0gdHJ1ZSksICdDJ10sCiAgICAgICdnbG9iYWwtZXhwb3J0cyc6IFtmYWxzZSwgKCkgPT4gKytnbG9iYWxFeHBvcnRzLCAnRyddLAogICAgICAnc2hvdy1kZXBlbmRlbmNpZXMnOiBbZmFsc2UsICgpID0+ICsrc2hvd0RlcHMsICdkJ10sCiAgICAgICdwcmludC1maWxlcyc6IFtmYWxzZSwgKCkgPT4gKHByaW50RmlsZXMgPSB0cnVlKSwgJ2wnXSwKICAgICAgJ25vLXByaW50LWZpbGVzJzogW2ZhbHNlLCAoKSA9PiAocHJpbnRGaWxlcyA9IGZhbHNlKSwgJ0wnXSwKICAgICAgJ3JlYWQtcGFja2FnZSc6IFtmYWxzZSwgKCkgPT4gKHJlYWRQYWNrYWdlID0gdHJ1ZSksICdwJ10sCiAgICAgICduby1yZWFkLXBhY2thZ2UnOiBbZmFsc2UsICgpID0+IChyZWFkUGFja2FnZSA9IGZhbHNlKSwgJ1AnXSwKICAgICAgdXNlcnNjcmlwdDogW2ZhbHNlLCAoKSA9PiAodXNlclNjcmlwdCA9IHRydWUpLCAnVSddLAogICAgICB0aW1lOiBbZmFsc2UsICgpID0+IChzaG93VGltaW5nID0gdHJ1ZSksICd0J10sCiAgICAgICdAJzogJ2ZpbGVzJwogICAgfSksCiAgICBhcmdzCiAgKTsKCiAgZnVuY3Rpb24gU2hvd0hlbHAoKSB7CiAgICBsZXQgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKG9wdHMpOwogICAgbGV0IG1heGxlbiA9IGVudHJpZXMucmVkdWNlKChhY2MsIFtuYW1lXSkgPT4gKGFjYyA+IG5hbWUubGVuZ3RoID8gYWNjIDogbmFtZS5sZW5ndGgpLCAwKTsKCiAgICBsZXQgcyA9IE9iamVjdC5lbnRyaWVzKG9wdHMpLnJlZHVjZSgKICAgICAgKGFjYywgW25hbWUsIFtoYXNBcmcsIGZuLCBzaG9ydE9wdF1dKSA9PgogICAgICAgIGFjYyArIChgICAgICR7KHNob3J0T3B0ID8gJy0nICsgc2hvcnRPcHQgKyAnLCcgOiAnJykucGFkU3RhcnQoNCwgJyAnKX0gLS0ke25hbWUucGFkRW5kKG1heGxlbiwgJyAnKX0gYCArIChoYXNBcmcgPyAodHlwZW9mIGhhc0FyZyA9PSAnYm9vbGVhbicgPyAnQVJHJyA6IGhhc0FyZykgOiAnJykpLnBhZEVuZCg0MCwgJyAnKSArICdcbicsCiAgICAgIGBVc2FnZTogJHtwYXRoLmJhc2VuYW1lKHNjcmlwdEFyZ3NbMF0pfSBbT1BUSU9OU10gPEZJTEVTLi4uPlxuXG5gCiAgICApOwogICAgc3RkLnB1dHMocyArICdcbicpOwogICAgc3RkLmV4aXQoMCk7CiAgfQoKICBpZihwYXJhbXMuaGVscCkgU2hvd0hlbHAoKTsKCiAgbGV0IGZpbGVzID0gcGFyYW1zWydAJ107CgogIGlmKC9jaGVjay1pbXBvcnQvLnRlc3Qoc2NyaXB0QXJnc1swXSkpIHsKICAgIGlkZW50aWZpZXJzVXNlZCA9IG1lbW9pemUoYXJnID0+IG5ldyBTZXQoKSk7CiAgICBpZihwcmludEZpbGVzID09PSB1bmRlZmluZWQpIHByaW50RmlsZXMgPSBmYWxzZTsKICAgIG9ubHlJbXBvcnRzID0gZmFsc2U7CiAgICBvdXRwdXRGaWxlID0gbnVsbDsKICAgIG91dCA9IER1bW15V3JpdGVyKCcvZGV2L251bGwnKTsKICB9IGVsc2UgaWYoL2xpc3QtaW1wb3J0Ly50ZXN0KHNjcmlwdEFyZ3NbMF0pKSB7CiAgICBpZihwcmludEZpbGVzID09PSB1bmRlZmluZWQpIHByaW50RmlsZXMgPSB0cnVlOwogICAgcXVpZXQgPSB0cnVlOwogICAgb25seUltcG9ydHMgPSB0cnVlOwogICAgb3V0cHV0RmlsZSA9IG51bGw7CiAgICBvdXQgPSBEdW1teVdyaXRlcignL2Rldi9udWxsJyk7CiAgfSBlbHNlIHsKICAgIGlmKHR5cGVvZiByZWN1cnNpdmUgPT0gJ3VuZGVmaW5lZCcpIHJlY3Vyc2l2ZSA9IHRydWU7CiAgfQoKICBpZih0eXBlb2YgcmVjdXJzaXZlID09ICd1bmRlZmluZWQnKSByZWN1cnNpdmUgPSBmYWxzZTsKCiAgY29uc3QgeyBzb3J0LCAnY2FzZS1zZW5zaXRpdmUnOiBjYXNlU2Vuc2l0aXZlIH0gPSBwYXJhbXM7CgogIGlmKG91dHB1dEZpbGUpIG91dCA9IEZpbGVXcml0ZXIob3V0cHV0RmlsZSk7CiAgZ2xvYmFsVGhpcy5vdXQgPSBvdXQ7CgogIGxldCBhcmdMaXN0ID0gWy4uLnNjcmlwdEFyZ3NdOwogIGxvZyA9IHF1aWV0ID8gKCkgPT4ge30gOiAoLi4uYXJncykgPT4gY29uc29sZS5sb2coYCR7ZmlsZX06YCwgLi4uYXJncyk7CgogIGxvZ0ZpbGUoYFN0YXJ0IG9mOiAke2FyZ0xpc3Quam9pbignICcpfVxuYCk7CgogIGNvbnN0IFJlbGF0aXZlUGF0aCA9IGZpbGUgPT4gKHBhdGguaXNBYnNvbHV0ZShmaWxlKSA/IGZpbGUgOiBmaWxlLnN0YXJ0c1dpdGgoJy4vJykgPyBmaWxlIDogJy4vJyArIGZpbGUpOwoKICBpZighZmlsZXMubGVuZ3RoKSB0aHJvdyBuZXcgQXJndW1lbnRFcnJvcignRXhwZWN0aW5nIGFyZ3VtZW50IDxmaWxlcy4uLj4nKTsKCiAgbGV0IHJlc3VsdHMgPSAoZ2xvYmFsVGhpcy5yZXN1bHRzID0gW10pOwoKICBmb3IobGV0IGZpbGUgb2YgZmlsZXMpIHsKICAgIGZpbGUgPSBSZWxhdGl2ZVBhdGgoZmlsZSk7CgogICAgbGV0IHJlc3VsdCA9IFByb2Nlc3NGaWxlKGZpbGUsIGxvZywgcmVjdXJzaXZlLCAwKTsKCiAgICBpZihkZWJ1ZyA+IDEpIGNvbnNvbGUubG9nKCdyZXN1bHQnLCBjb21wYWN0KGZhbHNlLCB7IGRlcHRoOiBJbmZpbml0eSB9KSwgcmVzdWx0KTsKCiAgICByZXN1bHRzLnB1c2gocmVzdWx0KTsKICB9CgogIC8qY29uc29sZS5sb2coJ2hlYWRlcicsIGNvbnNvbGUuY29uZmlnKHsgY29tcGFjdDogMiB9KSwgaGVhZGVyKTsKICBjb25zb2xlLmxvZygnZ2xvYmFsSW1wb3J0cycsIGNvbnNvbGUuY29uZmlnKHsgY29tcGFjdDogMSB9KSwgZ2xvYmFsSW1wb3J0cyk7Ki8KCiAgZm9yKGxldCBpbXAgb2YgYWxsSW1wb3J0cygpKSB7CiAgICBsZXQgeyBmaWxlLCBzb3VyY2UsIHRva2VucyB9ID0gaW1wOwogICAgbGV0IGlkbWFwID0gaW1wLmlkbWFwKCk7CiAgICAvL2NvbnNvbGUubG9nKCdpbXAnLCB7IGZpbGUsIHNvdXJjZSwgaWRtYXAgfSk7CiAgICBpZihJc0ZpbGVJbXBvcnQoZmlsZSkpIGNvbnRpbnVlOwogICAgbGV0IG1hcCA9IChnbG9iYWxJbXBvcnRzW1Jlc29sdmVBbGlhcyhmaWxlKV0gPz89IHt9KTsKICAgIGlmKGRlYnVnID4gMSkgY29uc29sZS5sb2coJ1x4MWJbMzg7NTszM21JRE1BUFx4MWJbMG0nLCBpZG1hcCk7CiAgICBpZihpZG1hcCkgZm9yKGxldCBbbG9jYWwsIG5hbWVdIG9mIGlkbWFwKSBtYXBbbG9jYWxdID0gbmFtZTsKICB9CgogIGxldCBzdHIgPSBPdXRwdXRJbXBvcnRzKGdsb2JhbEltcG9ydHMpOwoKICByZXN1bHRzWzBdLmluc2VydCgxLCB0b0FycmF5QnVmZmVyKHN0cikpOwoKICBpZighcmVtb3ZlSW1wb3J0cykgewogICAgbGV0IGJpbmRpbmdzID0gW10sCiAgICAgIGltcG9ydExpbmVzID0gW107CiAgICBjb25zdCBDb250YWluc0FueSA9IChhcnIsIHRva2VucykgPT4gdG9rZW5zLnNvbWUodG9rID0+IGFyci5pbmRleE9mKHRvaykgIT0gLTEpOwogICAgbGV0IGxpbmVzID0gaGVhZGVyCiAgICAgIC5maWx0ZXIoaW1wZXhwID0+IElzQnVpbHRpbihpbXBleHAuZmlsZSkpCiAgICAgIC5maWx0ZXIoaGRyID0+ICFoZHIuY29kZS5zdGFydHNXaXRoKCdleHBvcnQnKSkKICAgICAgLnJlZHVjZSgKICAgICAgICAoW2FjYywgcHJldl0sIGhkcikgPT4gewogICAgICAgICAgbGV0IHsgY29kZSB9ID0gaGRyOwogICAgICAgICAgbGV0IGRpc2FibGUgPSBDb250YWluc0FueShiaW5kaW5ncywgaGRyLmlkcygpKTsKICAgICAgICAgIGlmKHByZXYgIT0gaGRyLnNvdXJjZSkgewogICAgICAgICAgICBhY2MucHVzaCgnJyk7CiAgICAgICAgICAgIGFjYy5wdXNoKGBgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgZHVwbGljYXRlID0gaW1wb3J0TGluZXMuaW5kZXhPZihjb2RlKSAhPSAtMTsKICAgICAgICAgIGltcG9ydExpbmVzLnB1c2goY29kZSk7CiAgICAgICAgICBpZighZHVwbGljYXRlICYmIGRpc2FibGUpIGNvZGUgPSAnJzsKICAgICAgICAgIGlmKCFkdXBsaWNhdGUpIHsKICAgICAgICAgICAgYmluZGluZ3MucHVzaCguLi5oZHIuaWRzKCkpOwogICAgICAgICAgICBhY2MucHVzaChjb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gW2FjYywgaGRyLnNvdXJjZV07CiAgICAgICAgfSwKICAgICAgICBbW10sIG51bGxdCiAgICAgIClbMF07CiAgICAvL2lmKGxpbmVzLmxlbmd0aCkgbGluZXMgPSBbRmlsZUJhbm5lckNvbW1lbnQoJ2hlYWRlcicsIDApLCAuLi5saW5lcywgJycsIEZpbGVCYW5uZXJDb21tZW50KCdoZWFkZXInLCAxKV07CiAgICBpZihkZWJ1ZyA+IDIpIGNvbnNvbGUubG9nKCdsaW5lcycsIGxpbmVzKTsKCiAgICBvdXQucHV0cyhsaW5lcy5yZWR1Y2UoKGFjYywgbGluZSkgPT4gYWNjICsgbGluZS50cmltKCkgKyAnXG4nLCAnJykpOwogIH0KCiAgaWYodXNlclNjcmlwdCkgewogICAgZm9yKGxldCBsaW5lIG9mIFByaW50VXNlcnNjcmlwdEJhbm5lcih7CiAgICAgIG5hbWU6IG91dC5maWxlLAogICAgICAncnVuLWF0JzogJ2RvY3VtZW50LXN0YXJ0JywKICAgICAgdmVyc2lvbjogJzEuMCcsCiAgICAgIGRlc2NyaXB0aW9uOiBmaWxlcy5qb2luKCcsICcpLAogICAgICBkb3dubG9hZFVSTDogYGh0dHBzOi8vbG9jYWxob3N0OjkwMDAvJHtvdXQuZmlsZX1gLAogICAgICB1cGRhdGVVUkw6IGBodHRwczovL2xvY2FsaG9zdDo5MDAwLyR7b3V0LmZpbGV9YAogICAgfSkpCiAgICAgIHN0cmVhbS5wdXRzKGxpbmUpOwoKICAgIHN0cmVhbS5wdXRzKCJcbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuIik7CiAgICArK3N0cmVhbS5pbmRlbnQ7CiAgfQoKICBpZihkZWJ1ZyA+IDEpIGNvbnNvbGUubG9nKCdvdXQnLCBvdXQsIG91dC5maWxlKTsKCiAgaWYob3V0LmZpbGUpIHsKICAgIGNvbnNvbGUubG9nKCdyZXN1bHRzWzBdJywgcmVzdWx0c1swXSk7CiAgICBsZXQgbmJ5dGVzOwogICAgdHJ5IHsKICAgICAgbmJ5dGVzID0gcmVzdWx0c1swXS53cml0ZShzdHJlYW0pOwogICAgfSBjYXRjaChlcnJvcikgewogICAgICBjb25zb2xlLmxvZyhgd3JpdGUgZXJyb3IgKCcke291dC5maWxlfScpOmAsIGVycm9yKTsKICAgICAgc3RkLmV4aXQoMSk7CiAgICB9CgogICAgaWYoZGVidWcgPj0gMSkgY29uc29sZS5sb2coYCR7bmJ5dGVzfSBieXRlcyB3cml0dGVuIHRvICcke291dC5maWxlfSdgKTsKICB9CgogIGlmKGdsb2JhbEV4cG9ydHMpIHsKICAgIGxldCBtYXhEZXB0aCA9IGdsb2JhbEV4cG9ydHMgLSAxOwogICAgbGV0IGV4cG9ydGVkTmFtZXMgPSBmb290ZXIuZmlsdGVyKCh7IGRlcHRoIH0pID0+IGRlcHRoIDw9IG1heERlcHRoKTsKICAgIC8vIGNvbnNvbGUubG9nKGBmb290ZXJgLCBleHBvcnRlZE5hbWVzLm1hcChpbXBleHAgPT4gIFtpbXBleHAuZGVwdGgsaW1wZXhwLm5hbWVdKSk7CgogICAgaWYoZGVidWcgPiAzKSBjb25zb2xlLmxvZyhgZXhwb3J0ZWROYW1lc2AsIGV4cG9ydGVkTmFtZXMpOwoKICAgIGV4cG9ydGVkTmFtZXMgPSBleHBvcnRlZE5hbWVzCiAgICAgIC5tYXAoKHsgbmFtZSB9KSA9PiBuYW1lKQogICAgICAudW5pcXVlKCkKICAgICAgLmZpbHRlcihuYW1lID0+IHR5cGVvZiBuYW1lID09ICdzdHJpbmcnKTsKCiAgICBzdHJlYW0ucHV0cyhgXG5PYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsgJHtleHBvcnRlZE5hbWVzLmpvaW4oJywgJyl9IH0pO1xuYCk7CiAgfQoKICBpZih1c2VyU2NyaXB0KSB7CiAgICAtLXN0cmVhbS5pbmRlbnQ7CiAgICBzdHJlYW0ucHV0cygnfSkoKTtcbicpOwogIH0KCiAgc3RyZWFtLmNsb3NlKCk7CgogIGlmKHBhcmFtcy5pbnRlcmFjdGl2ZSkgb3Mua2lsbChwcm9jZXNzLnBpZCwgb3MuU0lHVVNSMSk7CgogIGxvZ0ZpbGUoYFByb2Nlc3NlZCBmaWxlczogJHtTcHJlYWRBbmRKb2luKGRlcGVuZGVuY3lNYXAua2V5cygpLCAnICcpfVxuYCk7Cn0KCnRyeSB7CiAgbWFpbiguLi5zY3JpcHRBcmdzLnNsaWNlKDEpKTsKfSBjYXRjaChlcnJvcikgewogIGNvbnNvbGUubG9nKGAke2Vycm9yLmNvbnN0cnVjdG9yLm5hbWV9OiAke2Vycm9yLm1lc3NhZ2V9JHtlcnJvci5zdGFjayA/ICdcbicgKyBlcnJvci5zdGFjayA6ICcnfWApOwogIHN0ZC5leGl0KDEpOwp9CgAAAAAAAAAApNoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAxoAAAAAAAADGgAAAAAAAAAAAAAAgH1A"
				],
				[
					222,
					1,
					"insert",
					{
						"characters": "\nconsole.log"
					},
					"DQAAAGyrAAAAAAAAbasAAAAAAAAAAAAAbasAAAAAAABvqwAAAAAAAAAAAABvqwAAAAAAAHCrAAAAAAAAAAAAAHCrAAAAAAAAcasAAAAAAAAAAAAAcasAAAAAAAByqwAAAAAAAAAAAAByqwAAAAAAAHOrAAAAAAAAAAAAAHOrAAAAAAAAdKsAAAAAAAAAAAAAdKsAAAAAAAB1qwAAAAAAAAAAAAB1qwAAAAAAAHarAAAAAAAAAAAAAHarAAAAAAAAd6sAAAAAAAAAAAAAd6sAAAAAAAB4qwAAAAAAAAAAAAB4qwAAAAAAAHmrAAAAAAAAAAAAAHmrAAAAAAAAeqsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbKsAAAAAAABsqwAAAAAAAAAAAAAAAPC/"
				],
				[
					223,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAHqrAAAAAAAAfKsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeqsAAAAAAAB6qwAAAAAAAAAAAAAAAPC/"
				],
				[
					224,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAHurAAAAAAAAfasAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAe6sAAAAAAAB7qwAAAAAAAAAAAAAAAPC/"
				],
				[
					225,
					1,
					"insert",
					{
						"characters": "file"
					},
					"BAAAAHyrAAAAAAAAfasAAAAAAAAAAAAAfasAAAAAAAB+qwAAAAAAAAAAAAB+qwAAAAAAAH+rAAAAAAAAAAAAAH+rAAAAAAAAgKsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfKsAAAAAAAB8qwAAAAAAAAAAAAAAAPC/"
				],
				[
					226,
					4,
					"left_delete",
					null,
					"BAAAAH+rAAAAAAAAf6sAAAAAAAABAAAAZX6rAAAAAAAAfqsAAAAAAAABAAAAbH2rAAAAAAAAfasAAAAAAAABAAAAaXyrAAAAAAAAfKsAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAAgKsAAAAAAACAqwAAAAAAAAAAAAAAAPC/"
				],
				[
					227,
					1,
					"insert",
					{
						"characters": "BufferFile"
					},
					"CgAAAHyrAAAAAAAAfasAAAAAAAAAAAAAfasAAAAAAAB+qwAAAAAAAAAAAAB+qwAAAAAAAH+rAAAAAAAAAAAAAH+rAAAAAAAAgKsAAAAAAAAAAAAAgKsAAAAAAACBqwAAAAAAAAAAAACBqwAAAAAAAIKrAAAAAAAAAAAAAIKrAAAAAAAAg6sAAAAAAAAAAAAAg6sAAAAAAACEqwAAAAAAAAAAAACEqwAAAAAAAIWrAAAAAAAAAAAAAIWrAAAAAAAAhqsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfKsAAAAAAAB8qwAAAAAAAAAAAAAAAPC/"
				],
				[
					229,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAIerAAAAAAAAiKsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAh6sAAAAAAACHqwAAAAAAAAAAAAAAAPC/"
				],
				[
					230,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAIirAAAAAAAAiqsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiKsAAAAAAACIqwAAAAAAAAAAAAAAAPC/"
				],
				[
					231,
					1,
					"insert",
					{
						"characters": "file,buf"
					},
					"CAAAAImrAAAAAAAAiqsAAAAAAAAAAAAAiqsAAAAAAACLqwAAAAAAAAAAAACLqwAAAAAAAIyrAAAAAAAAAAAAAIyrAAAAAAAAjasAAAAAAAAAAAAAjasAAAAAAACOqwAAAAAAAAAAAACOqwAAAAAAAI+rAAAAAAAAAAAAAI+rAAAAAAAAkKsAAAAAAAAAAAAAkKsAAAAAAACRqwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiasAAAAAAACJqwAAAAAAAAAAAAAAAPC/"
				],
				[
					233,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAJOrAAAAAAAAlKsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAk6sAAAAAAACTqwAAAAAAAAAAAAAAAPC/"
				],
				[
					273,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAG2rAAAAAAAAbqsAAAAAAAAAAAAAbqsAAAAAAABuqwAAAAAAACgAAAAgIGNvbnNvbGUubG9nKCdCdWZmZXJGaWxlJyx7ZmlsZSxidWZ9KTsK",
					"AQAAAAAAAAABAAAAbasAAAAAAACVqwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs/qjs-modules/include/location.h",
			"redo_stack":
			[
				[
					14,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAGwEAAAAAAAAbAQAAAAAAAACAAAALypnBQAAAAAAAGcFAAAAAAAAAgAAACov",
					"AQAAAAAAAAABAAAAaQUAAAAAAABuBAAAAAAAAAAAAAAAAPC/"
				]
			],
			"settings":
			{
				"buffer_size": 1660,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "quickjs/qjs-modules/quickjs-lexer.c",
			"settings":
			{
				"buffer_size": 42478,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "/home/roman/mnt/samsung-roman/Projects/an-tronics/Mind-Synchronizing-Generator-PinHdrPotX.svg",
			"redo_stack":
			[
				[
					83,
					1,
					"insert",
					{
						"characters": "c"
					},
					"AgAAAB6vGQAAAAAAJ68ZAAAAAAAAAAAAHa8ZAAAAAAAdrxkAAAAAAAEAAABj",
					"AQAAAAAAAAABAAAAHq8ZAAAAAAAerxkAAAAAAAAAAAAAAPC/"
				]
			],
			"settings":
			{
				"buffer_size": 1786216,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "lib/dom/svg.js",
			"settings":
			{
				"buffer_size": 17260,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			}
		},
		{
			"file": "lib/eagle/ref.js",
			"settings":
			{
				"buffer_size": 3417,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "/home/roman/.config/sublime-text/Packages/User/Themes/Luscious.tmTheme",
			"settings":
			{
				"buffer_size": 16654,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABAQQAAPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHBsaXN0IFBVQkxJQyAiLS8vQXBwbGUvL0RURCBQTElTVCAxLjAvL0VOIiAiaHR0cDovL3d3dy5hcHBsZS5jb20vRFREcy9Qcm9wZXJ0eUxpc3QtMS4wLmR0ZCI+CjxwbGlzdCB2ZXJzaW9uPSIxLjAiPgo8ZGljdD4KCTxrZXk+Y29tbWVudDwva2V5PgoJPHN0cmluZz5odHRwOi8vb3V0cm9vdC5jb208L3N0cmluZz4KCTxrZXk+bmFtZTwva2V5PgoJPHN0cmluZz5MdXNjaW91czwvc3RyaW5nPgoJPGtleT5zZXR0aW5nczwva2V5PjxhcnJheT48ZGljdD48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5iYWNrZ3JvdW5kPC9rZXk+PHN0cmluZz4jMTkxRDI3PC9zdHJpbmc+CgkJCQk8a2V5PmNhcmV0PC9rZXk+CgkJCQk8c3RyaW5nPiNBN0E3QTc8L3N0cmluZz4KCQkJCTxrZXk+Zm9yZWdyb3VuZDwva2V5PgoJCQkJPHN0cmluZz4jRjhGOEY4PC9zdHJpbmc+CgkJCQk8a2V5PmludmlzaWJsZXM8L2tleT4KCQkJCTxzdHJpbmc+I0NBRTJGQjNEPC9zdHJpbmc+CgkJCQk8a2V5PmxpbmVIaWdobGlnaHQ8L2tleT4KCQkJCTxzdHJpbmc+I0ZGRkZGRjBEPC9zdHJpbmc+CgkJCQk8a2V5PnNlbGVjdGlvbjwva2V5PgoJCQkJPHN0cmluZz4jRkYwMEY0NTU8L3N0cmluZz4KCQkJCTwhLS0gPGtleT5ndWlkZTwva2V5PgoJCQkJPHN0cmluZz4jRkYwMDAwPC9zdHJpbmc+CgkJCQk8a2V5PnN0YWNrR3VpZGU8L2tleT4KCQkJCTxzdHJpbmc+I0ZGMDAwMDwvc3RyaW5nPiAtLT4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+Q29tbWVudDwvc3RyaW5nPgoJCQk8a2V5PnNjb3BlPC9rZXk+CgkJCTxzdHJpbmc+Y29tbWVudDwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb250U3R5bGU8L2tleT48c3RyaW5nPml0YWxpYzwvc3RyaW5nPjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0MwNURGRjwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5OdW1iZXI8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5jb25zdGFudC5udW1lcmljPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0E2RTIyRTwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5Db25zdGFudDwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPmNvbnN0YW50PC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9udFN0eWxlPC9rZXk+PHN0cmluZyAvPjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+IzBBOUNGRjwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5FbnRpdHk8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5lbnRpdHk8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb250U3R5bGU8L2tleT48c3RyaW5nIC8+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jODNDQkVEPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPktleXdvcmQ8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5rZXl3b3JkPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0Y5MjY3Mjwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5TdG9yYWdlPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+c3RvcmFnZTwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvbnRTdHlsZTwva2V5PjxzdHJpbmcgLz48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNGQTdBNTI8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+U3RvcmFnZSBjbGFzczwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPmVudGl0eS5uYW1lLnR5cGUuY2xhc3M8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jRTg2M0I2PC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPlN0cmluZzwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPnN0cmluZzwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiM5MEZGNUU8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+U3VwcG9ydDwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPnN1cHBvcnQ8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb250U3R5bGU8L2tleT48c3RyaW5nIC8+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jMDBGRkJDPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPlZhcmlhYmxlPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+dmFyaWFibGU8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb250U3R5bGU8L2tleT48c3RyaW5nIC8+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jNDU5NkZGPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPkludmFsaWQg4oCTIERlcHJlY2F0ZWQ8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5pbnZhbGlkLmRlcHJlY2F0ZWQ8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb250U3R5bGU8L2tleT48c3RyaW5nPml0YWxpYyB1bmRlcmxpbmU8L3N0cmluZz48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNGRDVGRjE8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+SW52YWxpZCDigJMgSWxsZWdhbDwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPmludmFsaWQuaWxsZWdhbDwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmJhY2tncm91bmQ8L2tleT48c3RyaW5nPiM1NjJENTZCRjwvc3RyaW5nPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNGRDVGRjE8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS08L3N0cmluZz4KCQkJPGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz7imaYgRW1iZWRkZWQgU291cmNlIChCcmlnaHQpPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+dGV4dCBzb3VyY2U8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5iYWNrZ3JvdW5kPC9rZXk+PHN0cmluZz4jQjFCM0JBMDg8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+4pmmIEVudGl0eSBpbmhlcml0ZWQtY2xhc3M8L3N0cmluZz4KCQkJPGtleT5zY29wZTwva2V5PgoJCQk8c3RyaW5nPmVudGl0eS5vdGhlci5pbmhlcml0ZWQtY2xhc3M8L3N0cmluZz4KCQkJPGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9udFN0eWxlPC9rZXk+PHN0cmluZz5pdGFsaWM8L3N0cmluZz48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNGRjk3NDk8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+4pmmIFN0cmluZyBlbWJlZGRlZC1zb3VyY2U8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5zdHJpbmcucXVvdGVkIHNvdXJjZTwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvbnRTdHlsZTwva2V5PjxzdHJpbmcgLz48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNEOTcyREU8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+4pmmIFN0cmluZyBjb25zdGFudDwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPnN0cmluZyBjb25zdGFudDwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNEOTcyREU8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+QnVpbHQtaW4gY29uc3RhbnQ8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5jb25zdGFudC5sYW5ndWFnZTwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvbnRTdHlsZTwva2V5PjxzdHJpbmc+Ym9sZDwvc3RyaW5nPjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0ZGNjQ1ODwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5Vc2VyLWRlZmluZWQgY29uc3RhbnQ8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5jb25zdGFudC5jaGFyYWN0ZXIsIGNvbnN0YW50Lm90aGVyPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0FFODFGRjwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz7imaYgU3RyaW5nLnJlZ2V4cDwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPnN0cmluZy5yZWdleHA8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jRTlDMDYyPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPuKZpiBTdHJpbmcucmVnZXhwLsKrc3BlY2lhbMK7PC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+c3RyaW5nLnJlZ2V4cCBjb25zdGFudC5jaGFyYWN0ZXIuZXNjYXBlLCBzdHJpbmcucmVnZXhwIHNvdXJjZS5ydWJ5LmVtYmVkZGVkLCBzdHJpbmcucmVnZXhwIHN0cmluZy5yZWdleHAuYXJiaXRyYXJ5LXJlcGl0aXRpb248L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jQ0Y3RDM0PC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPuKZpiBTdHJpbmcgdmFyaWFibGU8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5zdHJpbmcgdmFyaWFibGU8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jOEE5QTk1PC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPuKZpiBTdXBwb3J0LmZ1bmN0aW9uPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+c3VwcG9ydC5mdW5jdGlvbjwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvbnRTdHlsZTwva2V5PjxzdHJpbmcgLz48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNGMUQ5NTA8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+4pmmIFN1cHBvcnQuY29uc3RhbnQ8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5zdXBwb3J0LmNvbnN0YW50PC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9udFN0eWxlPC9rZXk+PHN0cmluZyAvPjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0NGNkE0Qzwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5jIEMvQysrIFByZXByb2Nlc3NvciBMaW5lPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWV0YS5wcmVwcm9jZXNzb3IuYzwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiM4OTk2QTg8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+YyBDL0MrKyBQcmVwcm9jZXNzb3IgRGlyZWN0aXZlPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWV0YS5wcmVwcm9jZXNzb3IuYyBrZXl3b3JkPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0FGQzREQjwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5qIEVudGl0eSBOYW1lIFR5cGU8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5lbnRpdHkubmFtZS50eXBlPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9udFN0eWxlPC9rZXk+PHN0cmluZz51bmRlcmxpbmU8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+aiBDYXN0PC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWV0YS5jYXN0PC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9udFN0eWxlPC9rZXk+PHN0cmluZz5pdGFsaWM8L3N0cmluZz48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiM2NzY3Njc8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+4pyYIERvY3R5cGUvWE1MIFByb2Nlc3Npbmc8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5tZXRhLnNnbWwuaHRtbCBtZXRhLmRvY3R5cGUsIG1ldGEuc2dtbC5odG1sIG1ldGEuZG9jdHlwZSBlbnRpdHksIG1ldGEuc2dtbC5odG1sIG1ldGEuZG9jdHlwZSBzdHJpbmcsIG1ldGEueG1sLXByb2Nlc3NpbmcsIG1ldGEueG1sLXByb2Nlc3NpbmcgZW50aXR5LCBtZXRhLnhtbC1wcm9jZXNzaW5nIHN0cmluZzwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiM0OTQ5NDk8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+4pyYIE1ldGEudGFnLsKrYWxswrs8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5tZXRhLnRhZywgbWV0YS50YWcgZW50aXR5PC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+Izg5QkRGRjwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz7inJggTWV0YS50YWcuaW5saW5lPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+c291cmNlIGVudGl0eS5uYW1lLnRhZywgc291cmNlIGVudGl0eS5vdGhlci5hdHRyaWJ1dGUtbmFtZSwgbWV0YS50YWcuaW5saW5lLCBtZXRhLnRhZy5pbmxpbmUgZW50aXR5PC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0UwQzU4OTwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz7inJggTmFtZXNwYWNlczwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPmVudGl0eS5uYW1lLnRhZy5uYW1lc3BhY2UsIGVudGl0eS5vdGhlci5hdHRyaWJ1dGUtbmFtZS5uYW1lc3BhY2U8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jRTE4OTY0PC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPsKnIGNzcyB0YWctbmFtZTwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPm1ldGEuc2VsZWN0b3IuY3NzIGVudGl0eS5uYW1lLnRhZzwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNDREE4Njk8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+wqcgY3NzOnBzZXVkby1jbGFzczwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPm1ldGEuc2VsZWN0b3IuY3NzIGVudGl0eS5vdGhlci5hdHRyaWJ1dGUtbmFtZS50YWcucHNldWRvLWNsYXNzPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+IzhGOUQ2QTwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz7CpyBjc3MjaWQ8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5tZXRhLnNlbGVjdG9yLmNzcyBlbnRpdHkub3RoZXIuYXR0cmlidXRlLW5hbWUuaWQ8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jOEI5OEFCPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPsKnIGNzcy5jbGFzczwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPm1ldGEuc2VsZWN0b3IuY3NzIGVudGl0eS5vdGhlci5hdHRyaWJ1dGUtbmFtZS5jbGFzczwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiM5QjcwM0Y8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+wqcgY3NzIHByb3BlcnR5LW5hbWU6PC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+c3VwcG9ydC50eXBlLnByb3BlcnR5LW5hbWUuY3NzPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0M1QUY3NTwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz7CpyBjc3MgcHJvcGVydHktdmFsdWU7PC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWV0YS5wcm9wZXJ0eS1ncm91cCBzdXBwb3J0LmNvbnN0YW50LnByb3BlcnR5LXZhbHVlLmNzcywgbWV0YS5wcm9wZXJ0eS12YWx1ZSBzdXBwb3J0LmNvbnN0YW50LnByb3BlcnR5LXZhbHVlLmNzczwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNGOUVFOTg8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+wqcgY3NzIEBhdC1ydWxlPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWV0YS5wcmVwcm9jZXNzb3IuYXQtcnVsZSBrZXl3b3JkLmNvbnRyb2wuYXQtcnVsZTwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiM4NjkzQTU8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+wqcgY3NzIGFkZGl0aW9uYWwtY29uc3RhbnRzPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWV0YS5wcm9wZXJ0eS12YWx1ZSBzdXBwb3J0LmNvbnN0YW50Lm5hbWVkLWNvbG9yLmNzcywgbWV0YS5wcm9wZXJ0eS12YWx1ZSBjb25zdGFudDwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNERDdCM0I8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+wqcgY3NzIGNvbnN0cnVjdG9yLmFyZ3VtZW50PC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWV0YS5jb25zdHJ1Y3Rvci5hcmd1bWVudC5jc3M8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jOEY5RDZBPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPuKOhyBkaWZmLmhlYWRlcjwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPm1ldGEuZGlmZiwgbWV0YS5kaWZmLmhlYWRlcjwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmJhY2tncm91bmQ8L2tleT48c3RyaW5nPiMwRTIyMzE8L3N0cmluZz4KCQkJCTxrZXk+Zm9udFN0eWxlPC9rZXk+CgkJCQk8c3RyaW5nPml0YWxpYzwvc3RyaW5nPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNGOEY4Rjg8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+4o6HIGRpZmYuZGVsZXRlZDwvc3RyaW5nPgoJCQk8a2V5PnNjb3BlPC9rZXk+CgkJCTxzdHJpbmc+bWFya3VwLmRlbGV0ZWQ8L3N0cmluZz4KCQkJPGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+YmFja2dyb3VuZDwva2V5PjxzdHJpbmc+IzQyMEUwOTwvc3RyaW5nPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNGOEY4Rjg8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+4o6HIGRpZmYuY2hhbmdlZDwvc3RyaW5nPgoJCQk8a2V5PnNjb3BlPC9rZXk+CgkJCTxzdHJpbmc+bWFya3VwLmNoYW5nZWQ8L3N0cmluZz4KCQkJPGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+YmFja2dyb3VuZDwva2V5PjxzdHJpbmc+IzRBNDEwRDwvc3RyaW5nPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNGOEY4Rjg8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+4o6HIGRpZmYuaW5zZXJ0ZWQ8L3N0cmluZz4KCQkJPGtleT5zY29wZTwva2V5PgoJCQk8c3RyaW5nPm1hcmt1cC5pbnNlcnRlZDwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5iYWNrZ3JvdW5kPC9rZXk+PHN0cmluZz4jMjUzQjIyPC9zdHJpbmc+CgkJCQk8a2V5PmZvcmVncm91bmQ8L2tleT4KCQkJCTxzdHJpbmc+I0Y4RjhGODwvc3RyaW5nPgoJCQk8L2RpY3Q+CgkJPC9kaWN0PgoJCTxkaWN0PgoJCQk8a2V5Pm5hbWU8L2tleT4KCQkJPHN0cmluZz4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPk1hcmt1cDogSXRhbGljPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWFya3VwLml0YWxpYzwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvbnRTdHlsZTwva2V5PjxzdHJpbmc+aXRhbGljPC9zdHJpbmc+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jRTlDMDYyPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPk1hcmt1cDogQm9sZDwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPm1hcmt1cC5ib2xkPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+Zm9udFN0eWxlPC9rZXk+PHN0cmluZz5ib2xkPC9zdHJpbmc+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jRTlDMDYyPC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPk1hcmt1cDogVW5kZXJsaW5lPC9zdHJpbmc+PGtleT5zY29wZTwva2V5PjxzdHJpbmc+bWFya3VwLnVuZGVybGluZTwvc3RyaW5nPjxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvbnRTdHlsZTwva2V5PjxzdHJpbmc+dW5kZXJsaW5lPC9zdHJpbmc+PGtleT5mb3JlZ3JvdW5kPC9rZXk+PHN0cmluZz4jRTE4OTY0PC9zdHJpbmc+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPk1hcmt1cDogUXVvdGU8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5tYXJrdXAucXVvdGU8L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5iYWNrZ3JvdW5kPC9rZXk+PHN0cmluZz4jRkVFMDlDMTI8L3N0cmluZz4KCQkJCTxrZXk+Zm9udFN0eWxlPC9rZXk+CgkJCQk8c3RyaW5nPml0YWxpYzwvc3RyaW5nPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNFMUQ0Qjk8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+TWFya3VwOiBIZWFkaW5nPC9zdHJpbmc+CgkJCTxrZXk+c2NvcGU8L2tleT4KCQkJPHN0cmluZz5tYXJrdXAuaGVhZGluZywgbWFya3VwLmhlYWRpbmcgZW50aXR5PC9zdHJpbmc+CgkJCTxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmJhY2tncm91bmQ8L2tleT48c3RyaW5nPiM2MzJEMDQ8L3N0cmluZz4KCQkJCTxrZXk+Zm9udFN0eWxlPC9rZXk+CgkJCQk8c3RyaW5nIC8+CgkJCQk8a2V5PmZvcmVncm91bmQ8L2tleT4KCQkJCTxzdHJpbmc+I0ZFRENDNTwvc3RyaW5nPgoJCQk8L2RpY3Q+CgkJPC9kaWN0PgoJCTxkaWN0PgoJCQk8a2V5Pm5hbWU8L2tleT4KCQkJPHN0cmluZz5NYXJrdXA6IExpc3Q8L3N0cmluZz4KCQkJPGtleT5zY29wZTwva2V5PgoJCQk8c3RyaW5nPm1hcmt1cC5saXN0PC9zdHJpbmc+CgkJCTxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmZvcmVncm91bmQ8L2tleT48c3RyaW5nPiNFMUQ0Qjk8L3N0cmluZz48L2RpY3Q+PC9kaWN0PjxkaWN0PjxrZXk+bmFtZTwva2V5PjxzdHJpbmc+TWFya3VwOiBSYXc8L3N0cmluZz48a2V5PnNjb3BlPC9rZXk+PHN0cmluZz5tYXJrdXAucmF3PC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+YmFja2dyb3VuZDwva2V5PjxzdHJpbmc+I0IxQjNCQTA4PC9zdHJpbmc+CgkJCQk8a2V5PmZvbnRTdHlsZTwva2V5PgoJCQkJPHN0cmluZyAvPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiM1NzhCQjM8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+TWFya3VwOiBDb21tZW50PC9zdHJpbmc+CgkJCTxrZXk+c2NvcGU8L2tleT4KCQkJPHN0cmluZz5tYXJrdXAgY29tbWVudDwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5mb250U3R5bGU8L2tleT48c3RyaW5nPml0YWxpYzwvc3RyaW5nPjxrZXk+Zm9yZWdyb3VuZDwva2V5PjxzdHJpbmc+I0Y2N0IzNzwvc3RyaW5nPjwvZGljdD48L2RpY3Q+PGRpY3Q+PGtleT5uYW1lPC9rZXk+PHN0cmluZz5NYXJrdXA6IFNlcGFyYXRvcjwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPm1ldGEuc2VwYXJhdG9yPC9zdHJpbmc+PGtleT5zZXR0aW5nczwva2V5PjxkaWN0PjxrZXk+YmFja2dyb3VuZDwva2V5PjxzdHJpbmc+IzI0MjQyNDwvc3RyaW5nPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiM2MEE2MzM8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+TG9nIEVudHJ5PC9zdHJpbmc+CgkJCTxrZXk+c2NvcGU8L2tleT4KCQkJPHN0cmluZz5tZXRhLmxpbmUuZW50cnkubG9nZmlsZSwgbWV0YS5saW5lLmV4aXQubG9nZmlsZTwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5iYWNrZ3JvdW5kPC9rZXk+PHN0cmluZz4jRUVFRUVFMjk8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+TG9nIEVudHJ5IEVycm9yPC9zdHJpbmc+CgkJCTxrZXk+c2NvcGU8L2tleT4KCQkJPHN0cmluZz5tZXRhLmxpbmUuZXJyb3IubG9nZmlsZTwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5iYWNrZ3JvdW5kPC9rZXk+PHN0cmluZz4jNzUxMDEyPC9zdHJpbmc+CgkJCTwvZGljdD4KCQk8L2RpY3Q+CgkJPGRpY3Q+CgkJCTxrZXk+bmFtZTwva2V5PgoJCQk8c3RyaW5nPi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPC9zdHJpbmc+CgkJCTxrZXk+c2NvcGU8L2tleT4KCQkJPHN0cmluZyAvPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PC9kaWN0PjwvZGljdD48ZGljdD48a2V5Pm5hbWU8L2tleT48c3RyaW5nPkdvOiBjb21tYTwvc3RyaW5nPjxrZXk+c2NvcGU8L2tleT48c3RyaW5nPnB1bmN0dWF0aW9uLmRlZmluaXRpb24uY29tbWEuZ288L3N0cmluZz48a2V5PnNldHRpbmdzPC9rZXk+PGRpY3Q+PGtleT5iYWNrZ3JvdW5kPC9rZXk+PHN0cmluZyAvPgoJCQkJPGtleT5mb250U3R5bGU8L2tleT4KCQkJCTxzdHJpbmcgLz4KCQkJCTxrZXk+Zm9yZWdyb3VuZDwva2V5PgoJCQkJPHN0cmluZz4jRkY2NDU4PC9zdHJpbmc+CgkJCTwvZGljdD4KCQk8L2RpY3Q+CgkJPGRpY3Q+CgkJCTxrZXk+bmFtZTwva2V5PgoJCQk8c3RyaW5nPkdvOiBkb3Q8L3N0cmluZz4KCQkJPGtleT5zY29wZTwva2V5PgoJCQk8c3RyaW5nPnB1bmN0dWF0aW9uLmRlZmluaXRpb24uZG90LmdvPC9zdHJpbmc+CgkJCTxrZXk+c2V0dGluZ3M8L2tleT48ZGljdD48a2V5PmJhY2tncm91bmQ8L2tleT48c3RyaW5nIC8+CgkJCQk8a2V5PmZvbnRTdHlsZTwva2V5PgoJCQkJPHN0cmluZyAvPgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNGRjY0NTg8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+R286IGNvbG9uPC9zdHJpbmc+CgkJCTxrZXk+c2NvcGU8L2tleT4KCQkJPHN0cmluZz5wdW5jdHVhdGlvbi5kZWZpbml0aW9uLmNvbG9uLmdvPC9zdHJpbmc+CgkJCTxrZXk+c2V0dGluZ3M8L2tleT4KCQkJPGRpY3Q+CgkJCQk8a2V5PmZvcmVncm91bmQ8L2tleT4KCQkJCTxzdHJpbmc+I0ZGNjQ1ODwvc3RyaW5nPgoJCQk8L2RpY3Q+CgkJPC9kaWN0PgoJCTxkaWN0PgoJCQk8a2V5Pm5hbWU8L2tleT4KCQkJPHN0cmluZz5HbzogYnJhY2tldDwvc3RyaW5nPgoJCQk8a2V5PnNjb3BlPC9rZXk+CgkJCTxzdHJpbmc+cHVuY3R1YXRpb24uZGVmaW5pdGlvbi5icmFja2V0LmdvPC9zdHJpbmc+CgkJCTxrZXk+c2V0dGluZ3M8L2tleT4KCQkJPGRpY3Q+CgkJCQk8a2V5PmZvcmVncm91bmQ8L2tleT4KCQkJCTxzdHJpbmc+I0ZGRkZGRjwvc3RyaW5nPgoJCQk8L2RpY3Q+CgkJPC9kaWN0PgoJCTxkaWN0PgoJCQk8a2V5Pm5hbWU8L2tleT4KCQkJPHN0cmluZz5Hb2h0bWw6IGJlZ2luPC9zdHJpbmc+CgkJCTxrZXk+c2NvcGU8L2tleT4KCQkJPHN0cmluZz50ZXh0Lmh0bWwuZ29odG1sIHB1bmN0dWF0aW9uLnNlY3Rpb24uZW1iZWRkZWQuYmVnaW4uZ290ZW1wbGF0ZTwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+CgkJCTxkaWN0PgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNGRjY0NTg8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCQkJPGtleT5uYW1lPC9rZXk+CgkJCTxzdHJpbmc+R29odG1sOiBlbmQ8L3N0cmluZz4KCQkJPGtleT5zY29wZTwva2V5PgoJCQk8c3RyaW5nPnRleHQuaHRtbC5nb2h0bWwgcHVuY3R1YXRpb24uc2VjdGlvbi5lbWJlZGRlZC5lbmQuZ290ZW1wbGF0ZTwvc3RyaW5nPgoJCQk8a2V5PnNldHRpbmdzPC9rZXk+CgkJCTxkaWN0PgoJCQkJPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkJCQk8c3RyaW5nPiNGRjY0NTg8L3N0cmluZz4KCQkJPC9kaWN0PgoJCTwvZGljdD4KCQk8ZGljdD4KCSAgICA8a2V5Pm5hbWU8L2tleT4KCSAgICA8c3RyaW5nPlN1YmxpbWVMaW50ZXIgRXJyb3I8L3N0cmluZz4KCSAgICA8a2V5PnNjb3BlPC9rZXk+CgkgICAgPHN0cmluZz5zdWJsaW1lbGludGVyLm1hcmsuZXJyb3I8L3N0cmluZz4KCSAgICA8a2V5PnNldHRpbmdzPC9rZXk+CgkgICAgPGRpY3Q+CgkgICAgICAgIDxrZXk+Zm9yZWdyb3VuZDwva2V5PgoJICAgICAgICA8c3RyaW5nPiNEMDIwMDA8L3N0cmluZz4KCSAgICA8L2RpY3Q+CgkgIDwvZGljdD4KCSAgPGRpY3Q+CgkgICAgPGtleT5uYW1lPC9rZXk+CgkgICAgPHN0cmluZz5TdWJsaW1lTGludGVyIFdhcm5pbmc8L3N0cmluZz4KCSAgICA8a2V5PnNjb3BlPC9rZXk+CgkgICAgPHN0cmluZz5zdWJsaW1lbGludGVyLm1hcmsud2FybmluZzwvc3RyaW5nPgoJICAgIDxrZXk+c2V0dGluZ3M8L2tleT4KCSAgICA8ZGljdD4KCSAgICAgICAgPGtleT5mb3JlZ3JvdW5kPC9rZXk+CgkgICAgICAgIDxzdHJpbmc+I0REQjcwMDwvc3RyaW5nPgoJICAgIDwvZGljdD4KCSAgPC9kaWN0PgoJICA8ZGljdD4KCSAgICA8a2V5Pm5hbWU8L2tleT4KCSAgICA8c3RyaW5nPlN1YmxpbWVMaW50ZXIgR3V0dGVyIE1hcms8L3N0cmluZz4KCSAgICA8a2V5PnNjb3BlPC9rZXk+CgkgICAgPHN0cmluZz5zdWJsaW1lbGludGVyLmd1dHRlci1tYXJrPC9zdHJpbmc+CgkgICAgPGtleT5zZXR0aW5nczwva2V5PgoJICAgIDxkaWN0PgoJICAgICAgICA8a2V5PmZvcmVncm91bmQ8L2tleT4KCSAgICAgICAgPHN0cmluZz4jRkZGRkZGPC9zdHJpbmc+CgkgICAgPC9kaWN0PgoJICA8L2RpY3Q+CgoJICA8ZGljdD4KICAgICAgPGtleT5uYW1lPC9rZXk+CiAgICAgIDxzdHJpbmc+QnJhY2tldCBEZWZhdWx0PC9zdHJpbmc+CiAgICAgIDxrZXk+c2NvcGU8L2tleT4KICAgICAgPHN0cmluZz5icmFja2V0aGlnaGxpZ2h0ZXIuZGVmYXVsdDwvc3RyaW5nPgogICAgICA8a2V5PnNldHRpbmdzPC9rZXk+CiAgICAgIDxkaWN0PgogICAgICAgIDxrZXk+Zm9yZWdyb3VuZDwva2V5PgogICAgICAgIDxzdHJpbmc+IzgzQ0JFRDwvc3RyaW5nPgogICAgICA8L2RpY3Q+CgkgIDwvZGljdD4KICA8L2FycmF5PgoJPGtleT51dWlkPC9rZXk+Cgk8c3RyaW5nPjU2NUNGMkQ1LUI2RTAtNDcxMi05MUM1LURDRUY2QUUxMTBENjwvc3RyaW5nPgo8L2RpY3Q+CjwvcGxpc3Q+AAAAAAAAAAAOQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/misc.js",
			"settings":
			{
				"buffer_size": 64185,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					48,
					1,
					"insert",
					{
						"characters": "\nstr="
					},
					"BgAAAMysAAAAAAAAzawAAAAAAAAAAAAAzawAAAAAAADPrAAAAAAAAAAAAADPrAAAAAAAANCsAAAAAAAAAAAAANCsAAAAAAAA0awAAAAAAAAAAAAA0awAAAAAAADSrAAAAAAAAAAAAADSrAAAAAAAANOsAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzKwAAAAAAADMrAAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAANOsAAAAAAAA1awAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA06wAAAAAAADTrAAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAANWsAAAAAAAA1qwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1awAAAAAAADVrAAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"paste",
					null,
					"AgAAAH6sAAAAAAAAuq0AAAAAAAAAAAAAuq0AAAAAAAC6rQAAAAAAAJUAAAAKZXhwb3J0IGZ1bmN0aW9uIHBhZEFuc2koc3RyLCBuLCBzID0gJyAnKSB7CiAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpcEFuc2koc3RyKTsKICBzdHI9Jyc7CiAgZm9yKGxldCBpID0gbGVuZ3RoOyBpIDwgbjsgaSsrKSBzdHIgKz0gczsKICByZXR1cm4gc3RyOwp9Cg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAfqwAAAAAAAATrQAAAAAAAAAAAAAAAAAA"
				],
				[
					72,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAACS+wAALy9pbXBvcnQgVXRpbCBmcm9tICcuL3V0aWwuanMnOwovL2V4cG9ydCB7IHR5cGVzIH0gZnJvbSAgJy4uL3F1aWNranMvcWpzLW1vZHVsZXMvbGliL3V0aWwuanMnOwoKY29uc3Qgc2xpY2UgPSAoeCwgcywgZSkgPT4KICB0eXBlb2YgeCA9PSAnb2JqZWN0JwogICAgPyBpc0FycmF5QnVmZmVyKHgpCiAgICAgID8gZHVwQXJyYXlCdWZmZXIoeCwgcywgZSkKICAgICAgOiBBcnJheS5pc0FycmF5KHgpCiAgICAgID8gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoeCwgcywgZSkKICAgICAgOiB4LnNsaWNlKHMsIGUpCiAgICA6IFN0cmluZy5wcm90b3R5cGUuc2xpY2UuY2FsbCh4LCBzLCBlKTsKY29uc3Qgc3RyaW5naWZ5ID0gdiA9PiBgJHt2fWA7CmNvbnN0IHByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7CmNvbnN0IGZvcm1hdE51bWJlciA9IG4gPT4gKG4gPT09IC0wID8gJy0wJyA6IGAke259YCk7CmNvbnN0IGlzTmF0aXZlID0gZm4gPT4gL1xbbmF0aXZlXHNjb2RlXF0vLnRlc3Qoc3RyaW5naWZ5KGZuKSk7CgovKmV4cG9ydCBkZWZhdWx0Ki8gZnVuY3Rpb24gdXRpbCgpIHsKICByZXR1cm4gdXRpbDsKfQoKdXRpbC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSB1dGlsOwoKY29uc3QgQXN5bmNGdW5jdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHgoKSB7fS5jb25zdHJ1Y3RvcjsKY29uc3QgR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiogKCkge30uY29uc3RydWN0b3I7CmNvbnN0IEFzeW5jR2VuZXJhdG9yRnVuY3Rpb24gPSBhc3luYyBmdW5jdGlvbiogKCkge30uY29uc3RydWN0b3I7CmNvbnN0IFR5cGVkQXJyYXkgPSBwcm90b09mKHByb3RvT2YobmV3IFVpbnQxNkFycmF5KDEwKSkpLmNvbnN0cnVjdG9yOwoKY29uc3QgU2V0SXRlcmF0b3JQcm90b3R5cGUgPSBwcm90b09mKG5ldyBTZXQoKS52YWx1ZXMoKSk7CmNvbnN0IE1hcEl0ZXJhdG9yUHJvdG90eXBlID0gcHJvdG9PZihuZXcgTWFwKCkuZW50cmllcygpKTsKLy9jb25zdCBHZW5lcmF0b3JQcm90b3R5cGUgPSBwcm90b09mKChmdW5jdGlvbiogKCkge30pKCkpOwoKLy8gcHJldHRpZXItaWdub3JlCmV4cG9ydCBjb25zdCBlcnJvcnMgPSBbbnVsbCwgJ0VQRVJNJywgJ0VOT0VOVCcsICdFU1JDSCcsICdFSU5UUicsICdFSU8nLCAnRU5YSU8nLCAnRTJCSUcnLCAnRU5PRVhFQycsICdFQkFERicsICdFQ0hJTEQnLCAnRUFHQUlOJywgJ0VOT01FTScsICdFQUNDRVMnLCAnRUZBVUxUJywgJ0VOT1RCTEsnLCAnRUJVU1knLCAnRUVYSVNUJywgJ0VYREVWJywgJ0VOT0RFVicsICdFTk9URElSJywgJ0VJU0RJUicsICdFSU5WQUwnLCAnRU5GSUxFJywgJ0VNRklMRScsICdFTk9UVFknLCAnRVRYVEJTWScsICdFRkJJRycsICdFTk9TUEMnLCAnRVNQSVBFJywgJ0VST0ZTJywgJ0VNTElOSycsICdFUElQRScsICdFRE9NJywgJ0VSQU5HRScsICdFREVBRExLJywgJ0VOQU1FVE9PTE9ORycsICdFTk9MQ0snLCAnRU5PU1lTJywgJ0VOT1RFTVBUWScsIG51bGwsIG51bGwsICdFTk9NU0cnLCAnRUlEUk0nLCAnRUNIUk5HJywgJ0VMMk5TWU5DJywgJ0VMM0hMVCcsICdFTDNSU1QnLCAnRUxOUk5HJywgJ0VVTkFUQ0gnLCAnRU5PQ1NJJywgJ0VMMkhMVCcsICdFQkFERScsICdFQkFEUicsICdFWEZVTEwnLCAnRU5PQU5PJywgJ0VCQURSUUMnLCBudWxsLCAnJywgJ0VCRk9OVCcsICdFTk9TVFInLCAnRU5PREFUQScsICdFVElNRScsICdFTk9TUicsICdFTk9ORVQnLCAnRU5PUEtHJywgJ0VSRU1PVEUnLCAnRU5PTElOSycsICdFQURWJywgJ0VTUk1OVCcsICdFQ09NTScsICdFUFJPVE8nLCAnRU1VTFRJSE9QJywgJ0VET1RET1QnLCAnRUJBRE1TRycsICdFT1ZFUkZMT1cnLCAnRU5PVFVOSVEnLCAnRUJBREZEJywgJ0VSRU1DSEcnLCAnRUxJQkFDQycsICdFTElCQkFEJywgJ0VMSUJTQ04nLCAnRUxJQk1BWCcsICdFTElCRVhFQycsICdFSUxTRVEnLCAnRVJFU1RBUlQnLCAnRVNUUlBJUEUnLCAnRVVTRVJTJywgJ0VOT1RTT0NLJywgJ0VERVNUQUREUlJFUScsICdFTVNHU0laRScsICdFUFJPVE9UWVBFJywgJ0VOT1BST1RPT1BUJywgJ0VQUk9UT05PU1VQUE9SVCcsICdFU09DS1ROT1NVUFBPUlQnLCAnRU9QTk9UU1VQUCcsICdFUEZOT1NVUFBPUlQnLCAnRUFGTk9TVVBQT1JUJywgJ0VBRERSSU5VU0UnLCAnRUFERFJOT1RBVkFJTCcsICdFTkVURE9XTicsICdFTkVUVU5SRUFDSCcsICdFTkVUUkVTRVQnLCAnRUNPTk5BQk9SVEVEJywgJ0VDT05OUkVTRVQnLCAnRU5PQlVGUycsICdFSVNDT05OJywgJ0VOT1RDT05OJywgJ0VTSFVURE9XTicsICdFVE9PTUFOWVJFRlMnLCAnRVRJTUVET1VUJywgJ0VDT05OUkVGVVNFRCcsICdFSE9TVERPV04nLCAnRUhPU1RVTlJFQUNIJywgJ0VBTFJFQURZJywgJ0VJTlBST0dSRVNTJywgJ0VTVEFMRScsICdFVUNMRUFOJywgJ0VOT1ROQU0nLCAnRU5BVkFJTCcsICdFSVNOQU0nLCAnRVJFTU9URUlPJywgJ0VEUVVPVCcsICdFTk9NRURJVU0nLCAnRU1FRElVTVRZUEUnLCAnRUNBTkNFTEVEJywgJ0VOT0tFWScsICdFS0VZRVhQSVJFRCcsICdFS0VZUkVWT0tFRCcsICdFS0VZUkVKRUNURUQnLCAnRU9XTkVSREVBRCcsICdFTk9UUkVDT1ZFUkFCTEUnLCAnRVJGS0lMTCddOwoKZXhwb3J0IGNvbnN0IHR5cGVzID0gewogIGlzQW55QXJyYXlCdWZmZXIodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmICh2IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgdiBpbnN0YW5jZW9mIFNoYXJlZEFycmF5QnVmZmVyKTsKICB9LAogIGlzQXJyYXlCdWZmZXIodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjsKICB9LAogIGlzQmlnSW50NjRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEJpZ0ludDY0QXJyYXk7CiAgfSwKICBpc0JpZ1VpbnQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnVWludDY0QXJyYXk7CiAgfSwKICBpc0RhdGUodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBEYXRlOwogIH0sCiAgaXNGbG9hdDMyQXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk7CiAgfSwKICBpc0Zsb2F0NjRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheTsKICB9LAogIGlzSW50OEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgSW50OEFycmF5OwogIH0sCiAgaXNJbnQxNkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgSW50MTZBcnJheTsKICB9LAogIGlzSW50MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEludDMyQXJyYXk7CiAgfSwKICBpc01hcCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIE1hcDsKICB9LAogIGlzUHJvbWlzZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFByb21pc2U7CiAgfSwKICBpc1Byb3h5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUHJveHk7CiAgfSwKICBpc1JlZ0V4cCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFJlZ0V4cDsKICB9LAogIGlzU2V0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgU2V0OwogIH0sCiAgaXNTaGFyZWRBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFNoYXJlZEFycmF5QnVmZmVyOwogIH0sCiAgaXNVaW50OEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgVWludDhBcnJheTsKICB9LAogIGlzVWludDhDbGFtcGVkQXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheTsKICB9LAogIGlzVWludDE2QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50MTZBcnJheTsKICB9LAogIGlzVWludDMyQXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50MzJBcnJheTsKICB9LAogIGlzV2Vha01hcCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFdlYWtNYXA7CiAgfSwKICBpc1dlYWtTZXQodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBXZWFrU2V0OwogIH0sCiAgaXNEYXRhVmlldyh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIERhdGFWaWV3OwogIH0sCiAgaXNCb29sZWFuT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQm9vbGVhbjsKICB9LAogIGlzQXN5bmNGdW5jdGlvbih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFzeW5jRnVuY3Rpb247CiAgfSwKICBpc0dlbmVyYXRvckZ1bmN0aW9uKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgR2VuZXJhdG9yRnVuY3Rpb247CiAgfSwKICBpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24odikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBBc3luY0dlbmVyYXRvckZ1bmN0aW9uOwogIH0sCiAgaXNOdW1iZXJPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBOdW1iZXI7CiAgfSwKICBpc0JpZ0ludE9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEJpZ0ludDsKICB9LAogIGlzU3ltYm9sT2JqZWN0KHYpIHsKICAgIHJldHVybiB2ICYmIHYgaW5zdGFuY2VvZiBTeW1ib2w7CiAgfSwKICBpc05hdGl2ZUVycm9yKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRXJyb3IgJiYgaXNOYXRpdmUodi5jb25zdHJ1Y3Rvcik7CiAgfSwKICBpc01hcEl0ZXJhdG9yKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IE1hcEl0ZXJhdG9yUHJvdG90eXBlOwogIH0sCiAgaXNTZXRJdGVyYXRvcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgcHJvdG9PZih2KSA9PSBTZXRJdGVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzU3RyaW5nT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgU3RyaW5nOwogIH0sCiAgaXNBcnJheUJ1ZmZlclZpZXcodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIEFycmF5QnVmZmVyLmlzVmlldyh2KTsKICB9LAogIGlzQXJndW1lbnRzT2JqZWN0KHYpIHsKICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodikgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7CiAgfSwKICBpc0JveGVkUHJpbWl0aXZlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBbTnVtYmVyLCBTdHJpbmcsIEJvb2xlYW4sIEJpZ0ludCwgU3ltYm9sXS5zb21lKGN0b3IgPT4gdiBpbnN0YW5jZW9mIGN0b3IpOwogIH0sCiAgaXNHZW5lcmF0b3JPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHByb3RvT2YodikgPT0gR2VuZXJhdG9yUHJvdG90eXBlOwogIH0sCiAgaXNUeXBlZEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgVHlwZWRBcnJheTsKICB9LAogIGlzTW9kdWxlTmFtZXNwYWNlT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2W1N5bWJvbC50b1N0cmluZ1RhZ10gPT0gJ01vZHVsZSc7CiAgfSwKICBpc0NvbnN0cnVjdG9yKHYpIHsKICAgIHJldHVybiBpc0Z1bmN0aW9uKHYpICYmICdwcm90b3R5cGUnIGluIHY7CiAgfSwKICBpc0l0ZXJhYmxlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBpc0Z1bmN0aW9uKHZbU3ltYm9sLml0ZXJhdG9yXSk7CiAgfSwKICBpc0FzeW5jSXRlcmFibGUodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIGlzRnVuY3Rpb24odltTeW1ib2wuYXN5bmNJdGVyYXRvcl0pOwogIH0sCiAgaXNJdGVyYXRvcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgaXNGdW5jdGlvbih2Lm5leHQpOwogIH0sCiAgaXNBcnJheUxpa2UodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHR5cGVvZiB2Lmxlbmd0aCA9PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNJbnRlZ2VyKHYubGVuZ3RoKTsKICB9Cn07CgpleHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNBc3luYyhmbikgewogIGlmKHR5cGVzLmlzQXN5bmNGdW5jdGlvbihmbikgfHwgdHlwZXMuaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uKGZuKSkgcmV0dXJuIHRydWU7CgogIGlmKGlzRnVuY3Rpb24oZm4pKSByZXR1cm4gL15hc3luY1xzK2Z1bmN0aW9uLy50ZXN0KGZuICsgJycpOwp9CgpleHBvcnQgY29uc3QgaW5zcGVjdFN5bWJvbCA9IFN5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyk7Cgpjb25zdCBVVEY4Rmlyc3RDb2RlTWFzayA9IFsweDFmLCAweGYsIDB4NywgMHgzLCAweDFdOwpjb25zdCBVVEY4TWluQ29kZSA9IFsweDgwLCAweDgwMCwgMHgxMDAwMCwgMHgwMDIwMDAwMCwgMHgwNDAwMDAwMF07CgovKiBwcmV0dGllci1pZ25vcmUgKi8gY29uc3QgZXJyb3JTeW1ib2xzID0gWyAwLCAnRVBFUk0nLCAnRU5PRU5UJywgJ0VTUkNIJywgJ0VJTlRSJywgJ0VJTycsICdFTlhJTycsICdFMkJJRycsICdFTk9FWEVDJywgJ0VCQURGJywgJ0VDSElMRCcsICdFQUdBSU4nLCAnRU5PTUVNJywgJ0VBQ0NFUycsICdFRkFVTFQnLCAnRU5PVEJMSycsICdFQlVTWScsICdFRVhJU1QnLCAnRVhERVYnLCAnRU5PREVWJywgJ0VOT1RESVInLCAnRUlTRElSJywgJ0VJTlZBTCcsICdFTkZJTEUnLCAnRU1GSUxFJywgJ0VOT1RUWScsICdFVFhUQlNZJywgJ0VGQklHJywgJ0VOT1NQQycsICdFU1BJUEUnLCAnRVJPRlMnLCAnRU1MSU5LJywgJ0VQSVBFJywgJ0VET00nLCAnRVJBTkdFJywgJ0VERUFETEsnLCAnRU5BTUVUT09MT05HJywgJ0VOT0xDSycsICdFTk9TWVMnLCAnRU5PVEVNUFRZJywgMCwgMCwgJ0VOT01TRycsICdFSURSTScsICdFQ0hSTkcnLCAnRUwyTlNZTkMnLCAnRUwzSExUJywgJ0VMM1JTVCcsICdFTE5STkcnLCAnRVVOQVRDSCcsICdFTk9DU0knLCAnRUwySExUJywgJ0VCQURFJywgJ0VCQURSJywgJ0VYRlVMTCcsICdFTk9BTk8nLCAnRUJBRFJRQycsIDAsIDAsICdFQkZPTlQnLCAnRU5PU1RSJywgJ0VOT0RBVEEnLCAnRVRJTUUnLCAnRU5PU1InLCAnRU5PTkVUJywgJ0VOT1BLRycsICdFUkVNT1RFJywgJ0VOT0xJTksnLCAnRUFEVicsICdFU1JNTlQnLCAnRUNPTU0nLCAnRVBST1RPJywgJ0VNVUxUSUhPUCcsICdFRE9URE9UJywgJ0VCQURNU0cnLCAnRU9WRVJGTE9XJywgJ0VOT1RVTklRJywgJ0VCQURGRCcsICdFUkVNQ0hHJywgJ0VMSUJBQ0MnLCAnRUxJQkJBRCcsICdFTElCU0NOJywgJ0VMSUJNQVgnLCAnRUxJQkVYRUMnLCAnRUlMU0VRJywgJ0VSRVNUQVJUJywgJ0VTVFJQSVBFJywgJ0VVU0VSUycsICdFTk9UU09DSycsICdFREVTVEFERFJSRVEnLCAnRU1TR1NJWkUnLCAnRVBST1RPVFlQRScsICdFTk9QUk9UT09QVCcsICdFUFJPVE9OT1NVUFBPUlQnLCAnRVNPQ0tUTk9TVVBQT1JUJywgJ0VPUE5PVFNVUFAnLCAnRVBGTk9TVVBQT1JUJywgJ0VBRk5PU1VQUE9SVCcsICdFQUREUklOVVNFJywgJ0VBRERSTk9UQVZBSUwnLCAnRU5FVERPV04nLCAnRU5FVFVOUkVBQ0gnLCAnRU5FVFJFU0VUJywgJ0VDT05OQUJPUlRFRCcsICdFQ09OTlJFU0VUJywgJ0VOT0JVRlMnLCAnRUlTQ09OTicsICdFTk9UQ09OTicsICdFU0hVVERPV04nLCAnRVRPT01BTllSRUZTJywgJ0VUSU1FRE9VVCcsICdFQ09OTlJFRlVTRUQnLCAnRUhPU1RET1dOJywgJ0VIT1NUVU5SRUFDSCcsICdFQUxSRUFEWScsICdFSU5QUk9HUkVTUycsICdFU1RBTEUnLCAnRVVDTEVBTicsICdFTk9UTkFNJywgJ0VOQVZBSUwnLCAnRUlTTkFNJywgJ0VSRU1PVEVJTycsICdFRFFVT1QnLCAnRU5PTUVESVVNJywgJ0VNRURJVU1UWVBFJywgJ0VDQU5DRUxFRCcsICdFTk9LRVknLCAnRUtFWUVYUElSRUQnLCAnRUtFWVJFVk9LRUQnLCAnRUtFWVJFSkVDVEVEJywgJ0VPV05FUkRFQUQnLCAnRU5PVFJFQ09WRVJBQkxFJywgJ0VSRktJTEwnIF07CgpleHBvcnQgZnVuY3Rpb24gU3lzY2FsbEVycm9yKHN5c2NhbGwsIGVycm51bSkgewogIGxldCBvYmogPSBuZXcudGFyZ2V0ID8gdGhpcyA6IG5ldyBTeXNjYWxsRXJyb3IoKTsKICBpZihzeXNjYWxsKSBvYmouc3lzY2FsbCA9IHN5c2NhbGw7CiAgaWYoZXJybnVtICE9IHVuZGVmaW5lZCkgewogICAgaWYodHlwZW9mIGVycm51bSA9PSAnbnVtYmVyJykgewogICAgICBvYmouZXJybm8gPSBlcnJudW07CiAgICAgIG9iai5jb2RlID0gZXJyb3JTeW1ib2xzW2Vycm51bV07CiAgICB9IGVsc2UgewogICAgICBvYmouZXJybm8gPSBlcnJvclN5bWJvbHMuaW5kZXhPZihlcnJudW0pOwogICAgICBvYmouY29kZSA9IGVycm51bTsKICAgIH0KICB9CiAgRXJyb3IuY2FsbChvYmosIGBTeXNjYWxsRXJyb3I6ICcke29iai5zeXNjYWxsfScgZXJybm8gPSAke29iai5jb2RlfSAoJHtvYmouZXJybm99KWApOwogIHJldHVybiBvYmo7Cn0KClN5c2NhbGxFcnJvci5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTsKCmRlZmluZShTeXNjYWxsRXJyb3IucHJvdG90eXBlLCB7CiAgZ2V0IG1lc3NhZ2UoKSB7CiAgICByZXR1cm4gYFN5c2NhbGxFcnJvcjogJyR7dGhpcy5zeXNjYWxsfScgZXJybm8gPSAke3RoaXMuY29kZX0gKCR7dGhpcy5lcnJub30pYDsKICB9LAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnU3lzY2FsbEVycm9yJwp9KTsKCmdsb2JhbFRoaXMuU3lzY2FsbEVycm9yID0gU3lzY2FsbEVycm9yOwoKZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nKGFycmF5QnVmLCBlbmNvZGluZyA9ICd1dGYtOCcpIHsKICBpZihnbG9iYWxUaGlzLlRleHREZWNvZGVyKSB7CiAgICBsZXQgZGVjID0gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nKTsKICAgIHJldHVybiBkZWMuZGVjb2RlKGFycmF5QnVmKTsKICB9CgogIGlmKGVuY29kaW5nID09ICdsYXRpbjEnKSB7CiAgICBsZXQgYmluYXJ5ID0gJyc7CiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgICBsZXQgbGVuID0gYnl0ZXMuYnl0ZUxlbmd0aDsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBiaW5hcnkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7CiAgICB9CiAgICByZXR1cm4gYmluYXJ5OwogIH0KCiAgbGV0IGEgPSBuZXcgVWludDhBcnJheShhcnJheUJ1Zik7CiAgbGV0IHAgPSAwOwogIGxldCBvID0gJyc7CiAgbGV0IGxlbiA9IGEubGVuZ3RoOwogIGZvcihwID0gMDsgcCA8IGxlbjsgKSB7CiAgICBsZXQgbWF4X2xlbiA9IGxlbiAtIHA7CiAgICBsZXQgbCwgYywgYiwgaTsKCiAgICBjID0gYVtwKytdOwogICAgaWYoYyA8IDB4ODApIHsKICAgICAgbyArPSBTdHJpbmcuZnJvbUNvZGVQb2ludChjKTsKICAgICAgY29udGludWU7CiAgICB9CgogICAgc3dpdGNoIChjKSB7CiAgICAgIGNhc2UgMHhjMDoKICAgICAgY2FzZSAweGMxOgogICAgICBjYXNlIDB4YzI6CiAgICAgIGNhc2UgMHhjMzoKICAgICAgY2FzZSAweGM0OgogICAgICBjYXNlIDB4YzU6CiAgICAgIGNhc2UgMHhjNjoKICAgICAgY2FzZSAweGM3OgogICAgICBjYXNlIDB4Yzg6CiAgICAgIGNhc2UgMHhjOToKICAgICAgY2FzZSAweGNhOgogICAgICBjYXNlIDB4Y2I6CiAgICAgIGNhc2UgMHhjYzoKICAgICAgY2FzZSAweGNkOgogICAgICBjYXNlIDB4Y2U6CiAgICAgIGNhc2UgMHhjZjoKICAgICAgY2FzZSAweGQwOgogICAgICBjYXNlIDB4ZDE6CiAgICAgIGNhc2UgMHhkMjoKICAgICAgY2FzZSAweGQzOgogICAgICBjYXNlIDB4ZDQ6CiAgICAgIGNhc2UgMHhkNToKICAgICAgY2FzZSAweGQ2OgogICAgICBjYXNlIDB4ZDc6CiAgICAgIGNhc2UgMHhkODoKICAgICAgY2FzZSAweGQ5OgogICAgICBjYXNlIDB4ZGE6CiAgICAgIGNhc2UgMHhkYjoKICAgICAgY2FzZSAweGRjOgogICAgICBjYXNlIDB4ZGQ6CiAgICAgIGNhc2UgMHhkZToKICAgICAgY2FzZSAweGRmOgogICAgICAgIGwgPSAxOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDB4ZTA6CiAgICAgIGNhc2UgMHhlMToKICAgICAgY2FzZSAweGUyOgogICAgICBjYXNlIDB4ZTM6CiAgICAgIGNhc2UgMHhlNDoKICAgICAgY2FzZSAweGU1OgogICAgICBjYXNlIDB4ZTY6CiAgICAgIGNhc2UgMHhlNzoKICAgICAgY2FzZSAweGU4OgogICAgICBjYXNlIDB4ZTk6CiAgICAgIGNhc2UgMHhlYToKICAgICAgY2FzZSAweGViOgogICAgICBjYXNlIDB4ZWM6CiAgICAgIGNhc2UgMHhlZDoKICAgICAgY2FzZSAweGVlOgogICAgICBjYXNlIDB4ZWY6CiAgICAgICAgbCA9IDI7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMHhmMDoKICAgICAgY2FzZSAweGYxOgogICAgICBjYXNlIDB4ZjI6CiAgICAgIGNhc2UgMHhmMzoKICAgICAgY2FzZSAweGY0OgogICAgICBjYXNlIDB4ZjU6CiAgICAgIGNhc2UgMHhmNjoKICAgICAgY2FzZSAweGY3OgogICAgICAgIGwgPSAzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDB4Zjg6CiAgICAgIGNhc2UgMHhmOToKICAgICAgY2FzZSAweGZhOgogICAgICBjYXNlIDB4ZmI6CiAgICAgICAgbCA9IDQ7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMHhmYzoKICAgICAgY2FzZSAweGZkOgogICAgICAgIGwgPSA1OwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyogY2hlY2sgdGhhdCB3ZSBoYXZlIGVub3VnaCBjaGFyYWN0ZXJzICovCiAgICBpZihsID4gbWF4X2xlbiAtIDEpIHJldHVybiAtMTsKCiAgICBjICY9IFVURjhGaXJzdENvZGVNYXNrW2wgLSAxXTsKICAgIGZvcihpID0gMDsgaSA8IGw7IGkrKykgewogICAgICBiID0gYVtwKytdOwogICAgICBpZihiIDwgMHg4MCB8fCBiID49IDB4YzApIHJldHVybiAtMTsKCiAgICAgIGMgPSAoYyA8PCA2KSB8IChiICYgMHgzZik7CiAgICB9CiAgICBpZihjIDwgVVRGOE1pbkNvZGVbbCAtIDFdKSByZXR1cm4gLTE7CiAgICBvICs9IFN0cmluZy5mcm9tQ29kZVBvaW50KGMpOwogIH0KICByZXR1cm4gbzsKfQoKY29uc3QgYjY0Y2ggPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nOwpjb25zdCBiNjRjaHMgPSBbLi4uYjY0Y2hdOwpjb25zdCBiNjR0YWIgPSAoYSA9PiB7CiAgbGV0IHRhYiA9IHt9OwogIGEuZm9yRWFjaCgoYywgaSkgPT4gKHRhYltjXSA9IGkpKTsKICByZXR1cm4gdGFiOwp9KShiNjRjaHMpOwpjb25zdCBiNjRyZSA9IC9eKD86W0EtWmEtelxkK1wvXXs0fSkqPyg/OltBLVphLXpcZCtcL117Mn0oPzo9PSk/fFtBLVphLXpcZCtcL117M309Pyk/JC87CgpleHBvcnQgZnVuY3Rpb24gYnRvYShiaW4pIHsKICBsZXQgdTMyLAogICAgYzAsCiAgICBjMSwKICAgIGMyLAogICAgYXNjID0gJyc7CiAgY29uc3QgcGFkID0gYmluLmxlbmd0aCAlIDM7CiAgZm9yKGxldCBpID0gMDsgaSA8IGJpbi5sZW5ndGg7IGkgKz0gMCkgewogICAgaWYoKGMwID0gYmluLmNoYXJDb2RlQXQoaSsrKSkgPiAyNTUgfHwgKGMxID0gYmluLmNoYXJDb2RlQXQoaSsrKSkgPiAyNTUgfHwgKGMyID0gYmluLmNoYXJDb2RlQXQoaSsrKSkgPiAyNTUpCiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgY2hhcmFjdGVyIGZvdW5kJyk7CiAgICB1MzIgPSAoYzAgPDwgMTYpIHwgKGMxIDw8IDgpIHwgYzI7CiAgICBhc2MgKz0gYjY0Y2hzWyh1MzIgPj4gMTgpICYgNjNdICsgYjY0Y2hzWyh1MzIgPj4gMTIpICYgNjNdICsgYjY0Y2hzWyh1MzIgPj4gNikgJiA2M10gKyBiNjRjaHNbdTMyICYgNjNdOwogIH0KICByZXR1cm4gcGFkID8gYXNjLnNsaWNlKDAsIHBhZCAtIDMpICsgJz09PScuc3Vic3RyaW5nKHBhZCkgOiBhc2M7Cn0KCmV4cG9ydCBmdW5jdGlvbiBhdG9iKGFzYykgewogIGFzYyA9IGFzYy5yZXBsYWNlKC9ccysvZywgJycpOwogIGlmKCFiNjRyZS50ZXN0KGFzYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ21hbGZvcm1lZCBiYXNlNjQuJyk7CiAgYXNjICs9ICc9PScuc2xpY2UoMiAtIChhc2MubGVuZ3RoICYgMykpOwogIGxldCB1MjQsCiAgICBiaW4gPSAnJywKICAgIHIxLAogICAgcjI7CiAgZm9yKGxldCBpID0gMDsgaSA8IGFzYy5sZW5ndGg7IGkgKz0gMCkgewogICAgdTI0ID0KICAgICAgKGI2NHRhYlthc2MuY2hhckF0KGkrKyldIDw8IDE4KSB8CiAgICAgIChiNjR0YWJbYXNjLmNoYXJBdChpKyspXSA8PCAxMikgfAogICAgICAoKHIxID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0pIDw8IDYpIHwKICAgICAgKHIyID0gYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0pOwogICAgYmluICs9CiAgICAgIHIxID09PSA2NAogICAgICAgID8gU3RyaW5nLmZyb21DaGFyQ29kZSgodTI0ID4+IDE2KSAmIDI1NSkKICAgICAgICA6IHIyID09PSA2NAogICAgICAgID8gU3RyaW5nLmZyb21DaGFyQ29kZSgodTI0ID4+IDE2KSAmIDI1NSwgKHUyNCA+PiA4KSAmIDI1NSkKICAgICAgICA6IFN0cmluZy5mcm9tQ2hhckNvZGUoKHUyNCA+PiAxNikgJiAyNTUsICh1MjQgPj4gOCkgJiAyNTUsIHUyNCAmIDI1NSk7CiAgfQogIHJldHVybiBiaW47Cn0KZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSBleHBlY3RlZCA9IHRydWU7CgogIGlmKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHJldHVybjsKCiAgaWYoCiAgICBhY3R1YWwgIT09IG51bGwgJiYKICAgIGV4cGVjdGVkICE9PSBudWxsICYmCiAgICB0eXBlb2YgYWN0dWFsID09ICdvYmplY3QnICYmCiAgICB0eXBlb2YgZXhwZWN0ZWQgPT0gJ29iamVjdCcgJiYKICAgIGFjdHVhbC50b1N0cmluZygpID09PSBleHBlY3RlZC50b1N0cmluZygpCiAgKQogICAgcmV0dXJuOwoKICB0aHJvdyBFcnJvcigKICAgICdhc3NlcnRpb24gZmFpbGVkOiBnb3QgfCcgKyBhY3R1YWwgKyAnfCcgKyAnLCBleHBlY3RlZCB8JyArIGV4cGVjdGVkICsgJ3wnICsgKG1lc3NhZ2UgPyAnICgnICsgbWVzc2FnZSArICcpJyA6ICcnKQogICk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBlc2NhcGUoc3RyLCBjaGFycyA9IFtdKSB7CiAgY29uc3QgdGFibGUgPSB7CiAgICBbJ1xuJ106ICduJywKICAgIFsnXHInXTogJ3InLAogICAgWydcdCddOiAndCcsCiAgICBbJ1x2J106ICd2JywKICAgIFsnXGInXTogJ2InCiAgfTsKICBmb3IobGV0IGNoIG9mIGNoYXJzKSB0YWJsZVtjaF0gPSBjaDsKICBsZXQgcyA9ICcnOwogIGZvcihsZXQgY2ggb2Ygc3RyKSB7CiAgICBpZih0YWJsZVtjaF0pIHMgKz0gJ1xcJyArICh0YWJsZVtjaF0gPz8gY2gpOwogICAgZWxzZSBzICs9IGNoOwogIH0KICByZXR1cm4gczsKfQoKZXhwb3J0IGZ1bmN0aW9uIHF1b3RlKHN0ciwgcSA9ICciJykgewogIHJldHVybiBxICsgZXNjYXBlKHN0ciwgW3FdKSArIHE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtZW1vaXplKGZuKSB7CiAgbGV0IGNhY2hlID0ge307CiAgcmV0dXJuIChuLCAuLi5yZXN0KSA9PiB7CiAgICBpZihuIGluIGNhY2hlKSByZXR1cm4gY2FjaGVbbl07CiAgICByZXR1cm4gKGNhY2hlW25dID0gZm4obiwgLi4ucmVzdCkpOwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRzZXQodGFyZ2V0LCAuLi5hcmdzKSB7CiAgbGV0IHJldCA9IFtdOwogIGlmKGlzRnVuY3Rpb24odGFyZ2V0KSkgewogICAgcmV0ID0gW3RhcmdldCwgdHlwZW9mIGFyZ3NbMF0gPT0gJ2Z1bmN0aW9uJyA/IGFyZ3NbMF0gOiB0YXJnZXRdOwogIH0gZWxzZSBpZihoYXNHZXRTZXQodGFyZ2V0KSkgewogICAgaWYodGFyZ2V0LmdldCA9PT0gdGFyZ2V0LnNldCkgewogICAgICBjb25zdCBHZXRTZXQgPSAoLi4uYXJncykgPT4gdGFyZ2V0LnNldCguLi5hcmdzKTsKICAgICAgcmV0ID0gW0dldFNldCwgR2V0U2V0XTsKICAgIH0gZWxzZSB7CiAgICAgIHJldCA9IFtrZXkgPT4gdGFyZ2V0LmdldChrZXkpLCAoa2V5LCB2YWx1ZSkgPT4gdGFyZ2V0LnNldChrZXksIHZhbHVlKV07CiAgICAgIC8vY29uc29sZS5sb2coJ2dldHNldCcsIHJldFsxXSArICcnLCB0YXJnZXQuZ2V0ID09PSB0YXJnZXQuc2V0KTsKICAgIH0KICB9IGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkgewogICAgcmV0ID0gW2tleSA9PiB0YXJnZXRba2V5XSwgKGtleSwgdmFsdWUpID0+ICh0YXJnZXRba2V5XSA9IHZhbHVlKV07CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGdldHNldCB1bmtub3duIGFyZ3VtZW50IHR5cGUgJyR7dHlwZW9mIHRhcmdldH0nYCk7CiAgfQogIGlmKGFyZ3MubGVuZ3RoKSB7CiAgICBsZXQgW2dldCwgc2V0XSA9IHJldDsKICAgIHJldCA9IFsoKSA9PiBnZXQoLi4uYXJncyksIHZhbHVlID0+IHNldCguLi5hcmdzLCB2YWx1ZSldOwogIH0KICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gbW9kaWZpZXIoLi4uYXJncykgewogIGxldCBncyA9IGdldHRlcnNldHRlciguLi5hcmdzKTsKICByZXR1cm4gZm4gPT4gewogICAgbGV0IHZhbHVlID0gZ3MoKTsKICAgIHJldHVybiBmbih2YWx1ZSwgbmV3VmFsdWUgPT4gZ3MobmV3VmFsdWUpKTsKICB9Owp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0dGVyKHRhcmdldCwgLi4uYXJncykgewogIGlmKGlzT2JqZWN0KHRhcmdldCkgJiYgaXNGdW5jdGlvbih0YXJnZXQuZ2V0KSkgcmV0dXJuICgpID0+IHRhcmdldC5nZXQoLi4uYXJncyk7CiAgbGV0IHJldDsKICBpZihpc0Z1bmN0aW9uKHRhcmdldCkpIHsKICAgIHJldCA9IHRhcmdldDsKICB9IGVsc2UgaWYoaGFzR2V0U2V0KHRhcmdldCkpIHsKICAgIHJldCA9IGtleSA9PiB0YXJnZXQuZ2V0KGtleSk7CiAgfSBlbHNlIGlmKGlzT2JqZWN0KHRhcmdldCkpIHsKICAgIHJldCA9IGtleSA9PiB0YXJnZXRba2V5XTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgZ2V0dGVyIHVua25vd24gYXJndW1lbnQgdHlwZSAnJHt0eXBlb2YgdGFyZ2V0fSdgKTsKICB9CiAgaWYoYXJncy5sZW5ndGgpIHsKICAgIGxldCBnZXQgPSByZXQ7CiAgICByZXQgPSAoKSA9PiBnZXQoLi4uYXJncyk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXR0ZXIodGFyZ2V0LCAuLi5hcmdzKSB7CiAgaWYoaXNPYmplY3QodGFyZ2V0KSAmJiBpc0Z1bmN0aW9uKHRhcmdldC5zZXQpKSByZXR1cm4gdmFsdWUgPT4gdGFyZ2V0LnNldCguLi5hcmdzLCB2YWx1ZSk7CiAgbGV0IHJldDsKICBpZihpc0Z1bmN0aW9uKHRhcmdldCkpIHsKICAgIHJldCA9IHRhcmdldDsKICB9IGVsc2UgaWYoaGFzR2V0U2V0KHRhcmdldCkpIHsKICAgIHJldCA9IChrZXksIHZhbHVlKSA9PiB0YXJnZXQuc2V0KGtleSwgdmFsdWUpOwogIH0gZWxzZSBpZihpc09iamVjdCh0YXJnZXQpKSB7CiAgICByZXQgPSAoa2V5LCB2YWx1ZSkgPT4gKHRhcmdldFtrZXldID0gdmFsdWUpOwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBzZXR0ZXIgdW5rbm93biBhcmd1bWVudCB0eXBlICcke3R5cGVvZiB0YXJnZXR9J2ApOwogIH0KICBpZihhcmdzLmxlbmd0aCkgewogICAgbGV0IHNldCA9IHJldDsKICAgIHJldCA9IHZhbHVlID0+IHNldCguLi5hcmdzLCB2YWx1ZSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXR0ZXJzZXR0ZXIodGFyZ2V0LCAuLi5hcmdzKSB7CiAgbGV0IGZuOwogIGlmKGlzT2JqZWN0KHRhcmdldCkgJiYgaXNGdW5jdGlvbih0YXJnZXQucmVjZWl2ZXIpKSByZXR1cm4gKC4uLmFyZ3MyKSA9PiB0YXJnZXQucmVjZWl2ZXIoLi4uYXJncywgLi4uYXJnczIpOwogIGlmKGlzRnVuY3Rpb24odGFyZ2V0KSkgewogICAgaWYoaXNGdW5jdGlvbihhcmdzWzBdKSAmJiBhcmdzWzBdICE9PSB0YXJnZXQpIHsKICAgICAgbGV0IHNldHRlciA9IGFyZ3Muc2hpZnQoKTsKICAgICAgZm4gPSAoLi4uYXJncykgPT4gKGFyZ3MubGVuZ3RoID09IDAgPyB0YXJnZXQoKSA6IHNldHRlciguLi5hcmdzKSk7CiAgICB9IGVsc2UgZm4gPSB0YXJnZXQ7CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICBpZih0YXJnZXQuZ2V0ID09PSB0YXJnZXQuc2V0KSBmbiA9ICguLi5hcmdzKSA9PiB0YXJnZXQuc2V0KC4uLmFyZ3MpOwogICAgZWxzZSBmbiA9ICguLi5hcmdzKSA9PiAoYXJncy5sZW5ndGggPCAyID8gdGFyZ2V0LmdldCguLi5hcmdzKSA6IHRhcmdldC5zZXQoLi4uYXJncykpOwogIH0gZWxzZSBpZihpc09iamVjdCh0YXJnZXQpKSB7CiAgICBmbiA9ICguLi5hcmdzKSA9PiB7CiAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGFyZ3M7CiAgICAgIGlmKGFyZ3MubGVuZ3RoID09IDEpIHJldHVybiB0YXJnZXRba2V5XTsKICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTsKICAgIH07CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGdldHRlcnNldHRlciB1bmtub3duIGFyZ3VtZW50IHR5cGUgJyR7dHlwZW9mIHRhcmdldH0nYCk7CiAgfQogIGlmKGZuICE9PSB0YXJnZXQpIGRlZmluZShmbiwgeyByZWNlaXZlcjogdGFyZ2V0IH0pOwogIGlmKGFyZ3MubGVuZ3RoKSByZXR1cm4gKC4uLmFyZ3MyKSA9PiBmbiguLi5hcmdzLCAuLi5hcmdzMik7CiAgcmV0dXJuIGZuOwp9CgpleHBvcnQgZnVuY3Rpb24gaGFzR2V0U2V0KG9iaikgewogIHJldHVybiBpc09iamVjdChvYmopICYmIFsnZ2V0JywgJ3NldCddLmV2ZXJ5KG0gPT4gdHlwZW9mIG9ialttXSA9PSAnZnVuY3Rpb24nKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1hcE9iamVjdCh0YXJnZXQpIHsKICBsZXQgb2JqOwogIGlmKGhhc0dldFNldCh0YXJnZXQucmVjZWl2ZXIpKSByZXR1cm4gdGFyZ2V0LnJlY2VpdmVyOwogIGlmKGhhc0dldFNldCh0YXJnZXQpKSBvYmogPSB0YXJnZXQ7CiAgZWxzZSBpZih0eXBlb2YgdGFyZ2V0ID09ICdmdW5jdGlvbicpIG9iaiA9IHsgZ2V0OiB0YXJnZXQsIHNldDogdGFyZ2V0IH07CiAgZWxzZSBpZihpc09iamVjdCh0YXJnZXQpKQogICAgb2JqID0gewogICAgICBzZXQ6IChrZXksIHZhbHVlKSA9PiAodGFyZ2V0W2tleV0gPSB2YWx1ZSksCiAgICAgIGdldDoga2V5ID0+IHRhcmdldFtrZXldCiAgICB9OwogIGlmKG9iaiAhPT0gdGFyZ2V0KSBkZWZpbmUob2JqLCB7IHJlY2VpdmVyOiB0YXJnZXQgfSk7CiAgcmV0dXJuIG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIG9uY2UoZm4sIHRoaXNBcmcsIG1lbW9GbikgewogIGxldCByZXQsCiAgICByYW4gPSBmYWxzZTsKCiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgIGlmKCFyYW4pIHsKICAgICAgcmFuID0gdHJ1ZTsKICAgICAgcmV0ID0gZm4uYXBwbHkodGhpc0FyZyB8fCB0aGlzLCBhcmdzKTsKICAgIH0gZWxzZSBpZih0eXBlb2YgbWVtb0ZuID09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0ID0gbWVtb0ZuKHJldCk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH07Cn0KCmNvbnN0IGF0ZXhpdF9mdW5jdGlvbnMgPSBbXTsKY29uc3QgYXRleGl0X2luc3RhbGwgPSBvbmNlKGNhbGxiYWNrID0+IHsKICAvLyBhdHRhY2ggdXNlciBjYWxsYmFjayB0byB0aGUgcHJvY2VzcyBldmVudCBlbWl0dGVyCiAgLy8gaWYgbm8gY2FsbGJhY2ssIGl0IHdpbGwgc3RpbGwgZXhpdCBncmFjZWZ1bGx5IG9uIEN0cmwtQwogIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9PcDsKICBwcm9jZXNzLm9uKCdjbGVhbnVwJywgY2FsbGJhY2spOwoKICAvLyBkbyBhcHAgc3BlY2lmaWMgY2xlYW5pbmcgYmVmb3JlIGV4aXRpbmcKICBwcm9jZXNzLm9uKCdleGl0JywgZnVuY3Rpb24oKSB7CiAgICBwcm9jZXNzLmVtaXQoJ2NsZWFudXAnKTsKICB9KTsKCiAgLy8gY2F0Y2ggY3RybCtjIGV2ZW50IGFuZCBleGl0IG5vcm1hbGx5CiAgcHJvY2Vzcy5vbignU0lHSU5UJywgZnVuY3Rpb24oKSB7CiAgICBjb25zb2xlLmxvZygnQ3RybC1DLi4uJyk7CiAgICBwcm9jZXNzLmV4aXQoMik7CiAgfSk7CgogIC8vY2F0Y2ggdW5jYXVnaHQgZXhjZXB0aW9ucywgdHJhY2UsIHRoZW4gZXhpdCBub3JtYWxseQogIHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgZnVuY3Rpb24oZSkgewogICAgY29uc29sZS5sb2coJ1VuY2F1Z2h0IEV4Y2VwdGlvbi4uLicpOwogICAgY29uc29sZS5sb2coZS5zdGFjayk7CiAgICBwcm9jZXNzLmV4aXQoOTkpOwogIH0pOwp9KTsKCmV4cG9ydCBmdW5jdGlvbiBhdGV4aXQoZm4pIHsKICBhdGV4aXRfZnVuY3Rpb25zLnB1c2goZm4pOwoKICBpZihnbG9iYWxUaGlzLnByb2Nlc3MgJiYgJ29uJyBpbiBwcm9jZXNzKSB7CiAgICBhdGV4aXRfaW5zdGFsbCgoKSA9PiB7CiAgICAgIGZvcihsZXQgZm4gb2YgYXRleGl0X2Z1bmN0aW9ucykgZm4oKTsKICAgIH0pOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3IobXMpIHsKICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBkZWZpbmUob2JqLCAuLi5hcmdzKSB7CiAgZm9yKGxldCBwcm9wcyBvZiBhcmdzKSB7CiAgICBsZXQgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHByb3BzKTsKICAgIGZvcihsZXQgcHJvcCBpbiBkZXNjKSB7CiAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGRlc2NbcHJvcF07CiAgICAgIGRlc2NbcHJvcF0uZW51bWVyYWJsZSA9IGZhbHNlOwogICAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJykgZGVzY1twcm9wXS53cml0YWJsZSA9IGZhbHNlOwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCBkZXNjKTsKICB9CiAgcmV0dXJuIG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUdldHRlcihvYmosIGtleSwgZm4sIGVudW1lcmFibGUgPSBmYWxzZSkgewogIGlmKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICBlbnVtZXJhYmxlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIGdldDogZm4KICAgIH0pOwogIHJldHVybiBvYmo7Cn0KCmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVHZXR0ZXJTZXR0ZXIob2JqLCBrZXksIGcsIHMsIGVudW1lcmFibGUgPSBmYWxzZSkgewogIGlmKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICBnZXQ6IGcsCiAgICAgIHNldDogcywKICAgICAgZW51bWVyYWJsZQogICAgfSk7CiAgcmV0dXJuIG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUdldHRlcnNTZXR0ZXJzKG9iaiwgZ2V0dGVyc1NldHRlcnMpIHsKICBmb3IobGV0IG5hbWUgaW4gZ2V0dGVyc1NldHRlcnMpIGRlZmluZUdldHRlclNldHRlcihvYmosIG5hbWUsIGdldHRlcnNTZXR0ZXJzW25hbWVdLCBnZXR0ZXJzU2V0dGVyc1tuYW1lXSk7CiAgcmV0dXJuIG9iajsKfQoKLypleHBvcnQgZnVuY3Rpb24gZGVmaW5lR2V0dGVyc1NldHRlcnMob2JqLCBnZXR0ZXJzU2V0dGVycywgZW51bWVyYWJsZSA9IGZhbHNlKSB7CiAgbGV0IHByb3BzID0ge307CiAgdHJ5IHsKICAgIGZvcihsZXQgbmFtZSBpbiBnZXR0ZXJzU2V0dGVycykgcHJvcHNbbmFtZV0gPSB7IGdldDogZ2V0dGVyc1NldHRlcnNbbmFtZV0sIHNldDogZ2V0dGVyc1NldHRlcnNbbmFtZV0sIGVudW1lcmFibGUgfTsKICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHByb3BzKTsKICB9IGNhdGNoKGUpIHsKICAgIGZvcihsZXQgbmFtZSBpbiBnZXR0ZXJzU2V0dGVycykKICAgICAgdHJ5IHsKICAgICAgICBkZWZpbmVHZXR0ZXJTZXR0ZXIob2JqLCBuYW1lLCBnZXR0ZXJzU2V0dGVyc1tuYW1lXSwgZ2V0dGVyc1NldHRlcnNbbmFtZV0pOwogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRmFpbGVkIHNldHRpbmcgcHJvcGVydHkgJyR7bmFtZX0nYCk7CiAgICAgIH0KICAgIHJldHVybiBvYmo7CiAgfQp9Ki8KCmV4cG9ydCBmdW5jdGlvbiogcHJvdG90eXBlSXRlcmF0b3Iob2JqLCBwcmVkID0gKG9iaiwgZGVwdGgpID0+IHRydWUpIHsKICBsZXQgZGVwdGggPSAwOwoKICB3aGlsZShvYmopIHsKICAgIGlmKHByZWQob2JqLCBkZXB0aCkpIHlpZWxkIG9iajsKICAgIGxldCB0bXAgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKTsKICAgIGlmKHRtcCA9PT0gb2JqKSBicmVhazsKICAgIG9iaiA9IHRtcDsKICAgICsrZGVwdGg7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24ga2V5cyhvYmosIHN0YXJ0ID0gMCwgZW5kID0gb2JqID0+IG9iaiA9PT0gT2JqZWN0LnByb3RvdHlwZSkgewogIGxldCBwcmVkLAogICAgYSA9IFtdLAogICAgZGVwdGggPSAwOwoKICBpZighaXNGdW5jdGlvbihlbmQpKSB7CiAgICBsZXQgbiA9IGVuZDsKICAgIHByZWQgPSAob2JqLCBkZXB0aCkgPT4gZGVwdGggPj0gc3RhcnQgJiYgZGVwdGggPCBuOwogICAgZW5kID0gKCkgPT4gZmFsc2U7CiAgfSBlbHNlIHsKICAgIHByZWQgPSAob2JqLCBkZXB0aCkgPT4gZGVwdGggPj0gc3RhcnQ7CiAgfQoKICBmb3IobGV0IHByb3RvIG9mIHByb3RvdHlwZUl0ZXJhdG9yKG9iaiwgcHJlZCkpIHsKICAgIGlmKGVuZChwcm90bywgZGVwdGgrKykpIGJyZWFrOwogICAgYS5wdXNoKC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvdG8pLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bykpKTsKICB9CgogIHJldHVybiBbLi4ubmV3IFNldChhKV07Cn0KCmV4cG9ydCBmdW5jdGlvbiBlbnRyaWVzKG9iaiwgc3RhcnQgPSAwLCBlbmQgPSBvYmogPT4gb2JqID09PSBPYmplY3QucHJvdG90eXBlKSB7CiAgbGV0IGEgPSBbXTsKICBmb3IobGV0IGtleSBvZiBrZXlzKG9iaiwgc3RhcnQsIGVuZCkpIGEucHVzaChba2V5LCBvYmpba2V5XV0pOwogIHJldHVybiBhOwp9CgpleHBvcnQgZnVuY3Rpb24gdmFsdWVzKG9iaiwgc3RhcnQgPSAwLCBlbmQgPSBvYmogPT4gb2JqID09PSBPYmplY3QucHJvdG90eXBlKSB7CiAgbGV0IGEgPSBbXTsKICBmb3IobGV0IGtleSBvZiBrZXlzKG9iaiwgc3RhcnQsIGVuZCkpIGEucHVzaChvYmpba2V5XSk7CiAgcmV0dXJuIGE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRNZXRob2ROYW1lcyhvYmosIGRlcHRoID0gMSwgc3RhcnQgPSAwKSB7CiAgbGV0IG5hbWVzID0gW107CiAgZm9yKGxldCBuIG9mIGtleXMob2JqLCBzdGFydCwgc3RhcnQgKyBkZXB0aCkpIHsKICAgIHRyeSB7CiAgICAgIGlmKGlzRnVuY3Rpb24ob2JqW25dKSkgbmFtZXMucHVzaChuKTsKICAgIH0gY2F0Y2goZSkge30KICB9CiAgcmV0dXJuIG5hbWVzOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0TWV0aG9kcyhvYmosIGRlcHRoID0gMSwgc3RhcnQgPSAwKSB7CiAgbGV0IG1ldGhvZHMgPSB7fTsKCiAgZm9yKGxldCBuIG9mIGdldE1ldGhvZE5hbWVzKG9iaiwgZGVwdGgsIHN0YXJ0KSkgbWV0aG9kc1tuXSA9IG9ialtuXTsKCiAgcmV0dXJuIG1ldGhvZHM7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwcm9wZXJ0aWVzKG9iaiwgb3B0aW9ucyA9IHsgZW51bWVyYWJsZTogdHJ1ZSB9KSB7CiAgbGV0IGRlc2MgPSB7fTsKICBjb25zdCB7IG1lbW9pemU6IG1lbW8gPSBmYWxzZSwgLi4ub3B0cyB9ID0gb3B0aW9uczsKICBjb25zdCBtZm4gPSBtZW1vID8gZm4gPT4gbWVtb2l6ZShmbikgOiBmbiA9PiBmbjsKICBmb3IobGV0IHByb3Agb2Yga2V5cyhvYmopKSB7CiAgICBpZihBcnJheS5pc0FycmF5KG9ialtwcm9wXSkpIHsKICAgICAgY29uc3QgW2dldCwgc2V0XSA9IG9ialtwcm9wXTsKICAgICAgZGVzY1twcm9wXSA9IHsgLi4ub3B0cywgZ2V0LCBzZXQgfTsKICAgIH0gZWxzZSBpZihpc0Z1bmN0aW9uKG9ialtwcm9wXSkpIHsKICAgICAgZGVzY1twcm9wXSA9IHsgLi4ub3B0cywgZ2V0OiBtZm4ob2JqW3Byb3BdKSB9OwogICAgfQogIH0KICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe30sIGRlc2MpOwp9CgpleHBvcnQgZnVuY3Rpb24gd2Vha0Fzc2lnbihvYmosIC4uLmFyZ3MpIHsKICBsZXQgZGVzYyA9IHt9OwogIGZvcihsZXQgb3RoZXIgb2YgYXJncykgewogICAgbGV0IG90aGVyRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG90aGVyKTsKICAgIGZvcihsZXQga2V5IGluIG90aGVyRGVzYykKICAgICAgaWYoIShrZXkgaW4gb2JqKSAmJiBkZXNjW2tleV0gPT09IHVuZGVmaW5lZCAmJiBvdGhlckRlc2Nba2V5XSAhPT0gdW5kZWZpbmVkKSBkZXNjW2tleV0gPSBvdGhlckRlc2Nba2V5XTsKICB9CiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwgZGVzYyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRQcm90b3R5cGVDaGFpbihvYmosIGxpbWl0ID0gLTEsIHN0YXJ0ID0gMCkgewogIGxldCBpID0gLTEsCiAgICByZXQgPSBbXTsKICBkbyB7CiAgICBpZihpID49IHN0YXJ0ICYmIChsaW1pdCA9PSAtMSB8fCBpIDwgc3RhcnQgKyBsaW1pdCkpIHJldC5wdXNoKG9iaik7CiAgICBpZihvYmogPT09IE9iamVjdC5wcm90b3R5cGUgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIGJyZWFrOwogICAgKytpOwogIH0gd2hpbGUoKG9iaiA9IG9iai5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpKTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JDaGFpbihvYmosIC4uLnJhbmdlKSB7CiAgbGV0IHJldCA9IFtdOwogIHB1c2hVbmlxdWUocmV0LCBvYmouY29uc3RydWN0b3IpOwogIGZvcihsZXQgcHJvdG8gb2YgZ2V0UHJvdG90eXBlQ2hhaW4ob2JqLCAuLi5yYW5nZSkpIHB1c2hVbmlxdWUocmV0LCBwcm90by5jb25zdHJ1Y3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhhc1Byb3RvdHlwZShvYmosIHByb3RvKSB7CiAgcmV0dXJuIGdldFByb3RvdHlwZUNoYWluKG9iaikuaW5kZXhPZihwcm90bykgIT0gLTE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIoc2VxLCBwcmVkLCB0aGlzQXJnKSB7CiAgaWYoaXNPYmplY3QocHJlZCkgJiYgcHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgbGV0IHJlID0gcHJlZDsKICAgIHByZWQgPSAoZWwsIGkpID0+IHJlLnRlc3QoZWwpOwogIH0KICBsZXQgciA9IFtdLAogICAgaSA9IDA7CiAgZm9yKGxldCBlbCBvZiBzZXEpIHsKICAgIGlmKHByZWQuY2FsbCh0aGlzQXJnLCBlbCwgaSsrLCBzZXEpKSByLnB1c2goZWwpOwogIH0KICByZXR1cm4gcjsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcktleXMociwgbmVlZGxlcywga2VlcCA9IHRydWUpIHsKICBsZXQgcHJlZDsKICBpZihpc0Z1bmN0aW9uKG5lZWRsZXMpKSB7CiAgICBwcmVkID0gbmVlZGxlczsKICB9IGVsc2UgewogICAgaWYoIUFycmF5LmlzQXJyYXkobmVlZGxlcykpIG5lZWRsZXMgPSBbLi4ubmVlZGxlc107CiAgICBwcmVkID0ga2V5ID0+IChuZWVkbGVzLmluZGV4T2Yoa2V5KSAhPSAtMSkgPT09IGtlZXA7CiAgfQogIHJldHVybiBPYmplY3Qua2V5cyhyKQogICAgLmZpbHRlcihwcmVkKQogICAgLnJlZHVjZSgob2JqLCBrZXkpID0+IHsKICAgICAgb2JqW2tleV0gPSByW2tleV07CiAgICAgIHJldHVybiBvYmo7CiAgICB9LCB7fSk7Cn0KCmV4cG9ydCBjb25zdCBjdXJyeSA9CiAgKGYsIGFyciA9IFtdLCBsZW5ndGggPSBmLmxlbmd0aCkgPT4KICAoLi4uYXJncykgPT4KICAgIChhID0+IChhLmxlbmd0aCA9PT0gbGVuZ3RoID8gZiguLi5hKSA6IGN1cnJ5KGYsIGEpKSkoWy4uLmFyciwgLi4uYXJnc10pOwoKZXhwb3J0IGNvbnN0IGNsYW1wID0gY3VycnkoKG1pbiwgbWF4LCB2YWx1ZSkgPT4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSkpOwoKZXhwb3J0IGZ1bmN0aW9uKiBzcGxpdChidWYsIC4uLnBvaW50cykgewogIHBvaW50cy5zb3J0KCk7CiAgY29uc3Qgc3BsaXRBdCA9IChiLCBwb3MsIGxlbikgPT4gewogICAgbGV0IHIgPSBwb3MgPCBiLmJ5dGVMZW5ndGggPyBbc2xpY2UoYiwgMCwgcG9zKSwgc2xpY2UoYiwgcG9zKV0gOiBbbnVsbCwgYl07CiAgICByZXR1cm4gcjsKICB9OwogIGxldCBwcmV2LAogICAgbGVuID0gMDsKICBmb3IobGV0IG9mZnNldCBvZiBwb2ludHMpIHsKICAgIGxldCBhdCA9IG9mZnNldCAtIGxlbjsKICAgIFtwcmV2LCBidWZdID0gc3BsaXRBdChidWYsIGF0LCBsZW4pOwogICAgaWYocHJldikgewogICAgICB5aWVsZCBwcmV2OwogICAgICBsZW4gPSBvZmZzZXQ7CiAgICB9CiAgfQogIGlmKGJ1ZikgeWllbGQgYnVmOwp9CgpleHBvcnQgY29uc3QgbWF0Y2hBbGwgPSBjdXJyeShmdW5jdGlvbiogKHJlLCBzdHIpIHsKICBsZXQgbWF0Y2g7CiAgcmUgPSByZSBpbnN0YW5jZW9mIFJlZ0V4cCA/IHJlIDogbmV3IFJlZ0V4cChBcnJheS5pc0FycmF5KHJlKSA/ICcoJyArIHJlLmpvaW4oJ3wnKSArICcpJyA6IHJlLCAnZycpOwogIGRvIHsKICAgIGlmKChtYXRjaCA9IHJlLmV4ZWMoc3RyKSkpIHlpZWxkIG1hdGNoOwogIH0gd2hpbGUobWF0Y2ggIT0gbnVsbCk7Cn0pOwoKZXhwb3J0IGZ1bmN0aW9uIGJpbmRQcm9wZXJ0aWVzKG9iaiwgdGFyZ2V0LCBwcm9wcywgZ2VuKSB7CiAgaWYocHJvcHMgaW5zdGFuY2VvZiBBcnJheSkgcHJvcHMgPSBPYmplY3QuZnJvbUVudHJpZXMocHJvcHMubWFwKG5hbWUgPT4gW25hbWUsIG5hbWVdKSk7CiAgY29uc3QgW3Byb3BNYXAsIHByb3BOYW1lc10gPSBBcnJheS5pc0FycmF5KHByb3BzKQogICAgPyBbcHJvcHMucmVkdWNlKChhY2MsIG5hbWUpID0+ICh7IC4uLmFjYywgW25hbWVdOiBuYW1lIH0pLCB7fSksIHByb3BzXQogICAgOiBbcHJvcHMsIE9iamVjdC5rZXlzKHByb3BzKV07CiAgZ2VuID8/PSBwID0+IHYgPT4gdiA9PT0gdW5kZWZpbmVkID8gdGFyZ2V0W3Byb3BNYXBbcF1dIDogKHRhcmdldFtwcm9wTWFwW3BdXSA9IHYpOwogIGNvbnN0IHByb3BHZXRTZXQgPSBwcm9wTmFtZXMKICAgIC5tYXAoayA9PiBbaywgcHJvcE1hcFtrXV0pCiAgICAucmVkdWNlKAogICAgICAoYSwgW2ssIHZdKSA9PiAoewogICAgICAgIC4uLmEsCiAgICAgICAgW2tdOiBpc0Z1bmN0aW9uKHYpCiAgICAgICAgICA/ICguLi5hcmdzKSA9PiB2LmNhbGwodGFyZ2V0LCBrLCAuLi5hcmdzKQogICAgICAgICAgOiAoZ2VuICYmIGdlbihrKSkgfHwgKCguLi5hcmdzKSA9PiAoYXJncy5sZW5ndGggPiAwID8gKHRhcmdldFtrXSA9IGFyZ3NbMF0pIDogdGFyZ2V0W2tdKSkKICAgICAgfSksCiAgICAgIHt9CiAgICApOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKAogICAgb2JqLAogICAgcHJvcE5hbWVzLnJlZHVjZSgKICAgICAgKGEsIGspID0+IHsKICAgICAgICBjb25zdCBwcm9wID0gcHJvcHNba107CiAgICAgICAgY29uc3QgZ2V0X3NldCA9IHByb3BHZXRTZXRba107CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmEsCiAgICAgICAgICBba106IHsKICAgICAgICAgICAgZ2V0OiBnZXRfc2V0LAogICAgICAgICAgICBzZXQ6IGdldF9zZXQsCiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICB7CiAgICAgICAgX19nZXR0ZXJfc2V0dGVyX186IHsgdmFsdWU6IGdlbiwgZW51bWVyYWJsZTogZmFsc2UgfSwKICAgICAgICBfX2JvdW5kX3RhcmdldF9fOiB7IHZhbHVlOiB0YXJnZXQsIGVudW1lcmFibGU6IGZhbHNlIH0KICAgICAgfQogICAgKQogICk7CiAgcmV0dXJuIG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIGltbXV0YWJsZUNsYXNzKG9yaWcsIC4uLnByb3RvKSB7CiAgbGV0IG5hbWUgPSBmdW5jdGlvbk5hbWUob3JpZykucmVwbGFjZSgvTXV0YWJsZS9nLCAnJyk7CiAgbGV0IGltTmFtZSA9ICdJbW11dGFibGUnICsgbmFtZTsKICBwcm90byA9IHByb3RvIHx8IFtdOwogIGxldCBpbml0aWFsUHJvdG8gPSBwcm90by5tYXAocCA9PgogICAgaXNBcnJvdyhwKQogICAgICA/IHAKICAgICAgOiBjdG9yID0+IHsKICAgICAgICAgIGZvcihsZXQgbiBpbiBwKSBjdG9yLnByb3RvdHlwZVtuXSA9IHBbbl07CiAgICAgICAgfQogICk7CiAgbGV0IGJvZHkgPSBgY2xhc3MgJHtpbU5hbWV9IGV4dGVuZHMgJHtuYW1lfSB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcbiAgICBpZihuZXcudGFyZ2V0ID09PSAke2ltTmFtZX0pXG4gICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgfVxufTtcblxuJHtpbU5hbWV9LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9ICR7aW1OYW1lfTtcblxucmV0dXJuICR7aW1OYW1lfTtgOwogIGZvcihsZXQgcCBvZiBpbml0aWFsUHJvdG8pIHAob3JpZyk7CiAgbGV0IGN0b3I7CiAgbGV0IGltbSA9IGJhc2UgPT4gewogICAgbGV0IGNsczsKICAgIGNscyA9IGNsYXNzIGV4dGVuZHMgYmFzZSB7CiAgICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgICAgICBzdXBlciguLi5hcmdzKTsKICAgICAgICBpZihuZXcudGFyZ2V0ID09PSBjbHMpIHJldHVybiBPYmplY3QuZnJlZXplKHRoaXMpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIGNsczsKICB9OwogIGN0b3IgPSBpbW0ob3JpZyk7CiAgbGV0IHNwZWNpZXMgPSBjdG9yOwogIHJldHVybiBjdG9yOwp9CgovLyB0aW1lIGEgZ2l2ZW4gZnVuY3Rpb24KZXhwb3J0IGZ1bmN0aW9uIGluc3RydW1lbnQoCiAgZm4sCiAgbG9nID0gKGR1cmF0aW9uLCBuYW1lLCBhcmdzLCByZXQpID0+CiAgICBjb25zb2xlLmxvZygKICAgICAgYGZ1bmN0aW9uICcke25hbWV9J2AgKwogICAgICAgIChyZXQgIT09IHVuZGVmaW5lZCA/IGAgez0gJHtlc2NhcGUocmV0ICsgJycpLnN1YnN0cmluZygwLCAxMDApICsgJy4uLid9fWAgOiAnJykgKwogICAgICAgIGAgdGltaW5nOiAke2R1cmF0aW9uLnRvRml4ZWQoMyl9bXNgCiAgICApLAogIGxvZ0ludGVydmFsID0gMCAvLzEwMDAKKSB7CiAgLy8gY29uc3QgeyBub3csIGhydGltZSwgZnVuY3Rpb25OYW1lIH0gPSBVdGlsOwogIGxldCBsYXN0ID0gRGF0ZS5ub3coKTsKICBsZXQgZHVyYXRpb24gPSAwLAogICAgdGltZXMgPSAwOwogIGNvbnN0IG5hbWUgPSBmdW5jdGlvbk5hbWUoZm4pIHx8ICc8YW5vbnltb3VzPic7CiAgY29uc3QgYXN5bmNocm9ub3VzID0gaXNBc3luYyhmbikgfHwgaXNBc3luYyhub3cpOwogIGNvbnN0IGRvTG9nID0gYXN5bmNocm9ub3VzCiAgICA/IGFzeW5jIChhcmdzLCByZXQpID0+IHsKICAgICAgICBsZXQgdCA9IERhdGUubm93KCk7CiAgICAgICAgaWYodCAtIChhd2FpdCBsYXN0KSA+PSBsb2dJbnRlcnZhbCkgewogICAgICAgICAgbG9nKGR1cmF0aW9uIC8gdGltZXMsIG5hbWUsIGFyZ3MsIHJldCk7CiAgICAgICAgICBkdXJhdGlvbiA9IHRpbWVzID0gMDsKICAgICAgICAgIGxhc3QgPSB0OwogICAgICAgIH0KICAgICAgfQogICAgOiAoYXJncywgcmV0KSA9PiB7CiAgICAgICAgbGV0IHQgPSBEYXRlLm5vdygpOwogICAgICAgIC8vY29uc29sZS5sb2coJ2RvTG9nJywgeyBwYXNzZWQ6IHQgLSBsYXN0LCBsb2dJbnRlcnZhbCB9KTsKICAgICAgICBpZih0IC0gbGFzdCA+PSBsb2dJbnRlcnZhbCkgewogICAgICAgICAgbG9nKGR1cmF0aW9uIC8gdGltZXMsIG5hbWUsIGFyZ3MsIHJldCk7CiAgICAgICAgICBkdXJhdGlvbiA9IHRpbWVzID0gMDsKICAgICAgICAgIGxhc3QgPSB0OwogICAgICAgIH0KICAgICAgfTsKCiAgcmV0dXJuIGFzeW5jaHJvbm91cwogICAgPyBhc3luYyBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpOwogICAgICAgIGxldCByZXQgPSBhd2FpdCBmbi5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICBkdXJhdGlvbiArPSBEYXRlLm5vdygpIC0gc3RhcnQ7CiAgICAgICAgdGltZXMrKzsKICAgICAgICBhd2FpdCBkb0xvZyhhcmdzLCByZXQpOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgIDogZnVuY3Rpb24oLi4uYXJncykgewogICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTsKICAgICAgICBsZXQgcmV0ID0gZm4uYXBwbHkodGhpcywgYXJncyk7CiAgICAgICAgZHVyYXRpb24gKz0gRGF0ZS5ub3coKSAtIHN0YXJ0OwogICAgICAgIHRpbWVzKys7CiAgICAgICAgZG9Mb2coYXJncywgcmV0KTsKICAgICAgICByZXR1cm4gcmV0OwogICAgICB9Owp9CgpleHBvcnQgY29uc3QgaGFzaCA9IChuZXdNYXAgPSAoKSA9PiBuZXcgTWFwKCkpID0+IHsKICBsZXQgbWFwID0gbmV3TWFwKCk7CiAgbGV0IGNhY2hlID0gbWVtb2l6ZSgoLi4uYXJncykgPT4gZ2V0dGVyc2V0dGVyKG5ld01hcCguLi5hcmdzKSksIG5ldyBNYXAoKSk7CgogIC8vIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KGNhY2hlKTsKCiAgcmV0dXJuIHsKICAgIGdldChwYXRoKSB7CiAgICAgIGxldCBpID0gMCwKICAgICAgICBvYmogPSBtYXA7CiAgICAgIGZvcihsZXQgcGFydCBvZiBwYXRoKSB7CiAgICAgICAgbGV0IGNhY2hlZm4gPSBjYWNoZShvYmopID8/IGdldHRlcihvYmopOwogICAgICAgIGNvbnNvbGUubG9nKCdjYWNoZScsIHsgaSwgY2FjaGUgfSk7CiAgICAgICAgb2JqID0gY2FjaGVmbihwYXJ0KTsKICAgICAgICBjb25zb2xlLmxvZygnY2FjaGVmbicsIHsgaSwgY2FjaGVmbiB9KTsKICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfSwKICAgIHNldChwYXRoLCB2YWx1ZSkgewogICAgICBsZXQgaSA9IDAsCiAgICAgICAgb2JqID0gbWFwOwogICAgICBsZXQga2V5ID0gcGF0aC5wb3AoKTsKCiAgICAgIGZvcihsZXQgcGFydCBvZiBwYXRoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2NhY2hlJywgeyBwYXJ0LCBvYmogfSk7CiAgICAgICAgbGV0IGNhY2hlZm4gPSBjYWNoZShvYmoucmVjZWl2ZXIgPz8gb2JqKTsKICAgICAgICBjb25zb2xlLmxvZygnY2FjaGVmbicsIHsgaSwgY2FjaGVmbiB9KTsKICAgICAgICBvYmogPSBjYWNoZWZuKHBhcnQpID8/IChjYWNoZWZuKHBhcnQsIGdldHRlcnNldHRlcihuZXdNYXAoKSkpLCBjYWNoZWZuKHBhcnQpKTsKICAgICAgICBjb25zb2xlLmxvZygnY2FjaGVmbicsIHsgb2JqIH0pOwogICAgICB9CiAgICAgIHJldHVybiBvYmooa2V5LCB2YWx1ZSk7CiAgICB9CiAgfTsKfTsKCmV4cG9ydCBjb25zdCBjYXRjaGFibGUgPSBmdW5jdGlvbiBDYXRjaGFibGUoc2VsZikgewogIGFzc2VydChpc0Z1bmN0aW9uKHNlbGYpKTsKCiAgaWYoIShzZWxmIGluc3RhbmNlb2YgY2F0Y2hhYmxlKSkgT2JqZWN0LnNldFByb3RvdHlwZU9mKHNlbGYsIGNhdGNoYWJsZS5wcm90b3R5cGUpOwogIGlmKCdjb25zdHJ1Y3RvcicgaW4gc2VsZikgc2VsZi5jb25zdHJ1Y3RvciA9IGNhdGNoYWJsZTsKCiAgcmV0dXJuIHNlbGY7Cn07CgpPYmplY3QuYXNzaWduKGNhdGNoYWJsZSwgewogIFtTeW1ib2wuc3BlY2llc106IGNhdGNoYWJsZSwKICBwcm90b3R5cGU6IE9iamVjdC5hc3NpZ24oZnVuY3Rpb24gKCkge30sIHsKICAgIHRoZW4oZm4pIHsKICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdKCguLi5hcmdzKSA9PiB7CiAgICAgICAgbGV0IHJlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgcmVzdWx0ID0gdGhpcyguLi5hcmdzKTsKICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHJldHVybiBmbihyZXN1bHQpOwogICAgICB9KTsKICAgIH0sCiAgICBjYXRjaChmbikgewogICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10oKC4uLmFyZ3MpID0+IHsKICAgICAgICBsZXQgcmVzdWx0OwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXN1bHQgPSB0aGlzKC4uLmFyZ3MpOwogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgcmV0dXJuIGZuKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9KTsKICAgIH0KICB9KQp9KTsKCmV4cG9ydCBmdW5jdGlvbiBpc051bWVyaWModmFsdWUpIHsKICBmb3IobGV0IGYgb2YgW3YgPT4gK3YsIHBhcnNlSW50LCBwYXJzZUZsb2F0XSkgaWYoIWlzTmFOKGYodmFsdWUpKSkgcmV0dXJuIHRydWU7CiAgcmV0dXJuIGZhbHNlOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSkgewogIHJldHVybiAhaXNOYU4oK3ZhbHVlKSAmJiBNYXRoLmZsb29yKCt2YWx1ZSkgKyAnJyA9PSB2YWx1ZSArICcnOwp9CgpleHBvcnQgZnVuY3Rpb24gbnVtZXJpY0luZGV4KHZhbHVlKSB7CiAgcmV0dXJuIGlzSW5kZXgodmFsdWUpID8gK3ZhbHVlIDogdmFsdWU7Cn0KCmV4cG9ydCBmdW5jdGlvbiBoaXN0b2dyYW0oYXJyLCBvdXQgPSBuZXcgTWFwKCkpIHsKICBsZXQgW2dldCwgc2V0XSA9IGdldHNldChvdXQpOwoKICBjb25zdCBpbmNyID0ga2V5ID0+IHNldChrZXksIChnZXQoa2V5KSA/PyAwKSArIDEpOwogIGZvcihsZXQgaXRlbSBvZiBhcnIpIHsKICAgIGluY3IoaXRlbSk7CiAgfQogIHJldHVybiBvdXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwcm9wZXJ0eUxvb2t1cEhhbmRsZXJzKGhhbmRsZXIgPSBrZXkgPT4gbnVsbCkgewogIGxldCBoYW5kbGVycyA9IHsKICAgIGdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHsKICAgICAgcmV0dXJuIGhhbmRsZXIoa2V5KTsKICAgIH0KICB9OwogIGxldCB0bXAgPSBoYW5kbGVyKCk7CgogIGlmKCFpc1N0cmluZyh0bXApKQogICAgdHJ5IHsKICAgICAgbGV0IGEgPSBBcnJheS5pc0FycmF5KHRtcCkgPyB0bXAgOiBbLi4udG1wXTsKICAgICAgaWYoYSkKICAgICAgICBoYW5kbGVycy5vd25LZXlzID0gZnVuY3Rpb24odGFyZ2V0KSB7CiAgICAgICAgICByZXR1cm4gaGFuZGxlcigpOwogICAgICAgIH07CiAgICB9IGNhdGNoKGUpIHt9CgogIHJldHVybiBoYW5kbGVyczsKfQoKZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5TG9va3VwKC4uLmFyZ3MpIHsKICBsZXQgW29iaiA9IHt9LCBoYW5kbGVyID0ga2V5ID0+IG51bGxdID0gYXJncy5sZW5ndGggPT0gMSA/IFt7fSwgLi4uYXJnc10gOiBhcmdzOwoKICByZXR1cm4gbmV3IFByb3h5KAogICAgb2JqLAogICAgcHJvcGVydHlMb29rdXBIYW5kbGVycyhmdW5jdGlvbiAoLi4uYXJncykgewogICAgICBpZihhcmdzLmxlbmd0aCA+PSAxICYmIGFyZ3NbMF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGxldCBba2V5XSA9IGFyZ3M7CiAgICAgICAgaWYoa2V5IGluIG9iaikgcmV0dXJuIG9ialtrZXldOwoKICAgICAgICByZXR1cm4gaGFuZGxlcihrZXkpOwogICAgICB9CiAgICAgIHJldHVybiBoYW5kbGVyKCk7CiAgICB9KQogICk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBhYmJyZXZpYXRlKHN0ciwgbWF4ID0gNDAsIHN1ZmZpeCA9ICcuLi4nKSB7CiAgbWF4ID0gK21heDsKICBpZihpc05hTihtYXgpKSBtYXggPSBJbmZpbml0eTsKICBpZihBcnJheS5pc0FycmF5KHN0cikpIHsKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChzdHIsIDAsIE1hdGgubWluKHN0ci5sZW5ndGgsIG1heCkpLmNvbmNhdChbc3VmZml4XSk7CiAgfQogIGlmKCFpc1N0cmluZyhzdHIpIHx8ICFOdW1iZXIuaXNGaW5pdGUobWF4KSB8fCBtYXggPCAwKSByZXR1cm4gc3RyOwogIHN0ciA9ICcnICsgc3RyOwogIGlmKHN0ci5sZW5ndGggPiBtYXgpIHsKICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIG1heCAtIHN1ZmZpeC5sZW5ndGgpICsgc3VmZml4OwogIH0KICByZXR1cm4gc3RyOwp9CgpleHBvcnQgZnVuY3Rpb24gdHJ5RnVuY3Rpb24oZm4sIHJlc29sdmUgPSBhID0+IGEsIHJlamVjdCA9ICgpID0+IG51bGwpIHsKICBpZighaXNGdW5jdGlvbihyZXNvbHZlKSkgewogICAgbGV0IHJ2YWwgPSByZXNvbHZlOwogICAgcmVzb2x2ZSA9ICgpID0+IHJ2YWw7CiAgfQogIGlmKCFpc0Z1bmN0aW9uKHJlamVjdCkpIHsKICAgIGxldCBjdmFsID0gcmVqZWN0OwogICAgcmVqZWN0ID0gKCkgPT4gY3ZhbDsKICB9CiAgcmV0dXJuIGlzQXN5bmMoZm4pCiAgICA/IGFzeW5jIGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgICAgICBsZXQgcmV0OwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXQgPSBhd2FpdCBmbiguLi5hcmdzKTsKICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIsIC4uLmFyZ3MpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXQsIC4uLmFyZ3MpOwogICAgICB9CiAgICA6IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgICAgICBsZXQgcmV0OwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXQgPSBmbiguLi5hcmdzKTsKICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIsIC4uLmFyZ3MpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXQsIC4uLmFyZ3MpOwogICAgICB9Owp9CgpleHBvcnQgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIHJlc29sdmUgPSBhID0+IGEsIHJlamVjdCA9ICgpID0+IG51bGwsIC4uLmFyZ3MpIHsKICBpZihpc0FzeW5jKGZuKSkKICAgIHJldHVybiBmbiguLi5hcmdzKQogICAgICAudGhlbihyZXNvbHZlKQogICAgICAuY2F0Y2gocmVqZWN0KTsKCiAgcmV0dXJuIHRyeUZ1bmN0aW9uKGZuLCByZXNvbHZlLCByZWplY3QpKC4uLmFyZ3MpOwp9CgpleHBvcnQgZnVuY3Rpb24gbWFwQWRhcHRlcihmbikgewogIGxldCByID0gewogICAgZ2V0KGtleSkgewogICAgICByZXR1cm4gZm4oa2V5KTsKICAgIH0sCiAgICBzZXQoa2V5LCB2YWx1ZSkgewogICAgICBmbihrZXksIHZhbHVlKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfTsKICBsZXQgdG1wID0gZm4oKTsKICBpZih0eXBlcy5pc0l0ZXJhYmxlKHRtcCkgfHwgdHlwZXMuaXNQcm9taXNlKHRtcCkpIHIua2V5cyA9ICgpID0+IGZuKCk7CgogIGlmKGZuW1N5bWJvbC5pdGVyYXRvcl0pIHIuZW50cmllcyA9IGZuW1N5bWJvbC5pdGVyYXRvcl07CiAgZWxzZSB7CiAgICBsZXQgZyA9IGZuKCk7CiAgICBpZih0eXBlcy5pc0l0ZXJhYmxlKGcpIHx8IHR5cGVzLmlzR2VuZXJhdG9yRnVuY3Rpb24oZykpIHIuZW50cmllcyA9ICgpID0+IGZuKCk7CiAgfQoKICByZXR1cm4gbWFwRnVuY3Rpb24ocik7Cn0KCi8qKgogKiBAcGFyYW0gQXJyYXkgICBmb3J3YXJkCiAqIEBwYXJhbSBBcnJheSAgIGJhY2t3YXJkCiAqCiAqIGNvbXBvbmVudDJwYXRoLCAgcGF0aDJlYWdsZSAgPT4gY29tcG9uZW50MmVhZ2xlCiAqICBlYWdsZTJwYXRoLCBwYXRoMmNvbXBvbmVudCA9PgogKi8KZXhwb3J0IGZ1bmN0aW9uIG1hcEZ1bmN0aW9uKG1hcCkgewogIGxldCBmbjsKICBmbiA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGFyZ3M7CiAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7CiAgICAgIGNhc2UgMDoKICAgICAgICByZXR1cm4gZm4ua2V5cygpOwogICAgICBjYXNlIDE6CiAgICAgICAgcmV0dXJuIGZuLmdldChrZXkpOwogICAgICBjYXNlIDI6CiAgICAgICAgcmV0dXJuIGZuLnNldChrZXksIHZhbHVlKTsKICAgIH0KICB9OwoKICBmbi5tYXAgPSAobSA9PiB7CiAgICB3aGlsZShpc0Z1bmN0aW9uKG0pICYmIG0ubWFwICE9PSB1bmRlZmluZWQpIG0gPSBtLm1hcDsKICAgIHJldHVybiBtOwogIH0pKG1hcCk7CgogIGlmKG1hcCBpbnN0YW5jZW9mIE1hcCB8fCAoaXNPYmplY3QobWFwKSAmJiBpc0Z1bmN0aW9uKG1hcC5nZXQpICYmIGlzRnVuY3Rpb24obWFwLnNldCkpKSB7CiAgICBmbi5zZXQgPSAoa2V5LCB2YWx1ZSkgPT4gKG1hcC5zZXQoa2V5LCB2YWx1ZSksIChrLCB2KSA9PiBmbihrLCB2KSk7CiAgICBmbi5nZXQgPSBrZXkgPT4gbWFwLmdldChrZXkpOwogIH0gZWxzZSBpZihtYXAgaW5zdGFuY2VvZiBDYWNoZSB8fCAoaXNPYmplY3QobWFwKSAmJiBpc0Z1bmN0aW9uKG1hcC5tYXRjaCkgJiYgaXNGdW5jdGlvbihtYXAucHV0KSkpIHsKICAgIGZuLnNldCA9IChrZXksIHZhbHVlKSA9PiAobWFwLnB1dChrZXksIHZhbHVlKSwgKGssIHYpID0+IGZuKGssIHYpKTsKICAgIGZuLmdldCA9IGtleSA9PiBtYXAubWF0Y2goa2V5KTsKICB9IGVsc2UgaWYoaXNPYmplY3QobWFwKSAmJiBpc0Z1bmN0aW9uKG1hcC5nZXRJdGVtKSAmJiBpc0Z1bmN0aW9uKG1hcC5zZXRJdGVtKSkgewogICAgZm4uc2V0ID0gKGtleSwgdmFsdWUpID0+IChtYXAuc2V0SXRlbShrZXksIHZhbHVlKSwgKGssIHYpID0+IGZuKGssIHYpKTsKICAgIGZuLmdldCA9IGtleSA9PiBtYXAuZ2V0SXRlbShrZXkpOwogIH0gZWxzZSB7CiAgICBmbi5zZXQgPSAoa2V5LCB2YWx1ZSkgPT4gKChtYXBba2V5XSA9IHZhbHVlKSwgKGssIHYpID0+IGZuKGssIHYpKTsKICAgIGZuLmdldCA9IGtleSA9PiBtYXBba2V5XTsKICB9CgogIGZuLnVwZGF0ZSA9IGZ1bmN0aW9uKGtleSwgZm4gPSAoaywgdikgPT4gdikgewogICAgbGV0IG9sZFZhbHVlID0gdGhpcy5nZXQoa2V5KTsKICAgIGxldCBuZXdWYWx1ZSA9IGZuKG9sZFZhbHVlLCBrZXkpOwogICAgaWYob2xkVmFsdWUgIT0gbmV3VmFsdWUpIHsKICAgICAgaWYobmV3VmFsdWUgPT09IHVuZGVmaW5lZCAmJiBpc0Z1bmN0aW9uKG1hcC5kZWxldGUpKSBtYXAuZGVsZXRlKGtleSk7CiAgICAgIGVsc2UgdGhpcy5zZXQoa2V5LCBuZXdWYWx1ZSk7CiAgICB9CiAgICByZXR1cm4gbmV3VmFsdWU7CiAgfTsKCiAgaWYoaXNGdW5jdGlvbihtYXAuZW50cmllcykpIHsKICAgIGZuLmVudHJpZXMgPSBmdW5jdGlvbiogKCkgewogICAgICBmb3IobGV0IFtrZXksIHZhbHVlXSBvZiBtYXAuZW50cmllcygpKSB5aWVsZCBba2V5LCB2YWx1ZV07CiAgICB9OwogICAgZm4udmFsdWVzID0gZnVuY3Rpb24qICgpIHsKICAgICAgZm9yKGxldCBba2V5LCB2YWx1ZV0gb2YgbWFwLmVudHJpZXMoKSkgeWllbGQgdmFsdWU7CiAgICB9OwogICAgZm4ua2V5cyA9IGZ1bmN0aW9uKiAoKSB7CiAgICAgIGZvcihsZXQgW2tleSwgdmFsdWVdIG9mIG1hcC5lbnRyaWVzKCkpIHlpZWxkIGtleTsKICAgIH07CiAgICBmbltTeW1ib2wuaXRlcmF0b3JdID0gZm4uZW50cmllczsKICAgIGZuW2luc3BlY3RTeW1ib2xdID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXcgTWFwKHRoaXMubWFwKChba2V5LCB2YWx1ZV0pID0+IFtBcnJheS5pc0FycmF5KGtleSkgPyBrZXkuam9pbignLicpIDoga2V5LCB2YWx1ZV0pKTsKICAgIH07CiAgfSBlbHNlIGlmKGlzRnVuY3Rpb24obWFwLmtleXMpKSB7CiAgICBpZihpc0FzeW5jKG1hcC5rZXlzKSB8fCB0eXBlcy5pc1Byb21pc2UobWFwLmtleXMoKSkpIHsKICAgICAgZm4ua2V5cyA9IGFzeW5jICgpID0+IFsuLi4oYXdhaXQgbWFwLmtleXMoKSldOwoKICAgICAgZm4uZW50cmllcyA9IGFzeW5jICgpID0+IHsKICAgICAgICBsZXQgciA9IFtdOwogICAgICAgIGZvcihsZXQga2V5IG9mIGF3YWl0IGZuLmtleXMoKSkgci5wdXNoKFtrZXksIGF3YWl0IGZuLmdldChrZXkpXSk7CiAgICAgICAgcmV0dXJuIHI7CiAgICAgIH07CiAgICAgIGZuLnZhbHVlcyA9IGFzeW5jICgpID0+IHsKICAgICAgICBsZXQgciA9IFtdOwogICAgICAgIGZvcihsZXQga2V5IG9mIGF3YWl0IGZuLmtleXMoKSkgci5wdXNoKGF3YWl0IGZuLmdldChrZXkpKTsKICAgICAgICByZXR1cm4gcjsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIGZuLmtleXMgPSBmdW5jdGlvbiogKCkgewogICAgICAgIGZvcihsZXQga2V5IG9mIG1hcC5rZXlzKCkpIHlpZWxkIGtleTsKICAgICAgfTsKCiAgICAgIGZuLmVudHJpZXMgPSBmdW5jdGlvbiogKCkgewogICAgICAgIGZvcihsZXQga2V5IG9mIGZuLmtleXMoKSkgeWllbGQgW2tleSwgZm4oa2V5KV07CiAgICAgIH07CiAgICAgIGZuLnZhbHVlcyA9IGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgZm9yKGxldCBrZXkgb2YgZm4ua2V5cygpKSB5aWVsZCBmbihrZXkpOwogICAgICB9OwogICAgfQogIH0KCiAgaWYoaXNGdW5jdGlvbihmbi5lbnRyaWVzKSkgewogICAgZm4uZmlsdGVyID0gZnVuY3Rpb24ocHJlZCkgewogICAgICByZXR1cm4gbWFwRnVuY3Rpb24oCiAgICAgICAgbmV3IE1hcCgKICAgICAgICAgIChmdW5jdGlvbiogKCkgewogICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgIGZvcihsZXQgW2tleSwgdmFsdWVdIG9mIGZuLmVudHJpZXMoKSkgaWYocHJlZChba2V5LCB2YWx1ZV0sIGkrKykpIHlpZWxkIFtrZXksIHZhbHVlXTsKICAgICAgICAgIH0pKCkKICAgICAgICApCiAgICAgICk7CiAgICB9OwogICAgZm4ubWFwID0gZnVuY3Rpb24odCkgewogICAgICByZXR1cm4gbWFwRnVuY3Rpb24oCiAgICAgICAgbmV3IE1hcCgKICAgICAgICAgIChmdW5jdGlvbiogKCkgewogICAgICAgICAgICBsZXQgaSA9IDA7CgogICAgICAgICAgICBmb3IobGV0IFtrZXksIHZhbHVlXSBvZiBmbi5lbnRyaWVzKCkpIHlpZWxkIHQoW2tleSwgdmFsdWVdLCBpKyspOwogICAgICAgICAgfSkoKQogICAgICAgICkKICAgICAgKTsKICAgIH07CiAgICBmbi5mb3JFYWNoID0gZnVuY3Rpb24oZm4pIHsKICAgICAgbGV0IGkgPSAwOwoKICAgICAgZm9yKGxldCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5lbnRyaWVzKCkpIGZuKFtrZXksIHZhbHVlXSwgaSsrKTsKICAgIH07CiAgfQogIGlmKGlzRnVuY3Rpb24obWFwLmRlbGV0ZSkpIGZuLmRlbGV0ZSA9IGtleSA9PiBtYXAuZGVsZXRlKGtleSk7CgogIGlmKGlzRnVuY3Rpb24obWFwLmhhcykpIGZuLmhhcyA9IGtleSA9PiBtYXAuaGFzKGtleSk7CiAgcmV0dXJuIGZuOwp9CgpleHBvcnQgZnVuY3Rpb24gbWFwV3JhcHBlcihtYXAsIHRvS2V5ID0ga2V5ID0+IGtleSwgZnJvbUtleSA9IGtleSA9PiBrZXkpIHsKICBsZXQgZm4gPSBtYXBGdW5jdGlvbihtYXApOwogIGZuLnNldCA9IChrZXksIHZhbHVlKSA9PiAobWFwLnNldCh0b0tleShrZXkpLCB2YWx1ZSksIChrLCB2KSA9PiBmbihrLCB2KSk7CiAgZm4uZ2V0ID0ga2V5ID0+IG1hcC5nZXQodG9LZXkoa2V5KSk7CiAgaWYoaXNGdW5jdGlvbihtYXAua2V5cykpIGZuLmtleXMgPSAoKSA9PiBbLi4ubWFwLmtleXMoKV0ubWFwKGZyb21LZXkpOwogIGlmKGlzRnVuY3Rpb24obWFwLmVudHJpZXMpKQogICAgZm4uZW50cmllcyA9IGZ1bmN0aW9uKiAoKSB7CiAgICAgIGZvcihsZXQgW2tleSwgdmFsdWVdIG9mIG1hcC5lbnRyaWVzKCkpIHlpZWxkIFtmcm9tS2V5KGtleSksIHZhbHVlXTsKICAgIH07CiAgaWYoaXNGdW5jdGlvbihtYXAudmFsdWVzKSkKICAgIGZuLnZhbHVlcyA9IGZ1bmN0aW9uKiAoKSB7CiAgICAgIGZvcihsZXQgdmFsdWUgb2YgbWFwLnZhbHVlcygpKSB5aWVsZCB2YWx1ZTsKICAgIH07CiAgaWYoaXNGdW5jdGlvbihtYXAuaGFzKSkgZm4uaGFzID0ga2V5ID0+IG1hcC5oYXModG9LZXkoa2V5KSk7CiAgaWYoaXNGdW5jdGlvbihtYXAuZGVsZXRlKSkgZm4uZGVsZXRlID0ga2V5ID0+IG1hcC5kZWxldGUodG9LZXkoa2V5KSk7CgogIGZuLm1hcCA9IChtID0+IHsKICAgIHdoaWxlKGlzRnVuY3Rpb24obSkgJiYgbS5tYXAgIT09IHVuZGVmaW5lZCkgbSA9IG0ubWFwOwogICAgcmV0dXJuIG07CiAgfSkobWFwKTsKCiAgcmV0dXJuIGZuOwp9CgpleHBvcnQgZnVuY3Rpb24gd2Vha01hcHBlcihjcmVhdGVGbiwgbWFwID0gbmV3IFdlYWtNYXAoKSwgaGl0Rm4pIHsKICBsZXQgc2VsZiA9IGZ1bmN0aW9uKG9iaiwgLi4uYXJncykgewogICAgbGV0IHJldDsKICAgIGlmKG1hcC5oYXMob2JqKSkgewogICAgICByZXQgPSBtYXAuZ2V0KG9iaik7CiAgICAgIGlmKGlzRnVuY3Rpb24oaGl0Rm4pKSBoaXRGbihvYmosIHJldCk7CiAgICB9IGVsc2UgewogICAgICByZXQgPSBjcmVhdGVGbihvYmosIC4uLmFyZ3MpOwogICAgICBtYXAuc2V0KG9iaiwgcmV0KTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfTsKICBzZWxmLnNldCA9IChrLCB2KSA9PiBtYXAuc2V0KGssIHYpOwogIHNlbGYuZ2V0ID0gayA9PiBtYXAuZ2V0KGspOwogIHNlbGYubWFwID0gbWFwOwogIHJldHVybiBzZWxmOwp9CgpleHBvcnQgZnVuY3Rpb24gd3JhcEdlbmVyYXRvcihmbikgewogIHJldHVybiB0eXBlcy5pc0dlbmVyYXRvckZ1bmN0aW9uKGZuKQogICAgPyBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgICAgcmV0dXJuIFsuLi5mbi5jYWxsKHRoaXMsIC4uLmFyZ3MpXTsKICAgICAgfQogICAgOiBmbjsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyYXBHZW5lcmF0b3JNZXRob2RzKG9iaikgewogIGZvcihsZXQgbmFtZSBvZiBrZXlzKG9iaiwgMSwgMCkpIGlmKGlzRnVuY3Rpb24ob2JqW25hbWVdKSkgb2JqW25hbWVdID0gd3JhcEdlbmVyYXRvcihvYmpbbmFtZV0pOwoKICByZXR1cm4gb2JqOwp9CgpleHBvcnQgY29uc3QgdW5pcXVlID0gKGFyciwgY21wKSA9PgogIGFyci5maWx0ZXIoCiAgICB0eXBlb2YgY21wID09ICdmdW5jdGlvbicKICAgICAgPyAoZWwsIGksIGFycikgPT4gYXJyLmZpbmRJbmRleChpdGVtID0+IGNtcChlbCwgaXRlbSkpID09IGkKICAgICAgOiAoZWwsIGksIGFycikgPT4gYXJyLmluZGV4T2YoZWwpID09IGkKICApOwoKZXhwb3J0IGNvbnN0IGdldEZ1bmN0aW9uQXJndW1lbnRzID0gZm4gPT4KICAoZm4gKyAnJykKICAgIC5yZXBsYWNlKC9cbi4qL2csICcnKQogICAgLnJlcGxhY2UoLyg9Pnx7fFxuKS4qL2csICcnKQogICAgLnJlcGxhY2UoL15mdW5jdGlvblxzKi8sICcnKQogICAgLnJlcGxhY2UoL15cKCguKilcKVxzKiQvZywgJyQxJykKICAgIC5zcGxpdCgvLFxzKi9nKTsKCmNvbnN0IEFOU0lfQkFDS0dST1VORF9PRkZTRVQgPSAxMDsKCmNvbnN0IHdyYXBBbnNpMTYgPQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAgIGBceDFiWyR7Y29kZSArIG9mZnNldH1tYDsKCmNvbnN0IHdyYXBBbnNpMjU2ID0KICAob2Zmc2V0ID0gMCkgPT4KICBjb2RlID0+CiAgICBgXHgxYlskezM4ICsgb2Zmc2V0fTs1OyR7Y29kZX1tYDsKCmNvbnN0IHdyYXBBbnNpMTZtID0KICAob2Zmc2V0ID0gMCkgPT4KICAocmVkLCBncmVlbiwgYmx1ZSkgPT4KICAgIGBceDFiWyR7MzggKyBvZmZzZXR9OzI7JHtyZWR9OyR7Z3JlZW59OyR7Ymx1ZX1tYDsKCmZ1bmN0aW9uIGdldEFuc2lTdHlsZXMoKSB7CiAgY29uc3QgY29kZXMgPSBuZXcgTWFwKCk7CiAgY29uc3Qgc3R5bGVzID0gewogICAgbW9kaWZpZXI6IHsKICAgICAgcmVzZXQ6IFswLCAwXSwKICAgICAgLy8gMjEgaXNuJ3Qgd2lkZWx5IHN1cHBvcnRlZCBhbmQgMjIgZG9lcyB0aGUgc2FtZSB0aGluZwogICAgICBib2xkOiBbMSwgMjJdLAogICAgICBkaW06IFsyLCAyMl0sCiAgICAgIGl0YWxpYzogWzMsIDIzXSwKICAgICAgdW5kZXJsaW5lOiBbNCwgMjRdLAogICAgICBvdmVybGluZTogWzUzLCA1NV0sCiAgICAgIGludmVyc2U6IFs3LCAyN10sCiAgICAgIGhpZGRlbjogWzgsIDI4XSwKICAgICAgc3RyaWtldGhyb3VnaDogWzksIDI5XQogICAgfSwKICAgIGNvbG9yOiB7CiAgICAgIGJsYWNrOiBbMzAsIDM5XSwKICAgICAgcmVkOiBbMzEsIDM5XSwKICAgICAgZ3JlZW46IFszMiwgMzldLAogICAgICB5ZWxsb3c6IFszMywgMzldLAogICAgICBibHVlOiBbMzQsIDM5XSwKICAgICAgbWFnZW50YTogWzM1LCAzOV0sCiAgICAgIGN5YW46IFszNiwgMzldLAogICAgICB3aGl0ZTogWzM3LCAzOV0sCgogICAgICAvLyBCcmlnaHQgY29sb3IKICAgICAgYmxhY2tCcmlnaHQ6IFs5MCwgMzldLAogICAgICByZWRCcmlnaHQ6IFs5MSwgMzldLAogICAgICBncmVlbkJyaWdodDogWzkyLCAzOV0sCiAgICAgIHllbGxvd0JyaWdodDogWzkzLCAzOV0sCiAgICAgIGJsdWVCcmlnaHQ6IFs5NCwgMzldLAogICAgICBtYWdlbnRhQnJpZ2h0OiBbOTUsIDM5XSwKICAgICAgY3lhbkJyaWdodDogWzk2LCAzOV0sCiAgICAgIHdoaXRlQnJpZ2h0OiBbOTcsIDM5XQogICAgfSwKICAgIGJnQ29sb3I6IHsKICAgICAgYmdCbGFjazogWzQwLCA0OV0sCiAgICAgIGJnUmVkOiBbNDEsIDQ5XSwKICAgICAgYmdHcmVlbjogWzQyLCA0OV0sCiAgICAgIGJnWWVsbG93OiBbNDMsIDQ5XSwKICAgICAgYmdCbHVlOiBbNDQsIDQ5XSwKICAgICAgYmdNYWdlbnRhOiBbNDUsIDQ5XSwKICAgICAgYmdDeWFuOiBbNDYsIDQ5XSwKICAgICAgYmdXaGl0ZTogWzQ3LCA0OV0sCgogICAgICAvLyBCcmlnaHQgY29sb3IKICAgICAgYmdCbGFja0JyaWdodDogWzEwMCwgNDldLAogICAgICBiZ1JlZEJyaWdodDogWzEwMSwgNDldLAogICAgICBiZ0dyZWVuQnJpZ2h0OiBbMTAyLCA0OV0sCiAgICAgIGJnWWVsbG93QnJpZ2h0OiBbMTAzLCA0OV0sCiAgICAgIGJnQmx1ZUJyaWdodDogWzEwNCwgNDldLAogICAgICBiZ01hZ2VudGFCcmlnaHQ6IFsxMDUsIDQ5XSwKICAgICAgYmdDeWFuQnJpZ2h0OiBbMTA2LCA0OV0sCiAgICAgIGJnV2hpdGVCcmlnaHQ6IFsxMDcsIDQ5XQogICAgfQogIH07CgogIC8vIEFsaWFzIGJyaWdodCBibGFjayBhcyBncmF5IChhbmQgZ3JleSkKICBzdHlsZXMuY29sb3IuZ3JheSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDsKICBzdHlsZXMuYmdDb2xvci5iZ0dyYXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0OwogIHN0eWxlcy5jb2xvci5ncmV5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0OwogIHN0eWxlcy5iZ0NvbG9yLmJnR3JleSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7CgogIGZvcihjb25zdCBbZ3JvdXBOYW1lLCBncm91cF0gb2YgT2JqZWN0LmVudHJpZXMoc3R5bGVzKSkgewogICAgZm9yKGNvbnN0IFtzdHlsZU5hbWUsIHN0eWxlXSBvZiBPYmplY3QuZW50cmllcyhncm91cCkpIHsKICAgICAgc3R5bGVzW3N0eWxlTmFtZV0gPSB7CiAgICAgICAgb3BlbjogYFx1MDAxQlske3N0eWxlWzBdfW1gLAogICAgICAgIGNsb3NlOiBgXHUwMDFCWyR7c3R5bGVbMV19bWAKICAgICAgfTsKCiAgICAgIGdyb3VwW3N0eWxlTmFtZV0gPSBzdHlsZXNbc3R5bGVOYW1lXTsKCiAgICAgIGNvZGVzLnNldChzdHlsZVswXSwgc3R5bGVbMV0pOwogICAgfQoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsIGdyb3VwTmFtZSwgewogICAgICB2YWx1ZTogZ3JvdXAsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9KTsKICB9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsICdjb2RlcycsIHsKICAgIHZhbHVlOiBjb2RlcywKICAgIGVudW1lcmFibGU6IGZhbHNlCiAgfSk7CgogIHN0eWxlcy5jb2xvci5jbG9zZSA9ICdcdTAwMUJbMzltJzsKICBzdHlsZXMuYmdDb2xvci5jbG9zZSA9ICdcdTAwMUJbNDltJzsKCiAgc3R5bGVzLmNvbG9yLmFuc2kgPSB3cmFwQW5zaTE2KCk7CiAgc3R5bGVzLmNvbG9yLmFuc2kyNTYgPSB3cmFwQW5zaTI1NigpOwogIHN0eWxlcy5jb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpID0gd3JhcEFuc2kxNihBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpMjU2ID0gd3JhcEFuc2kyNTYoQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7CiAgc3R5bGVzLmJnQ29sb3IuYW5zaTE2bSA9IHdyYXBBbnNpMTZtKEFOU0lfQkFDS0dST1VORF9PRkZTRVQpOwoKICAvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9RaXgtL2NvbG9yLWNvbnZlcnQvYmxvYi8zZjBlMGQ0ZTkyZTIzNTc5NmNjYjE3ZjZlODVjNzIwOTRhNjUxZjQ5L2NvbnZlcnNpb25zLmpzCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3R5bGVzLCB7CiAgICByZ2JUb0Fuc2kyNTY6IHsKICAgICAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PiB7CiAgICAgICAgLy8gV2UgdXNlIHRoZSBleHRlbmRlZCBncmV5c2NhbGUgcGFsZXR0ZSBoZXJlLCB3aXRoIHRoZSBleGNlcHRpb24gb2YKICAgICAgICAvLyBibGFjayBhbmQgd2hpdGUuIG5vcm1hbCBwYWxldHRlIG9ubHkgaGFzIDQgZ3JleXNjYWxlIHNoYWRlcy4KICAgICAgICBpZihyZWQgPT09IGdyZWVuICYmIGdyZWVuID09PSBibHVlKSB7CiAgICAgICAgICBpZihyZWQgPCA4KSB7CiAgICAgICAgICAgIHJldHVybiAxNjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZihyZWQgPiAyNDgpIHsKICAgICAgICAgICAgcmV0dXJuIDIzMTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoKHJlZCAtIDgpIC8gMjQ3KSAqIDI0KSArIDIzMjsKICAgICAgICB9CiAgICAgICAgY29uc3QgYyA9IFtyZWQsIGdyZWVuLCBibHVlXS5tYXAoYyA9PiAoYyAvIDI1NSkgKiA1KTsKICAgICAgICByZXR1cm4gMTYgKyAzNiAqIGNbMF0gKyA2ICogY1sxXSArIGNbMl07CiAgICAgIH0sCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgaGV4VG9SZ2I6IHsKICAgICAgdmFsdWU6IGhleCA9PiB7CiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IC8oPzxjb2xvclN0cmluZz5bYS1mXGRdezZ9fFthLWZcZF17M30pL2kuZXhlYyhoZXgudG9TdHJpbmcoMTYpKTsKICAgICAgICBpZighbWF0Y2hlcykgewogICAgICAgICAgcmV0dXJuIFswLCAwLCAwXTsKICAgICAgICB9CgogICAgICAgIGxldCB7IGNvbG9yU3RyaW5nIH0gPSBtYXRjaGVzLmdyb3VwczsKCiAgICAgICAgaWYoY29sb3JTdHJpbmcubGVuZ3RoID09PSAzKSB7CiAgICAgICAgICBjb2xvclN0cmluZyA9IGNvbG9yU3RyaW5nCiAgICAgICAgICAgIC5zcGxpdCgnJykKICAgICAgICAgICAgLm1hcChjaGFyYWN0ZXIgPT4gY2hhcmFjdGVyICsgY2hhcmFjdGVyKQogICAgICAgICAgICAuam9pbignJyk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBpbnRlZ2VyID0gTnVtYmVyLnBhcnNlSW50KGNvbG9yU3RyaW5nLCAxNik7CgogICAgICAgIHJldHVybiBbKGludGVnZXIgPj4gMTYpICYgMHhmZiwgKGludGVnZXIgPj4gOCkgJiAweGZmLCBpbnRlZ2VyICYgMHhmZl07CiAgICAgIH0sCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgaGV4VG9BbnNpMjU2OiB7CiAgICAgIHZhbHVlOiBoZXggPT4gc3R5bGVzLnJnYlRvQW5zaTI1NiguLi5zdHlsZXMuaGV4VG9SZ2IoaGV4KSksCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgYW5zaTI1NlRvQW5zaTogewogICAgICB2YWx1ZTogY29kZSA9PiB7CiAgICAgICAgaWYoY29kZSA8IDgpIHsKICAgICAgICAgIHJldHVybiAzMCArIGNvZGU7CiAgICAgICAgfQoKICAgICAgICBpZihjb2RlIDwgMTYpIHsKICAgICAgICAgIHJldHVybiA5MCArIChjb2RlIC0gOCk7CiAgICAgICAgfQoKICAgICAgICBsZXQgcmVkOwogICAgICAgIGxldCBncmVlbjsKICAgICAgICBsZXQgYmx1ZTsKCiAgICAgICAgaWYoY29kZSA+PSAyMzIpIHsKICAgICAgICAgIHJlZCA9ICgoY29kZSAtIDIzMikgKiAxMCArIDgpIC8gMjU1OwogICAgICAgICAgZ3JlZW4gPSByZWQ7CiAgICAgICAgICBibHVlID0gcmVkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb2RlIC09IDE2OwoKICAgICAgICAgIGNvbnN0IHJlbWFpbmRlciA9IGNvZGUgJSAzNjsKCiAgICAgICAgICByZWQgPSBNYXRoLmZsb29yKGNvZGUgLyAzNikgKiAwLjI7CiAgICAgICAgICBncmVlbiA9IE1hdGguZmxvb3IocmVtYWluZGVyIC8gNikgKiAwLjI7CiAgICAgICAgICBibHVlID0gKHJlbWFpbmRlciAlIDYpICogMC4yOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heChyZWQsIGdyZWVuLCBibHVlKSAqIDI7CgogICAgICAgIGlmKHZhbHVlID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gMzA7CiAgICAgICAgfQoKICAgICAgICBsZXQgcmVzdWx0ID0gMzAgKyAoKE1hdGgucm91bmQoYmx1ZSkgPDwgMikgfCAoTWF0aC5yb3VuZChncmVlbikgPDwgMSkgfCBNYXRoLnJvdW5kKHJlZCkpOwoKICAgICAgICBpZih2YWx1ZSA9PT0gMikgewogICAgICAgICAgcmVzdWx0ICs9IDYwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICByZ2JUb0Fuc2k6IHsKICAgICAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PiBzdHlsZXMuYW5zaTI1NlRvQW5zaShzdHlsZXMucmdiVG9BbnNpMjU2KHJlZCwgZ3JlZW4sIGJsdWUpKSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBoZXhUb0Fuc2k6IHsKICAgICAgdmFsdWU6IGhleCA9PiBzdHlsZXMuYW5zaTI1NlRvQW5zaShzdHlsZXMuaGV4VG9BbnNpMjU2KGhleCkpLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfQogIH0pOwoKICByZXR1cm4gc3R5bGVzOwp9CgpleHBvcnQgZnVuY3Rpb24gc3RyaXBBbnNpKHN0cikgewogIHJldHVybiAoc3RyICsgJycpLnJlcGxhY2UobmV3IFJlZ0V4cCgnXHgxYltbKD8pO117MCwyfSg7P1swLTldKSouJywgJ2cnKSwgJycpOwp9CgoKZXhwb3J0IGZ1bmN0aW9uIHBhZEFuc2koc3RyLCBuLCBzID0gJyAnKSB7CiAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpcEFuc2koc3RyKTsKICBsZXQgcGFkPScnOwogIGZvcihsZXQgaSA9IGxlbmd0aDsgaSA8IG47IGkrKykgcGFkICs9IHM7CiAgcmV0dXJuIHBhZDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHBhZFN0YXJ0QW5zaShzdHIsIG4sIHMgPSAnICcpIHsKICByZXR1cm4gcGFkQW5zaShzdHIsbixzKStzdHI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwYWRFbmRBbnNpKHN0ciwgbiwgcyA9ICcgJykgewogIHJldHVybiBzdHIrcGFkQW5zaShzdHIsbixzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRJbnQoLi4uYXJncykgewogIGxldCByYW5nZSA9IGFyZ3Muc3BsaWNlKDAsIDIpOwogIGxldCBybmcgPSBhcmdzLnNoaWZ0KCkgPz8gTWF0aC5yYW5kb207CiAgaWYocmFuZ2UubGVuZ3RoIDwgMikgcmFuZ2UudW5zaGlmdCgwKTsKICByZXR1cm4gTWF0aC5yb3VuZChyYW5kKHJhbmdlWzFdIC0gcmFuZ2VbMF0gKyAxKSArIHJhbmdlWzBdKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRGbG9hdChtaW4sIG1heCwgcm5nID0gTWF0aC5yYW5kb20pIHsKICByZXR1cm4gcm5nKCkgKiAobWF4IC0gbWluKSArIG1pbjsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRTdHIobiwgc2V0ID0gJ18wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicsIHJuZyA9IE1hdGgucmFuZG9tKSB7CiAgbGV0IG8gPSAnJzsKCiAgd2hpbGUoLS1uID49IDApIG8gKz0gc2V0W01hdGgucm91bmQocm5nKCkgKiAoc2V0Lmxlbmd0aCAtIDEpKV07CiAgcmV0dXJuIG87Cn0KCmV4cG9ydCBmdW5jdGlvbiB0b0JpZ0ludChhcmcpIHsKICBpZih0eXBlcy5pc0FycmF5QnVmZmVyKGFyZykpIHsKICAgIGNvbnN0IGJpdHMgPSBtaXNjLmJpdHMoYXJnKS5qb2luKCcnKTsKICAgIHJldHVybiBldmFsKGAwYiR7Yml0c31uYCk7CiAgfQogIHJldHVybiBCaWdJbnQoYXJnKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJvdW5kRGlnaXRzKHByZWNpc2lvbikgewogIGlmKHR5cGVvZiBwcmVjaXNpb24gPT0gJ251bWJlcicpIHJldHVybiAtTWF0aC5sb2cxMChwcmVjaXNpb24pOwoKICBwcmVjaXNpb24gPSBwcmVjaXNpb24gKyAnJzsKICBsZXQgaW5kZXggPSBwcmVjaXNpb24uaW5kZXhPZignLicpOwogIGxldCBmcmFjID0gaW5kZXggPT0gLTEgPyAnJyA6IHByZWNpc2lvbi5zbGljZShpbmRleCArIDEpOwogIHJldHVybiBmcmFjLmxlbmd0aDsKCiAgcmV0dXJuIC1jbGFtcCgtSW5maW5pdHksIDAsIE1hdGguZmxvb3IoTWF0aC5sb2cxMChwcmVjaXNpb24gLSBOdW1iZXIuRVBTSUxPTikpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJvdW5kVG8odmFsdWUsIHByZWMsIGRpZ2l0cywgdHlwZSA9ICdyb3VuZCcpIHsKICBpZighTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkgcmV0dXJuIHZhbHVlOwogIGNvbnN0IGZuID0gTWF0aFt0eXBlXTsKICBpZihwcmVjID09IDEpIHJldHVybiBmbih2YWx1ZSk7CiAgaWYocHJlYyA8IDEgJiYgcHJlYyA+IDAgJiYgIWlzTnVtYmVyKGRpZ2l0cykpIGRpZ2l0cyA9IC1NYXRoLmxvZzEwKHByZWMpOwogIGxldCByZXQgPSBwcmVjID49IE51bWJlci5FUFNJTE9OID8gZm4odmFsdWUgLyBwcmVjKSAqIHByZWMgOiB2YWx1ZTsKICBpZihpc051bWJlcihkaWdpdHMpICYmIGRpZ2l0cyA+PSAxICYmIGRpZ2l0cyA8PSAxMDApIHJldCA9ICtyZXQudG9GaXhlZChkaWdpdHMpOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsYXp5UHJvcGVydHkob2JqLCBuYW1lLCBnZXR0ZXIsIG9wdHMgPSB7fSkgewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7CiAgICBnZXQ6IHR5cGVzLmlzQXN5bmNGdW5jdGlvbihnZXR0ZXIpCiAgICAgID8gYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gcmVwbGFjZVByb3BlcnR5KGF3YWl0IGdldHRlci5jYWxsKHRoaXMgPz8gb2JqLCBuYW1lKSk7CiAgICAgICAgfQogICAgICA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXR0ZXIuY2FsbCh0aGlzID8/IG9iaiwgbmFtZSk7CiAgICAgICAgICBpZih0eXBlcy5pc1Byb21pc2UodmFsdWUpKSB7CiAgICAgICAgICAgIHZhbHVlLnRoZW4odiA9PiB7CiAgICAgICAgICAgICAgcmVwbGFjZVByb3BlcnR5KHYpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGB1dGlsLmxhenlQcm9wZXJ0eSByZXNvbHZlZCBgLCBvYmpbbmFtZV0pOwogICAgICAgICAgICAgIHJldHVybiB2OwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlcGxhY2VQcm9wZXJ0eSh2YWx1ZSk7CiAgICAgICAgfSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIC4uLm9wdHMKICB9KTsKCiAgZnVuY3Rpb24gcmVwbGFjZVByb3BlcnR5KHZhbHVlKSB7CiAgICBkZWxldGUgb2JqW25hbWVdOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgeyB2YWx1ZSwgLi4ub3B0cyB9KTsKICAgIHJldHVybiB2YWx1ZTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBsYXp5UHJvcGVydGllcyhvYmosIGdldHRlcnNPYmosIG9wdHMgPSB7fSkgewogIG9wdHMgPSB7IGVudW1lcmFibGU6IGZhbHNlLCAuLi5vcHRzIH07CiAgZm9yKGxldCBwcm9wIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdldHRlcnNPYmopKSBsYXp5UHJvcGVydHkob2JqLCBwcm9wLCBnZXR0ZXJzT2JqW3Byb3BdLCBvcHRzKTsKICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0T3B0KG9wdGlvbnMgPSB7fSwgYXJncykgewogIGxldCBzaG9ydCwgbG9uZzsKICBsZXQgcmVzdWx0ID0ge307CiAgbGV0IHBvc2l0aW9uYWwgPSAocmVzdWx0WydAJ10gPSBbXSk7CiAgaWYoIShvcHRpb25zIGluc3RhbmNlb2YgQXJyYXkpKSBvcHRpb25zID0gT2JqZWN0LmVudHJpZXMob3B0aW9ucyk7CiAgY29uc3QgZmluZE9wdCA9IGFyZyA9PgogICAgb3B0aW9ucy5maW5kKChbb3B0bmFtZSwgb3B0aW9uXSkgPT4gKEFycmF5LmlzQXJyYXkob3B0aW9uKSA/IG9wdGlvbi5pbmRleE9mKGFyZykgIT0gLTEgOiBmYWxzZSkgfHwgYXJnID09IG9wdG5hbWUpOwogIGxldCBbLCBwYXJhbXNdID0gb3B0aW9ucy5maW5kKG9wdCA9PiBvcHRbMF0gPT0gJ0AnKSB8fCBbXTsKICBpZih0eXBlb2YgcGFyYW1zID09ICdzdHJpbmcnKSBwYXJhbXMgPSBwYXJhbXMuc3BsaXQoJywnKTsKICBmb3IobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgewogICAgY29uc3QgYXJnID0gYXJnc1tpXTsKICAgIGxldCBvcHQ7CiAgICBpZihhcmdbMF0gPT0gJy0nKSB7CiAgICAgIGxldCBuYW1lLCB2YWx1ZSwgc3RhcnQsIGVuZDsKICAgICAgaWYoYXJnWzFdID09ICctJykgbG9uZyA9IHRydWU7CiAgICAgIGVsc2Ugc2hvcnQgPSB0cnVlOwogICAgICBzdGFydCA9IHNob3J0ID8gMSA6IDI7CiAgICAgIGlmKHNob3J0KSBlbmQgPSAyOwogICAgICBlbHNlIGlmKChlbmQgPSBhcmcuaW5kZXhPZignPScpKSA9PSAtMSkgZW5kID0gYXJnLmxlbmd0aDsKICAgICAgbmFtZSA9IGFyZy5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CiAgICAgIGlmKChvcHQgPSBmaW5kT3B0KG5hbWUpKSkgewogICAgICAgIGNvbnN0IFtoYXNfYXJnLCBoYW5kbGVyXSA9IG9wdFsxXTsKICAgICAgICBpZihoYXNfYXJnKSB7CiAgICAgICAgICBpZihhcmcubGVuZ3RoID4gZW5kKSB2YWx1ZSA9IGFyZy5zdWJzdHJpbmcoZW5kICsgKGFyZ1tlbmRdID09ICc9JykpOwogICAgICAgICAgZWxzZSB2YWx1ZSA9IGFyZ3NbKytpXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsdWUgPSB0cnVlOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgdmFsdWUgPSBoYW5kbGVyKHZhbHVlLCByZXN1bHRbb3B0WzBdXSwgb3B0aW9ucywgcmVzdWx0KTsKICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgcmVzdWx0W29wdFswXV0gPSB2YWx1ZTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgfQogICAgaWYocGFyYW1zLmxlbmd0aCkgewogICAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5zaGlmdCgpOwogICAgICBpZigob3B0ID0gZmluZE9wdChwYXJhbSkpKSB7CiAgICAgICAgY29uc3QgWywgWywgaGFuZGxlcl1dID0gb3B0OwogICAgICAgIGxldCB2YWx1ZSA9IGFyZzsKICAgICAgICBpZih0eXBlb2YgaGFuZGxlciA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YWx1ZSA9IGhhbmRsZXIodmFsdWUsIHJlc3VsdFtvcHRbMF1dLCBvcHRpb25zLCByZXN1bHQpOwogICAgICAgICAgfSBjYXRjaChlKSB7fQogICAgICAgIH0KICAgICAgICBjb25zdCBuYW1lID0gb3B0WzBdOwogICAgICAgIHJlc3VsdFtvcHRbMF1dID0gdmFsdWU7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgIH0KICAgIHJlc3VsdFsnQCddID0gWy4uLihyZXN1bHRbJ0AnXSA/PyBbXSksIGFyZ107CiAgfQogIHJldHVybiByZXN1bHQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiB0b1VuaXhUaW1lKGRhdGVPYmosIHV0YyA9IGZhbHNlKSB7CiAgaWYoIShkYXRlT2JqIGluc3RhbmNlb2YgRGF0ZSkpIGRhdGVPYmogPSBuZXcgRGF0ZShkYXRlT2JqKTsKICBsZXQgZXBvY2ggPSBNYXRoLmZsb29yKGRhdGVPYmouZ2V0VGltZSgpIC8gMTAwMCk7CiAgaWYodXRjKSBlcG9jaCArPSBkYXRlT2JqLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDsKICByZXR1cm4gZXBvY2g7Cn0KCmV4cG9ydCBmdW5jdGlvbiB1bml4VGltZSh1dGMgPSBmYWxzZSkgewogIHJldHVybiB0b1VuaXhUaW1lKG5ldyBEYXRlKCksIHV0Yyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmcm9tVW5peFRpbWUoZXBvY2gsIHV0YyA9IGZhbHNlKSB7CiAgbGV0IHQgPSBwYXJzZUludChlcG9jaCk7CiAgbGV0IGQgPSBuZXcgRGF0ZSgwKTsKICB1dGMgPyBkLnNldFVUQ1NlY29uZHModCkgOiBkLnNldFNlY29uZHModCk7CiAgcmV0dXJuIGQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5nZSguLi5hcmdzKSB7CiAgbGV0IFtzdGFydCwgZW5kLCBzdGVwID0gMV0gPSBhcmdzOwogIGxldCByZXQ7CiAgc3RhcnQgLz0gc3RlcDsKICBlbmQgLz0gc3RlcDsKICBpZihzdGFydCA+IGVuZCkgewogICAgcmV0ID0gW107CiAgICB3aGlsZShzdGFydCA+PSBlbmQpIHJldC5wdXNoKHN0YXJ0LS0pOwogIH0gZWxzZSB7CiAgICByZXQgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBlbmQgLSBzdGFydCArIDEgfSwgKHYsIGspID0+IGsgKyBzdGFydCk7CiAgfQogIGlmKHN0ZXAgIT0gMSkgewogICAgcmV0ID0gcmV0Lm1hcChuID0+IG4gKiBzdGVwKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlcGVhdGVyKG4sIHdoYXQpIHsKICBpZih0eXBlb2Ygd2hhdCA9PSAnZnVuY3Rpb24nKQogICAgcmV0dXJuIChmdW5jdGlvbiogKCkgewogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB5aWVsZCB3aGF0KCk7CiAgICB9KSgpOwogIHJldHVybiAoZnVuY3Rpb24qICgpIHsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHlpZWxkIHdoYXQ7CiAgfSkoKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlcGVhdChuLCB3aGF0KSB7CiAgcmV0dXJuIFsuLi5yZXBlYXRlcihuLCB3aGF0KV07Cn0KCmV4cG9ydCBmdW5jdGlvbiBjaHVua0FycmF5KGFyciwgc2l6ZSkgewogIGNvbnN0IGZuID0gKGEsIHYsIGkpID0+IHsKICAgIGNvbnN0IGogPSBpICUgc2l6ZTsKICAgIGlmKGogPT0gMCkgYS5wdXNoKFtdKTsKICAgIGFbYS5sZW5ndGggLSAxXS5wdXNoKHYpOwogICAgcmV0dXJuIGE7CiAgfTsKCiAgcmV0dXJuIGFyci5yZWR1Y2UoZm4sIFtdKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHVjZmlyc3Qoc3RyKSB7CiAgaWYodHlwZW9mIHN0ciAhPSAnc3RyaW5nJykgc3RyID0gc3RyICsgJyc7CiAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgMSkudG9VcHBlckNhc2UoKSArIHN0ci5zdWJzdHJpbmcoMSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsY2ZpcnN0KHN0cikgewogIGlmKHR5cGVvZiBzdHIgIT0gJ3N0cmluZycpIHN0ciA9IHN0ciArICcnOwogIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKDEpOwp9CgpleHBvcnQgZnVuY3Rpb24gY2FtZWxpemUoc3RyLCBkZWxpbSA9ICcnKSB7CiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eKFtBLVpdKXxbXHMtX10rKFx3KS9nLCAobWF0Y2gsIHAxLCBwMiwgb2Zmc2V0KSA9PiB7CiAgICBpZihwMikgcmV0dXJuIGRlbGltICsgcDIudG9VcHBlckNhc2UoKTsKICAgIHJldHVybiBwMS50b0xvd2VyQ2FzZSgpOwogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gZGVjYW1lbGl6ZShzdHIsIGRlbGltID0gJy0nKSB7CiAgcmV0dXJuIC8uW0EtWl0vLnRlc3Qoc3RyKQogICAgPyBzdHIKICAgICAgICAucmVwbGFjZSgvKFthLXpcZF0pKFtBLVpdKS9nLCAnJDEnICsgZGVsaW0gKyAnJDInKQogICAgICAgIC5yZXBsYWNlKC8oW0EtWl0rKShbQS1aXVthLXpcZF0rKS9nLCAnJDEnICsgZGVsaW0gKyAnJDInKQogICAgICAgIC50b0xvd2VyQ2FzZSgpCiAgICA6IHN0cjsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNob3J0ZW4oc3RyLCBtYXggPSA0MCwgc3VmZml4ID0gJy4uLicpIHsKICBtYXggPSArbWF4OwogIGlmKGlzTmFOKG1heCkpIG1heCA9IEluZmluaXR5OwogIGlmKEFycmF5LmlzQXJyYXkoc3RyKSkgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHN0ciwgMCwgTWF0aC5taW4oc3RyLmxlbmd0aCwgbWF4KSkuY29uY2F0KFtzdWZmaXhdKTsKICBpZih0eXBlb2Ygc3RyICE9ICdzdHJpbmcnIHx8ICFOdW1iZXIuaXNGaW5pdGUobWF4KSB8fCBtYXggPCAwKSByZXR1cm4gc3RyOwogIHN0ciA9ICcnICsgc3RyOwoKICBpZihzdHIubGVuZ3RoID4gbWF4KSB7CiAgICBsZXQgbiA9IE1hdGguZmxvb3IoKG1heCAtICgyICsgc3VmZml4Lmxlbmd0aCkpIC8gMik7CiAgICBsZXQgdGFpbCA9IHN0ci5sZW5ndGggLSBuOwogICAgbGV0IGxlbiA9IE1hdGgubWluKG4sIHRhaWwpOwogICAgbGV0IGluc2VydCA9ICcgJyArIHN1ZmZpeCArICcgJyArIChzdHIubGVuZ3RoIC0gKGxlbiArIG4pKSArICcgYnl0ZXMgJyArIHN1ZmZpeCArICcgJzsKCiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBsZW4pICsgaW5zZXJ0ICsgc3RyLnN1YnN0cmluZyh0YWlsKTsKICB9CiAgcmV0dXJuIHN0cjsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFycmF5c0luQ29tbW9uKGEpIHsKICBsZXQgaSwKICAgIGMsCiAgICBuID0gYS5sZW5ndGgsCiAgICBtaW4gPSBJbmZpbml0eTsKICB3aGlsZShuKSB7CiAgICBpZihhWy0tbl0ubGVuZ3RoIDwgbWluKSB7CiAgICAgIG1pbiA9IGFbbl0ubGVuZ3RoOwogICAgICBpID0gbjsKICAgIH0KICB9CiAgYyA9IEFycmF5LmZyb20oYS5zcGxpY2UoaSwgMSlbMF0pOwogIHJldHVybiBjLmZpbHRlcigoaXRtLCBpbmR4KSA9PiB7CiAgICBpZihjLmluZGV4T2YoaXRtKSA9PSBpbmR4KSByZXR1cm4gYS5ldmVyeShhcnIgPT4gYXJyLmluZGV4T2YoaXRtKSAhPSAtMSk7CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBhcnJheUZhY2FkZShwcm90bywgaXRlbUZuID0gKGNvbnRhaW5lciwgaSkgPT4gY29udGFpbmVyLmF0KGkpKSB7CiAgcmV0dXJuIGRlZmluZShwcm90bywgewogICAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBpdGVtRm4odGhpcywgaSk7CiAgICB9LAogICAgKmtleXMoKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIGk7CiAgICB9LAogICAgKmVudHJpZXMoKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIFtpLCBpdGVtRm4odGhpcywgaSldOwogICAgfSwKICAgICp2YWx1ZXMoKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIGl0ZW1Gbih0aGlzLCBpKTsKICAgIH0sCiAgICBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgaXRlbUZuKHRoaXMsIGkpLCBpLCB0aGlzKTsKICAgIH0sCiAgICByZWR1Y2UoY2FsbGJhY2ssIGFjY3UsIHRoaXNBcmcpIHsKICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYWNjdSA9IGNhbGxiYWNrLmNhbGwodGhpc0FyZywgYWNjdSwgaXRlbUZuKHRoaXMsIGkpLCBpLCB0aGlzKTsKICAgICAgcmV0dXJuIGFjY3U7CiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtb2QoYSwgYikgewogIHJldHVybiB0eXBlb2YgYiA9PSAnbnVtYmVyJyA/ICgoYSAlIGIpICsgYikgJSBiIDogbiA9PiAoKG4gJSBhKSArIGEpICUgYTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHB1c2hVbmlxdWUoYXJyLCAuLi5hcmdzKSB7CiAgbGV0IHJlamVjdCA9IFtdOwogIGZvcihsZXQgYXJnIG9mIGFyZ3MpCiAgICBpZihhcnIuaW5kZXhPZihhcmcpID09IC0xKSBhcnIucHVzaChhcmcpOwogICAgZWxzZSByZWplY3QucHVzaChhcmcpOwogIHJldHVybiByZWplY3Q7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3QoYSwgYikgewogIGlmKCFBcnJheS5pc0FycmF5KGEpKSBhID0gWy4uLmFdOwogIHJldHVybiBhLmZpbHRlcihTZXQucHJvdG90eXBlLmhhcywgbmV3IFNldChiKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzeW1tZXRyaWNEaWZmZXJlbmNlKGEsIGIpIHsKICByZXR1cm4gW10uY29uY2F0KC4uLmRpZmZlcmVuY2UoYSwgYikpOwp9CgpleHBvcnQgZnVuY3Rpb24qIHBhcnRpdGlvbkFycmF5KGEsIHNpemUpIHsKICBmb3IobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkgKz0gc2l6ZSkgeWllbGQgYS5zbGljZShpLCBpICsgc2l6ZSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBkaWZmZXJlbmNlKGEsIGIsIGluY2x1ZGVzKSB7CiAgaWYoIUFycmF5LmlzQXJyYXkoYSkpIGEgPSBbLi4uYV07CiAgaWYoIUFycmF5LmlzQXJyYXkoYikpIGIgPSBbLi4uYl07CgogIGlmKHR5cGVvZiBpbmNsdWRlcyAhPSAnZnVuY3Rpb24nKSByZXR1cm4gW2EuZmlsdGVyKHggPT4gIWIuaW5jbHVkZXMoeCkpLCBiLmZpbHRlcih4ID0+ICFhLmluY2x1ZGVzKHgpKV07CgogIHJldHVybiBbYS5maWx0ZXIoeCA9PiAhaW5jbHVkZXMoYiwgeCkpLCBiLmZpbHRlcih4ID0+ICFpbmNsdWRlcyhhLCB4KSldOwp9CgpleHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKGEsIGIpIHsKICBpZighKGEgaW5zdGFuY2VvZiBTZXQpKSBhID0gbmV3IFNldChhKTsKICBpZighKGIgaW5zdGFuY2VvZiBTZXQpKSBiID0gbmV3IFNldChiKTsKICBsZXQgaW50ZXJzZWN0aW9uID0gbmV3IFNldChbLi4uYV0uZmlsdGVyKHggPT4gYi5oYXMoeCkpKTsKICByZXR1cm4gQXJyYXkuZnJvbShpbnRlcnNlY3Rpb24pOwp9CgpleHBvcnQgZnVuY3Rpb24gdW5pb24oYSwgYiwgZXF1YWxpdHkpIHsKICBpZihlcXVhbGl0eSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gWy4uLm5ldyBTZXQoWy4uLmEsIC4uLmJdKV07CgogIHJldHVybiB1bmlxdWUoWy4uLmEsIC4uLmJdLCBlcXVhbGl0eSk7Cn0KCi8qKgogKiBhY2NlcHRzIGFycmF5IGFuZCBmdW5jdGlvbiByZXR1cm5pbmcgYHRydWVgIG9yIGBmYWxzZWAgZm9yIGVhY2ggZWxlbWVudAogKgogKiBAcGFyYW0gIHtbdHlwZV19ICAgYXJyYXkgICAgW2Rlc2NyaXB0aW9uXQogKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sgW2Rlc2NyaXB0aW9uXQogKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXQogKi8KZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbihhcnJheSwgY2FsbGJhY2spIHsKICBjb25zdCBtYXRjaGVzID0gW10sCiAgICBub25NYXRjaGVzID0gW107CgogIC8vIHB1c2ggZWFjaCBlbGVtZW50IGludG8gYXJyYXkgZGVwZW5kaW5nIG9uIHJldHVybiB2YWx1ZSBvZiBgY2FsbGJhY2tgCiAgZm9yKGxldCBlbGVtZW50IG9mIGFycmF5KSAoY2FsbGJhY2soZWxlbWVudCkgPyBtYXRjaGVzIDogbm9uTWF0Y2hlcykucHVzaChlbGVtZW50KTsKCiAgcmV0dXJuIFttYXRjaGVzLCBub25NYXRjaGVzXTsKfQoKZXhwb3J0IGZ1bmN0aW9uIExvY2F0aW9uKGxpbmUsIGNvbHVtbiwgcG9zLCBmaWxlLCBmcmVlemUgPSB0cnVlKSB7CiAgbGV0IG9iaiA9IHRoaXMgfHwgbmV3LnRhcmdldC50ZXN0IHx8IHRoaXMgPyB0aGlzIDoge307CgogIC8qY29uc29sZS5sb2coIm9iai5jb25zdHJ1Y3RvcjoiLG9iai5jb25zdHJ1Y3Rvcik7CiAgLy9jb25zb2xlLmxvZygiZnJlZXplOiIsZnJlZXplKTsqLwogIE9iamVjdC5hc3NpZ24ob2JqLCB7CiAgICBsaW5lLAogICAgY29sdW1uLAogICAgcG9zLAogICAgZmlsZQogIH0pOwogIGlmKHRoaXMgIT09IG9iaikgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iaiwgTG9jYXRpb24ucHJvdG90eXBlKTsKCiAgcmV0dXJuIGZyZWV6ZSAmJiBvYmouY29uc3RydWN0b3IgPT09IExvY2F0aW9uID8gT2JqZWN0LmZyZWV6ZShvYmopIDogb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gZm9ybWF0KC4uLmFyZ3MpIHsKICByZXR1cm4gZm9ybWF0V2l0aE9wdGlvbnNJbnRlcm5hbCh7IGhpZGVLZXlzOiBbJ2NvbnN0cnVjdG9yJ10gfSwgYXJncyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRXaXRoT3B0aW9ucyhvcHRzLCAuLi5hcmdzKSB7CiAgaWYoIWlzT2JqZWN0KG9wdHMpKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBvcHRpb25zIGFyZ3VtZW50IGlzIG5vdCBhbiBvYmplY3RgKTsKICByZXR1cm4gZm9ybWF0V2l0aE9wdGlvbnNJbnRlcm5hbChvcHRzLCBhcmdzKTsKfQoKZnVuY3Rpb24gZm9ybWF0V2l0aE9wdGlvbnNJbnRlcm5hbChvLCB2KSB7CiAgY29uc3QgeCA9IHZbMF07CiAgbGV0IGEgPSAwOwogIGxldCBzID0gJyc7CiAgbGV0IGogPSAnJzsKICBpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHsKICAgIGlmKHYubGVuZ3RoID09PSAxKSByZXR1cm4geDsKICAgIGxldCB0OwogICAgbGV0IHAgPSAwOwogICAgZm9yKGxldCBpID0gMDsgaSA8IHgubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgIGlmKHhbaV0gPT0gJyUnKSB7CiAgICAgICAgbGV0IGYgPSAnJzsKICAgICAgICB3aGlsZSgnc2p4ZE9vaWZjJScuaW5kZXhPZih4W2kgKyAxXSkgPT0gLTEpIHsKICAgICAgICAgIGYgKz0geFtpICsgMV07CiAgICAgICAgICArK2k7CiAgICAgICAgfQogICAgICAgIGlmKHAgPCBpKSBzICs9IHNsaWNlKHgsIHAsIGkpOwogICAgICAgIHAgPSBpICsgMTsKCiAgICAgICAgY29uc3QgYyA9IFN0cmluZy5wcm90b3R5cGUuY2hhckNvZGVBdC5jYWxsKHgsICsraSk7CiAgICAgICAgaWYoYSArIDEgIT09IHYubGVuZ3RoKSB7CiAgICAgICAgICBzd2l0Y2ggKGMpIHsKICAgICAgICAgICAgY2FzZSAxMTU6IC8vICVzCiAgICAgICAgICAgICAgY29uc3QgeSA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgeSA9PT0gJ251bWJlcicpIHQgPSBmb3JtYXROdW1iZXIoeSk7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgeSA9PT0gJ2JpZ2ludCcpIHQgPSBgJHt5fW5gOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIHkgIT09ICdvYmplY3QnIHx8IHkgPT09IG51bGwgfHwgIWhhc0J1aWx0SW4oeSwgJ3RvU3RyaW5nJykpIHQgPSBTdHJpbmcoeSk7CiAgICAgICAgICAgICAgZWxzZSB0ID0gaW5zcGVjdCh5LCB7IC4uLm8sIGNvbXBhY3Q6IDMsIGNvbG9yczogZmFsc2UsIGRlcHRoOiAwIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwNjogLy8gJWoKICAgICAgICAgICAgICB0ID0gc3RyaW5naWZ5KHZbKythXSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTIwOiAvLyAleAogICAgICAgICAgICBjYXNlIDEwMDogLy8gJWQKICAgICAgICAgICAgICBjb25zdCBuID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBuID09PSAnYmlnaW50JykgdCA9IGAke259bmA7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgbiA9PT0gJ3N5bWJvbCcpIHQgPSAnTmFOJzsKICAgICAgICAgICAgICBlbHNlIHQgPSBmb3JtYXROdW1iZXIoYyA9PSAxMjAgPyBOdW1iZXIobikudG9TdHJpbmcoMTYpIDogTnVtYmVyKG4pKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OTogLy8gJU8KICAgICAgICAgICAgICB0ID0gaW5zcGVjdCh2WysrYV0sIG8pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDExMTogLy8gJW8KICAgICAgICAgICAgICB0ID0gLyp2WysrYV0rJycgPz8gKi8gaW5zcGVjdCh2WysrYV0sIHsKICAgICAgICAgICAgICAgIC4uLm8sCiAgICAgICAgICAgICAgICBzaG93SGlkZGVuOiB0cnVlLAogICAgICAgICAgICAgICAgc2hvd1Byb3h5OiB0cnVlLAogICAgICAgICAgICAgICAgZGVwdGg6IDEsCiAgICAgICAgICAgICAgICBwcm90b0NoYWluOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwNTogLy8gJWkKICAgICAgICAgICAgICBjb25zdCBrID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBrID09PSAnYmlnaW50JykgdCA9IGAke2t9YDsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiBrID09PSAnc3ltYm9sJykgdCA9ICdOYU4nOwogICAgICAgICAgICAgIGVsc2UgdCA9IGZvcm1hdE51bWJlcihwYXJzZUludChrKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTAyOiAvLyAlZgogICAgICAgICAgICAgIGNvbnN0IGQgPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIGQgPT09ICdzeW1ib2wnKSB0ID0gJ05hTic7CiAgICAgICAgICAgICAgZWxzZSB0ID0gZm9ybWF0TnVtYmVyKHBhcnNlRmxvYXQoZCkpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDk5OiAvLyAlYwogICAgICAgICAgICAgIGEgKz0gMTsKICAgICAgICAgICAgICB0ID0gJyc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzc6IC8vICUlCiAgICAgICAgICAgICAgcyArPSBzbGljZSh4LCBwLCBpKTsKICAgICAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZihwICE9PSBpIC0gMSkgcyArPSBzbGljZSh4LCBwLCBpIC0gMSk7CiAgICAgICAgICBsZXQgcGFkID0gcGFyc2VJbnQoZik7CiAgICAgICAgICBpZihNYXRoLmFicyhwYWQpID4gMCkgdCA9IHRbJ3BhZCcgKyAocGFkIDwgMCA/ICdFbmQnIDogJ1N0YXJ0JyldKE1hdGguYWJzKHBhZCksIC9eLT8wLy50ZXN0KGYpID8gJzAnIDogJyAnKTsKICAgICAgICAgIHMgKz0gdDsKICAgICAgICAgIHAgPSBpICsgMTsKICAgICAgICB9IGVsc2UgaWYoYyA9PT0gMzcpIHsKICAgICAgICAgIHMgKz0gc2xpY2UoeCwgcCwgaSk7CiAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZihwICE9PSAwKSB7CiAgICAgIGErKzsKICAgICAgaiA9ICcgJzsKICAgICAgaWYocCA8IHgubGVuZ3RoKSBzICs9IHNsaWNlKHgsIHApOwogICAgfQogIH0KICB3aGlsZShhIDwgdi5sZW5ndGgpIHsKICAgIGNvbnN0IHkgPSB2W2FdOwogICAgcyArPSBqOwogICAgcyArPSB0eXBlb2YgeSAhPT0gJ3N0cmluZycgPyBpbnNwZWN0KHksIG8pIDogeTsKICAgIGogPSAnICc7CiAgICBhKys7CiAgfQogIHJldHVybiBzOwp9CgpleHBvcnQgZnVuY3Rpb24gZnVuY3Rpb25OYW1lKGZuKSB7CiAgaWYodHlwZW9mIGZuID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGZuLm5hbWUgPT0gJ3N0cmluZycpIHJldHVybiBmbi5uYW1lOwogIHRyeSB7CiAgICBjb25zdCBtYXRjaGVzID0gL2Z1bmN0aW9uXHMqKFteKF0qKVwoLiovZy5leGVjKGZuICsgJycpOwogICAgaWYobWF0Y2hlcyAmJiBtYXRjaGVzWzFdKSByZXR1cm4gbWF0Y2hlc1sxXTsKICB9IGNhdGNoIHt9CiAgcmV0dXJuIG51bGw7Cn0KCmV4cG9ydCBmdW5jdGlvbiBjbGFzc05hbWUob2JqKSB7CiAgaWYoaXNPYmplY3Qob2JqKSkgewogICAgaWYoJ2NvbnN0cnVjdG9yJyBpbiBvYmopIHJldHVybiBmdW5jdGlvbk5hbWUob2JqLmNvbnN0cnVjdG9yKTsKICAgIGlmKFN5bWJvbC50b1N0cmluZ1RhZyBpbiBvYmopIHJldHVybiBvYmpbU3ltYm9sLnRvU3RyaW5nVGFnXTsKICB9CiAgcmV0dXJuIG51bGw7Cn0KCmV4cG9ydCBjb25zdCBpc0Fycm93RnVuY3Rpb24gPSBmbiA9PgogIChpc0Z1bmN0aW9uKGZuKSAmJiAhKCdwcm90b3R5cGUnIGluIGZuKSkgfHwgL1wgPT5cIC8udGVzdCgoJycgKyBmbikucmVwbGFjZSgvXG4uKi9nLCAnJykpOwoKZXhwb3J0IGZ1bmN0aW9uIHByZWRpY2F0ZShmbl9vcl9yZWdleCwgcHJlZCkgewogIGxldCBmbiA9IGZuX29yX3JlZ2V4OwogIGlmKHR5cGVvZiBmbl9vcl9yZWdleCA9PSAnc3RyaW5nJykgZm5fb3JfcmVnZXggPSBuZXcgUmVnRXhwKCdeJyArIGZuX29yX3JlZ2V4ICsgJyQnKTsKICBpZihpc09iamVjdChmbl9vcl9yZWdleCkgJiYgZm5fb3JfcmVnZXggaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgIGZuID0gYXJnID0+IGZuX29yX3JlZ2V4LnRlc3QoYXJnICsgJycpOwogICAgZm4udmFsdWVPZiA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZm5fb3JfcmVnZXg7CiAgICB9OwogIH0KICBpZihpc0Z1bmN0aW9uKHByZWQpKSByZXR1cm4gYXJnID0+IHByZWQoYXJnLCBmbik7CiAgcmV0dXJuIGZuOwp9CgpleHBvcnQgY29uc3QgaXNBcnJheSA9IGEgPT4gQXJyYXkuaXNBcnJheShhKTsKCmV4cG9ydCBjbGFzcyBBcnJheUZhY2FkZSB7CiAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIGl0ZW1Gbih0aGlzLCBpKTsKICB9CiAgKmtleXMoKSB7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgaTsKICB9CiAgKmVudHJpZXMoKSB7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgW2ksIGl0ZW1Gbih0aGlzLCBpKV07CiAgfQogICp2YWx1ZXMoKSB7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgaXRlbUZuKHRoaXMsIGkpOwogIH0KICBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBpdGVtRm4odGhpcywgaSksIGksIHRoaXMpOwogIH0KICByZWR1Y2UoY2FsbGJhY2ssIGFjY3UsIHRoaXNBcmcpIHsKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBhY2N1ID0gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBhY2N1LCBpdGVtRm4odGhpcywgaSksIGksIHRoaXMpOwogICAgcmV0dXJuIGFjY3U7CiAgfQp9CgovKmV4cG9ydCBmdW5jdGlvbiBhcnJheUZhY2FkZShwcm90bywgaXRlbUZuID0gKGNvbnRhaW5lciwgaSkgPT4gY29udGFpbmVyLmF0KGkpKSB7CiAgcmV0dXJuIGRlZmluZShwcm90bywgQXJyYXlGYWNhZGUucHJvdG90eXBlKTsKfSovCgpleHBvcnQgZnVuY3Rpb24gYml0cyhidWZmZXIpIHsKICBsZXQgYSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7CiAgbGV0IGJpdCwKICAgIGJpdHMgPSBidWZmZXIuYnl0ZUxlbmd0aCA8PCAzOwogIGxldCByZXQgPSBbXTsKICBmb3IoYml0ID0gMDsgYml0IDwgYml0czsgYml0KyspIHsKICAgIGxldCBzaGlmdCA9IGJpdCAmIDB4NzsKICAgIGxldCBicG9zID0gYml0ID4+IDM7CgogICAgcmV0LnB1c2goYVtiaXQgPj4gM10gJiAoMSA8PCBzaGlmdCkgPyAxIDogMCk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBkdXBBcnJheUJ1ZmZlcihidWYsIHN0YXJ0LCBsZW5ndGgpIHsKICBsZXQgYSA9IG5ldyBVaW50OEFycmF5KGJ1Ziwgc3RhcnQsIGxlbmd0aCk7CiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsuLi5hXSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldFR5cGVOYW1lKHYpIHsKICByZXR1cm4gdHlwZW9mIHY7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIoYnVmKSB7CiAgcmV0dXJuIGlzT2JqZWN0KGJ1ZikgJiYgYnVmIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0JpZ0RlY2ltYWwobnVtKSB7CiAgcmV0dXJuIHR5cGVvZiBudW0gPT0gJ2JpZ2RlY2ltYWwnIHx8IG51bVtTeW1ib2wudG9TdHJpbmdUYWddID09ICdCaWdEZWNpbWFsJzsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzQmlnRmxvYXQobnVtKSB7CiAgcmV0dXJuIHR5cGVvZiBudW0gPT0gJ2JpZ2Zsb2F0JyB8fCBudW1bU3ltYm9sLnRvU3RyaW5nVGFnXSA9PSAnQmlnRmxvYXQnOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNCaWdJbnQobnVtKSB7CiAgcmV0dXJuIHR5cGVvZiBudW0gPT0gJ2JpZ2ludCcgfHwgbnVtW1N5bWJvbC50b1N0cmluZ1RhZ10gPT0gJ2lzQmlnSW50JzsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzQm9vbCh2YWx1ZSkgewogIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Jvb2xlYW4nOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNDRnVuY3Rpb24oZm4pIHsKICByZXR1cm4gZmFsc2U7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0NvbnN0cnVjdG9yKGZuKSB7CiAgcmV0dXJuIHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nICYmICdwcm90b3R5cGUnIGluIGZuOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNFbXB0eVN0cmluZyh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSA9PT0gJyc7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0Vycm9yKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRXJyb3IgfHwgdmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXS5lbmRzV2l0aCgnRXJyb3InKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzRXhjZXB0aW9uKHZhbHVlKSB7CiAgcmV0dXJuIGZhbHNlOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNFeHRlbnNpYmxlKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbic7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0hUTUxEREEodmFsdWUpIHsKICByZXR1cm4gZmFsc2U7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0luc3RhbmNlT2YodmFsdWUsIGN0b3IpIHsKICBpZihjdG9yW1N5bWJvbC5oYXNJbnN0YW5jZV0pIHsKICAgIHJldHVybiBjdG9yW1N5bWJvbC5oYXNJbnN0YW5jZV0odmFsdWUpOwogIH0KICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlIGluc3RhbmNlb2YgY3RvcjsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZWdlcih2YWx1ZSkgewogIHJldHVybiBNYXRoLmFicyh2YWx1ZSkgJSAxID09IDA7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0pvYlBlbmRpbmcoaWQpIHsKICByZXR1cm4gZmFsc2U7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0xpdmVPYmplY3Qob2JqKSB7CiAgcmV0dXJuIHRydWU7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc051bGwodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgPT09IG51bGw7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWx1ZSkgewogIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcic7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJzsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJzsKfQpleHBvcnQgZnVuY3Rpb24gaXNVbmluaXRpYWxpemVkKHZhbHVlKSB7CiAgcmV0dXJuIGZhbHNlOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8IHZhbHVlW1N5bWJvbC50b1N0cmluZ1RhZ10gPT0gJ1N5bWJvbCc7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc1VuY2F0Y2hhYmxlRXJyb3IodmFsdWUpIHsKICByZXR1cm4gZmFsc2U7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc1JlZ2lzdGVyZWRDbGFzcyhpZCkgewogIHJldHVybiBmYWxzZTsKfQpleHBvcnQgZnVuY3Rpb24gcmFuZCgpIHsKICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIDIgKiogMzI7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kaSgpIHsKICByZXR1cm4gcmFuZCgpIC0gMiAqKiAzMTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRmKCkgewogIHJldHVybiBNYXRoLnJhbmRvbSgpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3JhbmQoc2VlZCkge30KCmV4cG9ydCBmdW5jdGlvbiB0b0FycmF5QnVmZmVyKHZhbHVlKSB7CiAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsICYmICdidWZmZXInIGluIHZhbHVlICYmIGlzQXJyYXlCdWZmZXIodmFsdWUuYnVmZmVyKSkKICAgIHJldHVybiB2YWx1ZS5idWZmZXI7CgogIGlmKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykgewogICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpOwogICAgY29uc3QgdmlldyA9IGVuY29kZXIuZW5jb2RlKHZhbHVlKTsKICAgIHJldHVybiB2aWV3LmJ1ZmZlcjsKICB9CiAgcmV0dXJuIHZhbHVlOwp9CgpMb2NhdGlvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbihmcmVlemUgPSBmYWxzZSwgd2l0aEZpbGVuYW1lID0gdHJ1ZSkgewogIGNvbnN0IHsgbGluZSwgY29sdW1uLCBwb3MsIGZpbGUgfSA9IHRoaXM7CgogIHJldHVybiBuZXcgTG9jYXRpb24obGluZSwgY29sdW1uLCBwb3MsIHdpdGhGaWxlbmFtZSA/IGZpbGUgOiBudWxsLCBmcmVlemUpOwp9OwpMb2NhdGlvbi5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdMb2NhdGlvbic7CgpMb2NhdGlvbi5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKiAoKSB7CiAgbGV0IHsgZmlsZSwgbGluZSwgY29sdW1uIH0gPSB0aGlzOwogIGxldCB2ID0gZmlsZSA/IFtmaWxlLCBsaW5lLCBjb2x1bW5dIDogW2xpbmUsIGNvbHVtbl07CiAgeWllbGQqIHY7Cn07CkxvY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdHMgPSB7fSkgewogIGNvbnN0IHsgbGluZSwgY29sdW1uLCBmaWxlIH0gPSB0aGlzOwogIHJldHVybiAoZmlsZSA/IGZpbGUgKyAnOicgOiAnJykgKyBsaW5lICsgJzonICsgY29sdW1uOwp9OwpMb2NhdGlvbi5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzLnBvczsKfTsKTG9jYXRpb24ucHJvdG90eXBlW1N5bWJvbC50b1ByaW1pdGl2ZV0gPSBmdW5jdGlvbihoaW50KSB7CiAgaWYoaGludCA9PSAnbnVtYmVyJykgcmV0dXJuIHRoaXMucG9zOwogIGlmKGhpbnQgPT0gJ3N0cmluZycpIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7Cn07CkxvY2F0aW9uLnByb3RvdHlwZVtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSA9IGZ1bmN0aW9uKG4sIG9wdHMpIHsKICByZXR1cm4gdGhpcy50b1N0cmluZyh7IGNvbG9yczogdHJ1ZSB9KTsKICByZXR1cm4gaW5zcGVjdCh0aGlzLCB7CiAgICBjb2xvcnM6IHRydWUsCiAgICAuLi5vcHRzLAogICAgdG9TdHJpbmc6IFN5bWJvbC50b1N0cmluZ1RhZwogIH0pOwp9OwovKgpMb2NhdGlvbi5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzLnBvczsKfTsqLwoKZGVmaW5lKExvY2F0aW9uLnByb3RvdHlwZSwgewogIC8qIHByZXR0aWVyLWlnbm9yZSAqLyBnZXQgb2Zmc2V0KCkgewogICAgcmV0dXJuIHRoaXMudmFsdWVPZigpOwogIH0KfSk7CgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC5+gAAAAAAAAAAAAAAAAAAAAAAALn6AAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAuq0AAAAAAAC6rQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "// ==UserScript==\n\n// @name         util.js\n// @namespace    util\n// @version      0.2\n// @description  geom.js, align.js, bbox.js, util.js, graph.js, intersection.js, point.js, line.js, lineList.js, element.js, node.js, trbl.js, rect.js, size.js, iterator.js, pointList.js, matrix.js, circle.js, polygonFinder.js, polygon.js, sweepLine.js, transformation.js, vector.js, simplify.js\n// @author       You\n// @match        *://*/*\n// @exclude      *://127.0.0.1*/*\n// @updateURL    http://127.0.0.1:9000/lib/util.js\n// @grant        none\n// @run-at       document-end\n// ==/UserScript==\n\n/* jshint esversion: 6 */\n/* jshint ignore:start */\n\n/**\n * Class for utility.\n *\n * @class      Util (name)\n */\n\nexport function Util(g) {\n  const globalObject = g || Util.getGlobalObject();\n  globalObject.Util = Util;\n  return Util;\n}\n\nUtil.toString = undefined;\n//export const Util = {};\n\nconst lineSplit = new RegExp('\\\\n', 'g');\n\nUtil.inspectSymbol = Symbol.for('nodejs.util.inspect.custom');\n\nUtil.formatAnnotatedObject = function(subject, o) {\n  const { indent = '  ', spacing = ' ', separator = ',', newline = '\\n', maxlen = 30, depth = 1, level = 0 } = o;\n  const i = indent.repeat(o.level || 0);\n  let nl = newline != '' ? newline + i : spacing;\n  const opts = {\n    ...o,\n    newline: depth >= 0 ? newline : '',\n    depth: depth - 1,\n    level: level + 1\n  };\n  if(subject && subject.toSource !== undefined) return subject.toSource();\n  if(subject instanceof Date) return 'new Date(' + new Date().toISOString() + ')';\n  if(typeof subject == 'string') return \"'\" + subject + \"'\";\n  if(typeof subject == 'number') return subject;\n  if(subject != null && subject.y2 !== undefined) return `rect[${spacing}${subject.x}${separator}${subject.y} | ${subject.x2}${separator}${subject.y2} (${subject.w}x${subject.h}) ]`;\n  if(Util.isObject(subject) && 'map' in subject && typeof subject.map == 'function') return `[${nl}${subject.map(i => Util.formatAnnotatedObject(i, opts)).join(separator + nl)}]`;\n  if(typeof subject === 'string' || subject instanceof String) return `'${subject}'`;\n  let longest = '';\n  let r = [];\n  for(let k in subject) {\n    const v = subject[k];\n    if(k.length > longest.length) longest = k;\n    let s = '';\n    if(typeof v === 'symbol') {\n      s = 'Symbol';\n    } else if(typeof v === 'string' || v instanceof String) {\n      s = `'${v}'`;\n    } else if(typeof v === 'function') {\n      s = (v + '').replace(lineSplit, '\\n' + i);\n      s = (Util.fnName(s) || 'function') + '()';\n    } else if(typeof v === 'number' || typeof v === 'boolean') {\n      s = `${v}`;\n    } else if(v === null) {\n      s = 'null';\n    } else if(v && v.length !== undefined) {\n      try {\n        s = depth <= 0 ? `Array(${v.length})` : `[ ${v.map(item => Util.formatAnnotatedObject(item, opts)).join(', ')} ]`;\n      } catch(err) {\n        s = `[${v}]`;\n      }\n    } else if(v && v.toSource !== undefined) {\n      s = v.toSource();\n    } else if(opts.depth >= 0) {\n      s = s.length > maxlen ? `[Object ${Util.objName(v)}]` : Util.formatAnnotatedObject(v, opts);\n    } else {\n      let c = Util.className(v);\n      let t = Util.ucfirst(typeof v);\n\n      s = `[${t}${c !== t ? ' ' : ''}${c !== t ? c : ''}]`;\n    }\n    if(s == '') s = typeof v;\n    r.push([k, s]);\n  }\n  let padding = x => indent + (opts.newline != '' ? Util.pad(x, longest.length, spacing) : spacing);\n  let j = separator + spacing;\n  if(r.length > 6) {\n    nl = opts.newline + i;\n    j = separator + (opts.newline != '' ? nl : spacing);\n  }\n  let ret = '{' + opts.newline + r.map(arr => padding(arr[0]) + arr[0] + ':' + spacing + arr[1]).join(j) + opts.newline + i + '}';\n  return ret;\n};\nUtil.curry = (fn, arity) => {\n  if(arity == null) arity = fn.length;\n  let ret = function curried(...args) {\n    let thisObj = this;\n    if(args.length >= arity) return fn.apply(this, args);\n\n    let n = arity - args.length;\n    let a = Array.from({ length: n }, (v, i) => String.fromCharCode(65 + i));\n    let Curried = function(...a) {\n      return curried.apply(thisObj, a);\n    }; //;\n    return [\n      function() {\n        return Curried(...args);\n      },\n      function(a) {\n        return Curried(...args, a);\n      },\n      function(a, b) {\n        return Curried(...args, a, b);\n      },\n      function(a, b, c) {\n        return r(...args, a, b, c);\n      },\n      function(a, b, c, d) {\n        return Curried(...args, a, b, c, d);\n      }\n    ][n];\n    return new Function(...a, `const { curried,thisObj,args} = this; return curried.apply(thisObj, args.concat([${a.join(',')}]))`).bind({ args, thisObj, curried });\n  };\n  Object.defineProperties(ret, {\n    length: {\n      value: arity,\n      configurable: true,\n      writable: true,\n      enumerable: false\n    },\n    orig: {\n      get() {\n        return fn;\n      }\n    }\n  });\n  return ret;\n};\nUtil.arityN = (fn, n) => {\n  const arityFn = [\n    function(fn) {\n      return function() {\n        return fn();\n      };\n    },\n    function(fn) {\n      return function(a) {\n        return fn(a);\n      };\n    },\n    function(fn) {\n      return function(a, b) {\n        return fn(a, b);\n      };\n    },\n    function(fn) {\n      return function(a, b, c) {\n        return fn(a, b, c);\n      };\n    },\n    function(fn) {\n      return function(a, b, c, d) {\n        return fn(a, b, c, d);\n      };\n    },\n    function(fn) {\n      return function(a, b, c, d, e) {\n        return fn(a, b, c, d, e);\n        H;\n      };\n    }\n  ];\n  if(n && n <= 5) return arityFn[n](fn);\n  return fn;\n};\n\nUtil.getter = target => {\n  let self;\n  if(typeof target.get == 'function') self = target.get;\n  else\n    self = function(key) {\n      if(!target) {\n        if(this !== self && this) target = this;\n        self.target = target;\n      }\n      let obj = target;\n      if(!self.fn) {\n        if(typeof obj == 'object' && obj !== null) {\n          if(typeof obj.get == 'function') self.fn = key => obj.get(key);\n        }\n        if(!self.fn) self.fn = key => obj[key];\n      }\n      return self.fn(key);\n    };\n  if(target !== undefined) self.target = target;\n  return self;\n};\nUtil.setter = target => {\n  if(typeof target.set == 'function') return target.set;\n  let set;\n  set = function(key, value) {\n    if(!target) {\n      if(this !== set && this) target = this;\n      set.target = target;\n    }\n    let obj = target;\n    if(!set.fn) {\n      if(typeof obj == 'object' && obj !== null) {\n        if(typeof obj.set == 'function') set.fn = (key, value) => obj.set(key, value);\n      }\n    }\n    if(!set.fn) set.fn = (key, value) => ((obj[key] = value), obj);\n    return set.fn(key, value);\n  };\n  if(target !== undefined) set.target = target;\n  return set;\n};\nUtil.remover = target => (typeof target == 'object' && target !== null ? (typeof target.delete == 'function' ? key => target.delete(key) : key => delete target[key]) : null);\nUtil.hasFn = target => (typeof target == 'object' && target !== null ? (typeof target.has == 'function' ? key => target.has(key) : key => key in target) : null);\nUtil.adder = target => {\n  let self;\n\n  if(target instanceof Set) return arg => target.add(arg);\n  if(target instanceof Array) return arg => (target.push(arg), target);\n\n  self = function(obj, arg = 1) {\n    if(!target) if (obj) target = obj;\n\n    if(!self.fn) ChooseFn(arg, obj);\n    //console.debug('adder', self.fn + '');\n\n    // if(!self.fn) console.log('adder', { target, thisObj: this, fn: self.fn + '', arg });\n    return self.fn(obj, arg);\n  };\n  if(target && !self.fn) {\n    ChooseFn(',', target);\n    target = null;\n  }\n\n  return self;\n\n  function ChooseFn(a, o) {\n    if(!self.fn) {\n      if(typeof target == 'object' && target !== null) {\n        if(typeof target.add == 'function') self.fn = (obj, arg) => (obj.add(arg), undefined);\n        else if(typeof target.push == 'function') self.fn = (obj, arg) => (obj.push(arg), undefined);\n      }\n    }\n    let isNum = Util.isNumeric(a);\n    //console.debug('ChooseFn', { a, o, f: self.fn });\n    if(!self.fn) {\n      if(typeof o == 'string') self.fn = (obj, arg) => (obj == '' ? '' : obj + ', ') + arg;\n      else if(typeof o == 'number') self.fn = (num, arg) => (typeof num == 'number' ? num : 0) + +arg;\n      else if(a) self.fn = (obj, arg) => ((obj || (isNum || typeof arg == 'number' ? 0 : '')) + isNum ? +arg : ',' + arg);\n    }\n  }\n};\nUtil.updater = (target, get, set, fn) => {\n  let value;\n\n  /* prettier-ignore */ get = get || Util.getter(target);\n  /* prettier-ignore */ set = set || Util.setter(target);\n\n  return (k, f, i) => doUpdate(k, f || fn, i);\n  function doUpdate(key, func, i) {\n    value = get.call(target, key);\n    let tmp = func(value, i, key);\n\n    if(tmp !== undefined && tmp != value) {\n      set.call(target, key, tmp);\n\n      value = get.call(target, key);\n    }\n    return value;\n  }\n};\nUtil.getOrCreate = (target, create = () => ({}), set) => {\n  const get = Util.getter(target),\n    has = Util.hasFn(target);\n  /* prettier-ignore */ set = set || Util.setter(target);\n  let value;\n  return key => (value = has.call(target, key) ? get.call(target, key) : ((value = create(key, target)), set.call(target, key, value), value));\n};\nUtil.accumulate = (entries, dest = new Map()) => {\n  let get = Util.getOrCreate(dest, () => []);\n  for(let [key, value] of entries) Util.adder(get(key))(value);\n  return dest;\n};\nUtil.memoize = (fn, storage = new Map()) => {\n  let self;\n  const getter = typeof storage.get == 'function' ? storage.get : typeof storage == 'function' ? storage : Util.getter(storage);\n  const setter = typeof storage.set == 'function' ? storage.set : typeof storage == 'function' ? storage : Util.setter(storage);\n  self = function(...args) {\n    // let n = args[0]; // just taking one argument here\n    let cached;\n    let key = args[0];\n\n    if((cached = getter.call(storage, key))) {\n      //console.log('Fetching from cache');\n      return cached;\n    }\n    let result = fn.call(this, ...args);\n    setter.call(storage, key, result);\n    return result;\n  };\n  self.cache = storage;\n  return Object.freeze(self);\n};\nUtil.once = (fn, thisArg, memoFn) => {\n  let ran = false;\n  let ret;\n\n  return function(...args) {\n    if(!ran) {\n      ran = true;\n      ret = fn.call(thisArg || this, ...args);\n    } else if(typeof memoFn == 'function') {\n      ret = memoFn(ret);\n    }\n    return ret;\n  };\n};\nUtil.delay = (func, wait, thisObj) => {\n  if(typeof func != 'function') throw new TypeError(FUNC_ERROR_TEXT);\n  return function(...args) {\n    setTimeout(function () {\n      func.apply(thisObj || this, args);\n    }, wait);\n  };\n};\nUtil.throttle = (f, t, thisObj) => {\n  let lastCall;\n  return function(...args) {\n    let previousCall = lastCall;\n    lastCall = Date.now();\n    if(\n      previousCall === undefined || // function is being called for the first time\n      lastCall - previousCall > t\n    )\n      // throttle time has elapsed\n      f.apply(thisObj || this, args);\n  };\n};\nUtil.debounce = (func, wait, options = {}) => {\n  if(!Number.isFinite(wait)) throw new TypeError('Expected `wait` to be a finite number');\n  let id, args, ctx, timestamp, r;\n  const { leading, thisObj } = options;\n  if(null == wait) wait = 100;\n  function later() {\n    let last = Date.now() - timestamp;\n    if(last < wait && last >= 0) {\n      id = setTimeout(later, wait - last);\n    } else {\n      id = null;\n      if(!leading) {\n        r = func.apply(ctx, args);\n        ctx = args = null;\n      }\n    }\n  }\n  function debounced(...a) {\n    ctx = thisObj || this;\n    args = a;\n    timestamp = Date.now();\n    let callNow = leading && !id;\n    if(!id) id = setTimeout(later, wait);\n    if(callNow) {\n      r = func.apply(ctx, args);\n      ctx = args = null;\n    }\n    return r;\n  }\n  debounced.clear = function() {\n    if(id) {\n      clearTimeout(id);\n      id = null;\n    }\n  };\n  debounced.flush = function() {\n    if(id) {\n      r = func.apply(ctx, args);\n      ctx = args = null;\n      clearTimeout(id);\n      id = null;\n    }\n  };\n  return debounced;\n};\n\nUtil.debounceAsync = (fn, wait, options = {}) => {\n  if(!Number.isFinite(wait)) throw new TypeError('Expected `wait` to be a finite number');\n  let r,\n    id,\n    resolveList = [];\n  const { thisObj, leading } = options;\n  return function(...a) {\n    return new Promise(resolve => {\n      const callNow = leading && !id;\n      clearTimeout(id);\n      id = setTimeout(() => {\n        id = null;\n        const result = leading ? r : fn.apply(thisObj || this, a);\n        for(resolve of resolveList) resolve(result);\n        resolveList = [];\n      }, wait);\n      if(callNow) {\n        r = fn.apply(thisObj || this, a);\n        resolve(r);\n      } else {\n        resolveList.push(resolve);\n      }\n    });\n  };\n};\n\n/*Util.debounce = (f, t, thisObj) => {\n  let lastCall, lastCallTimer;\n  return function(...args) {\n    let previousCall = lastCall;\n    lastCall = Date.now();\n    if(previousCall && lastCall - previousCall <= t) clearTimeout(lastCallTimer);\n\n    return new Promise((resolve, reject) => {\n      lastCallTimer = setTimeout(() => resolve(f.apply(thisObj || this, args)), t);\n    });\n  };\n};*/\nUtil.getGlobalObject = Util.memoize(arg => {\n  const retfn = typeof arg == 'function' ? arg : typeof arg == 'string' ? g => g[arg] : g => g;\n\n  return Util.tryCatch(\n    () => globalThis,\n    retfn,\n    err =>\n      Util.tryCatch(\n        () => globalThis,\n        retfn,\n        err =>\n          Util.tryCatch(\n            () => window,\n            retfn,\n            err => console.log('Util.getGlobalObject:', err)\n          )\n      )\n  );\n});\n\nUtil.isDebug = Util.memoize(() => {\n  if(process !== undefined && process.env.NODE_ENV === 'production') return false;\n  return true;\n});\n\n/*Util.log = Util.curry(function(n, base) {\n  return Math.log(n) / (base ? Math.log(base) : 1);\n});*/\nUtil.log = (...args) => {\n  let location;\n  if(args[0] instanceof Util.location) location = args.shift();\n  else {\n    let stack = Util.getStackFrames(2);\n    if(/\\/util\\.js$/.test(stack[0].fileName)) stack = stack.slice(1);\n    location = stack[0].getLocation();\n  }\n  let locationStr = location.toString(true);\n  let c = [(locationStr[Util.inspectSymbol] || locationStr.toString).call(locationStr)];\n  c.push(' ');\n  let filters = Util.log.filters;\n  let results = filters.map(f => f.test(locationStr));\n  if(filters.every(f => !f.test(locationStr))) return;\n  console.log('log', { args, c });\n  Util.putStack();\n  args = args.reduce((a, p, i) => {\n    if(Util.isObject(p) && p[Util.log.methodName]) p = p[Util.log.methodName]();\n    else if(Util.isObject(p) && p[Util.inspectSymbol]) p = p[Util.inspectSymbol]();\n    else if(typeof p != 'string') {\n      if(Util.isObject(p) && typeof p.toString == 'function' && !Util.isNativeFunction(p.toString)) p = p.toString();\n      else p = Util.inspect(p, { multiline: false });\n    }\n\n    //  if(i > 0) a.push(',');\n    a.push(p);\n    //    a.append([p]);\n    return a;\n  }, c);\n  if(args.toConsole) args.toConsole();\n  else console.log(...args);\n};\n\nObject.defineProperty(Util.log, 'methodName', {\n  get: () => (Util.isBrowser() ? 'toConsole' : 'toAnsi256')\n});\n\nUtil.log.filters = [/.*/];\nUtil.log.setFilters = function(args) {\n  this.filters = [...args].map(arg => (arg instanceof RegExp ? arg : new RegExp(arg)));\n};\nUtil.log.getFilters = function() {\n  return this.filters;\n};\n\nUtil.msg = (strings, ...substitutions) => {\n  let i,\n    o = [];\n  for(i = 0; i < Math.max(strings.length, substitutions.length); i++) {\n    if(strings[i] !== undefined) o.push(strings[i].trim());\n    if(substitutions[i] !== undefined) o.push(substitutions[i]);\n  }\n  console.log(...o);\n};\n\nUtil.logBase = Util.curry((base, n) => Math.log(n) / Math.log(base));\n\nUtil.generalLog = function(n, x) {\n  return Math.log(x) / Math.log(n);\n};\nUtil.toSource = function(arg, opts = {}) {\n  const { quote = \"'\", colors = false, multiline = false, json = false } = opts;\n  const { c = Util.coloring(colors) } = opts;\n  let o = [];\n  const { print = (...args) => (o = c.concat(o, c.text(...args))) } = opts;\n  if(Array.isArray(arg)) {\n    print('[', 1, 36);\n    for(let item of arg) {\n      if(o.length > 0) print(', ');\n      Util.toSource(item, { ...opts, c, print });\n    }\n    print(']', 1, 36);\n  } else if(typeof arg == 'number' || arg === undefined || arg === null) print(arg, 1, 35);\n  else if(typeof arg == 'string') print(`${quote}${arg}${quote}`, 1, 36);\n  else if(arg && arg.x !== undefined && arg.y !== undefined) {\n    print('[', 1, 36);\n    print(arg.x, 1, 32);\n    print(',', 1, 36);\n    print(arg.y, 1, 32);\n    print(']', 1, 36);\n  } else if(typeof arg == 'object') {\n    let i = 0;\n    let m = arg instanceof Map;\n    if(m) {\n      print('new ', 1, 31);\n      print('Map', 1, 33);\n    }\n    print((m ? '([[' : '{') + (multiline ? '\\n  ' : ' '), 1, 36);\n    for(const [prop, value] of Util.entries(arg)) {\n      if(i > 0) {\n        let s = multiline ? ',\\n  ' : ', ';\n        if(m) s = ' ]' + s + '[ ';\n        print(s, 1, 36);\n      }\n      if(!m) print(json ? `\"${prop}\"` : prop, 1, 33);\n      else Util.toSource(prop, { ...opts, c, print });\n      print(m ? ', ' : ': ', 1, 36);\n      Util.toSource(value, { ...opts, c, print });\n      i++;\n    }\n    print(multiline ? '\\n' : ' ' + (m ? ']])' : '}'), 1, 36);\n  }\n  return o;\n};\nUtil.debug = function(message) {\n  const args = [...arguments];\n  let cache = [];\n  const removeCircular = function(key, value) {\n    if(typeof value === 'object' && value !== null) {\n      if(cache.indexOf(value) !== -1) return;\n      cache.push(value);\n    }\n    return value;\n  };\n  const str = args\n    .map(arg => (typeof arg === 'object' ? JSON.toString(arg, removeCircular) : arg))\n    .join(' ')\n    .replace(lineSplit, '');\n  //console.log(\"STR: \"+str);\n  //console.log.call(console, str);\n  //Util.log.apply(Util, args)\n};\nUtil.type = function({ type }) {\n  return (type && String(type).split(new RegExp('[ ()]', 'g'))[1]) || '';\n};\nUtil.functionName = function(fn) {\n  if(typeof fn == 'function' && typeof fn.name == 'string') return fn.name;\n  try {\n    const matches = /function\\s*([^(]*)\\(.*/g.exec(fn + '');\n    if(matches && matches[1]) return matches[1];\n  } catch {}\n  return null;\n};\nUtil.className = function(obj) {\n  let proto;\n  //console.log(\"class:\", obj);\n  try {\n    proto = Object.getPrototypeOf(obj);\n  } catch(err) {\n    try {\n      proto = obj.prototype;\n    } catch(err) {}\n  }\n  if(Util.isObject(proto) && 'constructor' in proto) return Util.functionName(proto.constructor);\n};\nUtil.unwrapComponent = function(c) {\n  for(;;) {\n    if(c.wrappedComponent) c = c.wrappedComponent;\n    else if(c.WrappedComponent) c = c.WrappedComponent;\n    else break;\n  }\n  return c;\n};\nUtil.componentName = function(c) {\n  for(;;) {\n    if(c.displayName || c.name) {\n      return (c.displayName || c.name).replace(/.*\\(([A-Za-z0-9_]+).*/, '$1');\n    } else if(c.wrappedComponent) c = c.wrappedComponent;\n    else if(c.WrappedComponent) c = c.WrappedComponent;\n    else break;\n  }\n  return Util.fnName(c);\n};\nUtil.count = function(s, ch) {\n  return (String(s).match(new RegExp(ch, 'g')) || Util.array()).length;\n};\nUtil.parseNum = function(str) {\n  let num = parseFloat(str);\n  if(isNaN(num)) num = 0;\n  return num;\n};\nUtil.minmax = function(num, min, max) {\n  return Math.min(Math.max(num, min), max);\n};\nUtil.getExponential = function(num) {\n  let str = typeof num == 'string' ? num : num.toExponential();\n  const matches = /e\\+?(.*)$/.exec(str);\n  //console.log(\"matches: \", matches);\n  return parseInt(matches[1]);\n};\nUtil.getNumberParts = function(num) {\n  let str = typeof num == 'string' ? num : num.toExponential();\n  const matches = /^(-?)(.*)e\\+?(.*)$/.exec(str);\n  //console.log(\"matches: \", matches);\n  const negative = matches[1] == '-';\n  return {\n    negative,\n    mantissa: parseFloat(matches[2]),\n    exponent: parseInt(matches[3])\n  };\n};\nUtil.pow2 = function(n) {\n  return Math.pow(2, n);\n};\nUtil.pow10 = function(n) {\n  return n >= 0 ? Math.pow(10, n) : 1 / Math.pow(10, -n);\n};\nUtil.bitValue = function(n) {\n  return Util.pow2(n - 1);\n};\nUtil.bitMask = function(bits, start = 0) {\n  let r = 0;\n  let b = 1 << start;\n\n  for(let i = 0; i < bits; i++) {\n    r |= b;\n    b <<= 1;\n  }\n  return r;\n};\n\nUtil.bitGroups = function(num, bpp, minLen) {\n  let m = Util.bitMask(bpp, 0);\n  let n = Math.floor(64 / bpp);\n  let r = [];\n  for(let i = 0; i < n; i++) {\n    r.push(num & m);\n    num /= m + 1;\n  }\n  while(r.length > 0 && r[r.length - 1] == 0 /* && Util.mod(r.length *bpp, 8) > 0*/) r.pop();\n  while(r.length < minLen) r.push(0);\n  return r;\n};\n\nUtil.bitStuff = (arr, bpp) => {\n  const m = Util.bitMask(bpp, 0);\n  return arr.reduce(([b, f], n) => [b + (n & m) * f, f * (m + 1)], [0, 1])[0];\n};\n\nUtil.toBinary = function(num) {\n  return parseInt(num).toString(2);\n};\nUtil.toBits = function(num) {\n  let a = Util.toBinary(num).split('').reverse();\n  return Array.from(Object.assign({}, a, { length: 50 }), bit => (bit ? 1 : 0));\n};\nUtil.getBit = function(v, n) {\n  let s = v.toString(2);\n  return n < s.length ? parseInt(s[s.length - n - 1]) : 0;\n};\nUtil.isSet = function(v, n) {\n  return Util.getBit(v, n) == 1;\n};\nUtil.bitCount = function(n) {\n  return Util.count(Util.toBinary(n), '1');\n};\nUtil.bitNo = function(n) {\n  for(let i = 0; n; i++) {\n    if(n & 1) return i;\n    n >>= 1;\n  }\n};\n\nUtil.toggleBit = function(num, bit) {\n  const n = Number(num);\n  return Util.isSet(n, bit) ? n - Util.pow2(bit) : n + Util.pow2(bit);\n};\nUtil.setBit = function(num, bit) {\n  const n = Number(num);\n  return Util.isSet(n, bit) ? n : n + Util.pow2(bit);\n};\nUtil.clearBit = function(num, bit) {\n  const n = Number(num);\n  return Util.isSet(n, bit) ? n - Util.pow2(bit) : n;\n};\nUtil.range = function(...args) {\n  let [start, end, step = 1] = args;\n  let ret;\n  start /= step;\n  end /= step;\n  if(start > end) {\n    ret = [];\n    while(start >= end) ret.push(start--);\n  } else {\n    ret = Array.from({ length: end - start + 1 }, (v, k) => k + start);\n  }\n  if(step != 1) {\n    ret = ret.map(n => n * step);\n  }\n  //console.log(\"Util.range \", r);\n  return ret;\n};\nUtil.set = function(obj, prop, value) {\n  const set = obj instanceof Map ? (prop, value) => obj.set(prop, value) : (prop, value) => (obj[prop] = value);\n  if(arguments.length == 1)\n    return (prop, value) => {\n      set(prop, value);\n      return set;\n    };\n  if(arguments.length == 2) return value => set(prop, value);\n  return set(prop, value);\n};\n\nUtil.get = Util.curry((obj, prop) => (obj instanceof Map ? obj.get(prop) : obj[prop]));\nUtil.symbols = (() => {\n  const { asyncIterator, hasInstance, isConcatSpreadable, iterator, match, matchAll, replace, search, species, split, toPrimitive, toStringTag, unscopables } = Symbol;\n  return {\n    inspect: Util.inspectSymbol,\n    asyncIterator,\n    hasInstance,\n    isConcatSpreadable,\n    iterator,\n    match,\n    matchAll,\n    replace,\n    search,\n    species,\n    split,\n    toPrimitive,\n    toStringTag,\n    unscopables\n  };\n})();\n\n/*\n  const { indent = '  ', newline = '\\n', depth = 2, spacing = ' ' } = typeof opts == 'object' ? opts : { indent: '', newline: '', depth: typeof opts == 'number' ? opts : 10, spacing: ' ' };\n\n  return Util.formatAnnotatedObject(obj, { indent, newline, depth, spacing });\n};*/\nUtil.bitArrayToNumbers = function(arr) {\n  let numbers = [];\n  for(let i = 0; i < arr.length; i++) {\n    const number = i + 1;\n    if(arr[i]) numbers.push(number);\n  }\n  return numbers;\n};\nUtil.bitsToNumbers = function(bits) {\n  let a = Util.toBinary(bits).split('');\n  let r = [];\n  //return a;\n  a.forEach((val, key, arr) => val == '1' && r.unshift(a.length - key));\n  return r;\n};\nUtil.shuffle = function(arr, rnd = Util.rng) {\n  arr.sort((a, b) => 0.5 - rnd());\n  return arr;\n};\nUtil.sortNum = function(arr) {\n  arr.sort((a, b) => a - b);\n  //console.log(\"Util.sortNum \", { arr });\n  return arr;\n};\nUtil.draw = (arr, n = 1, rnd = Util.rng) => {\n  let pos = Util.randInt(0, arr.length - n - 1, rnd);\n  const r = arr.splice(pos, n);\n  return n == 1 ? r[0] : r;\n};\nUtil.is = function(what, ...pred) {\n  let fnlist = pred.map(type => (Util.isConstructor(type) ? what instanceof type : this.is[type]));\n  //console.debug('fnlist:', fnlist);\n  return fnlist.every(fn => fn(what));\n};\n\nUtil.instanceOf = (value, ctor) => Util.isObject(value) && Util.isConstructor(ctor) && value instanceof ctor;\n\nUtil.onoff = function(val) {\n  if(Util.is.on(val)) return true;\n  if(Util.is.off(val)) return false;\n  return undefined;\n};\nUtil.numbersToBits = function(arr) {\n  return arr.reduce((bits, num) => bits + Util.bitValue(num), 0);\n};\nUtil.randomNumbers = function([start, end], draws) {\n  const r = Util.draw(Util.range(start, end), draws);\n  //console.log(\"Util.randomNumbers \", { start, end, draws, r });\n  return r;\n};\nUtil.randomBits = function(r = [1, 50], n = 5) {\n  return Util.numbersToBits(Util.randomNumbers(r, n));\n};\nUtil.padFn = function(len, char = ' ', fn = (str, pad) => pad) {\n  return (s, n = len) => {\n    let m = Util.stripAnsi(s).length;\n    s = s ? s.toString() : '' + s;\n    return fn(s, m < n ? char.repeat(n - m) : '');\n  };\n};\nUtil.pad = function(s, n, char = ' ') {\n  return Util.padFn(n, char)(s);\n};\nUtil.abbreviate = function(str, max = 40, suffix = '...') {\n  max = +max;\n  if(isNaN(max)) max = Infinity;\n  if(Array.isArray(str)) {\n    return Array.prototype.slice.call(str, 0, Math.min(str.length, max)).concat([suffix]);\n  }\n  if(typeof str != 'string' || !Number.isFinite(max) || max < 0) return str;\n  str = '' + str;\n  if(str.length > max) {\n    return str.substring(0, max - suffix.length) + suffix;\n  }\n  return str;\n};\nUtil.trim = function(str, charset) {\n  const r1 = RegExp('^[' + charset + ']*');\n  const r2 = RegExp('[' + charset + ']*$');\n  return str.replace(r1, '').replace(r2, '');\n};\nUtil.trimRight = function(str, charset) {\n  const r2 = RegExp('[' + charset + ']*$');\n  return str.replace(r2, '');\n};\nUtil.indent = (text, space = '  ') => {\n  text = text.trim();\n  if(!/\\n/.test(text)) return text;\n  return text.replace(/(\\n)/g, '\\n' + space) + '\\n';\n};\nUtil.define = (obj, ...args) => {\n  if(typeof args[0] == 'object') {\n    const [arg, overwrite = true] = args;\n    let adecl = Object.getOwnPropertyDescriptors(arg);\n    let odecl = {};\n    for(let prop in adecl) {\n      if(prop in obj) {\n        if(!overwrite) continue;\n        else delete obj[prop];\n      }\n      if(Object.getOwnPropertyDescriptor(obj, prop)) delete odecl[prop];\n      else\n        odecl[prop] = {\n          ...adecl[prop],\n          enumerable: false,\n          configurable: true,\n          writeable: true\n        };\n    }\n    Object.defineProperties(obj, odecl);\n    return obj;\n  }\n  const [key, value, enumerable = false] = args;\n  Object.defineProperty(obj, key, {\n    enumerable,\n    configurable: true,\n    writable: true,\n    value\n  });\n  return obj;\n};\nUtil.memoizedProperties = (obj, methods) => {\n  let decls = {};\n  for(let method in methods) {\n    const memoize = Util.memoize(methods[method]);\n    decls[method] = {\n      get() {\n        return memoize.call(this);\n      },\n      enumerable: true,\n      configurable: true\n    };\n  }\n  return Object.defineProperties(obj, decls);\n};\nUtil.copyWhole = (dst, ...args) => {\n  let chain = [];\n  for(let src of args) chain = chain.concat(Util.getPrototypeChain(src).reverse());\n  //console.debug('chain:', ...chain);\n  for(let obj of chain) Util.define(dst, obj);\n  return dst;\n};\nUtil.copyEntries = (obj, entries) => {\n  for(let [k, v] of entries) obj[k] = v;\n  return obj;\n};\n\nUtil.extend = (...args) => {\n  let deep = false;\n  if(typeof args[0] == 'boolean') deep = args.shift();\n\n  let result = args[0];\n  if(Util.isUnextendable(result)) throw new Error('extendee must be an object');\n  let extenders = args.slice(1);\n  let len = extenders.length;\n  for(let i = 0; i < len; i++) {\n    let extender = extenders[i];\n    for(let key in extender) {\n      if(true || extender.hasOwnProperty(key)) {\n        let value = extender[key];\n        if(deep && Util.isCloneable(value)) {\n          let base = Array.isArray(value) ? [] : {};\n          result[key] = Util.extend(true, result.hasOwnProperty(key) && !Util.isUnextendable(result[key]) ? result[key] : base, value);\n        } else {\n          result[key] = value;\n        }\n      }\n    }\n  }\n  return result;\n};\n\nUtil.isCloneable = obj => Array.isArray(obj) || {}.toString.call(obj) == '[object Object]';\n\nUtil.isUnextendable = val => !val || (typeof val != 'object' && typeof val != 'function');\n\n/*\nUtil.extend = (obj, ...args) => {\n  for(let other of args) {\n    for(let key of Util.iterateMembers(other, (k, value) => obj[k] === undefined && [k, value])) {\n      const value = other[key];\n      try {\n        Object.defineProperty(obj, key, {\n          value,\n          enumerable: false,\n          configurable: false,\n          writable: false\n        });\n      } catch(err) {\n        console.log('extend:' + err + '\\n', { obj, key, value });\n      }\n    }\n  }\n  return obj;\n};*/\n\nUtil.static = (obj, functions, thisObj, pred = (k, v, f) => true) => {\n  for(let [name, fn] of Util.iterateMembers(\n    functions,\n\n    Util.tryPredicate((key, depth) => obj[key] === undefined && typeof functions[key] == 'function' && pred(key, depth, functions) && [key, value])\n  )) {\n    const value = function(...args) {\n      return fn.call(thisObj || obj, this, ...args);\n    };\n    try {\n      obj[name] = value;\n\n      /*        Object.defineProperty(obj, name, { value, enumerable: false, configurable: false, writable: false });*/\n    } catch(err) {\n      console.log('static:', err);\n    }\n  }\n  return obj;\n};\nUtil.defineGetter = (obj, key, fn, enumerable = false) =>\n  obj[key] === undefined &&\n  Object.defineProperty(obj, key, {\n    enumerable,\n    configurable: true,\n    get: fn\n  });\nUtil.defineGetterSetter = (obj, key, g, s, enumerable = false) =>\n  obj[key] === undefined &&\n  Object.defineProperty(obj, key, {\n    get: g,\n    set: s,\n    enumerable\n  });\nUtil.defineGettersSetters = (obj, gettersSetters) => {\n  for(let name in gettersSetters) Util.defineGetterSetter(obj, name, gettersSetters[name], gettersSetters[name]);\n};\n\nUtil.extendArray = function(arr = Array.prototype) {\n  /*  Util.define(arr, 'tail', function() {\n    return this[this.length - 1];\n  });*/\n  Util.define(arr, 'match', function(pred) {\n    return Util.match(this, pred);\n  });\n  Util.define(arr, 'clear', function() {\n    this.splice(0, this, length);\n    return this;\n  });\n  Util.define(arr, 'unique', function() {\n    return this.filter((item, i, a) => a.indexOf(item) == i);\n  });\n  Util.defineGetterSetter(\n    arr,\n    'tail',\n    function() {\n      return Util.tail(this);\n    },\n    function(value) {\n      if(this.length == 0) this.push(value);\n      else this[this.length - 1] = value;\n    }\n  );\n\n  /*Util.define(arr, 'inspect', function(opts = {}) {\n    return Util.inspect(this, { depth: 100, ...opts });\n  });*/\n};\nUtil.adapter = function(obj, getLength = obj => obj.length, getKey = (obj, index) => obj.key(index), getItem = (obj, key) => obj[key], setItem = (obj, index, value) => (obj[index] = value)) {\n  const adapter = obj && {\n    /* prettier-ignore */ get length() {\n      return getLength(obj);\n    },\n    /* prettier-ignore */ get instance() {\n      return obj;\n    },\n    key(i) {\n      return getKey(obj, i);\n    },\n    get(key) {\n      return getItem(obj, key);\n    },\n    has(key) {\n      return this.get(key) !== undefined;\n    },\n    set(key, value) {\n      return setItem(obj, key, value);\n    },\n    *keys() {\n      const length = getLength(obj);\n      for(let i = 0; i < length; i++) yield getKey(obj, i);\n    },\n    *entries() {\n      for(let key of this.keys()) yield [key, getItem(obj, key)];\n    },\n    [Symbol.iterator]() {\n      return this.entries();\n    },\n    toObject() {\n      return Object.fromEntries(this.entries());\n    },\n    toMap() {\n      return new Map(this.entries());\n    }\n  };\n  return adapter;\n};\nUtil.adapter.localStorage = function(s) {\n  s = Util.tryCatch(\n    () => !s && globalThis.window,\n    w => w.localStorage,\n    () => s\n  );\n\n  return Util.adapter(\n    s,\n    l => l.length,\n    (l, i) => l.key(i),\n    (l, key) => JSON.parse(l.getItem(key)),\n    (l, key, v) => l.setItem(key, JSON.toString(v))\n  );\n};\nlet doExtendArray = Util.extendArray;\nUtil.array = function(a) {\n  if(!(a instanceof Array)) {\n    if(Util.isObject(a) && 'length' in a) a = Array.from(a);\n  }\n  if(doExtendArray)\n    try {\n      /*  if(Array.prototype.match === undefined) doExtendArray(Array.prototype);*/\n      if(a.match === undefined) {\n        doExtendArray(Array.prototype);\n        if(a.match) doExtendArray = null;\n      }\n      if(a.match === undefined) doExtendArray(a);\n    } catch(err) {}\n  return a;\n};\nUtil.arrayFromEntries = entries =>\n  Array.from(\n    entries.map(([k, v]) => k),\n    key => entries.find(([k, v]) => k === key)[1]\n  );\n\nUtil.toMap = function(hash = {}, fn) {\n  let m, gen;\n  if(hash instanceof Array && typeof fn == 'function') hash = hash.map(fn);\n\n  if(hash[Symbol.iterator] !== undefined) gen = hash[Symbol.iterator]();\n  else if(Util.isGenerator(hash)) gen = hash;\n  else gen = Object.entries(hash);\n\n  m = new Map(gen);\n\n  /*\n  if(m instanceof Array) m[Symbol.iterator] = m.entries;*/\n  try {\n    //if(m.toObject === undefined) Util.extendMap();\n    if(Map.prototype.toObject === undefined) Util.extendMap(Map.prototype);\n  } catch(err) {}\n  return m;\n};\nUtil.extendMap = function(map) {\n  if(map.entries === undefined) {\n    map.entries = function* iterator() {\n      for(let entry of map) {\n        yield entry.name !== undefined && entry.value !== undefined ? [entry.name, entry.value] : entry[0] !== undefined && entry[1] !== undefined ? entry : [entry, map[entry]];\n      }\n    };\n  }\n  map.toObject = function() {\n    return Object.fromEntries(this.entries());\n  };\n  map.match = function(...args) {\n    return Util.match.apply(this, args);\n  };\n};\nUtil.fromEntries = Object.fromEntries\n  ? Object.fromEntries\n  : entries => {\n      let ret = {};\n      for(let [k, v] of entries) {\n        ret[k] = v;\n      }\n      return ret;\n    };\n\nUtil.objectFrom = function(any) {\n  if('toJS' in any) any = any.toJS();\n  else if(Array.isArray(any)) return Util.fromEntries(any);\n  else if('entries' in any) return Util.fromEntries(any.entries());\n  return Object.assign({}, any);\n};\nUtil.tail = function(arr) {\n  return arr && arr.length > 0 ? arr[arr.length - 1] : null;\n};\nUtil.splice = function(str, index, delcount, insert) {\n  const chars = str.split('');\n  Array.prototype.splice.apply(chars, arguments);\n  return chars.join('');\n};\nUtil.identity = arg => arg;\nUtil.reverse = arr => arr.reverse();\n\nUtil.keyOf = function(obj, prop) {\n  const keys = Object.keys(obj);\n  for(let k in keys) {\n    if(obj[k] === prop) return k;\n  }\n  return undefined;\n};\nUtil.rotateRight = function(arr, n) {\n  arr.unshift(...arr.splice(n, arr.length));\n  return arr;\n};\nUtil.repeater = function(n, what) {\n  if(typeof what == 'function')\n    return (function* () {\n      for(let i = 0; i < n; i++) yield what();\n    })();\n  return (function* () {\n    for(let i = 0; i < n; i++) yield what;\n  })();\n};\nUtil.repeat = function(n, what) {\n  return [...Util.repeater(n, what)];\n};\nUtil.arrayDim = function(dimensions, init) {\n  let args = [...dimensions];\n  args.reverse();\n  let ret = init;\n  while(args.length > 0) {\n    const n = args.shift();\n    ret = Util.repeat(n, ret);\n  }\n  return ret;\n};\nUtil.flatten = function(arr) {\n  let ret = [];\n  for(let i = 0; i < arr.length; i++) {\n    ret = [...ret, ...arr[i]];\n  }\n  return ret;\n};\nUtil.chunkArray = (a, size) =>\n  a.reduce((acc, item, i) => {\n    const idx = i % size;\n    if(idx == 0) acc.push([]);\n\n    acc[acc.length - 1].push(item);\n    return acc;\n  }, []);\n\nUtil.partition = function* (a, size) {\n  for(let i = 0; i < a.length; i += size) yield a.slice(i, i + size);\n};\n\nUtil.difference = (a, b, incicludes) => {\n  //console.log('Util.difference', { a, b, includes });\n  if(typeof includes != 'function') return [a.filter(x => !b.includes(x)), b.filter(x => !a.includes(x))];\n\n  return [a.filter(x => !includes(b, x)), b.filter(x => !includes(a, x))];\n};\nUtil.intersect = (a, b) => a.filter(Set.prototype.has, new Set(b));\nUtil.symmetricDifference = (a, b) => [].concat(...Util.difference(a, b));\nUtil.union = (a, b, equality) => {\n  if(equality === undefined) return [...new Set([...a, ...b])];\n\n  return Util.unique([...a, ...b], equality);\n};\n\n/**\n * accepts array and function returning `true` or `false` for each element\n *\n * @param  {[type]}   array    [description]\n * @param  {Function} callback [description]\n * @return {[type]}            [description]\n */\nUtil.partition = (array, callback) => {\n  const matches = [],\n    nonMatches = [];\n\n  // push each element into array depending on return value of `callback`\n  for(let element of array) (callback(element) ? matches : nonMatches).push(element);\n\n  return [matches, nonMatches];\n};\n\nUtil.chances = function(numbers, matches) {\n  const f = Util.factorial;\n  return f(numbers) / (f(matches) * f(numbers - matches));\n};\nUtil.sum = arr => arr.reduce((acc, n) => acc + n, 0);\n\nUtil.expr = fn => {\n  let nargs = fn.length;\n  let ret = Util.curry(fn);\n\n  return ret;\n  return expr;\n  function expr(...args) {\n    let nums = [];\n\n    function addArgs(args) {\n      while(args.length > 0) {\n        const arg = args.shift();\n\n        if(typeof arg == 'function') args.unshift(arg(...args.splice(0, arg.length)));\n        else if(typeof arg == 'number') nums.push(arg);\n      }\n    }\n    addArgs(args);\n    //console.debug('nargs:', nargs);\n    //console.debug('nums.length:', nums.length);\n    if(nums.length >= nargs) return fn(...nums);\n\n    //let args = ['a','b','c','d'].slice(0,nargs - nums.length);\n    let ret = function returnFn(...args) {\n      addArgs(args.slice(0, nargs - nums.length));\n\n      //console.log('nums.length:', nums.length);\n      if(nums.length >= nargs) return fn(...nums);\n      return returnFn;\n    };\n    ret.nums = nums;\n\n    return ret;\n  }\n};\n\nUtil.add = Util.curry((a, b) => a + b);\nUtil.sub = Util.curry((a, b) => a - b);\nUtil.mul = Util.curry((a, b) => a * b);\nUtil.div = Util.curry((a, b) => a / b);\nUtil.xor = Util.curry((a, b) => a ^ b);\nUtil.or = Util.curry((a, b) => a | b);\nUtil.and = Util.curry((a, b) => a & b);\nUtil.mod = (a, b) => (typeof b == 'number' ? ((a % b) + b) % b : n => ((n % a) + a) % a);\nUtil.pow = Util.curry((a, b) => Math.pow(a, b));\n\n/*Util.define(String.prototype,\n  'splice',\n  function(index, delcount, insert) {\n    return Util.splice.apply(this, [this, ...arguments]);\n  }\n);*/\nUtil.fnName = function(f, parent) {\n  if(typeof f == 'function') {\n    if(f.name !== undefined) return f.name;\n    const s = typeof f.toSource == 'function' ? f.toSource() : f + '';\n    const matches = /([A-Za-z_][0-9A-Za-z_]*)\\w*[(\\]]/.exec(s);\n    if(matches) return matches[1];\n    if(parent !== undefined) {\n      for(let key in parent) {\n        if(parent[key] === f) return key;\n      }\n    }\n  }\n};\n\nUtil.objName = function(o) {\n  if(o === undefined || o == null) return `${o}`;\n  if(typeof o === 'function' || o instanceof Function) return Util.fnName(o);\n  if(o.constructor) return Util.fnName(o.constructor);\n  const s = `${o.type}`;\n  return s;\n};\nUtil.findKey = function(obj, pred, thisVal) {\n  let fn = typeof pred == 'function' ? value : v => v === pred;\n  for(let k in obj) if(fn.call(thisVal, obj[k], k)) return k;\n};\nUtil.find = function(arr, value, prop = 'id') {\n  let pred;\n  if(typeof value == 'function') {\n    pred = value;\n  } else if(prop && prop.length !== undefined) {\n    pred = function(obj) {\n      if(obj[prop] == value) return true;\n      return false;\n    };\n  } else {\n    pred = typeof prop == 'function' ? obj => prop(value, obj) : obj => obj[prop] == value;\n  }\n  if(typeof arr.find == 'function') return arr.find(pred);\n  if(!arr[Symbol.iterator] && typeof arr.entries == 'function') {\n    let entryPred = pred;\n    pred = ([key, value], arr) => entryPred(value, key, arr);\n    arr = arr.entries();\n  }\n  for(let v of arr) {\n    if(pred(v)) return v;\n  }\n  return null;\n};\n\nUtil.findIndex = function(obj, pred, thisArg) {\n  if(typeof obj.findIndex == 'function') return obj.findIndex(pred, thisArg);\n  return Util.findKey(obj, pred, thisArg);\n};\n\nUtil.match = function(arg, pred) {\n  let match = pred;\n  if(pred instanceof RegExp) {\n    const re = pred;\n    match = (val, key) => (val && val.tagName !== undefined && re.test(val.tagName)) || (typeof key === 'string' && re.test(key)) || (typeof val === 'string' && re.test(val));\n  }\n  if(Array.isArray(arg)) {\n    if(!(arg instanceof Array)) arg = [...arg];\n    return arg.reduce((acc, val, key) => {\n      if(match(val, key, arg)) acc.push(val);\n      return acc;\n    }, []);\n  } else if(Util.isMap(arg)) {\n    //console.log('Util.match ', { arg });\n    return [...arg.keys()].reduce((acc, key) => (match(arg.get(key), key, arg) ? acc.set(key, arg.get(key)) : acc), new Map());\n  }\n  return Util.filter(arg, match);\n};\nUtil.toHash = function(map, keyTransform = k => Util.camelize('' + k)) {\n  let ret = {};\n  Util.foreach(map, (v, k) => (ret[keyTransform(k)] = v));\n  return ret;\n};\nUtil.indexOf = function(obj, prop) {\n  for(let key in obj) {\n    if(obj[key] === prop) return key;\n  }\n  return undefined;\n};\n\n/*\nUtil.injectProps = function(options) {\n  return function(InitialComponent) {\n    return function DndStateInjector() {\n      return <InitialComponent {...options} />;\n    }\n  }\n}*/\n\nUtil.greatestCommonDenominator = (a, b) => (b ? Util.greatestCommonDenominator(b, a % b) : a);\n\nUtil.leastCommonMultiple = (n1, n2) => {\n  //Find the gcd first\n  let gcd = Util.greatestCommonDenominator(n1, n2);\n\n  //then calculate the lcm\n  return (n1 * n2) / gcd;\n};\nUtil.matchAll = Util.curry(function* (re, str) {\n  let match;\n  re = re instanceof RegExp ? re : new RegExp(Array.isArray(re) ? '(' + re.join('|') + ')' : re, 'g');\n  do {\n    if((match = re.exec(str))) yield match;\n  } while(match != null);\n});\n\nUtil.inspect = function(obj, opts = {}) {\n  const {\n    quote = '\"',\n    multiline = true,\n    toString = Symbol.toStringTag || 'toString' /*Util.symbols.toStringTag*/,\n    stringFn = str => str,\n    indent = '',\n    colors = false,\n    stringColor = [1, 36],\n    spacing = '',\n    newline = '\\n',\n    padding = ' ',\n    separator = ',',\n    colon = ': ',\n    depth = 10,\n    json = false\n  } = {\n    ...Util.inspect.defaultOpts,\n    toString: Util.symbols.inspect,\n    colors: true,\n    multiline: true,\n    newline: '\\n',\n    ...opts\n  };\n\n  try {\n    if(Util == obj) return Util;\n  } catch(e) {}\n  //console.log(\"Util.inspect\", {quote,colors,multiline,json})\n\n  let out;\n  const { c = Util.coloring(colors) } = opts;\n  const { print = (...args) => (out = c.concat(out, c.text(...args))) } = opts;\n  const sep = multiline && depth > 0 ? (space = false) => newline + indent + (space ? '  ' : '') : (space = false) => (space ? spacing : '');\n  if(typeof obj == 'number') {\n    print(obj + '', 1, 36);\n  } else if(typeof obj == 'undefined' || obj === null) {\n    print(obj + '', 1, 35);\n  } else if(typeof obj == 'function' /*|| obj instanceof Function || Util.className(obj) == 'Function'*/) {\n    obj = '' + obj;\n    //  if(!multiline)\n    obj = obj.split(lineSplit)[0].replace(/{\\s*$/, '{}');\n    print(obj);\n  } else if(typeof obj == 'string') {\n    print(`${quote}${stringFn(obj)}${quote}`, 1, 36);\n  } else if(obj instanceof Date) {\n    print(`new `, 1, 31);\n\n    print(`Date`, 1, 33);\n    print(`(`, 1, 36);\n    print(obj.getTime() + obj.getMilliseconds() / 1000, 1, 36);\n    print(`)`, 1, 36);\n  } else if(Object.getPrototypeOf(obj) == Array.prototype) {\n    let i;\n    print(`[`, 1, 36);\n    for(i = 0; i < obj.length; i++) {\n      if(i > 0) print(separator, 1, 36);\n      else print(padding);\n      print(sep(i > 0));\n      Util.inspect(obj[i], {\n        ...opts,\n        c,\n        print,\n        newline: newline + '  ',\n        depth: depth - 1\n      });\n    }\n    print((padding || '') + `]`, 1, 36);\n  } else if(Util.isObject(obj)) {\n    const inspect = toString ? obj[toString] : null;\n    if(typeof inspect == 'function' && !Util.isNativeFunction(inspect) && !/Util.inspect/.test(inspect + '')) {\n      let s = inspect.call(obj, depth, { ...opts });\n      //console.debug('s:', s);\n      //console.debug('inspect:', inspect + '');\n\n      out += s;\n    } else {\n      let isMap = obj instanceof Map;\n      let keys = isMap ? obj.keys() : Object.getOwnPropertyNames(obj);\n      //console.debug(\"keys:\", keys);\n\n      if(Object.getPrototypeOf(obj) !== Object.prototype) print(Util.className(obj) + ' ', 1, 31);\n      isMap ? print(`(${obj.size}) {${sep(true)}`, 1, 36) : print('{' + (sep(true) || padding), 1, 36);\n      let i = 0;\n      let getFn = isMap ? key => obj.get(key) : key => obj[key];\n      let propSep = isMap ? [' => ', 0] : [': ', 1, 36];\n      for(let key of keys) {\n        const value = getFn(key);\n        if(i > 0) print(separator + sep(true), 36);\n        if(typeof key == 'symbol') print(key.toString(), 1, 32);\n        else if(Util.isObject(key) && typeof key[toString] == 'function') print(isMap ? `'${key[toString]()}'` : json ? `\"${key.toString()}\"` : key[toString](), 1, isMap ? 36 : 33);\n        else if(typeof key == 'string' || (!isMap && Util.isObject(key) && typeof key.toString == 'function'))\n          print(json ? `\"${key.toString()}\"` : isMap || /(-)/.test(key) ? `'${key}'` : key, 1, isMap ? 36 : 33);\n        else\n          Util.inspect(key, {\n            ...opts,\n            c,\n            print,\n            newline: newline + '  ',\n            newline: '',\n            multiline: false,\n            toString: 'toString',\n            depth: depth - 1\n          });\n        print(...propSep);\n        if(typeof value == 'number') print(`${value}`, 1, 36);\n        else if(typeof value == 'string' || value instanceof String) print(`${quote}${value}${quote}`, 1, 36);\n        else if(typeof value == 'object')\n          Util.inspect(value, {\n            ...opts,\n            print,\n            multiline: isMap && !(value instanceof Map) ? false : multiline,\n            newline: newline + '  ',\n            depth: depth - 1\n          });\n        else print((value + '').replace(lineSplit, sep(true)));\n        i++;\n      }\n      print(`${multiline ? newline : padding}}`, 1, 36);\n    }\n  }\n  return out;\n};\n\nUtil.inspect.defaultOpts = {\n  spacing: ' ',\n  padding: ' '\n};\n\nUtil.dump = function(name, props) {\n  const args = [name];\n  for(let key in props) {\n    f;\n    args.push(`\\n\\t${key}: `);\n    args.push(props[key]);\n  }\n  const w = Util.tryCatch(\n    () => globalThis.window,\n    w => w,\n    () => null\n  );\n\n  if(w) {\n    //if(window.alert !== undefined)\n    //alert(args);\n    if(w.console !== undefined) w.console.log(...args);\n  }\n};\nUtil.ucfirst = function(str) {\n  if(typeof str != 'string') str = str + '';\n  return str.substring(0, 1).toUpperCase() + str.substring(1);\n};\nUtil.lcfirst = function(str) {\n  if(typeof str != 'string') str = str + '';\n  return str.substring(0, 1).toLowerCase() + str.substring(1);\n};\nUtil.typeOf = v => {\n  let type = typeof v;\n  if(type == 'object' && v != null && Object.getPrototypeOf(v) != Object.prototype) type = Util.className(v);\n  else type = Util.ucfirst(type);\n  return type;\n};\n\n/**\n * Camelize a string, cutting the string by multiple separators like\n * hyphens, underscores and spaces.\n *\n * @param {text} string Text to camelize\n * @return string Camelized text\n */\nUtil.camelize = (text, sep = '') =>\n  text.replace(/^([A-Z])|[\\s-_]+(\\w)/g, (match, p1, p2, offset) => {\n    if(p2) return sep + p2.toUpperCase();\n    return p1.toLowerCase();\n  });\n\nUtil.decamelize = function(str, separator = '-') {\n  return /.[A-Z]/.test(str)\n    ? str\n        .replace(/([a-z\\d])([A-Z])/g, '$1' + separator + '$2')\n        .replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1' + separator + '$2')\n        .toLowerCase()\n    : str;\n};\nUtil.ifThenElse = function(pred = value => !!value, _then = () => {}, _else = () => {}) {\n  return function(value) {\n    let result = pred(value);\n    let ret = result ? _then(value) : _else(value);\n    return ret;\n  };\n};\nUtil.if = (value, _then, _else, pred) => Util.ifThenElse(pred || (v => !!v), _then || (() => value), _else || (() => value))(value);\n\nUtil.ifElse = (value, _else, pred) => Util.ifThenElse(pred || (v => !!v), () => value, _else ? () => _else : () => value)(value);\nUtil.ifThen = (value, _then, pred) => Util.ifThenElse(pred || (v => !!v), _then ? () => _then : () => value, () => value)(value);\n\nUtil.switch = ({ default: defaultCase, ...cases }) =>\n  function(value) {\n    if(value in cases) return cases[value];\n    return defaultCase;\n  };\n\nUtil.transform = Util.curry(function* (fn, arr) {\n  for(let item of arr) yield fn(item);\n});\n\nUtil.colorDump = (iterable, textFn) => {\n  textFn = textFn || ((color, n) => ('   ' + (n + 1)).slice(-3) + ` ${color}`);\n\n  let j = 0;\n  const filters = 'font-weight: bold; text-shadow: 0px 0px 1px rgba(0,0,0,0.8); filter: drop-shadow(30px 10px 4px #4444dd)';\n\n  if(!Array.isArray(iterable)) iterable = [...iterable];\n  for(let j = 0; j < iterable.length; j++) {\n    const [i, color] = iterable[j].length == 2 ? iterable[j] : [j, iterable[j]];\n    console.log(\n      `  %c    %c ${color} %c ${textFn(color, i)}`,\n      `background: ${color}; font-size: 18px; ${filters};`,\n      `background: none; color: ${color}; min-width: 120px; ${filters}; `,\n      `color: black; font-size: 12px;`\n    );\n  }\n};\n\nUtil.bucketInserter = (map, ...extraArgs) => {\n  let inserter;\n  inserter =\n    typeof map.has == 'function'\n      ? function(...args) {\n          //console.log(\"bucketInsert:\",map,args);\n          for(let [k, v] of args) {\n            let a;\n            map.has(k) ? (a = map.get(k)) : map.set(k, (a = []));\n            a.push(v);\n          }\n          return inserter;\n        }\n      : function(...args) {\n          for(let arg of args) {\n            for(let k in arg) {\n              const v = arg[k];\n              let a = map[k] || [];\n              if(typeof a.push == 'function') a.push(v);\n\n              map[k] = a;\n            }\n          }\n        };\n  inserter(...extraArgs);\n  inserter.map = map;\n  return inserter;\n};\nUtil.fifo = function fifo() {\n  let resolve = () => {};\n  const queue = [];\n\n  //(there's no arrow function syntax for this)\n  async function* generator() {\n    for(;;) {\n      if(!queue.length) {\n        //there's nothing in the queue, wait until push()\n        await new Promise(r => (resolve = r));\n      }\n      yield queue.shift();\n    }\n  }\n\n  return {\n    push(...args) {\n      for(let event of args) {\n        queue.push(event);\n        if(queue.length === 1) resolve(); //allow the generator to resume\n      }\n      return this;\n    },\n    loop: generator(),\n\n    process: async function run() {\n      for await(const event of this.loop) {\n        console.info('event:', event);\n      }\n    }\n  };\n};\nUtil.isEmail = function(v) {\n  return /^[\\-\\w]+(\\.[\\-\\w]+)*@[\\-\\w]+(\\.[\\-\\w]+)+$/.test(v);\n};\nUtil.isString = function(v) {\n  return Object.prototype.toString.call(v) == '[object String]';\n};\n\n/**\n * Determines whether the specified v is numeric.\n *\n * @param      {<type>}   v       { parameter_description }\n * @return     {boolean}  True if the specified v is numeric, False otherwise.\n */\nUtil.isNumeric = v => /^[-+]?(0x|0b|0o|)[0-9]*\\.?[0-9]+(|[Ee][-+]?[0-9]+)$/.test(v + '');\n\nUtil.isUndefined = arg => arg === undefined;\nUtil.isObject = obj => !(obj === null) && { object: obj, function: obj }[typeof obj];\nUtil.isPrimitive = obj => !(obj === null) && obj !== false && obj !== true && { number: obj, string: obj, boolean: obj, undefined: obj }[typeof obj];\nUtil.isFunction = arg => {\n  if(arg !== undefined) return typeof arg == 'function' || !!(arg && arg.constructor && arg.call && arg.apply);\n\n  /*\n  let fn = arg => Util.isFunction(arg);\n  fn.inverse = arg => !Util.isFunction(arg);\n  return fn;*/\n};\nUtil.not = fn =>\n  function(...args) {\n    return !fn(...args);\n  };\nUtil.isAsync = fn => typeof fn == 'function' && /^[\\n]*async/.test(fn + '') /*|| fn() instanceof Promise*/;\n\nUtil.isArrowFunction = fn => (Util.isFunction(fn) && !('prototype' in fn)) || /\\ =>\\ /.test(('' + fn).replace(/\\n.*/g, ''));\n\nUtil.isEmptyString = v => Util.isString(v) && (v == '' || v.length == 0);\n\nUtil.isEmpty = (...args) => {\n  function empty(v) {\n    if(typeof v == 'object' && !!v && v.constructor == Object && Object.keys(v).length == 0) return true;\n    if(!v || v === null) return true;\n    if(typeof v == 'object' && v.length !== undefined && v.length === 0) return true;\n    return false;\n  }\n  return args.length ? empty(args[0]) : empty;\n};\nUtil.isNonEmpty = (...args) => {\n  const empty = Util.isEmpty();\n  const nonEmpty = v => !empty(v);\n  return args.length ? nonEmpty(args[0]) : nonEmpty;\n};\nUtil.isIpAddress = v => {\n  const n = (v + '').split('.').map(i => +i);\n  return n.length == 4 && n.every(i => !isNaN(i) && i >= 0 && i <= 255);\n};\nUtil.isPortNumber = v => {\n  const n = +v;\n  return !isNaN(n) && n >= 0 && n <= 65535;\n};\n\nUtil.hasProps = function(obj, props) {\n  const keys = Object.keys(obj);\n  return props ? props.every(prop => 'prop' in obj) : keys.length > 0;\n};\nUtil.validatePassword = function(value) {\n  return value.length > 7 && new RegExp('^(?![d]+$)(?![a-zA-Z]+$)(?![!#$%^&*]+$)[da-zA-Z!#$ %^&*]').test(value) && !/\\s/.test(value);\n};\nUtil.clone = function(obj, proto) {\n  if(Array.isArray(obj)) return obj.slice();\n  try {\n    let ret = new obj.constructor(obj);\n    return ret;\n  } catch(err) {}\n  if(typeof obj == 'object') return Object.create(proto || obj.constructor.prototype || Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\n};\n//deep copy\nUtil.deepClone = function(data) {\n  return JSON.parse(JSON.toString(data));\n};\n//Function\nUtil.findVal = function(object, propName, maxDepth = 10) {\n  if(maxDepth <= 0) return null;\n  for(let key in object) {\n    if(key === propName) {\n      //console.log(propName);\n      //console.log(object[key]);\n      return object[key];\n    }\n    let value = Util.findVal(object[key], propName, maxDepth - 1);\n    if(value !== undefined) return value;\n  }\n};\n//Deep copy for ObservableArray/Object == There is a problem\nUtil.deepCloneObservable = function(data) {\n  let o;\n  const t = typeof data;\n  if(t === 'object') return data;\n\n  if(t === 'object') {\n    if(data.length) {\n      for(const value of data) {\n        o.push(this.deepCloneObservable(value));\n      }\n      return o;\n    }\n    for(const i in data) {\n      o[i] = this.deepCloneObservable(data[i]);\n    }\n    return o;\n  }\n};\n//Convert ObservableArray to Array\nUtil.toArray = function(observableArray) {\n  return observableArray.slice();\n};\n\n/**\n * Convert the original array to tree\n * @param data original array\n * @param id id field\n * @param pId parent id field\n * @param appId the parent id value of the level one array\n */\nUtil.arryToTree = function(data, id, pId, appId) {\n  const arr = [];\n  data.map((e, i) => {\n    e[pId] === appId && arr.push(e);\n  });\n  const res = this.to3wei(arr, data, id, pId);\n  return res;\n};\n\n/**\n * Convert a first-level branch array to a tree\n * @param a level one branch array\n * @param old original array\n * @param id id field\n * @param pId parent id field\n */\nUtil.to3wei = function(a, old, id, pId) {\n  a.map((e, i) => {\n    a[i].children = [];\n    old.map((se, si) => {\n      if(se[pId] === a[i][id]) {\n        a[i].children = [...a[i].children, se];\n        this.to3wei(a[i].children, old, id, pId);\n      }\n    });\n    if(!a[i].children.length) {\n      delete a[i].children;\n    }\n  });\n  return a;\n};\n\n/**\n * Exchange 2 element positions in the array\n * @param arr original array\n * @param i First element Starting from 0\n * @param j The second element starts at 0\n */\nUtil.arrExchangePos = function(arr, i, j) {\n  arr[i] = arr.splice(j, 1, arr[i])[0];\n};\nUtil.arrRemove = function(arr, i) {\n  const index = arr.indexOf(i);\n  if(index > -1) arr.splice(index, 1);\n};\nUtil.move = function(src, dst = []) {\n  let items = src.splice(0, src.length);\n  dst.splice(dst.length, 0, ...items);\n  return dst;\n};\nUtil.moveIf = function(src, pred, dst = []) {\n  let items = src.splice(0, src.length);\n  let i = 0;\n  for(let item of items) (pred(item, i++) ? src : dst).push(item);\n\n  return dst;\n};\n//Remove the storage when logging out\nUtil.logOutClearStorage = function() {\n  localStorage.removeItem('userToken');\n  localStorage.removeItem('userLoginPermission');\n  localStorage.removeItem('ssoToken');\n  localStorage.removeItem('userId');\n  localStorage.removeItem('userInfo');\n  localStorage.removeItem('userGroupList');\n  localStorage.removeItem('gameAuthList');\n};\n//Take the cookies\nUtil.getCookie = function(cookie, name) {\n  let arr = cookie.match(new RegExp('(^| )' + name + '=([^;]*)(;|$)'));\n  if(arr != null) return unescape(arr[2]);\n  return null;\n};\nUtil.parseCookie = function(c = document.cookie) {\n  if(!(typeof c == 'string' && c && c.length > 0)) return {};\n  let key = '';\n  let value = '';\n  const ws = ' \\r\\n\\t';\n  let i = 0;\n  let ret = {};\n  const skip = (pred = char => ws.indexOf(char) != -1) => {\n    let start = i;\n    while(i < c.length && pred(c[i])) i++;\n    let r = c.substring(start, i);\n    return r;\n  };\n  do {\n    let str = skip(char => char != '=' && char != ';');\n    if(c[i] == '=' && str != 'path') {\n      i++;\n      key = str;\n      value = skip(char => char != ';');\n    } else {\n      i++;\n      skip();\n    }\n    if(key != '') ret[key] = value;\n    skip();\n  } while(i < c.length);\n  return ret;\n};\n\n/*\n    matches.shift();\n    return matches.reduce((acc, part) => {\n      const a = part.trim().split('=');\n      return { ...acc, [a[0]]: decodeURIComponent(a[1]) };\n    }, {});\n  };*/\nUtil.encodeCookie = c =>\n  Object.entries(c)\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('; ');\nUtil.setCookies = c =>\n  Object.entries(c).forEach(([key, value]) => {\n    document.cookie = `${key}=${value}`;\n    //console.log(`Setting cookie[${key}] = ${value}`);\n  });\nUtil.clearCookies = function(c) {\n  return Util.setCookies(\n    Object.keys(Util.parseCookie(c)).reduce(\n      (acc, name) =>\n        Object.assign(acc, {\n          [name]: `; max-age=0; expires=${new Date().toUTCString()}`\n        }),\n      {}\n    )\n  );\n};\nUtil.deleteCookie = function(name) {\n  const w = Util.tryCatch(\n    () => globalThis.window,\n    w => w,\n    () => null\n  );\n\n  if(w) document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n};\nUtil.accAdd = function(arg1, arg2) {\n  let r1, r2, m;\n  try {\n    r1 = arg1.toString().split('.')[1].length;\n  } catch(e) {\n    r1 = 0;\n  }\n  try {\n    r2 = arg2.toString().split('.')[1].length;\n  } catch(e) {\n    r2 = 0;\n  }\n  m = Math.pow(10, Math.max(r1, r2));\n  return (arg1 * m + arg2 * m) / m;\n};\n//js subtraction calculation\n//\nUtil.Subtr = function(arg1, arg2) {\n  let r1, r2, m, n;\n  try {\n    r1 = arg1.toString().split('.')[1].length;\n  } catch(e) {\n    r1 = 0;\n  }\n  try {\n    r2 = arg2.toString().split('.')[1].length;\n  } catch(e) {\n    r2 = 0;\n  }\n  m = Math.pow(10, Math.max(r1, r2));\n  //last modify by deeka\n  //åŠ¨æ€æŽ§åˆ¶ç²¾åº¦é•¿åº¦\n  n = r1 >= r2 ? r1 : r2;\n  return (arg1 * m - arg2 * m) / m;\n};\n//js division function\n//\nUtil.accDiv = function(arg1, arg2) {\n  let t1 = 0;\n  let t2 = 0;\n  let r1;\n  let r2;\n  try {\n    t1 = arg1.toString().split('.')[1].length;\n  } catch(e) {}\n  try {\n    t2 = arg2.toString().split('.')[1].length;\n  } catch(e) {}\n  r1 = Number(arg1.toString().replace('.', ''));\n  r2 = Number(arg2.toString().replace('.', ''));\n  return (r1 / r2) * Math.pow(10, t2 - t1);\n};\n//js multiplication function\n//\nUtil.accMul = function(arg1, arg2) {\n  let m = 0;\n  const s1 = arg1.toString();\n  const s2 = arg2.toString();\n  try {\n    m += s1.split('.')[1].length;\n  } catch(e) {}\n  try {\n    m += s2.split('.')[1].length;\n  } catch(e) {}\n  return (Number(s1.replace('.', '')) * Number(s2.replace('.', ''))) / Math.pow(10, m);\n};\nUtil.dateFormatter = function(date, formate) {\n  const year = date.getFullYear();\n  let month = date.getMonth() + 1;\n  month = month > 9 ? month : `0${month}`;\n  let day = date.getDate();\n  day = day > 9 ? day : `0${day}`;\n  let hour = date.getHours();\n  hour = hour > 9 ? hour : `0${hour}`;\n  let minute = date.getMinutes();\n  minute = minute > 9 ? minute : `0${minute}`;\n  let second = date.getSeconds();\n  second = second > 9 ? second : `0${second}`;\n  return formate\n    .replace(/Y+/, `${year}`.slice(-formate.match(/Y/g).length))\n    .replace(/M+/, month)\n    .replace(/D+/, day)\n    .replace(/h+/, hour)\n    .replace(/m+/, minute)\n    .replace(/s+/, second);\n};\nUtil.numberFormatter = function(numStr) {\n  let numSplit = numStr.split('.');\n  return numSplit[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',').concat(`.${numSplit[1]}`);\n};\nUtil.searchObject = function(object, matchCallback, currentPath, result, searched) {\n  currentPath = currentPath || '';\n  result = result || [];\n  searched = searched || [];\n  if(searched.indexOf(object) !== -1 && object === Object(object)) {\n    return;\n  }\n  searched.push(object);\n  if(matchCallback(object)) {\n    result.push({ path: currentPath, value: object });\n  }\n  try {\n    if(object === Object(object)) {\n      for(const property in object) {\n        const desc = Object.getOwnPropertyDescriptor(object, property);\n        //console.log('x ', {property, desc})\n        if(property.indexOf('$') !== 0 && typeof object[property] !== 'function' && !desc.get && !desc.set) {\n          if(typeof object[property] === 'object') {\n            try {\n              JSON.toString(object[property]);\n            } catch(err) {\n              continue;\n            }\n          }\n          //if (Object.prototype.hasOwnProperty.call(object, property)) {\n          Util.searchObject(object[property], matchCallback, `${currentPath}.${property}`, result, searched);\n          //}\n        }\n      }\n    }\n  } catch(e) {\n    //console.log(object);\n    //throw e;\n  }\n  return result;\n};\nUtil.getURL = Util.memoize((req = {}) =>\n  Util.tryCatch(\n    () => process.argv[1],\n    () => 'file://' + Util.scriptDir(),\n\n    Util.tryCatch(\n      () => window.location.href,\n\n      url => url,\n\n      () => {\n        let proto = Util.tryCatch(() => (process.env.NODE_ENV === 'production' ? 'https' : null)) || 'http';\n        let port = Util.tryCatch(() => (process.env.PORT ? parseInt(process.env.PORT) : process.env.NODE_ENV === 'production' ? 443 : null)) || 3000;\n        let host = Util.tryCatch(() => globalThis.ip) || Util.tryCatch(() => globalThis.host) || Util.tryCatch(() => window.location.host.replace(/:.*/g, '')) || 'localhost';\n        if(req && req.headers && req.headers.host !== undefined) host = req.headers.host.replace(/:.*/, '');\n        else Util.tryCatch(() => process.env.HOST !== undefined && (host = process.env.HOST));\n        if(req.url !== undefined) return req.url;\n        const url = `${proto}://${host}:${port}`;\n        return url;\n      }\n    )\n  )\n);\nUtil.parseQuery = function(url = Util.getURL()) {\n  let startIndex;\n  let query = {};\n  try {\n    if((startIndex = url.indexOf('?')) != -1) url = url.substring(startIndex);\n    const args = [...url.matchAll(/[?&]([^=&#]+)=?([^&#]*)/g)];\n    if(args) {\n      for(let i = 0; i < args.length; i++) {\n        const k = args[i][1];\n        query[k] = decodeURIComponent(args[i][2]);\n      }\n    }\n    return query;\n  } catch(err) {\n    return undefined;\n  }\n};\nUtil.encodeQuery = function(data) {\n  const ret = [];\n  for(let d in data) if(data[d] !== undefined) ret.push(`${encodeURIComponent(d)}=${encodeURIComponent(data[d])}`);\n  return ret.join('&');\n};\nUtil.parseURL = function(href = this.getURL()) {\n  //console.debug('href:', href);\n  const matches = new RegExp('^([^:]+://)?([^/:]*)(:[0-9]*)?(/?[^#]*)?(#.*)?', 'g').exec(href);\n  const [all, proto, host, port, location = '', fragment] = matches;\n  //console.debug('matches:', matches);\n  if(!matches) return null;\n  const argstr = location.indexOf('?') != -1 ? location.replace(/^[^?]*\\?/, '') : ''; /* + \"&test=1\"*/\n  const pmatches =\n    typeof argstr === 'string'\n      ? argstr\n          .split(/&/g)\n          .map(part => {\n            let a = part.split(/=/);\n            let b = a.shift();\n            return [b, a.join('=')];\n          })\n          .filter(([k, v]) => !(k.length == 0 && v.length == 0))\n      : [];\n  const params = [...pmatches].reduce((acc, m) => {\n    acc[m[0]] = m[1];\n    return acc;\n  }, {});\n  //console.log(\"PARAMS: \", { argstr, pmatches, params });\n  const ret = {\n    protocol: proto ? proto.replace('://', '') : 'http',\n    host,\n    location: location.replace(/\\?.*/, ''),\n    query: params\n  };\n  Object.assign(ret, {\n    href(override) {\n      if(typeof override === 'object') Object.assign(this, override);\n      const qstr = Util.encodeQuery(this.query);\n      return (this.protocol ? `${this.protocol}://` : '') + (this.host ? this.host : '') + (this.port ? `:${this.port}` : '') + `${this.location}` + (qstr != '' ? `?${qstr}` : '');\n    }\n  });\n  if(typeof port === 'string') ret.port = parseInt(port.substring(1));\n  else if(ret.protocol == 'https') ret.port = 443;\n  else if(ret.protocol == 'http') ret.port = 80;\n  if(fragment) ret.fragment = fragment;\n  return ret;\n};\nUtil.makeURL = function(...args) {\n  let href = typeof args[0] == 'string' ? args.shift() : Util.getURL();\n  let url = Util.parseURL(href);\n  let obj = typeof args[0] == 'object' ? args.shift() : {};\n  if('host' in obj /*|| 'protocol' in obj*/) url = Util.filterOutKeys(url, [/*'protocol',*/ 'host', 'port']);\n  Object.assign(url, obj);\n  return url.href();\n\n  /*\n  let href = typeof args[0] === \"string\" ? args.shift() : this.getURL();\n  let urlObj = null;\n  urlObj = this.parseURL(href);\n  return urlObj ? urlObj.href(args[0]) : null;*/\n};\nUtil.numberFromURL = function(url, fn) {\n  const obj = typeof url === 'object' ? url : this.parseURL(url);\n  const nr_match = RegExp('.*[^0-9]([0-9]+)$').exec(url.location);\n  const nr_arg = nr_match ? nr_match[1] : undefined;\n  const nr = nr_arg && parseInt(nr_arg);\n  if(!isNaN(nr) && typeof fn === 'function') fn(nr);\n  return nr;\n};\nUtil.tryPromise = fn => new Promise((resolve, reject) => Util.tryCatch(fn, resolve, reject));\n\nUtil.tryFunction = (fn, resolve = a => a, reject = () => null) => {\n  if(typeof resolve != 'function') {\n    let rval = resolve;\n    resolve = () => rval;\n  }\n  if(typeof reject != 'function') {\n    let cval = reject;\n    reject = () => cval;\n  }\n  return Util.isAsync(fn)\n    ? async function(...args) {\n        let ret;\n        try {\n          ret = await fn(...args);\n        } catch(err) {\n          return reject(err, ...args);\n        }\n        return resolve(ret, ...args);\n      }\n    : function(...args) {\n        let ret;\n        try {\n          ret = fn(...args);\n        } catch(err) {\n          return reject(err, ...args);\n        }\n        return resolve(ret, ...args);\n      };\n};\nUtil.tryCatch = (fn, resolve = a => a, reject = () => null, ...args) => {\n  if(Util.isAsync(fn))\n    return fn(...args)\n      .then(resolve)\n      .catch(reject);\n\n  return Util.tryFunction(fn, resolve, reject)(...args);\n};\n\nUtil.putError = err => {\n  let e = Util.isObject(err) && err instanceof Error ? err : Util.exception(err);\n  (console.info || console.log)('Util.putError ', e);\n  let s = err.stack ? Util.stack(err.stack) : null;\n\n  (console.error || console.log)('ERROR:\\n' + err.message + (s ? '\\nstack:\\n' + s.toString() : s));\n};\nUtil.putStack = (stack = new Util.stack().slice(3)) => {\n  stack = stack instanceof Util.stack ? stack : Util.stack(stack);\n  console.log('Util.putStack', Util.className(stack));\n\n  console.log('STACK TRACE:\\n' + stack.toString());\n};\n\nUtil.trap = (() => {\n  Error.stackTraceLimit = 100;\n  return fn => /* prettier-ignore */ Util.tryFunction(fn, ret => ret, Util.putError);\n})();\n\nUtil.tryPredicate = (fn, defaultRet) =>\n  Util.tryFunction(\n    fn,\n    ret => ret,\n    () => defaultRet\n  );\n\nUtil.isBrowser = function() {\n  let ret = false;\n\n  Util.tryCatch(\n    () => window,\n    w => (Util.isObject(w) ? (ret = true) : undefined),\n    () => {}\n  );\n  Util.tryCatch(\n    () => document,\n    d => (d == window.document && Util.isObject(d) ? (ret = true) : undefined),\n    () => {}\n  );\n  return ret;\n  //return !!(globalThis.window && globalThis.window.document);\n};\n\nUtil.waitFor = async function waitFor(msecs) {\n  if(!globalThis.setTimeout) {\n    await import('os').then(({ setTimeout, clearTimeout, setInterval, clearInterval }) => {\n      //console.log('', { setTimeout, clearTimeout, setInterval, clearInterval });\n      Object.assign(globalThis, {\n        setTimeout,\n        clearTimeout,\n        setInterval,\n        clearInterval\n      });\n    });\n  }\n  if(msecs <= 0) return;\n\n  let promise, clear, timerId;\n  promise = new Promise(async (resolve, reject) => {\n    timerId = setTimeout(() => resolve(), msecs);\n    clear = () => {\n      clearTimeout(timerId);\n      reject();\n    };\n  });\n  promise.clear = clear;\n  return promise;\n};\n\nUtil.timeout = async (msecs, promises, promiseClass = Promise) => await promiseClass.race([Util.waitFor(msecs)].concat(Array.isArray(promises) ? promises : [promises]));\nUtil.isServer = function() {\n  return !Util.isBrowser();\n};\nUtil.isMobile = function() {\n  return true;\n};\nUtil.uniquePred = (cmp = null) => (typeof cmp == 'function' ? (el, i, arr) => arr.findIndex(item => cmp(el, item)) == i : (el, i, arr) => arr.indexOf(el) == i);\n\nUtil.unique = (arr, cmp) => arr.filter(Util.uniquePred(cmp));\nUtil.allEqual = (arr, cmp = (a, b) => a == b) => arr.every((e, i, a) => cmp(e, a[0]));\n\nUtil.zip = a => a.reduce((a, b) => (a.length > b.length ? a : b), []).map((_, i) => a.map(arr => arr[i]));\n\nUtil.histogram = (...args) => {\n  let arr = args.shift();\n  const t = typeof args[0] == 'function' ? args.shift() : (k, v) => k;\n  let [out = false ? {} : new Map(), initVal = () => 0 /* new Set()*/, setVal = v => v] = args;\n\n  const set = /*Util.isObject(out) && typeof out.set == 'function' ? (k, v) => out.set(k, v) :*/ Util.setter(out);\n  const get = Util.getOrCreate(out, initVal, set);\n  let ctor = Object.getPrototypeOf(out) !== Object.prototype ? out.constructor : null;\n  let tmp;\n\n  if(Util.isObject(arr) && !Array.isArray(arr) && typeof arr.entries == 'function') arr = arr.entries();\n  arr = [...arr];\n  let entries = arr.map((it, i) => [i, it]);\n  let x = {};\n  let iv = initVal();\n  const add = Util.adder(iv);\n  const upd = Util.updater(out, get, set);\n\n  let r = arr.map((item, i) => {\n    let arg;\n    let key;\n    tmp = t(item, i);\n    if(tmp) {\n      key = tmp;\n      if(Array.isArray(tmp) && tmp.length >= 2) [key, arg] = tmp.slice(-2);\n      else arg = tmp;\n    }\n    [key, arg] = [key].concat(setVal(arg, i)).slice(-2);\n    return [\n      key,\n      upd(key, (entry, idx, key) => {\n        return add(entry, typeof entry == 'number' ? 1 : item);\n      })\n    ];\n  });\n  return out;\n  //console.debug('r:', r);\n  if(ctor) {\n    let entries = r;\n    let keys = r.map(([k, v]) => k);\n    entries = [...entries].sort((a, b) => b[1] - a[1]);\n    let tmp = new ctor(entries);\n    r = tmp;\n  }\n  return r;\n};\nUtil.concat = function* (...args) {\n  for(let arg of args) {\n    if(Util.isGenerator(arg)) {\n      console.error('isGenerator:', arg);\n      yield* arg;\n    } else {\n      /* if(Array.isArray(arg))*/\n      for(let item of arg) yield item;\n    }\n\n    /*   else  else {\n      throw new Error(\"No such arg type:\"+typeof(arg));\n    }*/\n  }\n};\nUtil.distinct = function(arr) {\n  return Array.prototype.filter.call(arr, (value, index, me) => me.indexOf(value) === index);\n};\nUtil.rangeMinMax = function(arr, field) {\n  const numbers = [...arr].map(obj => obj[field]);\n  return [Math.min(...numbers), Math.max(...numbers)];\n};\n\nUtil.remap = (...args) => {\n  const getR = () => (Array.isArray(args[0]) ? args.shift() : args.splice(0, 2));\n  const _from = getR(),\n    to = getR();\n\n  const f = [to[1] - to[0], _from[1] - _from[0]];\n  const factor = f[0] / f[1];\n\n  const r = val => (val - _from[0]) * factor + to[0];\n\n  return r;\n};\nUtil.mergeLists = function(arr1, arr2, key = 'id') {\n  let hash = {};\n\n  for(let obj of arr1) hash[obj[key]] = obj;\n  for(let obj of arr2) hash[obj[key]] = obj;\n  return Object.values(hash);\n\n  /* let hash = arr1.reduce((acc, it) => Object.assign({ [it[key]]: it }, acc), {});\n  hash = arr2.reduce((acc, it) => Object.assign({ [it[key]]: it }, acc), {});\n  let ret = [];\n  for(let k in hash) {\n    if(hash[k][key]) ret.push(hash[k]);\n  }\n  return ret;*/\n};\n\nUtil.foreach = function(o, fn) {\n  for(let [k, v] of Util.entries(o)) {\n    if(fn(v, k, o) === false) break;\n  }\n};\nUtil.all = function(obj, pred) {\n  for(let k in obj) if(!pred(obj[k])) return false;\n  return true;\n};\nUtil.isGenerator = function(fn) {\n  return (typeof fn == 'function' && /^[^(]*\\*/.test(fn.toString())) || (['function', 'object'].indexOf(typeof fn) != -1 && fn.next !== undefined);\n};\nUtil.isIterator = obj => Util.isObject(obj) && typeof obj.next == 'function';\n\nUtil.isIterable = obj => {\n  try {\n    for(let item of obj) return true;\n  } catch(err) {}\n  return false;\n};\nUtil.isNativeFunction = Util.tryFunction(x => typeof x == 'function' && /^[^\\n]*\\[(native\\ code|[a-z\\ ]*)\\]/.test(x + ''));\n\nUtil.isConstructor = x => {\n  if(x !== undefined) {\n    let ret,\n      members = [];\n    const handler = {\n      construct(target, args) {\n        return Object.create(target.prototype);\n      }\n    };\n    try {\n      ret = new new Proxy(x, handler)();\n    } catch(e) {\n      ret = false;\n    }\n    let proto = (x && x.prototype) || Object.getPrototypeOf(ret);\n    members = Util.getMemberNames(proto).filter(m => m !== 'constructor');\n    //console.log('members:', !!ret, members, Util.fnName(x));\n    return !!ret && members.length > 0;\n  }\n};\n\nUtil.filter = function(a, pred) {\n  if(typeof pred != 'function') pred = Util.predicate(pred);\n  if(Array.isArray(a)) return a.filter(pred);\n  /*return (function* () {\n      for(let [k, v] of a.entries()) if(pred(v, k, a)) yield v;\n    })();*/\n\n  if(Util.isGenerator(a))\n    return (function* () {\n      for(let item of a) if(pred(item)) yield item;\n    })();\n  let isa = Array.isArray(a);\n  let ret = {};\n  let fn = (k, v) => (ret[k] = v);\n  for(let [k, v] of Util.entries(a)) if(pred(v, k, a)) fn(k, v);\n  return Object.setPrototypeOf(ret, Object.getPrototypeOf(a));\n};\nUtil.reduce = (obj, fn, accu) => {\n  if(Util.isGenerator(obj)) {\n    let i = 0;\n    for(let item of obj) accu = fn(accu, item, i++, obj);\n    return accu;\n  }\n  for(let key in obj) accu = fn(accu, obj[key], key, obj);\n  return accu;\n};\nUtil.mapFunctional = fn =>\n  function* (arg) {\n    for(let item of arg) yield fn(item);\n  };\nUtil.map = (...args) => {\n  let [obj, fn] = args;\n  let ret = a => a;\n\n  if(Util.isIterator(obj)) {\n    return ret(function* () {\n      let i = 0;\n      for(let item of obj) yield fn(item, i++, obj);\n    })();\n  }\n  if(typeof obj == 'function') return Util.mapFunctional(...args);\n\n  if(typeof obj.map == 'function') return obj.map(fn);\n\n  if(typeof obj.entries == 'function') {\n    const ctor = obj.constructor;\n    obj = obj.entries();\n    ret = a => new ctor([...a]);\n    //    ret = a => new ctor(a);\n  }\n\n  /*console.log(\"obj\",(obj));\nconsole.log(\"isGenerator\",Util.isGenerator(obj));*/\n\n  if(Util.isGenerator(obj))\n    return ret(\n      (function* () {\n        let i = 0;\n        for(let item of obj) yield fn(item, i++, obj);\n      })()\n    );\n  //  if(typeof fn != 'function') return Util.toMap(...arguments);\n\n  ret = {};\n  for(let key in obj) {\n    if(obj.hasOwnProperty(key)) {\n      let item = fn(key, obj[key], obj);\n      if(item) ret[item[0]] = item[1];\n    }\n  }\n  return ret; //Object.setPrototypeOf(ret,Object.getPrototypeOf(obj));\n};\n\n/*Util.indexedMap = (arr, fn = arg => arg.name) => {\n  return new Proxy(arr, {\n    get(target, prop, receiver) {\n      let idx = arr.findIndex(item => fn(item) == 'prop');\n      if(idx != -1)\n        prop = idx;\n\n      return Reflect.get(arr, idx, receiver);\n    }\n  });\n};*/\n\nUtil.entriesToObj = function(arr) {\n  return [...arr].reduce((acc, item) => {\n    const k = item[0];\n    const v = item[1];\n    acc[k] = v;\n    return acc;\n  }, {});\n};\nUtil.isDate = function(d) {\n  return d instanceof Date || (typeof d == 'string' && /[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]/.test(d));\n};\nUtil.parseDate = function(d) {\n  if(Util.isDate(d)) {\n    d = new Date(d);\n  }\n  return d;\n  //return /^[0-9]+$/.test(d) ? Util.fromUnixTime(d) : new Date(d);\n};\nUtil.isoDate = function(date) {\n  try {\n    if(typeof date == 'number') date = new Date(date);\n    const minOffset = date.getTimezoneOffset();\n    const milliseconds = date.valueOf() - minOffset * 60 * 1000;\n    date = new Date(milliseconds);\n    return date.toISOString().replace(/T.*/, '');\n  } catch(err) {}\n  return null;\n};\nUtil.toUnixTime = function(dateObj, utc = false) {\n  if(!(dateObj instanceof Date)) dateObj = new Date(dateObj);\n  let epoch = Math.floor(dateObj.getTime() / 1000);\n  if(utc) epoch += dateObj.getTimezoneOffset() * 60;\n  return epoch;\n};\nUtil.unixTime = function(utc = false) {\n  return Util.toUnixTime(new Date(), utc);\n};\nUtil.fromUnixTime = function(epoch, utc = false) {\n  let t = parseInt(epoch);\n  let d = new Date(0);\n  utc ? d.setUTCSeconds(t) : d.setSeconds(t);\n  return d;\n};\nUtil.formatTime = function(date = new Date(), format = 'HH:MM:SS') {\n  let n;\n  let out = '';\n  if(typeof date == 'number') date = new Date(date);\n  for(let i = 0; i < format.length; i += n) {\n    n = 1;\n    while(format[i] == format[i + n]) n++;\n    const fmt = format.substring(i, i + n);\n    let num = fmt;\n    if(fmt.startsWith('H')) num = `0${date.getHours()}`.substring(0, n);\n    else if(fmt.startsWith('M')) num = `0${date.getMinutes()}`.substring(0, n);\n    else if(fmt.startsWith('S')) num = `0${date.getSeconds()}`.substring(0, n);\n    out += num;\n  }\n  return out;\n};\nUtil.leapYear = function(year) {\n  if(year % 400 == 0) return true;\n  if(year % 100 == 0) return false;\n  if(year % 4 == 0) return true;\n  return false;\n};\nUtil.timeSpan = function(s) {\n  const seconds = s % 60;\n  s = Math.floor(s / 60);\n  const minutes = s % 60;\n  s = Math.floor(s / 60);\n  const hours = s % 24;\n  s = Math.floor(s / 24);\n  const days = s % 7;\n  s = Math.floor(s / 7);\n  const weeks = s;\n  let ret = '';\n  ret = `${('0' + hours).substring(0, 2)}:${('0' + minutes).substring(0, 2)}:${('0' + seconds).substring(0, 2)}`;\n  if(days) ret = `${days} days ${ret}`;\n  if(weeks) ret = `${weeks} weeks ${ret}`;\n  return ret;\n};\nUtil.rng = Math.random;\nUtil.randFloat = function(min, max, rnd = Util.rng) {\n  return rnd() * (max - min) + min;\n};\nUtil.randInt = (...args) => {\n  let range = args.splice(0, 2);\n  let rnd = args.shift() || Util.rng;\n  if(range.length < 2) range.unshift(0);\n  return Math.round(Util.randFloat(...range, rnd));\n};\nUtil.randStr = (len, charset, rnd = Util.rng) => {\n  let o = '';\n  if(!charset) charset = '_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n\n  while(--len >= 0) {\n    o += charset[Math.round(rnd() * (charset.length - 1))];\n  }\n  return o;\n};\n\nUtil.hex = function(num, numDigits) {\n  let v = typeof num == 'number' ? num : parseInt(num);\n  let s = v.toString(16);\n  numDigits = numDigits || Math.floor((s.length + 1) / 2) * 2;\n  return ('0'.repeat(numDigits) + s).slice(-numDigits);\n};\nUtil.numberParts = (num, base) => {\n  let exp = 0;\n  let sgn = 0;\n  if(num === 0) return { sign: 0, mantissa: 0, exponent: 0 };\n  if(num < 0) (sgn = 1), (num = -num);\n  while(num > base) (num /= base), exp++;\n  while(num < 1) (num *= base), exp--;\n  return { sign: sgn, mantissa: num, exponent: exp };\n};\nUtil.roundDigits = precision => {\n  if(typeof precision == 'number') return -Math.log10(precision);\n\n  precision = precision + '';\n  let index = precision.indexOf('.');\n  let frac = index == -1 ? '' : precision.slice(index + 1);\n  return frac.length;\n\n  return -Util.clamp(-Infinity, 0, Math.floor(Math.log10(precision - Number.EPSILON)));\n};\n\nUtil.roundFunction = (prec, digits, type) => {\n  digits = digits || Util.roundDigits(prec);\n  type = type || 'round';\n\n  const fn = Math[type];\n  if(prec == 1) return fn;\n\n  return function(value) {\n    let ret = fn(value / prec) * prec;\n    if(typeof digits == 'number' && digits >= 1 && digits <= 100) ret = +ret.toFixed(digits);\n    return ret;\n  };\n};\n\nUtil.roundTo = function(value, prec, digits, type) {\n  if(!isFinite(value)) return value;\n  digits = digits || Util.roundDigits(prec);\n  type = type || 'round';\n  const fn = Math[type];\n  if(prec == 1) return fn(value);\n  let ret = prec > Number.EPSILON ? fn(value / prec) * prec : value;\n  if(typeof digits == 'number' && digits >= 1 && digits <= 100) ret = +ret.toFixed(digits);\n  //else ret = Math[type](ret);\n  return ret;\n};\n\nUtil.base64 = (() => {\n  const g = Util.getGlobalObject();\n\n  return {\n    encode: Util.tryFunction(\n      utf8 => g.btoa(g.unescape(g.encodeURIComponent(utf8))),\n      v => v,\n      utf8 => Buffer.from(utf8).toString('base64')\n    ),\n    decode: Util.tryFunction(\n      base64 => g.decodeURIComponent(g.escape(g.atob(base64))),\n      v => v,\n      string => Buffer.from(string, 'base64').toString('utf-8')\n    )\n  };\n})();\n\nUtil.formatRecord = function(obj) {\n  let ret = {};\n  for(let key in obj) {\n    let val = obj[key];\n    if(val instanceof Array) val = val.map(item => Util.formatRecord(item));\n    else if(/^-?[0-9]+$/.test(val)) val = parseInt(val);\n    else if(/^-?[.0-9]+$/.test(val)) val = parseFloat(val);\n    else if(val == 'true' || val == 'false') val = Boolean(val);\n    ret[key] = val;\n  }\n  return ret;\n};\nArray.isArray =\n  Array.isArray ||\n  function(obj) {\n    if(obj.constructor === Array) return true;\n    return (\n      (obj && !Util.isGetter(obj, 'length') && Util.isObject(obj) && 'length' in obj && !(obj instanceof String) && !(obj instanceof Function) && typeof obj == 'function') || obj instanceof Array\n    );\n  };\nArray.isArrayLike = obj => typeof obj == 'object' && obj !== null && 'length' in obj;\n\nUtil.equals = function(a, b) {\n  if(Array.isArray(a) && Array.isArray(b)) {\n    return a.length == b.length && a.every((e, i) => b[i] === e);\n  } else if(Util.isObject(a) && Util.isObject(b)) {\n    const size_a = Util.size(a);\n\n    if(size_a != Util.size(b)) return false;\n\n    for(let k in a) if(!Util.equals(a[k], b[k])) return false;\n\n    return true;\n  }\n  return a == b;\n};\n/*#define _GNU_SOURCE\n#include <ctype.h>\n#include <string.h>\n\nint\nstrverscmp(const char* a0, const char* b0) {\n  const unsigned char* a = (const void*)a0;\n  const unsigned char* b = (const void*)b0;\n  size_t i, dp, j;\n  int z = 1;\n  for(dp = i = 0; a[i] == b[i]; i++) {\n    int c = a[i];\n    if(!c)\n      return 0;\n    if(!isdigit(c))\n      dp = i + 1, z = 1;\n    else if(c != '0')\n      z = 0;\n  }\n  if(a[dp] != '0' && b[dp] != '0') {\n    for(j = i; isdigit(a[j]); j++)\n      if(!isdigit(b[j]))\n        return 1;\n    if(isdigit(b[j]))\n      return -1;\n  } else if(z && dp < i && (isdigit(a[i]) || isdigit(b[i]))) {\n    return (unsigned char)(a[i] - '0') - (unsigned char)(b[i] - '0');\n  }\n  return a[i] - b[i];\n}*/\nUtil.versionCompare = (a, b) => {\n  // console.log(\"Util.versionCompare\",{a,b});\n  if(typeof a != 'string') a = a + '';\n  if(typeof b != 'string') b = b + '';\n\n  let i,\n    dp,\n    j,\n    z = 1;\n  const isdigit = c => /^[0-9]$/.test(c);\n\n  for(dp = i = 0; a[i] == b[i]; i++) {\n    let c;\n    if(!(c = a[i])) return 0;\n    if(!isdigit(c)) (dp = i + 1), (z = 1);\n    else if(c != '0') z = 0;\n  }\n  if(a[dp] != '0' && b[dp] != '0') {\n    for(j = i; isdigit(a[j]); j++) if(!isdigit(b[j])) return 1;\n    if(isdigit(b[j])) return -1;\n  } else if(z && dp < i && (isdigit(a[i]) || isdigit(b[i]))) {\n    return a.codePointAt(i) - 0x30 - (b.codePointAt(i) - 0x30);\n  }\n\n  return a.codePointAt(i) - b.codePointAt(i);\n};\n\n/*\nUtil.isObject = function(obj) {\n  const type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n};*/\n\nUtil.isGetter = (obj, propName) => {\n  while(obj) {\n    let desc = Object.getOwnPropertyDescriptor(obj, propName);\n    if(desc && 'get' in desc) return true;\n    obj = Object.getPrototypeOf(obj);\n  }\n  return false;\n};\nUtil.isBool = value => value === true || value === false;\nUtil.size = (...args) => {\n  function size(obj) {\n    if(Util.isObject(obj)) {\n      if(obj instanceof Map) return obj.size;\n      else if('length' in obj) return obj.length;\n      else return Object.keys(obj).length;\n    }\n  }\n  if(args.length == 0) return size;\n  return size(args[0]);\n};\nUtil.isMap = function(obj) {\n  return (obj && obj.get !== undefined && obj.keys !== undefined) || obj instanceof Map;\n};\nUtil.effectiveDeviceWidth = function() {\n  let deviceWidth = window.orientation == 0 ? window.screen.width : window.screen.height;\n  //iOS returns available pixels, Android returns pixels / pixel ratio\n  //http://www.quirksmode.org/blog/archives/2012/07/more_about_devi.html\n  if(navigator.userAgent.indexOf('Android') >= 0 && window.devicePixelRatio) {\n    deviceWidth = deviceWidth / window.devicePixelRatio;\n  }\n  return deviceWidth;\n};\nUtil.getFormFields = function(initialState) {\n  return Util.mergeObjects([\n    initialState,\n    [...document.forms].reduce(\n      (acc, { elements }) => [...elements].reduce((acc2, { name, value }) => (name == '' || value == undefined || value == 'undefined' ? acc2 : Object.assign(acc2, { [name]: value })), acc),\n      {}\n    )\n  ]);\n};\nUtil.mergeObjects = function(objArr, predicate = (dst, src, key) => (src[key] == '' ? undefined : src[key])) {\n  let args = objArr;\n  let obj = {};\n  for(let i = 0; i < args.length; i++) {\n    for(let key in args[i]) {\n      const newVal = predicate(obj, args[i], key);\n      if(newVal != undefined) obj[key] = newVal;\n    }\n  }\n  return obj;\n};\nUtil.getUserAgent = function(headers = req.headers) {\n  const agent = useragent.parse(headers['user-agent']);\n  return agent;\n};\nUtil.factor = function(start, end) {\n  let f = 1;\n  for(let i = start; i <= end; i++) {\n    f = f * i;\n  }\n  return f;\n};\nUtil.factorial = function(n) {\n  return Util.factor(1, n);\n};\nUtil.increment = function(obj, key) {\n  if(obj[key] >= 1) obj[key] == 0;\n  obj[key]++;\n  return obj[key];\n};\nUtil.counter = function() {\n  let i = 0;\n  let self = function() {\n    return i++;\n  };\n  return self;\n};\nUtil.filterKeys = function(obj, pred = k => true) {\n  let ret = {};\n  if(pred instanceof RegExp) {\n    let re = pred;\n    pred = str => re.test(str);\n  } else if(Array.isArray(pred)) {\n    let a = pred;\n    pred = str => a.indexOf(str) != -1;\n  }\n  for(let key in obj) if(pred(key, obj[key], obj)) ret[key] = obj[key];\n  //Object.setPrototypeOf(ret, Object.getPrototypeOf(obj));\n  return ret;\n};\nUtil.filterMembers = function(obj, fn) {\n  const pred = (k, v, o) => fn(v, k, o);\n  return Util.filterKeys(obj, pred);\n};\nUtil.filterOutMembers = function(obj, fn) {\n  const pred = (v, k, o) => !fn(v, k, o);\n  return Util.filterMembers(obj, pred);\n};\nUtil.dumpMembers = obj => Util.filterOutMembers(obj, Util.isFunction);\n\nUtil.filterOutKeys = function(obj, arr) {\n  if(typeof obj != 'object') return obj;\n  const pred =\n    typeof arr == 'function' ? (v, k, o) => arr(k, v, o) : arr instanceof RegExp ? (k, v) => arr.test(k) /*|| arr.test(v)*/ : Array.isArray(arr) ? key => arr.indexOf(key) != -1 : () => ({});\n  return Util.filterOutMembers(obj, (v, k, o) => pred(k, v, o));\n};\nUtil.removeKeys = function(obj, arr) {\n  if(typeof obj != 'object') return obj;\n  const pred = typeof arr == 'function' ? (v, k, o) => arr(k, v, o) : arr instanceof RegExp ? (k, v) => arr.test(k) /*|| arr.test(v)*/ : key => arr.indexOf(key) != -1;\n  for(let key in obj) {\n    if(pred(key, obj[key], obj)) delete obj[key];\n  }\n};\nUtil.getKeys = function(obj, arr) {\n  let ret = {};\n  for(let key of arr) ret[key] = obj[key];\n\n  return ret;\n};\nUtil.numbersConvert = function(str) {\n  return str\n    .split('')\n    .map((ch, i) => (new RegExp('[ :,./]').test(ch) ? ch : String.fromCharCode((str.charCodeAt(i) & 0x0f) + 0x30)))\n    .join('');\n};\nUtil.entries = function(arg) {\n  if(Array.isArray(arg) || Util.isObject(arg)) {\n    if(typeof arg.entries == 'function') return arg.entries();\n    else if(Util.isIterable(arg))\n      return (function* () {\n        for(let key in arg) yield [key, arg[key]];\n      })();\n    return Object.entries(arg);\n  }\n};\nUtil.keys = function(arg) {\n  let ret;\n  if(Util.isObject(arg)) {\n    ret =\n      typeof arg.keys == 'function'\n        ? arg.keys\n        : function* () {\n            for(let key in this) yield key;\n          };\n  }\n  if(ret) return ret.call(arg);\n};\nUtil.values = function(arg) {\n  let ret;\n  if(Util.isObject(arg)) {\n    ret =\n      typeof arg.values == 'function'\n        ? arg.values\n        : function* () {\n            for(let key in arg) yield arg[key];\n          };\n  }\n  if(ret) return ret.call(arg);\n};\nUtil.removeEqual = function(a, b) {\n  let c = {};\n  for(let key of Util.keys(a)) {\n    if(b[key] === a[key]) continue;\n    //console.log(`removeEqual '${a[key]}' === '${b[key]}'`);\n    c[key] = a[key];\n  }\n  //console.log(`removeEqual`,c);\n\n  return c;\n};\nUtil.clear = obj => (typeof obj.splice == 'function' ? obj.splice(0, obj.length) : obj.clear());\n\nUtil.remove = (arr, item) => Util.removeIf(arr, (other, i, arr) => item === other);\nUtil.removeIf = function(arr, pred) {\n  let count = 0;\n  if(Util.isObject(arr) && typeof arr.splice == 'function') {\n    let idx;\n    for(count = 0; (idx = arr.findIndex(pred)) != -1; count++) arr.splice(idx, idx + 1);\n  } else {\n    for(let [key, value] of arr) {\n      if(pred(value, key, arr)) {\n        arr.delete(key);\n        count++;\n      }\n    }\n  }\n  return count;\n};\nUtil.traverse = function(o, fn) {\n  if(typeof fn == 'function')\n    return Util.foreach(o, (v, k, a) => {\n      fn(v, k, a);\n      if(typeof v === 'object') Util.traverse(v, fn);\n    });\n  function* walker(o, depth = 0) {\n    for(let [k, v] of Util.entries(o)) {\n      yield [v, k, o, depth];\n      if(typeof v == 'object' && v !== null) yield* walker(v, depth + 1);\n    }\n  }\n  return walker(o);\n};\nUtil.traverseWithPath = function(o, rootPath = []) {\n  for(let key of rootPath) o = o[key];\n\n  function* walker(o, path) {\n    for(let [k, v] of Util.entries(o)) {\n      let p = [...path, k];\n      yield [v, k, o, p];\n      if(typeof v == 'object' && v !== null) yield* walker(v, p);\n    }\n  }\n\n  return walker(o, []);\n};\nUtil.indexByPath = function(o, p) {\n  for(let key of p) o = o[key];\n  return o;\n};\n\nUtil.pushUnique = (arr, ...args) => args.reduce((acc, item) => (arr.indexOf(item) == -1 ? (arr.push(item), acc + 1) : acc), 0);\n\nUtil.insertSorted = function(arr, item, cmp = (a, b) => b - a) {\n  let i = 0,\n    len = arr.length;\n  while(i < len) {\n    if(cmp(item, arr[i]) >= 0) break;\n    i++;\n  }\n  i < len ? arr.splice(i, 0, item) : arr.push(item);\n  return i;\n};\nUtil.inserter = (dest, next = (k, v) => {}) => {\n  // if(typeof dest == 'function' && dest.map !== undefined) dest = dest.map;\n\n  const insert =\n    /*dest instanceof Map ||\n    dest instanceof WeakMap ||*/\n    typeof dest.set == 'function' && dest.set.length >= 2 ? (k, v) => dest.set(k, v) : Array.isArray(dest) ? (k, v) => dest.push([k, v]) : (k, v) => (dest[k] = v);\n  let fn;\n  fn = function(key, value) {\n    insert(key, value);\n    next(key, value);\n    return fn;\n  };\n  fn.dest = dest;\n  fn.insert = insert;\n  return fn;\n};\n\nUtil.keyIterator = obj => {\n  let it;\n  if(typeof obj.keys == 'function' && Util.isIterator((it = obj.keys()))) {\n    return it;\n  } else if(Array.isArray(obj)) {\n    return Array.prototype.keys.call(obj);\n  } else if('length' in obj) {\n    return Array.prototype[Symbol.iterator].call(obj);\n  }\n};\n\nUtil.entryIterator = obj => {\n  let it;\n  if(typeof obj.entries == 'function' && Util.isIterator((it = obj.entries()))) {\n    return it;\n  } else if(Array.isArray(obj)) {\n    return Array.prototype.entries.call(obj);\n  } else if('length' in obj) {\n    return (function* () {\n      for(let key of Array.prototype[Symbol.iterator].call(obj)) yield [key, obj[key]];\n    })();\n  }\n};\n\n/*Util.bitIterator = function BitIterator(source, inBits, outBits) {\n  const iterator = this instanceof BitIterator ? this : Object.create(BitIterator.prototype);\n\n  iterator.bits = [0];\n  iterator.size = 0;\n  iterator.next = function(bitsWanted = outBits) {\n    let output = { bits: [0], size: 0 };\n    for(;;) {\n      if(iterator.size == 0) fillBits(iterator);\n      //console.log(\"iterator.bits =\",iterator.bits, \" iterator.size =\",iterator.size);\n      moveBits(iterator, output, bitsWanted);\n      if(output.size == bitsWanted) break;\n    }\n    return output.bits;\n  };\n  function readBits(buffer, n) {\n    n = Math.min(buffer.size, n);\n    let size = 0,\n      bits = [];\n    while(n >= 16) {\n      bits.push(buffer.bits.shift());\n      buffer.size -= 16; n -= 16;\n      size += 16;\n    }\n\n    if(n > 0) {\n      const mask = (1 << n) - 1;\n      bits.push(buffer.bits & mask);\n      size += n;\n      buffer.bits >>= n;\n      buffer.size -= n;\n    }\n    return [bits, size];\n  }\n  const pad = '00000000000000000000000000000000';\n  function writeBits(buffer, value, size) {\n    buffer.bits = [...Util.partition((pad + value.toString(2)).slice(-32), 16)].map(n => parseInt(n, 2)).reverse();\n\n    buffer.size = size;\n    console.log(\"buffer.bits:\",buffer.bits,\"buffer.size:\",buffer.size);\n  }\n  function moveBits(input, output, len) {\n    let [bits, size] = readBits(input, len);\n    writeBits(output, bits, size);\n  }\n  function fillBits(buffer) {\n    const value = source();\n    writeBits(buffer, value, inBits);\n  }\n  return iterator;\n};\n*/\nUtil.mapAdapter = getSetFunction => {\n  let r = {\n    get(key) {\n      return getSetFunction(key);\n    },\n    set(key, value) {\n      getSetFunction(key, value);\n      return this;\n    }\n  };\n  let tmp = getSetFunction();\n  if(Util.isIterable(tmp) || Util.isPromise(tmp)) r.keys = () => getSetFunction();\n\n  if(getSetFunction[Symbol.iterator]) r.entries = getSetFunction[Symbol.iterator];\n  else {\n    let g = getSetFunction();\n    if(Util.isIterable(g) || Util.isGenerator(g)) r.entries = () => getSetFunction();\n  }\n\n  return Util.mapFunction(r);\n};\n\n/**\n * @param Array   forward\n * @param Array   backward\n *\n * component2path,  path2eagle  => component2eagle\n *  eagle2path, path2component =>\n */\nUtil.mapFunction = map => {\n  let fn;\n  fn = function(...args) {\n    const [key, value] = args;\n    switch (args.length) {\n      case 0:\n        return fn.keys();\n      case 1:\n        return fn.get(key);\n      case 2:\n        return fn.set(key, value);\n    }\n  };\n\n  fn.map = (m => {\n    while(Util.isFunction(m) && m.map !== undefined) m = m.map;\n    return m;\n  })(map);\n\n  if(map instanceof Map || (Util.isObject(map) && typeof map.get == 'function' && typeof map.set == 'function')) {\n    fn.set = (key, value) => (map.set(key, value), (k, v) => fn(k, v));\n    fn.get = key => map.get(key);\n  } else if(map instanceof Cache || (Util.isObject(map) && typeof map.match == 'function' && typeof map.put == 'function')) {\n    fn.set = (key, value) => (map.put(key, value), (k, v) => fn(k, v));\n    fn.get = key => map.match(key);\n  } else if(Util.isObject(map) && typeof map.getItem == 'function' && typeof map.setItem == 'function') {\n    fn.set = (key, value) => (map.setItem(key, value), (k, v) => fn(k, v));\n    fn.get = key => map.getItem(key);\n  } else {\n    fn.set = (key, value) => ((map[key] = value), (k, v) => fn(k, v));\n    fn.get = key => map[key];\n  }\n\n  fn.update = function(key, fn = (k, v) => v) {\n    let oldValue = this.get(key);\n    let newValue = fn(oldValue, key);\n    if(oldValue != newValue) {\n      if(newValue === undefined && typeof map.delete == 'function') map.delete(key);\n      else this.set(key, newValue);\n    }\n    return newValue;\n  };\n\n  if(typeof map.entries == 'function') {\n    fn.entries = function* () {\n      for(let [key, value] of map.entries()) yield [key, value];\n    };\n    fn.values = function* () {\n      for(let [key, value] of map.entries()) yield value;\n    };\n    fn.keys = function* () {\n      for(let [key, value] of map.entries()) yield key;\n    };\n    fn[Symbol.iterator] = fn.entries;\n    fn[Util.inspectSymbol] = function() {\n      return new Map(this.map(([key, value]) => [Array.isArray(key) ? key.join('.') : key, value]));\n    };\n  } else if(typeof map.keys == 'function') {\n    if(Util.isAsync(map.keys) || Util.isPromise(map.keys())) {\n      fn.keys = async () => [...(await map.keys())];\n\n      fn.entries = async () => {\n        let r = [];\n        for(let key of await fn.keys()) r.push([key, await fn.get(key)]);\n        return r;\n      };\n      fn.values = async () => {\n        let r = [];\n        for(let key of await fn.keys()) r.push(await fn.get(key));\n        return r;\n      };\n    } else {\n      fn.keys = function* () {\n        for(let key of map.keys()) yield key;\n      };\n\n      fn.entries = function* () {\n        for(let key of fn.keys()) yield [key, fn(key)];\n      };\n      fn.values = function* () {\n        for(let key of fn.keys()) yield fn(key);\n      };\n    }\n  }\n\n  if(typeof fn.entries == 'function') {\n    fn.filter = function(pred) {\n      return Util.mapFunction(\n        new Map(\n          (function* () {\n            let i = 0;\n            for(let [key, value] of fn.entries()) if(pred([key, value], i++)) yield [key, value];\n          })()\n        )\n      );\n    };\n    fn.map = function(t) {\n      return Util.mapFunction(\n        new Map(\n          (function* () {\n            let i = 0;\n\n            for(let [key, value] of fn.entries()) yield t([key, value], i++);\n          })()\n        )\n      );\n    };\n    fn.forEach = function(fn) {\n      let i = 0;\n\n      for(let [key, value] of this.entries()) fn([key, value], i++);\n    };\n  }\n  if(typeof map.delete == 'function') fn.delete = key => map.delete(key);\n\n  if(typeof map.has == 'function') fn.has = key => map.has(key);\n  return fn;\n};\n\nUtil.mapWrapper = (map, toKey = key => key, fromKey = key => key) => {\n  let fn = Util.mapFunction(map);\n  fn.set = (key, value) => (map.set(toKey(key), value), (k, v) => fn(k, v));\n  fn.get = key => map.get(toKey(key));\n  if(typeof map.keys == 'function') fn.keys = () => [...map.keys()].map(fromKey);\n  if(typeof map.entries == 'function')\n    fn.entries = function* () {\n      for(let [key, value] of map.entries()) yield [fromKey(key), value];\n    };\n  if(typeof map.values == 'function')\n    fn.values = function* () {\n      for(let value of map.values()) yield value;\n    };\n  if(typeof map.has == 'function') fn.has = key => map.has(toKey(key));\n  if(typeof map.delete == 'function') fn.delete = key => map.delete(toKey(key));\n\n  fn.map = (m => {\n    while(Util.isFunction(m) && m.map !== undefined) m = m.map;\n    return m;\n  })(map);\n\n  return fn;\n};\n\n/**\n * @param Array   forward\n * @param Array   backward\n *\n * component2path,  path2eagle  => component2eagle\n *  eagle2path, path2component =>\n */\nUtil.mapCombinator = (forward, backward) => {\n  let fn;\n  fn = function(key, value) {\n    if(value === undefined) return fn.get(key);\n    return fn.set(key, value);\n  };\n\n  /* prettier-ignore */\n  fn.get=  forward.reduceRight((a,m) => makeGetter(m, key => a(key)), a => a);\n  return fn;\n  function makeGetter(map, next = a => a) {\n    return key => (false && console.log('getter', { map, key }), next(map.get(key)));\n  }\n};\n\nUtil.predicate = (fn_or_regex, pred) => {\n  let fn = fn_or_regex;\n  if(typeof fn_or_regex == 'string') fn_or_regex = new RegExp('^' + fn_or_regex + '$');\n  if(fn_or_regex instanceof RegExp) {\n    fn = arg => fn_or_regex.test(arg + '');\n    fn.valueOf = function() {\n      return fn_or_regex;\n    };\n  }\n  if(typeof pred == 'function') return arg => pred(arg, fn);\n  return fn;\n};\nUtil.some = predicates => {\n  predicates = predicates.map(Util.predicate);\n  return value => predicates.some(pred => pred(value));\n};\nUtil.every = predicates => {\n  predicates = predicates.map(Util.predicate);\n  return value => predicates.every(pred => pred(value));\n};\n\nUtil.iterateMembers = function* (obj, predicate = (name, depth, obj, proto) => true, depth = 0) {\n  let names = [];\n  let pred = Util.predicate(predicate);\n  const proto = Object.getPrototypeOf(obj);\n\n  /* for(let name in obj) if(pred(name, depth, obj)) yield name;\n   */\n  let descriptors = Object.getOwnPropertyDescriptors(obj);\n  for(let name in descriptors) {\n    const { value, get, set, enumerable, configurable, writable } = descriptors[name];\n\n    if(typeof get == 'function') continue;\n\n    if(pred(name, depth, obj)) yield name;\n  }\n  //for(let symbol of Object.getOwnPropertySymbols(obj)) if(pred(symbol, depth, obj)) yield symbol;\n  if(proto) yield* Util.iterateMembers(proto, predicate, depth + 1);\n};\n\nUtil.and =\n  (...predicates) =>\n  (...args) =>\n    predicates.every(pred => pred(...args));\nUtil.or =\n  (...predicates) =>\n  (...args) =>\n    predicates.some(pred => pred(...args));\n\nUtil.members = Util.curry((pred, obj) => Util.unique([...Util.iterateMembers(obj, Util.tryPredicate(pred))]));\n\nUtil.memberNameFilter = (depth = 1, start = 0) =>\n  Util.and(\n    (m, l, o) => start <= l && l < depth + start,\n    (m, l, o) => typeof m != 'string' || ['caller', 'callee', 'constructor', 'arguments'].indexOf(m) == -1,\n    (name, depth, obj, proto) => obj != Object.prototype\n  );\n\nUtil.getMemberNames = (obj, ...args) => {\n  let filters = [];\n  let depth = 1,\n    start = 0;\n  while(args.length > 0) {\n    if(args.length >= 2 && typeof args[0] == 'number') {\n      const n = args.splice(0, 2);\n      depth = n[0];\n      start = n[1];\n      continue;\n    }\n    filters.push(args.shift());\n  }\n  filters.unshift(Util.memberNameFilter(depth, start));\n  return Util.members(Util.and(...filters))(obj);\n};\nUtil.getMemberEntries = (obj, ...args) => Util.getMemberNames(obj, ...args).map(name => [name, obj[name]]);\n\nUtil.objectReducer =\n  (filterFn, accFn = (a, m, o) => ({ ...a, [m]: o[m] }), accu = {}) =>\n  (obj, ...args) =>\n    Util.members(filterFn(...args), obj).reduce(\n      Util.tryFunction(\n        (a, m) => accFn(a, m, obj),\n        (r, a, m) => r,\n        (r, a) => a\n      ),\n      accu\n    );\nUtil.incrementer = (incFn = (c, n, self) => (self.count = c + n)) => {\n  let self, incr;\n  if(typeof incFn == 'number') {\n    incr = incFn;\n    incFn = (c, n, self) => (self.count = +c + +n * incr);\n  }\n  const inc = (i, n = 1) => self.incFn.call(self, i || 0, n, self);\n  self = function Count(n = 1) {\n    self.count = inc(self.count, n, self);\n    return self;\n  };\n  self.incFn = incFn;\n  self.valueOf = function() {\n    return this.count;\n  };\n  return self;\n};\n\nUtil.mapReducer = (setFn, filterFn = (key, value) => true, mapObj = new Map()) => {\n  setFn = setFn || Util.setter(mapObj);\n  let fn;\n  let next = Util.tryFunction(((acc, mem, idx) => (filterFn(mem, idx) ? (setFn(idx, mem), acc) : null), r => r, () => mapObj));\n  fn = function ReduceIntoMap(arg, acc = mapObj) {\n    if(Util.isObject(arg) && typeof arg.reduce == 'function') return arg.reduce((acc, arg) => (Array.isArray(arg) ? arg : Util.members(arg)).reduce(reducer, acc), self.map);\n    let c = Util.counter();\n    for(let mem of arg) acc = next(acc, mem, c());\n    return acc;\n  };\n  return Object.assign(fn, { setFn, filterFn, mapObj, next });\n};\n\nUtil.getMembers = Util.objectReducer(Util.memberNameFilter);\n\nUtil.getMemberDescriptors = Util.objectReducer(Util.memberNameFilter, (a, m, o) => ({\n  ...a,\n  [m]: Object.getOwnPropertyDescriptor(o, m)\n}));\n\nUtil.methodNameFilter = (depth = 1, start = 0) =>\n  Util.and(\n    (m, l, o) =>\n      Util.tryCatch(\n        () => typeof o[m] == 'function',\n        b => b,\n        () => false\n      ),\n    Util.memberNameFilter(depth, start)\n  );\n\nUtil.getMethodNames = (obj, depth = 1, start = 0) => Util.members(Util.methodNameFilter(depth, start))(obj);\n\nUtil.getMethods = Util.objectReducer(Util.methodNameFilter);\n\nUtil.getMethodDescriptors = Util.objectReducer(Util.methodNameFilter, (a, m, o) => ({\n  ...a,\n  [m]: Object.getOwnPropertyDescriptor(o, m)\n}));\n\nUtil.inherit = (dst, src, depth = 1) => {\n  for(let k of Util.getMethodNames(src, depth)) dst[k] = src[k];\n  return dst;\n};\nUtil.inherits =\n  typeof Object.create === 'function'\n    ? function inherits(ctor, superCtor) {\n        if(superCtor) {\n          ctor.super_ = superCtor;\n          ctor.prototype = Object.create(superCtor.prototype, {\n            constructor: {\n              value: ctor,\n              enumerable: false,\n              writable: true,\n              configurable: true\n            }\n          });\n        }\n      } // old school shim for old browsers\n    : function inherits(ctor, superCtor) {\n        if(superCtor) {\n          ctor.super_ = superCtor;\n          let TempCtor = function() {};\n          TempCtor.prototype = superCtor.prototype;\n          ctor.prototype = new TempCtor();\n          ctor.prototype.constructor = ctor;\n        }\n      };\n//Util.bindMethods = (obj, methods, dest = {}) => Util.bindMethodsTo(obj, methods ?? obj, dest);\nUtil.bindMethods = (obj, methods, dest) => {\n  dest ??= obj;\n  if(Array.isArray(methods)) {\n    for(let name of methods) if(typeof obj[name] == 'function') dest[name] = obj[name].bind(obj);\n    return dest;\n  }\n  let names = Util.getMethodNames(methods);\n  for(let name of names) if(typeof methods[name] == 'function') dest[name] = methods[name].bind(obj);\n  return dest;\n};\nUtil.getConstructor = obj => obj.constructor || Object.getPrototypeOf(obj).constructor;\nUtil.getPrototypeChain = function(obj, fn = p => p) {\n  let ret = [];\n  let proto;\n  do {\n    proto = obj.__proto__ || Object.getPrototypeOf(obj);\n    ret.push(fn(proto, obj));\n    if(proto === Object.prototype || proto.constructor === Object) break;\n    obj = proto;\n  } while(obj);\n\n  return ret;\n};\nUtil.getObjectChain = (obj, fn = p => p) => [fn(obj)].concat(Util.getPrototypeChain(obj, fn));\n\nUtil.getPropertyDescriptors = function(obj) {\n  return Util.getObjectChain(obj, p => Object.getOwnPropertyDescriptors(p));\n};\n\nUtil.getConstructorChain = (ctor, fn = (c, p) => c) => Util.getPrototypeChain(ctor, (p, o) => fn(o, p));\n\nUtil.weakAssign = function(...args) {\n  let obj = args.shift();\n  args.forEach(other => {\n    for(let key in other) {\n      if(obj[key] === undefined && other[key] !== undefined) obj[key] = other[key];\n    }\n  });\n  return obj;\n};\n\n/*Util.getErrorStack = function(position = 2) {\n  let stack=[];\n  let error;\n    Error.stackTraceLimit = 100;\n     const oldPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = (_, stack) => stack;\n try {\n\n  throw new Error('my error');\n\n } catch(e) {\n  console.log(\"e.stack\",[...e.stack]);\n  stack = e.stack;\n }\n Error.prepareStackTrace = oldPrepareStackTrace;\n\n return stack;\n}*/\nUtil.exception = function Exception(...args) {\n  let e, stack;\n  let proto = Util.exception.prototype;\n\n  if(args[0] instanceof Error) {\n    let exc = args.shift();\n    const { message, stack: callerStack } = exc;\n    e = { message };\n    //   e.proto = Object.getPrototypeOf(exc);\n\n    if(callerStack) stack = callerStack;\n  } else {\n    const [message, callerStack] = args;\n    e = { message };\n    if(callerStack) stack = callerStack;\n  }\n  if(stack) e.stack = Util.stack(stack);\n\n  return Object.setPrototypeOf(e, proto);\n};\n\nUtil.define(\n  Util.exception.prototype,\n  {\n    toString(color = false) {\n      const { message, stack, proto } = this;\n      return `${Util.fnName((proto && proto.constructor) || this.constructor)}: ${message}\nStack:${Util.stack.prototype.toString.call(stack, color, stack.columnWidths)}`;\n    },\n    [Symbol.toStringTag]() {\n      return this.toString(false);\n    },\n    [Util.inspectSymbol]() {\n      return Util.exception.prototype.toString.call(this, true);\n    }\n  },\n  true\n);\nUtil.location = function Location(...args) {\n  console.log('Util.location(', ...args, ')');\n  let ret = this instanceof Util.location ? this : Object.setPrototypeOf({}, Util.location.prototype);\n  if(args.length == 3) {\n    const [fileName, lineNumber, columnNumber, functionName] = args;\n    Object.assign(ret, { fileName, lineNumber, columnNumber, functionName });\n  } else if(args.length == 1 && args[0].fileName !== undefined) {\n    const { fileName, lineNumber, columnNumber, functionName } = args.shift();\n    Object.assign(ret, { fileName, lineNumber, columnNumber, functionName });\n  }\n  if(Util.colorCtor) ret.colorCtor = Util.colorCtor;\n\n  return ret;\n};\n\n// prettier-ignore\nUtil.location.palettes = [[[128, 128, 0], [255, 0, 255], [0, 255, 255] ], [[9, 119, 18], [139, 0, 255], [0, 165, 255]]];\n\nUtil.define(Util.location.prototype, {\n  toString(color = false) {\n    let { fileName, lineNumber, columnNumber, functionName } = this;\n    console.log('this:', this, {\n      fileName,\n      lineNumber,\n      columnNumber,\n      functionName\n    });\n    fileName = fileName.replace(Util.makeURL({ location: '' }), '');\n    let text = /*color ? new this.colorCtor() : */ '';\n    const c = /*color ? (t, color) => text.write(t, color) :*/ t => (text += t);\n    const palette = Util.location.palettes[Util.isBrowser() ? 1 : 0];\n    if(functionName) c(functionName.replace(/\\s*\\[.*/g, '').replace(/^Function\\./, '') + ' ', palette[1]);\n\n    c(fileName, palette[0]);\n    c(':', palette[1]);\n    c(lineNumber, palette[2]);\n    c(':', palette[1]);\n    c(columnNumber, palette[2]);\n    return text;\n  },\n  [Symbol.toStringTag]() {\n    return Util.location.prototype.toString.call(this, false);\n  },\n  [Util.inspectSymbol]() {\n    return Util.location.prototype.toString.call(this, !Util.isBrowser());\n  },\n  getFileName() {\n    return this.fileName;\n  },\n  getLineNumber() {\n    return this.lineNumber;\n  },\n  getColumnNumber() {\n    return this.columnNumber;\n  }\n});\n\nUtil.stackFrame = function StackFrame(frame) {\n  //   console.debug('Util.stackFrame', frame, frame.getFunctionName, frame.getFileName);\n  ['methodName', 'functionName', 'fileName', 'lineNumber', 'columnNumber', 'typeName', 'thisObj'].forEach(prop => {\n    let fn = prop == 'thisObj' ? 'getThis' : 'get' + Util.ucfirst(prop);\n    if(frame[prop] === undefined && typeof frame[fn] == 'function') frame[prop] = frame[fn]();\n  });\n  if(Util.colorCtor) frame.colorCtor = Util.colorCtor;\n\n  return Object.setPrototypeOf(frame, Util.stackFrame.prototype);\n};\n\nUtil.define(Util.stackFrame, {\n  methodNames: [\n    'getThis',\n    'getTypeName',\n    'getFunction',\n    'getFunctionName',\n    'getMethodName',\n    'getFileName',\n    'getLineNumber',\n    'getColumnNumber',\n    'getEvalOrigin',\n    'isToplevel',\n    'isEval',\n    'isNative',\n    'isConstructor',\n    'isAsync',\n    'isPromiseAll',\n    'getPromiseIndex'\n  ]\n});\nUtil.memoizedProperties(Util.stackFrame, {\n  propertyMap() {\n    return this.methodNames.map(method => [method, Util.lcfirst(method.replace(/^get/, ''))]).map(([method, func]) => [method, func == 'this' ? 'thisObj' : func]);\n  }\n});\n\nUtil.define(\n  Util.stackFrame.prototype,\n  {\n    getFunction() {\n      if(this.isConstructor) return this.functionName + '.constructor';\n\n      return this.typeName ? `${this.typeName}.${this.methodName}` : this.functionName;\n    },\n    getMethodName() {\n      return this.methodName;\n    },\n    getFunctionName() {\n      return this.functionName;\n    },\n    getTypeName() {\n      return this.typeName;\n    },\n    getFileName() {\n      return this.fileName;\n    },\n    getLineNumber() {\n      return this.lineNumber;\n    },\n    getColumnNumber() {\n      return this.columnNumber;\n    }\n  },\n  true\n);\n\nUtil.define(\n  Util.stackFrame.prototype,\n  {\n    colorCtor: null,\n    get() {\n      const { fileName, columnNumber, lineNumber } = this;\n      return fileName ? `${fileName}:${lineNumber}:${columnNumber}` : null;\n    },\n    toString(color, opts = {}) {\n      const { columnWidths = [0, 0, 0, 0], stripUrl } = opts;\n\n      let text = color && this.colorCtor ? new this.colorCtor() : '';\n      const c = color && this.colorCtor ? (t, color) => text.write(t, color) : t => (text += t);\n      let fields = ['functionName', 'fileName', 'lineNumber', 'columnNumber'];\n      const colors = [\n        [0, 255, 0],\n        [255, 255, 0],\n        [0, 255, 255],\n        [0, 255, 255]\n      ];\n      let { functionName, methodName, typeName, fileName, lineNumber, columnNumber } = this;\n      //  console.log('toString:', { functionName, methodName, typeName, fileName, lineNumber, columnNumber });\n      if(stripUrl && typeof fileName == 'string') fileName = fileName.replace(typeof stripUrl == 'string' ? stripUrl : /.*:\\/\\/[^\\/]*\\//, '');\n      let colonList = [fileName, lineNumber, columnNumber]\n        .map(p => ('' + p == 'undefined' ? undefined : p))\n        .filter(p => p !== undefined && p != 'undefined' && ['number', 'string'].indexOf(typeof p) != -1)\n        .join(':');\n      let columns = [typeof this.getFunction == 'function' ? this.getFunction() : this.function, colonList];\n      columns = columns.map((f, i) => (f + '')[i >= 2 ? 'padStart' : 'padEnd'](columnWidths[i] || 0, ' '));\n      return columns.join(' ') + c('', 0);\n    },\n    getLocation() {\n      return new Util.location(this);\n    },\n    /* prettier-ignore */ get location() {\n      return this.getLocation();\n    },\n    [Symbol.toStringTag]() {\n      return this.toString(false);\n    },\n    [Util.inspectSymbol](...args) {\n      return Util.stackFrame.prototype.toString.call(this, true, this.columnWidths);\n    }\n  },\n  true\n);\nUtil.scriptName = () =>\n  Util.tryCatch(\n    () => Util.getArgs(),\n    args => args[0],\n    () => Util.getURL()\n  );\nUtil.getFunctionName = () => {\n  const frame = Util.getCallerStack(2)[0];\n  return frame.getFunctionName() || frame.getMethodName();\n};\nUtil.getFunctionArguments = fn => {\n  let head = (fn + '').replace(/(=>|{\\n).*/g, '').replace(/^function\\s*/, '');\n  let args = head.replace(/^\\((.*)\\)\\s*$/g, '$1').split(/,\\s*/g);\n  return args;\n};\n\nUtil.scriptDir = () =>\n  Util.tryCatch(\n    () => Util.scriptName(),\n    script => (script + '').replace(new RegExp('\\\\/[^/]*$', 'g'), ''),\n    () => Util.getURL()\n  );\nUtil.stack = function Stack(stack, offset) {\n  //console.log('Util.stack (1)', stack);\n\n  if(typeof stack == 'number') return Object.setPrototypeOf(new Array(stack), Util.stack.prototype);\n\n  if(Util.platform == 'quickjs') {\n    if(!stack) stack = getStack();\n    if(!(typeof stack == 'string')) stack = stack + '';\n  } else if(!stack) {\n    if(offset === undefined) offset = 1;\n    stack = getStack();\n    const { propertyMap } = Util.stackFrame;\n    //console.log('stack', stack + '');\n    stack = [...stack].map(frame =>\n      propertyMap\n        .filter(([m, p]) => typeof frame[m] == 'function' && frame[m]() !== undefined)\n        .reduce(\n          (acc, [method, property]) => ({\n            ...acc,\n            /* prettier-ignore */ get [property]() {\n              return frame[method]();\n            }\n          }),\n          {}\n        )\n    );\n\n    //console.debug('stack ctor:', [...stack]);\n    //console.debug('stack frame[0]:', [...stack][0]);\n  } else if(!(typeof stack == 'string')) stack = stackToString(stack, 0);\n  function getStack() {\n    let stack;\n    const oldPrepareStackTrace = Error.prepareStackTrace;\n    Error.prepareStackTrace = (_, stack) => stack;\n    Error.stackTraceLimit = Infinity;\n\n    stack = new Error().stack;\n    Error.prepareStackTrace = oldPrepareStackTrace;\n    return stack;\n  }\n\n  function stackToString(st, start = 0) {\n    if(Array.isArray(st)) {\n      st = [\n        ...(function* () {\n          for(let i = start; i < st.length; i++) yield st[i];\n        })()\n      ].join('\\n');\n    }\n    return st;\n  }\n\n  //console.log('stack String:', offset, typeof stack, stack);\n\n  if(typeof stack == 'number') {\n    throw new Error();\n  }\n  //console.debug('stack:', typeof stack, stack);\n\n  if(typeof stack == 'string') {\n    stack = stack.trim().split(lineSplit);\n    const re = new RegExp('.* at ([^ ][^ ]*) \\\\(([^)]*)\\\\)');\n    stack = stack.map(frame =>\n      typeof frame == 'string'\n        ? frame\n            .replace(/^\\s*at\\s+/, '')\n            .split(/[()]+/g)\n            .map(part => part.trim())\n        : frame\n    );\n    stack = stack.map(frame => (Array.isArray(frame) ? (frame.length < 2 ? ['', ...frame] : frame).slice(0, 2) : frame));\n    stack = stack.map(([func, file]) => [\n      func,\n      file\n        .split(/:/g)\n        .reverse()\n        .map(n => (!isNaN(+n) ? +n : n))\n    ]);\n    stack = stack.map(([func, file]) => [func, file.length >= 3 ? file : file.length >= 2 ? ['', ...file] : ['', '', ...file]]);\n    stack = stack.map(([func, [columnNumber, lineNumber, ...file]]) => ({\n      functionName: func.replace(/Function\\.Util/, 'Util'),\n      methodName: func.replace(/.*\\./, ''),\n      fileName: file.reverse().join(':'),\n      lineNumber,\n      columnNumber\n    }));\n    //    console.log('Util.stack (2)', Util.inspect(stack[0]  ));\n\n    stack = stack.map(({ methodName, functionName: func, fileName: file, columnNumber: column, lineNumber: line }) => ({\n      functionName: func,\n      methodName,\n      fileName: file.replace(/.*:\\/\\/[^\\/]*/g, ''),\n      lineNumber: Util.ifThenElse(\n        s => s != '',\n        s => +s,\n        () => undefined\n      )(line + file.replace(/.*[^0-9]([0-9]*)$/g, '$1')),\n      columnNumber: Util.ifThenElse(\n        s => s != '',\n        s => +s,\n        () => undefined\n      )(column)\n    }));\n  } else {\n    //console.log('stack:', stack[0]);\n    stack = stack.map(frame => new Util.stackFrame(frame)); //Util.getCallers(1, Number.MAX_SAFE_INTEGER, () => true, stack);\n  }\n  //  stack = stack.map(frame => Object.setPrototypeOf(frame, Util.stackFrame.prototype));\n  stack = stack.map(frame => new Util.stackFrame(frame));\n\n  if(offset > 0) stack = stack.slice(offset);\n  stack = Object.setPrototypeOf(stack, Util.stack.prototype);\n  //stack.forEach(frame => console.log(\"stack frame:\",frame));\n  //\n  return stack;\n};\n\nUtil.stack.prototype = Object.assign(Util.stack.prototype, Util.getMethods(new Array(), 1, 1));\nObject.defineProperty(Util.stack, Symbol.species, { get: () => Util.stack });\nObject.defineProperty(Util.stack.prototype, Symbol.species, {\n  get: () => Util.stack\n});\nObject.defineProperty(Util.stack.prototype, Symbol.iterator, {\n  *value() {\n    for(let i = 0; i < this.length; i++) yield this[i];\n  }\n});\n\nUtil.stack.prototype = Object.assign(Util.stack.prototype, {\n  toString(opts = {}) {\n    const { colors = false, stripUrl = Util.makeURL({ location: '/' }) } = opts;\n    const { columnWidths } = this;\n    let a = [];\n\n    for(let i = 0; i < this.length; i++)\n      a.push(\n        Util.stackFrame.prototype.toString.call(this[i], colors, {\n          columnWidths,\n          stripUrl\n        })\n      );\n    let s = a.join('\\n');\n    return s + '\\n';\n  },\n  [Symbol.toStringTag]() {\n    return Util.stack.prototype.toString.call(this);\n  },\n  [Util.inspectSymbol](...args) {\n    const { columnWidths } = this;\n    return '\\n' + this.map(f => f.toString(!Util.isBrowser(), { columnWidths })).join('\\n');\n  },\n  getFunctionName() {\n    return this.functionName;\n  },\n  getMethodName() {\n    return this.methodName;\n  },\n  getFileName() {\n    return this.fileName;\n  },\n  getLineNumber() {\n    return this.lineNumber;\n  }\n});\n\nObject.defineProperties(Util.stack.prototype, {\n  columnWidths: {\n    get() {\n      // console.log('this:', [...this]);\n      return this.reduce((a, f) => ['getFunction'].map((fn, i) => Math.max(a[i], ((typeof f[fn] == 'function' ? f[fn]() : '') + '').length)), [0, 0, 0, 0]);\n    }\n  }\n});\n\nUtil.getCallerStack = function(position = 2, limit = 1000, stack) {\n  Error.stackTraceLimit = position + limit;\n  if(position >= Error.stackTraceLimit) {\n    throw new TypeError(`getCallerFile(position) requires position be less then Error.stackTraceLimit but position was: '${position}' and Error.stackTraceLimit was: '${Error.stackTraceLimit}'`);\n  }\n  const oldPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = (_, stack) => stack;\n\n  stack = Util.stack(stack, position);\n\n  return stack.slice(0, limit);\n};\nUtil.getCallerFile = function(position = 2) {\n  let stack = Util.getCallerStack();\n  if(stack !== null && typeof stack === 'object') {\n    const frame = stack[position];\n    return frame ? `${frame.getFileName()}:${frame.getLineNumber()}` : undefined;\n  }\n};\nUtil.getCallerFunction = function(position = 2) {\n  let stack = Util.getCallerStack(position + 1);\n  if(stack !== null && typeof stack === 'object') {\n    const frame = stack[0];\n    return frame ? frame.getFunction() : undefined;\n  }\n};\nUtil.getCallerFunctionName = function(position = 2) {\n  let stack = Util.getCallerStack(position + 1);\n  if(stack !== null && typeof stack === 'object') {\n    const frame = stack[0];\n    return frame ? frame.getMethodName() || frame.getFunctionName() : undefined;\n  }\n};\nUtil.getCallerFunctionNames = function(position = 2) {\n  let stack = Util.getCallerStack(position + 1);\n  if(stack !== null && typeof stack === 'object') {\n    let ret = [];\n    for(let i = 0; stack[i]; i++) {\n      const frame = stack[i];\n      const method = frame.getMethodName();\n      ret.push(method ? frame.getFunction() + '.' + method : frame.getFunctionName());\n    }\n    return ret;\n  }\n};\nUtil.getCaller = function(index = 1, stack) {\n  const methods = [\n    'getThis',\n    'getTypeName',\n    'getFunction',\n    'getFunctionName',\n    'getMethodName',\n    'getFileName',\n    'getLineNumber',\n    'getColumnNumber',\n    'getEvalOrigin',\n    'isToplevel',\n    'isEval',\n    'isNative',\n    'isConstructor'\n  ];\n  stack = stack || Util.getCallerStack(2, 1 + index, stack);\n  let thisIndex = stack.findIndex(f => f.functionName.endsWith('getCaller'));\n  index += thisIndex + 1;\n  const frame = stack[index];\n  return frame;\n};\nUtil.getCallers = function(index = 1, num = Number.MAX_SAFE_INTEGER, stack) {\n  const methods = [\n    'getThis',\n    'getTypeName',\n    'getFunction',\n    'getFunctionName',\n    'getMethodName',\n    'getFileName',\n    'getLineNumber',\n    'getColumnNumber',\n    'getEvalOrigin',\n    'isToplevel',\n    'isEval',\n    'isNative',\n    'isConstructor'\n  ];\n  stack = stack || Util.getCallerStack(2, num + index, stack);\n  let thisIndex = stack.findIndex(f => ((f.functionName || f.methodName) + '').endsWith('getCaller'));\n  index += thisIndex + 1;\n  return stack.slice(index);\n};\n\n/*Object.defineProperty(Util, 'stackFrame', {\n  get: function() {\n  return this.getCallerStack(2);\n  }\n});*/\nUtil.getStackFrames = function(offset = 2) {\n  let frames = Util.getCallerStack(0);\n  frames = frames.map(frame => {\n    if(Object.getPrototypeOf(frame) !== Util.stackFrame.prototype) frame = Util.stackFrame(frame);\n    return frame;\n  });\n\n  return frames.slice(offset);\n};\nUtil.getStackFrame = function(offset = 2) {\n  return Util.getStackFrames(offset)[0];\n};\nUtil.rotateLeft = function(x, n) {\n  n = n & 0x1f;\n  return (x << n) | ((x >> (32 - n)) & ~((-1 >> n) << n));\n};\nUtil.rotateRight = function(x, n) {\n  n = n & 0x1f;\n  return Util.rotateLeft(x, 32 - n);\n};\nUtil.hashString = function(string, bits = 32, mask = 0xffffffff) {\n  let ret = 0;\n  let bitc = 0;\n  for(let i = 0; i < string.length; i++) {\n    const code = string.charCodeAt(i);\n    ret *= 186;\n    ret ^= code;\n    bitc += 8;\n    ret = Util.rotateLeft(ret, 7) & mask;\n  }\n  return ret & 0x7fffffff;\n};\nUtil.flatTree = function(tree, addOutput) {\n  const ret = [];\n  if(!addOutput) addOutput = arg => ret.push(arg);\n  addOutput(Util.filterKeys(tree, key => key !== 'children'));\n  if(typeof tree.children == 'object' && tree.children !== null && tree.children.length) for(let child of tree.children) Util.flatTree(child, addOutput);\n  return ret;\n};\nUtil.traverseTree = function(tree, fn, depth = 0, parent = null) {\n  fn(tree, depth, parent);\n  if(Util.isObject(tree.children) && tree.children.length > 0) for(let child of tree.children) Util.traverseTree(child, fn, depth + 1, tree);\n};\n\nUtil.walkTree = function(node, pred, t, depth = 0, parent = null) {\n  return (function* () {\n    if(!pred) pred = i => true;\n    if(!t)\n      t = function(i) {\n        i.depth = depth;\n        return i;\n      };\n    if(pred(node, depth, parent)) {\n      yield t(node);\n      if(typeof node == 'object' && node !== null && typeof node.children == 'object' && node.children.length) {\n        for(let child of [...node.children]) {\n          yield* Util.walkTree(child, pred, t, depth + 1, node.parent_id);\n        }\n      }\n    }\n  })();\n};\n\nUtil.isPromise = function(obj) {\n  return (Boolean(obj) && typeof obj.then === 'function') || obj instanceof Promise;\n};\n\n/* eslint-disable no-use-before-define */\nif(typeof setImmediate !== 'function') var setImmediate = fn => setTimeout(fn, 0);\nUtil.next = function(iter, observer, prev = undefined) {\n  let item;\n  try {\n    item = iter.next(prev);\n  } catch(err) {\n    return observer.error(err);\n  }\n  const value = item.value;\n  if(item.done) return observer.complete();\n  if(isPromise(value)) {\n    value\n      .then(val => {\n        observer.next(val);\n        setImmediate(() => Util.next(iter, observer, val));\n      })\n      .catch(err => observer.error(err));\n  } else {\n    observer.next(value);\n    setImmediate(() => Util.next(iter, observer, value));\n  }\n};\nUtil.getImageAverageColor = function(imageElement, options) {\n  if(!imageElement) {\n    return false;\n  }\n  options = options || {};\n  const settings = {\n    tooDark: (options.tooDark || 0.03) * 255 * 3 /* How dark is too dark for a pixel */,\n    tooLight: (options.tooLight || 0.97) * 255 * 3 /*How light is too light for a pixel */,\n    tooAlpha: (options.tooAlpha || 0.1) * 255 /*How transparent is too transparent for a pixel */\n  };\n  const w = imageElement.width;\n  let h = imageElement.height;\n  //Setup canvas and draw image onto it\n  const context = document.createElement('canvas').getContext('2d');\n  context.drawImage(imageElement, 0, 0, w, h);\n  //Extract the rgba data for the image from the canvas\n  const subpixels = context.getImageData(0, 0, w, h).data;\n  const pixels = {\n    r: 0,\n    g: 0,\n    b: 0,\n    a: 0\n  };\n  let processedPixels = 0;\n  const pixel = {\n    r: 0,\n    g: 0,\n    b: 0,\n    a: 0\n  };\n  let luma = 0; //Having luma in the pixel object caused ~10% performance penalty for some reason\n  //Loop through the rgba data\n  for(let i = 0, l = w * h * 4; i < l; i += 4) {\n    pixel.r = subpixels[i];\n    pixel.g = subpixels[i + 1];\n    pixel.b = subpixels[i + 2];\n    pixel.a = subpixels[i + 4];\n    //Only consider pixels that aren't black, white, or too transparent\n    if(\n      pixel.a > settings.tooAlpha &&\n      (luma = pixel.r + pixel.g + pixel.b) > settings.tooDark && //Luma is assigned inside the conditional to avoid re-calculation when alpha is not met\n      luma < settings.tooLight\n    ) {\n      pixels.r += pixel.r;\n      pixels.g += pixel.g;\n      pixels.b += pixel.b;\n      pixels.a += pixel.a;\n      processedPixels++;\n    }\n  }\n  //Values of the channels that make up the average color\n  let channels = {\n    r: null,\n    g: null,\n    b: null,\n    a: null\n  };\n  if(processedPixels > 0) {\n    channels = {\n      r: Math.round(pixels.r / processedPixels),\n      g: Math.round(pixels.g / processedPixels),\n      b: Math.round(pixels.b / processedPixels),\n      a: Math.round(pixels.a / processedPixels)\n    };\n  }\n  const o = Object.assign({}, channels, {\n    toStringRgb() {\n      //Returns a CSS compatible RGB string (e.g. '255, 255, 255')\n      const { r, g, b } = this;\n      return [r, g, b].join(', ');\n    },\n    toStringRgba() {\n      //Returns a CSS compatible RGBA string (e.g. '255, 255, 255, 1.0')\n      const { r, g, b, a } = this;\n      return [r, g, b, a].join(', ');\n    },\n    toStringHex() {\n      //Returns a CSS compatible HEX coloor string (e.g. 'FFA900')\n      const toHex = function(d) {\n        h = Math.round(d).toString(16);\n        if(h.length < 2) {\n          h = `0${h}`;\n        }\n        return h;\n      };\n      const { r, g, b } = this;\n      return [toHex(r), toHex(g), toHex(b)].join('');\n    }\n  });\n  return o;\n};\nUtil.jsonToObject = function(jsonStr) {\n  let ret = null;\n  try {\n    ret = JSON.parse(jsonStr);\n  } catch(error) {\n    let pos = +('' + error)\n      .split('\\n')\n      .reverse()[0]\n      .replace(/.*position\\ ([0-9]+).*/, '$1');\n    console.error('Unexpected token: ', jsonStr);\n    console.error('Unexpected token at:', jsonStr.substring(pos));\n    ret = null;\n  }\n  return ret;\n};\nUtil.splitLines = function(str, max_linelen = Number.MAX_SAFE_INTEGER) {\n  const tokens = str.split(/\\s/g);\n  let lines = [];\n  let line = tokens.shift();\n  for(; tokens.length; ) {\n    if((line.length ? line.length + 1 : 0) + tokens[0].length > max_linelen) {\n      lines.push(line);\n      line = '';\n    }\n    if(line != '') line += ' ';\n    line += tokens.shift();\n  }\n  if(line != '') lines.push(line);\n  return lines;\n};\nUtil.splitAt = function* (str, ...indexes) {\n  let prev = 0;\n  for(let index of indexes.sort((a, b) => a - b).concat([str.length])) {\n    if(index >= prev) {\n      yield str.substring(prev, index);\n      if(index >= str.length) break;\n      prev = index;\n    }\n  }\n};\nUtil.decodeEscapes = function(text) {\n  let matches = [...Util.matchAll(/([^\\\\]*)(\\\\u[0-9a-f]{4}|\\\\)/gi, text)];\n  if(matches.length) {\n    matches = matches.map(m => [...m].slice(1)).map(([s, t]) => s + String.fromCodePoint(parseInt(t.substring(2), 16)));\n    text = matches.join('');\n  }\n  return text;\n};\n\nUtil.stripXML = text =>\n  text\n    .replace(/<br(|\\ *\\/)>/gi, '\\n')\n    .replace(/<[^>]*>/g, '')\n    .replace(/[\\t\\ ]+/g, ' ')\n    .replace(/(\\n[\\t\\ ]*)+\\n/g, '\\n');\n\nUtil.stripHTML = html =>\n  html\n    .replace(/\\s*\\n\\s*/g, ' ')\n    .replace(/<[^>]*>/g, '\\n')\n    .split(lineSplit)\n    .map(p => p.trim())\n    .filter(p => p != '');\n\nUtil.stripNonPrintable = text => text.replace(/[^\\x20-\\x7f\\x0a\\x0d\\x09]/g, '');\nUtil.decodeHTMLEntities = function(text) {\n  let entities = {\n    amp: '&',\n    apos: \"'\",\n    '#x27': \"'\",\n    '#x2F': '/',\n    '#39': \"'\",\n    '#47': '/',\n    lt: '<',\n    gt: '>',\n    nbsp: ' ',\n    quot: '\"'\n  };\n  return text.replace(new RegExp('&([^;]+);', 'gm'), (match, entity) => entities[entity] || match);\n};\nUtil.encodeHTMLEntities = (str, charset = '\\u00A0-\\u9999<>&') => str.replace(new RegExp(`[${charset}](?!#)`, 'gim'), i => '&#' + i.charCodeAt(0) + ';');\n\nUtil.stripAnsi = function(str) {\n  return (str + '').replace(new RegExp('\\x1b[[(?);]{0,2}(;?[0-9])*.', 'g'), '');\n};\nUtil.proxy = (obj = {}, handler) =>\n  new Proxy(obj, {\n    get(target, key, receiver) {\n      //console.log(`Util.proxy getting ${key}!`);\n      return Reflect.get(target, key, receiver);\n    },\n    set(target, key, value, receiver) {\n      //console.log(`Util.proxy setting ${key}!`);\n      return Reflect.set(target, key, value, receiver);\n    },\n    ...handler\n  });\n\nUtil.propertyLookup = (obj = {}, handler = key => null) =>\n  Util.proxy(obj, {\n    get(target, key, receiver) {\n      return handler(key);\n    }\n  });\n\nUtil.traceProxy = (obj, handler) => {\n  let proxy;\n  handler = /*handler || */ function(name, args) {\n    console.log(`Calling method '${name}':`, ...args);\n  };\n  //console.log('handler', { handler }, handler + '');\n  proxy = new Proxy(obj, {\n    get(target, key, receiver) {\n      let member = Reflect.get(obj, key, receiver);\n      if(0 && typeof member == 'function') {\n        let method = member; // member.bind(obj);\n        member = function() {\n          //          handler.call(receiver, key, arguments);\n          return method.apply(obj, arguments);\n        };\n        member = method.bind(obj);\n        console.log('Util.traceProxy', key, (member + '').replace(/\\n\\s+/g, ' ').split(lineSplit)[0]);\n      }\n      return member;\n    }\n  });\n  return proxy;\n};\n\nUtil.proxyTree = function proxyTree(...callbacks) {\n  const [setCallback, applyCallback = () => {}] = callbacks;\n  const handler = {\n    get(target, key) {\n      return node([...this.path, key]);\n    },\n    set(target, key, value) {\n      return setCallback(this.path, key, value);\n    },\n    apply(target, thisArg, args) {\n      return applyCallback(this.path, ...args);\n    }\n  };\n  function node(path) {\n    return new Proxy(() => {}, { path, ...handler });\n  }\n\n  return node([]);\n};\n\n/*\n * Calls a constructor with an arbitrary number of arguments.\n *\n * This idea was borrowed from a StackOverflow answer:\n * http://stackoverflow.com/questions/1606797/use-of-apply-with-new-operator-is-this-possible/1608546#1608546\n *\n * And from this MDN doc:\n * https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/function/apply\n *\n * @param constructor- Constructor to call\n * @param arguments- any number of arguments\n * @return A 'new' instance of the constructor with the arguments passed\n */\nUtil.construct = constructor => {\n  function F(args) {\n    return constructor.apply(this, args);\n  }\n\n  F.prototype = constructor.prototype;\n\n  // since arguments isn't a first-class array, we'll use a shim\n  // Big thanks to Felix GeisendÃ¶rfer for the idea:\n  // http://debuggable.com/posts/turning-javascript-s-arguments-object-into-an-array:4ac50ef8-3bd0-4a2d-8c2e-535ccbdd56cb\n  return new F(Array.prototype.slice.call(arguments, 1));\n};\n\n/*\n * Calls construct() with a constructor and an array of arguments.\n *\n * @param constructor- Constructor to call\n * @param array- an array of arguments to apply\n * @return A 'new' instance of the constructor with the arguments passed\n */\nUtil.constructApply = (constructor, array) => {\n  let args = [].slice.call(array);\n  return construct.apply(null, [constructor].concat(args));\n};\n\nUtil.immutable = args => {\n  const argsType = typeof args === 'object' && Array.isArray(args) ? 'array' : 'object';\n  const errorText = argsType === 'array' ? \"Error! You can't change elements of this array\" : \"Error! You can't change properties of this object\";\n  const handler = {\n    set: () => {\n      throw new Error(errorText);\n    },\n    deleteProperty: () => {\n      throw new Error(errorText);\n    },\n    defineProperty: () => {\n      throw new Error(errorText);\n    }\n  };\n  return new Proxy(args, handler);\n};\n\nUtil.immutableClass = (orig, ...proto) => {\n  let name = Util.fnName(orig).replace(/Mutable/g, '');\n  let imName = 'Immutable' + name;\n  proto = proto || [];\n  let initialProto = proto.map(p =>\n    Util.isArrowFunction(p)\n      ? p\n      : ctor => {\n          for(let n in p) ctor.prototype[n] = p[n];\n        }\n  );\n  let body = `class ${imName} extends ${name} {\\n  constructor(...args) {\\n    super(...args);\\n    if(new.target === ${imName})\\n      return Object.freeze(this);\\n  }\\n};\\n\\n${imName}.prototype.constructor = ${imName};\\n\\nreturn ${imName};`;\n  for(let p of initialProto) p(orig);\n  let ctor; // = new Function(name, body)(orig);\n\n  let imm = base => {\n    let cls;\n    cls = class extends base {\n      constructor(...args) {\n        super(...args);\n        if(new.target === cls) return Object.freeze(this);\n      }\n    };\n    return cls;\n  };\n  ctor = imm(orig);\n\n  //console.log('immutableClass', { initialProto, body }, orig);\n  let species = ctor;\n\n  /* prettier-ignore */ //Object.assign(ctor, { [Symbol.species]: ctor });\n\n  return ctor;\n};\n\nUtil.partial = function partial(fn /*, arg1, arg2 etc */) {\n  let partialArgs = [].slice.call(arguments, 1);\n  if(!partialArgs.length) {\n    return fn;\n  }\n  return function() {\n    let args = [].slice.call(arguments);\n    let derivedArgs = [];\n    for(let i = 0; i < partialArgs.length; i++) {\n      let thisPartialArg = partialArgs[i];\n      derivedArgs[i] = thisPartialArg === undefined ? args.shift() : thisPartialArg;\n    }\n    return fn.apply(this, derivedArgs.concat(args));\n  };\n};\n\nUtil.clamp = Util.curry((min, max, value) => Math.max(min, Math.min(max, value)));\n\nUtil.coloring = (useColor = true) =>\n  !useColor\n    ? {\n        code(...args) {\n          return '';\n        },\n        text(text) {\n          return text;\n        },\n        concat(...args) {\n          let out = args.shift() || [''];\n          if(typeof out == 'string') out = [out];\n          for(let arg of args) {\n            if(Array.isArray(arg)) {\n              for(let subarg of arg) out[0] += subarg;\n            } else out[0] += arg;\n          }\n          return out;\n        }\n      }\n    : Util.isBrowser()\n    ? {\n        palette: [\n          'rgb(0,0,0)',\n          'rgb(80,0,0)',\n          'rgb(0,80,0)',\n          'rgb(80,80,0)',\n          'rgb(0,0,80)',\n          'rgb(80,0,80)',\n          'rgb(0,80,80)',\n          'rgb(80,80,80)',\n          'rgb(0,0,0)',\n          'rgb(160,0,0)',\n          'rgb(0,160,0)',\n          'rgb(160,160,0)',\n          'rgb(0,0,160)',\n          'rgb(160,0,160)',\n          'rgb(0,160,160)',\n          'rgb(160,160,160)'\n        ],\n        /*Util.range(0, 15).map(i =>\n            `rgb(${Util.range(0, 2)\n              .map(bitno => Util.getBit(i, bitno) * (i & 0x08 ? 160 : 80))\n              .join(',')})`\n        )*/ code(...args) {\n          let css = '';\n          let bold = 0;\n          for(let arg of args) {\n            let c = (arg % 10) + bold;\n            let rgb = this.palette[c];\n            //console.realLog(\"code:\", {arg, c, rgb});\n            if(arg >= 40) css += `background-color:${rgb};`;\n            else if(arg >= 30) css += `color:${rgb};`;\n            else if(arg == 1) bold = 8;\n            else if(arg == 0) bold = 0;\n            else throw new Error('No such color code:' + arg);\n          }\n          css += 'padding: 2px 0 2px 0;';\n          return css;\n        },\n        text(text, ...color) {\n          return [`%c${text}`, this.code(...color)];\n        },\n        concat(...args) {\n          let out = args.shift() || [''];\n          for(let arg of args) {\n            if(Array.isArray(arg) && typeof arg[0] == 'string') out[0] += arg.shift();\n            else if(Util.isObject(arg)) {\n              out.push(arg);\n              continue;\n            }\n\n            out = out.concat(arg);\n          }\n          return out;\n        }\n      }\n    : {\n        code(...args) {\n          return `\\x1b[${[...args].join(';')}m`;\n        },\n        text(text, ...color) {\n          return this.code(...color) + text + this.code(0);\n        },\n        concat(...args) {\n          return args.join('');\n        }\n      };\n\nlet color;\nUtil.colorText = (...args) => {\n  if(!color) color = Util.coloring();\n  return color.text(...args);\n};\nUtil.decodeAnsi = (str, index) => {\n  let ret = [];\n  const len = str.length;\n  if(index === undefined) index = str.lastIndexOf('\\x1b');\n  const isDigit = c => '0123456789'.indexOf(c) != -1;\n  const notDigit = c => !isDigit(c);\n  const findIndex = (pred, start) => {\n    let i;\n    for(i = start; i < len; i++) if(pred(str[i])) break;\n    return i;\n  };\n  if(str[++index] == '[') {\n    let newIndex;\n    for(++index; index < len; index = newIndex) {\n      let isNum = isDigit(str[index]);\n      newIndex = isNum ? findIndex(notDigit, index) : index + 1;\n      if(isNum) {\n        let num = parseInt(str.substring(index, newIndex));\n        ret.push(num);\n      } else {\n        ret.push(str[index]);\n        break;\n      }\n      if(str[newIndex] == ';') newIndex++;\n    }\n  }\n  return ret;\n};\nUtil.stripAnsi = str => {\n  let o = '';\n  for(let i = 0; i < str.length; i++) {\n    if(str[i] == '\\x1b' && str[i + 1] == '[') {\n      while(!/[A-Za-z]/.test(str[i])) i++;\n      continue;\n    }\n    o += str[i];\n  }\n  return o;\n};\n\nUtil.ansiCode = (...args) => {\n  if(!color) color = Util.coloring();\n  return color.code(...args);\n};\nUtil.ansi = Util.coloring(true);\nUtil.wordWrap = (str, width, delimiter) => {\n  // use this on single lines of text only\n  if(str.length > width) {\n    let p = width;\n    for(; p > 0 && str[p] != ' '; p--) {}\n    if(p > 0) {\n      let left = str.substring(0, p);\n      let right = str.substring(p + 1);\n      return left + delimiter + Util.wordWrap(right, width, delimiter);\n    }\n  }\n  return str;\n};\nUtil.multiParagraphWordWrap = (str, width, delimiter) => {\n  // use this on multi-paragraph lines of xcltext\n  let arr = str.split(delimiter);\n  for(let i = 0; i < arr.length; i++) if(arr[i].length > width) arr[i] = Util.wordWrap(arr[i], width, delimiter);\n  return arr.join(delimiter);\n};\nUtil.defineInspect = (proto, ...props) => {\n  if(!Util.isBrowser()) {\n    const c = Util.coloring();\n    proto[Util.inspectSymbol] = function() {\n      const obj = this;\n      return (\n        c.text(Util.fnName(proto.constructor) + ' ', 1, 31) +\n        Util.inspect(\n          props.reduce((acc, key) => {\n            acc[key] = obj[key];\n            return acc;\n          }, {}),\n          {\n            multiline: false,\n            colors: true,\n            colon: ':',\n            spacing: '',\n            separator: ', ',\n            padding: ' '\n          }\n        )\n      );\n    };\n  }\n};\n\nUtil.inRange = Util.curry((a, b, value) => value >= a && value <= b);\n\nUtil.bindProperties = (proxy, target, props, gen) => {\n  if(props instanceof Array) props = Object.fromEntries(props.map(name => [name, name]));\n  const [propMap, propNames] = Array.isArray(props) ? [props.reduce((acc, name) => ({ ...acc, [name]: name }), {}), props] : [props, Object.keys(props)];\n\n  gen ??= p => v => v === undefined ? target[propMap[p]] : (target[propMap[p]] = v);\n  const propGetSet = propNames\n    .map(k => [k, propMap[k]])\n\n    .reduce(\n      (a, [k, v]) => ({\n        ...a,\n        [k]: Util.isFunction(v) ? (...args) => v.call(target, k, ...args) : (gen && gen(k)) || ((...args) => (args.length > 0 ? (target[k] = args[0]) : target[k]))\n      }),\n      {}\n    );\n\n  /*  console.log(`Util.bindProperties`, { proxy, target, props, gen });*/\n  //console.log(`Util.bindProperties`, { propMap, propNames, propGetSet });\n  Object.defineProperties(\n    proxy,\n    propNames.reduce(\n      (a, k) => {\n        const prop = props[k];\n        const get_set = propGetSet[k]; //typeof prop == 'function' ? prop : gen(prop);\n        return {\n          ...a,\n          [k]: {\n            get: get_set,\n            set: get_set,\n            enumerable: true\n          }\n        };\n      },\n      {\n        __getter_setter__: { get: () => gen, enumerable: false },\n        __bound_target__: { get: () => target, enumerable: false }\n      }\n    )\n  );\n  return proxy;\n};\n\nUtil.weakKey = (function () {\n  const map = new WeakMap();\n  let index = 0;\n  return obj => {\n    let key = map.get(obj);\n    if(!key) {\n      key = 'weak-key-' + index++;\n      map.set(obj, key);\n    }\n    return key;\n  };\n})();\n\nObject.assign(Util.is, {\n  array: Array.isArray,\n  bool: Util.isBool,\n  constructor: Util.isConstructor,\n  date: Util.isDate,\n  email: Util.isEmail,\n  empty: Util.isEmpty,\n  nonEmpty: Util.isNonEmpty,\n  emptyString: Util.isEmptyString,\n  generator: Util.isGenerator,\n  iterable: Util.isIterable,\n  map: Util.isMap,\n  nativeFunction: Util.isNativeFunction,\n  object: Util.isObject,\n  promise: Util.isPromise,\n  function: Util.isFunction,\n  string: Util.isString,\n  on: val => val == 'on' || val == 'yes' || val === 'true' || val === true,\n  off: val => val == 'off' || val == 'no' || val === 'false' || val === false,\n  true: val => val === 'true' || val === true,\n  false: val => val === 'false' || val === false\n});\n\nclass AssertionFailed extends Error {\n  constructor(message, stack) {\n    super(/*'@ ' + location + ': ' +*/ message);\n    //this.location = location;\n    this.type = 'Assertion failed';\n\n    stack = stack || this.stack;\n\n    this.stack = stack;\n  }\n}\n\nUtil.assert = function assert(val, message) {\n  if(typeof val == 'function') {\n    message = message || val + '';\n    val = val();\n  }\n  if(!val) throw new AssertionFailed(message || `val == ${val}`);\n};\nUtil.assertEqual = function assertEqual(val1, val2, message) {\n  if(val1 != val2) throw new AssertionFailed(message || `${val1} != ${val2}`);\n};\n\nUtil.assignGlobal = () => Util.weakAssign(Util.getGlobalObject(), Util);\n\nUtil.weakMapper = function(createFn, map = new WeakMap(), hitFn) {\n  let self = function(obj, ...args) {\n    let ret;\n    if(map.has(obj)) {\n      ret = map.get(obj);\n      if(typeof hitFn == 'function') hitFn(obj, ret);\n    } else {\n      ret = createFn(obj, ...args);\n      //if(ret !== undefined)\n      map.set(obj, ret);\n    }\n    return ret;\n  };\n  self.set = (k, v) => map.set(k, v);\n  self.get = k => map.get(k);\n  self.map = map;\n  return self;\n};\n\nUtil.merge = function(...args) {\n  let ret;\n  let isMap = args[0] instanceof Map;\n  let t = isMap ? a => new Map(Object.entries(a)) : a => a;\n\n  if(isMap) {\n    /*  if(!args.every(arg => Util.isObject(arg) && arg instanceof Map))\n    args =args.map(arg => new Map(Util.entries(arg)));\n*/\n    ret = new Map();\n\n    for(let arg of args) for (let [key, value] of Util.entries(arg)) ret.set(key, value);\n  } else {\n    ret = args.reduce((acc, arg) => ({ ...acc, ...arg }), {});\n  }\n\n  return ret;\n};\n\nUtil.transformer = (a, ...l) =>\n  (l || []).reduce(\n    (c, f) =>\n      function(...v) {\n        return f.apply(this, [c.apply(this, v), ...v]);\n      },\n    a\n  );\n\n/* XXX */ Util.copyTextToClipboard = (i, t) => {\n  if(!Util.isBrowser()) {\n    return import('./childProcess.js').then(async module => {\n      let fs, std;\n      let childProcess = await module.PortableChildProcess((a, b, c) => {\n        fs = b;\n        std = c;\n      });\n      console.log('childProcess', { childProcess, fs, std });\n      let proc = childProcess('xclip', ['-in'], {\n        block: false,\n        stdio: ['pipe'],\n        env: { DISPLAY: Util.getEnv('DISPLAY') }\n      });\n      console.log('proc.stdin', proc.stdin);\n\n      console.log('write =', await fs.write(proc.stdin, i));\n      await fs.close(proc.stdin);\n      return await proc.wait();\n    });\n  }\n  let doc = Util.tryCatch(() => document);\n  if(!doc) return;\n  if(!t) t = doc.body;\n  const e = doc.createElement('textarea');\n  const prev = doc.activeElement;\n  e.value = i + '';\n  e.setAttribute('readonly', '');\n  e.style.contain = 'strict';\n  e.style.position = 'absolute';\n  e.style.left = '-9999px';\n  e.style.fontSize = '12pt';\n  const s = doc.getSelection();\n  let orig = false;\n  if(s.rangeCount > 0) {\n    orig = s.getRangeAt(0);\n  }\n  t.append(e);\n  e.select();\n  e.selectionStart = 0;\n  e.selectionEnd = i.length;\n  let isSuccess = false;\n  try {\n    isSuccess = doc.execCommand('copy');\n  } catch(_) {}\n  e.remove();\n  if(orig) {\n    s.removeAllRanges();\n    s.addRange(orig);\n  }\n  if(prev) {\n    prev.focus();\n  }\n  return isSuccess;\n};\n\nUtil.toPlainObject = obj => Util.toPlainObjectT(obj, v => (Util.isObject(v) ? Util.toPlainObject(v) : v));\n\nUtil.toBuiltinObject = obj => (Array.isArray(obj) ? obj.map(Util.toBuiltinObject) : Util.toPlainObjectT(obj, v => (Util.isObject(v) ? Util.toBuiltinObject(v) : v)));\n\nUtil.toPlainObjectT = (obj, t = (v, n) => v) => [...Object.getOwnPropertyNames(obj)].reduce((acc, k) => ({ ...acc, [k]: t(obj[k], k) }), {});\n\nUtil.timer = msecs => {\n  let ret, id, rej, createdTime, startTime, stopTime, endTime, res, delay, n, timer;\n  createdTime = new Date();\n  const remaining = () => {\n    let r = startTime + msecs - (typeof stopTime == 'number' ? stopTime : new Date());\n    return r >= 0 ? r : 0;\n  };\n  const finish = callback => {\n    stopTime = new Date();\n    if(stopTime.valueOf() > endTime.valueOf()) stopTime = endTime;\n    if(typeof callback == 'function') callback(stopTime);\n    res((n = remaining()));\n  };\n  const log = (method, ...args) =>\n    console.log(`${Date.now() - createdTime.valueOf()} timer#${id}.${method}`, ...args.map(obj => Util.toPlainObject(obj || {}, v => v || (v instanceof Date ? `+${v.valueOf() - createdTime}` : v))));\n  const timeout = (msecs, tmr = timer) => {\n    let now = Date.now();\n    if(!startTime) startTime = new Date(now);\n    endTime = new Date(now + msecs);\n    stopTime = undefined;\n    id = setTimeout(() => {\n      finish(typeof tmr.callback == 'function' ? (...args) => tmr.callback(...args) : () => {});\n      log(`finish`, tmr);\n    }, msecs);\n    log('start', tmr);\n  };\n  const add = (arr, ...items) => [...(arr ? arr : []), ...items];\n\n  timer = {\n    subscribers: [],\n    /* prettier-ignore */ get delay() {\n      return delay;\n    },\n    /* prettier-ignore */ get created() {\n      return createdTime;\n    },\n    /* prettier-ignore */ get start() {\n      return startTime || new Date(endTime.valueOf() - delay);\n    },\n    /* prettier-ignore */ get stop() {\n      return stopTime instanceof Date ? stopTime : undefined;\n    },\n    /* prettier-ignore */ get elapsed() {\n      return delay + (stopTime || new Date()).valueOf() - endTime.valueOf();\n    },\n    /* prettier-ignore */ get end() {\n      return endTime;\n    },\n    /* prettier-ignore */ get remain() {\n      return endTime.valueOf() - (stopTime || new Date()).valueOf();\n    },\n    cancel() {\n      log('cancel', this);\n      clearTimeout(id);\n      finish();\n      return this;\n    },\n    pause() {\n      let { remain, pause } = this;\n      stopTime = new Date();\n      clearTimeout(id);\n      this.resume = function() {\n        timeout(remain, this);\n        this.pause = pause;\n        delete this.resume;\n        delete this.restart;\n        log('resume', this);\n        return this;\n      };\n      this.restart = function() {\n        timeout(delay, this);\n        this.pause = pause;\n        delete this.resume;\n        delete this.restart;\n        log('restart', this);\n        return this;\n      };\n      delete this.pause;\n      log('pause', this);\n      return this;\n    },\n    callback(...args) {\n      log('callback', this);\n      const { subscribers } = this;\n      for(let f of subscribers) f.call(this, ...args);\n      return this;\n    },\n    subscribe(f) {\n      const { subscribers } = this;\n      if(subscribers.indexOf(f) == -1) subscribers.push(f);\n      return this;\n    },\n    unsubscribe(f) {\n      const { subscribers } = this;\n      let idx = subscribers.indexOf(f);\n      if(idx != -1) subscribers.splice(idx, idx + 1);\n      return this;\n    }\n  };\n  const start = () =>\n    new Promise((resolve, reject) => {\n      res = resolve;\n      rej = reject;\n      timeout((delay = msecs));\n    });\n  ret = start();\n  return Util.define(ret, timer);\n};\n/**\n * ???????????''\n * new Promise(Util.thenableReject('ERROR').then)\n *\n * @param      {<type>}  error   The error\n */\nUtil.thenableReject = error => ({\n  then: (resolve, reject) => reject(error)\n});\nUtil.wrapGenerator = fn =>\n  Util.isGenerator(fn)\n    ? function(...args) {\n        return [...fn.call(this, ...args)];\n      }\n    : fn;\n\nUtil.wrapGeneratorMethods = obj => {\n  for(let name of Util.getMethodNames(obj, 1, 0)) obj[name] = Util.wrapGenerator(obj[name]);\n  return obj;\n};\n\nUtil.decorateIterable = (proto, generators = false) => {\n  const methods = {\n    forEach(fn, thisArg) {\n      for(let [i, item] of this.entries()) fn.call(thisArg, item, i, this);\n    },\n    *map(fn, thisArg) {\n      for(let [i, item] of this.entries()) yield fn.call(thisArg, item, i, this);\n    },\n    *filter(pred, thisArg) {\n      for(let [i, item] of this.entries()) if(pred.call(thisArg, item, i, this)) yield item;\n    },\n    findIndex(pred, thisArg) {\n      for(let [i, item] of this.entries()) if(pred(item, i, this)) return i;\n      return -1;\n    },\n    indexOf(item, startIndex = -1) {\n      return this.findIndex((e, i) => i >= startIndex && e == item);\n    },\n    find(pred, thisArg) {\n      let idx = this.findIndex(pred, thisArg);\n      if(idx != -1) return typeof this.item == 'function' ? this.item(idx) : this[idx];\n    },\n    every(pred, thisArg) {\n      for(let [i, item] of this.entries()) if(!pred(item, i++, this)) return false;\n      return true;\n    },\n    some(pred, thisArg) {\n      for(let [i, item] of this.entries()) if(pred(item, i, this)) return true;\n      return false;\n    },\n    reduce(fn, accu) {\n      for(let [i, item] of this.entries()) accu = fn(accu, item, i, this);\n      return accu;\n    },\n    *entries() {\n      let i = 0;\n      for(let item of this) yield [i++, item];\n    },\n    *keys() {\n      for(let [i, item] of this.entries()) yield i;\n    },\n    *values() {\n      for(let [i, item] of this.entries()) yield item;\n    }\n  };\n  Util.define(proto, methods, false);\n  if(!generators) {\n    for(let name in methods) {\n      if(typeof name == 'symbol') continue;\n      if(name == 'entries') continue;\n      let gen = proto[name];\n      proto[name] = Util.wrapGenerator(gen);\n    }\n  }\n\n  return proto;\n};\n\nUtil.swap = (a, b) => [b, a];\nUtil.swapArray = ([a, b]) => [b, a];\n\nUtil.cacheAdapter = (st, defaultOpts = {}) => {\n  if(typeof st == 'string')\n    st = Util.tryCatch(\n      () => window.caches,\n      async c => c.open(st),\n      () => null\n    );\n  return {\n    async getItem(request, opts = {}) {\n      if(typeof request == 'number') request = await this.key(request);\n      return await (await st).match(request, { ...defaultOpts, ...opts });\n    },\n    async setItem(request, response) {\n      return await (await st).put(request, response);\n    },\n    async addItem(request) {\n      await (await st).add(request);\n      let response = await this.getItem(request);\n      if(response) response = response.clone();\n      return response;\n    },\n    async removeItem(request, opts = {}) {\n      if(typeof request == 'number') request = await this.key(request);\n      return await (await st).delete(request, { ...defaultOpts, ...opts });\n    },\n    async key(index) {\n      return (await (await st).keys())[index];\n    },\n    async keys(urls = false, t = a => a) {\n      let keys = await (await st).keys();\n      if(urls) keys = keys.map(response => response.url);\n      if(typeof t == 'function') keys = keys.map(r => t(r));\n\n      return keys;\n    },\n    async clear() {\n      let keys = await (await st).keys();\n      for(let key of keys) await this.removeItem(key);\n    }\n  };\n};\nUtil.cachedFetch = (allOpts = {}) => {\n  let { cache = 'fetch', fetch = Util.getGlobalObject('fetch'), debug, print, ...opts } = allOpts;\n  const storage = Util.cacheAdapter(cache);\n  const baseURL = Util.memoize(() => Util.makeURL({ location: '' }));\n\n  let self = async function CachedFetch(request, opts = {}) {\n    let response;\n    try {\n      if(typeof request == 'string') request = new Request(request, { ...self.defaultOpts, ...opts });\n\n      if(!request.url.startsWith(baseURL())) {\n        request = new Request(request.url, { ...request, mode: 'no-cors' });\n      }\n      response = await storage.getItem(request, {\n        ...self.defaultOpts,\n        ...opts\n      });\n\n      if(response == undefined) {\n        response = await /*self.*/ fetch(request, {\n          ...self.defaultOpts,\n          ...opts\n        });\n\n        if(response) {\n          let item = response.clone();\n          item.time = new Date();\n          storage.setItem(request, item);\n        }\n      } else {\n        response.cached = true;\n      }\n    } catch(err) {\n      throw new Error(`CachedFetch: ` + (request.url || request) + ' ' + err.message);\n    }\n    return response;\n  };\n  if(debug)\n    self = Util.printReturnValue(self, {\n      print: print || ((returnValue, fn, ...args) => console.debug(`cachedFetch[${cache}] (`, ...args, `) =`, returnValue))\n    });\n\n  Util.define(self, { fetch, cache, storage, opts });\n  return self;\n};\n\nUtil.proxyObject = (root, handler) => {\n  const ptr = path => path.reduce((a, i) => a[i], root);\n  const nodes = Util.weakMapper(\n    (value, path) =>\n      new Proxy(value, {\n        get(target, key) {\n          let prop = value[key];\n          if(Util.isObject(prop) || Array.isArray(prop)) return new node([...path, key]);\n          return handler && handler.get ? handler.get(prop, key) : prop;\n        }\n      })\n  );\n  function node(path) {\n    let value = ptr(path);\n    //console.log(\"node:\",{path,value});\n    return nodes(value, path);\n  }\n  return node([]);\n};\nUtil.parseXML = function(xmlStr) {\n  return Util.tryCatch(\n    () => new DOM(),\n    parser => parser.parseFromString(xmlStr, 'application/xml')\n  );\n};\n\nUtil.weakAssoc = (fn = (value, ...args) => Object.assign(value, ...args)) => {\n  let mapper = Util.tryCatch(\n    () => new WeakMap(),\n    map => Util.weakMapper((obj, ...args) => Util.merge(...args), map),\n    () =>\n      (obj, ...args) =>\n        Util.define(obj, ...args)\n  );\n  let self = (obj, ...args) => {\n    let value = mapper(obj, ...args);\n    return fn(value, ...args);\n  };\n  self.mapper = mapper;\n\n  return self;\n};\nUtil.getArgv = Util.memoize(() =>\n  Util.tryCatch(\n    () => {\n      let a = process.argv;\n      if(!Array.isArray(a)) throw new Error();\n      return a;\n    },\n    a => a,\n    () =>\n      Util.tryCatch(\n        () => thisFilename(),\n        fn => [fn],\n        () =>\n          Util.tryCatch(\n            () => scriptArgs,\n            a => ['qjs', ...a]\n          )\n      )\n  )\n);\nUtil.getArgs = Util.memoize(() =>\n  Util.tryCatch(\n    () => {\n      let a = process.argv;\n      if(!Array.isArray(a)) throw new Error();\n      return a;\n    },\n    a => a.slice(1),\n    () => Util.tryCatch(() => scriptArgs)\n  )\n);\n/*  options Object/Map\n\n    option Array [has_arg,callback,val]\n\n*/\nUtil.getOpt = (options = {}, args) => {\n  let short, long;\n  let result = {};\n  let positional = (result['@'] = []);\n  if(!(options instanceof Array)) options = Object.entries(options);\n  const findOpt = arg => options.find(([optname, option]) => (Array.isArray(option) ? option.indexOf(arg) != -1 : false) || arg == optname);\n  let [, params] = options.find(opt => opt[0] == '@') || [];\n  if(typeof params == 'string') params = params.split(',');\n  // console.log('Util.getOpt options', options);\n  // console.log('Util.getOpt params', params);\n  for(let i = 0; i < args.length; i++) {\n    const arg = args[i];\n    let opt;\n    if(arg[0] == '-') {\n      let name, value, start, end;\n      if(arg[1] == '-') long = true;\n      else short = true;\n      //console.log('Util.getOpt', { arg, short, long });\n      start = short ? 1 : 2;\n      if(short) end = 2;\n      else if((end = arg.indexOf('=')) == -1) end = arg.length;\n      name = arg.substring(start, end);\n      //console.log('Util.getOpt', { start, end, name });\n      if((opt = findOpt(name))) {\n        //console.log('Util.getOpt', { opt });\n        const [has_arg, handler] = opt[1];\n        if(has_arg) {\n          if(arg.length > end) value = arg.substring(end + (arg[end] == '='));\n          else value = args[++i];\n        } else {\n          value = true;\n        }\n        //console.log('Util.getOpt #1', { name, handler });\n        Util.tryCatch(\n          () => handler(value, result[opt[0]], options, result),\n          v => (value = v),\n          () => null\n        );\n        //console.log('Util.getOpt #2', { name, value, fn: typeof opt[1] + ' ' + opt[1] + '' });\n        result[opt[0]] = value;\n        continue;\n      }\n    }\n    if(params.length) {\n      const param = params.shift();\n      // console.log('Util.getOpt', { positional, param });\n      if((opt = findOpt(param))) {\n        const [, [, handler]] = opt;\n        let value = arg;\n        //console.log('Util.getOpt #3', { param, handler });\n        if(typeof handler == 'function')\n          value = Util.tryCatch(\n            () => handler(value, result[opt[0]], options, result),\n            v => v\n          );\n        const name = opt[0];\n        //console.log('Util.getOpt #4', { name, value });\n        result[opt[0]] = value;\n        continue;\n      }\n    }\n    result['@'] = [...(result['@'] ?? []), arg];\n  }\n  //console.log('Util.getOpt', { result });\n  return result;\n};\nUtil.getEnv = async varName =>\n  Util.tryCatch(\n    () => process.env,\n    async e => e[varName],\n    () => false /* XXX (globalThis.std ? std.getenv(varName) : Util.tryCatch(async () => await import('std').then(std => std.getenv(varName)))) */\n  );\nUtil.getEnvVars = async () =>\n  Util.tryCatch(\n    () => process.env,\n    async e => e,\n    () => false\n    // XXX     Util.tryCatch(\n    //        async () =>\n    //          await import('./childProcess.js').then(async ({ PortableChildProcess }) => {\n    //            let childProcess = await PortableChildProcess();\n    //            (await import('./filesystem.js')).default(fs => (Util.globalThis().filesystem = fs));\n    //            let proc = childProcess('env', [], {\n    //              block: false,\n    //              stdio: [null, 'pipe']\n    //            });\n    //            let data = '\\n';\n    //            for await(let output of await filesystem.asyncReader(proc.stdout)) data += filesystem.bufferToString(output);\n    //            let matches = [...Util.matchAll(/(^|\\n)[A-Za-z_][A-Za-z0-9_]*=.*/gm, data)];\n    //            let indexes = matches.map(match => match.index);\n    //            let ranges = indexes.reduce((acc, idx, i, a) => [...acc, [idx + 1, a[i + 1]]], []);\n    //            let vars = ranges\n    //              .map(r => data.substring(...r))\n    //              .map(line => {\n    //                let eqPos = line.indexOf('=');\n    //                return [line.substring(0, eqPos), line.substring(eqPos + 1)];\n    //              });\n    //            return Object.fromEntries(vars);\n    //          })\n    //      )\n  );\n\nUtil.safeFunction = (fn, trapExceptions, thisObj) => {\n  const isAsync = Util.isAsync(fn);\n  let exec = isAsync\n    ? async function(...args) {\n        return await fn.call(this || thisObj, ...args);\n      }\n    : function(...args) {\n        return fn.call(this || thisObj, ...args);\n      };\n  if(trapExceptions) {\n    const handleException = typeof trapExceptions == 'function' ? trapExceptions : Util.putError;\n    Error.stackTraceLimit = Infinity;\n    exec = Util.tryFunction(\n      exec, //async (...args) => { Error.stackTraceLimit=Infinity;  return await exec(...args); },\n      a => a,\n      error => {\n        if(Util.isObject(error)) {\n          if(error.stack !== undefined) error.stack = new Util.stack(error.stack);\n          handleException(error);\n        }\n      }\n    );\n  }\n  return exec;\n};\nUtil.safeCall = (fn, ...args) => Util.safeApply(fn, args);\nUtil.safeApply = (fn, args = []) => Util.safeFunction(fn, true)(...args);\n\nUtil.exit = exitCode => {\n  const { callExitHandlers } = Util;\n  //console.log('Util.exit', { exitCode, callExitHandlers });\n  if(callExitHandlers) callExitHandlers(exitCode);\n  const stdExit = std => {\n    std.gc();\n    std.exit(exitCode);\n  };\n  if(globalThis.std) return stdExit(globalThis.std);\n  return;\n  /* XXX import('std')\n    .then(stdExit)\n    .catch(() =>*/ Util.tryCatch(\n    () => [process, process.exit],\n    ([obj, exit]) => exit.call(obj, exitCode),\n    () => false\n  );\n};\nUtil.atexit = handler => {\n  const { handlers } = Util.callMain;\n  Util.pushUnique(handlers, handler);\n  if(typeof Util.trapExit == 'function') Util.trapExit();\n};\nUtil.callMain = async (fn, trapExceptions) =>\n  await Util.safeFunction(\n    async (...args) => {\n      Util.callMain.handlers = [];\n      const { handlers } = Util.callMain;\n      const callExitHandlers = (Util.callExitHandlers = Util.once(async ret => {\n        if(handlers) for(const handler of handlers) await handler(ret);\n        // Util.exit(ret);\n      }));\n      Util.trapExit = Util.once(() => Util.signal(15, callExitHandlers));\n      /* XXX if(Util.getPlatform() == 'quickjs') await import('std').then(module => module.gc()); */\n      let ret = await fn(...args);\n      await callExitHandlers(ret);\n    },\n    trapExceptions &&\n      (typeof trapExceptions == 'function'\n        ? trapExceptions\n        : err => {\n            let { message, stack } = err;\n            stack = new Util.stack(err.stack);\n            const scriptDir = Util.tryCatch(\n              () => process.argv[1],\n              argv1 => argv1.replace(/\\/[^\\/]*$/g, '')\n            );\n            console.log('Exception:', message, '\\nStack:' + (stack.toString({ colors: true, stripUrl: `file://${scriptDir}/` }) + '').replace(/(^|\\n)/g, '\\n  '));\n            Util.exit(1);\n          })\n  )(...Util.getArgs().slice(1));\n\nUtil.printReturnValue = (fn, opts = {}) => {\n  const {\n    print = (returnValue, fn, ...args) => {\n      let stack = Util.getCallerStack();\n\n      (console.debug || console.log)('RETURN VAL:', /*Util.inspect(*/ returnValue /*, { colors: false })*/, {\n        /*fn,\n         */ args /*,\n        stack*/\n      });\n    }\n  } = opts;\n  let self;\n  self = (...args) => {\n    let returnValue = fn(...args);\n\n    print.call(self, returnValue, fn, ...args);\n    return returnValue;\n    /*fn = Util.tryFunction(fn, (returnValue, ...args) => {\n      print.call(self, returnValue, fn, ...args);\n      return returnValue;\n    });\n\n    return fn(...args);*/\n  };\n  Util.define(self, { fn, opts });\n  return self;\n};\nUtil.callMain.handlers = [];\n\nUtil.replaceAll = (needles, haystack) => {\n  return Util.entries(needles)\n    .map(([re, str]) => [typeof re == 'string' ? new RegExp(re, 'g') : re, str])\n    .reduce((acc, [match, replacement]) => acc.replace(match, replacement), haystack);\n};\n\nUtil.quote = (str, q = '\"') => {\n  return q + str.replace(new RegExp(q, 'g'), '\\\\' + q) + q;\n};\n\nUtil.escape = (str, pred = codePoint => codePoint < 32 || codePoint > 0xff) => {\n  let s = '';\n  for(let i = 0; i < str.length; i++) {\n    let code = str.codePointAt(i);\n    if(!pred(code)) {\n      s += str[i];\n      continue;\n    }\n\n    if(code == 0) s += `\\\\0`;\n    else if(code == 10) s += `\\\\n`;\n    else if(code == 13) s += `\\\\r`;\n    else if(code == 9) s += `\\\\t`;\n    else if(code <= 0xff) s += `\\\\x${('0' + code.toString(16)).slice(-2)}`;\n    else s += `\\\\u${('0000' + code.toString(16)).slice(-4)}`;\n  }\n  return s;\n};\nUtil.escapeRegex = string => string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\nUtil.consolePrinter = function ConsolePrinter(log = console.log) {\n  let self;\n\n  self = function(...args) {\n    self.add(...args);\n    self.print();\n    self.clear();\n  };\n\n  delete self.length;\n\n  Object.setPrototypeOf(self, Util.extend(Util.consolePrinter.prototype, Util.getMethods(Object.getPrototypeOf(self), 1, 0)));\n  self.splice(0, self.length, '');\n  self.log = (...args) => log(...args);\n\n  return self;\n};\nObject.assign(Util.consolePrinter.prototype, Util.getMethods(Array.prototype));\n\nUtil.consoleJoin = function(...args) {\n  let out = 'push' in this ? this : [];\n  if(out.length == 0) out.push('');\n  let match = Util.matchAll(/%(?:o|O|d|i|s|f|s|d|c)/g);\n  for(let [fmt, ...styles] of args) {\n    console.log('Util.consoleJoin', { fmt, styles, out });\n    let substs = [...match(fmt)];\n    if(substs.length != styles.length) {\n      const code = [substs.length, styles.length];\n      //console.log(\"substs:\",substs);\n      throw new Error(`${code.join(' != ')} ${code.join(', ')}`);\n    }\n    if(out[0]) out[0] += ' ';\n    out[0] += fmt;\n\n    for(let style of styles) Array.prototype.push.call(out, style);\n    // Array.prototype.splice.call(out, out.length, 0, ...styles);\n    //console.log('Util.consoleJoin', [...out]);\n  }\n  return out;\n};\n\nUtil.consoleConcat = function(...args) {\n  let self;\n  self = function ConsoleConcat(...args) {\n    if(args.length == 1 && Array.isArray(args[0])) args = args[0];\n    return self.add(...args);\n  };\n  self.add = Util.consoleJoin;\n  /*  function concat(out, args) {\n console.log('concat', { out: [...out], args: [...args] });\n   while(args.length) {\n      let arg = args.shift();\n      if(typeof arg == 'string') {\n        let matches = [...Util.matchAll(/%[cos]/g, arg)];\n        if(matches.length > 0 && args.length >= matches.length) {\n          out[0] += arg;\n          out.splice(out.length, 0, ...args.splice(0, matches.length));\n        } else {\n          out[0] += arg.replace(/%/g, '%%');\n        }\n      } else if(Array.isArray(arg) && typeof arg[0] == 'string' && /%[cos]/.test(arg[0])) {\n        concat(out, arg);\n      } else {\n        out[0] += ' %o';\n        out.push(arg);\n      }\n    }\n    return out;\n  }\n*/ delete self.length;\n  Object.setPrototypeOf(self, Util.extend(Util.consoleConcat.prototype, Object.getPrototypeOf(self)));\n  //self.push('');\n  if(args.length) self.add(...args);\n  return self;\n};\n\nUtil.consoleConcat.prototype = Object.assign(Util.consoleConcat.prototype, Util.getMethods(Array.prototype, 1, 0), {\n  [Util.inspectSymbol]() {\n    return [this, [...this]];\n  },\n  [Symbol.iterator]() {\n    return Array.prototype[Symbol.iterator].call(this);\n  },\n  clear() {\n    return this.splice(0, this.length);\n  },\n  print(log = (...args) => console.info(...args)) {\n    log(...this);\n  }\n});\nUtil.consolePrinter.prototype.length = 1;\nUtil.consolePrinter.prototype[0] = '';\nObject.assign(Util.consolePrinter.prototype, Util.consoleConcat.prototype, {\n  print() {\n    const a = [...this];\n    const i = a.map(i => Util.inspect(i));\n    console.debug('a: ' + i.shift(), ...i);\n\n    Util.consoleConcat.prototype.print.call(this, this.log);\n  },\n  output() {\n    const a = [...this];\n    this.clear();\n    return a;\n  },\n  add(...args) {\n    let { i = 0 } = this;\n\n    for(; args.length > 0; i++) {\n      let arg = args.shift();\n      //  console.debug('arg:', i, typeof(arg) == 'string'  ? Util.abbreviate(arg) : arg);\n\n      if(Array.isArray(arg) && /%c/.test(arg[0])) {\n        this.i = i;\n        this.add(...arg);\n        continue;\n      }\n      if(i > 0) this[0] += ' ';\n      if(typeof arg != 'string') {\n        this[0] += '%o';\n        this.push(arg);\n      } else {\n        this[0] += arg;\n        if(/color:/.test(this[0])) {\n          throw new Error(`this[0] is CSS: i=${i}\\nthis[0] = \"${this[0]}\"\\narg= ${typeof arg} \"${(arg + '').replace(lineSplit, '\\\\n')}\"`);\n        }\n\n        const matches = [...Util.matchAll(['%c', '%o'], arg)];\n        console.debug('matches.length:', matches.length, ' args.length:', args.length);\n\n        if(matches.length > 0) {\n          const styles = args.splice(0, matches.length);\n          this.splice(this.length, 0, ...styles);\n        }\n      }\n    }\n  }\n});\n\nUtil.booleanAdapter = (getSetFn, trueValue = 1, falseValue = 0) =>\n  function(value) {\n    if(value !== undefined) {\n      getSetFn(value ? trueValue : falseValue);\n    } else {\n      let ret = getSetFn();\n      if(ret === trueValue) return true;\n      if(ret === falseValue) return false;\n    }\n  };\n\nUtil.getSet = (get, set = () => {}, thisObj) =>\n  function(...args) {\n    if(args.length > 0) return set.call(thisObj || this, ...args);\n    return get.call(thisObj || this);\n  };\n\nUtil.deriveGetSet = (fn, get = v => v, set = v => v, thisObj) =>\n  Util.getSet(\n    () => get(fn()),\n    v => fn(set(v)),\n    thisObj\n  );\nUtil.extendFunction = (handler = () => {}) =>\n  class ExFunc extends Function {\n    constructor() {\n      super('...args', 'return this.__self__.__call__(...args)');\n      var self = this.bind(this);\n      this.__self__ = self;\n      return self;\n    }\n\n    // Example `__call__` method.\n    __call__(...args) {\n      return handler(...args);\n    }\n  };\nUtil.isatty = async fd => {\n  let ret;\n  for(let module of ['os', 'tty']) {\n    try {\n      ret = await import(module).then(mod => mod.isatty(fd));\n    } catch(err) {\n      ret = undefined;\n    }\n    if(ret !== undefined) break;\n  }\n  return ret;\n};\nUtil.ttyGetWinSize = (fd = 1) => {\n  let ret;\n  if(Util.getPlatform() == 'quickjs') return import('os').then(m => m.ttyGetWinSize(fd));\n  const stream = process[['stdin', 'stdout', 'stderr'][fd] || 'stdout'];\n  return new Promise(stream.cols ? (resolve, reject) => resolve([stream.cols, stream.rows]) : (resolve, reject) => resolve(stream?.getWindowSize?.()));\n};\nUtil.ttySetRaw = globalThis.os\n  ? os.ttySetRaw\n  : (fd = 0, mode = true) => {\n      let ret;\n      const stream = typeof fd == 'number' ? process[['stdin', 'stdout', 'stderr'][fd] || 'stdin'] : fd;\n      return stream?.setRawMode?.(mode);\n    };\nUtil.stdio = (fd, mode = true) => {\n  if(Util.getPlatform() == 'quickjs') return std[['in', 'out', 'err'][fd]];\n\n  let ret;\n  const stream = typeof fd == 'number' ? process[['stdin', 'stdout', 'stderr'][fd] || 'stdin'] : fd;\n  return stream?.setRawMode?.(mode);\n};\n\nUtil.signal = (num, act) => {\n  //console.log('Util.signal', { num, act });\n  let ret;\n  return import('os')\n    .then(m => {\n      if(typeof num == 'string' && num in m) num = m[num];\n\n      m.signal(num, act);\n    })\n    .catch(() => process.on(num, act));\n};\n\n/**\n * Measure the average execution time of a function\n * @param {Function} fn A function for performance measurement\n * @param {Array} args Function arguments\n * @param {Object} options\n * @returns {Number} Result in milliseconds\n */\nUtil.timeit = (fn, args = [], options = {}) => {\n  const valid = fn && typeof fn === 'function';\n  if(!valid) throw new Error('No function provided.');\n\n  const NS_PER_SEC = 1e9;\n  const { e, r, l, d } = { e: 1000, r: 1, l: true, d: 6, ...options };\n  const { hrtime } = Util;\n\n  let results = [];\n  for(let i = 0; i < r; i++) {\n    const start = hrtime();\n    for(let i = 1; i < e; i++) {\n      fn(args);\n    }\n    const diff = hrtime(start);\n    const elapsed = (diff[0] * NS_PER_SEC + diff[1]) * 0.000001;\n    const result = elapsed / e;\n    results.push(+(Math.round(result + `e+${6}`) + `e-${6}`));\n  }\n  const ms = results.reduce((p, c) => p + c, 0) / results.length;\n\n  if(l) {\n    console.log(`Function   : ${fn.name}()`);\n    console.log(`Average    : ${ms.toFixed(d)}ms`);\n    console.log(`Repetitions: ${r}`);\n    console.log(`Executions : ${e}`);\n  }\n\n  return ms;\n};\n\nUtil.lazyProperty = (obj, name, getter, opts = {}) => {\n  const replaceProperty = value => {\n    delete obj[name];\n    Object.defineProperty(obj, name, { value, ...opts });\n    return value;\n  };\n  const isAsync = Util.isAsync(getter);\n  //console.log(`Util.lazyProperty name=${name} isAsync=${isAsync} getter=${getter}`);\n\n  return Object.defineProperty(obj, name, {\n    get: isAsync\n      ? async function() {\n          return replaceProperty(await getter.call(obj, name));\n        }\n      : function() {\n          const value = getter.call(obj, name);\n          let isPromise = Util.isObject(value) && value instanceof Promise;\n          //console.log(`Util.lazyProperty`, name, value, isPromise);\n          if(isPromise) {\n            value.then(v => {\n              replaceProperty(v);\n              //console.log(`Util.lazyProperty resolved `, obj[name]);\n              return v;\n            });\n            return value;\n          }\n          return replaceProperty(value);\n        },\n    configurable: true,\n    ...opts\n  });\n};\n\nUtil.lazyProperties = (obj, gettersObj, opts = {}) => {\n  opts = { enumerable: false, ...opts };\n  for(let prop in gettersObj) {\n    // console.log('Util.lazyProperties', { prop });\n    Util.lazyProperty(obj, prop, gettersObj[prop], opts);\n  }\n  return obj;\n};\n\nUtil.calcHRTime = (f = (a, b) => a + b) =>\n  function(a, b) {\n    const ms = f(a[1], b[1]);\n    const div = Math.floor(ms / 1e9);\n    const rem = ms % 1e9;\n\n    return [f(a[0], b[0]) + div, rem];\n  };\nUtil.addHRTime = Util.calcHRTime((a, b) => a + b);\nUtil.subHRTime = Util.calcHRTime((a, b) => a - b);\n\nUtil.getHRTime = Util.memoize(() => {\n  const { now } = Util;\n\n  class HighResolutionTime extends Array {\n    constructor(secs = 0, nano = 0) {\n      super(2);\n      this[0] = secs;\n      this[1] = nano;\n      return Object.freeze(this);\n    }\n    static create(s, n) {\n      const sign = Math.sign(s * 1e3 + n * 1e-6);\n      s *= sign;\n      n *= sign;\n      if(n < 0) {\n        s--;\n        n += 1e9;\n      }\n      if(n >= 1e9) {\n        s++;\n        n -= 1e9;\n      }\n      return new HighResolutionTime(s * sign, n * sign);\n    }\n    /* prettier-ignore */ get seconds() {\n      const [s, n] = this;\n      return s + n * 1e-9;\n    }\n    /* prettier-ignore */ get milliseconds() {\n      const [s, n] = this;\n      return s * 1e3 + n * 1e-6;\n    }\n    /* prettier-ignore */ get nanoseconds() {\n      const [s, n] = this;\n      return s * 1e9 + n;\n    }\n    [Symbol.toPrimitive]() {\n      return this.milliseconds;\n    }\n    diff(o) {\n      let s = o[0] - this[0];\n      let n = o[1] - this[1];\n      return HighResolutionTime.create(s, n);\n    }\n    sum(o) {\n      /*     let s = o[0] + this[0];\n      let n = o[1] + this[1];*/\n      return HighResolutionTime.create(...Util.addHRTime(o, this));\n    }\n    since(o) {\n      let s = this[0] - o[0];\n      let n = this[1] - o[1];\n      return HighResolutionTime.create(s, n);\n    }\n    toString() {\n      let secs = this.seconds;\n      let msecs = (secs % 1) * 1e3;\n      let nsecs = (msecs % 1) * 1e6;\n      let ret = secs >= 1 ? `${Math.floor(secs)}s ` : '';\n      return ret + `${Util.roundTo(msecs, 0.001)}ms`;\n    }\n    inspect() {\n      return [this.seconds, this.nanoseconds];\n    }\n    [Util.inspectSymbol]() {\n      return [this.seconds, this.nanoseconds];\n      let secs = this.seconds;\n      let msecs = (secs % 1) * 1e3;\n      let nsecs = (msecs % 1) * 1e6;\n      return `${Math.floor(secs)}s ${Util.roundTo(msecs, 0.001)}ms`;\n      return `${Math.floor(secs)}s ${Math.floor(msecs)}ms ${Math.floor(nsecs)}ns`;\n    }\n  }\n  Util.getGlobalObject().HighResolutionTime = HighResolutionTime;\n\n  return Util.isAsync(now)\n    ? async function hrtime(previousTimestamp) {\n        var clocktime = await now();\n        var secs = Math.floor(Number(clocktime / 1000));\n        var nano = Math.floor(Number(clocktime % 1000) * 1e6);\n        let ts = new HighResolutionTime(secs, nano);\n        if(previousTimestamp) ts = ts.since(previousTimestamp);\n        return ts;\n      }\n    : function hrtime(previousTimestamp) {\n        var clocktime = now();\n        var secs = Math.floor(clocktime / 1000);\n        var nano = Math.floor((clocktime % 1000) * 1e6);\n        let ts = new HighResolutionTime(secs, nano);\n        if(previousTimestamp) ts = ts.since(previousTimestamp);\n        return ts;\n      };\n});\n\nUtil.lazyProperty(Util, 'animationFrame', () => {\n  const { now } = Util;\n\n  return (minDelay = 0) => {\n    if(minDelay <= 0) return new Promise(resolve => requestAnimationFrame(resolve));\n    const start = now();\n\n    return new Promise(resolve => {\n      requestAnimationFrame(animationFrame);\n\n      function animationFrame(t) {\n        if(t - start >= minDelay) resolve(t);\n        requestAnimationFrame(animationFrame);\n      }\n    });\n  };\n});\n\nUtil.lazyProperty(Util, 'hrtime', Util.getHRTime);\n//Util.startTime = Util.hrtime();\n\nUtil.lazyProperty(\n  Util,\n  'now',\n  (Util.getNow = () => {\n    const g = Util.getGlobalObject();\n    // polyfil for window.performance.now\n    var performance = g.performance || {};\n    var performanceNow = performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow;\n\n    if(performanceNow) {\n      //console.log('performanceNow', performanceNow);\n      performanceNow = performanceNow.bind(performance); //Util.bind(performanceNow, performance);\n    }\n\n    if(!performanceNow && g.cv?.getTickCount) {\n      const freq = g.cv.getTickFrequency() / 1000;\n      const mul = 1 / freq;\n      const getTicks = g.cv.getTickCount;\n      performanceNow = () => getTicks() * mul;\n    }\n    if(!performanceNow && Util.getPlatform() == 'quickjs') {\n      let gettime;\n      const CLOCK_REALTIME = 0;\n      const CLOCK_MONOTONIC = 1;\n      const CLOCK_MONOTONIC_RAW = 4;\n      const CLOCK_BOOTTIME = 7;\n\n      console.log('STACK:', Util.getCallerStack());\n\n      performanceNow = async function(clock = CLOCK_MONOTONIC_RAW) {\n        /* XXX \n        if(!gettime) {\n          const { dlsym, RTLD_DEFAULT, define, call } = await import('ffi.so');\n          const clock_gettime = dlsym(RTLD_DEFAULT, 'clock_gettime');\n          define('clock_gettime', clock_gettime, null, 'int', 'int', 'void *');\n          gettime = (clk_id, tp) => call('clock_gettime', clk_id, tp);\n        }*/\n        let data = new ArrayBuffer(16);\n\n        gettime(clock, data);\n        let [secs, nsecs] = new BigUint64Array(data, 0, 2);\n\n        let t = /*BigFloat*/ secs * 1e3 + nsecs * 1e-6;\n        return t;\n      };\n    }\n\n    if(!performanceNow) {\n      const getTime = Date.now;\n      performanceNow = getTime;\n    }\n\n    return performanceNow;\n  })\n);\n\nUtil.formatColumns = a => {\n  let maxWidth = a.reduce((acc, row, i) => row.map((col, j) => Math.max(acc[j] || 0, (col + '').length)));\n\n  // console.debug(maxWidth);\n\n  return a.map(row => row.map((col, j) => (col + '').padEnd(maxWidth[j])).join(' ')).join('\\n');\n};\n\nUtil.getPlatform = () =>\n  Util.tryCatch(\n    () => process.versions.node,\n    () => 'node',\n    Util.tryCatch(\n      () => globalThis.scriptArgs[0],\n      () => 'quickjs',\n      Util.tryCatch(\n        () => window.navigator,\n        () => 'browser',\n        () => undefined\n      )\n    )\n  );\n\nUtil.defineGetter(Util, 'platform', Util.memoize(Util.getPlatform));\nUtil.defineGetter(\n  Util,\n  'env',\n  Util.memoize(async () => {\n    let env = await Util.getEnvVars();\n    Util.define(Util, 'env', env);\n    return env;\n  })\n);\n\nUtil.colIndexes = line => [...line].reduce(([prev, cols], char, i) => [char, [...cols, ...(/\\s/.test(prev) && /[^\\s]/.test(char) ? [i] : [])]], [' ', []])[1];\n\nUtil.colSplit = (line, indexes) => {\n  indexes = indexes || Util.colIndexes(line);\n  let ret = [];\n  for(let i = 0; i < indexes.length; i++) {\n    let col = indexes[i];\n    let next = indexes[i + 1] || line.length;\n\n    ret.push(line.substring(col, next));\n  }\n  return ret;\n};\n\nUtil.bitsToNames = (flags, map = (name, flag) => name) => {\n  const entries = [...Util.entries(flags)];\n\n  return function* (value) {\n    for(let [name, flag] of entries) if(value & flag && (value & flag) == flag) yield map(name, flag);\n  };\n};\n\n// time a given function\nUtil.instrument = (\n  fn,\n  log = (duration, name, args, ret) => console.log(`function '${name}'` + (ret !== undefined ? ` {= ${Util.abbreviate(Util.escape(ret + ''))}}` : '') + ` timing: ${duration.toFixed(3)}ms`),\n  logInterval = 0 //1000\n) => {\n  const { now, hrtime, functionName } = Util;\n  let last = now();\n  let duration = 0,\n    times = 0;\n  const name = functionName(fn) || '<anonymous>';\n  const isAsync = Util.isAsync(fn) || Util.isAsync(now);\n  const doLog = isAsync\n    ? async (args, ret) => {\n        let t = await now();\n        if(t - (await last) >= logInterval) {\n          log(duration / times, name, args, ret);\n          duration = times = 0;\n          last = t;\n        }\n      }\n    : (args, ret) => {\n        let t = now();\n        //console.log('doLog', { passed: t - last, logInterval });\n        if(t - last >= logInterval) {\n          log(duration / times, name, args, ret);\n          duration = times = 0;\n          last = t;\n        }\n      };\n\n  return isAsync\n    ? async function(...args) {\n        const start = await now();\n        let ret = await fn.apply(this, args);\n        duration += (await now()) - start;\n        times++;\n        await doLog(args, ret);\n        return ret;\n      }\n    : function(...args) {\n        const start = hrtime();\n        let ret = fn.apply(this, args);\n        duration += now() - start;\n        times++;\n        doLog(args, ret);\n        return ret;\n      };\n};\n\nUtil.trace = (fn, enter, leave, both = () => {}) => {\n  enter = enter || ((name, args) => console.log(`function '${name}' (${args.map(arg => inspect(arg)).join(', ')}`));\n\n  leave = leave || ((name, ret) => console.log(`function '${name}'` + (ret !== undefined ? ` {= ${Util.abbreviate(Util.escape(ret + ''))}}` : '')));\n\n  let orig = fn;\n\n  return function(...args) {\n    let ret;\n    both('enter', fn.name, args);\n    enter(fn.name, args);\n\n    ret = orig.call(this, ...args);\n    both('leave', fn.name, ret);\n    leave(fn.name, ret);\n    return ret;\n  };\n};\n\nUtil.bind = function(f, ...args) {\n  let ret,\n    boundThis = args[0];\n\n  if(args.length < 2)\n    ret = function() {\n      if(new.target /*this instanceof ret*/) {\n        let ret_ = f.apply(this, arguments);\n        return Object(ret_) === ret_ ? ret_ : this;\n      } else return f.apply(boundThis, arguments);\n    };\n  else {\n    let boundArgs = new Array(args.length - 1);\n    for(let i = 1; i < args.length; i++) boundArgs[i - 1] = args[i];\n\n    ret = function() {\n      let boundLen = boundArgs.length,\n        args = new Array(boundLen + arguments.length),\n        i;\n      for(i = 0; i < boundLen; i++) args[i] = boundArgs[i];\n      for(i = 0; i < arguments.length; i++) args[boundLen + i] = arguments[i];\n\n      if(new.target /*this instanceof ret*/) {\n        let ret_ = f.apply(this, args);\n        return Object(ret_) === ret_ ? ret_ : this;\n      } else return f.apply(boundThis, args);\n    };\n  }\n\n  ret.prototype = f.prototype;\n  return ret;\n};\n\nUtil.bytesToUTF8 = function* (bytes) {\n  if(bytes instanceof ArrayBuffer) bytes = new Uint8Array(bytes);\n  let state = 0,\n    val = 0;\n  for(const c of bytes) {\n    if(state !== 0 && c >= 0x80 && c < 0xc0) {\n      val = (val << 6) | (c & 0x3f);\n      state--;\n      if(state === 0) yield val;\n    } else if(c >= 0xc0 && c < 0xf8) {\n      state = 1 + (c >= 0xe0) + (c >= 0xf0);\n      val = c & ((1 << (6 - state)) - 1);\n    } else {\n      state = 0;\n      yield c;\n    }\n  }\n};\nUtil.codePointsToString = codePoints => {\n  let s = '';\n  for(let c of codePoints) s += String.fromCodePoint(c);\n  return s;\n};\nUtil.bufferToString = b => Util.codePointsToString(Util.bytesToUTF8(b));\n\nUtil.levenshteinDistance = function levenshteinDistance(a, b) {\n  if(!a || !b) return (a || b).length;\n  var m = [];\n  for(var i = 0; i <= b.length; i++) {\n    m[i] = [i];\n    if(i === 0) continue;\n    for(var j = 0; j <= a.length; j++) {\n      m[0][j] = j;\n      if(j === 0) continue;\n      m[i][j] = b.charAt(i - 1) == a.charAt(j - 1) ? m[i - 1][j - 1] : Math.min(m[i - 1][j - 1] + 1, m[i][j - 1] + 1, m[i - 1][j] + 1);\n    }\n  }\n  return m[b.length][a.length];\n};\n\nUtil.padTrunc = (...args) => {\n  let [len, s] = args;\n  const end = len >= 0;\n  len = Math.abs(len);\n  if(args.length < 2) {\n    return (s, pad = ' ') => {\n      s = s + '';\n      len ??= s.length;\n      return s.length > len ? s.slice(0, len) : s['pad' + (end ? 'End' : 'Start')](len, pad);\n    };\n  } else {\n    s = s + '';\n    len ??= s.length;\n    return s.length > len ? s.slice(0, len) : s['pad' + (end ? 'End' : 'Start')](len, ' ');\n  }\n};\n\nUtil.setReadHandler = (fd, handler) => (Util.getPlatform() == 'quickjs' ? import('os').then(os => os.setReadHandler(fd, handler)) : fd.on('data', handler));\n\nexport default Util();\n",
			"file": "lib/util.js",
			"file_size": 185825,
			"file_write_time": 133252621639735624,
			"settings":
			{
				"buffer_size": 185808,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					6,
					1,
					"insert",
					{
						"characters": "p"
					},
					"AQAAAA0WAAAAAAAADhYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAANFgAAAAAAAA0WAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"left_delete",
					null,
					"AQAAAA0WAAAAAAAADRYAAAAAAAABAAAAcA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAOFgAAAAAAAA4WAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/geom/pointList.js",
			"settings":
			{
				"buffer_size": 13290,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					37,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAANk2AAAAAAAA2jYAAAAAAAAAAAAA2jYAAAAAAADaNgAAAAAAAPABAAAKLyppZighVXRpbC5pc0Jyb3dzZXIoKSkgewogIGxldCBjID0gVXRpbC5jb2xvcmluZygpOwogIGxldCBzeW0gPSBTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpOwogIFBvaW50TGlzdC5wcm90b3R5cGVbc3ltXSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGAke2MudGV4dCgnUG9pbnRMaXN0JywgMSwgMzEpfSR7Yy50ZXh0KCcoJywgMSwgMzYpfSR7CiAgICAgIGMudGV4dCh0aGlzLmdldExlbmd0aCgpLCAxLCAzNSkgKyBjLmNvZGUoMSwgMzYpCiAgICB9KSBbXG4gICR7dGhpcy5tYXAoKHsgeCwgeSB9IC8vIFV0aWwudG9Tb3VyY2UocG9pbnQsIHtjb2xvcnM6IHRydWUgfSkgfHwgcG9pbnRbc3ltXSgpIHx8CiAgICApID0+IFV0aWwuaW5zcGVjdCh7IHgsIHkgfSwgeyBtdWx0aWxpbmU6IGZhbHNlLCBzcGFjaW5nOiAnICcgfSkpLmpvaW4oJyxcbiAgJyl9XG4ke2MudGV4dCgnXScsCiAgICAgIDEsCiAgICAgIDM2CiAgICApfWA7CiAgfTsKfSov",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADZNgAAAAAAAMk4AAAAAAAAAAAAAAAA8L8"
				],
				[
					50,
					3,
					"right_delete",
					null,
					"AwAAAHwAAAAAAAAAfAAAAAAAAAAIAAAAY29sb3Jpbmd8AAAAAAAAAHwAAAAAAAAAAQAAACx8AAAAAAAAAHwAAAAAAAAAAQAAACA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB8AAAAAAAAAIQAAAAAAAAAAAAAAAAA8L8"
				],
				[
					60,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABkOgAAaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL3BvaW50LmpzJzsKaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4vcmVjdC5qcyc7CmltcG9ydCB7IExpbmUgfSBmcm9tICcuL2xpbmUuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyLCBpbW11dGFibGVDbGFzcywgaW5zcGVjdCwgaW5zcGVjdFN5bWJvbCwgaXNCcm93c2VyLCB0eXBlcywgaXNPYmplY3QsIHJvdW5kVG8sIHRvU291cmNlIH0gZnJvbSAnLi4vbWlzYy5qcyc7CgpleHBvcnQgY2xhc3MgUG9pbnRMaXN0IGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgIGxldCBbcG9pbnRzLCB0Zm4gPSAoLi4uYXJncykgPT4gbmV3IFBvaW50KC4uLmFyZ3MpXSA9IGFyZ3M7CgogICAgc3VwZXIoKTsKICAgIGNvbnN0IGJhc2UgPSBBcnJheTsKICAgIGxldCByZXQgPSBuZXcudGFyZ2V0ID8gdGhpcyA6IFtdOwoKICAgIGlmKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgfHwgdHlwZXMuaXNJdGVyYWJsZShhcmdzWzBdKSkgYXJncyA9IFsuLi5hcmdzWzBdXTsKCiAgICBpZih0eXBlb2YgcG9pbnRzID09PSAnc3RyaW5nJykgewogICAgICBjb25zdCBtYXRjaGVzID0gWy4uLnBvaW50cy5tYXRjaEFsbCgvWy0uMC05LF0rL2cpXTsKICAgICAgLy9jb25zb2xlLmxvZygibWF0Y2hlczoiLG1hdGNoZXMpOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGNvb3JkcyA9IChtYXRjaGVzW2ldWzBdICsgJycpLnNwbGl0KC8sL2cpLm1hcChuID0+ICtuKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhgbWF0Y2hlc1ske2l9XTpgLG1hdGNoZXNbaV0sIGNvb3Jkcyk7CiAgICAgICAgcmV0LnB1c2godGZuKC4uLmNvb3JkcykpOwogICAgICB9CiAgICB9IGVsc2UgaWYoYXJnc1swXSAmJiBQb2ludChhcmdzWzBdKSkgewogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgcmV0LnB1c2goUG9pbnQoYXJnc1tpXSkpOwogICAgfSBlbHNlIGlmKGFyZ3MubGVuZ3RoICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGFyZ3NbMF0gPT0gJ251bWJlcicpIHsKICAgICAgLy8mJywgYXJncyk7CiAgICAgIHdoaWxlKGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgIGxldCBjb29yZHMgPSBhcmdzLnNwbGljZSgwLCAyKTsKICAgICAgICByZXQucHVzaChQb2ludChjb29yZHMpKTsKICAgICAgfQogICAgfQogICAgaWYoIShyZXQgaW5zdGFuY2VvZiBQb2ludExpc3QpKSB7CiAgICAgIGxldCBwcm90byA9IFBvaW50TGlzdC5wcm90b3R5cGU7CiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihyZXQsIHByb3RvKTsKICAgIH0KICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFBvaW50TGlzdCkpIHJldHVybiByZXQ7CiAgfQp9ClBvaW50TGlzdC5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdQb2ludExpc3QnOwoKLypkZWZpbmVHZXR0ZXIoUG9pbnRMaXN0LCBTeW1ib2wuc3BlY2llcywgKCkgPT4gUG9pbnRMaXN0KTsKZGVmaW5lR2V0dGVyKFBvaW50TGlzdC5wcm90b3R5cGUsIFN5bWJvbC5zcGVjaWVzLCAoKSA9PiBQb2ludExpc3QpOyovCmRlZmluZShQb2ludExpc3QsIHsKICAvKiBwcmV0dGllci1pZ25vcmUgKi8gZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7CiAgICByZXR1cm4gUG9pbnRMaXN0OwogIH0KfSk7CgpQb2ludExpc3QucHJvdG90eXBlW1N5bWJvbC5pc0NvbmNhdFNwcmVhZGFibGVdID0gdHJ1ZTsKUG9pbnRMaXN0LnByb3RvdHlwZS5yb3RhdGVSaWdodCA9IGZ1bmN0aW9uKG4pIHsKICB0aGlzLnVuc2hpZnQoLi4udGhpcy5zcGxpY2UobiAlIHRoaXMubGVuZ3RoLCB0aGlzLmxlbmd0aCkpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnJvdGF0ZUxlZnQgPSBmdW5jdGlvbihuKSB7CiAgcmV0dXJuIHRoaXMucm90YXRlUmlnaHQodGhpcy5sZW5ndGggLSAobiAlIHRoaXMubGVuZ3RoKSk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24obikgewogIGlmKG4gPCAwKSByZXR1cm4gdGhpcy5yb3RhdGVMZWZ0KC1uKTsKICBpZihuID4gMCkgcmV0dXJuIHRoaXMucm90YXRlUmlnaHQobik7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICB3aGlsZShhcmdzLmxlbmd0aCA+IDApIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgbmV3IFBvaW50KGFyZ3MpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oLi4uYXJncykgewogIGxldCBwb2ludHMgPSBbXTsKICB3aGlsZShhcmdzLmxlbmd0aCA+IDApIHBvaW50cy5wdXNoKG5ldyBQb2ludChhcmdzKSk7CiAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIDAsIDAsIC4uLnBvaW50cyk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUubGVuZ3RoID0gMDsKUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbigpIHsKICByZXR1cm4gdGhpcy5sZW5ndGg7Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludExpc3QucHJvdG90eXBlLCAnc2l6ZScsIHsKICBnZXQoKSB7CiAgICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICB9Cn0pOwpQb2ludExpc3QucHJvdG90eXBlLmF0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICByZXR1cm4gdGhpc1sraW5kZXhdOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnNwbGljZSA9IGZ1bmN0aW9uKCkgewogIGxldCBhcmdzID0gWy4uLmFyZ3VtZW50c107CiAgY29uc3Qgc3RhcnQgPSBhcmdzLnNoaWZ0KCk7CiAgY29uc3QgcmVtb3ZlID0gYXJncy5zaGlmdCgpOwogIHJldHVybiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHRoaXMsIFtzdGFydCwgcmVtb3ZlLCAuLi5hcmdzLm1hcChhcmcgPT4gKGFyZyBpbnN0YW5jZW9mIFBvaW50ID8gYXJnIDogbmV3IFBvaW50KGFyZykpKV0pOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwpQb2ludExpc3QucHJvdG90eXBlLnJlbW92ZVNlZ21lbnQgPSBmdW5jdGlvbihpbmRleCkgewogIGxldCBpbmRleGVzID0gW1BvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXggLSAxKSwgUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXguY2FsbCh0aGlzLCBpbmRleCksIFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXggKyAxKV07CiAgbGV0IGxpbmVzID0gaW5kZXhlcy5tYXAoaSA9PiBQb2ludExpc3QucHJvdG90eXBlLmdldExpbmUuY2FsbCh0aGlzLCBpKSk7CiAgbGV0IHBvaW50ID0gTGluZS5pbnRlcnNlY3QobGluZXNbMF0sIGxpbmVzWzJdKTsKICBpZihwb2ludCkgewogICAgUG9pbnRMaXN0LnByb3RvdHlwZS5zcGxpY2UuY2FsbCh0aGlzLCAwLCAyLCBuZXcgUG9pbnQocG9pbnQpKTsKICB9Cn07CgovKlBvaW50TGlzdC5wcm90b3R5cGUudG9QYXRoID0gZnVuY3Rpb24ob3B0aW9ucyA9IHt9KSB7CiAgY29uc3QgeyByZWxhdGl2ZSA9IGZhbHNlLCBjbG9zZSA9IGZhbHNlLCBwcmVjaXNpb24gPSAwLjAwMSB9ID0gb3B0aW9uczsKICBsZXQgb3V0ID0gJyc7CiAgY29uc3QgcG9pbnQgPSByZWxhdGl2ZSA/IChpKSA9PiAoaSA+IDAgPyBQb2ludC5kaWZmKFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBpKSwgUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGkgLSAxKSkgOiBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSkpIDogKGkpID0+IFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBpKTsKICBjb25zdCBjbWQgPSAoaSkgPT4gKGkgPT0gMCA/ICdNJyA6ICdMJ1tyZWxhdGl2ZSA/ICd0b0xvd2VyQ2FzZScgOiAndG9VcHBlckNhc2UnXSgpKTsKICBjb25zdCBsZW4gPSBQb2ludExpc3QucHJvdG90eXBlLmdldExlbmd0aC5jYWxsKHRoaXMpOwogIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgb3V0ICs9IGNtZChpKSArIHJvdW5kVG8ocG9pbnQoaSkueCwgcHJlY2lzaW9uKSArICcsJyArIHJvdW5kVG8ocG9pbnQoaSkueSwgcHJlY2lzaW9uKSArICcgJzsKICB9CiAgaWYoY2xvc2UpIG91dCArPSAnWic7CiAgcmV0dXJuIG91dDsKfTsqLwpQb2ludExpc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7CiAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdOwogIGxldCBwb2ludHMgPSBQb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gUG9pbnQucHJvdG90eXBlLmNsb25lLmNhbGwocCkpOwogIHJldHVybiBuZXcgY3Rvcihwb2ludHMpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvUG9sYXIgPSBmdW5jdGlvbih0Zm4pIHsKICBsZXQgdCA9IHR5cGVvZiB0Zm4gPT0gJ2Z1bmN0aW9uJyA/IHRmbiA6ICh4LCB5KSA9PiAoeyB4IC8qOiAoeCAqIDE4MCkgLyBNYXRoLlBJKi8sIHkgfSk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiB7CiAgICBjb25zdCBhbmdsZSA9IFBvaW50LnByb3RvdHlwZS50b0FuZ2xlLmNhbGwocCk7CiAgICByZXR1cm4gbmV3IFBvaW50KHQoYW5nbGUsIFBvaW50LnByb3RvdHlwZS5kaXN0YW5jZS5jYWxsKHApKSk7CiAgfSk7CgogIGxldCByZXQgPSBbXTsKICByZXQuc3BsaWNlLmFwcGx5KHJldCwgWwogICAgMCwKICAgIHJldC5sZW5ndGgsCiAgICAuLi5Qb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgICBjb25zdCBhbmdsZSA9IFBvaW50LnByb3RvdHlwZS50b0FuZ2xlLmNhbGwocCk7CiAgICAgIHJldHVybiB0KGFuZ2xlLCBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbChwKSk7CiAgICB9KQogIF0pOwogIHJldHVybiByZXQ7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuZnJvbVBvbGFyID0gZnVuY3Rpb24odGZuKSB7CiAgLy8gIGxldCByZXQgPSBuZXcgUG9pbnRMaXN0KCk7CiAgbGV0IHQgPSB0eXBlb2YgdGZuID09ICdmdW5jdGlvbicgPyB0Zm4gOiAoeCwgeSkgPT4gKHsgeCAvKjogKHggKiBNYXRoLlBJKSAvIDE4MCovLCB5IH0pOwogIHJldHVybiBQb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgbGV0IHIgPSB0KHAueCwgcC55KTsKICAgIHJldHVybiBuZXcgUG9pbnQoKS5mcm9tQW5nbGUoci54LCByLnkpOwogIH0pOwoKICByZXQuc3BsaWNlLmFwcGx5KHJldCwgWwogICAgMCwKICAgIHJldC5sZW5ndGgsCiAgICAuLi5Qb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgICBsZXQgciA9IHQocC54LCBwLnkpOwogICAgICByZXR1cm4gUG9pbnQucHJvdG90eXBlLmZyb21BbmdsZS5jYWxsKHIueCwgci55KTsKICAgIH0pCiAgXSk7CiAgcmV0dXJuIHJldDsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oY3R4LCBjbG9zZSA9IGZhbHNlKSB7CiAgY29uc3QgZmlyc3QgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgMCk7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBjdHgudG8oZmlyc3QueCwgZmlyc3QueSk7CiAgZm9yKGxldCBpID0gMTsgaSA8IGxlbjsgaSsrKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBpKTsKICAgIGN0eC5saW5lKHgsIHkpOwogIH0KICBpZihjbG9zZSkgY3R4LmxpbmUoZmlyc3QueCwgZmlyc3QueSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuYXJlYSA9IGZ1bmN0aW9uKCkgewogIGxldCBhcmVhID0gMDsKICBsZXQgaTsKICBsZXQgajsKICBsZXQgcG9pbnQxOwogIGxldCBwb2ludDI7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBmb3IoaSA9IDAsIGogPSBsZW4gLSAxOyBpIDwgbGVuOyBqID0gaSwgaSArPSAxKSB7CiAgICBwb2ludDEgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBwb2ludDIgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaik7CiAgICBhcmVhICs9IHBvaW50MS54ICogcG9pbnQyLnk7CiAgICBhcmVhIC09IHBvaW50MS55ICogcG9pbnQyLng7CiAgfQogIGFyZWEgLz0gMjsKICByZXR1cm4gYXJlYTsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5jZW50cm9pZCA9IGZ1bmN0aW9uKCkgewogIGxldCB4ID0gMDsKICBsZXQgeSA9IDA7CiAgbGV0IGk7CiAgbGV0IGo7CiAgbGV0IGY7CiAgbGV0IHBvaW50MTsKICBsZXQgcG9pbnQyOwogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgZm9yKGkgPSAwLCBqID0gbGVuIC0gMTsgaSA8IGxlbjsgaiA9IGksIGkgKz0gMSkgewogICAgcG9pbnQxID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGkpOwogICAgcG9pbnQyID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGopOwogICAgZiA9IHBvaW50MS54ICogcG9pbnQyLnkgLSBwb2ludDIueCAqIHBvaW50MS55OwogICAgeCArPSAocG9pbnQxLnggKyBwb2ludDIueCkgKiBmOwogICAgeSArPSAocG9pbnQxLnkgKyBwb2ludDIueSkgKiBmOwogIH0KICBmID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hcmVhLmNhbGwodGhpcykgKiA2OwogIHJldHVybiBuZXcgUG9pbnQoeCAvIGYsIHkgLyBmKTsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5hdmcgPSBmdW5jdGlvbigpIHsKICBsZXQgcmV0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLCAoYWNjLCBwKSA9PiBhY2MuYWRkKHApLCBuZXcgUG9pbnQoKSk7CiAgcmV0dXJuIHJldC5kaXYoUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKSk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuYmJveCA9IGZ1bmN0aW9uIEJCb3goCiAgcHJvdG8gPSB7CiAgICBjb25zdHJ1Y3RvcjogUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LAogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBge3gxOiR7KHRoaXMueDEgKyAnJykucGFkU3RhcnQoNCwgJyAnKX0seDI6JHsodGhpcy54MiArICcnKS5wYWRTdGFydCg0LCAnICcpfSx5MTokeyh0aGlzLnkxICsgJycpLnBhZFN0YXJ0KDQsICcgJyl9LHkyOiR7KHRoaXMueTIgKyAnJykucGFkU3RhcnQoNCwgJyAnKX19YDsKICAgIH0KICB9CikgewogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgaWYoIWxlbikgcmV0dXJuIHt9OwogIGNvbnN0IGZpcnN0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIDApOwogIGxldCByZXQgPSB7CiAgICB4MTogZmlyc3QueCwKICAgIHgyOiBmaXJzdC54LAogICAgeTE6IGZpcnN0LnksCiAgICB5MjogZmlyc3QueQogIH07CgogIGZvcihsZXQgaSA9IDE7IGkgPCBsZW47IGkrKykgewogICAgY29uc3QgeyB4LCB5IH0gPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBpZih4IDwgcmV0LngxKSByZXQueDEgPSB4OwogICAgaWYoeCA+IHJldC54MikgcmV0LngyID0geDsKICAgIGlmKHkgPCByZXQueTEpIHJldC55MSA9IHk7CiAgICBpZih5ID4gcmV0LnkyKSByZXQueTIgPSB5OwogIH0KICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgcHJvdG8pOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnJlY3QgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlY3QoUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcykpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnhyYW5nZSA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IGJib3ggPSBQb2ludExpc3QucHJvdG90eXBlLmJib3guY2FsbCh0aGlzKTsKICByZXR1cm4gW2Jib3gueDEsIGJib3gueDJdOwp9OwpQb2ludExpc3QucHJvdG90eXBlLm5vcm1hbGl6ZVggPSBmdW5jdGlvbihuZXdWYWwgPSB4ID0+IHgpIHsKICBjb25zdCB4cmFuZ2UgPSBQb2ludExpc3QucHJvdG90eXBlLnhyYW5nZS5jYWxsKHRoaXMpOwogIGNvbnN0IHhkaWZmID0geHJhbmdlWzFdIC0geHJhbmdlWzBdOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIChwLCBpLCBsKSA9PiB7CiAgICBsW2ldLnggPSBuZXdWYWwoKGxbaV0ueCAtIHhyYW5nZVswXSkgLyB4ZGlmZik7CiAgfSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUueXJhbmdlID0gZnVuY3Rpb24oKSB7CiAgY29uc3QgYmJveCA9IFBvaW50TGlzdC5wcm90b3R5cGUuYmJveC5jYWxsKHRoaXMpOwogIHJldHVybiBbYmJveC55MSwgYmJveC55Ml07Cn07ClBvaW50TGlzdC5wcm90b3R5cGUubm9ybWFsaXplWSA9IGZ1bmN0aW9uKG5ld1ZhbCA9IHkgPT4geSkgewogIGNvbnN0IHlyYW5nZSA9IFBvaW50TGlzdC5wcm90b3R5cGUueXJhbmdlLmNhbGwodGhpcyk7CiAgY29uc3QgeWRpZmYgPSB5cmFuZ2VbMV0gLSB5cmFuZ2VbMF07CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgKHAsIGksIGwpID0+IHsKICAgIGxbaV0ueSA9IG5ld1ZhbCgobFtpXS55IC0geXJhbmdlWzBdKSAvIHlkaWZmKTsKICB9KTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5ib3VuZGluZ1JlY3QgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlY3QoUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcykpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHgsIHkpIHsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUubW92ZS5jYWxsKGl0LCB4LCB5KSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24obSkgewogIGlmKGlzT2JqZWN0KG0pICYmIHR5cGVvZiBtLnRvTWF0cml4ID09ICdmdW5jdGlvbicpIG0gPSBtLnRvTWF0cml4KCk7CiAgaWYoaXNPYmplY3QobSkgJiYgdHlwZW9mIG0udHJhbnNmb3JtUG9pbnQgPT0gJ2Z1bmN0aW9uJykgewogICAgdGhpcy5mb3JFYWNoKHAgPT4gbS50cmFuc2Zvcm1Qb2ludChwKSk7CiAgICByZXR1cm4gdGhpczsKICB9CiAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIFBvaW50LnByb3RvdHlwZS50cmFuc2Zvcm0uY2FsbCh0aGlzW2ldLCBtKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24ocHJlZCkgewogIGxldCByZXQgPSBuZXcgUG9pbnRMaXN0KCk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgKHAsIGksIGwpID0+IHByZWQocCwgaSwgbCkgJiYgcmV0LnB1c2gobmV3IFBvaW50KGxbaV0pKSk7CiAgcmV0dXJuIHJldDsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXggPSBmdW5jdGlvbihpbmRleCkgewogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgcmV0dXJuIChpbmRleCA8IDAgPyBsZW4gKyBpbmRleCA6IGluZGV4KSAlIGxlbjsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lID0gZnVuY3Rpb24oaW5kZXgpIHsKICBsZXQgYSA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXgpOwogIGxldCBiID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXguY2FsbCh0aGlzLCBpbmRleCArIDEpOwogIHJldHVybiBbUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGEpLCBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgYildOwp9OwpQb2ludExpc3QucHJvdG90eXBlLmxpbmVzID0gZnVuY3Rpb24oY2xvc2VkID0gZmFsc2UpIHsKICBjb25zdCBwb2ludHMgPSB0aGlzOwogIGNvbnN0IG4gPSBwb2ludHMubGVuZ3RoIC0gKGNsb3NlZCA/IDAgOiAxKTsKICBjb25zdCBpdGVyYWJsZU9iaiA9IHsKICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgICBsZXQgc3RlcCA9IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmV4dCgpIHsKICAgICAgICAgIGxldCB2YWx1ZTsKICAgICAgICAgIGxldCBkb25lID0gc3RlcCA+PSBuOwogICAgICAgICAgaWYoIWRvbmUpIHsKICAgICAgICAgICAgdmFsdWUgPSBuZXcgTGluZShwb2ludHNbc3RlcF0sIHBvaW50c1soc3RlcCArIDEpICUgcG9pbnRzLmxlbmd0aF0pOwogICAgICAgICAgICBzdGVwKys7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgZG9uZSB9OwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9OwogIHJldHVybiBpdGVyYWJsZU9iajsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24ocHJlZCkgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKHRoaXMsIHByZWQgfHwgKChhLCBiKSA9PiBQb2ludC5wcm90b3R5cGUudmFsdWVPZi5jYWxsKGEpIC0gUG9pbnQucHJvdG90eXBlLnZhbHVlT2YuY2FsbChiKSkpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oc2VwID0gJywnLCBwcmVjKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCBwb2ludCA9PiAoUG9pbnQucHJvdG90eXBlLnRvU3RyaW5nID8gUG9pbnQucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocG9pbnQsIHByZWMsIHNlcCkgOiBwb2ludCArICcnKSkuam9pbignICcpOwp9OwpQb2ludExpc3QucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSBmdW5jdGlvbihzZXAgPSAnLCcsIHByZWMpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcAogICAgLmNhbGwodGhpcywgcG9pbnQgPT4gcG9pbnQucm91bmQocHJlYykpCiAgICAubWFwKHBvaW50ID0+IGAke3BvaW50Lnh9JHtzZXB9JHtwb2ludC55fWApCiAgICAuam9pbignICcpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvUGF0aCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgKHBvaW50LCBpKSA9PiBgJHtpID4gMCA/ICdMJyA6ICdNJ30ke3BvaW50fWApLmpvaW4oJyAnKTsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMsIChhY2MsIHBvaW50LCBpKSA9PiAoYWNjID8gYWNjICsgJyAnIDogJycpICsgYCR7YWNjID8gJ0wnIDogJ00nfSR7cG9pbnR9YCk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUudG9Tb3VyY2UgPSBmdW5jdGlvbihvcHRzID0ge30pIHsKICBpZihvcHRzLmFzU3RyaW5nKSByZXR1cm4gYG5ldyBQb2ludExpc3QoIiR7dGhpcy50b1N0cmluZyhvcHRzKX0iKWA7CgogIGxldCBmbiA9IG9wdHMuYXNBcnJheQogICAgPyBwID0+IGBbJHtwLnh9LCR7cC55fV1gCiAgICA6IG9wdHMucGxhaW5PYmoKICAgID8gcCA9PgogICAgICAgIFBvaW50LnRvU291cmNlKHAsIHsKICAgICAgICAgIHNwYWNlOiAnJywKICAgICAgICAgIHBhZGRpbmc6ICcgJywKICAgICAgICAgIHNlcGFyYXRvcjogJywnCiAgICAgICAgfSkKICAgIDogcG9pbnQgPT4KICAgICAgICBQb2ludC5wcm90b3R5cGUudG9Tb3VyY2UuY2FsbChwb2ludCwgewogICAgICAgICAgLi4ub3B0cywKICAgICAgICAgIHBsYWluT2JqOiB0cnVlCiAgICAgICAgfSk7CiAgcmV0dXJuICduZXcgUG9pbnRMaXN0KFsnICsgUG9pbnRMaXN0LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCBmbikuam9pbignLCcpICsgJ10pJzsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwdCkgewogIGlmKCEocHQgaW5zdGFuY2VvZiBQb2ludCkpIHB0ID0gbmV3IFBvaW50KC4uLmFyZ3VtZW50cyk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLmFkZC5jYWxsKGl0LCBwdCkpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnN1bSA9IGZ1bmN0aW9uKHB0KSB7CiAgbGV0IHJldCA9IFBvaW50TGlzdC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTsKICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5hZGQuYXBwbHkocmV0LCBhcmd1bWVudHMpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnN1YiA9IGZ1bmN0aW9uKHB0KSB7CiAgaWYoIShwdCBpbnN0YW5jZW9mIFBvaW50KSkgcHQgPSBuZXcgUG9pbnQoLi4uYXJndW1lbnRzKTsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUuc3ViLmNhbGwoaXQsIHB0KSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuZGlmZiA9IGZ1bmN0aW9uKHB0KSB7CiAgbGV0IHJldCA9IFBvaW50TGlzdC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTsKICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5zdWIuYXBwbHkocmV0LCBhcmd1bWVudHMpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uKHB0KSB7CiAgaWYodHlwZW9mIHB0ID09ICdudW1iZXInKSBwdCA9IG5ldyBQb2ludCh7IHg6IHB0LCB5OiBwdCB9KTsKICBpZighKHB0IGluc3RhbmNlb2YgUG9pbnQpKSBwdCA9IG5ldyBQb2ludCguLi5hcmd1bWVudHMpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5tdWwuY2FsbChpdCwgcHQpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5wcm9kID0gZnVuY3Rpb24ocHQpIHsKICBsZXQgcmV0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpOwogIHJldHVybiBQb2ludExpc3QucHJvdG90eXBlLm11bC5hcHBseShyZXQsIGFyZ3VtZW50cyk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24ocHQpIHsKICBpZih0eXBlb2YgcHQgPT0gJ251bWJlcicpIHB0ID0gbmV3IFBvaW50KHsgeDogcHQsIHk6IHB0IH0pOwogIGlmKCEocHQgaW5zdGFuY2VvZiBQb2ludCkpIHB0ID0gbmV3IFBvaW50KC4uLmFyZ3VtZW50cyk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLmRpdi5jYWxsKGl0LCBwdCkpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnF1b3QgPSBmdW5jdGlvbihwdCkgewogIGxldCByZXQgPSBQb2ludExpc3QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUuZGl2LmFwcGx5KHJldCwgYXJndW1lbnRzKTsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5yb3VuZCA9IGZ1bmN0aW9uKHByZWMsIGRpZ2l0cywgdHlwZSkgewogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5yb3VuZC5jYWxsKGl0LCBwcmVjLCBkaWdpdHMsIHR5cGUpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5jZWlsID0gZnVuY3Rpb24ocHJlYykgewogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5jZWlsLmNhbGwoaXQsIHByZWMpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5mbG9vciA9IGZ1bmN0aW9uKHByZWMpIHsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUuZmxvb3IuY2FsbChpdCwgcHJlYykpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvTWF0cml4ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCAoeyB4LCB5IH0pID0+IE9iamVjdC5mcmVlemUoW3gsIHldKSk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnRvUG9pbnRzID0gZnVuY3Rpb24oY3RvciA9IEFycmF5Lm9mKSB7CiAgcmV0dXJuIGN0b3IoLi4udGhpcyk7Cn07IApQb2ludExpc3QucHJvdG90eXBlW2luc3BlY3RTeW1ib2xdID0gZnVuY3Rpb24oZGVwdGgsIG9wdGlvbnMpIHsKICAvL2NvbnN0IG9iaiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLnJlZHVjZSgoYWNjLG4pID0+ICh7IC4uLmFjYywgW25dOiB0aGlzW25dIH0pLCB7fSk7CiAgY29uc3Qgb2JqID0gQXJyYXkuZnJvbSh0aGlzKTsgLy9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKS5yZWR1Y2UoKGFjYyxuKSA9PiAoeyAuLi5hY2MsIFtuXTogdGhpc1tuXSB9KSwge30pOwogIHJldHVybiAoCiAgICBgXHgxYlsxOzMxbSR7Y2xhc3NOYW1lKHRoaXMpfVx4MWJbMDszNm1gICsgb2JqLnJlZHVjZSgoYWNjLCB7IHgsIHkgfSkgPT4gYWNjICsgYCAke3h9LCR7eX1gLCAnJykgKyBgXHgxYlswbWAKICAgIC8vIGluc3BlY3QoT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iaiwgUG9pbnRMaXN0LnByb3RvdHlwZSksIGRlcHRoLCBvcHRpb25zKQogICk7Cn07Cgpmb3IobGV0IG5hbWUgb2YgWydwdXNoJywgJ3NwbGljZScsICdjbG9uZScsICdhcmVhJywgJ2NlbnRyb2lkJywgJ2F2ZycsICdiYm94JywgJ3JlY3QnLCAneHJhbmdlJywgJ3lyYW5nZScsICdib3VuZGluZ1JlY3QnXSkgewogIFBvaW50TGlzdFtuYW1lXSA9IHBvaW50cyA9PiBQb2ludExpc3QucHJvdG90eXBlW25hbWVdLmNhbGwocG9pbnRzKTsKfQoKLypkZWZpbmUoUG9pbnRMaXN0LCB7CiAgZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7CiAgICByZXR1cm4gUG9pbnRMaXN0OwogIH0KfSk7Ki8KCmV4cG9ydCBjb25zdCBJbW11dGFibGVQb2ludExpc3QgPSBpbW11dGFibGVDbGFzcyhQb2ludExpc3QpOwovL2RlZmluZUdldHRlcihJbW11dGFibGVQb2ludExpc3QsIFN5bWJvbC5zcGVjaWVzLCAoKSA9PiBJbW11dGFibGVQb2ludExpc3QpOwoAAAAAAAAAAGM6AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABkOgAAAAAAAGQ6AAAAAAAAAAAAAAAAXEA"
				],
				[
					71,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABjOgAAaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL3BvaW50LmpzJzsKaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4vcmVjdC5qcyc7CmltcG9ydCB7IExpbmUgfSBmcm9tICcuL2xpbmUuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyLCBpbW11dGFibGVDbGFzcywgaW5zcGVjdCwgaW5zcGVjdFN5bWJvbCwgaXNCcm93c2VyLCB0eXBlcywgaXNPYmplY3QsIHJvdW5kVG8sIHRvU291cmNlIH0gZnJvbSAnLi4vbWlzYy5qcyc7CgpleHBvcnQgY2xhc3MgUG9pbnRMaXN0IGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgIGxldCBbcG9pbnRzLCB0Zm4gPSAoLi4uYXJncykgPT4gbmV3IFBvaW50KC4uLmFyZ3MpXSA9IGFyZ3M7CgogICAgc3VwZXIoKTsKICAgIGNvbnN0IGJhc2UgPSBBcnJheTsKICAgIGxldCByZXQgPSBuZXcudGFyZ2V0ID8gdGhpcyA6IFtdOwoKICAgIGlmKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgfHwgdHlwZXMuaXNJdGVyYWJsZShhcmdzWzBdKSkgYXJncyA9IFsuLi5hcmdzWzBdXTsKCiAgICBpZih0eXBlb2YgcG9pbnRzID09PSAnc3RyaW5nJykgewogICAgICBjb25zdCBtYXRjaGVzID0gWy4uLnBvaW50cy5tYXRjaEFsbCgvWy0uMC05LF0rL2cpXTsKICAgICAgLy9jb25zb2xlLmxvZygibWF0Y2hlczoiLG1hdGNoZXMpOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGNvb3JkcyA9IChtYXRjaGVzW2ldWzBdICsgJycpLnNwbGl0KC8sL2cpLm1hcChuID0+ICtuKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhgbWF0Y2hlc1ske2l9XTpgLG1hdGNoZXNbaV0sIGNvb3Jkcyk7CiAgICAgICAgcmV0LnB1c2godGZuKC4uLmNvb3JkcykpOwogICAgICB9CiAgICB9IGVsc2UgaWYoYXJnc1swXSAmJiBQb2ludChhcmdzWzBdKSkgewogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgcmV0LnB1c2goUG9pbnQoYXJnc1tpXSkpOwogICAgfSBlbHNlIGlmKGFyZ3MubGVuZ3RoICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGFyZ3NbMF0gPT0gJ251bWJlcicpIHsKICAgICAgLy8mJywgYXJncyk7CiAgICAgIHdoaWxlKGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgIGxldCBjb29yZHMgPSBhcmdzLnNwbGljZSgwLCAyKTsKICAgICAgICByZXQucHVzaChQb2ludChjb29yZHMpKTsKICAgICAgfQogICAgfQogICAgaWYoIShyZXQgaW5zdGFuY2VvZiBQb2ludExpc3QpKSB7CiAgICAgIGxldCBwcm90byA9IFBvaW50TGlzdC5wcm90b3R5cGU7CiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihyZXQsIHByb3RvKTsKICAgIH0KICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFBvaW50TGlzdCkpIHJldHVybiByZXQ7CiAgfQp9ClBvaW50TGlzdC5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdQb2ludExpc3QnOwoKLypkZWZpbmVHZXR0ZXIoUG9pbnRMaXN0LCBTeW1ib2wuc3BlY2llcywgKCkgPT4gUG9pbnRMaXN0KTsKZGVmaW5lR2V0dGVyKFBvaW50TGlzdC5wcm90b3R5cGUsIFN5bWJvbC5zcGVjaWVzLCAoKSA9PiBQb2ludExpc3QpOyovCmRlZmluZShQb2ludExpc3QsIHsKICAvKiBwcmV0dGllci1pZ25vcmUgKi8gZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7CiAgICByZXR1cm4gUG9pbnRMaXN0OwogIH0KfSk7CgpQb2ludExpc3QucHJvdG90eXBlW1N5bWJvbC5pc0NvbmNhdFNwcmVhZGFibGVdID0gdHJ1ZTsKUG9pbnRMaXN0LnByb3RvdHlwZS5yb3RhdGVSaWdodCA9IGZ1bmN0aW9uKG4pIHsKICB0aGlzLnVuc2hpZnQoLi4udGhpcy5zcGxpY2UobiAlIHRoaXMubGVuZ3RoLCB0aGlzLmxlbmd0aCkpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnJvdGF0ZUxlZnQgPSBmdW5jdGlvbihuKSB7CiAgcmV0dXJuIHRoaXMucm90YXRlUmlnaHQodGhpcy5sZW5ndGggLSAobiAlIHRoaXMubGVuZ3RoKSk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24obikgewogIGlmKG4gPCAwKSByZXR1cm4gdGhpcy5yb3RhdGVMZWZ0KC1uKTsKICBpZihuID4gMCkgcmV0dXJuIHRoaXMucm90YXRlUmlnaHQobik7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICB3aGlsZShhcmdzLmxlbmd0aCA+IDApIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgbmV3IFBvaW50KGFyZ3MpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oLi4uYXJncykgewogIGxldCBwb2ludHMgPSBbXTsKICB3aGlsZShhcmdzLmxlbmd0aCA+IDApIHBvaW50cy5wdXNoKG5ldyBQb2ludChhcmdzKSk7CiAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIDAsIDAsIC4uLnBvaW50cyk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUubGVuZ3RoID0gMDsKUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbigpIHsKICByZXR1cm4gdGhpcy5sZW5ndGg7Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludExpc3QucHJvdG90eXBlLCAnc2l6ZScsIHsKICBnZXQoKSB7CiAgICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICB9Cn0pOwpQb2ludExpc3QucHJvdG90eXBlLmF0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICByZXR1cm4gdGhpc1sraW5kZXhdOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnNwbGljZSA9IGZ1bmN0aW9uKCkgewogIGxldCBhcmdzID0gWy4uLmFyZ3VtZW50c107CiAgY29uc3Qgc3RhcnQgPSBhcmdzLnNoaWZ0KCk7CiAgY29uc3QgcmVtb3ZlID0gYXJncy5zaGlmdCgpOwogIHJldHVybiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHRoaXMsIFtzdGFydCwgcmVtb3ZlLCAuLi5hcmdzLm1hcChhcmcgPT4gKGFyZyBpbnN0YW5jZW9mIFBvaW50ID8gYXJnIDogbmV3IFBvaW50KGFyZykpKV0pOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwpQb2ludExpc3QucHJvdG90eXBlLnJlbW92ZVNlZ21lbnQgPSBmdW5jdGlvbihpbmRleCkgewogIGxldCBpbmRleGVzID0gW1BvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXggLSAxKSwgUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXguY2FsbCh0aGlzLCBpbmRleCksIFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXggKyAxKV07CiAgbGV0IGxpbmVzID0gaW5kZXhlcy5tYXAoaSA9PiBQb2ludExpc3QucHJvdG90eXBlLmdldExpbmUuY2FsbCh0aGlzLCBpKSk7CiAgbGV0IHBvaW50ID0gTGluZS5pbnRlcnNlY3QobGluZXNbMF0sIGxpbmVzWzJdKTsKICBpZihwb2ludCkgewogICAgUG9pbnRMaXN0LnByb3RvdHlwZS5zcGxpY2UuY2FsbCh0aGlzLCAwLCAyLCBuZXcgUG9pbnQocG9pbnQpKTsKICB9Cn07CgovKlBvaW50TGlzdC5wcm90b3R5cGUudG9QYXRoID0gZnVuY3Rpb24ob3B0aW9ucyA9IHt9KSB7CiAgY29uc3QgeyByZWxhdGl2ZSA9IGZhbHNlLCBjbG9zZSA9IGZhbHNlLCBwcmVjaXNpb24gPSAwLjAwMSB9ID0gb3B0aW9uczsKICBsZXQgb3V0ID0gJyc7CiAgY29uc3QgcG9pbnQgPSByZWxhdGl2ZSA/IChpKSA9PiAoaSA+IDAgPyBQb2ludC5kaWZmKFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBpKSwgUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGkgLSAxKSkgOiBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSkpIDogKGkpID0+IFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBpKTsKICBjb25zdCBjbWQgPSAoaSkgPT4gKGkgPT0gMCA/ICdNJyA6ICdMJ1tyZWxhdGl2ZSA/ICd0b0xvd2VyQ2FzZScgOiAndG9VcHBlckNhc2UnXSgpKTsKICBjb25zdCBsZW4gPSBQb2ludExpc3QucHJvdG90eXBlLmdldExlbmd0aC5jYWxsKHRoaXMpOwogIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgb3V0ICs9IGNtZChpKSArIHJvdW5kVG8ocG9pbnQoaSkueCwgcHJlY2lzaW9uKSArICcsJyArIHJvdW5kVG8ocG9pbnQoaSkueSwgcHJlY2lzaW9uKSArICcgJzsKICB9CiAgaWYoY2xvc2UpIG91dCArPSAnWic7CiAgcmV0dXJuIG91dDsKfTsqLwpQb2ludExpc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7CiAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdOwogIGxldCBwb2ludHMgPSBQb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gUG9pbnQucHJvdG90eXBlLmNsb25lLmNhbGwocCkpOwogIHJldHVybiBuZXcgY3Rvcihwb2ludHMpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvUG9sYXIgPSBmdW5jdGlvbih0Zm4pIHsKICBsZXQgdCA9IHR5cGVvZiB0Zm4gPT0gJ2Z1bmN0aW9uJyA/IHRmbiA6ICh4LCB5KSA9PiAoeyB4IC8qOiAoeCAqIDE4MCkgLyBNYXRoLlBJKi8sIHkgfSk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiB7CiAgICBjb25zdCBhbmdsZSA9IFBvaW50LnByb3RvdHlwZS50b0FuZ2xlLmNhbGwocCk7CiAgICByZXR1cm4gbmV3IFBvaW50KHQoYW5nbGUsIFBvaW50LnByb3RvdHlwZS5kaXN0YW5jZS5jYWxsKHApKSk7CiAgfSk7CgogIGxldCByZXQgPSBbXTsKICByZXQuc3BsaWNlLmFwcGx5KHJldCwgWwogICAgMCwKICAgIHJldC5sZW5ndGgsCiAgICAuLi5Qb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgICBjb25zdCBhbmdsZSA9IFBvaW50LnByb3RvdHlwZS50b0FuZ2xlLmNhbGwocCk7CiAgICAgIHJldHVybiB0KGFuZ2xlLCBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbChwKSk7CiAgICB9KQogIF0pOwogIHJldHVybiByZXQ7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuZnJvbVBvbGFyID0gZnVuY3Rpb24odGZuKSB7CiAgLy8gIGxldCByZXQgPSBuZXcgUG9pbnRMaXN0KCk7CiAgbGV0IHQgPSB0eXBlb2YgdGZuID09ICdmdW5jdGlvbicgPyB0Zm4gOiAoeCwgeSkgPT4gKHsgeCAvKjogKHggKiBNYXRoLlBJKSAvIDE4MCovLCB5IH0pOwogIHJldHVybiBQb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgbGV0IHIgPSB0KHAueCwgcC55KTsKICAgIHJldHVybiBuZXcgUG9pbnQoKS5mcm9tQW5nbGUoci54LCByLnkpOwogIH0pOwoKICByZXQuc3BsaWNlLmFwcGx5KHJldCwgWwogICAgMCwKICAgIHJldC5sZW5ndGgsCiAgICAuLi5Qb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgICBsZXQgciA9IHQocC54LCBwLnkpOwogICAgICByZXR1cm4gUG9pbnQucHJvdG90eXBlLmZyb21BbmdsZS5jYWxsKHIueCwgci55KTsKICAgIH0pCiAgXSk7CiAgcmV0dXJuIHJldDsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oY3R4LCBjbG9zZSA9IGZhbHNlKSB7CiAgY29uc3QgZmlyc3QgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgMCk7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBjdHgudG8oZmlyc3QueCwgZmlyc3QueSk7CiAgZm9yKGxldCBpID0gMTsgaSA8IGxlbjsgaSsrKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBpKTsKICAgIGN0eC5saW5lKHgsIHkpOwogIH0KICBpZihjbG9zZSkgY3R4LmxpbmUoZmlyc3QueCwgZmlyc3QueSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuYXJlYSA9IGZ1bmN0aW9uKCkgewogIGxldCBhcmVhID0gMDsKICBsZXQgaTsKICBsZXQgajsKICBsZXQgcG9pbnQxOwogIGxldCBwb2ludDI7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBmb3IoaSA9IDAsIGogPSBsZW4gLSAxOyBpIDwgbGVuOyBqID0gaSwgaSArPSAxKSB7CiAgICBwb2ludDEgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBwb2ludDIgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaik7CiAgICBhcmVhICs9IHBvaW50MS54ICogcG9pbnQyLnk7CiAgICBhcmVhIC09IHBvaW50MS55ICogcG9pbnQyLng7CiAgfQogIGFyZWEgLz0gMjsKICByZXR1cm4gYXJlYTsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5jZW50cm9pZCA9IGZ1bmN0aW9uKCkgewogIGxldCB4ID0gMDsKICBsZXQgeSA9IDA7CiAgbGV0IGk7CiAgbGV0IGo7CiAgbGV0IGY7CiAgbGV0IHBvaW50MTsKICBsZXQgcG9pbnQyOwogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgZm9yKGkgPSAwLCBqID0gbGVuIC0gMTsgaSA8IGxlbjsgaiA9IGksIGkgKz0gMSkgewogICAgcG9pbnQxID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGkpOwogICAgcG9pbnQyID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGopOwogICAgZiA9IHBvaW50MS54ICogcG9pbnQyLnkgLSBwb2ludDIueCAqIHBvaW50MS55OwogICAgeCArPSAocG9pbnQxLnggKyBwb2ludDIueCkgKiBmOwogICAgeSArPSAocG9pbnQxLnkgKyBwb2ludDIueSkgKiBmOwogIH0KICBmID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hcmVhLmNhbGwodGhpcykgKiA2OwogIHJldHVybiBuZXcgUG9pbnQoeCAvIGYsIHkgLyBmKTsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5hdmcgPSBmdW5jdGlvbigpIHsKICBsZXQgcmV0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLCAoYWNjLCBwKSA9PiBhY2MuYWRkKHApLCBuZXcgUG9pbnQoKSk7CiAgcmV0dXJuIHJldC5kaXYoUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKSk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuYmJveCA9IGZ1bmN0aW9uIEJCb3goCiAgcHJvdG8gPSB7CiAgICBjb25zdHJ1Y3RvcjogUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LAogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBge3gxOiR7KHRoaXMueDEgKyAnJykucGFkU3RhcnQoNCwgJyAnKX0seDI6JHsodGhpcy54MiArICcnKS5wYWRTdGFydCg0LCAnICcpfSx5MTokeyh0aGlzLnkxICsgJycpLnBhZFN0YXJ0KDQsICcgJyl9LHkyOiR7KHRoaXMueTIgKyAnJykucGFkU3RhcnQoNCwgJyAnKX19YDsKICAgIH0KICB9CikgewogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgaWYoIWxlbikgcmV0dXJuIHt9OwogIGNvbnN0IGZpcnN0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIDApOwogIGxldCByZXQgPSB7CiAgICB4MTogZmlyc3QueCwKICAgIHgyOiBmaXJzdC54LAogICAgeTE6IGZpcnN0LnksCiAgICB5MjogZmlyc3QueQogIH07CgogIGZvcihsZXQgaSA9IDE7IGkgPCBsZW47IGkrKykgewogICAgY29uc3QgeyB4LCB5IH0gPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBpZih4IDwgcmV0LngxKSByZXQueDEgPSB4OwogICAgaWYoeCA+IHJldC54MikgcmV0LngyID0geDsKICAgIGlmKHkgPCByZXQueTEpIHJldC55MSA9IHk7CiAgICBpZih5ID4gcmV0LnkyKSByZXQueTIgPSB5OwogIH0KICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgcHJvdG8pOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnJlY3QgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlY3QoUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcykpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnhyYW5nZSA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IGJib3ggPSBQb2ludExpc3QucHJvdG90eXBlLmJib3guY2FsbCh0aGlzKTsKICByZXR1cm4gW2Jib3gueDEsIGJib3gueDJdOwp9OwpQb2ludExpc3QucHJvdG90eXBlLm5vcm1hbGl6ZVggPSBmdW5jdGlvbihuZXdWYWwgPSB4ID0+IHgpIHsKICBjb25zdCB4cmFuZ2UgPSBQb2ludExpc3QucHJvdG90eXBlLnhyYW5nZS5jYWxsKHRoaXMpOwogIGNvbnN0IHhkaWZmID0geHJhbmdlWzFdIC0geHJhbmdlWzBdOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIChwLCBpLCBsKSA9PiB7CiAgICBsW2ldLnggPSBuZXdWYWwoKGxbaV0ueCAtIHhyYW5nZVswXSkgLyB4ZGlmZik7CiAgfSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUueXJhbmdlID0gZnVuY3Rpb24oKSB7CiAgY29uc3QgYmJveCA9IFBvaW50TGlzdC5wcm90b3R5cGUuYmJveC5jYWxsKHRoaXMpOwogIHJldHVybiBbYmJveC55MSwgYmJveC55Ml07Cn07ClBvaW50TGlzdC5wcm90b3R5cGUubm9ybWFsaXplWSA9IGZ1bmN0aW9uKG5ld1ZhbCA9IHkgPT4geSkgewogIGNvbnN0IHlyYW5nZSA9IFBvaW50TGlzdC5wcm90b3R5cGUueXJhbmdlLmNhbGwodGhpcyk7CiAgY29uc3QgeWRpZmYgPSB5cmFuZ2VbMV0gLSB5cmFuZ2VbMF07CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgKHAsIGksIGwpID0+IHsKICAgIGxbaV0ueSA9IG5ld1ZhbCgobFtpXS55IC0geXJhbmdlWzBdKSAvIHlkaWZmKTsKICB9KTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5ib3VuZGluZ1JlY3QgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlY3QoUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcykpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHgsIHkpIHsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUubW92ZS5jYWxsKGl0LCB4LCB5KSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24obSkgewogIGlmKGlzT2JqZWN0KG0pICYmIHR5cGVvZiBtLnRvTWF0cml4ID09ICdmdW5jdGlvbicpIG0gPSBtLnRvTWF0cml4KCk7CiAgaWYoaXNPYmplY3QobSkgJiYgdHlwZW9mIG0udHJhbnNmb3JtUG9pbnQgPT0gJ2Z1bmN0aW9uJykgewogICAgdGhpcy5mb3JFYWNoKHAgPT4gbS50cmFuc2Zvcm1Qb2ludChwKSk7CiAgICByZXR1cm4gdGhpczsKICB9CiAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIFBvaW50LnByb3RvdHlwZS50cmFuc2Zvcm0uY2FsbCh0aGlzW2ldLCBtKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24ocHJlZCkgewogIGxldCByZXQgPSBuZXcgUG9pbnRMaXN0KCk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgKHAsIGksIGwpID0+IHByZWQocCwgaSwgbCkgJiYgcmV0LnB1c2gobmV3IFBvaW50KGxbaV0pKSk7CiAgcmV0dXJuIHJldDsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXggPSBmdW5jdGlvbihpbmRleCkgewogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgcmV0dXJuIChpbmRleCA8IDAgPyBsZW4gKyBpbmRleCA6IGluZGV4KSAlIGxlbjsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lID0gZnVuY3Rpb24oaW5kZXgpIHsKICBsZXQgYSA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXgpOwogIGxldCBiID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXguY2FsbCh0aGlzLCBpbmRleCArIDEpOwogIHJldHVybiBbUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGEpLCBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgYildOwp9OwpQb2ludExpc3QucHJvdG90eXBlLmxpbmVzID0gZnVuY3Rpb24oY2xvc2VkID0gZmFsc2UpIHsKICBjb25zdCBwb2ludHMgPSB0aGlzOwogIGNvbnN0IG4gPSBwb2ludHMubGVuZ3RoIC0gKGNsb3NlZCA/IDAgOiAxKTsKICBjb25zdCBpdGVyYWJsZU9iaiA9IHsKICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgICBsZXQgc3RlcCA9IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmV4dCgpIHsKICAgICAgICAgIGxldCB2YWx1ZTsKICAgICAgICAgIGxldCBkb25lID0gc3RlcCA+PSBuOwogICAgICAgICAgaWYoIWRvbmUpIHsKICAgICAgICAgICAgdmFsdWUgPSBuZXcgTGluZShwb2ludHNbc3RlcF0sIHBvaW50c1soc3RlcCArIDEpICUgcG9pbnRzLmxlbmd0aF0pOwogICAgICAgICAgICBzdGVwKys7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgZG9uZSB9OwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9OwogIHJldHVybiBpdGVyYWJsZU9iajsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24ocHJlZCkgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKHRoaXMsIHByZWQgfHwgKChhLCBiKSA9PiBQb2ludC5wcm90b3R5cGUudmFsdWVPZi5jYWxsKGEpIC0gUG9pbnQucHJvdG90eXBlLnZhbHVlT2YuY2FsbChiKSkpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oc2VwID0gJywnLCBwcmVjKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCBwb2ludCA9PiAoUG9pbnQucHJvdG90eXBlLnRvU3RyaW5nID8gUG9pbnQucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocG9pbnQsIHByZWMsIHNlcCkgOiBwb2ludCArICcnKSkuam9pbignICcpOwp9OwpQb2ludExpc3QucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSBmdW5jdGlvbihzZXAgPSAnLCcsIHByZWMpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcAogICAgLmNhbGwodGhpcywgcG9pbnQgPT4gcG9pbnQucm91bmQocHJlYykpCiAgICAubWFwKHBvaW50ID0+IGAke3BvaW50Lnh9JHtzZXB9JHtwb2ludC55fWApCiAgICAuam9pbignICcpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvUGF0aCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgKHBvaW50LCBpKSA9PiBgJHtpID4gMCA/ICdMJyA6ICdNJ30ke3BvaW50fWApLmpvaW4oJyAnKTsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMsIChhY2MsIHBvaW50LCBpKSA9PiAoYWNjID8gYWNjICsgJyAnIDogJycpICsgYCR7YWNjID8gJ0wnIDogJ00nfSR7cG9pbnR9YCk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUudG9Tb3VyY2UgPSBmdW5jdGlvbihvcHRzID0ge30pIHsKICBpZihvcHRzLmFzU3RyaW5nKSByZXR1cm4gYG5ldyBQb2ludExpc3QoIiR7dGhpcy50b1N0cmluZyhvcHRzKX0iKWA7CgogIGxldCBmbiA9IG9wdHMuYXNBcnJheQogICAgPyBwID0+IGBbJHtwLnh9LCR7cC55fV1gCiAgICA6IG9wdHMucGxhaW5PYmoKICAgID8gcCA9PgogICAgICAgIFBvaW50LnRvU291cmNlKHAsIHsKICAgICAgICAgIHNwYWNlOiAnJywKICAgICAgICAgIHBhZGRpbmc6ICcgJywKICAgICAgICAgIHNlcGFyYXRvcjogJywnCiAgICAgICAgfSkKICAgIDogcG9pbnQgPT4KICAgICAgICBQb2ludC5wcm90b3R5cGUudG9Tb3VyY2UuY2FsbChwb2ludCwgewogICAgICAgICAgLi4ub3B0cywKICAgICAgICAgIHBsYWluT2JqOiB0cnVlCiAgICAgICAgfSk7CiAgcmV0dXJuICduZXcgUG9pbnRMaXN0KFsnICsgUG9pbnRMaXN0LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCBmbikuam9pbignLCcpICsgJ10pJzsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwdCkgewogIGlmKCEocHQgaW5zdGFuY2VvZiBQb2ludCkpIHB0ID0gbmV3IFBvaW50KC4uLmFyZ3VtZW50cyk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLmFkZC5jYWxsKGl0LCBwdCkpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnN1bSA9IGZ1bmN0aW9uKHB0KSB7CiAgbGV0IHJldCA9IFBvaW50TGlzdC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTsKICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5hZGQuYXBwbHkocmV0LCBhcmd1bWVudHMpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnN1YiA9IGZ1bmN0aW9uKHB0KSB7CiAgaWYoIShwdCBpbnN0YW5jZW9mIFBvaW50KSkgcHQgPSBuZXcgUG9pbnQoLi4uYXJndW1lbnRzKTsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUuc3ViLmNhbGwoaXQsIHB0KSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuZGlmZiA9IGZ1bmN0aW9uKHB0KSB7CiAgbGV0IHJldCA9IFBvaW50TGlzdC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTsKICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5zdWIuYXBwbHkocmV0LCBhcmd1bWVudHMpOwp9OwpQb2ludExpc3QucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uKHB0KSB7CiAgaWYodHlwZW9mIHB0ID09ICdudW1iZXInKSBwdCA9IG5ldyBQb2ludCh7IHg6IHB0LCB5OiBwdCB9KTsKICBpZighKHB0IGluc3RhbmNlb2YgUG9pbnQpKSBwdCA9IG5ldyBQb2ludCguLi5hcmd1bWVudHMpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5tdWwuY2FsbChpdCwgcHQpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5wcm9kID0gZnVuY3Rpb24ocHQpIHsKICBsZXQgcmV0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpOwogIHJldHVybiBQb2ludExpc3QucHJvdG90eXBlLm11bC5hcHBseShyZXQsIGFyZ3VtZW50cyk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24ocHQpIHsKICBpZih0eXBlb2YgcHQgPT0gJ251bWJlcicpIHB0ID0gbmV3IFBvaW50KHsgeDogcHQsIHk6IHB0IH0pOwogIGlmKCEocHQgaW5zdGFuY2VvZiBQb2ludCkpIHB0ID0gbmV3IFBvaW50KC4uLmFyZ3VtZW50cyk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLmRpdi5jYWxsKGl0LCBwdCkpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnF1b3QgPSBmdW5jdGlvbihwdCkgewogIGxldCByZXQgPSBQb2ludExpc3QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUuZGl2LmFwcGx5KHJldCwgYXJndW1lbnRzKTsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5yb3VuZCA9IGZ1bmN0aW9uKHByZWMsIGRpZ2l0cywgdHlwZSkgewogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5yb3VuZC5jYWxsKGl0LCBwcmVjLCBkaWdpdHMsIHR5cGUpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5jZWlsID0gZnVuY3Rpb24ocHJlYykgewogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5jZWlsLmNhbGwoaXQsIHByZWMpKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnRMaXN0LnByb3RvdHlwZS5mbG9vciA9IGZ1bmN0aW9uKHByZWMpIHsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUuZmxvb3IuY2FsbChpdCwgcHJlYykpOwogIHJldHVybiB0aGlzOwp9OwpQb2ludExpc3QucHJvdG90eXBlLnRvTWF0cml4ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCAoeyB4LCB5IH0pID0+IE9iamVjdC5mcmVlemUoW3gsIHldKSk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnRvUG9pbnRzID0gZnVuY3Rpb24oY3RvciA9IEFycmF5Lm9mKSB7CiAgcmV0dXJuIGN0b3IoLi4udGhpcyk7Cn07ClBvaW50TGlzdC5wcm90b3R5cGVbaW5zcGVjdFN5bWJvbF0gPSBmdW5jdGlvbihkZXB0aCwgb3B0aW9ucykgewogIC8vY29uc3Qgb2JqID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykucmVkdWNlKChhY2MsbikgPT4gKHsgLi4uYWNjLCBbbl06IHRoaXNbbl0gfSksIHt9KTsKICBjb25zdCBvYmogPSBBcnJheS5mcm9tKHRoaXMpOyAvL09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLnJlZHVjZSgoYWNjLG4pID0+ICh7IC4uLmFjYywgW25dOiB0aGlzW25dIH0pLCB7fSk7CiAgcmV0dXJuICgKICAgIGBceDFiWzE7MzFtJHtjbGFzc05hbWUodGhpcyl9XHgxYlswOzM2bWAgKyBvYmoucmVkdWNlKChhY2MsIHsgeCwgeSB9KSA9PiBhY2MgKyBgICR7eH0sJHt5fWAsICcnKSArIGBceDFiWzBtYAogICAgLy8gaW5zcGVjdChPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqLCBQb2ludExpc3QucHJvdG90eXBlKSwgZGVwdGgsIG9wdGlvbnMpCiAgKTsKfTsKCmZvcihsZXQgbmFtZSBvZiBbJ3B1c2gnLCAnc3BsaWNlJywgJ2Nsb25lJywgJ2FyZWEnLCAnY2VudHJvaWQnLCAnYXZnJywgJ2Jib3gnLCAncmVjdCcsICd4cmFuZ2UnLCAneXJhbmdlJywgJ2JvdW5kaW5nUmVjdCddKSB7CiAgUG9pbnRMaXN0W25hbWVdID0gcG9pbnRzID0+IFBvaW50TGlzdC5wcm90b3R5cGVbbmFtZV0uY2FsbChwb2ludHMpOwp9CgovKmRlZmluZShQb2ludExpc3QsIHsKICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBQb2ludExpc3Q7CiAgfQp9KTsqLwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVBvaW50TGlzdCA9IGltbXV0YWJsZUNsYXNzKFBvaW50TGlzdCk7Ci8vZGVmaW5lR2V0dGVyKEltbXV0YWJsZVBvaW50TGlzdCwgU3ltYm9sLnNwZWNpZXMsICgpID0+IEltbXV0YWJsZVBvaW50TGlzdCk7CgAAAAAAAAAAsTQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABjOgAAAAAAAGM6AAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					2,
					"left_delete",
					null,
					"AgAAALA0AAAAAAAAsDQAAAAAAAABAAAACq80AAAAAAAArzQAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACxNAAAAAAAALE0AAAAAAAAAAAAAAAA8L8"
				],
				[
					74,
					1,
					"left_delete",
					null,
					"AQAAAHE0AAAAAAAAcTQAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByNAAAAAAAAHI0AAAAAAAAAAAAAAAAfkA"
				],
				[
					84,
					1,
					"",
					null,
					"KwAAAMEyAAAAAAAAzzIAAAAAAAAMAAAAfTsKUG9pbnRMaXN07TEAAAAAAAD7MQAAAAAAAAwAAAB9OwpQb2ludExpc3RYMQAAAAAAAGYxAAAAAAAADAAAAH07ClBvaW50TGlzdMUwAAAAAAAA0zAAAAAAAAAMAAAAfTsKUG9pbnRMaXN0FDAAAAAAAAAiMAAAAAAAAAwAAAB9OwpQb2ludExpc3R9LwAAAAAAAIsvAAAAAAAADAAAAH07ClBvaW50TGlzdHcuAAAAAAAAhS4AAAAAAAAMAAAAfTsKUG9pbnRMaXN04C0AAAAAAADuLQAAAAAAAAwAAAB9OwpQb2ludExpc3TaLAAAAAAAAOgsAAAAAAAADAAAAH07ClBvaW50TGlzdEMsAAAAAAAAUSwAAAAAAAAMAAAAfTsKUG9pbnRMaXN0eysAAAAAAACJKwAAAAAAAAwAAAB9OwpQb2ludExpc3TlKgAAAAAAAPMqAAAAAAAADAAAAH07ClBvaW50TGlzdB0qAAAAAAAAKyoAAAAAAAAMAAAAfTsKUG9pbnRMaXN0ESgAAAAAAAAfKAAAAAAAAAwAAAB9OwpQb2ludExpc3QNJwAAAAAAABsnAAAAAAAADAAAAH07ClBvaW50TGlzdDsmAAAAAAAASSYAAAAAAAAMAAAAfTsKUG9pbnRMaXN0ZiUAAAAAAAB0JQAAAAAAAAwAAAB9OwpQb2ludExpc3S2JAAAAAAAAMQkAAAAAAAADAAAAH07ClBvaW50TGlzdMAiAAAAAAAAziIAAAAAAAAMAAAAfTsKUG9pbnRMaXN0tiEAAAAAAADEIQAAAAAAAAwAAAB9OwpQb2ludExpc3QUIQAAAAAAACIhAAAAAAAADAAAAH07ClBvaW50TGlzdPweAAAAAAAACh8AAAAAAAAMAAAAfTsKUG9pbnRMaXN0ZB4AAAAAAAByHgAAAAAAAAwAAAB9OwpQb2ludExpc3T5HQAAAAAAAAceAAAAAAAADAAAAH07ClBvaW50TGlzdNocAAAAAAAA6BwAAAAAAAAMAAAAfTsKUG9pbnRMaXN0XBwAAAAAAABqHAAAAAAAAAwAAAB9OwpQb2ludExpc3Q9GwAAAAAAAEsbAAAAAAAADAAAAH07ClBvaW50TGlzdL8aAAAAAAAAzRoAAAAAAAAMAAAAfTsKUG9pbnRMaXN0XBoAAAAAAABqGgAAAAAAAAwAAAB9OwpQb2ludExpc3RMFwAAAAAAAFoXAAAAAAAADAAAAH07ClBvaW50TGlzdI4WAAAAAAAAnBYAAAAAAAAMAAAAfTsKUG9pbnRMaXN0bBQAAAAAAAB6FAAAAAAAAAwAAAB9OwpQb2ludExpc3TPEgAAAAAAAN0SAAAAAAAADAAAAH07ClBvaW50TGlzdF0RAAAAAAAAaxEAAAAAAAAMAAAAfTsKUG9pbnRMaXN0mQ8AAAAAAACnDwAAAAAAAAwAAAB9OwpQb2ludExpc3R8DQAAAAAAAIoNAAAAAAAADAAAAH07ClBvaW50TGlzdLcKAAAAAAAAxQoAAAAAAAAMAAAAfTsKUG9pbnRMaXN0rwkAAAAAAAC9CQAAAAAAAAwAAAB9OwpQb2ludExpc3SICAAAAAAAAJYIAAAAAAAADAAAAH07ClBvaW50TGlzdMQHAAAAAAAA0gcAAAAAAAAMAAAAfTsKUG9pbnRMaXN0OAcAAAAAAABGBwAAAAAAAAwAAAB9OwpQb2ludExpc3SrBgAAAAAAALkGAAAAAAAADAAAAH07ClBvaW50TGlzdD0GAAAAAAAASwYAAAAAAAAMAAAAfTsKUG9pbnRMaXN0",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC2JAAAAAAAAMIkAAAAAAAAAAAAAAAA8L8"
				],
				[
					90,
					1,
					"ensure_newline_at_eof",
					null,
					"AQAAAAQ1AAAAAAAABTUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACABAAAAAAAAIAEAAAAAAAAAAAAAAAA8L8"
				],
				[
					94,
					1,
					"left_delete",
					null,
					"AQAAADcFAAAAAAAANwUAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA4BQAAAAAAADgFAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAAAFAAAAAAAAAQUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAe0A"
				],
				[
					105,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAFNQAAaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL3BvaW50LmpzJzsKaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4vcmVjdC5qcyc7CmltcG9ydCB7IExpbmUgfSBmcm9tICcuL2xpbmUuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyLCBpbW11dGFibGVDbGFzcywgaW5zcGVjdCwgaW5zcGVjdFN5bWJvbCwgaXNCcm93c2VyLCB0eXBlcywgaXNPYmplY3QsIHJvdW5kVG8sIHRvU291cmNlIH0gZnJvbSAnLi4vbWlzYy5qcyc7CgpleHBvcnQgY2xhc3MgUG9pbnRMaXN0IGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgIGxldCBbcG9pbnRzLCB0Zm4gPSAoLi4uYXJncykgPT4gbmV3IFBvaW50KC4uLmFyZ3MpXSA9IGFyZ3M7CgogICAgc3VwZXIoKTsKICAgIGNvbnN0IGJhc2UgPSBBcnJheTsKICAgIGxldCByZXQgPSBuZXcudGFyZ2V0ID8gdGhpcyA6IFtdOwoKICAgIGlmKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgfHwgdHlwZXMuaXNJdGVyYWJsZShhcmdzWzBdKSkgYXJncyA9IFsuLi5hcmdzWzBdXTsKCiAgICBpZih0eXBlb2YgcG9pbnRzID09PSAnc3RyaW5nJykgewogICAgICBjb25zdCBtYXRjaGVzID0gWy4uLnBvaW50cy5tYXRjaEFsbCgvWy0uMC05LF0rL2cpXTsKCiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgY29vcmRzID0gKG1hdGNoZXNbaV1bMF0gKyAnJykuc3BsaXQoLywvZykubWFwKG4gPT4gK24pOwoKICAgICAgICByZXQucHVzaCh0Zm4oLi4uY29vcmRzKSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZihhcmdzWzBdICYmIFBvaW50KGFyZ3NbMF0pKSB7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSByZXQucHVzaChQb2ludChhcmdzW2ldKSk7CiAgICB9IGVsc2UgaWYoYXJncy5sZW5ndGggIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgYXJnc1swXSA9PSAnbnVtYmVyJykgewoKICAgICAgd2hpbGUoYXJncy5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IGNvb3JkcyA9IGFyZ3Muc3BsaWNlKDAsIDIpOwogICAgICAgIHJldC5wdXNoKFBvaW50KGNvb3JkcykpOwogICAgICB9CiAgICB9CiAgICBpZighKHJldCBpbnN0YW5jZW9mIFBvaW50TGlzdCkpIHsKICAgICAgbGV0IHByb3RvID0gUG9pbnRMaXN0LnByb3RvdHlwZTsKICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgcHJvdG8pOwogICAgfQogICAgaWYoISh0aGlzIGluc3RhbmNlb2YgUG9pbnRMaXN0KSkgcmV0dXJuIHJldDsKICB9Cn0KClBvaW50TGlzdC5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdQb2ludExpc3QnOwoKZGVmaW5lKFBvaW50TGlzdCwgewogICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBQb2ludExpc3Q7CiAgfQp9KTsKClBvaW50TGlzdC5wcm90b3R5cGVbU3ltYm9sLmlzQ29uY2F0U3ByZWFkYWJsZV0gPSB0cnVlOwpQb2ludExpc3QucHJvdG90eXBlLnJvdGF0ZVJpZ2h0ID0gZnVuY3Rpb24obikgewogIHRoaXMudW5zaGlmdCguLi50aGlzLnNwbGljZShuICUgdGhpcy5sZW5ndGgsIHRoaXMubGVuZ3RoKSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5yb3RhdGVMZWZ0ID0gZnVuY3Rpb24obikgewogIHJldHVybiB0aGlzLnJvdGF0ZVJpZ2h0KHRoaXMubGVuZ3RoIC0gKG4gJSB0aGlzLmxlbmd0aCkpOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24obikgewogIGlmKG4gPCAwKSByZXR1cm4gdGhpcy5yb3RhdGVMZWZ0KC1uKTsKICBpZihuID4gMCkgcmV0dXJuIHRoaXMucm90YXRlUmlnaHQobik7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oLi4uYXJncykgewogIHdoaWxlKGFyZ3MubGVuZ3RoID4gMCkgQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBuZXcgUG9pbnQoYXJncykpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICBsZXQgcG9pbnRzID0gW107CiAgd2hpbGUoYXJncy5sZW5ndGggPiAwKSBwb2ludHMucHVzaChuZXcgUG9pbnQoYXJncykpOwogIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbCh0aGlzLCAwLCAwLCAuLi5wb2ludHMpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUubGVuZ3RoID0gMDsKUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbigpIHsKICByZXR1cm4gdGhpcy5sZW5ndGg7Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludExpc3QucHJvdG90eXBlLCAnc2l6ZScsIHsKICBnZXQoKSB7CiAgICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICB9Cn0pOwpQb2ludExpc3QucHJvdG90eXBlLmF0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICByZXR1cm4gdGhpc1sraW5kZXhdOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuc3BsaWNlID0gZnVuY3Rpb24oKSB7CiAgbGV0IGFyZ3MgPSBbLi4uYXJndW1lbnRzXTsKICBjb25zdCBzdGFydCA9IGFyZ3Muc2hpZnQoKTsKICBjb25zdCByZW1vdmUgPSBhcmdzLnNoaWZ0KCk7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkodGhpcywgW3N0YXJ0LCByZW1vdmUsIC4uLmFyZ3MubWFwKGFyZyA9PiAoYXJnIGluc3RhbmNlb2YgUG9pbnQgPyBhcmcgOiBuZXcgUG9pbnQoYXJnKSkpXSk7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5zbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKUG9pbnRMaXN0LnByb3RvdHlwZS5yZW1vdmVTZWdtZW50ID0gZnVuY3Rpb24oaW5kZXgpIHsKICBsZXQgaW5kZXhlcyA9IFtQb2ludExpc3QucHJvdG90eXBlLmdldExpbmVJbmRleC5jYWxsKHRoaXMsIGluZGV4IC0gMSksIFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXgpLCBQb2ludExpc3QucHJvdG90eXBlLmdldExpbmVJbmRleC5jYWxsKHRoaXMsIGluZGV4ICsgMSldOwogIGxldCBsaW5lcyA9IGluZGV4ZXMubWFwKGkgPT4gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lLmNhbGwodGhpcywgaSkpOwogIGxldCBwb2ludCA9IExpbmUuaW50ZXJzZWN0KGxpbmVzWzBdLCBsaW5lc1syXSk7CiAgaWYocG9pbnQpIHsKICAgIFBvaW50TGlzdC5wcm90b3R5cGUuc3BsaWNlLmNhbGwodGhpcywgMCwgMiwgbmV3IFBvaW50KHBvaW50KSk7CiAgfQp9OwoKClBvaW50TGlzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsKICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CiAgbGV0IHBvaW50cyA9IFBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiBQb2ludC5wcm90b3R5cGUuY2xvbmUuY2FsbChwKSk7CiAgcmV0dXJuIG5ldyBjdG9yKHBvaW50cyk7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS50b1BvbGFyID0gZnVuY3Rpb24odGZuKSB7CiAgbGV0IHQgPSB0eXBlb2YgdGZuID09ICdmdW5jdGlvbicgPyB0Zm4gOiAoeCwgeSkgPT4gKHsgeCAsIHkgfSk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiB7CiAgICBjb25zdCBhbmdsZSA9IFBvaW50LnByb3RvdHlwZS50b0FuZ2xlLmNhbGwocCk7CiAgICByZXR1cm4gbmV3IFBvaW50KHQoYW5nbGUsIFBvaW50LnByb3RvdHlwZS5kaXN0YW5jZS5jYWxsKHApKSk7CiAgfSk7CgogIGxldCByZXQgPSBbXTsKICByZXQuc3BsaWNlLmFwcGx5KHJldCwgWwogICAgMCwKICAgIHJldC5sZW5ndGgsCiAgICAuLi5Qb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgICBjb25zdCBhbmdsZSA9IFBvaW50LnByb3RvdHlwZS50b0FuZ2xlLmNhbGwocCk7CiAgICAgIHJldHVybiB0KGFuZ2xlLCBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbChwKSk7CiAgICB9KQogIF0pOwogIHJldHVybiByZXQ7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5mcm9tUG9sYXIgPSBmdW5jdGlvbih0Zm4pIHsKCiAgbGV0IHQgPSB0eXBlb2YgdGZuID09ICdmdW5jdGlvbicgPyB0Zm4gOiAoeCwgeSkgPT4gKHsgeCAsIHkgfSk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiB7CiAgICBsZXQgciA9IHQocC54LCBwLnkpOwogICAgcmV0dXJuIG5ldyBQb2ludCgpLmZyb21BbmdsZShyLngsIHIueSk7CiAgfSk7CgogIHJldC5zcGxpY2UuYXBwbHkocmV0LCBbCiAgICAwLAogICAgcmV0Lmxlbmd0aCwKICAgIC4uLlBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiB7CiAgICAgIGxldCByID0gdChwLngsIHAueSk7CiAgICAgIHJldHVybiBQb2ludC5wcm90b3R5cGUuZnJvbUFuZ2xlLmNhbGwoci54LCByLnkpOwogICAgfSkKICBdKTsKICByZXR1cm4gcmV0Owp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGN0eCwgY2xvc2UgPSBmYWxzZSkgewogIGNvbnN0IGZpcnN0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIDApOwogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgY3R4LnRvKGZpcnN0LngsIGZpcnN0LnkpOwogIGZvcihsZXQgaSA9IDE7IGkgPCBsZW47IGkrKykgewogICAgY29uc3QgeyB4LCB5IH0gPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBjdHgubGluZSh4LCB5KTsKICB9CiAgaWYoY2xvc2UpIGN0eC5saW5lKGZpcnN0LngsIGZpcnN0LnkpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuYXJlYSA9IGZ1bmN0aW9uKCkgewogIGxldCBhcmVhID0gMDsKICBsZXQgaTsKICBsZXQgajsKICBsZXQgcG9pbnQxOwogIGxldCBwb2ludDI7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBmb3IoaSA9IDAsIGogPSBsZW4gLSAxOyBpIDwgbGVuOyBqID0gaSwgaSArPSAxKSB7CiAgICBwb2ludDEgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBwb2ludDIgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaik7CiAgICBhcmVhICs9IHBvaW50MS54ICogcG9pbnQyLnk7CiAgICBhcmVhIC09IHBvaW50MS55ICogcG9pbnQyLng7CiAgfQogIGFyZWEgLz0gMjsKICByZXR1cm4gYXJlYTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLmNlbnRyb2lkID0gZnVuY3Rpb24oKSB7CiAgbGV0IHggPSAwOwogIGxldCB5ID0gMDsKICBsZXQgaTsKICBsZXQgajsKICBsZXQgZjsKICBsZXQgcG9pbnQxOwogIGxldCBwb2ludDI7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBmb3IoaSA9IDAsIGogPSBsZW4gLSAxOyBpIDwgbGVuOyBqID0gaSwgaSArPSAxKSB7CiAgICBwb2ludDEgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBwb2ludDIgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaik7CiAgICBmID0gcG9pbnQxLnggKiBwb2ludDIueSAtIHBvaW50Mi54ICogcG9pbnQxLnk7CiAgICB4ICs9IChwb2ludDEueCArIHBvaW50Mi54KSAqIGY7CiAgICB5ICs9IChwb2ludDEueSArIHBvaW50Mi55KSAqIGY7CiAgfQogIGYgPSBQb2ludExpc3QucHJvdG90eXBlLmFyZWEuY2FsbCh0aGlzKSAqIDY7CiAgcmV0dXJuIG5ldyBQb2ludCh4IC8gZiwgeSAvIGYpOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuYXZnID0gZnVuY3Rpb24oKSB7CiAgbGV0IHJldCA9IFBvaW50TGlzdC5wcm90b3R5cGUucmVkdWNlLmNhbGwodGhpcywgKGFjYywgcCkgPT4gYWNjLmFkZChwKSwgbmV3IFBvaW50KCkpOwogIHJldHVybiByZXQuZGl2KFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcykpOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuYmJveCA9IGZ1bmN0aW9uIEJCb3goCiAgcHJvdG8gPSB7CiAgICBjb25zdHJ1Y3RvcjogUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LAogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBge3gxOiR7KHRoaXMueDEgKyAnJykucGFkU3RhcnQoNCwgJyAnKX0seDI6JHsodGhpcy54MiArICcnKS5wYWRTdGFydCg0LCAnICcpfSx5MTokeyh0aGlzLnkxICsgJycpLnBhZFN0YXJ0KDQsICcgJyl9LHkyOiR7KHRoaXMueTIgKyAnJykucGFkU3RhcnQoNCwgJyAnKX19YDsKICAgIH0KICB9CikgewogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgaWYoIWxlbikgcmV0dXJuIHt9OwogIGNvbnN0IGZpcnN0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIDApOwogIGxldCByZXQgPSB7CiAgICB4MTogZmlyc3QueCwKICAgIHgyOiBmaXJzdC54LAogICAgeTE6IGZpcnN0LnksCiAgICB5MjogZmlyc3QueQogIH07CgogIGZvcihsZXQgaSA9IDE7IGkgPCBsZW47IGkrKykgewogICAgY29uc3QgeyB4LCB5IH0gPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBpZih4IDwgcmV0LngxKSByZXQueDEgPSB4OwogICAgaWYoeCA+IHJldC54MikgcmV0LngyID0geDsKICAgIGlmKHkgPCByZXQueTEpIHJldC55MSA9IHk7CiAgICBpZih5ID4gcmV0LnkyKSByZXQueTIgPSB5OwogIH0KICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgcHJvdG8pOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUucmVjdCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVjdChQb2ludExpc3QucHJvdG90eXBlLmJib3guY2FsbCh0aGlzKSk7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS54cmFuZ2UgPSBmdW5jdGlvbigpIHsKICBjb25zdCBiYm94ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcyk7CiAgcmV0dXJuIFtiYm94LngxLCBiYm94LngyXTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLm5vcm1hbGl6ZVggPSBmdW5jdGlvbihuZXdWYWwgPSB4ID0+IHgpIHsKICBjb25zdCB4cmFuZ2UgPSBQb2ludExpc3QucHJvdG90eXBlLnhyYW5nZS5jYWxsKHRoaXMpOwogIGNvbnN0IHhkaWZmID0geHJhbmdlWzFdIC0geHJhbmdlWzBdOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIChwLCBpLCBsKSA9PiB7CiAgICBsW2ldLnggPSBuZXdWYWwoKGxbaV0ueCAtIHhyYW5nZVswXSkgLyB4ZGlmZik7CiAgfSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS55cmFuZ2UgPSBmdW5jdGlvbigpIHsKICBjb25zdCBiYm94ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcyk7CiAgcmV0dXJuIFtiYm94LnkxLCBiYm94LnkyXTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLm5vcm1hbGl6ZVkgPSBmdW5jdGlvbihuZXdWYWwgPSB5ID0+IHkpIHsKICBjb25zdCB5cmFuZ2UgPSBQb2ludExpc3QucHJvdG90eXBlLnlyYW5nZS5jYWxsKHRoaXMpOwogIGNvbnN0IHlkaWZmID0geXJhbmdlWzFdIC0geXJhbmdlWzBdOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIChwLCBpLCBsKSA9PiB7CiAgICBsW2ldLnkgPSBuZXdWYWwoKGxbaV0ueSAtIHlyYW5nZVswXSkgLyB5ZGlmZik7CiAgfSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5ib3VuZGluZ1JlY3QgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFJlY3QoUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcykpOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkgewogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwoaXQsIHgsIHkpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uKG0pIHsKICBpZihpc09iamVjdChtKSAmJiB0eXBlb2YgbS50b01hdHJpeCA9PSAnZnVuY3Rpb24nKSBtID0gbS50b01hdHJpeCgpOwogIGlmKGlzT2JqZWN0KG0pICYmIHR5cGVvZiBtLnRyYW5zZm9ybVBvaW50ID09ICdmdW5jdGlvbicpIHsKICAgIHRoaXMuZm9yRWFjaChwID0+IG0udHJhbnNmb3JtUG9pbnQocCkpOwogICAgcmV0dXJuIHRoaXM7CiAgfQogIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSBQb2ludC5wcm90b3R5cGUudHJhbnNmb3JtLmNhbGwodGhpc1tpXSwgbSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKHByZWQpIHsKICBsZXQgcmV0ID0gbmV3IFBvaW50TGlzdCgpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIChwLCBpLCBsKSA9PiBwcmVkKHAsIGksIGwpICYmIHJldC5wdXNoKG5ldyBQb2ludChsW2ldKSkpOwogIHJldHVybiByZXQ7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5nZXRMaW5lSW5kZXggPSBmdW5jdGlvbihpbmRleCkgewogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgcmV0dXJuIChpbmRleCA8IDAgPyBsZW4gKyBpbmRleCA6IGluZGV4KSAlIGxlbjsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLmdldExpbmUgPSBmdW5jdGlvbihpbmRleCkgewogIGxldCBhID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXguY2FsbCh0aGlzLCBpbmRleCk7CiAgbGV0IGIgPSBQb2ludExpc3QucHJvdG90eXBlLmdldExpbmVJbmRleC5jYWxsKHRoaXMsIGluZGV4ICsgMSk7CiAgcmV0dXJuIFtQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgYSksIFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBiKV07Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5saW5lcyA9IGZ1bmN0aW9uKGNsb3NlZCA9IGZhbHNlKSB7CiAgY29uc3QgcG9pbnRzID0gdGhpczsKICBjb25zdCBuID0gcG9pbnRzLmxlbmd0aCAtIChjbG9zZWQgPyAwIDogMSk7CiAgY29uc3QgaXRlcmFibGVPYmogPSB7CiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgICAgbGV0IHN0ZXAgPSAwOwogICAgICByZXR1cm4gewogICAgICAgIG5leHQoKSB7CiAgICAgICAgICBsZXQgdmFsdWU7CiAgICAgICAgICBsZXQgZG9uZSA9IHN0ZXAgPj0gbjsKICAgICAgICAgIGlmKCFkb25lKSB7CiAgICAgICAgICAgIHZhbHVlID0gbmV3IExpbmUocG9pbnRzW3N0ZXBdLCBwb2ludHNbKHN0ZXAgKyAxKSAlIHBvaW50cy5sZW5ndGhdKTsKICAgICAgICAgICAgc3RlcCsrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHsgdmFsdWUsIGRvbmUgfTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfTsKICByZXR1cm4gaXRlcmFibGVPYmo7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24ocHJlZCkgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKHRoaXMsIHByZWQgfHwgKChhLCBiKSA9PiBQb2ludC5wcm90b3R5cGUudmFsdWVPZi5jYWxsKGEpIC0gUG9pbnQucHJvdG90eXBlLnZhbHVlT2YuY2FsbChiKSkpOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihzZXAgPSAnLCcsIHByZWMpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHBvaW50ID0+IChQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPyBQb2ludC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwb2ludCwgcHJlYywgc2VwKSA6IHBvaW50ICsgJycpKS5qb2luKCcgJyk7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gZnVuY3Rpb24oc2VwID0gJywnLCBwcmVjKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAKICAgIC5jYWxsKHRoaXMsIHBvaW50ID0+IHBvaW50LnJvdW5kKHByZWMpKQogICAgLm1hcChwb2ludCA9PiBgJHtwb2ludC54fSR7c2VwfSR7cG9pbnQueX1gKQogICAgLmpvaW4oJyAnKTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLnRvUGF0aCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgKHBvaW50LCBpKSA9PiBgJHtpID4gMCA/ICdMJyA6ICdNJ30ke3BvaW50fWApLmpvaW4oJyAnKTsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHRoaXMsIChhY2MsIHBvaW50LCBpKSA9PiAoYWNjID8gYWNjICsgJyAnIDogJycpICsgYCR7YWNjID8gJ0wnIDogJ00nfSR7cG9pbnR9YCk7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS50b1NvdXJjZSA9IGZ1bmN0aW9uKG9wdHMgPSB7fSkgewogIGlmKG9wdHMuYXNTdHJpbmcpIHJldHVybiBgbmV3IFBvaW50TGlzdCgiJHt0aGlzLnRvU3RyaW5nKG9wdHMpfSIpYDsKCiAgbGV0IGZuID0gb3B0cy5hc0FycmF5CiAgICA/IHAgPT4gYFske3AueH0sJHtwLnl9XWAKICAgIDogb3B0cy5wbGFpbk9iagogICAgPyBwID0+CiAgICAgICAgUG9pbnQudG9Tb3VyY2UocCwgewogICAgICAgICAgc3BhY2U6ICcnLAogICAgICAgICAgcGFkZGluZzogJyAnLAogICAgICAgICAgc2VwYXJhdG9yOiAnLCcKICAgICAgICB9KQogICAgOiBwb2ludCA9PgogICAgICAgIFBvaW50LnByb3RvdHlwZS50b1NvdXJjZS5jYWxsKHBvaW50LCB7CiAgICAgICAgICAuLi5vcHRzLAogICAgICAgICAgcGxhaW5PYmo6IHRydWUKICAgICAgICB9KTsKICByZXR1cm4gJ25ldyBQb2ludExpc3QoWycgKyBQb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIGZuKS5qb2luKCcsJykgKyAnXSknOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24ocHQpIHsKICBpZighKHB0IGluc3RhbmNlb2YgUG9pbnQpKSBwdCA9IG5ldyBQb2ludCguLi5hcmd1bWVudHMpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5hZGQuY2FsbChpdCwgcHQpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLnN1bSA9IGZ1bmN0aW9uKHB0KSB7CiAgbGV0IHJldCA9IFBvaW50TGlzdC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTsKICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5hZGQuYXBwbHkocmV0LCBhcmd1bWVudHMpOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24ocHQpIHsKICBpZighKHB0IGluc3RhbmNlb2YgUG9pbnQpKSBwdCA9IG5ldyBQb2ludCguLi5hcmd1bWVudHMpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5zdWIuY2FsbChpdCwgcHQpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLmRpZmYgPSBmdW5jdGlvbihwdCkgewogIGxldCByZXQgPSBQb2ludExpc3QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUuc3ViLmFwcGx5KHJldCwgYXJndW1lbnRzKTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uKHB0KSB7CiAgaWYodHlwZW9mIHB0ID09ICdudW1iZXInKSBwdCA9IG5ldyBQb2ludCh7IHg6IHB0LCB5OiBwdCB9KTsKICBpZighKHB0IGluc3RhbmNlb2YgUG9pbnQpKSBwdCA9IG5ldyBQb2ludCguLi5hcmd1bWVudHMpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5tdWwuY2FsbChpdCwgcHQpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLnByb2QgPSBmdW5jdGlvbihwdCkgewogIGxldCByZXQgPSBQb2ludExpc3QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUubXVsLmFwcGx5KHJldCwgYXJndW1lbnRzKTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLmRpdiA9IGZ1bmN0aW9uKHB0KSB7CiAgaWYodHlwZW9mIHB0ID09ICdudW1iZXInKSBwdCA9IG5ldyBQb2ludCh7IHg6IHB0LCB5OiBwdCB9KTsKICBpZighKHB0IGluc3RhbmNlb2YgUG9pbnQpKSBwdCA9IG5ldyBQb2ludCguLi5hcmd1bWVudHMpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5kaXYuY2FsbChpdCwgcHQpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLnF1b3QgPSBmdW5jdGlvbihwdCkgewogIGxldCByZXQgPSBQb2ludExpc3QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUuZGl2LmFwcGx5KHJldCwgYXJndW1lbnRzKTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlLnJvdW5kID0gZnVuY3Rpb24ocHJlYywgZGlnaXRzLCB0eXBlKSB7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLnJvdW5kLmNhbGwoaXQsIHByZWMsIGRpZ2l0cywgdHlwZSkpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUuY2VpbCA9IGZ1bmN0aW9uKHByZWMpIHsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUuY2VpbC5jYWxsKGl0LCBwcmVjKSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QuLnByb3RvdHlwZS5mbG9vciA9IGZ1bmN0aW9uKHByZWMpIHsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUuZmxvb3IuY2FsbChpdCwgcHJlYykpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0Li5wcm90b3R5cGUudG9NYXRyaXggPSBmdW5jdGlvbigpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsICh7IHgsIHkgfSkgPT4gT2JqZWN0LmZyZWV6ZShbeCwgeV0pKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUudG9Qb2ludHMgPSBmdW5jdGlvbihjdG9yID0gQXJyYXkub2YpIHsKICByZXR1cm4gY3RvciguLi50aGlzKTsKfTsKClBvaW50TGlzdC4ucHJvdG90eXBlW2luc3BlY3RTeW1ib2xdID0gZnVuY3Rpb24oZGVwdGgsIG9wdGlvbnMpIHsKCiAgY29uc3Qgb2JqID0gQXJyYXkuZnJvbSh0aGlzKTsKICByZXR1cm4gKAogICAgYFx4MWJbMTszMW0ke2NsYXNzTmFtZSh0aGlzKX1ceDFiWzA7MzZtYCArIG9iai5yZWR1Y2UoKGFjYywgeyB4LCB5IH0pID0+IGFjYyArIGAgJHt4fSwke3l9YCwgJycpICsgYFx4MWJbMG1gCgogICk7Cn07Cgpmb3IobGV0IG5hbWUgb2YgWydwdXNoJywgJ3NwbGljZScsICdjbG9uZScsICdhcmVhJywgJ2NlbnRyb2lkJywgJ2F2ZycsICdiYm94JywgJ3JlY3QnLCAneHJhbmdlJywgJ3lyYW5nZScsICdib3VuZGluZ1JlY3QnXSkgewogIFBvaW50TGlzdFtuYW1lXSA9IHBvaW50cyA9PiBQb2ludExpc3QucHJvdG90eXBlW25hbWVdLmNhbGwocG9pbnRzKTsKfQoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVBvaW50TGlzdCA9IGltbXV0YWJsZUNsYXNzKFBvaW50TGlzdCk7CgAAAAAAAAAA2jQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					131,
					1,
					"",
					null,
					"KwAAAO4yAAAAAAAAATMAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGUYMgAAAAAAACsyAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlgTEAAAAAAACUMQAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZewwAAAAAAAA/zAAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGU5MAAAAAAAAEwwAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBloC8AAAAAAACzLwAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZZguAAAAAAAAqy4AAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGX/LQAAAAAAABIuAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBl9ywAAAAAAAAKLQAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZV4sAAAAAAAAcSwAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGWUKwAAAAAAAKcrAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBl/CoAAAAAAAAPKwAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZTIqAAAAAAAARSoAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGUkKAAAAAAAADcoAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlHicAAAAAAAAxJwAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZUomAAAAAAAAXSYAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGVzJQAAAAAAAIYlAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlwSQAAAAAAADUJAAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZckiAAAAAAAA3CIAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGW9IQAAAAAAANAhAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlGSEAAAAAAAAsIQAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZf8eAAAAAAAAEh8AAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGVlHgAAAAAAAHgeAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBl+B0AAAAAAAALHgAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZdccAAAAAAAA6hwAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGVXHAAAAAAAAGocAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlNhsAAAAAAABJGwAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZbYaAAAAAAAAyRoAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGVRGgAAAAAAAGQaAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlPxcAAAAAAABSFwAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZX8WAAAAAAAAkhYAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGVbFAAAAAAAAG4UAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlvBIAAAAAAADPEgAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZUgRAAAAAAAAWxEAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGWCDwAAAAAAAJUPAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlYw0AAAAAAAB2DQAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZZwKAAAAAAAArwoAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGWSCQAAAAAAAKUJAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlaQgAAAAAAAB8CAAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZaMHAAAAAAAAtgcAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGUVBwAAAAAAACgHAAAAAAAAFAAAAFBvaW50TGlzdC4ucHJvdG90eXBlhgYAAAAAAACZBgAAAAAAABQAAABQb2ludExpc3QuLnByb3RvdHlwZRYGAAAAAAAAKQYAAAAAAAAUAAAAUG9pbnRMaXN0Li5wcm90b3R5cGU",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAWBgAAAAAAACoGAAAAAAAAAAAAAAAA8L8"
				],
				[
					150,
					3,
					"left_delete",
					null,
					"AwAAALQAAAAAAAAAtAAAAAAAAAAIAAAAdG9Tb3VyY2WzAAAAAAAAALMAAAAAAAAAAQAAACCyAAAAAAAAALIAAAAAAAAAAQAAACw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC0AAAAAAAAALwAAAAAAAAAAAAAAAAA8L8"
				],
				[
					176,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAALIAAAAAAAAAswAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyAAAAAAAAALIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					177,
					1,
					"insert",
					{
						"characters": " niod"
					},
					"BQAAALMAAAAAAAAAtAAAAAAAAAAAAAAAtAAAAAAAAAC1AAAAAAAAAAAAAAC1AAAAAAAAALYAAAAAAAAAAAAAALYAAAAAAAAAtwAAAAAAAAAAAAAAtwAAAAAAAAC4AAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACzAAAAAAAAALMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					178,
					6,
					"left_delete",
					null,
					"BgAAALcAAAAAAAAAtwAAAAAAAAABAAAAZLYAAAAAAAAAtgAAAAAAAAABAAAAb7UAAAAAAAAAtQAAAAAAAAABAAAAabQAAAAAAAAAtAAAAAAAAAABAAAAbrMAAAAAAAAAswAAAAAAAAABAAAAILIAAAAAAAAAsgAAAAAAAAABAAAAbQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4AAAAAAAAALgAAAAAAAAAAAAAAAAA8L8"
				],
				[
					179,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAALIAAAAAAAAAswAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyAAAAAAAAALIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					180,
					1,
					"insert",
					{
						"characters": " mnod"
					},
					"BQAAALMAAAAAAAAAtAAAAAAAAAAAAAAAtAAAAAAAAAC1AAAAAAAAAAAAAAC1AAAAAAAAALYAAAAAAAAAAAAAALYAAAAAAAAAtwAAAAAAAAAAAAAAtwAAAAAAAAC4AAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACzAAAAAAAAALMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					181,
					3,
					"left_delete",
					null,
					"AwAAALcAAAAAAAAAtwAAAAAAAAABAAAAZLYAAAAAAAAAtgAAAAAAAAABAAAAb7UAAAAAAAAAtQAAAAAAAAABAAAAbg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4AAAAAAAAALgAAAAAAAAAAAAAAAAA8L8"
				],
				[
					182,
					1,
					"insert",
					{
						"characters": "od"
					},
					"AgAAALUAAAAAAAAAtgAAAAAAAAAAAAAAtgAAAAAAAAC3AAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC1AAAAAAAAALUAAAAAAAAAAAAAAAAA8L8"
				],
				[
					189,
					1,
					"insert",
					{
						"characters": "\nindx"
					},
					"BgAAAGwJAAAAAAAAbQkAAAAAAAAAAAAAbQkAAAAAAABvCQAAAAAAAAAAAABvCQAAAAAAAHAJAAAAAAAAAAAAAHAJAAAAAAAAcQkAAAAAAAAAAAAAcQkAAAAAAAByCQAAAAAAAAAAAAByCQAAAAAAAHMJAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABsCQAAAAAAAGwJAAAAAAAAAAAAAAAA8L8"
				],
				[
					190,
					1,
					"left_delete",
					null,
					"AQAAAHIJAAAAAAAAcgkAAAAAAAABAAAAeA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABzCQAAAAAAAHMJAAAAAAAAAAAAAAAA8L8"
				],
				[
					191,
					1,
					"insert",
					{
						"characters": "x="
					},
					"AgAAAHIJAAAAAAAAcwkAAAAAAAAAAAAAcwkAAAAAAAB0CQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByCQAAAAAAAHIJAAAAAAAAAAAAAAAA8L8"
				],
				[
					192,
					2,
					"left_delete",
					null,
					"AgAAAHMJAAAAAAAAcwkAAAAAAAABAAAAPXIJAAAAAAAAcgkAAAAAAAABAAAAeA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB0CQAAAAAAAHQJAAAAAAAAAAAAAAAA8L8"
				],
				[
					193,
					1,
					"insert",
					{
						"characters": "ex=mod"
					},
					"BgAAAHIJAAAAAAAAcwkAAAAAAAAAAAAAcwkAAAAAAAB0CQAAAAAAAAAAAAB0CQAAAAAAAHUJAAAAAAAAAAAAAHUJAAAAAAAAdgkAAAAAAAAAAAAAdgkAAAAAAAB3CQAAAAAAAAAAAAB3CQAAAAAAAHgJAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByCQAAAAAAAHIJAAAAAAAAAAAAAAAA8L8"
				],
				[
					194,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAHgJAAAAAAAAegkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4CQAAAAAAAHgJAAAAAAAAAAAAAAAA8L8"
				],
				[
					195,
					1,
					"insert",
					{
						"characters": "inde"
					},
					"BAAAAHkJAAAAAAAAegkAAAAAAAAAAAAAegkAAAAAAAB7CQAAAAAAAAAAAAB7CQAAAAAAAHwJAAAAAAAAAAAAAHwJAAAAAAAAfQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5CQAAAAAAAHkJAAAAAAAAAAAAAAAA8L8"
				],
				[
					196,
					4,
					"left_delete",
					null,
					"BAAAAHwJAAAAAAAAfAkAAAAAAAABAAAAZXsJAAAAAAAAewkAAAAAAAABAAAAZHoJAAAAAAAAegkAAAAAAAABAAAAbnkJAAAAAAAAeQkAAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9CQAAAAAAAH0JAAAAAAAAAAAAAAAA8L8"
				],
				[
					197,
					1,
					"insert",
					{
						"characters": "+index,"
					},
					"BwAAAHkJAAAAAAAAegkAAAAAAAAAAAAAegkAAAAAAAB7CQAAAAAAAAAAAAB7CQAAAAAAAHwJAAAAAAAAAAAAAHwJAAAAAAAAfQkAAAAAAAAAAAAAfQkAAAAAAAB+CQAAAAAAAAAAAAB+CQAAAAAAAH8JAAAAAAAAAAAAAH8JAAAAAAAAgAkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5CQAAAAAAAHkJAAAAAAAAAAAAAAAA8L8"
				],
				[
					198,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAIAJAAAAAAAAgQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACACQAAAAAAAIAJAAAAAAAAAAAAAAAA8L8"
				],
				[
					201,
					1,
					"insert",
					{
						"characters": "tihs"
					},
					"BAAAAIEJAAAAAAAAggkAAAAAAAAAAAAAggkAAAAAAACDCQAAAAAAAAAAAACDCQAAAAAAAIQJAAAAAAAAAAAAAIQJAAAAAAAAhQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACBCQAAAAAAAIEJAAAAAAAAAAAAAAAA8L8"
				],
				[
					202,
					3,
					"left_delete",
					null,
					"AwAAAIQJAAAAAAAAhAkAAAAAAAABAAAAc4MJAAAAAAAAgwkAAAAAAAABAAAAaIIJAAAAAAAAggkAAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACFCQAAAAAAAIUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					203,
					1,
					"insert",
					{
						"characters": "his.length"
					},
					"CgAAAIIJAAAAAAAAgwkAAAAAAAAAAAAAgwkAAAAAAACECQAAAAAAAAAAAACECQAAAAAAAIUJAAAAAAAAAAAAAIUJAAAAAAAAhgkAAAAAAAAAAAAAhgkAAAAAAACHCQAAAAAAAAAAAACHCQAAAAAAAIgJAAAAAAAAAAAAAIgJAAAAAAAAiQkAAAAAAAAAAAAAiQkAAAAAAACKCQAAAAAAAAAAAACKCQAAAAAAAIsJAAAAAAAAAAAAAIsJAAAAAAAAjAkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCCQAAAAAAAIIJAAAAAAAAAAAAAAAA8L8"
				],
				[
					205,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAI0JAAAAAAAAjgkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNCQAAAAAAAI0JAAAAAAAAAAAAAAAA8L8"
				],
				[
					212,
					1,
					"left_delete",
					null,
					"AQAAAJ0JAAAAAAAAnQkAAAAAAAABAAAAKw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeCQAAAAAAAJ4JAAAAAAAAAAAAAAAA8L8"
				],
				[
					217,
					1,
					"cut",
					null,
					"AQAAAHUJAAAAAAAAdQkAAAAAAAAYAAAAbW9kKCtpbmRleCwgdGhpcy5sZW5ndGgp",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1CQAAAAAAAI0JAAAAAAAAAAAAAAAA8L8"
				],
				[
					218,
					1,
					"paste",
					null,
					"AQAAAHUJAAAAAAAAjQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1CQAAAAAAAHUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					221,
					5,
					"left_delete",
					null,
					"BQAAAKEJAAAAAAAAoQkAAAAAAAABAAAAeKAJAAAAAAAAoAkAAAAAAAABAAAAZZ8JAAAAAAAAnwkAAAAAAAABAAAAZJ4JAAAAAAAAngkAAAAAAAABAAAAbp0JAAAAAAAAnQkAAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACiCQAAAAAAAKIJAAAAAAAAAAAAAAAA8L8"
				],
				[
					222,
					1,
					"paste",
					null,
					"AQAAAJ0JAAAAAAAAtQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACdCQAAAAAAAJ0JAAAAAAAAAAAAAAAA8L8"
				],
				[
					226,
					1,
					"cut",
					null,
					"AQAAAG8JAAAAAAAAbwkAAAAAAAAiAAAAaW5kZXg9bW9kKCtpbmRleCwgdGhpcy5sZW5ndGgpOwogIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABvCQAAAAAAAJEJAAAAAAAAAAAAAAAAMEA"
				],
				[
					242,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAA4hAAAAAAAAECEAAAAAAAAAAAAAUCAAAAAAAABSIAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAOIQAAAAAAAFAgAAAAAAAAAAAAAAAA8L8"
				],
				[
					248,
					1,
					"left_delete",
					null,
					"AQAAAFAgAAAAAAAAUCAAAAAAAADEAAAALypQb2ludExpc3QucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKHByZWQpIHsKICBsZXQgcmV0ID0gbmV3IFBvaW50TGlzdCgpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIChwLCBpLCBsKSA9PiBwcmVkKHAsIGksIGwpICYmIHJldC5wdXNoKG5ldyBQb2ludChsW2ldKSkpOwogIHJldHVybiByZXQ7Cn07Ki8KCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABQIAAAAAAAABQhAAAAAAAAAAAAAAAAAAA"
				],
				[
					262,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAD8MwAAaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL3BvaW50LmpzJzsKaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4vcmVjdC5qcyc7CmltcG9ydCB7IExpbmUgfSBmcm9tICcuL2xpbmUuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgaW1tdXRhYmxlQ2xhc3MsIGluc3BlY3RTeW1ib2wsIHR5cGVzLCBpc09iamVjdCwgbW9kIH0gZnJvbSAnLi4vbWlzYy5qcyc7CgpleHBvcnQgY2xhc3MgUG9pbnRMaXN0IGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgIGxldCBbcG9pbnRzLCB0Zm4gPSAoLi4uYXJncykgPT4gbmV3IFBvaW50KC4uLmFyZ3MpXSA9IGFyZ3M7CgogICAgc3VwZXIoKTsKICAgIGNvbnN0IGJhc2UgPSBBcnJheTsKICAgIGxldCByZXQgPSBuZXcudGFyZ2V0ID8gdGhpcyA6IFtdOwoKICAgIGlmKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgfHwgdHlwZXMuaXNJdGVyYWJsZShhcmdzWzBdKSkgYXJncyA9IFsuLi5hcmdzWzBdXTsKCiAgICBpZih0eXBlb2YgcG9pbnRzID09PSAnc3RyaW5nJykgewogICAgICBjb25zdCBtYXRjaGVzID0gWy4uLnBvaW50cy5tYXRjaEFsbCgvWy0uMC05LF0rL2cpXTsKCiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBtYXRjaGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgY29vcmRzID0gKG1hdGNoZXNbaV1bMF0gKyAnJykuc3BsaXQoLywvZykubWFwKG4gPT4gK24pOwoKICAgICAgICByZXQucHVzaCh0Zm4oLi4uY29vcmRzKSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZihhcmdzWzBdICYmIFBvaW50KGFyZ3NbMF0pKSB7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSByZXQucHVzaChQb2ludChhcmdzW2ldKSk7CiAgICB9IGVsc2UgaWYoYXJncy5sZW5ndGggIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgYXJnc1swXSA9PSAnbnVtYmVyJykgewoKICAgICAgd2hpbGUoYXJncy5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IGNvb3JkcyA9IGFyZ3Muc3BsaWNlKDAsIDIpOwogICAgICAgIHJldC5wdXNoKFBvaW50KGNvb3JkcykpOwogICAgICB9CiAgICB9CiAgICBpZighKHJldCBpbnN0YW5jZW9mIFBvaW50TGlzdCkpIHsKICAgICAgbGV0IHByb3RvID0gUG9pbnRMaXN0LnByb3RvdHlwZTsKICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgcHJvdG8pOwogICAgfQogICAgaWYoISh0aGlzIGluc3RhbmNlb2YgUG9pbnRMaXN0KSkgcmV0dXJuIHJldDsKICB9Cn0KClBvaW50TGlzdC5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdQb2ludExpc3QnOwoKZGVmaW5lKFBvaW50TGlzdCwgewogICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBQb2ludExpc3Q7CiAgfQp9KTsKClBvaW50TGlzdC5wcm90b3R5cGVbU3ltYm9sLmlzQ29uY2F0U3ByZWFkYWJsZV0gPSB0cnVlOwpQb2ludExpc3QucHJvdG90eXBlLnJvdGF0ZVJpZ2h0ID0gZnVuY3Rpb24obikgewogIHRoaXMudW5zaGlmdCguLi50aGlzLnNwbGljZShuICUgdGhpcy5sZW5ndGgsIHRoaXMubGVuZ3RoKSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnJvdGF0ZUxlZnQgPSBmdW5jdGlvbihuKSB7CiAgcmV0dXJuIHRoaXMucm90YXRlUmlnaHQodGhpcy5sZW5ndGggLSAobiAlIHRoaXMubGVuZ3RoKSk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uKG4pIHsKICBpZihuIDwgMCkgcmV0dXJuIHRoaXMucm90YXRlTGVmdCgtbik7CiAgaWYobiA+IDApIHJldHVybiB0aGlzLnJvdGF0ZVJpZ2h0KG4pOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oLi4uYXJncykgewogIHdoaWxlKGFyZ3MubGVuZ3RoID4gMCkgQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBuZXcgUG9pbnQoYXJncykpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oLi4uYXJncykgewogIGxldCBwb2ludHMgPSBbXTsKICB3aGlsZShhcmdzLmxlbmd0aCA+IDApIHBvaW50cy5wdXNoKG5ldyBQb2ludChhcmdzKSk7CiAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIDAsIDAsIC4uLnBvaW50cyk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLmxlbmd0aCA9IDA7ClBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHRoaXMubGVuZ3RoOwp9OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9pbnRMaXN0LnByb3RvdHlwZSwgJ3NpemUnLCB7CiAgZ2V0KCkgewogICAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgfQp9KTsKUG9pbnRMaXN0LnByb3RvdHlwZS5hdCA9IGZ1bmN0aW9uKGluZGV4KSB7CiAgcmV0dXJuIHRoaXNbbW9kKCtpbmRleCwgdGhpcy5sZW5ndGgpXTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuc3BsaWNlID0gZnVuY3Rpb24oKSB7CiAgbGV0IGFyZ3MgPSBbLi4uYXJndW1lbnRzXTsKICBjb25zdCBzdGFydCA9IGFyZ3Muc2hpZnQoKTsKICBjb25zdCByZW1vdmUgPSBhcmdzLnNoaWZ0KCk7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkodGhpcywgW3N0YXJ0LCByZW1vdmUsIC4uLmFyZ3MubWFwKGFyZyA9PiAoYXJnIGluc3RhbmNlb2YgUG9pbnQgPyBhcmcgOiBuZXcgUG9pbnQoYXJnKSkpXSk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwpQb2ludExpc3QucHJvdG90eXBlLnJlbW92ZVNlZ21lbnQgPSBmdW5jdGlvbihpbmRleCkgewogIGxldCBpbmRleGVzID0gW1BvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXggLSAxKSwgUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXguY2FsbCh0aGlzLCBpbmRleCksIFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4LmNhbGwodGhpcywgaW5kZXggKyAxKV07CiAgbGV0IGxpbmVzID0gaW5kZXhlcy5tYXAoaSA9PiBQb2ludExpc3QucHJvdG90eXBlLmdldExpbmUuY2FsbCh0aGlzLCBpKSk7CiAgbGV0IHBvaW50ID0gTGluZS5pbnRlcnNlY3QobGluZXNbMF0sIGxpbmVzWzJdKTsKICBpZihwb2ludCkgewogICAgUG9pbnRMaXN0LnByb3RvdHlwZS5zcGxpY2UuY2FsbCh0aGlzLCAwLCAyLCBuZXcgUG9pbnQocG9pbnQpKTsKICB9Cn07CgoKUG9pbnRMaXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKICBsZXQgcG9pbnRzID0gUG9pbnRMaXN0LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCBwID0+IFBvaW50LnByb3RvdHlwZS5jbG9uZS5jYWxsKHApKTsKICByZXR1cm4gbmV3IGN0b3IocG9pbnRzKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUudG9Qb2xhciA9IGZ1bmN0aW9uKHRmbikgewogIGxldCB0ID0gdHlwZW9mIHRmbiA9PSAnZnVuY3Rpb24nID8gdGZuIDogKHgsIHkpID0+ICh7IHggLCB5IH0pOwogIHJldHVybiBQb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHAgPT4gewogICAgY29uc3QgYW5nbGUgPSBQb2ludC5wcm90b3R5cGUudG9BbmdsZS5jYWxsKHApOwogICAgcmV0dXJuIG5ldyBQb2ludCh0KGFuZ2xlLCBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbChwKSkpOwogIH0pOwoKICBsZXQgcmV0ID0gW107CiAgcmV0LnNwbGljZS5hcHBseShyZXQsIFsKICAgIDAsCiAgICByZXQubGVuZ3RoLAogICAgLi4uUG9pbnRMaXN0LnByb3RvdHlwZS5tYXAuY2FsbCh0aGlzLCBwID0+IHsKICAgICAgY29uc3QgYW5nbGUgPSBQb2ludC5wcm90b3R5cGUudG9BbmdsZS5jYWxsKHApOwogICAgICByZXR1cm4gdChhbmdsZSwgUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlLmNhbGwocCkpOwogICAgfSkKICBdKTsKICByZXR1cm4gcmV0Owp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5mcm9tUG9sYXIgPSBmdW5jdGlvbih0Zm4pIHsKCiAgbGV0IHQgPSB0eXBlb2YgdGZuID09ICdmdW5jdGlvbicgPyB0Zm4gOiAoeCwgeSkgPT4gKHsgeCAsIHkgfSk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiB7CiAgICBsZXQgciA9IHQocC54LCBwLnkpOwogICAgcmV0dXJuIG5ldyBQb2ludCgpLmZyb21BbmdsZShyLngsIHIueSk7CiAgfSk7CgogIHJldC5zcGxpY2UuYXBwbHkocmV0LCBbCiAgICAwLAogICAgcmV0Lmxlbmd0aCwKICAgIC4uLlBvaW50TGlzdC5wcm90b3R5cGUubWFwLmNhbGwodGhpcywgcCA9PiB7CiAgICAgIGxldCByID0gdChwLngsIHAueSk7CiAgICAgIHJldHVybiBQb2ludC5wcm90b3R5cGUuZnJvbUFuZ2xlLmNhbGwoci54LCByLnkpOwogICAgfSkKICBdKTsKICByZXR1cm4gcmV0Owp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oY3R4LCBjbG9zZSA9IGZhbHNlKSB7CiAgY29uc3QgZmlyc3QgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgMCk7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBjdHgudG8oZmlyc3QueCwgZmlyc3QueSk7CiAgZm9yKGxldCBpID0gMTsgaSA8IGxlbjsgaSsrKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBpKTsKICAgIGN0eC5saW5lKHgsIHkpOwogIH0KICBpZihjbG9zZSkgY3R4LmxpbmUoZmlyc3QueCwgZmlyc3QueSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLmFyZWEgPSBmdW5jdGlvbigpIHsKICBsZXQgYXJlYSA9IDA7CiAgbGV0IGk7CiAgbGV0IGo7CiAgbGV0IHBvaW50MTsKICBsZXQgcG9pbnQyOwogIGNvbnN0IGxlbiA9IFBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGVuZ3RoLmNhbGwodGhpcyk7CiAgZm9yKGkgPSAwLCBqID0gbGVuIC0gMTsgaSA8IGxlbjsgaiA9IGksIGkgKz0gMSkgewogICAgcG9pbnQxID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGkpOwogICAgcG9pbnQyID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGopOwogICAgYXJlYSArPSBwb2ludDEueCAqIHBvaW50Mi55OwogICAgYXJlYSAtPSBwb2ludDEueSAqIHBvaW50Mi54OwogIH0KICBhcmVhIC89IDI7CiAgcmV0dXJuIGFyZWE7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLmNlbnRyb2lkID0gZnVuY3Rpb24oKSB7CiAgbGV0IHggPSAwOwogIGxldCB5ID0gMDsKICBsZXQgaTsKICBsZXQgajsKICBsZXQgZjsKICBsZXQgcG9pbnQxOwogIGxldCBwb2ludDI7CiAgY29uc3QgbGVuID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKTsKICBmb3IoaSA9IDAsIGogPSBsZW4gLSAxOyBpIDwgbGVuOyBqID0gaSwgaSArPSAxKSB7CiAgICBwb2ludDEgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICBwb2ludDIgPSBQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaik7CiAgICBmID0gcG9pbnQxLnggKiBwb2ludDIueSAtIHBvaW50Mi54ICogcG9pbnQxLnk7CiAgICB4ICs9IChwb2ludDEueCArIHBvaW50Mi54KSAqIGY7CiAgICB5ICs9IChwb2ludDEueSArIHBvaW50Mi55KSAqIGY7CiAgfQogIGYgPSBQb2ludExpc3QucHJvdG90eXBlLmFyZWEuY2FsbCh0aGlzKSAqIDY7CiAgcmV0dXJuIG5ldyBQb2ludCh4IC8gZiwgeSAvIGYpOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5hdmcgPSBmdW5jdGlvbigpIHsKICBsZXQgcmV0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLCAoYWNjLCBwKSA9PiBhY2MuYWRkKHApLCBuZXcgUG9pbnQoKSk7CiAgcmV0dXJuIHJldC5kaXYoUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMZW5ndGguY2FsbCh0aGlzKSk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLmJib3ggPSBmdW5jdGlvbiBCQm94KAogIHByb3RvID0gewogICAgY29uc3RydWN0b3I6IFBvaW50TGlzdC5wcm90b3R5cGUuYmJveCwKICAgIHRvU3RyaW5nKCkgewogICAgICByZXR1cm4gYHt4MTokeyh0aGlzLngxICsgJycpLnBhZFN0YXJ0KDQsICcgJyl9LHgyOiR7KHRoaXMueDIgKyAnJykucGFkU3RhcnQoNCwgJyAnKX0seTE6JHsodGhpcy55MSArICcnKS5wYWRTdGFydCg0LCAnICcpfSx5Mjokeyh0aGlzLnkyICsgJycpLnBhZFN0YXJ0KDQsICcgJyl9fWA7CiAgICB9CiAgfQopIHsKICBjb25zdCBsZW4gPSBQb2ludExpc3QucHJvdG90eXBlLmdldExlbmd0aC5jYWxsKHRoaXMpOwogIGlmKCFsZW4pIHJldHVybiB7fTsKICBjb25zdCBmaXJzdCA9IFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCAwKTsKICBsZXQgcmV0ID0gewogICAgeDE6IGZpcnN0LngsCiAgICB4MjogZmlyc3QueCwKICAgIHkxOiBmaXJzdC55LAogICAgeTI6IGZpcnN0LnkKICB9OwoKICBmb3IobGV0IGkgPSAxOyBpIDwgbGVuOyBpKyspIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5hdC5jYWxsKHRoaXMsIGkpOwogICAgaWYoeCA8IHJldC54MSkgcmV0LngxID0geDsKICAgIGlmKHggPiByZXQueDIpIHJldC54MiA9IHg7CiAgICBpZih5IDwgcmV0LnkxKSByZXQueTEgPSB5OwogICAgaWYoeSA+IHJldC55MikgcmV0LnkyID0geTsKICB9CiAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihyZXQsIHByb3RvKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUucmVjdCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgUmVjdChQb2ludExpc3QucHJvdG90eXBlLmJib3guY2FsbCh0aGlzKSk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnhyYW5nZSA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IGJib3ggPSBQb2ludExpc3QucHJvdG90eXBlLmJib3guY2FsbCh0aGlzKTsKICByZXR1cm4gW2Jib3gueDEsIGJib3gueDJdOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5ub3JtYWxpemVYID0gZnVuY3Rpb24obmV3VmFsID0geCA9PiB4KSB7CiAgY29uc3QgeHJhbmdlID0gUG9pbnRMaXN0LnByb3RvdHlwZS54cmFuZ2UuY2FsbCh0aGlzKTsKICBjb25zdCB4ZGlmZiA9IHhyYW5nZVsxXSAtIHhyYW5nZVswXTsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCAocCwgaSwgbCkgPT4gewogICAgbFtpXS54ID0gbmV3VmFsKChsW2ldLnggLSB4cmFuZ2VbMF0pIC8geGRpZmYpOwogIH0pOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS55cmFuZ2UgPSBmdW5jdGlvbigpIHsKICBjb25zdCBiYm94ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5iYm94LmNhbGwodGhpcyk7CiAgcmV0dXJuIFtiYm94LnkxLCBiYm94LnkyXTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUubm9ybWFsaXplWSA9IGZ1bmN0aW9uKG5ld1ZhbCA9IHkgPT4geSkgewogIGNvbnN0IHlyYW5nZSA9IFBvaW50TGlzdC5wcm90b3R5cGUueXJhbmdlLmNhbGwodGhpcyk7CiAgY29uc3QgeWRpZmYgPSB5cmFuZ2VbMV0gLSB5cmFuZ2VbMF07CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgKHAsIGksIGwpID0+IHsKICAgIGxbaV0ueSA9IG5ld1ZhbCgobFtpXS55IC0geXJhbmdlWzBdKSAvIHlkaWZmKTsKICB9KTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuYm91bmRpbmdSZWN0ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBSZWN0KFBvaW50TGlzdC5wcm90b3R5cGUuYmJveC5jYWxsKHRoaXMpKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkgewogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwoaXQsIHgsIHkpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24obSkgewogIGlmKGlzT2JqZWN0KG0pICYmIHR5cGVvZiBtLnRvTWF0cml4ID09ICdmdW5jdGlvbicpIG0gPSBtLnRvTWF0cml4KCk7CiAgaWYoaXNPYmplY3QobSkgJiYgdHlwZW9mIG0udHJhbnNmb3JtUG9pbnQgPT0gJ2Z1bmN0aW9uJykgewogICAgdGhpcy5mb3JFYWNoKHAgPT4gbS50cmFuc2Zvcm1Qb2ludChwKSk7CiAgICByZXR1cm4gdGhpczsKICB9CiAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIFBvaW50LnByb3RvdHlwZS50cmFuc2Zvcm0uY2FsbCh0aGlzW2ldLCBtKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuZ2V0TGluZUluZGV4ID0gZnVuY3Rpb24oaW5kZXgpIHsKICBjb25zdCBsZW4gPSBQb2ludExpc3QucHJvdG90eXBlLmdldExlbmd0aC5jYWxsKHRoaXMpOwogIHJldHVybiAoaW5kZXggPCAwID8gbGVuICsgaW5kZXggOiBpbmRleCkgJSBsZW47Cn07CgpQb2ludExpc3QucHJvdG90eXBlLmdldExpbmUgPSBmdW5jdGlvbihpbmRleCkgewogIGxldCBhID0gUG9pbnRMaXN0LnByb3RvdHlwZS5nZXRMaW5lSW5kZXguY2FsbCh0aGlzLCBpbmRleCk7CiAgbGV0IGIgPSBQb2ludExpc3QucHJvdG90eXBlLmdldExpbmVJbmRleC5jYWxsKHRoaXMsIGluZGV4ICsgMSk7CiAgcmV0dXJuIFtQb2ludExpc3QucHJvdG90eXBlLmF0LmNhbGwodGhpcywgYSksIFBvaW50TGlzdC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLCBiKV07Cn07CgpQb2ludExpc3QucHJvdG90eXBlLmxpbmVzID0gZnVuY3Rpb24oY2xvc2VkID0gZmFsc2UpIHsKICBjb25zdCBwb2ludHMgPSB0aGlzOwogIGNvbnN0IG4gPSBwb2ludHMubGVuZ3RoIC0gKGNsb3NlZCA/IDAgOiAxKTsKICBjb25zdCBpdGVyYWJsZU9iaiA9IHsKICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgICBsZXQgc3RlcCA9IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmV4dCgpIHsKICAgICAgICAgIGxldCB2YWx1ZTsKICAgICAgICAgIGxldCBkb25lID0gc3RlcCA+PSBuOwogICAgICAgICAgaWYoIWRvbmUpIHsKICAgICAgICAgICAgdmFsdWUgPSBuZXcgTGluZShwb2ludHNbc3RlcF0sIHBvaW50c1soc3RlcCArIDEpICUgcG9pbnRzLmxlbmd0aF0pOwogICAgICAgICAgICBzdGVwKys7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgZG9uZSB9OwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9OwogIHJldHVybiBpdGVyYWJsZU9iajsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uKHByZWQpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNvcnQuY2FsbCh0aGlzLCBwcmVkIHx8ICgoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLnZhbHVlT2YuY2FsbChhKSAtIFBvaW50LnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoYikpKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihzZXAgPSAnLCcsIHByZWMpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIHBvaW50ID0+IChQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPyBQb2ludC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwb2ludCwgcHJlYywgc2VwKSA6IHBvaW50ICsgJycpKS5qb2luKCcgJyk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSBmdW5jdGlvbihzZXAgPSAnLCcsIHByZWMpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcAogICAgLmNhbGwodGhpcywgcG9pbnQgPT4gcG9pbnQucm91bmQocHJlYykpCiAgICAubWFwKHBvaW50ID0+IGAke3BvaW50Lnh9JHtzZXB9JHtwb2ludC55fWApCiAgICAuam9pbignICcpOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS50b1BhdGggPSBmdW5jdGlvbigpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIChwb2ludCwgaSkgPT4gYCR7aSA+IDAgPyAnTCcgOiAnTSd9JHtwb2ludH1gKS5qb2luKCcgJyk7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbCh0aGlzLCAoYWNjLCBwb2ludCwgaSkgPT4gKGFjYyA/IGFjYyArICcgJyA6ICcnKSArIGAke2FjYyA/ICdMJyA6ICdNJ30ke3BvaW50fWApOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS50b1NvdXJjZSA9IGZ1bmN0aW9uKG9wdHMgPSB7fSkgewogIGlmKG9wdHMuYXNTdHJpbmcpIHJldHVybiBgbmV3IFBvaW50TGlzdCgiJHt0aGlzLnRvU3RyaW5nKG9wdHMpfSIpYDsKCiAgbGV0IGZuID0gb3B0cy5hc0FycmF5CiAgICA/IHAgPT4gYFske3AueH0sJHtwLnl9XWAKICAgIDogb3B0cy5wbGFpbk9iagogICAgPyBwID0+CiAgICAgICAgUG9pbnQudG9Tb3VyY2UocCwgewogICAgICAgICAgc3BhY2U6ICcnLAogICAgICAgICAgcGFkZGluZzogJyAnLAogICAgICAgICAgc2VwYXJhdG9yOiAnLCcKICAgICAgICB9KQogICAgOiBwb2ludCA9PgogICAgICAgIFBvaW50LnByb3RvdHlwZS50b1NvdXJjZS5jYWxsKHBvaW50LCB7CiAgICAgICAgICAuLi5vcHRzLAogICAgICAgICAgcGxhaW5PYmo6IHRydWUKICAgICAgICB9KTsKICByZXR1cm4gJ25ldyBQb2ludExpc3QoWycgKyBQb2ludExpc3QucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsIGZuKS5qb2luKCcsJykgKyAnXSknOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwdCkgewogIGlmKCEocHQgaW5zdGFuY2VvZiBQb2ludCkpIHB0ID0gbmV3IFBvaW50KC4uLmFyZ3VtZW50cyk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLmFkZC5jYWxsKGl0LCBwdCkpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5zdW0gPSBmdW5jdGlvbihwdCkgewogIGxldCByZXQgPSBQb2ludExpc3QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUuYWRkLmFwcGx5KHJldCwgYXJndW1lbnRzKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24ocHQpIHsKICBpZighKHB0IGluc3RhbmNlb2YgUG9pbnQpKSBwdCA9IG5ldyBQb2ludCguLi5hcmd1bWVudHMpOwogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5zdWIuY2FsbChpdCwgcHQpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuZGlmZiA9IGZ1bmN0aW9uKHB0KSB7CiAgbGV0IHJldCA9IFBvaW50TGlzdC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTsKICByZXR1cm4gUG9pbnRMaXN0LnByb3RvdHlwZS5zdWIuYXBwbHkocmV0LCBhcmd1bWVudHMpOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbihwdCkgewogIGlmKHR5cGVvZiBwdCA9PSAnbnVtYmVyJykgcHQgPSBuZXcgUG9pbnQoeyB4OiBwdCwgeTogcHQgfSk7CiAgaWYoIShwdCBpbnN0YW5jZW9mIFBvaW50KSkgcHQgPSBuZXcgUG9pbnQoLi4uYXJndW1lbnRzKTsKICBQb2ludExpc3QucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aGlzLCBpdCA9PiBQb2ludC5wcm90b3R5cGUubXVsLmNhbGwoaXQsIHB0KSk7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnByb2QgPSBmdW5jdGlvbihwdCkgewogIGxldCByZXQgPSBQb2ludExpc3QucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50TGlzdC5wcm90b3R5cGUubXVsLmFwcGx5KHJldCwgYXJndW1lbnRzKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24ocHQpIHsKICBpZih0eXBlb2YgcHQgPT0gJ251bWJlcicpIHB0ID0gbmV3IFBvaW50KHsgeDogcHQsIHk6IHB0IH0pOwogIGlmKCEocHQgaW5zdGFuY2VvZiBQb2ludCkpIHB0ID0gbmV3IFBvaW50KC4uLmFyZ3VtZW50cyk7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLmRpdi5jYWxsKGl0LCBwdCkpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5xdW90ID0gZnVuY3Rpb24ocHQpIHsKICBsZXQgcmV0ID0gUG9pbnRMaXN0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpOwogIHJldHVybiBQb2ludExpc3QucHJvdG90eXBlLmRpdi5hcHBseShyZXQsIGFyZ3VtZW50cyk7Cn07CgpQb2ludExpc3QucHJvdG90eXBlLnJvdW5kID0gZnVuY3Rpb24ocHJlYywgZGlnaXRzLCB0eXBlKSB7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLnJvdW5kLmNhbGwoaXQsIHByZWMsIGRpZ2l0cywgdHlwZSkpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnRMaXN0LnByb3RvdHlwZS5jZWlsID0gZnVuY3Rpb24ocHJlYykgewogIFBvaW50TGlzdC5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMsIGl0ID0+IFBvaW50LnByb3RvdHlwZS5jZWlsLmNhbGwoaXQsIHByZWMpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUuZmxvb3IgPSBmdW5jdGlvbihwcmVjKSB7CiAgUG9pbnRMaXN0LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcywgaXQgPT4gUG9pbnQucHJvdG90eXBlLmZsb29yLmNhbGwoaXQsIHByZWMpKTsKICByZXR1cm4gdGhpczsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUudG9NYXRyaXggPSBmdW5jdGlvbigpIHsKICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMsICh7IHgsIHkgfSkgPT4gT2JqZWN0LmZyZWV6ZShbeCwgeV0pKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGUudG9Qb2ludHMgPSBmdW5jdGlvbihjdG9yID0gQXJyYXkub2YpIHsKICByZXR1cm4gY3RvciguLi50aGlzKTsKfTsKClBvaW50TGlzdC5wcm90b3R5cGVbaW5zcGVjdFN5bWJvbF0gPSBmdW5jdGlvbihkZXB0aCwgb3B0aW9ucykgewoKICBjb25zdCBvYmogPSBBcnJheS5mcm9tKHRoaXMpOwogIHJldHVybiAoCiAgICBgXHgxYlsxOzMxbSR7Y2xhc3NOYW1lKHRoaXMpfVx4MWJbMDszNm1gICsgb2JqLnJlZHVjZSgoYWNjLCB7IHgsIHkgfSkgPT4gYWNjICsgYCAke3h9LCR7eX1gLCAnJykgKyBgXHgxYlswbWAKCiAgKTsKfTsKCmZvcihsZXQgbmFtZSBvZiBbJ3B1c2gnLCAnc3BsaWNlJywgJ2Nsb25lJywgJ2FyZWEnLCAnY2VudHJvaWQnLCAnYXZnJywgJ2Jib3gnLCAncmVjdCcsICd4cmFuZ2UnLCAneXJhbmdlJywgJ2JvdW5kaW5nUmVjdCddKSB7CiAgUG9pbnRMaXN0W25hbWVdID0gcG9pbnRzID0+IFBvaW50TGlzdC5wcm90b3R5cGVbbmFtZV0uY2FsbChwb2ludHMpOwp9CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlUG9pbnRMaXN0ID0gaW1tdXRhYmxlQ2xhc3MoUG9pbnRMaXN0KTsKAAAAAAAAAADqMwAAAAAAAAAAAAAAAAAAAAAAAOozAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABQKQAAAAAAAFEpAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "io-helpers.js",
			"settings":
			{
				"buffer_size": 11741,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					14,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAADCLQAAaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnOwppbXBvcnQgKiBhcyBwYXRoIGZyb20gJy4vbGliL3BhdGguanMnOwppbXBvcnQgeyB0eXBlcywgdG9TdHJpbmcsIHF1b3RlLCBlc2NhcGUsIHByZWRpY2F0ZSB9IGZyb20gJy4vbGliL21pc2MuanMnOwppbXBvcnQgY2hpbGRfcHJvY2VzcyBmcm9tICdjaGlsZF9wcm9jZXNzJzsKCmxldCBianNvbjsKCmltcG9ydCgnYmpzb24nKSAudGhlbihtID0+IChianNvbiA9IG0pKSAuY2F0Y2goKCkgPT4ge30pOwoKbGV0IG1tYXA7CgppbXBvcnQoJ21tYXAnKSAudGhlbihtID0+IChtbWFwID0gbSkpIC5jYXRjaCgoKSA9PiB7fSk7CgpsZXQgeG1sOwoKaW1wb3J0KCd4bWwnKSAudGhlbihtID0+ICh4bWwgPSBtKSkgLmNhdGNoKCgpID0+IHt9KTsKCmV4cG9ydCBmdW5jdGlvbiBJZkRlYnVnKHRva2VuKSB7CiAgY29uc3QgeyBERUJVRyA9ICcnIH0gPSBnbG9iYWxUaGlzLnByb2Nlc3MgPyBnbG9iYWxUaGlzLnByb2Nlc3MuZW52IDoge307IC8vc3RkLmdldGVudmlyb24oKTsKCiAgY29uc3QgdG9rTGlzdCA9IERFQlVHLnNwbGl0KC9bXkEtWmEtejAtOV9dKy9nKTsKCiAgcmV0dXJuIHRva0xpc3QuaW5kZXhPZih0b2tlbikgIT0gLTE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBMb2dJZkRlYnVnKHRva2VuLCBsb2dnZXJGbikgewogIGlmKCFJZkRlYnVnKHRva2VuKSkgcmV0dXJuICgpID0+IHt9OwoKICByZXR1cm4gbG9nZ2VyRm47Cn0KCmNvbnN0IGRlYnVnID0gTG9nSWZEZWJ1ZygnaW8taGVscGVycycsICguLi5hcmdzKSA9PiBjb25zb2xlLmxvZyguLi5hcmdzKSk7CgpleHBvcnQgZnVuY3Rpb24gUmVhZEZkKGZkLCBiaW5hcnkpIHsKICBsZXQgYWIgPSBuZXcgQXJyYXlCdWZmZXIoMTAyNCk7CiAgbGV0IG91dCA9ICcnOwogIGZvcig7OykgewogICAgbGV0IHJldCA9IGZzLnJlYWRTeW5jKGZkLCBhYiwgMCwgMTAyNCk7CgogICAgaWYocmV0IDw9IDApIGJyZWFrOwoKICAgIG91dCArPSB0b1N0cmluZyhhYi5zbGljZSgwLCByZXQpKTsKCiAgICBkZWJ1ZyhgUmVhZCAjJHtmZH06ICR7cmV0fSBieXRlc2ApOwogIH0KICByZXR1cm4gb3V0Owp9CgpleHBvcnQgZnVuY3Rpb24gUmVhZEZpbGUobmFtZSwgYmluYXJ5KSB7CiAgbGV0IHJldCA9IGZzLnJlYWRGaWxlU3luYyhuYW1lLCBiaW5hcnkgPyBudWxsIDogJ3V0Zi04Jyk7CgogIGRlYnVnKGBSZWFkICR7bmFtZX06ICR7cmV0Py5ieXRlTGVuZ3RofSBieXRlc2ApOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBMb2FkSGlzdG9yeShmaWxlbmFtZSkgewogIGxldCBjb250ZW50cyA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0Zi04Jyk7CiAgbGV0IGRhdGE7CgogIGNvbnN0IHBhcnNlID0gKCkgPT4gewogICAgdHJ5IHsKICAgICAgZGF0YSA9IEpTT04ucGFyc2UoY29udGVudHMpOwogICAgfSBjYXRjaChlKSB7fQogICAgaWYoZGF0YSkgcmV0dXJuIGRhdGE7CiAgICB0cnkgewogICAgICBkYXRhID0gY29udGVudHMuc3BsaXQoL1xuL2cpOwogICAgfSBjYXRjaChlKSB7fQogICAgaWYoZGF0YSkgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIChwYXJzZSgpID8/IFtdKS5maWx0ZXIoZW50cnkgPT4gKGVudHJ5ICsgJycpLnRyaW0oKSAhPSAnJyk7CiAgLy8ubWFwKGVudHJ5ID0+IGVudHJ5LnJlcGxhY2UoL1xcbi9nLCAnXG4nKSkKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRKU09OKGZpbGVuYW1lKSB7CiAgbGV0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGYtOCcpOwoKICBpZihkYXRhKSBkZWJ1ZyhgUmVhZEpTT046ICR7ZGF0YS5sZW5ndGh9IGJ5dGVzIHJlYWQgZnJvbSAnJHtmaWxlbmFtZX0nYCk7CiAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRYTUwoZmlsZW5hbWUsIC4uLmFyZ3MpIHsKICBsZXQgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgbnVsbCk7CgogIGlmKGRhdGEpIGRlYnVnKGBSZWFkWE1MOiAke2RhdGEubGVuZ3RofSBieXRlcyByZWFkIGZyb20gJyR7ZmlsZW5hbWV9J2ApOwogIHJldHVybiBkYXRhID8geG1sLnJlYWQoZGF0YSwgZmlsZW5hbWUsIC4uLmFyZ3MpIDogbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIE1hcEZpbGUoZmlsZW5hbWUpIHsKICBsZXQgZmQgPSBvcy5vcGVuKGZpbGVuYW1lLCBvcy5PX1JET05MWSk7CiAgbGV0IHsgc2l6ZSB9ID0gb3Muc3RhdChmaWxlbmFtZSlbMF07CiAgZGVidWcoYE1hcEZpbGVgLCB7IGZpbGVuYW1lLCBmZCwgc2l6ZSB9KTsKICBsZXQgZGF0YSA9IG1tYXAubW1hcCgwLCBzaXplICsgMTAsIG1tYXAuUFJPVF9SRUFELCBtbWFwLk1BUF9QUklWQVRFLCBmZCwgMCk7CiAgb3MuY2xvc2UoZmQpOwogIHJldHVybiBkYXRhOwp9CgpleHBvcnQgZnVuY3Rpb24gV3JpdGVGaWxlKG5hbWUsIGRhdGEsIHZlcmJvc2UgPSB0cnVlKSB7CiAgaWYodHlwZW9mIGRhdGEgPT0gJ29iamVjdCcgJiYgZGF0YSAhPT0gbnVsbCAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gZGF0YSkgewogICAgbGV0IGZkID0gZnMub3BlblN5bmMobmFtZSwgb3MuT19XUk9OTFkgfCBvcy5PX1RSVU5DIHwgb3MuT19DUkVBVCwgMG82NDQpOwogICAgbGV0IHIgPSAwOwogICAgZm9yKGxldCBpdGVtIG9mIGRhdGEpIHsKICAgICAgciArPSBmcy53cml0ZVN5bmMoZmQsIHRvQXJyYXlCdWZmZXIoaXRlbSArICcnKSk7CiAgICB9CiAgICBmcy5jbG9zZVN5bmMoZmQpOwogICAgbGV0IHN0YXQgPSBmcy5zdGF0U3luYyhuYW1lKTsKICAgIHJldHVybiBzdGF0Py5zaXplOwogIH0KICBpZihmcy5leGlzdHNTeW5jKG5hbWUpKSBmcy51bmxpbmtTeW5jKG5hbWUpOwoKICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSBkYXRhID0gZGF0YS5qb2luKCdcbicpOwoKICBpZih0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJyAmJiAhZGF0YS5lbmRzV2l0aCgnXG4nKSkgZGF0YSArPSAnXG4nOwogIGxldCByZXQgPSBmcy53cml0ZUZpbGVTeW5jKG5hbWUsIGRhdGEpOwoKICBpZih2ZXJib3NlKSBkZWJ1ZyhgV3JvdGUgJHtuYW1lfTogJHtyZXR9IGJ5dGVzYCk7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIFdyaXRlSlNPTihuYW1lLCBkYXRhLCAuLi5hcmdzKSB7CiAgY29uc3QgW2NvbXBhY3RdID0gYXJnczsKICBpZih0eXBlb2YgY29tcGFjdCA9PSAnYm9vbGVhbicpIGFyZ3MgPSBjb21wYWN0ID8gW10gOiBbbnVsbCwgMl07CgogIHJldHVybiBXcml0ZUZpbGUobmFtZSwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgLi4uYXJncykpOwp9CgpleHBvcnQgZnVuY3Rpb24gV3JpdGVYTUwobmFtZSwgZGF0YSwgLi4uYXJncykgewogIHJldHVybiBXcml0ZUZpbGUobmFtZSwgeG1sLndyaXRlKGRhdGEsIC4uLmFyZ3MpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRCSlNPTihmaWxlbmFtZSkgewogIGxldCBmZCA9IG9zLm9wZW4oZmlsZW5hbWUsIG9zLk9fUkRPTkxZKTsKICBsZXQgeyBzaXplIH0gPSBvcy5zdGF0KGZpbGVuYW1lKVswXTsKICBkZWJ1ZyhgUmVhZEJKU09OYCwgeyBmaWxlbmFtZSwgZmQsIHNpemUgfSk7CiAgbGV0IGRhdGEgPSBtbWFwLm1tYXAoMCwgc2l6ZSArIDEwLCBtbWFwLlBST1RfUkVBRCwgbW1hcC5NQVBfUFJJVkFURSwgZmQsIDApOwogIGRlYnVnKGBSZWFkQkpTT05gLCB7IGRhdGEgfSk7CiAgbGV0IHJldCA9IGJqc29uLnJlYWQoZGF0YSwgMCwgc2l6ZSk7CgogIG1tYXAubXVubWFwKGRhdGEpOwogIG9zLmNsb3NlKGZkKTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gV3JpdGVCSlNPTihuYW1lLCBkYXRhKSB7CiAgbGV0IGJ1ZiA9IGJqc29uLndyaXRlKGRhdGEpOwogIGxldCBzaXplID0gYnVmLmJ5dGVMZW5ndGg7CiAgbGV0IGZkID0gb3Mub3BlbihuYW1lLCBvcy5PX1dST05MWSB8IG9zLk9fQ1JFQVQgfCBvcy5PX1RSVU5DKTsKCiAgbGV0IHJldCA9IG9zLndyaXRlKGZkLCBidWYsIDAsIHNpemUpOwogIGRlYnVnKCdXcml0ZUJKU09OJywgeyBuYW1lLCBmZCwgc2l6ZSwgcmV0IH0pOwogIG9zLmNsb3NlKGZkKTsKCiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uKiBEaXJJdGVyYXRvciguLi5hcmdzKSB7CiAgbGV0IHByZWQgPSB0eXBlb2YgYXJnc1swXSAhPSAnc3RyaW5nJyA/IHByZWRpY2F0ZShhcmdzLnNoaWZ0KCkpIDogKCkgPT4gdHJ1ZTsKICBmb3IobGV0IGRpciBvZiBhcmdzKSB7CiAgICBkaXIgPSBkaXIucmVwbGFjZSgvfi9nLCBzdGQuZ2V0ZW52KCdIT01FJykpOwogICAgbGV0IGVudHJpZXMgPSBvcy5yZWFkZGlyKGRpcilbMF0gPz8gW107CiAgICBmb3IobGV0IGVudHJ5IG9mIGVudHJpZXMuc29ydCgpKSB7CiAgICAgIGxldCBmaWxlID0gcGF0aC5qb2luKGRpciwgZW50cnkpOwogICAgICBsZXQgbHN0ID0gb3MubHN0YXQoZmlsZSlbMF07CiAgICAgIGxldCBzdCA9IG9zLnN0YXQoZmlsZSlbMF07CiAgICAgIGxldCBpc19kaXIgPSAoc3Q/Lm1vZGUgJiBvcy5TX0lGTVQpID09IG9zLlNfSUZESVI7CiAgICAgIGxldCBpc19zeW1saW5rID0gKGxzdD8ubW9kZSAmIG9zLlNfSUZNVCkgPT0gb3MuU19JRkxOSzsKCiAgICAgIGlmKGlzX2RpcikgZmlsZSArPSAnLyc7CiAgICAgIGlmKCFwcmVkKGVudHJ5LCBmaWxlLCBpc19kaXIsIGlzX3N5bWxpbmspKSBjb250aW51ZTsKICAgICAgeWllbGQgZmlsZTsKICAgIH0KICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiogUmVjdXJzaXZlRGlySXRlcmF0b3IoZGlyLCBwcmVkID0gKGVudHJ5LCBmaWxlLCBkaXIsIGRlcHRoKSA9PiB0cnVlLCBkZXB0aCA9IDApIHsKICBsZXQgcmU7CiAgaWYodHlwZW9mIHByZWQgIT0gJ2Z1bmN0aW9uJykgewogICAgaWYoIXByZWQpIHByZWQgPSAnLionOwogICAgaWYodHlwZW9mIHByZWQgPT0gJ3N0cmluZycpIHByZWQgPSBuZXcgUmVnRXhwKHByZWQsICdnaScpOwogICAgcmUgPSBwcmVkOwogICAgcHJlZCA9IChlbnRyeSwgZmlsZSwgZGlyLCBkZXB0aCkgPT4gcmUudGVzdChlbnRyeSkgfHwgcmUudGVzdChmaWxlKTsKICB9CiAgaWYoIWRpci5lbmRzV2l0aCgnLycpKSBkaXIgKz0gJy8nOwogIGRpciA9IGRpci5yZXBsYWNlKC9+L2csIHN0ZC5nZXRlbnYoJ0hPTUUnKSk7CiAgZm9yKGxldCBmaWxlIG9mIGZzLnJlYWRkaXJTeW5jKGRpcikpIHsKICAgIGlmKFsnLicsICcuLiddLmluZGV4T2YoZmlsZSkgIT0gLTEpIGNvbnRpbnVlOwogICAgbGV0IGVudHJ5ID0gYCR7ZGlyfSR7ZmlsZX1gOwogICAgbGV0IGlzRGlyID0gZmFsc2U7CiAgICBsZXQgc3QgPSBmcy5zdGF0U3luYyhlbnRyeSk7CiAgICBpc0RpciA9IHN0ICYmIHN0LmlzRGlyZWN0b3J5KCk7CiAgICBpZihpc0RpcikgZW50cnkgKz0gJy8nOwogICAgbGV0IHNob3cgPSBwcmVkKGVudHJ5LCBmaWxlLCBkaXIsIGRlcHRoKTsKICAgIGlmKHNob3cpIHsKICAgICAgeWllbGQgZW50cnk7CiAgICB9CiAgICBpZihpc0RpcikgeWllbGQqIFJlY3Vyc2l2ZURpckl0ZXJhdG9yKGVudHJ5LCBwcmVkLCBkZXB0aCArIDEpOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uKiBSZWFkRGlyUmVjdXJzaXZlKGRpciwgbWF4RGVwdGggPSBJbmZpbml0eSkgewogIGRpciA9IGRpci5yZXBsYWNlKC9+L2csIGdsb2JhbFRoaXMucHJvY2Vzcy5lbnZbJ0hPTUUnXSA/PyBzdGQuZ2V0ZW52KCdIT01FJykpOwogIGZvcihsZXQgZmlsZSBvZiBmcy5yZWFkZGlyU3luYyhkaXIpKSB7CiAgICBpZihbJy4nLCAnLi4nXS5pbmRleE9mKGZpbGUpICE9IC0xKSBjb250aW51ZTsKICAgIGxldCBlbnRyeSA9IGAke2Rpcn0vJHtmaWxlfWA7CiAgICBsZXQgaXNEaXIgPSBmYWxzZTsKICAgIGxldCBzdCA9IGZzLnN0YXRTeW5jKGVudHJ5KTsKICAgIGlzRGlyID0gc3QgJiYgc3QuaXNEaXJlY3RvcnkoKTsKICAgIHlpZWxkIGlzRGlyID8gZW50cnkgKyAnLycgOiBlbnRyeTsKICAgIGlmKG1heERlcHRoID4gMCAmJiBpc0RpcikgeWllbGQqIFJlYWREaXJSZWN1cnNpdmUoZW50cnksIG1heERlcHRoIC0gMSk7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24qIEZpbHRlcihnZW4sIHJlZ0V4ID0gLy4qLykgewogIGZvcihsZXQgaXRlbSBvZiBnZW4pIGlmKHJlZ0V4LnRlc3QoaXRlbSkpIHlpZWxkIGl0ZW07Cn0KCmV4cG9ydCBmdW5jdGlvbiBGaWx0ZXJJbWFnZXMoZ2VuKSB7CiAgcmV0dXJuIEZpbHRlcihnZW4sIC9cLihwbmd8anBlP2cpJC9pKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFNvcnRGaWxlcyhhcnIsIGZpZWxkID0gJ2N0aW1lJykgewogIHJldHVybiBbLi4uYXJyXS5zb3J0KChhLCBiKSA9PiBhLnN0YXRbZmllbGRdIC0gYi5zdGF0W2ZpZWxkXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiogU3RhdEZpbGVzKGdlbikgewogIGZvcihsZXQgZmlsZSBvZiBnZW4pIHsKICAgIGxldCBzdGF0ID0gZnMuc3RhdFN5bmMoZmlsZSk7CiAgICBsZXQgb2JqID0gZGVmaW5lKAogICAgICB7IGZpbGUsIHN0YXQgfSwKICAgICAgewogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZTsKICAgICAgICB9CiAgICAgIH0KICAgICk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCAnc2l6ZScsIHsKICAgICAgZ2V0OiBtZW1vaXplKCgpID0+IHsKICAgICAgICBsZXQgeyBmaWxlbmFtZSwgLi4uaW5mbyB9ID0gSW1hZ2VJbmZvKG9iai5maWxlKTsKICAgICAgICByZXR1cm4gZGVmaW5lKGluZm8sIHsKICAgICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aCArICd4JyArIHRoaXMuaGVpZ2h0OwogICAgICAgICAgfSwKICAgICAgICAgIGdldCBsYW5kc2NhcGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLndpZHRoID4gdGhpcy5oZWlnaHQ7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0IHBvcnRyYWl0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQgPiB0aGlzLndpZHRoOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KQogICAgfSk7CiAgICB5aWVsZCBvYmo7CiAgfQp9CgovKmV4cG9ydCBmdW5jdGlvbiBSZWFkRmQoZmQsIGJ1ZmZlclNpemUpIHsKICBmdW5jdGlvbiogRmRSZWFkKCkgewogICAgbGV0IHJldCwKICAgICAgYnVmID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlclNpemUpOwogICAgZG8gewogICAgICBpZigocmV0ID0gZnMucmVhZFN5bmMoZmQsIGJ1ZiwgMCwgYnVmLmJ5dGVMZW5ndGgpKSA+IDApIHlpZWxkIHJldCA9PSBidWYuYnl0ZUxlbmd0aCA/IGJ1ZiA6IGJ1Zi5zbGljZSgwLCByZXQpOwogICAgfSB3aGlsZShyZXQgPiAwKTsKICB9CiAgcmV0dXJuIFsuLi5GZFJlYWQoKV0ucmVkdWNlKChhY2MsIGJ1ZikgPT4gKGFjYyArPSB0b1N0cmluZyhidWYpKSwgJycpOwp9Ki8KLyoKZXhwb3J0IGZ1bmN0aW9uIEZkUmVhZGVyKGZkLCBidWZmZXJTaXplID0gMTAyNCkgewogIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyU2l6ZSk7CiAgcmV0dXJuIG5ldyBSZXBlYXRlcihhc3luYyAocHVzaCwgc3RvcCkgPT4gewogICAgbGV0IHJldDsKICAgIGRvIHsKICAgICAgbGV0IHIgPSBhd2FpdCB3YWl0UmVhZChmZCk7CiAgICAgIHJldCA9IHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IGZzLnJlYWRTeW5jKGZkLCBidWYpIDogZmQucmVhZChidWYpOwogICAgICBpZihyZXQgPiAwKSB7CiAgICAgICAgbGV0IGRhdGEgPSBidWYuc2xpY2UoMCwgcmV0KTsKICAgICAgICBhd2FpdCBwdXNoKGZzLmJ1ZmZlclRvU3RyaW5nKGRhdGEpKTsKICAgICAgfQogICAgfSB3aGlsZShyZXQgPT0gYnVmZmVyU2l6ZSk7CiAgICBzdG9wKCk7CiAgICB0eXBlb2YgZmQgPT0gJ251bWJlcicgPyBmcy5jbG9zZVN5bmMoZmQpIDogZmQuZGVzdHJveSgpOwogIH0pOwp9Ki8KZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBGZFJlYWRlcihmZCwgYnVmZmVyU2l6ZSA9IDEwMjQpIHsKICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlclNpemUpOwogIGxldCByZXQ7CiAgZG8gewogICAgbGV0IHIgPSBhd2FpdCB3YWl0UmVhZChmZCk7CiAgICBjb25zb2xlLmxvZygncicsIHIpOwogICAgcmV0ID0gdHlwZW9mIGZkID09ICdudW1iZXInID8gYXdhaXQgZnMucmVhZChmZCwgYnVmKSA6IGF3YWl0IGZkLnJlYWQoYnVmKTsKICAgIGlmKHJldCA+IDApIHsKICAgICAgbGV0IGRhdGEgPSBidWYuc2xpY2UoMCwgcmV0KTsKICAgICAgeWllbGQgZnMuYnVmZmVyVG9TdHJpbmcoZGF0YSk7CiAgICB9CiAgfSB3aGlsZShyZXQgPT0gYnVmZmVyU2l6ZSk7CiAgdHlwZW9mIGZkID09ICdudW1iZXInID8gYXdhaXQgZnMuY2xvc2UoZmQpIDogZmQuZGVzdHJveSgpOwogIHJldHVybjsKfQoKZXhwb3J0IGZ1bmN0aW9uIENvcHlUb0NsaXBib2FyZCh0ZXh0KSB7CiAgY29uc3QgeyBlbnYgfSA9IHByb2Nlc3M7CiAgbGV0IGNoaWxkID0gY2hpbGRfcHJvY2Vzcy5zcGF3bigneGNsaXAnLCBbJy1pbicsICctdmVyYm9zZSddLCB7IGVudiwgc3RkaW86IFsncGlwZScsICdpbmhlcml0JywgJ2luaGVyaXQnXSB9KTsKICBsZXQgW3BpcGVdID0gY2hpbGQuc3RkaW87CgogIGxldCB3cml0dGVuID0gZnMud3JpdGVTeW5jKHBpcGUsIHRleHQsIDAsIHRleHQubGVuZ3RoKTsKICBmcy5jbG9zZVN5bmMocGlwZSk7CiAgbGV0IHN0YXR1cyA9IGNoaWxkLndhaXQoKTsKICBjb25zb2xlLmxvZygnY2hpbGQnLCBjaGlsZCk7CiAgcmV0dXJuIHsgd3JpdHRlbiwgc3RhdHVzIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBSZWFkQ2FsbGJhY2soZmQsIGZuID0gZGF0YSA9PiB7fSkgewogIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMTAyNCk7CiAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsICgpID0+IHsKICAgIGxldCByID0gZnMucmVhZFN5bmMoZmQsIGJ1ZiwgMCwgMTAyNCk7CiAgICBpZihyIDw9IDApIHsKICAgICAgZnMuY2xvc2VTeW5jKGZkKTsKICAgICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsIG51bGwpOwogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgZGF0YSA9IGJ1Zi5zbGljZSgwLCByKTsKICAgIGRhdGEgPSB0b1N0cmluZyhkYXRhKTsKICAgIGZuKGRhdGEpOwogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gTG9nQ2FsbChmbiwgdGhpc09iaikgewogIGxldCB7IG5hbWUgfSA9IGZuOwogIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICBsZXQgcmVzdWx0OwogICAgcmVzdWx0ID0gZm4uYXBwbHkodGhpc09iaiA/PyB0aGlzLCBhcmdzKTsKICAgIGNvbnNvbGUubG9nKAogICAgICAnRnVuY3Rpb24gJyArIG5hbWUgKyAnKCcsCiAgICAgIC4uLmFyZ3MubWFwKGFyZyA9PiBpbnNwZWN0KGFyZywgeyBjb2xvcnM6IGZhbHNlLCBtYXhTdHJpbmdMZW5ndGg6IDIwIH0pKSwKICAgICAgJykgPScsCiAgICAgIHJlc3VsdAogICAgKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFNwYXduKGZpbGUsIGFyZ3MsIG9wdGlvbnMgPSB7fSkgewogIGxldCB7IGJsb2NrID0gdHJ1ZSwgdXNlUGF0aCA9IHRydWUsIGN3ZCwgc3RkaW8gPSBbJ2luaGVyaXQnLCAnaW5oZXJpdCcsICdpbmhlcml0J10sIGVudiwgdWlkLCBnaWQgfSA9IG9wdGlvbnM7CiAgbGV0IHBhcmVudCA9IFsuLi5zdGRpb107CgogIGZvcihsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgIGlmKHN0ZGlvW2ldID09ICdwaXBlJykgewogICAgICBsZXQgW3IsIHddID0gb3MucGlwZSgpOwogICAgICBzdGRpb1tpXSA9IGkgPT0gMCA/IHIgOiB3OwogICAgICBwYXJlbnRbaV0gPSBpID09IDAgPyB3IDogcjsKICAgIH0gZWxzZSBpZihzdGRpb1tpXSA9PSAnaW5oZXJpdCcpIHsKICAgICAgc3RkaW9baV0gPSBpOwogICAgfQogIH0KCiAgY29uc3QgW3N0ZGluLCBzdGRvdXQsIHN0ZGVycl0gPSBzdGRpbzsKICBsZXQgcGlkID0gb3MuZXhlYyhbZmlsZSwgLi4uYXJnc10sIHsgYmxvY2ssIHVzZVBhdGgsIGN3ZCwgc3RkaW4sIHN0ZG91dCwgc3RkZXJyLCBlbnYsIHVpZCwgZ2lkIH0pOwogIGZvcihsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgIGlmKHR5cGVvZiBzdGRpb1tpXSA9PSAnbnVtYmVyJyAmJiBzdGRpb1tpXSAhPSBpKSBvcy5jbG9zZShzdGRpb1tpXSk7CiAgfQoKICByZXR1cm4gewogICAgcGlkLAogICAgc3RkaW86IHBhcmVudCwKICAgIHdhaXQoKSB7CiAgICAgIGxldCBbcmV0LCBzdGF0dXNdID0gb3Mud2FpdHBpZCh0aGlzLnBpZCwgb3MuV05PSEFORyk7CiAgICAgIHJldHVybiByZXQ7CiAgICB9CiAgfTsKfQoKLy8gJ2h0dHBzOi8vd3d3LmRpc2NvZ3MuY29tL3NlbGwvb3JkZXIvODM2OTAyMi0zNjQnCgpleHBvcnQgZnVuY3Rpb24gRmV0Y2hVUkwodXJsLCBvcHRpb25zID0ge30pIHsKICBsZXQgewogICAgaGVhZGVycywKICAgIHByb3h5LAogICAgY29va2llcyA9ICdjb29raWVzLnR4dCcsCiAgICByYW5nZSwKICAgIGJvZHksCiAgICB2ZXJzaW9uID0gJzEuMScsCiAgICB0bHN2LAogICAgJ3VzZXItYWdlbnQnOiB1c2VyQWdlbnQKICB9ID0gb3B0aW9uczsKCiAgbGV0IGFyZ3MgPSBPYmplY3QuZW50cmllcyhoZWFkZXJzID8/IHt9KQogICAgLnJlZHVjZSgoYWNjLCBbaywgdl0pID0+IGFjYy5jb25jYXQoWyctSCcsIGAke2t9OiAke3Z9YF0pLCBbXSkKICAgIC5jb25jYXQoQXJyYXkuaXNBcnJheSh1cmwpID8gdXJsIDogW3VybF0pOwoKICBhcmdzLnB1c2goJy0tY29tcHJlc3NlZCcpOwogIGFyZ3MudW5zaGlmdCgnLUwnLCAnLWsnKTsKCiAgaWYoYm9keSkgYXJncy51bnNoaWZ0KCctZCcsIGJvZHkpOwogIGlmKHZlcnNpb24pIGFyZ3MudW5zaGlmdCgnLS1odHRwJyArIHZlcnNpb24pOwogIGlmKHRsc3YpIGFyZ3MudW5zaGlmdCgnLS10bHN2JyArIHRsc3YpOwogIGlmKHVzZXJBZ2VudCkgYXJncy51bnNoaWZ0KCctQScsIHVzZXJBZ2VudCk7CiAgaWYocmFuZ2UpIGFyZ3MudW5zaGlmdCgnLXInLCByYW5nZSk7CiAgaWYoY29va2llcykgYXJncy51bnNoaWZ0KCctYycsIGNvb2tpZXMpOwogIGlmKHByb3h5KSBhcmdzLnVuc2hpZnQoJy14JywgcHJveHkpOwoKICAvL2FyZ3MudW5zaGlmdCgnLXYnKTsKICAvL2FyZ3MudW5zaGlmdCgnLXNTJyk7CiAgYXJncy51bnNoaWZ0KCctLXRjcC1mYXN0b3BlbicsICctLXRjcC1ub2RlbGF5Jyk7CgogIGNvbnNvbGUubG9nKCdGZXRjaFVSTCcsIGNvbnNvbGUuY29uZmlnKHsgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LCBjb21wYWN0OiBmYWxzZSB9KSwgeyBhcmdzIH0pOwoKICBsZXQgY2hpbGQgPSAvKiBjaGlsZF9wcm9jZXNzLnNwYXduKi8gU3Bhd24oJ2N1cmwnLCBhcmdzLCB7IGJsb2NrOiBmYWxzZSwgc3RkaW86IFsnaW5oZXJpdCcsICdwaXBlJywgJ3BpcGUnXSB9KTsKCiAgbGV0IFssIG91dCwgZXJyXSA9IGNoaWxkLnN0ZGlvOwoKICBjb25zb2xlLmxvZygnY2hpbGQnLCB7IG91dCwgZXJyIH0pOwoKICBsZXQgb3V0cHV0ID0gJycsCiAgICBlcnJvcnMgPSAnJzsKCiAgUmVhZENhbGxiYWNrKG91dCwgZGF0YSA9PiB7CiAgICBvdXRwdXQgKz0gZGF0YTsKICAgIC8vIGNvbnNvbGUubG9nKCdkYXRhJyxkYXRhLmxlbmd0aCk7CiAgfSk7CiAgUmVhZENhbGxiYWNrKGVyciwgZGF0YSA9PiB7CiAgICBlcnJvcnMgKz0gZGF0YTsKICAgIHN0ZC5lcnIucHV0cyhkYXRhKTsKICAgIHN0ZC5lcnIuZmx1c2goKTsKICB9KTsKICBsZXQgZmxhZ3MgPSBjaGlsZF9wcm9jZXNzLldOT0hBTkc7CiAgY29uc29sZS5sb2coJ2ZsYWdzJywgZmxhZ3MpOwogIGNoaWxkLndhaXQoZmxhZ3MpOwoKICBsZXQgc3RhdHVzOwoKICBzdGF0dXMgPSBjaGlsZC53YWl0KCk7CgogIGNvbnNvbGUubG9nKCdGZXRjaFVSTCcsIHsgLyogb3V0cHV0OiBlc2NhcGUob3V0cHV0KSwgZXJyb3JzLCovIHN0YXR1cyB9KTsKCiAgcmV0dXJuIG91dHB1dDsKfQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwi0AAAAAAAAAAAAAAAAAAAAAAACCLQAAAAAAAAAAAAAAAAAAAAAAAIItAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAGgAAAAAAAABBAAAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "opts={}"
					},
					"BwAAAHAJAAAAAAAAcQkAAAAAAAAAAAAAcQkAAAAAAAByCQAAAAAAAAAAAAByCQAAAAAAAHMJAAAAAAAAAAAAAHMJAAAAAAAAdAkAAAAAAAAAAAAAdAkAAAAAAAB1CQAAAAAAAAAAAAB1CQAAAAAAAHYJAAAAAAAAAAAAAHYJAAAAAAAAdwkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcAkAAAAAAABwCQAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"right_delete",
					null,
					"AQAAAHcJAAAAAAAAdwkAAAAAAAAOAAAAdmVyYm9zZSA9IHRydWU",
					"AQAAAAAAAAABAAAAdwkAAAAAAACFCQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "\nconst"
					},
					"BwAAAHoJAAAAAAAAewkAAAAAAAAAAAAAewkAAAAAAAB9CQAAAAAAAAAAAAB9CQAAAAAAAH4JAAAAAAAAAAAAAH4JAAAAAAAAfwkAAAAAAAAAAAAAfwkAAAAAAACACQAAAAAAAAAAAACACQAAAAAAAIEJAAAAAAAAAAAAAIEJAAAAAAAAggkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAegkAAAAAAAB6CQAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAIIJAAAAAAAAhAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAggkAAAAAAACCCQAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "mode=0"
					},
					"BgAAAIMJAAAAAAAAhAkAAAAAAAAAAAAAhAkAAAAAAACFCQAAAAAAAAAAAACFCQAAAAAAAIYJAAAAAAAAAAAAAIYJAAAAAAAAhwkAAAAAAAAAAAAAhwkAAAAAAACICQAAAAAAAAAAAACICQAAAAAAAIkJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgwkAAAAAAACDCQAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"left_delete",
					null,
					"AQAAAIgJAAAAAAAAiAkAAAAAAAABAAAAMA",
					"AQAAAAAAAAABAAAAiQkAAAAAAACJCQAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "0o76"
					},
					"BAAAAIgJAAAAAAAAiQkAAAAAAAAAAAAAiQkAAAAAAACKCQAAAAAAAAAAAACKCQAAAAAAAIsJAAAAAAAAAAAAAIsJAAAAAAAAjAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiAkAAAAAAACICQAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					2,
					"left_delete",
					null,
					"AgAAAIsJAAAAAAAAiwkAAAAAAAABAAAANooJAAAAAAAAigkAAAAAAAABAAAANw",
					"AQAAAAAAAAABAAAAjAkAAAAAAACMCQAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "644,"
					},
					"BAAAAIoJAAAAAAAAiwkAAAAAAAAAAAAAiwkAAAAAAACMCQAAAAAAAAAAAACMCQAAAAAAAI0JAAAAAAAAAAAAAI0JAAAAAAAAjgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAigkAAAAAAACKCQAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": " verbose=tru"
					},
					"DAAAAI4JAAAAAAAAjwkAAAAAAAAAAAAAjwkAAAAAAACQCQAAAAAAAAAAAACQCQAAAAAAAJEJAAAAAAAAAAAAAJEJAAAAAAAAkgkAAAAAAAAAAAAAkgkAAAAAAACTCQAAAAAAAAAAAACTCQAAAAAAAJQJAAAAAAAAAAAAAJQJAAAAAAAAlQkAAAAAAAAAAAAAlQkAAAAAAACWCQAAAAAAAAAAAACWCQAAAAAAAJcJAAAAAAAAAAAAAJcJAAAAAAAAmAkAAAAAAAAAAAAAmAkAAAAAAACZCQAAAAAAAAAAAACZCQAAAAAAAJoJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjgkAAAAAAACOCQAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAAJoJAAAAAAAAmwkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmgkAAAAAAACaCQAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "=opts;"
					},
					"BgAAAJwJAAAAAAAAnQkAAAAAAAAAAAAAnQkAAAAAAACeCQAAAAAAAAAAAACeCQAAAAAAAJ8JAAAAAAAAAAAAAJ8JAAAAAAAAoAkAAAAAAAAAAAAAoAkAAAAAAAChCQAAAAAAAAAAAAChCQAAAAAAAKIJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnAkAAAAAAACcCQAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKIJAAAAAAAAowkAAAAAAAAAAAAAowkAAAAAAAClCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAogkAAAAAAACiCQAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"paste",
					null,
					"AgAAADgKAAAAAAAAPAoAAAAAAAAAAAAAPAoAAAAAAAA8CgAAAAAAAAUAAAAwbzY0NA",
					"AQAAAAAAAAABAAAAOAoAAAAAAAA9CgAAAAAAAAAAAAAAAPC/"
				],
				[
					91,
					2,
					"left_delete",
					null,
					"AgAAAKMJAAAAAAAAowkAAAAAAAACAAAAICCiCQAAAAAAAKIJAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAApQkAAAAAAAClCQAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKIJAAAAAAAAowkAAAAAAAAAAAAAowkAAAAAAAClCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAogkAAAAAAACiCQAAAAAAAAAAAAAAAPC/"
				],
				[
					99,
					2,
					"left_delete",
					null,
					"AgAAAKMJAAAAAAAAowkAAAAAAAACAAAAICCiCQAAAAAAAKIJAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAApQkAAAAAAAClCQAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKIJAAAAAAAAowkAAAAAAAAAAAAAowkAAAAAAAClCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAogkAAAAAAACiCQAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": "if"
					},
					"AgAAAKUJAAAAAAAApgkAAAAAAAAAAAAApgkAAAAAAACnCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApQkAAAAAAAClCQAAAAAAAAAAAAAAAPC/"
				],
				[
					118,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKcJAAAAAAAAqQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApwkAAAAAAACnCQAAAAAAAAAAAAAAAPC/"
				],
				[
					119,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAKcJAAAAAAAApwkAAAAAAAABAAAAKKcJAAAAAAAApwkAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAqAkAAAAAAACoCQAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					2,
					"left_delete",
					null,
					"AgAAAKYJAAAAAAAApgkAAAAAAAABAAAAZqUJAAAAAAAApQkAAAAAAAABAAAAaQ",
					"AQAAAAAAAAABAAAApwkAAAAAAACnCQAAAAAAAAAAAAAAAPC/"
				],
				[
					133,
					1,
					"insert",
					{
						"characters": "f"
					},
					"AQAAAKUJAAAAAAAApgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApQkAAAAAAAClCQAAAAAAAAAAAAAAAPC/"
				],
				[
					134,
					1,
					"left_delete",
					null,
					"AQAAAKUJAAAAAAAApQkAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAApgkAAAAAAACmCQAAAAAAAAAAAAAAAPC/"
				],
				[
					135,
					1,
					"insert",
					{
						"characters": "if"
					},
					"AgAAAKUJAAAAAAAApgkAAAAAAAAAAAAApgkAAAAAAACnCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApQkAAAAAAAClCQAAAAAAAAAAAAAAAPC/"
				],
				[
					136,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKcJAAAAAAAAqQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApwkAAAAAAACnCQAAAAAAAAAAAAAAAPC/"
				],
				[
					137,
					1,
					"insert",
					{
						"characters": "types.isArray"
					},
					"DQAAAKgJAAAAAAAAqQkAAAAAAAAAAAAAqQkAAAAAAACqCQAAAAAAAAAAAACqCQAAAAAAAKsJAAAAAAAAAAAAAKsJAAAAAAAArAkAAAAAAAAAAAAArAkAAAAAAACtCQAAAAAAAAAAAACtCQAAAAAAAK4JAAAAAAAAAAAAAK4JAAAAAAAArwkAAAAAAAAAAAAArwkAAAAAAACwCQAAAAAAAAAAAACwCQAAAAAAALEJAAAAAAAAAAAAALEJAAAAAAAAsgkAAAAAAAAAAAAAsgkAAAAAAACzCQAAAAAAAAAAAACzCQAAAAAAALQJAAAAAAAAAAAAALQJAAAAAAAAtQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqAkAAAAAAACoCQAAAAAAAAAAAAAAAPC/"
				],
				[
					138,
					1,
					"insert",
					{
						"characters": "Buffer"
					},
					"BgAAALUJAAAAAAAAtgkAAAAAAAAAAAAAtgkAAAAAAAC3CQAAAAAAAAAAAAC3CQAAAAAAALgJAAAAAAAAAAAAALgJAAAAAAAAuQkAAAAAAAAAAAAAuQkAAAAAAAC6CQAAAAAAAAAAAAC6CQAAAAAAALsJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtQkAAAAAAAC1CQAAAAAAAAAAAAAAAPC/"
				],
				[
					139,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAALsJAAAAAAAAvQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuwkAAAAAAAC7CQAAAAAAAAAAAAAAAPC/"
				],
				[
					140,
					1,
					"insert",
					{
						"characters": "data"
					},
					"BAAAALwJAAAAAAAAvQkAAAAAAAAAAAAAvQkAAAAAAAC+CQAAAAAAAAAAAAC+CQAAAAAAAL8JAAAAAAAAAAAAAL8JAAAAAAAAwAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvAkAAAAAAAC8CQAAAAAAAAAAAAAAAPC/"
				],
				[
					142,
					1,
					"insert",
					{
						"characters": "\ndata="
					},
					"CQAAAMIJAAAAAAAAwwkAAAAAAAAAAAAAwwkAAAAAAADFCQAAAAAAAAAAAADDCQAAAAAAAMMJAAAAAAAAAgAAACAgwwkAAAAAAADHCQAAAAAAAAAAAADHCQAAAAAAAMgJAAAAAAAAAAAAAMgJAAAAAAAAyQkAAAAAAAAAAAAAyQkAAAAAAADKCQAAAAAAAAAAAADKCQAAAAAAAMsJAAAAAAAAAAAAAMsJAAAAAAAAzAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwgkAAAAAAADCCQAAAAAAAAAAAAAAAPC/"
				],
				[
					143,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAMwJAAAAAAAAzgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzAkAAAAAAADMCQAAAAAAAAAAAAAAAPC/"
				],
				[
					144,
					1,
					"insert",
					{
						"characters": "data"
					},
					"BAAAAM0JAAAAAAAAzgkAAAAAAAAAAAAAzgkAAAAAAADPCQAAAAAAAAAAAADPCQAAAAAAANAJAAAAAAAAAAAAANAJAAAAAAAA0QkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQkAAAAAAADNCQAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAANIJAAAAAAAA0wkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0gkAAAAAAADSCQAAAAAAAAAAAAAAAPC/"
				],
				[
					147,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAANMJAAAAAAAA1AkAAAAAAAAAAAAA1AkAAAAAAADYCQAAAAAAAAAAAADUCQAAAAAAANQJAAAAAAAABAAAACAgICDUCQAAAAAAANYJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wkAAAAAAADTCQAAAAAAAAAAAAAAAPC/"
				],
				[
					169,
					1,
					"insert",
					{
						"characters": ",top"
					},
					"BQAAAHMAAAAAAAAAdAAAAAAAAAAAAAAA1QkAAAAAAADVCQAAAAAAAAIAAAAgIHQAAAAAAAAAdQAAAAAAAAAAAAAAdQAAAAAAAAB2AAAAAAAAAAAAAAB2AAAAAAAAAHcAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcwAAAAAAAABzAAAAAAAAAAAAAAAAAPC/"
				],
				[
					170,
					1,
					"left_delete",
					null,
					"AQAAAHYAAAAAAAAAdgAAAAAAAAABAAAAcA",
					"AQAAAAAAAAABAAAAdwAAAAAAAAB3AAAAAAAAAAAAAAAAAPC/"
				],
				[
					171,
					1,
					"insert",
					{
						"characters": "ArrayBuffer"
					},
					"CwAAAHYAAAAAAAAAdwAAAAAAAAAAAAAAdwAAAAAAAAB4AAAAAAAAAAAAAAB4AAAAAAAAAHkAAAAAAAAAAAAAAHkAAAAAAAAAegAAAAAAAAAAAAAAegAAAAAAAAB7AAAAAAAAAAAAAAB7AAAAAAAAAHwAAAAAAAAAAAAAAHwAAAAAAAAAfQAAAAAAAAAAAAAAfQAAAAAAAAB+AAAAAAAAAAAAAAB+AAAAAAAAAH8AAAAAAAAAAAAAAH8AAAAAAAAAgAAAAAAAAAAAAAAAgAAAAAAAAACBAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdgAAAAAAAAB2AAAAAAAAAAAAAAAAAPC/"
				],
				[
					195,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAALMJAAAAAAAAtAkAAAAAAAAAAAAAtAkAAAAAAAC2CQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAswkAAAAAAACzCQAAAAAAAAAAAAAAADBA"
				],
				[
					197,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"BAAAALMJAAAAAAAAtAkAAAAAAAAAAAAAtAkAAAAAAAC2CQAAAAAAAAAAAAC2CQAAAAAAALcJAAAAAAAAAAAAALcJAAAAAAAAuAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAswkAAAAAAACzCQAAAAAAAAAAAAAAADBA"
				],
				[
					198,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAALgJAAAAAAAAugkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuAkAAAAAAAC4CQAAAAAAAAAAAAAAAPC/"
				],
				[
					199,
					1,
					"insert",
					{
						"characters": "data"
					},
					"BAAAALkJAAAAAAAAugkAAAAAAAAAAAAAugkAAAAAAAC7CQAAAAAAAAAAAAC7CQAAAAAAALwJAAAAAAAAAAAAALwJAAAAAAAAvQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuQkAAAAAAAC5CQAAAAAAAAAAAAAAAPC/"
				],
				[
					200,
					4,
					"left_delete",
					null,
					"BAAAALwJAAAAAAAAvAkAAAAAAAABAAAAYbsJAAAAAAAAuwkAAAAAAAABAAAAdLoJAAAAAAAAugkAAAAAAAABAAAAYbkJAAAAAAAAuQkAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAvQkAAAAAAAC9CQAAAAAAAAAAAAAAAPC/"
				],
				[
					201,
					1,
					"insert",
					{
						"characters": "typeof"
					},
					"BgAAALkJAAAAAAAAugkAAAAAAAAAAAAAugkAAAAAAAC7CQAAAAAAAAAAAAC7CQAAAAAAALwJAAAAAAAAAAAAALwJAAAAAAAAvQkAAAAAAAAAAAAAvQkAAAAAAAC+CQAAAAAAAAAAAAC+CQAAAAAAAL8JAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuQkAAAAAAAC5CQAAAAAAAAAAAAAAAPC/"
				],
				[
					202,
					1,
					"insert",
					{
						"characters": " data=="
					},
					"BwAAAL8JAAAAAAAAwAkAAAAAAAAAAAAAwAkAAAAAAADBCQAAAAAAAAAAAADBCQAAAAAAAMIJAAAAAAAAAAAAAMIJAAAAAAAAwwkAAAAAAAAAAAAAwwkAAAAAAADECQAAAAAAAAAAAADECQAAAAAAAMUJAAAAAAAAAAAAAMUJAAAAAAAAxgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvwkAAAAAAAC/CQAAAAAAAAAAAAAAAPC/"
				],
				[
					203,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAMYJAAAAAAAAyAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxgkAAAAAAADGCQAAAAAAAAAAAAAAAPC/"
				],
				[
					204,
					1,
					"insert",
					{
						"characters": "string"
					},
					"BgAAAMcJAAAAAAAAyAkAAAAAAAAAAAAAyAkAAAAAAADJCQAAAAAAAAAAAADJCQAAAAAAAMoJAAAAAAAAAAAAAMoJAAAAAAAAywkAAAAAAAAAAAAAywkAAAAAAADMCQAAAAAAAAAAAADMCQAAAAAAAM0JAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxwkAAAAAAADHCQAAAAAAAAAAAAAAAPC/"
				],
				[
					206,
					1,
					"insert",
					{
						"characters": "\ndata=toArray"
					},
					"EAAAAM8JAAAAAAAA0AkAAAAAAAAAAAAA0AkAAAAAAADSCQAAAAAAAAAAAADQCQAAAAAAANAJAAAAAAAAAgAAACAg0AkAAAAAAADUCQAAAAAAAAAAAADUCQAAAAAAANUJAAAAAAAAAAAAANUJAAAAAAAA1gkAAAAAAAAAAAAA1gkAAAAAAADXCQAAAAAAAAAAAADXCQAAAAAAANgJAAAAAAAAAAAAANgJAAAAAAAA2QkAAAAAAAAAAAAA2QkAAAAAAADaCQAAAAAAAAAAAADaCQAAAAAAANsJAAAAAAAAAAAAANsJAAAAAAAA3AkAAAAAAAAAAAAA3AkAAAAAAADdCQAAAAAAAAAAAADdCQAAAAAAAN4JAAAAAAAAAAAAAN4JAAAAAAAA3wkAAAAAAAAAAAAA3wkAAAAAAADgCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzwkAAAAAAADPCQAAAAAAAAAAAAAAAPC/"
				],
				[
					207,
					1,
					"insert",
					{
						"characters": "Buffer"
					},
					"BgAAAOAJAAAAAAAA4QkAAAAAAAAAAAAA4QkAAAAAAADiCQAAAAAAAAAAAADiCQAAAAAAAOMJAAAAAAAAAAAAAOMJAAAAAAAA5AkAAAAAAAAAAAAA5AkAAAAAAADlCQAAAAAAAAAAAADlCQAAAAAAAOYJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4AkAAAAAAADgCQAAAAAAAAAAAAAAAPC/"
				],
				[
					208,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOYJAAAAAAAA6AkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5gkAAAAAAADmCQAAAAAAAAAAAAAAAPC/"
				],
				[
					209,
					1,
					"insert",
					{
						"characters": "data"
					},
					"BAAAAOcJAAAAAAAA6AkAAAAAAAAAAAAA6AkAAAAAAADpCQAAAAAAAAAAAADpCQAAAAAAAOoJAAAAAAAAAAAAAOoJAAAAAAAA6wkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wkAAAAAAADnCQAAAAAAAAAAAAAAAPC/"
				],
				[
					211,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAOwJAAAAAAAA7QkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7AkAAAAAAADsCQAAAAAAAAAAAAAAAPC/"
				],
				[
					212,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAAO0JAAAAAAAA7gkAAAAAAAAAAAAA7gkAAAAAAADyCQAAAAAAAAAAAADuCQAAAAAAAO4JAAAAAAAABAAAACAgICDuCQAAAAAAAPAJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7QkAAAAAAADtCQAAAAAAAAAAAAAAAPC/"
				],
				[
					217,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAiLgAAaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnOwppbXBvcnQgKiBhcyBwYXRoIGZyb20gJy4vbGliL3BhdGguanMnOwppbXBvcnQgeyB0eXBlcywgdG9TdHJpbmcsIHF1b3RlLCBlc2NhcGUsIHByZWRpY2F0ZSx0b0FycmF5QnVmZmVyIH0gZnJvbSAnLi9saWIvbWlzYy5qcyc7CmltcG9ydCBjaGlsZF9wcm9jZXNzIGZyb20gJ2NoaWxkX3Byb2Nlc3MnOwoKbGV0IGJqc29uOwoKaW1wb3J0KCdianNvbicpIC50aGVuKG0gPT4gKGJqc29uID0gbSkpIC5jYXRjaCgoKSA9PiB7fSk7CgpsZXQgbW1hcDsKCmltcG9ydCgnbW1hcCcpIC50aGVuKG0gPT4gKG1tYXAgPSBtKSkgLmNhdGNoKCgpID0+IHt9KTsKCmxldCB4bWw7CgppbXBvcnQoJ3htbCcpIC50aGVuKG0gPT4gKHhtbCA9IG0pKSAuY2F0Y2goKCkgPT4ge30pOwoKZXhwb3J0IGZ1bmN0aW9uIElmRGVidWcodG9rZW4pIHsKICBjb25zdCB7IERFQlVHID0gJycgfSA9IGdsb2JhbFRoaXMucHJvY2VzcyA/IGdsb2JhbFRoaXMucHJvY2Vzcy5lbnYgOiB7fTsgLy9zdGQuZ2V0ZW52aXJvbigpOwoKICBjb25zdCB0b2tMaXN0ID0gREVCVUcuc3BsaXQoL1teQS1aYS16MC05X10rL2cpOwoKICByZXR1cm4gdG9rTGlzdC5pbmRleE9mKHRva2VuKSAhPSAtMTsKfQoKZXhwb3J0IGZ1bmN0aW9uIExvZ0lmRGVidWcodG9rZW4sIGxvZ2dlckZuKSB7CiAgaWYoIUlmRGVidWcodG9rZW4pKSByZXR1cm4gKCkgPT4ge307CgogIHJldHVybiBsb2dnZXJGbjsKfQoKY29uc3QgZGVidWcgPSBMb2dJZkRlYnVnKCdpby1oZWxwZXJzJywgKC4uLmFyZ3MpID0+IGNvbnNvbGUubG9nKC4uLmFyZ3MpKTsKCmV4cG9ydCBmdW5jdGlvbiBSZWFkRmQoZmQsIGJpbmFyeSkgewogIGxldCBhYiA9IG5ldyBBcnJheUJ1ZmZlcigxMDI0KTsKICBsZXQgb3V0ID0gJyc7CiAgZm9yKDs7KSB7CiAgICBsZXQgcmV0ID0gZnMucmVhZFN5bmMoZmQsIGFiLCAwLCAxMDI0KTsKCiAgICBpZihyZXQgPD0gMCkgYnJlYWs7CgogICAgb3V0ICs9IHRvU3RyaW5nKGFiLnNsaWNlKDAsIHJldCkpOwoKICAgIGRlYnVnKGBSZWFkICMke2ZkfTogJHtyZXR9IGJ5dGVzYCk7CiAgfQogIHJldHVybiBvdXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBSZWFkRmlsZShuYW1lLCBiaW5hcnkpIHsKICBsZXQgcmV0ID0gZnMucmVhZEZpbGVTeW5jKG5hbWUsIGJpbmFyeSA/IG51bGwgOiAndXRmLTgnKTsKCiAgZGVidWcoYFJlYWQgJHtuYW1lfTogJHtyZXQ/LmJ5dGVMZW5ndGh9IGJ5dGVzYCk7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIExvYWRIaXN0b3J5KGZpbGVuYW1lKSB7CiAgbGV0IGNvbnRlbnRzID0gZnMucmVhZEZpbGVTeW5jKGZpbGVuYW1lLCAndXRmLTgnKTsKICBsZXQgZGF0YTsKCiAgY29uc3QgcGFyc2UgPSAoKSA9PiB7CiAgICB0cnkgewogICAgICBkYXRhID0gSlNPTi5wYXJzZShjb250ZW50cyk7CiAgICB9IGNhdGNoKGUpIHt9CiAgICBpZihkYXRhKSByZXR1cm4gZGF0YTsKICAgIHRyeSB7CiAgICAgIGRhdGEgPSBjb250ZW50cy5zcGxpdCgvXG4vZyk7CiAgICB9IGNhdGNoKGUpIHt9CiAgICBpZihkYXRhKSByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gKHBhcnNlKCkgPz8gW10pLmZpbHRlcihlbnRyeSA9PiAoZW50cnkgKyAnJykudHJpbSgpICE9ICcnKTsKICAvLy5tYXAoZW50cnkgPT4gZW50cnkucmVwbGFjZSgvXFxuL2csICdcbicpKQp9CgpleHBvcnQgZnVuY3Rpb24gUmVhZEpTT04oZmlsZW5hbWUpIHsKICBsZXQgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0Zi04Jyk7CgogIGlmKGRhdGEpIGRlYnVnKGBSZWFkSlNPTjogJHtkYXRhLmxlbmd0aH0gYnl0ZXMgcmVhZCBmcm9tICcke2ZpbGVuYW1lfSdgKTsKICByZXR1cm4gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiBudWxsOwp9CgpleHBvcnQgZnVuY3Rpb24gUmVhZFhNTChmaWxlbmFtZSwgLi4uYXJncykgewogIGxldCBkYXRhID0gZnMucmVhZEZpbGVTeW5jKGZpbGVuYW1lLCBudWxsKTsKCiAgaWYoZGF0YSkgZGVidWcoYFJlYWRYTUw6ICR7ZGF0YS5sZW5ndGh9IGJ5dGVzIHJlYWQgZnJvbSAnJHtmaWxlbmFtZX0nYCk7CiAgcmV0dXJuIGRhdGEgPyB4bWwucmVhZChkYXRhLCBmaWxlbmFtZSwgLi4uYXJncykgOiBudWxsOwp9CgpleHBvcnQgZnVuY3Rpb24gTWFwRmlsZShmaWxlbmFtZSkgewogIGxldCBmZCA9IG9zLm9wZW4oZmlsZW5hbWUsIG9zLk9fUkRPTkxZKTsKICBsZXQgeyBzaXplIH0gPSBvcy5zdGF0KGZpbGVuYW1lKVswXTsKICBkZWJ1ZyhgTWFwRmlsZWAsIHsgZmlsZW5hbWUsIGZkLCBzaXplIH0pOwogIGxldCBkYXRhID0gbW1hcC5tbWFwKDAsIHNpemUgKyAxMCwgbW1hcC5QUk9UX1JFQUQsIG1tYXAuTUFQX1BSSVZBVEUsIGZkLCAwKTsKICBvcy5jbG9zZShmZCk7CiAgcmV0dXJuIGRhdGE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBXcml0ZUZpbGUobmFtZSwgZGF0YSwgb3B0cz17fSkgewogIGNvbnN0e21vZGU9MG82NDQsIHZlcmJvc2U9dHJ1ZX09b3B0czsKICAKICBpZih0eXBlb2YgZGF0YT09J3N0cmluZycpCiAgICBkYXRhPXRvQXJyYXlCdWZmZXIoZGF0YSk7CiAgCiAgaWYodHlwZXMuaXNBcnJheUJ1ZmZlcihkYXRhKSkKICAgIGRhdGE9W2RhdGFdOwoKICBpZih0eXBlb2YgZGF0YSA9PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsICYmIFN5bWJvbC5pdGVyYXRvciBpbiBkYXRhKSB7CiAgICBsZXQgZmQgPSBmcy5vcGVuU3luYyhuYW1lLCBvcy5PX1dST05MWSB8IG9zLk9fVFJVTkMgfCBvcy5PX0NSRUFULCBtb2RlKTsKICAgIGxldCByID0gMDsKICAgIGZvcihsZXQgaXRlbSBvZiBkYXRhKSB7CiAgICAgIHIgKz0gZnMud3JpdGVTeW5jKGZkLCB0b0FycmF5QnVmZmVyKGl0ZW0gKyAnJykpOwogICAgfQogICAgZnMuY2xvc2VTeW5jKGZkKTsKICAgIGxldCBzdGF0ID0gZnMuc3RhdFN5bmMobmFtZSk7CiAgICByZXR1cm4gc3RhdD8uc2l6ZTsKICB9CiAgaWYoZnMuZXhpc3RzU3luYyhuYW1lKSkgZnMudW5saW5rU3luYyhuYW1lKTsKCiAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkgZGF0YSA9IGRhdGEuam9pbignXG4nKTsKCiAgaWYodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycgJiYgIWRhdGEuZW5kc1dpdGgoJ1xuJykpIGRhdGEgKz0gJ1xuJzsKICBsZXQgcmV0ID0gZnMud3JpdGVGaWxlU3luYyhuYW1lLCBkYXRhKTsKCiAgaWYodmVyYm9zZSkgZGVidWcoYFdyb3RlICR7bmFtZX06ICR7cmV0fSBieXRlc2ApOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBXcml0ZUpTT04obmFtZSwgZGF0YSwgLi4uYXJncykgewogIGNvbnN0IFtjb21wYWN0XSA9IGFyZ3M7CiAgaWYodHlwZW9mIGNvbXBhY3QgPT0gJ2Jvb2xlYW4nKSBhcmdzID0gY29tcGFjdCA/IFtdIDogW251bGwsIDJdOwoKICByZXR1cm4gV3JpdGVGaWxlKG5hbWUsIEpTT04uc3RyaW5naWZ5KGRhdGEsIC4uLmFyZ3MpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFdyaXRlWE1MKG5hbWUsIGRhdGEsIC4uLmFyZ3MpIHsKICByZXR1cm4gV3JpdGVGaWxlKG5hbWUsIHhtbC53cml0ZShkYXRhLCAuLi5hcmdzKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBSZWFkQkpTT04oZmlsZW5hbWUpIHsKICBsZXQgZmQgPSBvcy5vcGVuKGZpbGVuYW1lLCBvcy5PX1JET05MWSk7CiAgbGV0IHsgc2l6ZSB9ID0gb3Muc3RhdChmaWxlbmFtZSlbMF07CiAgZGVidWcoYFJlYWRCSlNPTmAsIHsgZmlsZW5hbWUsIGZkLCBzaXplIH0pOwogIGxldCBkYXRhID0gbW1hcC5tbWFwKDAsIHNpemUgKyAxMCwgbW1hcC5QUk9UX1JFQUQsIG1tYXAuTUFQX1BSSVZBVEUsIGZkLCAwKTsKICBkZWJ1ZyhgUmVhZEJKU09OYCwgeyBkYXRhIH0pOwogIGxldCByZXQgPSBianNvbi5yZWFkKGRhdGEsIDAsIHNpemUpOwoKICBtbWFwLm11bm1hcChkYXRhKTsKICBvcy5jbG9zZShmZCk7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIFdyaXRlQkpTT04obmFtZSwgZGF0YSkgewogIGxldCBidWYgPSBianNvbi53cml0ZShkYXRhKTsKICBsZXQgc2l6ZSA9IGJ1Zi5ieXRlTGVuZ3RoOwogIGxldCBmZCA9IG9zLm9wZW4obmFtZSwgb3MuT19XUk9OTFkgfCBvcy5PX0NSRUFUIHwgb3MuT19UUlVOQyk7CgogIGxldCByZXQgPSBvcy53cml0ZShmZCwgYnVmLCAwLCBzaXplKTsKICBkZWJ1ZygnV3JpdGVCSlNPTicsIHsgbmFtZSwgZmQsIHNpemUsIHJldCB9KTsKICBvcy5jbG9zZShmZCk7CgogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiogRGlySXRlcmF0b3IoLi4uYXJncykgewogIGxldCBwcmVkID0gdHlwZW9mIGFyZ3NbMF0gIT0gJ3N0cmluZycgPyBwcmVkaWNhdGUoYXJncy5zaGlmdCgpKSA6ICgpID0+IHRydWU7CiAgZm9yKGxldCBkaXIgb2YgYXJncykgewogICAgZGlyID0gZGlyLnJlcGxhY2UoL34vZywgc3RkLmdldGVudignSE9NRScpKTsKICAgIGxldCBlbnRyaWVzID0gb3MucmVhZGRpcihkaXIpWzBdID8/IFtdOwogICAgZm9yKGxldCBlbnRyeSBvZiBlbnRyaWVzLnNvcnQoKSkgewogICAgICBsZXQgZmlsZSA9IHBhdGguam9pbihkaXIsIGVudHJ5KTsKICAgICAgbGV0IGxzdCA9IG9zLmxzdGF0KGZpbGUpWzBdOwogICAgICBsZXQgc3QgPSBvcy5zdGF0KGZpbGUpWzBdOwogICAgICBsZXQgaXNfZGlyID0gKHN0Py5tb2RlICYgb3MuU19JRk1UKSA9PSBvcy5TX0lGRElSOwogICAgICBsZXQgaXNfc3ltbGluayA9IChsc3Q/Lm1vZGUgJiBvcy5TX0lGTVQpID09IG9zLlNfSUZMTks7CgogICAgICBpZihpc19kaXIpIGZpbGUgKz0gJy8nOwogICAgICBpZighcHJlZChlbnRyeSwgZmlsZSwgaXNfZGlyLCBpc19zeW1saW5rKSkgY29udGludWU7CiAgICAgIHlpZWxkIGZpbGU7CiAgICB9CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24qIFJlY3Vyc2l2ZURpckl0ZXJhdG9yKGRpciwgcHJlZCA9IChlbnRyeSwgZmlsZSwgZGlyLCBkZXB0aCkgPT4gdHJ1ZSwgZGVwdGggPSAwKSB7CiAgbGV0IHJlOwogIGlmKHR5cGVvZiBwcmVkICE9ICdmdW5jdGlvbicpIHsKICAgIGlmKCFwcmVkKSBwcmVkID0gJy4qJzsKICAgIGlmKHR5cGVvZiBwcmVkID09ICdzdHJpbmcnKSBwcmVkID0gbmV3IFJlZ0V4cChwcmVkLCAnZ2knKTsKICAgIHJlID0gcHJlZDsKICAgIHByZWQgPSAoZW50cnksIGZpbGUsIGRpciwgZGVwdGgpID0+IHJlLnRlc3QoZW50cnkpIHx8IHJlLnRlc3QoZmlsZSk7CiAgfQogIGlmKCFkaXIuZW5kc1dpdGgoJy8nKSkgZGlyICs9ICcvJzsKICBkaXIgPSBkaXIucmVwbGFjZSgvfi9nLCBzdGQuZ2V0ZW52KCdIT01FJykpOwogIGZvcihsZXQgZmlsZSBvZiBmcy5yZWFkZGlyU3luYyhkaXIpKSB7CiAgICBpZihbJy4nLCAnLi4nXS5pbmRleE9mKGZpbGUpICE9IC0xKSBjb250aW51ZTsKICAgIGxldCBlbnRyeSA9IGAke2Rpcn0ke2ZpbGV9YDsKICAgIGxldCBpc0RpciA9IGZhbHNlOwogICAgbGV0IHN0ID0gZnMuc3RhdFN5bmMoZW50cnkpOwogICAgaXNEaXIgPSBzdCAmJiBzdC5pc0RpcmVjdG9yeSgpOwogICAgaWYoaXNEaXIpIGVudHJ5ICs9ICcvJzsKICAgIGxldCBzaG93ID0gcHJlZChlbnRyeSwgZmlsZSwgZGlyLCBkZXB0aCk7CiAgICBpZihzaG93KSB7CiAgICAgIHlpZWxkIGVudHJ5OwogICAgfQogICAgaWYoaXNEaXIpIHlpZWxkKiBSZWN1cnNpdmVEaXJJdGVyYXRvcihlbnRyeSwgcHJlZCwgZGVwdGggKyAxKTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiogUmVhZERpclJlY3Vyc2l2ZShkaXIsIG1heERlcHRoID0gSW5maW5pdHkpIHsKICBkaXIgPSBkaXIucmVwbGFjZSgvfi9nLCBnbG9iYWxUaGlzLnByb2Nlc3MuZW52WydIT01FJ10gPz8gc3RkLmdldGVudignSE9NRScpKTsKICBmb3IobGV0IGZpbGUgb2YgZnMucmVhZGRpclN5bmMoZGlyKSkgewogICAgaWYoWycuJywgJy4uJ10uaW5kZXhPZihmaWxlKSAhPSAtMSkgY29udGludWU7CiAgICBsZXQgZW50cnkgPSBgJHtkaXJ9LyR7ZmlsZX1gOwogICAgbGV0IGlzRGlyID0gZmFsc2U7CiAgICBsZXQgc3QgPSBmcy5zdGF0U3luYyhlbnRyeSk7CiAgICBpc0RpciA9IHN0ICYmIHN0LmlzRGlyZWN0b3J5KCk7CiAgICB5aWVsZCBpc0RpciA/IGVudHJ5ICsgJy8nIDogZW50cnk7CiAgICBpZihtYXhEZXB0aCA+IDAgJiYgaXNEaXIpIHlpZWxkKiBSZWFkRGlyUmVjdXJzaXZlKGVudHJ5LCBtYXhEZXB0aCAtIDEpOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uKiBGaWx0ZXIoZ2VuLCByZWdFeCA9IC8uKi8pIHsKICBmb3IobGV0IGl0ZW0gb2YgZ2VuKSBpZihyZWdFeC50ZXN0KGl0ZW0pKSB5aWVsZCBpdGVtOwp9CgpleHBvcnQgZnVuY3Rpb24gRmlsdGVySW1hZ2VzKGdlbikgewogIHJldHVybiBGaWx0ZXIoZ2VuLCAvXC4ocG5nfGpwZT9nKSQvaSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBTb3J0RmlsZXMoYXJyLCBmaWVsZCA9ICdjdGltZScpIHsKICByZXR1cm4gWy4uLmFycl0uc29ydCgoYSwgYikgPT4gYS5zdGF0W2ZpZWxkXSAtIGIuc3RhdFtmaWVsZF0pOwp9CgpleHBvcnQgZnVuY3Rpb24qIFN0YXRGaWxlcyhnZW4pIHsKICBmb3IobGV0IGZpbGUgb2YgZ2VuKSB7CiAgICBsZXQgc3RhdCA9IGZzLnN0YXRTeW5jKGZpbGUpOwogICAgbGV0IG9iaiA9IGRlZmluZSgKICAgICAgeyBmaWxlLCBzdGF0IH0sCiAgICAgIHsKICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmZpbGU7CiAgICAgICAgfQogICAgICB9CiAgICApOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ3NpemUnLCB7CiAgICAgIGdldDogbWVtb2l6ZSgoKSA9PiB7CiAgICAgICAgbGV0IHsgZmlsZW5hbWUsIC4uLmluZm8gfSA9IEltYWdlSW5mbyhvYmouZmlsZSk7CiAgICAgICAgcmV0dXJuIGRlZmluZShpbmZvLCB7CiAgICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggKyAneCcgKyB0aGlzLmhlaWdodDsKICAgICAgICAgIH0sCiAgICAgICAgICBnZXQgbGFuZHNjYXBlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA+IHRoaXMuaGVpZ2h0OwogICAgICAgICAgfSwKICAgICAgICAgIGdldCBwb3J0cmFpdCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ID4gdGhpcy53aWR0aDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkKICAgIH0pOwogICAgeWllbGQgb2JqOwogIH0KfQoKLypleHBvcnQgZnVuY3Rpb24gUmVhZEZkKGZkLCBidWZmZXJTaXplKSB7CiAgZnVuY3Rpb24qIEZkUmVhZCgpIHsKICAgIGxldCByZXQsCiAgICAgIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJTaXplKTsKICAgIGRvIHsKICAgICAgaWYoKHJldCA9IGZzLnJlYWRTeW5jKGZkLCBidWYsIDAsIGJ1Zi5ieXRlTGVuZ3RoKSkgPiAwKSB5aWVsZCByZXQgPT0gYnVmLmJ5dGVMZW5ndGggPyBidWYgOiBidWYuc2xpY2UoMCwgcmV0KTsKICAgIH0gd2hpbGUocmV0ID4gMCk7CiAgfQogIHJldHVybiBbLi4uRmRSZWFkKCldLnJlZHVjZSgoYWNjLCBidWYpID0+IChhY2MgKz0gdG9TdHJpbmcoYnVmKSksICcnKTsKfSovCi8qCmV4cG9ydCBmdW5jdGlvbiBGZFJlYWRlcihmZCwgYnVmZmVyU2l6ZSA9IDEwMjQpIHsKICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlclNpemUpOwogIHJldHVybiBuZXcgUmVwZWF0ZXIoYXN5bmMgKHB1c2gsIHN0b3ApID0+IHsKICAgIGxldCByZXQ7CiAgICBkbyB7CiAgICAgIGxldCByID0gYXdhaXQgd2FpdFJlYWQoZmQpOwogICAgICByZXQgPSB0eXBlb2YgZmQgPT0gJ251bWJlcicgPyBmcy5yZWFkU3luYyhmZCwgYnVmKSA6IGZkLnJlYWQoYnVmKTsKICAgICAgaWYocmV0ID4gMCkgewogICAgICAgIGxldCBkYXRhID0gYnVmLnNsaWNlKDAsIHJldCk7CiAgICAgICAgYXdhaXQgcHVzaChmcy5idWZmZXJUb1N0cmluZyhkYXRhKSk7CiAgICAgIH0KICAgIH0gd2hpbGUocmV0ID09IGJ1ZmZlclNpemUpOwogICAgc3RvcCgpOwogICAgdHlwZW9mIGZkID09ICdudW1iZXInID8gZnMuY2xvc2VTeW5jKGZkKSA6IGZkLmRlc3Ryb3koKTsKICB9KTsKfSovCmV4cG9ydCBhc3luYyBmdW5jdGlvbiogRmRSZWFkZXIoZmQsIGJ1ZmZlclNpemUgPSAxMDI0KSB7CiAgbGV0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJTaXplKTsKICBsZXQgcmV0OwogIGRvIHsKICAgIGxldCByID0gYXdhaXQgd2FpdFJlYWQoZmQpOwogICAgY29uc29sZS5sb2coJ3InLCByKTsKICAgIHJldCA9IHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IGF3YWl0IGZzLnJlYWQoZmQsIGJ1ZikgOiBhd2FpdCBmZC5yZWFkKGJ1Zik7CiAgICBpZihyZXQgPiAwKSB7CiAgICAgIGxldCBkYXRhID0gYnVmLnNsaWNlKDAsIHJldCk7CiAgICAgIHlpZWxkIGZzLmJ1ZmZlclRvU3RyaW5nKGRhdGEpOwogICAgfQogIH0gd2hpbGUocmV0ID09IGJ1ZmZlclNpemUpOwogIHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IGF3YWl0IGZzLmNsb3NlKGZkKSA6IGZkLmRlc3Ryb3koKTsKICByZXR1cm47Cn0KCmV4cG9ydCBmdW5jdGlvbiBDb3B5VG9DbGlwYm9hcmQodGV4dCkgewogIGNvbnN0IHsgZW52IH0gPSBwcm9jZXNzOwogIGxldCBjaGlsZCA9IGNoaWxkX3Byb2Nlc3Muc3Bhd24oJ3hjbGlwJywgWyctaW4nLCAnLXZlcmJvc2UnXSwgeyBlbnYsIHN0ZGlvOiBbJ3BpcGUnLCAnaW5oZXJpdCcsICdpbmhlcml0J10gfSk7CiAgbGV0IFtwaXBlXSA9IGNoaWxkLnN0ZGlvOwoKICBsZXQgd3JpdHRlbiA9IGZzLndyaXRlU3luYyhwaXBlLCB0ZXh0LCAwLCB0ZXh0Lmxlbmd0aCk7CiAgZnMuY2xvc2VTeW5jKHBpcGUpOwogIGxldCBzdGF0dXMgPSBjaGlsZC53YWl0KCk7CiAgY29uc29sZS5sb2coJ2NoaWxkJywgY2hpbGQpOwogIHJldHVybiB7IHdyaXR0ZW4sIHN0YXR1cyB9Owp9CgpleHBvcnQgZnVuY3Rpb24gUmVhZENhbGxiYWNrKGZkLCBmbiA9IGRhdGEgPT4ge30pIHsKICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKDEwMjQpOwogIG9zLnNldFJlYWRIYW5kbGVyKGZkLCAoKSA9PiB7CiAgICBsZXQgciA9IGZzLnJlYWRTeW5jKGZkLCBidWYsIDAsIDEwMjQpOwogICAgaWYociA8PSAwKSB7CiAgICAgIGZzLmNsb3NlU3luYyhmZCk7CiAgICAgIG9zLnNldFJlYWRIYW5kbGVyKGZkLCBudWxsKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgbGV0IGRhdGEgPSBidWYuc2xpY2UoMCwgcik7CiAgICBkYXRhID0gdG9TdHJpbmcoZGF0YSk7CiAgICBmbihkYXRhKTsKICB9KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIExvZ0NhbGwoZm4sIHRoaXNPYmopIHsKICBsZXQgeyBuYW1lIH0gPSBmbjsKICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykgewogICAgbGV0IHJlc3VsdDsKICAgIHJlc3VsdCA9IGZuLmFwcGx5KHRoaXNPYmogPz8gdGhpcywgYXJncyk7CiAgICBjb25zb2xlLmxvZygnRnVuY3Rpb24gJyArIG5hbWUgKyAnKCcsIC4uLmFyZ3MubWFwKGFyZyA9PiBpbnNwZWN0KGFyZywgeyBjb2xvcnM6IGZhbHNlLCBtYXhTdHJpbmdMZW5ndGg6IDIwIH0pKSwgJykgPScsIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBTcGF3bihmaWxlLCBhcmdzLCBvcHRpb25zID0ge30pIHsKICBsZXQgeyBibG9jayA9IHRydWUsIHVzZVBhdGggPSB0cnVlLCBjd2QsIHN0ZGlvID0gWydpbmhlcml0JywgJ2luaGVyaXQnLCAnaW5oZXJpdCddLCBlbnYsIHVpZCwgZ2lkIH0gPSBvcHRpb25zOwogIGxldCBwYXJlbnQgPSBbLi4uc3RkaW9dOwoKICBmb3IobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICBpZihzdGRpb1tpXSA9PSAncGlwZScpIHsKICAgICAgbGV0IFtyLCB3XSA9IG9zLnBpcGUoKTsKICAgICAgc3RkaW9baV0gPSBpID09IDAgPyByIDogdzsKICAgICAgcGFyZW50W2ldID0gaSA9PSAwID8gdyA6IHI7CiAgICB9IGVsc2UgaWYoc3RkaW9baV0gPT0gJ2luaGVyaXQnKSB7CiAgICAgIHN0ZGlvW2ldID0gaTsKICAgIH0KICB9CgogIGNvbnN0IFtzdGRpbiwgc3Rkb3V0LCBzdGRlcnJdID0gc3RkaW87CiAgbGV0IHBpZCA9IG9zLmV4ZWMoW2ZpbGUsIC4uLmFyZ3NdLCB7IGJsb2NrLCB1c2VQYXRoLCBjd2QsIHN0ZGluLCBzdGRvdXQsIHN0ZGVyciwgZW52LCB1aWQsIGdpZCB9KTsKICBmb3IobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICBpZih0eXBlb2Ygc3RkaW9baV0gPT0gJ251bWJlcicgJiYgc3RkaW9baV0gIT0gaSkgb3MuY2xvc2Uoc3RkaW9baV0pOwogIH0KCiAgcmV0dXJuIHsKICAgIHBpZCwKICAgIHN0ZGlvOiBwYXJlbnQsCiAgICB3YWl0KCkgewogICAgICBsZXQgW3JldCwgc3RhdHVzXSA9IG9zLndhaXRwaWQodGhpcy5waWQsIG9zLldOT0hBTkcpOwogICAgICByZXR1cm4gcmV0OwogICAgfQogIH07Cn0KCi8vICdodHRwczovL3d3dy5kaXNjb2dzLmNvbS9zZWxsL29yZGVyLzgzNjkwMjItMzY0JwoKZXhwb3J0IGZ1bmN0aW9uIEZldGNoVVJMKHVybCwgb3B0aW9ucyA9IHt9KSB7CiAgbGV0IHsgaGVhZGVycywgcHJveHksIGNvb2tpZXMgPSAnY29va2llcy50eHQnLCByYW5nZSwgYm9keSwgdmVyc2lvbiA9ICcxLjEnLCB0bHN2LCAndXNlci1hZ2VudCc6IHVzZXJBZ2VudCB9ID0gb3B0aW9uczsKCiAgbGV0IGFyZ3MgPSBPYmplY3QuZW50cmllcyhoZWFkZXJzID8/IHt9KQogICAgLnJlZHVjZSgoYWNjLCBbaywgdl0pID0+IGFjYy5jb25jYXQoWyctSCcsIGAke2t9OiAke3Z9YF0pLCBbXSkKICAgIC5jb25jYXQoQXJyYXkuaXNBcnJheSh1cmwpID8gdXJsIDogW3VybF0pOwoKICBhcmdzLnB1c2goJy0tY29tcHJlc3NlZCcpOwogIGFyZ3MudW5zaGlmdCgnLUwnLCAnLWsnKTsKCiAgaWYoYm9keSkgYXJncy51bnNoaWZ0KCctZCcsIGJvZHkpOwogIGlmKHZlcnNpb24pIGFyZ3MudW5zaGlmdCgnLS1odHRwJyArIHZlcnNpb24pOwogIGlmKHRsc3YpIGFyZ3MudW5zaGlmdCgnLS10bHN2JyArIHRsc3YpOwogIGlmKHVzZXJBZ2VudCkgYXJncy51bnNoaWZ0KCctQScsIHVzZXJBZ2VudCk7CiAgaWYocmFuZ2UpIGFyZ3MudW5zaGlmdCgnLXInLCByYW5nZSk7CiAgaWYoY29va2llcykgYXJncy51bnNoaWZ0KCctYycsIGNvb2tpZXMpOwogIGlmKHByb3h5KSBhcmdzLnVuc2hpZnQoJy14JywgcHJveHkpOwoKICAvL2FyZ3MudW5zaGlmdCgnLXYnKTsKICAvL2FyZ3MudW5zaGlmdCgnLXNTJyk7CiAgYXJncy51bnNoaWZ0KCctLXRjcC1mYXN0b3BlbicsICctLXRjcC1ub2RlbGF5Jyk7CgogIGNvbnNvbGUubG9nKCdGZXRjaFVSTCcsIGNvbnNvbGUuY29uZmlnKHsgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LCBjb21wYWN0OiBmYWxzZSB9KSwgeyBhcmdzIH0pOwoKICBsZXQgY2hpbGQgPSAvKiBjaGlsZF9wcm9jZXNzLnNwYXduKi8gU3Bhd24oJ2N1cmwnLCBhcmdzLCB7IGJsb2NrOiBmYWxzZSwgc3RkaW86IFsnaW5oZXJpdCcsICdwaXBlJywgJ3BpcGUnXSB9KTsKCiAgbGV0IFssIG91dCwgZXJyXSA9IGNoaWxkLnN0ZGlvOwoKICBjb25zb2xlLmxvZygnY2hpbGQnLCB7IG91dCwgZXJyIH0pOwoKICBsZXQgb3V0cHV0ID0gJycsCiAgICBlcnJvcnMgPSAnJzsKCiAgUmVhZENhbGxiYWNrKG91dCwgZGF0YSA9PiB7CiAgICBvdXRwdXQgKz0gZGF0YTsKICAgIC8vIGNvbnNvbGUubG9nKCdkYXRhJyxkYXRhLmxlbmd0aCk7CiAgfSk7CiAgUmVhZENhbGxiYWNrKGVyciwgZGF0YSA9PiB7CiAgICBlcnJvcnMgKz0gZGF0YTsKICAgIHN0ZC5lcnIucHV0cyhkYXRhKTsKICAgIHN0ZC5lcnIuZmx1c2goKTsKICB9KTsKICBsZXQgZmxhZ3MgPSBjaGlsZF9wcm9jZXNzLldOT0hBTkc7CiAgY29uc29sZS5sb2coJ2ZsYWdzJywgZmxhZ3MpOwogIGNoaWxkLndhaXQoZmxhZ3MpOwoKICBsZXQgc3RhdHVzOwoKICBzdGF0dXMgPSBjaGlsZC53YWl0KCk7CgogIGNvbnNvbGUubG9nKCdGZXRjaFVSTCcsIHsgLyogb3V0cHV0OiBlc2NhcGUob3V0cHV0KSwgZXJyb3JzLCovIHN0YXR1cyB9KTsKCiAgcmV0dXJuIG91dHB1dDsKfQoAAAAAAAAAACguAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8AkAAAAAAADwCQAAAAAAAAAAAAAAAPC/"
				],
				[
					221,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAoLgAAaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnOwppbXBvcnQgKiBhcyBwYXRoIGZyb20gJy4vbGliL3BhdGguanMnOwppbXBvcnQgeyB0eXBlcywgdG9TdHJpbmcsIHF1b3RlLCBlc2NhcGUsIHByZWRpY2F0ZSwgdG9BcnJheUJ1ZmZlciB9IGZyb20gJy4vbGliL21pc2MuanMnOwppbXBvcnQgY2hpbGRfcHJvY2VzcyBmcm9tICdjaGlsZF9wcm9jZXNzJzsKCmxldCBianNvbjsKCmltcG9ydCgnYmpzb24nKSAudGhlbihtID0+IChianNvbiA9IG0pKSAuY2F0Y2goKCkgPT4ge30pOwoKbGV0IG1tYXA7CgppbXBvcnQoJ21tYXAnKSAudGhlbihtID0+IChtbWFwID0gbSkpIC5jYXRjaCgoKSA9PiB7fSk7CgpsZXQgeG1sOwoKaW1wb3J0KCd4bWwnKSAudGhlbihtID0+ICh4bWwgPSBtKSkgLmNhdGNoKCgpID0+IHt9KTsKCmV4cG9ydCBmdW5jdGlvbiBJZkRlYnVnKHRva2VuKSB7CiAgY29uc3QgeyBERUJVRyA9ICcnIH0gPSBnbG9iYWxUaGlzLnByb2Nlc3MgPyBnbG9iYWxUaGlzLnByb2Nlc3MuZW52IDoge307IC8vc3RkLmdldGVudmlyb24oKTsKCiAgY29uc3QgdG9rTGlzdCA9IERFQlVHLnNwbGl0KC9bXkEtWmEtejAtOV9dKy9nKTsKCiAgcmV0dXJuIHRva0xpc3QuaW5kZXhPZih0b2tlbikgIT0gLTE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBMb2dJZkRlYnVnKHRva2VuLCBsb2dnZXJGbikgewogIGlmKCFJZkRlYnVnKHRva2VuKSkgcmV0dXJuICgpID0+IHt9OwoKICByZXR1cm4gbG9nZ2VyRm47Cn0KCmNvbnN0IGRlYnVnID0gTG9nSWZEZWJ1ZygnaW8taGVscGVycycsICguLi5hcmdzKSA9PiBjb25zb2xlLmxvZyguLi5hcmdzKSk7CgpleHBvcnQgZnVuY3Rpb24gUmVhZEZkKGZkLCBiaW5hcnkpIHsKICBsZXQgYWIgPSBuZXcgQXJyYXlCdWZmZXIoMTAyNCk7CiAgbGV0IG91dCA9ICcnOwogIGZvcig7OykgewogICAgbGV0IHJldCA9IGZzLnJlYWRTeW5jKGZkLCBhYiwgMCwgMTAyNCk7CgogICAgaWYocmV0IDw9IDApIGJyZWFrOwoKICAgIG91dCArPSB0b1N0cmluZyhhYi5zbGljZSgwLCByZXQpKTsKCiAgICBkZWJ1ZyhgUmVhZCAjJHtmZH06ICR7cmV0fSBieXRlc2ApOwogIH0KICByZXR1cm4gb3V0Owp9CgpleHBvcnQgZnVuY3Rpb24gUmVhZEZpbGUobmFtZSwgYmluYXJ5KSB7CiAgbGV0IHJldCA9IGZzLnJlYWRGaWxlU3luYyhuYW1lLCBiaW5hcnkgPyBudWxsIDogJ3V0Zi04Jyk7CgogIGRlYnVnKGBSZWFkICR7bmFtZX06ICR7cmV0Py5ieXRlTGVuZ3RofSBieXRlc2ApOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBMb2FkSGlzdG9yeShmaWxlbmFtZSkgewogIGxldCBjb250ZW50cyA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0Zi04Jyk7CiAgbGV0IGRhdGE7CgogIGNvbnN0IHBhcnNlID0gKCkgPT4gewogICAgdHJ5IHsKICAgICAgZGF0YSA9IEpTT04ucGFyc2UoY29udGVudHMpOwogICAgfSBjYXRjaChlKSB7fQogICAgaWYoZGF0YSkgcmV0dXJuIGRhdGE7CiAgICB0cnkgewogICAgICBkYXRhID0gY29udGVudHMuc3BsaXQoL1xuL2cpOwogICAgfSBjYXRjaChlKSB7fQogICAgaWYoZGF0YSkgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIChwYXJzZSgpID8/IFtdKS5maWx0ZXIoZW50cnkgPT4gKGVudHJ5ICsgJycpLnRyaW0oKSAhPSAnJyk7CiAgLy8ubWFwKGVudHJ5ID0+IGVudHJ5LnJlcGxhY2UoL1xcbi9nLCAnXG4nKSkKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRKU09OKGZpbGVuYW1lKSB7CiAgbGV0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGYtOCcpOwoKICBpZihkYXRhKSBkZWJ1ZyhgUmVhZEpTT046ICR7ZGF0YS5sZW5ndGh9IGJ5dGVzIHJlYWQgZnJvbSAnJHtmaWxlbmFtZX0nYCk7CiAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRYTUwoZmlsZW5hbWUsIC4uLmFyZ3MpIHsKICBsZXQgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgbnVsbCk7CgogIGlmKGRhdGEpIGRlYnVnKGBSZWFkWE1MOiAke2RhdGEubGVuZ3RofSBieXRlcyByZWFkIGZyb20gJyR7ZmlsZW5hbWV9J2ApOwogIHJldHVybiBkYXRhID8geG1sLnJlYWQoZGF0YSwgZmlsZW5hbWUsIC4uLmFyZ3MpIDogbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIE1hcEZpbGUoZmlsZW5hbWUpIHsKICBsZXQgZmQgPSBvcy5vcGVuKGZpbGVuYW1lLCBvcy5PX1JET05MWSk7CiAgbGV0IHsgc2l6ZSB9ID0gb3Muc3RhdChmaWxlbmFtZSlbMF07CiAgZGVidWcoYE1hcEZpbGVgLCB7IGZpbGVuYW1lLCBmZCwgc2l6ZSB9KTsKICBsZXQgZGF0YSA9IG1tYXAubW1hcCgwLCBzaXplICsgMTAsIG1tYXAuUFJPVF9SRUFELCBtbWFwLk1BUF9QUklWQVRFLCBmZCwgMCk7CiAgb3MuY2xvc2UoZmQpOwogIHJldHVybiBkYXRhOwp9CgpleHBvcnQgZnVuY3Rpb24gV3JpdGVGaWxlKG5hbWUsIGRhdGEsIG9wdHMgPSB7fSkgewogIGNvbnN0IHsgbW9kZSA9IDBvNjQ0LCB2ZXJib3NlID0gdHJ1ZSB9ID0gb3B0czsKCiAgaWYodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycpIGRhdGEgPSB0b0FycmF5QnVmZmVyKGRhdGEpOwoKICBpZih0eXBlcy5pc0FycmF5QnVmZmVyKGRhdGEpKSBkYXRhID0gW2RhdGFdOwoKICBpZih0eXBlb2YgZGF0YSA9PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsICYmIFN5bWJvbC5pdGVyYXRvciBpbiBkYXRhKSB7CiAgICBsZXQgZmQgPSBmcy5vcGVuU3luYyhuYW1lLCBvcy5PX1dST05MWSB8IG9zLk9fVFJVTkMgfCBvcy5PX0NSRUFULCBtb2RlKTsKICAgIGxldCByID0gMDsKICAgIGZvcihsZXQgaXRlbSBvZiBkYXRhKSB7CiAgICAgIHIgKz0gZnMud3JpdGVTeW5jKGZkLCB0b0FycmF5QnVmZmVyKGl0ZW0gKyAnJykpOwogICAgfQogICAgZnMuY2xvc2VTeW5jKGZkKTsKICAgIGxldCBzdGF0ID0gZnMuc3RhdFN5bmMobmFtZSk7CiAgICByZXR1cm4gc3RhdD8uc2l6ZTsKICB9CiAgaWYoZnMuZXhpc3RzU3luYyhuYW1lKSkgZnMudW5saW5rU3luYyhuYW1lKTsKCiAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkgZGF0YSA9IGRhdGEuam9pbignXG4nKTsKCiAgaWYodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycgJiYgIWRhdGEuZW5kc1dpdGgoJ1xuJykpIGRhdGEgKz0gJ1xuJzsKICBsZXQgcmV0ID0gZnMud3JpdGVGaWxlU3luYyhuYW1lLCBkYXRhKTsKCiAgaWYodmVyYm9zZSkgZGVidWcoYFdyb3RlICR7bmFtZX06ICR7cmV0fSBieXRlc2ApOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBXcml0ZUpTT04obmFtZSwgZGF0YSwgLi4uYXJncykgewogIGNvbnN0IFtjb21wYWN0XSA9IGFyZ3M7CiAgaWYodHlwZW9mIGNvbXBhY3QgPT0gJ2Jvb2xlYW4nKSBhcmdzID0gY29tcGFjdCA/IFtdIDogW251bGwsIDJdOwoKICByZXR1cm4gV3JpdGVGaWxlKG5hbWUsIEpTT04uc3RyaW5naWZ5KGRhdGEsIC4uLmFyZ3MpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFdyaXRlWE1MKG5hbWUsIGRhdGEsIC4uLmFyZ3MpIHsKICByZXR1cm4gV3JpdGVGaWxlKG5hbWUsIHhtbC53cml0ZShkYXRhLCAuLi5hcmdzKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBSZWFkQkpTT04oZmlsZW5hbWUpIHsKICBsZXQgZmQgPSBvcy5vcGVuKGZpbGVuYW1lLCBvcy5PX1JET05MWSk7CiAgbGV0IHsgc2l6ZSB9ID0gb3Muc3RhdChmaWxlbmFtZSlbMF07CiAgZGVidWcoYFJlYWRCSlNPTmAsIHsgZmlsZW5hbWUsIGZkLCBzaXplIH0pOwogIGxldCBkYXRhID0gbW1hcC5tbWFwKDAsIHNpemUgKyAxMCwgbW1hcC5QUk9UX1JFQUQsIG1tYXAuTUFQX1BSSVZBVEUsIGZkLCAwKTsKICBkZWJ1ZyhgUmVhZEJKU09OYCwgeyBkYXRhIH0pOwogIGxldCByZXQgPSBianNvbi5yZWFkKGRhdGEsIDAsIHNpemUpOwoKICBtbWFwLm11bm1hcChkYXRhKTsKICBvcy5jbG9zZShmZCk7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIFdyaXRlQkpTT04obmFtZSwgZGF0YSkgewogIGxldCBidWYgPSBianNvbi53cml0ZShkYXRhKTsKICBsZXQgc2l6ZSA9IGJ1Zi5ieXRlTGVuZ3RoOwogIGxldCBmZCA9IG9zLm9wZW4obmFtZSwgb3MuT19XUk9OTFkgfCBvcy5PX0NSRUFUIHwgb3MuT19UUlVOQyk7CgogIGxldCByZXQgPSBvcy53cml0ZShmZCwgYnVmLCAwLCBzaXplKTsKICBkZWJ1ZygnV3JpdGVCSlNPTicsIHsgbmFtZSwgZmQsIHNpemUsIHJldCB9KTsKICBvcy5jbG9zZShmZCk7CgogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiogRGlySXRlcmF0b3IoLi4uYXJncykgewogIGxldCBwcmVkID0gdHlwZW9mIGFyZ3NbMF0gIT0gJ3N0cmluZycgPyBwcmVkaWNhdGUoYXJncy5zaGlmdCgpKSA6ICgpID0+IHRydWU7CiAgZm9yKGxldCBkaXIgb2YgYXJncykgewogICAgZGlyID0gZGlyLnJlcGxhY2UoL34vZywgc3RkLmdldGVudignSE9NRScpKTsKICAgIGxldCBlbnRyaWVzID0gb3MucmVhZGRpcihkaXIpWzBdID8/IFtdOwogICAgZm9yKGxldCBlbnRyeSBvZiBlbnRyaWVzLnNvcnQoKSkgewogICAgICBsZXQgZmlsZSA9IHBhdGguam9pbihkaXIsIGVudHJ5KTsKICAgICAgbGV0IGxzdCA9IG9zLmxzdGF0KGZpbGUpWzBdOwogICAgICBsZXQgc3QgPSBvcy5zdGF0KGZpbGUpWzBdOwogICAgICBsZXQgaXNfZGlyID0gKHN0Py5tb2RlICYgb3MuU19JRk1UKSA9PSBvcy5TX0lGRElSOwogICAgICBsZXQgaXNfc3ltbGluayA9IChsc3Q/Lm1vZGUgJiBvcy5TX0lGTVQpID09IG9zLlNfSUZMTks7CgogICAgICBpZihpc19kaXIpIGZpbGUgKz0gJy8nOwogICAgICBpZighcHJlZChlbnRyeSwgZmlsZSwgaXNfZGlyLCBpc19zeW1saW5rKSkgY29udGludWU7CiAgICAgIHlpZWxkIGZpbGU7CiAgICB9CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24qIFJlY3Vyc2l2ZURpckl0ZXJhdG9yKGRpciwgcHJlZCA9IChlbnRyeSwgZmlsZSwgZGlyLCBkZXB0aCkgPT4gdHJ1ZSwgZGVwdGggPSAwKSB7CiAgbGV0IHJlOwogIGlmKHR5cGVvZiBwcmVkICE9ICdmdW5jdGlvbicpIHsKICAgIGlmKCFwcmVkKSBwcmVkID0gJy4qJzsKICAgIGlmKHR5cGVvZiBwcmVkID09ICdzdHJpbmcnKSBwcmVkID0gbmV3IFJlZ0V4cChwcmVkLCAnZ2knKTsKICAgIHJlID0gcHJlZDsKICAgIHByZWQgPSAoZW50cnksIGZpbGUsIGRpciwgZGVwdGgpID0+IHJlLnRlc3QoZW50cnkpIHx8IHJlLnRlc3QoZmlsZSk7CiAgfQogIGlmKCFkaXIuZW5kc1dpdGgoJy8nKSkgZGlyICs9ICcvJzsKICBkaXIgPSBkaXIucmVwbGFjZSgvfi9nLCBzdGQuZ2V0ZW52KCdIT01FJykpOwogIGZvcihsZXQgZmlsZSBvZiBmcy5yZWFkZGlyU3luYyhkaXIpKSB7CiAgICBpZihbJy4nLCAnLi4nXS5pbmRleE9mKGZpbGUpICE9IC0xKSBjb250aW51ZTsKICAgIGxldCBlbnRyeSA9IGAke2Rpcn0ke2ZpbGV9YDsKICAgIGxldCBpc0RpciA9IGZhbHNlOwogICAgbGV0IHN0ID0gZnMuc3RhdFN5bmMoZW50cnkpOwogICAgaXNEaXIgPSBzdCAmJiBzdC5pc0RpcmVjdG9yeSgpOwogICAgaWYoaXNEaXIpIGVudHJ5ICs9ICcvJzsKICAgIGxldCBzaG93ID0gcHJlZChlbnRyeSwgZmlsZSwgZGlyLCBkZXB0aCk7CiAgICBpZihzaG93KSB7CiAgICAgIHlpZWxkIGVudHJ5OwogICAgfQogICAgaWYoaXNEaXIpIHlpZWxkKiBSZWN1cnNpdmVEaXJJdGVyYXRvcihlbnRyeSwgcHJlZCwgZGVwdGggKyAxKTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiogUmVhZERpclJlY3Vyc2l2ZShkaXIsIG1heERlcHRoID0gSW5maW5pdHkpIHsKICBkaXIgPSBkaXIucmVwbGFjZSgvfi9nLCBnbG9iYWxUaGlzLnByb2Nlc3MuZW52WydIT01FJ10gPz8gc3RkLmdldGVudignSE9NRScpKTsKICBmb3IobGV0IGZpbGUgb2YgZnMucmVhZGRpclN5bmMoZGlyKSkgewogICAgaWYoWycuJywgJy4uJ10uaW5kZXhPZihmaWxlKSAhPSAtMSkgY29udGludWU7CiAgICBsZXQgZW50cnkgPSBgJHtkaXJ9LyR7ZmlsZX1gOwogICAgbGV0IGlzRGlyID0gZmFsc2U7CiAgICBsZXQgc3QgPSBmcy5zdGF0U3luYyhlbnRyeSk7CiAgICBpc0RpciA9IHN0ICYmIHN0LmlzRGlyZWN0b3J5KCk7CiAgICB5aWVsZCBpc0RpciA/IGVudHJ5ICsgJy8nIDogZW50cnk7CiAgICBpZihtYXhEZXB0aCA+IDAgJiYgaXNEaXIpIHlpZWxkKiBSZWFkRGlyUmVjdXJzaXZlKGVudHJ5LCBtYXhEZXB0aCAtIDEpOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uKiBGaWx0ZXIoZ2VuLCByZWdFeCA9IC8uKi8pIHsKICBmb3IobGV0IGl0ZW0gb2YgZ2VuKSBpZihyZWdFeC50ZXN0KGl0ZW0pKSB5aWVsZCBpdGVtOwp9CgpleHBvcnQgZnVuY3Rpb24gRmlsdGVySW1hZ2VzKGdlbikgewogIHJldHVybiBGaWx0ZXIoZ2VuLCAvXC4ocG5nfGpwZT9nKSQvaSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBTb3J0RmlsZXMoYXJyLCBmaWVsZCA9ICdjdGltZScpIHsKICByZXR1cm4gWy4uLmFycl0uc29ydCgoYSwgYikgPT4gYS5zdGF0W2ZpZWxkXSAtIGIuc3RhdFtmaWVsZF0pOwp9CgpleHBvcnQgZnVuY3Rpb24qIFN0YXRGaWxlcyhnZW4pIHsKICBmb3IobGV0IGZpbGUgb2YgZ2VuKSB7CiAgICBsZXQgc3RhdCA9IGZzLnN0YXRTeW5jKGZpbGUpOwogICAgbGV0IG9iaiA9IGRlZmluZSgKICAgICAgeyBmaWxlLCBzdGF0IH0sCiAgICAgIHsKICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmZpbGU7CiAgICAgICAgfQogICAgICB9CiAgICApOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ3NpemUnLCB7CiAgICAgIGdldDogbWVtb2l6ZSgoKSA9PiB7CiAgICAgICAgbGV0IHsgZmlsZW5hbWUsIC4uLmluZm8gfSA9IEltYWdlSW5mbyhvYmouZmlsZSk7CiAgICAgICAgcmV0dXJuIGRlZmluZShpbmZvLCB7CiAgICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggKyAneCcgKyB0aGlzLmhlaWdodDsKICAgICAgICAgIH0sCiAgICAgICAgICBnZXQgbGFuZHNjYXBlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA+IHRoaXMuaGVpZ2h0OwogICAgICAgICAgfSwKICAgICAgICAgIGdldCBwb3J0cmFpdCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ID4gdGhpcy53aWR0aDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkKICAgIH0pOwogICAgeWllbGQgb2JqOwogIH0KfQoKLypleHBvcnQgZnVuY3Rpb24gUmVhZEZkKGZkLCBidWZmZXJTaXplKSB7CiAgZnVuY3Rpb24qIEZkUmVhZCgpIHsKICAgIGxldCByZXQsCiAgICAgIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJTaXplKTsKICAgIGRvIHsKICAgICAgaWYoKHJldCA9IGZzLnJlYWRTeW5jKGZkLCBidWYsIDAsIGJ1Zi5ieXRlTGVuZ3RoKSkgPiAwKSB5aWVsZCByZXQgPT0gYnVmLmJ5dGVMZW5ndGggPyBidWYgOiBidWYuc2xpY2UoMCwgcmV0KTsKICAgIH0gd2hpbGUocmV0ID4gMCk7CiAgfQogIHJldHVybiBbLi4uRmRSZWFkKCldLnJlZHVjZSgoYWNjLCBidWYpID0+IChhY2MgKz0gdG9TdHJpbmcoYnVmKSksICcnKTsKfSovCi8qCmV4cG9ydCBmdW5jdGlvbiBGZFJlYWRlcihmZCwgYnVmZmVyU2l6ZSA9IDEwMjQpIHsKICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlclNpemUpOwogIHJldHVybiBuZXcgUmVwZWF0ZXIoYXN5bmMgKHB1c2gsIHN0b3ApID0+IHsKICAgIGxldCByZXQ7CiAgICBkbyB7CiAgICAgIGxldCByID0gYXdhaXQgd2FpdFJlYWQoZmQpOwogICAgICByZXQgPSB0eXBlb2YgZmQgPT0gJ251bWJlcicgPyBmcy5yZWFkU3luYyhmZCwgYnVmKSA6IGZkLnJlYWQoYnVmKTsKICAgICAgaWYocmV0ID4gMCkgewogICAgICAgIGxldCBkYXRhID0gYnVmLnNsaWNlKDAsIHJldCk7CiAgICAgICAgYXdhaXQgcHVzaChmcy5idWZmZXJUb1N0cmluZyhkYXRhKSk7CiAgICAgIH0KICAgIH0gd2hpbGUocmV0ID09IGJ1ZmZlclNpemUpOwogICAgc3RvcCgpOwogICAgdHlwZW9mIGZkID09ICdudW1iZXInID8gZnMuY2xvc2VTeW5jKGZkKSA6IGZkLmRlc3Ryb3koKTsKICB9KTsKfSovCmV4cG9ydCBhc3luYyBmdW5jdGlvbiogRmRSZWFkZXIoZmQsIGJ1ZmZlclNpemUgPSAxMDI0KSB7CiAgbGV0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJTaXplKTsKICBsZXQgcmV0OwogIGRvIHsKICAgIGxldCByID0gYXdhaXQgd2FpdFJlYWQoZmQpOwogICAgY29uc29sZS5sb2coJ3InLCByKTsKICAgIHJldCA9IHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IGF3YWl0IGZzLnJlYWQoZmQsIGJ1ZikgOiBhd2FpdCBmZC5yZWFkKGJ1Zik7CiAgICBpZihyZXQgPiAwKSB7CiAgICAgIGxldCBkYXRhID0gYnVmLnNsaWNlKDAsIHJldCk7CiAgICAgIHlpZWxkIGZzLmJ1ZmZlclRvU3RyaW5nKGRhdGEpOwogICAgfQogIH0gd2hpbGUocmV0ID09IGJ1ZmZlclNpemUpOwogIHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IGF3YWl0IGZzLmNsb3NlKGZkKSA6IGZkLmRlc3Ryb3koKTsKICByZXR1cm47Cn0KCmV4cG9ydCBmdW5jdGlvbiBDb3B5VG9DbGlwYm9hcmQodGV4dCkgewogIGNvbnN0IHsgZW52IH0gPSBwcm9jZXNzOwogIGxldCBjaGlsZCA9IGNoaWxkX3Byb2Nlc3Muc3Bhd24oJ3hjbGlwJywgWyctaW4nLCAnLXZlcmJvc2UnXSwgeyBlbnYsIHN0ZGlvOiBbJ3BpcGUnLCAnaW5oZXJpdCcsICdpbmhlcml0J10gfSk7CiAgbGV0IFtwaXBlXSA9IGNoaWxkLnN0ZGlvOwoKICBsZXQgd3JpdHRlbiA9IGZzLndyaXRlU3luYyhwaXBlLCB0ZXh0LCAwLCB0ZXh0Lmxlbmd0aCk7CiAgZnMuY2xvc2VTeW5jKHBpcGUpOwogIGxldCBzdGF0dXMgPSBjaGlsZC53YWl0KCk7CiAgY29uc29sZS5sb2coJ2NoaWxkJywgY2hpbGQpOwogIHJldHVybiB7IHdyaXR0ZW4sIHN0YXR1cyB9Owp9CgpleHBvcnQgZnVuY3Rpb24gUmVhZENhbGxiYWNrKGZkLCBmbiA9IGRhdGEgPT4ge30pIHsKICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKDEwMjQpOwogIG9zLnNldFJlYWRIYW5kbGVyKGZkLCAoKSA9PiB7CiAgICBsZXQgciA9IGZzLnJlYWRTeW5jKGZkLCBidWYsIDAsIDEwMjQpOwogICAgaWYociA8PSAwKSB7CiAgICAgIGZzLmNsb3NlU3luYyhmZCk7CiAgICAgIG9zLnNldFJlYWRIYW5kbGVyKGZkLCBudWxsKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgbGV0IGRhdGEgPSBidWYuc2xpY2UoMCwgcik7CiAgICBkYXRhID0gdG9TdHJpbmcoZGF0YSk7CiAgICBmbihkYXRhKTsKICB9KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIExvZ0NhbGwoZm4sIHRoaXNPYmopIHsKICBsZXQgeyBuYW1lIH0gPSBmbjsKICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykgewogICAgbGV0IHJlc3VsdDsKICAgIHJlc3VsdCA9IGZuLmFwcGx5KHRoaXNPYmogPz8gdGhpcywgYXJncyk7CiAgICBjb25zb2xlLmxvZygnRnVuY3Rpb24gJyArIG5hbWUgKyAnKCcsIC4uLmFyZ3MubWFwKGFyZyA9PiBpbnNwZWN0KGFyZywgeyBjb2xvcnM6IGZhbHNlLCBtYXhTdHJpbmdMZW5ndGg6IDIwIH0pKSwgJykgPScsIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBTcGF3bihmaWxlLCBhcmdzLCBvcHRpb25zID0ge30pIHsKICBsZXQgeyBibG9jayA9IHRydWUsIHVzZVBhdGggPSB0cnVlLCBjd2QsIHN0ZGlvID0gWydpbmhlcml0JywgJ2luaGVyaXQnLCAnaW5oZXJpdCddLCBlbnYsIHVpZCwgZ2lkIH0gPSBvcHRpb25zOwogIGxldCBwYXJlbnQgPSBbLi4uc3RkaW9dOwoKICBmb3IobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICBpZihzdGRpb1tpXSA9PSAncGlwZScpIHsKICAgICAgbGV0IFtyLCB3XSA9IG9zLnBpcGUoKTsKICAgICAgc3RkaW9baV0gPSBpID09IDAgPyByIDogdzsKICAgICAgcGFyZW50W2ldID0gaSA9PSAwID8gdyA6IHI7CiAgICB9IGVsc2UgaWYoc3RkaW9baV0gPT0gJ2luaGVyaXQnKSB7CiAgICAgIHN0ZGlvW2ldID0gaTsKICAgIH0KICB9CgogIGNvbnN0IFtzdGRpbiwgc3Rkb3V0LCBzdGRlcnJdID0gc3RkaW87CiAgbGV0IHBpZCA9IG9zLmV4ZWMoW2ZpbGUsIC4uLmFyZ3NdLCB7IGJsb2NrLCB1c2VQYXRoLCBjd2QsIHN0ZGluLCBzdGRvdXQsIHN0ZGVyciwgZW52LCB1aWQsIGdpZCB9KTsKICBmb3IobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICBpZih0eXBlb2Ygc3RkaW9baV0gPT0gJ251bWJlcicgJiYgc3RkaW9baV0gIT0gaSkgb3MuY2xvc2Uoc3RkaW9baV0pOwogIH0KCiAgcmV0dXJuIHsKICAgIHBpZCwKICAgIHN0ZGlvOiBwYXJlbnQsCiAgICB3YWl0KCkgewogICAgICBsZXQgW3JldCwgc3RhdHVzXSA9IG9zLndhaXRwaWQodGhpcy5waWQsIG9zLldOT0hBTkcpOwogICAgICByZXR1cm4gcmV0OwogICAgfQogIH07Cn0KCi8vICdodHRwczovL3d3dy5kaXNjb2dzLmNvbS9zZWxsL29yZGVyLzgzNjkwMjItMzY0JwoKZXhwb3J0IGZ1bmN0aW9uIEZldGNoVVJMKHVybCwgb3B0aW9ucyA9IHt9KSB7CiAgbGV0IHsgaGVhZGVycywgcHJveHksIGNvb2tpZXMgPSAnY29va2llcy50eHQnLCByYW5nZSwgYm9keSwgdmVyc2lvbiA9ICcxLjEnLCB0bHN2LCAndXNlci1hZ2VudCc6IHVzZXJBZ2VudCB9ID0gb3B0aW9uczsKCiAgbGV0IGFyZ3MgPSBPYmplY3QuZW50cmllcyhoZWFkZXJzID8/IHt9KQogICAgLnJlZHVjZSgoYWNjLCBbaywgdl0pID0+IGFjYy5jb25jYXQoWyctSCcsIGAke2t9OiAke3Z9YF0pLCBbXSkKICAgIC5jb25jYXQoQXJyYXkuaXNBcnJheSh1cmwpID8gdXJsIDogW3VybF0pOwoKICBhcmdzLnB1c2goJy0tY29tcHJlc3NlZCcpOwogIGFyZ3MudW5zaGlmdCgnLUwnLCAnLWsnKTsKCiAgaWYoYm9keSkgYXJncy51bnNoaWZ0KCctZCcsIGJvZHkpOwogIGlmKHZlcnNpb24pIGFyZ3MudW5zaGlmdCgnLS1odHRwJyArIHZlcnNpb24pOwogIGlmKHRsc3YpIGFyZ3MudW5zaGlmdCgnLS10bHN2JyArIHRsc3YpOwogIGlmKHVzZXJBZ2VudCkgYXJncy51bnNoaWZ0KCctQScsIHVzZXJBZ2VudCk7CiAgaWYocmFuZ2UpIGFyZ3MudW5zaGlmdCgnLXInLCByYW5nZSk7CiAgaWYoY29va2llcykgYXJncy51bnNoaWZ0KCctYycsIGNvb2tpZXMpOwogIGlmKHByb3h5KSBhcmdzLnVuc2hpZnQoJy14JywgcHJveHkpOwoKICAvL2FyZ3MudW5zaGlmdCgnLXYnKTsKICAvL2FyZ3MudW5zaGlmdCgnLXNTJyk7CiAgYXJncy51bnNoaWZ0KCctLXRjcC1mYXN0b3BlbicsICctLXRjcC1ub2RlbGF5Jyk7CgogIGNvbnNvbGUubG9nKCdGZXRjaFVSTCcsIGNvbnNvbGUuY29uZmlnKHsgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LCBjb21wYWN0OiBmYWxzZSB9KSwgeyBhcmdzIH0pOwoKICBsZXQgY2hpbGQgPSAvKiBjaGlsZF9wcm9jZXNzLnNwYXduKi8gU3Bhd24oJ2N1cmwnLCBhcmdzLCB7IGJsb2NrOiBmYWxzZSwgc3RkaW86IFsnaW5oZXJpdCcsICdwaXBlJywgJ3BpcGUnXSB9KTsKCiAgbGV0IFssIG91dCwgZXJyXSA9IGNoaWxkLnN0ZGlvOwoKICBjb25zb2xlLmxvZygnY2hpbGQnLCB7IG91dCwgZXJyIH0pOwoKICBsZXQgb3V0cHV0ID0gJycsCiAgICBlcnJvcnMgPSAnJzsKCiAgUmVhZENhbGxiYWNrKG91dCwgZGF0YSA9PiB7CiAgICBvdXRwdXQgKz0gZGF0YTsKICAgIC8vIGNvbnNvbGUubG9nKCdkYXRhJyxkYXRhLmxlbmd0aCk7CiAgfSk7CiAgUmVhZENhbGxiYWNrKGVyciwgZGF0YSA9PiB7CiAgICBlcnJvcnMgKz0gZGF0YTsKICAgIHN0ZC5lcnIucHV0cyhkYXRhKTsKICAgIHN0ZC5lcnIuZmx1c2goKTsKICB9KTsKICBsZXQgZmxhZ3MgPSBjaGlsZF9wcm9jZXNzLldOT0hBTkc7CiAgY29uc29sZS5sb2coJ2ZsYWdzJywgZmxhZ3MpOwogIGNoaWxkLndhaXQoZmxhZ3MpOwoKICBsZXQgc3RhdHVzOwoKICBzdGF0dXMgPSBjaGlsZC53YWl0KCk7CgogIGNvbnNvbGUubG9nKCdGZXRjaFVSTCcsIHsgLyogb3V0cHV0OiBlc2NhcGUob3V0cHV0KSwgZXJyb3JzLCovIHN0YXR1cyB9KTsKCiAgcmV0dXJuIG91dHB1dDsKfQoAAAAAAAAAAN8tAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAkAAAAAAACSDAAAAAAAAAAAAAAAAPC/"
				],
				[
					222,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADfLQAAaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnOwppbXBvcnQgKiBhcyBwYXRoIGZyb20gJy4vbGliL3BhdGguanMnOwppbXBvcnQgeyB0eXBlcywgdG9TdHJpbmcsIHF1b3RlLCBlc2NhcGUsIHByZWRpY2F0ZSB9IGZyb20gJy4vbGliL21pc2MuanMnOwppbXBvcnQgY2hpbGRfcHJvY2VzcyBmcm9tICdjaGlsZF9wcm9jZXNzJzsKCmxldCBianNvbjsKCmltcG9ydCgnYmpzb24nKSAudGhlbihtID0+IChianNvbiA9IG0pKSAuY2F0Y2goKCkgPT4ge30pOwoKbGV0IG1tYXA7CgppbXBvcnQoJ21tYXAnKSAudGhlbihtID0+IChtbWFwID0gbSkpIC5jYXRjaCgoKSA9PiB7fSk7CgpsZXQgeG1sOwoKaW1wb3J0KCd4bWwnKSAudGhlbihtID0+ICh4bWwgPSBtKSkgLmNhdGNoKCgpID0+IHt9KTsKCmV4cG9ydCBmdW5jdGlvbiBJZkRlYnVnKHRva2VuKSB7CiAgY29uc3QgeyBERUJVRyA9ICcnIH0gPSBnbG9iYWxUaGlzLnByb2Nlc3MgPyBnbG9iYWxUaGlzLnByb2Nlc3MuZW52IDoge307IC8vc3RkLmdldGVudmlyb24oKTsKCiAgY29uc3QgdG9rTGlzdCA9IERFQlVHLnNwbGl0KC9bXkEtWmEtejAtOV9dKy9nKTsKCiAgcmV0dXJuIHRva0xpc3QuaW5kZXhPZih0b2tlbikgIT0gLTE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBMb2dJZkRlYnVnKHRva2VuLCBsb2dnZXJGbikgewogIGlmKCFJZkRlYnVnKHRva2VuKSkgcmV0dXJuICgpID0+IHt9OwoKICByZXR1cm4gbG9nZ2VyRm47Cn0KCmNvbnN0IGRlYnVnID0gTG9nSWZEZWJ1ZygnaW8taGVscGVycycsICguLi5hcmdzKSA9PiBjb25zb2xlLmxvZyguLi5hcmdzKSk7CgpleHBvcnQgZnVuY3Rpb24gUmVhZEZkKGZkLCBiaW5hcnkpIHsKICBsZXQgYWIgPSBuZXcgQXJyYXlCdWZmZXIoMTAyNCk7CiAgbGV0IG91dCA9ICcnOwogIGZvcig7OykgewogICAgbGV0IHJldCA9IGZzLnJlYWRTeW5jKGZkLCBhYiwgMCwgMTAyNCk7CgogICAgaWYocmV0IDw9IDApIGJyZWFrOwoKICAgIG91dCArPSB0b1N0cmluZyhhYi5zbGljZSgwLCByZXQpKTsKCiAgICBkZWJ1ZyhgUmVhZCAjJHtmZH06ICR7cmV0fSBieXRlc2ApOwogIH0KICByZXR1cm4gb3V0Owp9CgpleHBvcnQgZnVuY3Rpb24gUmVhZEZpbGUobmFtZSwgYmluYXJ5KSB7CiAgbGV0IHJldCA9IGZzLnJlYWRGaWxlU3luYyhuYW1lLCBiaW5hcnkgPyBudWxsIDogJ3V0Zi04Jyk7CgogIGRlYnVnKGBSZWFkICR7bmFtZX06ICR7cmV0Py5ieXRlTGVuZ3RofSBieXRlc2ApOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBMb2FkSGlzdG9yeShmaWxlbmFtZSkgewogIGxldCBjb250ZW50cyA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0Zi04Jyk7CiAgbGV0IGRhdGE7CgogIGNvbnN0IHBhcnNlID0gKCkgPT4gewogICAgdHJ5IHsKICAgICAgZGF0YSA9IEpTT04ucGFyc2UoY29udGVudHMpOwogICAgfSBjYXRjaChlKSB7fQogICAgaWYoZGF0YSkgcmV0dXJuIGRhdGE7CiAgICB0cnkgewogICAgICBkYXRhID0gY29udGVudHMuc3BsaXQoL1xuL2cpOwogICAgfSBjYXRjaChlKSB7fQogICAgaWYoZGF0YSkgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIChwYXJzZSgpID8/IFtdKS5maWx0ZXIoZW50cnkgPT4gKGVudHJ5ICsgJycpLnRyaW0oKSAhPSAnJyk7CiAgLy8ubWFwKGVudHJ5ID0+IGVudHJ5LnJlcGxhY2UoL1xcbi9nLCAnXG4nKSkKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRKU09OKGZpbGVuYW1lKSB7CiAgbGV0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGYtOCcpOwoKICBpZihkYXRhKSBkZWJ1ZyhgUmVhZEpTT046ICR7ZGF0YS5sZW5ndGh9IGJ5dGVzIHJlYWQgZnJvbSAnJHtmaWxlbmFtZX0nYCk7CiAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRYTUwoZmlsZW5hbWUsIC4uLmFyZ3MpIHsKICBsZXQgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgbnVsbCk7CgogIGlmKGRhdGEpIGRlYnVnKGBSZWFkWE1MOiAke2RhdGEubGVuZ3RofSBieXRlcyByZWFkIGZyb20gJyR7ZmlsZW5hbWV9J2ApOwogIHJldHVybiBkYXRhID8geG1sLnJlYWQoZGF0YSwgZmlsZW5hbWUsIC4uLmFyZ3MpIDogbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIE1hcEZpbGUoZmlsZW5hbWUpIHsKICBsZXQgZmQgPSBvcy5vcGVuKGZpbGVuYW1lLCBvcy5PX1JET05MWSk7CiAgbGV0IHsgc2l6ZSB9ID0gb3Muc3RhdChmaWxlbmFtZSlbMF07CiAgZGVidWcoYE1hcEZpbGVgLCB7IGZpbGVuYW1lLCBmZCwgc2l6ZSB9KTsKICBsZXQgZGF0YSA9IG1tYXAubW1hcCgwLCBzaXplICsgMTAsIG1tYXAuUFJPVF9SRUFELCBtbWFwLk1BUF9QUklWQVRFLCBmZCwgMCk7CiAgb3MuY2xvc2UoZmQpOwogIHJldHVybiBkYXRhOwp9CgpleHBvcnQgZnVuY3Rpb24gV3JpdGVGaWxlKG5hbWUsIGRhdGEsIG9wdHMgPSB7fSkgewogIGNvbnN0IHsgbW9kZSA9IDBvNjQ0LCB2ZXJib3NlID0gdHJ1ZSB9ID0gb3B0czsKICBpZih0eXBlcy5pc0FycmF5QnVmZmVyKGRhdGEpKQogICAgZGF0YT1bZGF0YV07CgogIGlmKHR5cGVvZiBkYXRhID09ICdvYmplY3QnICYmIGRhdGEgIT09IG51bGwgJiYgU3ltYm9sLml0ZXJhdG9yIGluIGRhdGEpIHsKICAgIGxldCBmZCA9IGZzLm9wZW5TeW5jKG5hbWUsIG9zLk9fV1JPTkxZIHwgb3MuT19UUlVOQyB8IG9zLk9fQ1JFQVQsIG1vZGUpOwogICAgbGV0IHIgPSAwOwogICAgZm9yKGxldCBpdGVtIG9mIGRhdGEpIHsKICAgICAgciArPSBmcy53cml0ZVN5bmMoZmQsIHRvQXJyYXlCdWZmZXIoaXRlbSArICcnKSk7CiAgICB9CiAgICBmcy5jbG9zZVN5bmMoZmQpOwogICAgbGV0IHN0YXQgPSBmcy5zdGF0U3luYyhuYW1lKTsKICAgIHJldHVybiBzdGF0Py5zaXplOwogIH0KICBpZihmcy5leGlzdHNTeW5jKG5hbWUpKSBmcy51bmxpbmtTeW5jKG5hbWUpOwoKICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSBkYXRhID0gZGF0YS5qb2luKCdcbicpOwoKICBpZih0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJyAmJiAhZGF0YS5lbmRzV2l0aCgnXG4nKSkgZGF0YSArPSAnXG4nOwogIGxldCByZXQgPSBmcy53cml0ZUZpbGVTeW5jKG5hbWUsIGRhdGEpOwoKICBpZih2ZXJib3NlKSBkZWJ1ZyhgV3JvdGUgJHtuYW1lfTogJHtyZXR9IGJ5dGVzYCk7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIFdyaXRlSlNPTihuYW1lLCBkYXRhLCAuLi5hcmdzKSB7CiAgY29uc3QgW2NvbXBhY3RdID0gYXJnczsKICBpZih0eXBlb2YgY29tcGFjdCA9PSAnYm9vbGVhbicpIGFyZ3MgPSBjb21wYWN0ID8gW10gOiBbbnVsbCwgMl07CgogIHJldHVybiBXcml0ZUZpbGUobmFtZSwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgLi4uYXJncykpOwp9CgpleHBvcnQgZnVuY3Rpb24gV3JpdGVYTUwobmFtZSwgZGF0YSwgLi4uYXJncykgewogIHJldHVybiBXcml0ZUZpbGUobmFtZSwgeG1sLndyaXRlKGRhdGEsIC4uLmFyZ3MpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFJlYWRCSlNPTihmaWxlbmFtZSkgewogIGxldCBmZCA9IG9zLm9wZW4oZmlsZW5hbWUsIG9zLk9fUkRPTkxZKTsKICBsZXQgeyBzaXplIH0gPSBvcy5zdGF0KGZpbGVuYW1lKVswXTsKICBkZWJ1ZyhgUmVhZEJKU09OYCwgeyBmaWxlbmFtZSwgZmQsIHNpemUgfSk7CiAgbGV0IGRhdGEgPSBtbWFwLm1tYXAoMCwgc2l6ZSArIDEwLCBtbWFwLlBST1RfUkVBRCwgbW1hcC5NQVBfUFJJVkFURSwgZmQsIDApOwogIGRlYnVnKGBSZWFkQkpTT05gLCB7IGRhdGEgfSk7CiAgbGV0IHJldCA9IGJqc29uLnJlYWQoZGF0YSwgMCwgc2l6ZSk7CgogIG1tYXAubXVubWFwKGRhdGEpOwogIG9zLmNsb3NlKGZkKTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gV3JpdGVCSlNPTihuYW1lLCBkYXRhKSB7CiAgbGV0IGJ1ZiA9IGJqc29uLndyaXRlKGRhdGEpOwogIGxldCBzaXplID0gYnVmLmJ5dGVMZW5ndGg7CiAgbGV0IGZkID0gb3Mub3BlbihuYW1lLCBvcy5PX1dST05MWSB8IG9zLk9fQ1JFQVQgfCBvcy5PX1RSVU5DKTsKCiAgbGV0IHJldCA9IG9zLndyaXRlKGZkLCBidWYsIDAsIHNpemUpOwogIGRlYnVnKCdXcml0ZUJKU09OJywgeyBuYW1lLCBmZCwgc2l6ZSwgcmV0IH0pOwogIG9zLmNsb3NlKGZkKTsKCiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uKiBEaXJJdGVyYXRvciguLi5hcmdzKSB7CiAgbGV0IHByZWQgPSB0eXBlb2YgYXJnc1swXSAhPSAnc3RyaW5nJyA/IHByZWRpY2F0ZShhcmdzLnNoaWZ0KCkpIDogKCkgPT4gdHJ1ZTsKICBmb3IobGV0IGRpciBvZiBhcmdzKSB7CiAgICBkaXIgPSBkaXIucmVwbGFjZSgvfi9nLCBzdGQuZ2V0ZW52KCdIT01FJykpOwogICAgbGV0IGVudHJpZXMgPSBvcy5yZWFkZGlyKGRpcilbMF0gPz8gW107CiAgICBmb3IobGV0IGVudHJ5IG9mIGVudHJpZXMuc29ydCgpKSB7CiAgICAgIGxldCBmaWxlID0gcGF0aC5qb2luKGRpciwgZW50cnkpOwogICAgICBsZXQgbHN0ID0gb3MubHN0YXQoZmlsZSlbMF07CiAgICAgIGxldCBzdCA9IG9zLnN0YXQoZmlsZSlbMF07CiAgICAgIGxldCBpc19kaXIgPSAoc3Q/Lm1vZGUgJiBvcy5TX0lGTVQpID09IG9zLlNfSUZESVI7CiAgICAgIGxldCBpc19zeW1saW5rID0gKGxzdD8ubW9kZSAmIG9zLlNfSUZNVCkgPT0gb3MuU19JRkxOSzsKCiAgICAgIGlmKGlzX2RpcikgZmlsZSArPSAnLyc7CiAgICAgIGlmKCFwcmVkKGVudHJ5LCBmaWxlLCBpc19kaXIsIGlzX3N5bWxpbmspKSBjb250aW51ZTsKICAgICAgeWllbGQgZmlsZTsKICAgIH0KICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiogUmVjdXJzaXZlRGlySXRlcmF0b3IoZGlyLCBwcmVkID0gKGVudHJ5LCBmaWxlLCBkaXIsIGRlcHRoKSA9PiB0cnVlLCBkZXB0aCA9IDApIHsKICBsZXQgcmU7CiAgaWYodHlwZW9mIHByZWQgIT0gJ2Z1bmN0aW9uJykgewogICAgaWYoIXByZWQpIHByZWQgPSAnLionOwogICAgaWYodHlwZW9mIHByZWQgPT0gJ3N0cmluZycpIHByZWQgPSBuZXcgUmVnRXhwKHByZWQsICdnaScpOwogICAgcmUgPSBwcmVkOwogICAgcHJlZCA9IChlbnRyeSwgZmlsZSwgZGlyLCBkZXB0aCkgPT4gcmUudGVzdChlbnRyeSkgfHwgcmUudGVzdChmaWxlKTsKICB9CiAgaWYoIWRpci5lbmRzV2l0aCgnLycpKSBkaXIgKz0gJy8nOwogIGRpciA9IGRpci5yZXBsYWNlKC9+L2csIHN0ZC5nZXRlbnYoJ0hPTUUnKSk7CiAgZm9yKGxldCBmaWxlIG9mIGZzLnJlYWRkaXJTeW5jKGRpcikpIHsKICAgIGlmKFsnLicsICcuLiddLmluZGV4T2YoZmlsZSkgIT0gLTEpIGNvbnRpbnVlOwogICAgbGV0IGVudHJ5ID0gYCR7ZGlyfSR7ZmlsZX1gOwogICAgbGV0IGlzRGlyID0gZmFsc2U7CiAgICBsZXQgc3QgPSBmcy5zdGF0U3luYyhlbnRyeSk7CiAgICBpc0RpciA9IHN0ICYmIHN0LmlzRGlyZWN0b3J5KCk7CiAgICBpZihpc0RpcikgZW50cnkgKz0gJy8nOwogICAgbGV0IHNob3cgPSBwcmVkKGVudHJ5LCBmaWxlLCBkaXIsIGRlcHRoKTsKICAgIGlmKHNob3cpIHsKICAgICAgeWllbGQgZW50cnk7CiAgICB9CiAgICBpZihpc0RpcikgeWllbGQqIFJlY3Vyc2l2ZURpckl0ZXJhdG9yKGVudHJ5LCBwcmVkLCBkZXB0aCArIDEpOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uKiBSZWFkRGlyUmVjdXJzaXZlKGRpciwgbWF4RGVwdGggPSBJbmZpbml0eSkgewogIGRpciA9IGRpci5yZXBsYWNlKC9+L2csIGdsb2JhbFRoaXMucHJvY2Vzcy5lbnZbJ0hPTUUnXSA/PyBzdGQuZ2V0ZW52KCdIT01FJykpOwogIGZvcihsZXQgZmlsZSBvZiBmcy5yZWFkZGlyU3luYyhkaXIpKSB7CiAgICBpZihbJy4nLCAnLi4nXS5pbmRleE9mKGZpbGUpICE9IC0xKSBjb250aW51ZTsKICAgIGxldCBlbnRyeSA9IGAke2Rpcn0vJHtmaWxlfWA7CiAgICBsZXQgaXNEaXIgPSBmYWxzZTsKICAgIGxldCBzdCA9IGZzLnN0YXRTeW5jKGVudHJ5KTsKICAgIGlzRGlyID0gc3QgJiYgc3QuaXNEaXJlY3RvcnkoKTsKICAgIHlpZWxkIGlzRGlyID8gZW50cnkgKyAnLycgOiBlbnRyeTsKICAgIGlmKG1heERlcHRoID4gMCAmJiBpc0RpcikgeWllbGQqIFJlYWREaXJSZWN1cnNpdmUoZW50cnksIG1heERlcHRoIC0gMSk7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24qIEZpbHRlcihnZW4sIHJlZ0V4ID0gLy4qLykgewogIGZvcihsZXQgaXRlbSBvZiBnZW4pIGlmKHJlZ0V4LnRlc3QoaXRlbSkpIHlpZWxkIGl0ZW07Cn0KCmV4cG9ydCBmdW5jdGlvbiBGaWx0ZXJJbWFnZXMoZ2VuKSB7CiAgcmV0dXJuIEZpbHRlcihnZW4sIC9cLihwbmd8anBlP2cpJC9pKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFNvcnRGaWxlcyhhcnIsIGZpZWxkID0gJ2N0aW1lJykgewogIHJldHVybiBbLi4uYXJyXS5zb3J0KChhLCBiKSA9PiBhLnN0YXRbZmllbGRdIC0gYi5zdGF0W2ZpZWxkXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiogU3RhdEZpbGVzKGdlbikgewogIGZvcihsZXQgZmlsZSBvZiBnZW4pIHsKICAgIGxldCBzdGF0ID0gZnMuc3RhdFN5bmMoZmlsZSk7CiAgICBsZXQgb2JqID0gZGVmaW5lKAogICAgICB7IGZpbGUsIHN0YXQgfSwKICAgICAgewogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZTsKICAgICAgICB9CiAgICAgIH0KICAgICk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCAnc2l6ZScsIHsKICAgICAgZ2V0OiBtZW1vaXplKCgpID0+IHsKICAgICAgICBsZXQgeyBmaWxlbmFtZSwgLi4uaW5mbyB9ID0gSW1hZ2VJbmZvKG9iai5maWxlKTsKICAgICAgICByZXR1cm4gZGVmaW5lKGluZm8sIHsKICAgICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aCArICd4JyArIHRoaXMuaGVpZ2h0OwogICAgICAgICAgfSwKICAgICAgICAgIGdldCBsYW5kc2NhcGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLndpZHRoID4gdGhpcy5oZWlnaHQ7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0IHBvcnRyYWl0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQgPiB0aGlzLndpZHRoOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KQogICAgfSk7CiAgICB5aWVsZCBvYmo7CiAgfQp9CgovKmV4cG9ydCBmdW5jdGlvbiBSZWFkRmQoZmQsIGJ1ZmZlclNpemUpIHsKICBmdW5jdGlvbiogRmRSZWFkKCkgewogICAgbGV0IHJldCwKICAgICAgYnVmID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlclNpemUpOwogICAgZG8gewogICAgICBpZigocmV0ID0gZnMucmVhZFN5bmMoZmQsIGJ1ZiwgMCwgYnVmLmJ5dGVMZW5ndGgpKSA+IDApIHlpZWxkIHJldCA9PSBidWYuYnl0ZUxlbmd0aCA/IGJ1ZiA6IGJ1Zi5zbGljZSgwLCByZXQpOwogICAgfSB3aGlsZShyZXQgPiAwKTsKICB9CiAgcmV0dXJuIFsuLi5GZFJlYWQoKV0ucmVkdWNlKChhY2MsIGJ1ZikgPT4gKGFjYyArPSB0b1N0cmluZyhidWYpKSwgJycpOwp9Ki8KLyoKZXhwb3J0IGZ1bmN0aW9uIEZkUmVhZGVyKGZkLCBidWZmZXJTaXplID0gMTAyNCkgewogIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyU2l6ZSk7CiAgcmV0dXJuIG5ldyBSZXBlYXRlcihhc3luYyAocHVzaCwgc3RvcCkgPT4gewogICAgbGV0IHJldDsKICAgIGRvIHsKICAgICAgbGV0IHIgPSBhd2FpdCB3YWl0UmVhZChmZCk7CiAgICAgIHJldCA9IHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IGZzLnJlYWRTeW5jKGZkLCBidWYpIDogZmQucmVhZChidWYpOwogICAgICBpZihyZXQgPiAwKSB7CiAgICAgICAgbGV0IGRhdGEgPSBidWYuc2xpY2UoMCwgcmV0KTsKICAgICAgICBhd2FpdCBwdXNoKGZzLmJ1ZmZlclRvU3RyaW5nKGRhdGEpKTsKICAgICAgfQogICAgfSB3aGlsZShyZXQgPT0gYnVmZmVyU2l6ZSk7CiAgICBzdG9wKCk7CiAgICB0eXBlb2YgZmQgPT0gJ251bWJlcicgPyBmcy5jbG9zZVN5bmMoZmQpIDogZmQuZGVzdHJveSgpOwogIH0pOwp9Ki8KZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBGZFJlYWRlcihmZCwgYnVmZmVyU2l6ZSA9IDEwMjQpIHsKICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlclNpemUpOwogIGxldCByZXQ7CiAgZG8gewogICAgbGV0IHIgPSBhd2FpdCB3YWl0UmVhZChmZCk7CiAgICBjb25zb2xlLmxvZygncicsIHIpOwogICAgcmV0ID0gdHlwZW9mIGZkID09ICdudW1iZXInID8gYXdhaXQgZnMucmVhZChmZCwgYnVmKSA6IGF3YWl0IGZkLnJlYWQoYnVmKTsKICAgIGlmKHJldCA+IDApIHsKICAgICAgbGV0IGRhdGEgPSBidWYuc2xpY2UoMCwgcmV0KTsKICAgICAgeWllbGQgZnMuYnVmZmVyVG9TdHJpbmcoZGF0YSk7CiAgICB9CiAgfSB3aGlsZShyZXQgPT0gYnVmZmVyU2l6ZSk7CiAgdHlwZW9mIGZkID09ICdudW1iZXInID8gYXdhaXQgZnMuY2xvc2UoZmQpIDogZmQuZGVzdHJveSgpOwogIHJldHVybjsKfQoKZXhwb3J0IGZ1bmN0aW9uIENvcHlUb0NsaXBib2FyZCh0ZXh0KSB7CiAgY29uc3QgeyBlbnYgfSA9IHByb2Nlc3M7CiAgbGV0IGNoaWxkID0gY2hpbGRfcHJvY2Vzcy5zcGF3bigneGNsaXAnLCBbJy1pbicsICctdmVyYm9zZSddLCB7IGVudiwgc3RkaW86IFsncGlwZScsICdpbmhlcml0JywgJ2luaGVyaXQnXSB9KTsKICBsZXQgW3BpcGVdID0gY2hpbGQuc3RkaW87CgogIGxldCB3cml0dGVuID0gZnMud3JpdGVTeW5jKHBpcGUsIHRleHQsIDAsIHRleHQubGVuZ3RoKTsKICBmcy5jbG9zZVN5bmMocGlwZSk7CiAgbGV0IHN0YXR1cyA9IGNoaWxkLndhaXQoKTsKICBjb25zb2xlLmxvZygnY2hpbGQnLCBjaGlsZCk7CiAgcmV0dXJuIHsgd3JpdHRlbiwgc3RhdHVzIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBSZWFkQ2FsbGJhY2soZmQsIGZuID0gZGF0YSA9PiB7fSkgewogIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMTAyNCk7CiAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsICgpID0+IHsKICAgIGxldCByID0gZnMucmVhZFN5bmMoZmQsIGJ1ZiwgMCwgMTAyNCk7CiAgICBpZihyIDw9IDApIHsKICAgICAgZnMuY2xvc2VTeW5jKGZkKTsKICAgICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsIG51bGwpOwogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgZGF0YSA9IGJ1Zi5zbGljZSgwLCByKTsKICAgIGRhdGEgPSB0b1N0cmluZyhkYXRhKTsKICAgIGZuKGRhdGEpOwogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gTG9nQ2FsbChmbiwgdGhpc09iaikgewogIGxldCB7IG5hbWUgfSA9IGZuOwogIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICBsZXQgcmVzdWx0OwogICAgcmVzdWx0ID0gZm4uYXBwbHkodGhpc09iaiA/PyB0aGlzLCBhcmdzKTsKICAgIGNvbnNvbGUubG9nKCdGdW5jdGlvbiAnICsgbmFtZSArICcoJywgLi4uYXJncy5tYXAoYXJnID0+IGluc3BlY3QoYXJnLCB7IGNvbG9yczogZmFsc2UsIG1heFN0cmluZ0xlbmd0aDogMjAgfSkpLCAnKSA9JywgcmVzdWx0KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIFNwYXduKGZpbGUsIGFyZ3MsIG9wdGlvbnMgPSB7fSkgewogIGxldCB7IGJsb2NrID0gdHJ1ZSwgdXNlUGF0aCA9IHRydWUsIGN3ZCwgc3RkaW8gPSBbJ2luaGVyaXQnLCAnaW5oZXJpdCcsICdpbmhlcml0J10sIGVudiwgdWlkLCBnaWQgfSA9IG9wdGlvbnM7CiAgbGV0IHBhcmVudCA9IFsuLi5zdGRpb107CgogIGZvcihsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgIGlmKHN0ZGlvW2ldID09ICdwaXBlJykgewogICAgICBsZXQgW3IsIHddID0gb3MucGlwZSgpOwogICAgICBzdGRpb1tpXSA9IGkgPT0gMCA/IHIgOiB3OwogICAgICBwYXJlbnRbaV0gPSBpID09IDAgPyB3IDogcjsKICAgIH0gZWxzZSBpZihzdGRpb1tpXSA9PSAnaW5oZXJpdCcpIHsKICAgICAgc3RkaW9baV0gPSBpOwogICAgfQogIH0KCiAgY29uc3QgW3N0ZGluLCBzdGRvdXQsIHN0ZGVycl0gPSBzdGRpbzsKICBsZXQgcGlkID0gb3MuZXhlYyhbZmlsZSwgLi4uYXJnc10sIHsgYmxvY2ssIHVzZVBhdGgsIGN3ZCwgc3RkaW4sIHN0ZG91dCwgc3RkZXJyLCBlbnYsIHVpZCwgZ2lkIH0pOwogIGZvcihsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgIGlmKHR5cGVvZiBzdGRpb1tpXSA9PSAnbnVtYmVyJyAmJiBzdGRpb1tpXSAhPSBpKSBvcy5jbG9zZShzdGRpb1tpXSk7CiAgfQoKICByZXR1cm4gewogICAgcGlkLAogICAgc3RkaW86IHBhcmVudCwKICAgIHdhaXQoKSB7CiAgICAgIGxldCBbcmV0LCBzdGF0dXNdID0gb3Mud2FpdHBpZCh0aGlzLnBpZCwgb3MuV05PSEFORyk7CiAgICAgIHJldHVybiByZXQ7CiAgICB9CiAgfTsKfQoKLy8gJ2h0dHBzOi8vd3d3LmRpc2NvZ3MuY29tL3NlbGwvb3JkZXIvODM2OTAyMi0zNjQnCgpleHBvcnQgZnVuY3Rpb24gRmV0Y2hVUkwodXJsLCBvcHRpb25zID0ge30pIHsKICBsZXQgeyBoZWFkZXJzLCBwcm94eSwgY29va2llcyA9ICdjb29raWVzLnR4dCcsIHJhbmdlLCBib2R5LCB2ZXJzaW9uID0gJzEuMScsIHRsc3YsICd1c2VyLWFnZW50JzogdXNlckFnZW50IH0gPSBvcHRpb25zOwoKICBsZXQgYXJncyA9IE9iamVjdC5lbnRyaWVzKGhlYWRlcnMgPz8ge30pCiAgICAucmVkdWNlKChhY2MsIFtrLCB2XSkgPT4gYWNjLmNvbmNhdChbJy1IJywgYCR7a306ICR7dn1gXSksIFtdKQogICAgLmNvbmNhdChBcnJheS5pc0FycmF5KHVybCkgPyB1cmwgOiBbdXJsXSk7CgogIGFyZ3MucHVzaCgnLS1jb21wcmVzc2VkJyk7CiAgYXJncy51bnNoaWZ0KCctTCcsICctaycpOwoKICBpZihib2R5KSBhcmdzLnVuc2hpZnQoJy1kJywgYm9keSk7CiAgaWYodmVyc2lvbikgYXJncy51bnNoaWZ0KCctLWh0dHAnICsgdmVyc2lvbik7CiAgaWYodGxzdikgYXJncy51bnNoaWZ0KCctLXRsc3YnICsgdGxzdik7CiAgaWYodXNlckFnZW50KSBhcmdzLnVuc2hpZnQoJy1BJywgdXNlckFnZW50KTsKICBpZihyYW5nZSkgYXJncy51bnNoaWZ0KCctcicsIHJhbmdlKTsKICBpZihjb29raWVzKSBhcmdzLnVuc2hpZnQoJy1jJywgY29va2llcyk7CiAgaWYocHJveHkpIGFyZ3MudW5zaGlmdCgnLXgnLCBwcm94eSk7CgogIC8vYXJncy51bnNoaWZ0KCctdicpOwogIC8vYXJncy51bnNoaWZ0KCctc1MnKTsKICBhcmdzLnVuc2hpZnQoJy0tdGNwLWZhc3RvcGVuJywgJy0tdGNwLW5vZGVsYXknKTsKCiAgY29uc29sZS5sb2coJ0ZldGNoVVJMJywgY29uc29sZS5jb25maWcoeyBtYXhBcnJheUxlbmd0aDogSW5maW5pdHksIGNvbXBhY3Q6IGZhbHNlIH0pLCB7IGFyZ3MgfSk7CgogIGxldCBjaGlsZCA9IC8qIGNoaWxkX3Byb2Nlc3Muc3Bhd24qLyBTcGF3bignY3VybCcsIGFyZ3MsIHsgYmxvY2s6IGZhbHNlLCBzdGRpbzogWydpbmhlcml0JywgJ3BpcGUnLCAncGlwZSddIH0pOwoKICBsZXQgWywgb3V0LCBlcnJdID0gY2hpbGQuc3RkaW87CgogIGNvbnNvbGUubG9nKCdjaGlsZCcsIHsgb3V0LCBlcnIgfSk7CgogIGxldCBvdXRwdXQgPSAnJywKICAgIGVycm9ycyA9ICcnOwoKICBSZWFkQ2FsbGJhY2sob3V0LCBkYXRhID0+IHsKICAgIG91dHB1dCArPSBkYXRhOwogICAgLy8gY29uc29sZS5sb2coJ2RhdGEnLGRhdGEubGVuZ3RoKTsKICB9KTsKICBSZWFkQ2FsbGJhY2soZXJyLCBkYXRhID0+IHsKICAgIGVycm9ycyArPSBkYXRhOwogICAgc3RkLmVyci5wdXRzKGRhdGEpOwogICAgc3RkLmVyci5mbHVzaCgpOwogIH0pOwogIGxldCBmbGFncyA9IGNoaWxkX3Byb2Nlc3MuV05PSEFORzsKICBjb25zb2xlLmxvZygnZmxhZ3MnLCBmbGFncyk7CiAgY2hpbGQud2FpdChmbGFncyk7CgogIGxldCBzdGF0dXM7CgogIHN0YXR1cyA9IGNoaWxkLndhaXQoKTsKCiAgY29uc29sZS5sb2coJ0ZldGNoVVJMJywgeyAvKiBvdXRwdXQ6IGVzY2FwZShvdXRwdXQpLCBlcnJvcnMsKi8gc3RhdHVzIH0pOwoKICByZXR1cm4gb3V0cHV0Owp9CgAAAAAAAAAA3S0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAkAAAAAAACSDAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "package.json",
			"settings":
			{
				"buffer_size": 5876,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"cut",
					null,
					"AQAAAMoDAAAAAAAAygMAAAAAAAA9AAAAICAgICJxdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi9leHRlbmRBcnJheS5qcyI6ICJleHRlbmRBcnJheSIsCg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAygMAAAAAAAAHBAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					2,
					"paste",
					null,
					"AgAAAMoDAAAAAAAABwQAAAAAAAAAAAAABwQAAAAAAABEBAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAygMAAAAAAADKAwAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "dm"
					},
					"AwAAAOcDAAAAAAAA6AMAAAAAAAAAAAAA6AMAAAAAAADoAwAAAAAAAAsAAABleHRlbmRBcnJheegDAAAAAAAA6QMAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA5wMAAAAAAADyAwAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"left_delete",
					null,
					"AQAAAOgDAAAAAAAA6AMAAAAAAAABAAAAbQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6QMAAAAAAADpAwAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "om"
					},
					"AgAAAOgDAAAAAAAA6QMAAAAAAAAAAAAA6QMAAAAAAADqAwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6AMAAAAAAADoAwAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"paste",
					null,
					"AgAAAPEDAAAAAAAA9AMAAAAAAAAAAAAA9AMAAAAAAAD0AwAAAAAAAAsAAABleHRlbmRBcnJheQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA8QMAAAAAAAD8AwAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABOFwAAewogICJ0eXBlIjogIm1vZHVsZSIsCiAgIl9tb2R1bGVBbGlhc2VzIjogewogICAgInByZWFjdCI6ICJsaWIvZG9tL3ByZWFjdENvbXBvbmVudC5qcyIsCiAgICAicHJvcC10eXBlcyI6ICJsaWIvcHJvcC10eXBlcy5qcyIsCiAgICAicmVhY3QiOiAibGliL2RvbS9wcmVhY3RDb21wb25lbnQuanMiLAogICAgInJlYWN0LWRvbSI6ICJub2RlX21vZHVsZXMvcHJlYWN0L2NvbXBhdCIsCiAgICAicmVhY3Qtc3NyLXByZXBhc3MiOiAibm9kZV9tb2R1bGVzL3ByZWFjdC1zc3ItcHJlcGFzcyIsCiAgICAibGliL2VjbWFzY3JpcHQvcGFyc2VyLmpzIjogImxpYi9lY21hc2NyaXB0L3BhcnNlcjIuanMiLAogICAgImxpYi9lY21hc2NyaXB0L2xleGVyLmpzIjogInF1aWNranMvcWpzLW1vZHVsZXMvbGliL2xleGVyL2VjbWFzY3JpcHQuanMiLAogICAgImN2VmlkZW8uanMiOiAicWpzLW9wZW5jdi9qcy9jdlZpZGVvLmpzIiwKICAgICJjdlV0aWxzLmpzIjogInFqcy1vcGVuY3YvanMvY3ZVdGlscy5qcyIsCiAgICAiY3ZQaXBlbGluZS5qcyI6ICJxanMtb3BlbmN2L2pzL2N2UGlwZWxpbmUuanMiLAogICAgImN2SGlnaEdVSS5qcyI6ICJxanMtb3BlbmN2L2pzL2N2SGlnaEdVSS5qcyIsCiAgICAibGliL29iamVjdEluc3BlY3QuanMiOiAiaW5zcGVjdCIsCiAgICAibGliL3BvaW50ZXIuanMiOiAicG9pbnRlciIsCiAgICAibGliL2RlZXAuanMiOiAiZGVlcCIsCiAgICAibGliL3BhdGguanMiOiAicGF0aCIsCiAgICAibGliL3htbC5qcyI6ICJ4bWwiLAogICAgImxpYi9sZXhlci5qcyI6ICJsZXhlciIsCiAgICAibGliL2ZpbGVzeXN0ZW0uanMiOiAiZnMiLAogICAgImZzLmpzIjogImxpYi9maWxlc3lzdGVtLmpzIiwKICAgICJxdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi9mcy5qcyI6ICJmcyIsCiAgICAiZG9tIjogInF1aWNranMvcWpzLW1vZHVsZXMvbGliL2RvbS5qcyIsCiAgICAibGliL21pc2MuanMiOiAidXRpbCIsCiAgICAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvZG9tLmpzIjogImRvbSIsCiAgICAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvZXh0ZW5kQXJyYXkuanMiOiAiZXh0ZW5kQXJyYXkiLAogICAgInF1aWNranMvcWpzLW1vZHVsZXMvbGliL2V4dGVuZEdlbmVyYXRvci5qcyI6ICJleHRlbmRHZW5lcmF0b3IiLAogICAgImxpYi9jaGlsZFByb2Nlc3MuanMiOiAiY2hpbGRfcHJvY2VzcyIsCiAgICAiLi9saWIvY2hpbGRQcm9jZXNzLmpzIjogImNoaWxkX3Byb2Nlc3MiLAogICAgImxpYi9zdGFjay5qcyI6ICJxdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi9zdGFjay5qcyIsCiAgICAieHJlcGwuanMiOiAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvcmVwbC5qcyIsCiAgICAidGVybWluYWwuanMiOiAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvdGVybWluYWwuanMiLAogICAgIngvcXVpY2tqcy9xanMtZmZpL2V4YW1wbGVzL3NvY2tldC5qcyI6ICJzb2NrZXRzIiwKICAgICJxdWlja2pzL3Fqcy1mZmkvbGliL3NvY2tldC5qcyI6ICJzb2NrZXRzIiwKICAgICJsaWIvZXZlbnRzLmpzIjogImV2ZW50cyIsCiAgICAibGliL3htbC94cGF0aC5qcyI6ICJxdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi94cGF0aC5qcyIsCiAgICAibGliL3ByZWFjdC5qcyI6ICJsaWIvcHJlYWN0LmVzbS5qcyIKICB9LAogICJhdXRob3IiOiAiUm9tYW4gU2VubiA8cm9tYW4ubC5zZW5uQGdtYWlsLmNvbT4iLAogICJsaWNlbnNlIjogIk1JVCIsCiAgInBhcnNlck9wdGlvbnMiOiB7CiAgICAic291cmNlVHlwZSI6ICJtb2R1bGUiCiAgfSwKICAiZGVwZW5kZW5jaWVzIjogewogICAgIkBiYWJlbC9ydW50aW1lIjogIl43LjE3LjkiLAogICAgIkBiYWJlbC9ydW50aW1lLWNvcmVqczMiOiAiXjcuMTcuOSIsCiAgICAiQHMtdWkvbGludCI6ICJeMy40My4wIiwKICAgICJiYWJlbC1sb2FkZXIiOiAiXjguMi41IiwKICAgICJiYWJlbC1wcmVzZXQtZW52IjogIl4xLjcuMCIsCiAgICAiYm9keS1wYXJzZXIiOiAiXjEuMTkuMCIsCiAgICAiYnBnLWRlY29kZXIiOiAiXjAuMC43IiwKICAgICJjb3JlLWpzIjogIl4zLjIyLjIiLAogICAgImV4cHJlc3MiOiAiXjQuMTcuMSIsCiAgICAiZXhwcmVzcy13cyI6ICJeNC4wLjAiLAogICAgImh0bSI6ICJeMy4xLjAiLAogICAgImlzLWJwZyI6ICJeMC4xLjAiLAogICAgImlzb21vcnBoaWMtZmV0Y2giOiAiXjMuMC4wIiwKICAgICJtb2R1bGUtYWxpYXMiOiAiXjIuMi4yIiwKICAgICJuZXh0IjogIl4xMi4yLjUiLAogICAgIm5vZGUtYnBnIjogIl4xLjAuMCIsCiAgICAib2wiOiAiXjYuMTUuMSIsCiAgICAib2wtbGF5ZXJzd2l0Y2hlciI6ICJodHRwczovL2dpdGh1Yi5jb20vd2Fsa2VybWF0dC9vbC1sYXllcnN3aXRjaGVyIiwKICAgICJvcGVubGF5ZXJzLWV4dCI6ICJeMy4xLjUiLAogICAgInByZWFjdCI6ICJeMTAiLAogICAgInByZWFjdC1jb21wYXQiOiAiXjMiLAogICAgInByZWFjdC1jb250ZXh0IjogIl4xLjEuNCIsCiAgICAicHJlYWN0LXJlbmRlci10by1zdHJpbmciOiAiXjUuMS4xOSIsCiAgICAicHJlYWN0LXNzci1wcmVwYXNzIjogIl4xIiwKICAgICJwcm9taXNpZnktY2hpbGQtcHJvY2VzcyI6ICJeNC4xLjEiLAogICAgInJlYWN0IjogIl4xOC4yLjAiLAogICAgInJlYWN0LWRvbSI6ICJeMTguMi4wIiwKICAgICJyZWFjdC1zb3J0YWJsZS1ob2MiOiAiXjIuMC4wIiwKICAgICJyZWFjdC11cGxvYWQtZ2FsbGVyeSI6ICJeMC40LjEiLAogICAgInJlZ2VuZXJhdG9yLXJ1bnRpbWUiOiAiXjAuMTMuOSIsCiAgICAic2VyaWFscG9ydCI6ICJeOS4wLjEiLAogICAgInVwcGllIjogIl4xLjEuNCIsCiAgICAid3MiOiAiXjcuMy4xIgogIH0sCiAgIm9sZERlcHMiOiB7CiAgICAiQGRlcXVlL2RvdCI6ICJeMS4xLjUiLAogICAgIkBzZXJpYWxwb3J0L2JpbmRpbmdzIjogIl45LjAuMiIsCiAgICAiQHNlcmlhbHBvcnQvc3RyZWFtIjogIl45LjAuMSIsCiAgICAicHJlYWN0LWZsdWlkIjogIl4wLjkuMSIsCiAgICAic29ydC1vcmRlciI6ICJeMS4wLjEiLAogICAgImNvbHVtbmlmeSI6ICJeMS41LjQiLAogICAgImNyb3NzLXNwYXduIjogIl43LjAuMyIsCiAgICAiY29kZWphciI6ICJodHRwczovL2dpdGh1Yi5jb20vYW50b25tZWR2L2NvZGVqYXIiLAogICAgImppc29uLWVzIjogIl4wLjQuMTgiLAogICAgIndhc20tbG9hZGVyIjogIl4xLjMuMCIsCiAgICAiaGlnaGxpZ2h0anMiOiAiXjkuMTYuMiIsCiAgICAiaGlnaGxpZ2h0anMtbGluZS1udW1iZXJzLmpzIjogIl4yLjguMCIsCiAgICAibm9kZS1kZWJ1Z3Byb3RvY29sLWNsaWVudCI6ICJeMC4xLjEiLAogICAgIm5vZGUtZXhjZXB0aW9ucyI6ICJeNC4wLjEiLAogICAgInNjLXJhbmRvbSI6ICJeMS4wLjAiLAogICAgIm9wZW50eXBlIjogIl4wLjEuMiIsCiAgICAiYmFzaC1wYXJzZXIiOiAiXjAuNS4wIiwKICAgICJjLWFzdCI6ICJeMS4wLjAiLAogICAgImNsYXJpZnkiOiAiXjIuMS4wIiwKICAgICJsZWJhYiI6ICJeMy4xLjAiLAogICAgImxleCI6ICJeMS43LjkiLAogICAgInByZWFjdC10cmFuc2l0aW9uLWdyb3VwIjogIl4yLjAuMCIsCiAgICAidXNlcnNjcmlwdC1idWlsZGVyIjogIl4wLjMuMCIsCiAgICAicmVhY3QtcHJpc20tZWRpdG9yIjogImh0dHBzOi8vZ2l0aHViLmNvbS9sdW1pYTIwNDYvcmVhY3QtcHJpc20tZWRpdG9yIiwKICAgICJyZWFjdC1zaW1wbGUtY29kZS1lZGl0b3IiOiAiXjAuMTEuMCIsCiAgICAicHJpc20tcmVhY3QtcmVuZGVyZXIiOiAiXjEuMi4xIiwKICAgICJmZXRjaC13aXRoLXByb3h5IjogIl4zLjAuMSIsCiAgICAiZnJlZS1wcm94eSI6ICJeMC4xLjYiLAogICAgInByb3h5bm92YSI6ICJeMC4xLjAiCiAgfSwKICAiZGVzY3JpcHRpb24iOiAiIiwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgIkBiYWJlbC9jb3JlIjogIl43LjAuMC0wIiwKICAgICJAYmFiZWwvcGx1Z2luLXByb3Bvc2FsLWNsYXNzLXByb3BlcnRpZXMiOiAiXjcuNC40IiwKICAgICJAYmFiZWwvcGx1Z2luLXN5bnRheC1jbGFzcy1wcm9wZXJ0aWVzIjogIl43LjIuMCIsCiAgICAiQGJhYmVsL3BsdWdpbi10cmFuc2Zvcm0tcnVudGltZSI6ICJeNy4xNy4wIiwKICAgICJAYmFiZWwvcG9seWZpbGwiOiAiXjcuNC40IiwKICAgICJAYmFiZWwvcHJlc2V0LWVudiI6ICJeNy40LjUiLAogICAgIkBiYWJlbC9wcmVzZXQtcmVhY3QiOiAiXjcuMC4wIiwKICAgICJhY29ybiI6ICJeOC4xLjEiLAogICAgImFuc2ktY29sb3JzIjogIl40LjEuMSIsCiAgICAiYW5zaS1lc2NhcGVzIjogIl40LjMuMSIsCiAgICAiYXN0cmluZyI6ICJeMS43LjQiLAogICAgImJhYmVsLWVzbGludCI6ICJeMTAuMC4xIiwKICAgICJiYWJlbC1ub2RlIjogIl4wLjAuMS1zZWN1cml0eSIsCiAgICAiYmFiZWwtcGx1Z2luLXRyYW5zZm9ybS1jb21tb25qcyI6ICJeMS4xLjYiLAogICAgImJhYmVsLXByZXNldC1wcmVhY3QiOiAiXjIuMC4wIiwKICAgICJlc2xpbnQiOiAiXjguMTQuMCIsCiAgICAiZnJlZS1wcm94eSI6ICJeMC4yLjAiLAogICAgImh0dHAiOiAiMC4wLjAiLAogICAgInByb3h5LWxpc3RzIjogImh0dHBzOi8vZ2l0aHViLmNvbS9jaGlsbDExNy9wcm94eS1saXN0cyIsCiAgICAicHJveHlub3ZhIjogIl4wLjEuMCIsCiAgICAid2VicGFjayI6ICJeNS43Mi4wIiwKICAgICJ3ZWJwYWNrLWNsaSI6ICJeNC45LjIiLAogICAgIndlYnBhY2stZGV2LXNlcnZlciI6ICJeNC44LjEiCiAgfSwKICAiZW5naW5lcyI6IHsKICAgICJub2RlIjogIj49IDE0IgogIH0sCiAgImVzbGludENvbmZpZyI6IHsKICAgICJleHRlbmRzIjogWwogICAgICAiLi9ub2RlX21vZHVsZXMvQHMtdWkvbGludC9lc2xpbnRyYy5qcyIKICAgIF0KICB9LAogICJodXNreSI6IHsKICAgICJob29rcyI6IHsKICAgICAgInByZS1jb21taXQiOiAibGludC1zdGFnZWQiCiAgICB9CiAgfSwKICAibGludC1zdGFnZWQiOiB7CiAgICAiKi57anMsanN4fSI6IFsKICAgICAgImVzbGludCAuIC0tZXh0IC5qcyAtLWV4dCAuanN4IC0taWdub3JlLXBhdGggLmVzbGludGlnbm9yZSAtLWZpeCIsCiAgICAgICJnaXQgYWRkIgogICAgXQogIH0sCiAgIm1haW4iOiAic2VydmVyLmpzIiwKICAibmFtZSI6ICJwbG90LWN2IiwKICAicHJldHRpZXIiOiAiLi9ub2RlX21vZHVsZXMvQHMtdWkvbGludC8ucHJldHRpZXJyYy5qcyIsCiAgInNjcmlwdHMiOiB7CiAgICAiYnVpbGQiOiAid2VicGFjayAtLWNvbmZpZyB3ZWJwYWNrLmNvbmZpZy5qcyIsCiAgICAiZGVwbG95IjogIm5vdyAtLXRhcmdldCBwcm9kdWN0aW9uIiwKICAgICJsaW50IjogImVzbGludCAuIC0tZXh0IC5qcyAtLWV4dCAuanN4IC0taWdub3JlLXBhdGggLmVzbGludGlnbm9yZSAtLWZpeCIsCiAgICAibm93LWJ1aWxkIjogIm5leHQgYnVpbGQiLAogICAgInNlcnZlciI6ICJlbnYgUE9SVD0zMDAwIG5vZGVtb24gLS1leHBlcmltZW50YWwtbW9kdWxlcyAtdyBzZXJ2ZXIuanMgc2VydmVyLmpzIiwKICAgICJzdGFydCI6ICJuZXh0IHN0YXJ0IgogIH0sCiAgInN0eWxlbGludCI6IHsKICAgICJleHRlbmRzIjogIi4vbm9kZV9tb2R1bGVzL0BzLXVpL2xpbnQvc3R5bGVsaW50LmNvbmZpZy5qcyIKICB9LAogICJ1c2Vyc2NyaXB0IjogewogICAgImRldiI6ICIuL3RtcCIsCiAgICAiZW50cnkiOiAiLi91c2Vyc2NyaXB0LXRlc3QuanMiLAogICAgImZpbGVOYW1lIjogImxpYiIsCiAgICAibWV0YSI6IHsKICAgICAgImdyYW50IjogIm5vbmUiLAogICAgICAiaG9tZXBhZ2UiOiAiaHR0cHM6Ly9vcGVudXNlcmpzLm9yZy9zY3JpcHRzL3ZhNG9rIiwKICAgICAgIm1hdGNoIjogIio6Ly8qLioiLAogICAgICAibmFtZSI6ICJNeSBsaWIiLAogICAgICAibmFtZXNwYWNlIjogImh0dHA6Ly90YW1wZXJtb25rZXkubmV0LyIsCiAgICAgICJyZXF1aXJlIjogWwogICAgICAgICJodHRwczovL3NvbWUudXJsLjEiLAogICAgICAgICJodHRwczovL3NvbWUudXJsLjIiCiAgICAgIF0KICAgIH0sCiAgICAicmVsZWFzZSI6ICIuL2RhdGEiCiAgfSwKICAidmVyc2lvbiI6ICIxLjAuMCIKfQoAAAAAAAAAACEXAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0AwAAAAAAAPQDAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAhFwAAewogICJ0eXBlIjogIm1vZHVsZSIsCiAgIl9tb2R1bGVBbGlhc2VzIjogewogICAgInByZWFjdCI6ICJsaWIvZG9tL3ByZWFjdENvbXBvbmVudC5qcyIsCiAgICAicHJvcC10eXBlcyI6ICJsaWIvcHJvcC10eXBlcy5qcyIsCiAgICAicmVhY3QiOiAibGliL2RvbS9wcmVhY3RDb21wb25lbnQuanMiLAogICAgInJlYWN0LWRvbSI6ICJub2RlX21vZHVsZXMvcHJlYWN0L2NvbXBhdCIsCiAgICAicmVhY3Qtc3NyLXByZXBhc3MiOiAibm9kZV9tb2R1bGVzL3ByZWFjdC1zc3ItcHJlcGFzcyIsCiAgICAibGliL2VjbWFzY3JpcHQvcGFyc2VyLmpzIjogImxpYi9lY21hc2NyaXB0L3BhcnNlcjIuanMiLAogICAgImxpYi9lY21hc2NyaXB0L2xleGVyLmpzIjogInF1aWNranMvcWpzLW1vZHVsZXMvbGliL2xleGVyL2VjbWFzY3JpcHQuanMiLAogICAgImN2VmlkZW8uanMiOiAicWpzLW9wZW5jdi9qcy9jdlZpZGVvLmpzIiwKICAgICJjdlV0aWxzLmpzIjogInFqcy1vcGVuY3YvanMvY3ZVdGlscy5qcyIsCiAgICAiY3ZQaXBlbGluZS5qcyI6ICJxanMtb3BlbmN2L2pzL2N2UGlwZWxpbmUuanMiLAogICAgImN2SGlnaEdVSS5qcyI6ICJxanMtb3BlbmN2L2pzL2N2SGlnaEdVSS5qcyIsCiAgICAibGliL29iamVjdEluc3BlY3QuanMiOiAiaW5zcGVjdCIsCiAgICAibGliL3BvaW50ZXIuanMiOiAicG9pbnRlciIsCiAgICAibGliL2RlZXAuanMiOiAiZGVlcCIsCiAgICAibGliL3BhdGguanMiOiAicGF0aCIsCiAgICAibGliL3htbC5qcyI6ICJ4bWwiLAogICAgImxpYi9sZXhlci5qcyI6ICJsZXhlciIsCiAgICAibGliL2ZpbGVzeXN0ZW0uanMiOiAiZnMiLAogICAgImZzLmpzIjogImxpYi9maWxlc3lzdGVtLmpzIiwKICAgICJxdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi9mcy5qcyI6ICJmcyIsCiAgICAibGliL21pc2MuanMiOiAidXRpbCIsCiAgICAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvZG9tLmpzIjogImRvbSIsCiAgICAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvZXh0ZW5kQXJyYXkuanMiOiAiZXh0ZW5kQXJyYXkiLAogICAgInF1aWNranMvcWpzLW1vZHVsZXMvbGliL2V4dGVuZEdlbmVyYXRvci5qcyI6ICJleHRlbmRHZW5lcmF0b3IiLAogICAgImxpYi9jaGlsZFByb2Nlc3MuanMiOiAiY2hpbGRfcHJvY2VzcyIsCiAgICAiLi9saWIvY2hpbGRQcm9jZXNzLmpzIjogImNoaWxkX3Byb2Nlc3MiLAogICAgImxpYi9zdGFjay5qcyI6ICJxdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi9zdGFjay5qcyIsCiAgICAieHJlcGwuanMiOiAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvcmVwbC5qcyIsCiAgICAidGVybWluYWwuanMiOiAicXVpY2tqcy9xanMtbW9kdWxlcy9saWIvdGVybWluYWwuanMiLAogICAgIngvcXVpY2tqcy9xanMtZmZpL2V4YW1wbGVzL3NvY2tldC5qcyI6ICJzb2NrZXRzIiwKICAgICJxdWlja2pzL3Fqcy1mZmkvbGliL3NvY2tldC5qcyI6ICJzb2NrZXRzIiwKICAgICJsaWIvZXZlbnRzLmpzIjogImV2ZW50cyIsCiAgICAibGliL3htbC94cGF0aC5qcyI6ICJxdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi94cGF0aC5qcyIsCiAgICAibGliL3ByZWFjdC5qcyI6ICJsaWIvcHJlYWN0LmVzbS5qcyIKICB9LAogICJhdXRob3IiOiAiUm9tYW4gU2VubiA8cm9tYW4ubC5zZW5uQGdtYWlsLmNvbT4iLAogICJsaWNlbnNlIjogIk1JVCIsCiAgInBhcnNlck9wdGlvbnMiOiB7CiAgICAic291cmNlVHlwZSI6ICJtb2R1bGUiCiAgfSwKICAiZGVwZW5kZW5jaWVzIjogewogICAgIkBiYWJlbC9ydW50aW1lIjogIl43LjE3LjkiLAogICAgIkBiYWJlbC9ydW50aW1lLWNvcmVqczMiOiAiXjcuMTcuOSIsCiAgICAiQHMtdWkvbGludCI6ICJeMy40My4wIiwKICAgICJiYWJlbC1sb2FkZXIiOiAiXjguMi41IiwKICAgICJiYWJlbC1wcmVzZXQtZW52IjogIl4xLjcuMCIsCiAgICAiYm9keS1wYXJzZXIiOiAiXjEuMTkuMCIsCiAgICAiYnBnLWRlY29kZXIiOiAiXjAuMC43IiwKICAgICJjb3JlLWpzIjogIl4zLjIyLjIiLAogICAgImV4cHJlc3MiOiAiXjQuMTcuMSIsCiAgICAiZXhwcmVzcy13cyI6ICJeNC4wLjAiLAogICAgImh0bSI6ICJeMy4xLjAiLAogICAgImlzLWJwZyI6ICJeMC4xLjAiLAogICAgImlzb21vcnBoaWMtZmV0Y2giOiAiXjMuMC4wIiwKICAgICJtb2R1bGUtYWxpYXMiOiAiXjIuMi4yIiwKICAgICJuZXh0IjogIl4xMi4yLjUiLAogICAgIm5vZGUtYnBnIjogIl4xLjAuMCIsCiAgICAib2wiOiAiXjYuMTUuMSIsCiAgICAib2wtbGF5ZXJzd2l0Y2hlciI6ICJodHRwczovL2dpdGh1Yi5jb20vd2Fsa2VybWF0dC9vbC1sYXllcnN3aXRjaGVyIiwKICAgICJvcGVubGF5ZXJzLWV4dCI6ICJeMy4xLjUiLAogICAgInByZWFjdCI6ICJeMTAiLAogICAgInByZWFjdC1jb21wYXQiOiAiXjMiLAogICAgInByZWFjdC1jb250ZXh0IjogIl4xLjEuNCIsCiAgICAicHJlYWN0LXJlbmRlci10by1zdHJpbmciOiAiXjUuMS4xOSIsCiAgICAicHJlYWN0LXNzci1wcmVwYXNzIjogIl4xIiwKICAgICJwcm9taXNpZnktY2hpbGQtcHJvY2VzcyI6ICJeNC4xLjEiLAogICAgInJlYWN0IjogIl4xOC4yLjAiLAogICAgInJlYWN0LWRvbSI6ICJeMTguMi4wIiwKICAgICJyZWFjdC1zb3J0YWJsZS1ob2MiOiAiXjIuMC4wIiwKICAgICJyZWFjdC11cGxvYWQtZ2FsbGVyeSI6ICJeMC40LjEiLAogICAgInJlZ2VuZXJhdG9yLXJ1bnRpbWUiOiAiXjAuMTMuOSIsCiAgICAic2VyaWFscG9ydCI6ICJeOS4wLjEiLAogICAgInVwcGllIjogIl4xLjEuNCIsCiAgICAid3MiOiAiXjcuMy4xIgogIH0sCiAgIm9sZERlcHMiOiB7CiAgICAiQGRlcXVlL2RvdCI6ICJeMS4xLjUiLAogICAgIkBzZXJpYWxwb3J0L2JpbmRpbmdzIjogIl45LjAuMiIsCiAgICAiQHNlcmlhbHBvcnQvc3RyZWFtIjogIl45LjAuMSIsCiAgICAicHJlYWN0LWZsdWlkIjogIl4wLjkuMSIsCiAgICAic29ydC1vcmRlciI6ICJeMS4wLjEiLAogICAgImNvbHVtbmlmeSI6ICJeMS41LjQiLAogICAgImNyb3NzLXNwYXduIjogIl43LjAuMyIsCiAgICAiY29kZWphciI6ICJodHRwczovL2dpdGh1Yi5jb20vYW50b25tZWR2L2NvZGVqYXIiLAogICAgImppc29uLWVzIjogIl4wLjQuMTgiLAogICAgIndhc20tbG9hZGVyIjogIl4xLjMuMCIsCiAgICAiaGlnaGxpZ2h0anMiOiAiXjkuMTYuMiIsCiAgICAiaGlnaGxpZ2h0anMtbGluZS1udW1iZXJzLmpzIjogIl4yLjguMCIsCiAgICAibm9kZS1kZWJ1Z3Byb3RvY29sLWNsaWVudCI6ICJeMC4xLjEiLAogICAgIm5vZGUtZXhjZXB0aW9ucyI6ICJeNC4wLjEiLAogICAgInNjLXJhbmRvbSI6ICJeMS4wLjAiLAogICAgIm9wZW50eXBlIjogIl4wLjEuMiIsCiAgICAiYmFzaC1wYXJzZXIiOiAiXjAuNS4wIiwKICAgICJjLWFzdCI6ICJeMS4wLjAiLAogICAgImNsYXJpZnkiOiAiXjIuMS4wIiwKICAgICJsZWJhYiI6ICJeMy4xLjAiLAogICAgImxleCI6ICJeMS43LjkiLAogICAgInByZWFjdC10cmFuc2l0aW9uLWdyb3VwIjogIl4yLjAuMCIsCiAgICAidXNlcnNjcmlwdC1idWlsZGVyIjogIl4wLjMuMCIsCiAgICAicmVhY3QtcHJpc20tZWRpdG9yIjogImh0dHBzOi8vZ2l0aHViLmNvbS9sdW1pYTIwNDYvcmVhY3QtcHJpc20tZWRpdG9yIiwKICAgICJyZWFjdC1zaW1wbGUtY29kZS1lZGl0b3IiOiAiXjAuMTEuMCIsCiAgICAicHJpc20tcmVhY3QtcmVuZGVyZXIiOiAiXjEuMi4xIiwKICAgICJmZXRjaC13aXRoLXByb3h5IjogIl4zLjAuMSIsCiAgICAiZnJlZS1wcm94eSI6ICJeMC4xLjYiLAogICAgInByb3h5bm92YSI6ICJeMC4xLjAiCiAgfSwKICAiZGVzY3JpcHRpb24iOiAiIiwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgIkBiYWJlbC9jb3JlIjogIl43LjAuMC0wIiwKICAgICJAYmFiZWwvcGx1Z2luLXByb3Bvc2FsLWNsYXNzLXByb3BlcnRpZXMiOiAiXjcuNC40IiwKICAgICJAYmFiZWwvcGx1Z2luLXN5bnRheC1jbGFzcy1wcm9wZXJ0aWVzIjogIl43LjIuMCIsCiAgICAiQGJhYmVsL3BsdWdpbi10cmFuc2Zvcm0tcnVudGltZSI6ICJeNy4xNy4wIiwKICAgICJAYmFiZWwvcG9seWZpbGwiOiAiXjcuNC40IiwKICAgICJAYmFiZWwvcHJlc2V0LWVudiI6ICJeNy40LjUiLAogICAgIkBiYWJlbC9wcmVzZXQtcmVhY3QiOiAiXjcuMC4wIiwKICAgICJhY29ybiI6ICJeOC4xLjEiLAogICAgImFuc2ktY29sb3JzIjogIl40LjEuMSIsCiAgICAiYW5zaS1lc2NhcGVzIjogIl40LjMuMSIsCiAgICAiYXN0cmluZyI6ICJeMS43LjQiLAogICAgImJhYmVsLWVzbGludCI6ICJeMTAuMC4xIiwKICAgICJiYWJlbC1ub2RlIjogIl4wLjAuMS1zZWN1cml0eSIsCiAgICAiYmFiZWwtcGx1Z2luLXRyYW5zZm9ybS1jb21tb25qcyI6ICJeMS4xLjYiLAogICAgImJhYmVsLXByZXNldC1wcmVhY3QiOiAiXjIuMC4wIiwKICAgICJlc2xpbnQiOiAiXjguMTQuMCIsCiAgICAiZnJlZS1wcm94eSI6ICJeMC4yLjAiLAogICAgImh0dHAiOiAiMC4wLjAiLAogICAgInByb3h5LWxpc3RzIjogImh0dHBzOi8vZ2l0aHViLmNvbS9jaGlsbDExNy9wcm94eS1saXN0cyIsCiAgICAicHJveHlub3ZhIjogIl4wLjEuMCIsCiAgICAid2VicGFjayI6ICJeNS43Mi4wIiwKICAgICJ3ZWJwYWNrLWNsaSI6ICJeNC45LjIiLAogICAgIndlYnBhY2stZGV2LXNlcnZlciI6ICJeNC44LjEiCiAgfSwKICAiZW5naW5lcyI6IHsKICAgICJub2RlIjogIj49IDE0IgogIH0sCiAgImVzbGludENvbmZpZyI6IHsKICAgICJleHRlbmRzIjogWwogICAgICAiLi9ub2RlX21vZHVsZXMvQHMtdWkvbGludC9lc2xpbnRyYy5qcyIKICAgIF0KICB9LAogICJodXNreSI6IHsKICAgICJob29rcyI6IHsKICAgICAgInByZS1jb21taXQiOiAibGludC1zdGFnZWQiCiAgICB9CiAgfSwKICAibGludC1zdGFnZWQiOiB7CiAgICAiKi57anMsanN4fSI6IFsKICAgICAgImVzbGludCAuIC0tZXh0IC5qcyAtLWV4dCAuanN4IC0taWdub3JlLXBhdGggLmVzbGludGlnbm9yZSAtLWZpeCIsCiAgICAgICJnaXQgYWRkIgogICAgXQogIH0sCiAgIm1haW4iOiAic2VydmVyLmpzIiwKICAibmFtZSI6ICJwbG90LWN2IiwKICAicHJldHRpZXIiOiAiLi9ub2RlX21vZHVsZXMvQHMtdWkvbGludC8ucHJldHRpZXJyYy5qcyIsCiAgInNjcmlwdHMiOiB7CiAgICAiYnVpbGQiOiAid2VicGFjayAtLWNvbmZpZyB3ZWJwYWNrLmNvbmZpZy5qcyIsCiAgICAiZGVwbG95IjogIm5vdyAtLXRhcmdldCBwcm9kdWN0aW9uIiwKICAgICJsaW50IjogImVzbGludCAuIC0tZXh0IC5qcyAtLWV4dCAuanN4IC0taWdub3JlLXBhdGggLmVzbGludGlnbm9yZSAtLWZpeCIsCiAgICAibm93LWJ1aWxkIjogIm5leHQgYnVpbGQiLAogICAgInNlcnZlciI6ICJlbnYgUE9SVD0zMDAwIG5vZGVtb24gLS1leHBlcmltZW50YWwtbW9kdWxlcyAtdyBzZXJ2ZXIuanMgc2VydmVyLmpzIiwKICAgICJzdGFydCI6ICJuZXh0IHN0YXJ0IgogIH0sCiAgInN0eWxlbGludCI6IHsKICAgICJleHRlbmRzIjogIi4vbm9kZV9tb2R1bGVzL0BzLXVpL2xpbnQvc3R5bGVsaW50LmNvbmZpZy5qcyIKICB9LAogICJ1c2Vyc2NyaXB0IjogewogICAgImRldiI6ICIuL3RtcCIsCiAgICAiZW50cnkiOiAiLi91c2Vyc2NyaXB0LXRlc3QuanMiLAogICAgImZpbGVOYW1lIjogImxpYiIsCiAgICAibWV0YSI6IHsKICAgICAgImdyYW50IjogIm5vbmUiLAogICAgICAiaG9tZXBhZ2UiOiAiaHR0cHM6Ly9vcGVudXNlcmpzLm9yZy9zY3JpcHRzL3ZhNG9rIiwKICAgICAgIm1hdGNoIjogIio6Ly8qLioiLAogICAgICAibmFtZSI6ICJNeSBsaWIiLAogICAgICAibmFtZXNwYWNlIjogImh0dHA6Ly90YW1wZXJtb25rZXkubmV0LyIsCiAgICAgICJyZXF1aXJlIjogWwogICAgICAgICJodHRwczovL3NvbWUudXJsLjEiLAogICAgICAgICJodHRwczovL3NvbWUudXJsLjIiCiAgICAgIF0KICAgIH0sCiAgICAicmVsZWFzZSI6ICIuL2RhdGEiCiAgfSwKICAidmVyc2lvbiI6ICIxLjAuMCIKfQoAAAAAAAAAAPQWAAAAAAAAAAAAAAAAAAAAAAAA9BYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0AwAAAAAAAPQDAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/geom/point.js",
			"settings":
			{
				"buffer_size": 10488,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					18,
					1,
					"cut",
					null,
					"AQAAANMWAAAAAAAA0xYAAAAAAACQAAAAZGVmaW5lR2V0dGVyKFBvaW50LnByb3RvdHlwZSwgU3ltYm9sLml0ZXJhdG9yLCBmdW5jdGlvbigpIHsKICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgbGV0IGEgPSBbeCwgeV07CiAgcmV0dXJuIGFbU3ltYm9sLml0ZXJhdG9yXS5iaW5kKGEpOwp9KTsK",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0xYAAAAAAABjFwAAAAAAAAAAAAAAAAAA"
				],
				[
					19,
					1,
					"left_delete",
					null,
					"AQAAANIWAAAAAAAA0hYAAAAAAAABAAAACg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0xYAAAAAAADTFgAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"paste",
					null,
					"AQAAAGUZAAAAAAAA9RkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAZRkAAAAAAABlGQAAAAAAAAAAAAAAAAAA"
				],
				[
					27,
					1,
					"cut",
					null,
					"AQAAAGUZAAAAAAAAZRkAAAAAAAC/AAAAZGVmaW5lR2V0dGVyKFBvaW50LnByb3RvdHlwZSwgU3ltYm9sLml0ZXJhdG9yLCBmdW5jdGlvbigpIHsKICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgbGV0IGEgPSBbeCwgeV07CiAgcmV0dXJuIGFbU3ltYm9sLml0ZXJhdG9yXS5iaW5kKGEpOwp9KTsKUG9pbnQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnUG9pbnQnOwo",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAZRkAAAAAAAAkGgAAAAAAAAAAAAAAAAAA"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAABYiAAAAAAAAFyIAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAFiIAAAAAAAAWIgAAAAAAAAAAAAAAAAAA"
				],
				[
					32,
					1,
					"paste",
					null,
					"AQAAABciAAAAAAAA1iIAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAFyIAAAAAAAAXIgAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAAAIAAAAAAAAAQgAAAAAAAAAAAAAAQgAAAAAAAACCAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAgAAAAAAAAACAAAAAAAAAAAAAAAYHhA"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "define"
					},
					"BgAAAAEIAAAAAAAAAggAAAAAAAAAAAAAAggAAAAAAAADCAAAAAAAAAAAAAADCAAAAAAAAAQIAAAAAAAAAAAAAAQIAAAAAAAABQgAAAAAAAAAAAAABQgAAAAAAAAGCAAAAAAAAAAAAAAGCAAAAAAAAAcIAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAQgAAAAAAAABCAAAAAAAAAAAAAAAAAAA"
				],
				[
					46,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAAcIAAAAAAAACQgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAABwgAAAAAAAAHCAAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "Point.prototype"
					},
					"DwAAAAgIAAAAAAAACQgAAAAAAAAAAAAACQgAAAAAAAAKCAAAAAAAAAAAAAAKCAAAAAAAAAsIAAAAAAAAAAAAAAsIAAAAAAAADAgAAAAAAAAAAAAADAgAAAAAAAANCAAAAAAAAAAAAAANCAAAAAAAAA4IAAAAAAAAAAAAAA4IAAAAAAAADwgAAAAAAAAAAAAADwgAAAAAAAAQCAAAAAAAAAAAAAAQCAAAAAAAABEIAAAAAAAAAAAAABEIAAAAAAAAEggAAAAAAAAAAAAAEggAAAAAAAATCAAAAAAAAAAAAAATCAAAAAAAABQIAAAAAAAAAAAAABQIAAAAAAAAFQgAAAAAAAAAAAAAFQgAAAAAAAAWCAAAAAAAAAAAAAAWCAAAAAAAABcIAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAACAgAAAAAAAAICAAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAABcIAAAAAAAAGAgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAFwgAAAAAAAAXCAAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABgIAAAAAAAAGQgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAGAgAAAAAAAAYCAAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAABkIAAAAAAAAGwgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAGQgAAAAAAAAZCAAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"",
					null,
					"AQAAABoIAAAAAAAAYB4AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAGggAAAAAAAAaCAAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": "\n\n\n\n"
					},
					"BAAAAGAeAAAAAAAAYR4AAAAAAAAAAAAAYR4AAAAAAABiHgAAAAAAAAAAAABiHgAAAAAAAGMeAAAAAAAAAAAAAGMeAAAAAAAAZB4AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAYB4AAAAAAABgHgAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAGYeAAAAAAAAZx4AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAZh4AAAAAAABmHgAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAGceAAAAAAAAaB4AAAAAAAAAAAAAaB4AAAAAAABpHgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAZx4AAAAAAABnHgAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"right_delete",
					null,
					"AQAAAGkeAAAAAAAAaR4AAAAAAAABAAAACg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAaR4AAAAAAABpHgAAAAAAAAAAAAAAAAAA"
				],
				[
					72,
					1,
					"left_delete",
					null,
					"AQAAAGoeAAAAAAAAah4AAAAAAAATGgAAUG9pbnQucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbih4LCB5KSB7CiAgdGhpcy54ICs9IHg7CiAgdGhpcy55ICs9IHk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50LnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KSB7CiAgdGhpcy54ID0geDsKICB0aGlzLnkgPSB5OwogIHJldHVybiB0aGlzOwp9OwpQb2ludC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbih4LCB5KSB7CiAgdGhpcy54ID0gMDsKICB0aGlzLnkgPSAwOwogIHJldHVybiB0aGlzOwp9OwpQb2ludC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oZm4pIHsKICBpZih0eXBlb2YgZm4gIT0gJ2Z1bmN0aW9uJykgewogICAgUG9pbnQuYXBwbHkodGhpcywgWy4uLmFyZ3VtZW50c10pOwogICAgcmV0dXJuIHRoaXM7CiAgfQogIHJldHVybiBmbih0aGlzLngsIHRoaXMueSk7Cn07ClBvaW50LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IGN0b3IgPSB0aGlzW1N5bWJvbC5zcGVjaWVzXSB8fCB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKCiAgcmV0dXJuIG5ldyBjdG9yKHsgeDogdGhpcy54LCB5OiB0aGlzLnkgfSk7Cn07ClBvaW50LnByb3RvdHlwZS5zdW0gPSBmdW5jdGlvbiguLi5hcmdzKSB7CiAgY29uc3QgcCA9IG5ldyBQb2ludCguLi5hcmdzKTsKICBsZXQgciA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCwgdGhpcy55KTsKICByLnggKz0gcC54OwogIHIueSArPSBwLnk7CiAgcmV0dXJuIHI7Cn07ClBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiguLi5hcmdzKSB7CiAgY29uc3Qgb3RoZXIgPSBuZXcgUG9pbnQoLi4uYXJncyk7CiAgdGhpcy54ICs9IG90aGVyLng7CiAgdGhpcy55ICs9IG90aGVyLnk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50LnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24oYXJnKSB7CiAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICBsZXQgZm4gPSBmdW5jdGlvbihvdGhlcikgewogICAgbGV0IHIgPSBuZXcgUG9pbnQoeCwgeSk7CiAgICByZXR1cm4gci5zdWIob3RoZXIpOwogIH07CiAgaWYoYXJnKSByZXR1cm4gZm4oYXJnKTsKICByZXR1cm4gZm47Cn07ClBvaW50LnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiguLi5hcmdzKSB7CiAgY29uc3Qgb3RoZXIgPSBuZXcgUG9pbnQoLi4uYXJncyk7CiAgdGhpcy54IC09IG90aGVyLng7CiAgdGhpcy55IC09IG90aGVyLnk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50LnByb3RvdHlwZS5wcm9kID0gZnVuY3Rpb24oZikgewogIGNvbnN0IG8gPSBpc1BvaW50KGYpID8gZiA6IHsgeDogZiwgeTogZiB9OwogIHJldHVybiBuZXcgUG9pbnQodGhpcy54ICogby54LCB0aGlzLnkgKiBvLnkpOwp9OwpQb2ludC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24oZikgewogIGNvbnN0IG8gPSBpc1BvaW50KGYpID8gZiA6IHsgeDogZiwgeTogZiB9OwogIHRoaXMueCAqPSBvLng7CiAgdGhpcy55ICo9IG8ueTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnQucHJvdG90eXBlLnF1b3QgPSBmdW5jdGlvbihvdGhlcikgewogIG90aGVyID0gaXNQb2ludChvdGhlcikgPyBvdGhlciA6IHsgeDogb3RoZXIsIHk6IG90aGVyIH07CiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLnggLyBvdGhlci54LCB0aGlzLnkgLyBvdGhlci55KTsKfTsKUG9pbnQucHJvdG90eXBlLmRpdiA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgb3RoZXIgPSBpc1BvaW50KG90aGVyKSA/IG90aGVyIDogeyB4OiBvdGhlciwgeTogb3RoZXIgfTsKICB0aGlzLnggLz0gb3RoZXIueDsKICB0aGlzLnkgLz0gb3RoZXIueTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnQucHJvdG90eXBlLmNvbXAgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IFBvaW50KHsgeDogLXRoaXMueCwgeTogLXRoaXMueSB9KTsKfTsKUG9pbnQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uKCkgewogIHRoaXMueCAqPSAtMTsKICB0aGlzLnkgKj0gLTE7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50LnByb3RvdHlwZS5kaXN0YW5jZVNxdWFyZWQgPSBmdW5jdGlvbihvdGhlciA9IHsgeDogMCwgeTogMCB9KSB7CiAgcmV0dXJuIChvdGhlci55IC0gdGhpcy55KSAqIChvdGhlci55IC0gdGhpcy55KSArIChvdGhlci54IC0gdGhpcy54KSAqIChvdGhlci54IC0gdGhpcy54KTsKfTsKUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlID0gZnVuY3Rpb24ob3RoZXIgPSB7IHg6IDAsIHk6IDAgfSkgewogIHJldHVybiBNYXRoLnNxcnQoUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlU3F1YXJlZC5jYWxsKHRoaXMsIFBvaW50KG90aGVyKSkpOwp9OwpQb2ludC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24ob3RoZXIpIHsKICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogIHJldHVybiAreCA9PSArb3RoZXIueCAmJiAreSA9PSArb3RoZXIueTsKfTsKUG9pbnQucHJvdG90eXBlLnJvdW5kID0gZnVuY3Rpb24ocHJlY2lzaW9uID0gMC4wMDEsIGRpZ2l0cywgdHlwZSkgewogIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgZGlnaXRzID0gZGlnaXRzIHx8IHJvdW5kRGlnaXRzKHByZWNpc2lvbik7CiAgdHlwZSA9IHR5cGUgfHwgJ3JvdW5kJzsKICB0aGlzLnggPSByb3VuZFRvKHgsIHByZWNpc2lvbiwgZGlnaXRzLCB0eXBlKTsKICB0aGlzLnkgPSByb3VuZFRvKHksIHByZWNpc2lvbiwgZGlnaXRzLCB0eXBlKTsKICByZXR1cm4gdGhpczsKfTsKUG9pbnQucHJvdG90eXBlLmNlaWwgPSBmdW5jdGlvbigpIHsKICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogIHRoaXMueCA9IE1hdGguY2VpbCh4KTsKICB0aGlzLnkgPSBNYXRoLmNlaWwoeSk7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50LnByb3RvdHlwZS5mbG9vciA9IGZ1bmN0aW9uKCkgewogIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgdGhpcy54ID0gTWF0aC5mbG9vcih4KTsKICB0aGlzLnkgPSBNYXRoLmZsb29yKHkpOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnQucHJvdG90eXBlLmRvdCA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgcmV0dXJuIHRoaXMueCAqIG90aGVyLnggKyB0aGlzLnkgKiBvdGhlci55Owp9OwoKUG9pbnQucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBbdGhpcy54LCB0aGlzLnldOwp9OwpQb2ludC5wcm90b3R5cGUuZnJvbUFuZ2xlID0gZnVuY3Rpb24oYW5nbGUsIGRpc3QgPSAxLjApIHsKICB0aGlzLnggPSBNYXRoLmNvcyhhbmdsZSkgKiBkaXN0OwogIHRoaXMueSA9IE1hdGguc2luKGFuZ2xlKSAqIGRpc3Q7CiAgcmV0dXJuIHRoaXM7Cn07ClBvaW50LnByb3RvdHlwZS50b0FuZ2xlID0gZnVuY3Rpb24oZGVnID0gZmFsc2UpIHsKICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLngsIHRoaXMueSkgKiAoZGVnID8gMTgwIC8gTWF0aC5QSSA6IDEpOwp9OwpQb2ludC5wcm90b3R5cGUuYW5nbGUgPSBmdW5jdGlvbihvdGhlciwgZGVnID0gZmFsc2UpIHsKICBvdGhlciA9IG90aGVyIHx8IHsgeDogMCwgeTogMCB9OwogIHJldHVybiBQb2ludC5wcm90b3R5cGUuZGlmZi5jYWxsKHRoaXMsIG90aGVyKS50b0FuZ2xlKGRlZyk7Cn07ClBvaW50LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbihhbmdsZSwgb3JpZ2luID0geyB4OiAwLCB5OiAwIH0pIHsKICB0aGlzLnggLT0gb3JpZ2luLng7CiAgdGhpcy55IC09IG9yaWdpbi55OwogIGxldCBjID0gTWF0aC5jb3MoYW5nbGUpLAogICAgcyA9IE1hdGguc2luKGFuZ2xlKTsKICBsZXQgeG5ldyA9IHRoaXMueCAqIGMgLSB0aGlzLnkgKiBzOwogIGxldCB5bmV3ID0gdGhpcy54ICogcyArIHRoaXMueSAqIGM7CiAgdGhpcy54ID0geG5ldzsKICB0aGlzLnkgPSB5bmV3OwogIHJldHVybiB0aGlzOwp9OwpQb2ludC5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uKHNobCA9IDE2KSB7CiAgY29uc3QgeyB4LCB5IH0gPSB0aGlzOwoKICBpZihzaGwgPCAwKSByZXR1cm4geCAqICgxIDw8IE1hdGguYWJzKHNobCkpICsgeTsKCiAgcmV0dXJuIHggKyB5ICogKDEgPDwgc2hsKTsKfTsKUG9pbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0cyA9IHt9KSB7CiAgY29uc3QgeyBwcmVjaXNpb24gPSAwLjAwMSwgdW5pdCA9ICcnLCBzZXBhcmF0b3IgPSAnLCcsIGxlZnQgPSAnJywgcmlnaHQgPSAnJywgcGFkID0gMCB9ID0gb3B0czsKICBsZXQgeCA9IHJvdW5kVG8odGhpcy54LCBwcmVjaXNpb24pOwogIGxldCB5ID0gcm91bmRUbyh0aGlzLnksIHByZWNpc2lvbik7CiAgaWYocGFkID4gMCkgewogICAgeCA9IHggKyAnJzsKICAgIHkgPSB5ICsgJyc7CiAgICBpZih5WzBdICE9ICctJykgeSA9ICcgJyArIHk7CiAgICBpZih4WzBdICE9ICctJykgeCA9ICcgJyArIHg7CiAgfQogIC8vY29uc29sZS5kZWJ1ZygidG9TdHJpbmciLCB7eCx5fSwge3BhZH0pOwogIHJldHVybiBgJHtsZWZ0fSR7KHggKyAnJykucGFkU3RhcnQocGFkLCAnICcpfSR7dW5pdH0ke3NlcGFyYXRvcn0keyh5ICsgJycpLnBhZEVuZChwYWQsICcgJyl9JHt1bml0fSR7cmlnaHR9YDsKfTsKUG9pbnQucHJvdG90eXBlLnRvU291cmNlID0gZnVuY3Rpb24ob3B0cyA9IHt9KSB7CiAgY29uc3QgeyBhc0FycmF5ID0gZmFsc2UsIHBsYWluT2JqID0gZmFsc2UsIHBhZCA9IGEgPT4gYSAvKmEucGFkU3RhcnQoNCwgJyAnKSovLCBzaG93TmV3ID0gdHJ1ZSB9ID0gb3B0czsKICBsZXQgeCA9IHBhZCh0aGlzLnggKyAnJyk7CiAgbGV0IHkgPSBwYWQodGhpcy55ICsgJycpOwogIGxldCBjID0gdCA9PiB0OwogIGlmKHR5cGVvZiB0aGlzICE9ICdvYmplY3QnIHx8IHRoaXMgPT09IG51bGwpIHJldHVybiAnJzsKICBpZihhc0FycmF5KSByZXR1cm4gYFske3h9LCR7eX1dYDsKICBpZihwbGFpbk9iaikgcmV0dXJuIGB7eDoke3h9LHk6JHt5fX1gOwoKICByZXR1cm4gYCR7YyhzaG93TmV3ID8gJ25ldyAnIDogJycsIDEsIDMxKX0ke2MoJ1BvaW50JywgMSwgMzMpfSR7YygnKCcsIDEsIDM2KX0ke2MoeCwgMSwgMzIpfSR7YygnLCcsIDEsIDM2KX0ke2MoeSwgMSwgMzIpfSR7YygnKScsIDEsIDM2KX1gOwp9OwoKLypQb2ludC5wcm90b3R5cGUudG9Tb3VyY2UgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gJ3t4OicgKyB0aGlzLnggKyAnLHk6JyArIHRoaXMueSArICd9JzsKfTsqLwpQb2ludC5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbihwcm90byA9IFBvaW50LnByb3RvdHlwZSkgewogIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICBjb25zdCBvYmogPSB7IHgsIHkgfTsKICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqLCBwcm90byk7CiAgcmV0dXJuIG9iajsKfTsKUG9pbnQucHJvdG90eXBlLnRvQ1NTID0gZnVuY3Rpb24ocHJlY2lzaW9uID0gMC4wMDEsIGVkZ2VzID0gWydsZWZ0JywgJ3RvcCddKSB7CiAgcmV0dXJuIHsKICAgIFtlZGdlc1swXV06IHJvdW5kVG8odGhpcy54LCBwcmVjaXNpb24pICsgJ3B4JywKICAgIFtlZGdlc1sxXV06IHJvdW5kVG8odGhpcy55LCBwcmVjaXNpb24pICsgJ3B4JwogIH07Cn07ClBvaW50LnByb3RvdHlwZS50b0ZpeGVkID0gZnVuY3Rpb24oZGlnaXRzKSB7CiAgcmV0dXJuIG5ldyBQb2ludCgrdGhpcy54LnRvRml4ZWQoZGlnaXRzKSwgK3RoaXMueS50b0ZpeGVkKGRpZ2l0cykpOwp9OwpQb2ludC5wcm90b3R5cGUuaXNOdWxsID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHRoaXMueCA9PSAwICYmIHRoaXMueSA9PSAwOwp9OwpQb2ludC5wcm90b3R5cGUuaW5zaWRlID0gZnVuY3Rpb24ocmVjdCkgewogIHJldHVybiB0aGlzLnggPj0gcmVjdC54ICYmIHRoaXMueCA8IHJlY3QueCArIHJlY3Qud2lkdGggJiYgdGhpcy55ID49IHJlY3QueSAmJiB0aGlzLnkgPCByZWN0LnkgKyByZWN0LmhlaWdodDsKfTsKUG9pbnQucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uKG0sIHJvdW5kID0gdHJ1ZSkgewogIGlmKGlzT2JqZWN0KG0pICYmIHR5cGVvZiBtLnRvTWF0cml4ID09ICdmdW5jdGlvbicpIG0gPSBtLnRvTWF0cml4KCk7CiAgLy9pZihpc09iamVjdChtKSAmJiB0eXBlb2YgbS50cmFuc2Zvcm1Qb2ludCA9PSAnZnVuY3Rpb24nKSByZXR1cm4gbS50cmFuc2Zvcm1Qb2ludCh0aGlzKTsKCiAgY29uc3QgeCA9IG1bMF0gKiB0aGlzLnggKyBtWzFdICogdGhpcy55ICsgbVsyXTsKICBjb25zdCB5ID0gbVszXSAqIHRoaXMueCArIG1bNF0gKiB0aGlzLnkgKyBtWzVdOwoKICB0aGlzLnggPSB4OwogIHRoaXMueSA9IHk7CiAgaWYocm91bmQpIFBvaW50LnByb3RvdHlwZS5yb3VuZC5jYWxsKHRoaXMsIDFlLTEzLCAxMyk7CgogIHJldHVybiB0aGlzOwp9OwpQb2ludC5wcm90b3R5cGUuc2NhbGVUbyA9IGZ1bmN0aW9uKG1pbm1heCkgewogIHJldHVybiBuZXcgUG9pbnQoewogICAgeDogKHRoaXMueCAtIG1pbm1heC54MSkgLyAobWlubWF4LngyIC0gbWlubWF4LngxKSwKICAgIHk6ICh0aGlzLnkgLSBtaW5tYXgueTEpIC8gKG1pbm1heC55MiAtIG1pbm1heC55MSkKICB9KTsKfTsKUG9pbnQucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKCkgewogIGxldCBkID0gUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlLmNhbGwodGhpcyk7CiAgcmV0dXJuIFBvaW50LnByb3RvdHlwZS5kaXYuY2FsbCh0aGlzLCB7IHg6IGQsIHk6IGQgfSk7Cn07ClBvaW50LnByb3RvdHlwZS5ub3JtYWwgPSBmdW5jdGlvbigpIHsKICBsZXQgZCA9IFBvaW50LnByb3RvdHlwZS5kaXN0YW5jZS5jYWxsKHRoaXMpOwogIHJldHVybiBuZXcgUG9pbnQoeyB4OiB0aGlzLnggLyBkLCB5OiB0aGlzLnkgLyBkIH0pOwp9",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAah4AAAAAAAB9OAAAAAAAAAAAAAAAACRA"
				],
				[
					73,
					2,
					"right_delete",
					null,
					"AgAAAGoeAAAAAAAAah4AAAAAAAABAAAAO2oeAAAAAAAAah4AAAAAAAABAAAACg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAah4AAAAAAABqHgAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAGoeAAAAAAAAax4AAAAAAAAAAAAAax4AAAAAAABsHgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAah4AAAAAAABqHgAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAbKAAAaW1wb3J0IHsgYmluZFByb3BlcnRpZXMsIGNsYW1wLCBkZWZpbmVHZXR0ZXIsIGltbXV0YWJsZUNsYXNzLCBpbnNwZWN0U3ltYm9sLCBpc09iamVjdCwgcm91bmREaWdpdHMsIHJvdW5kVG8sIHRyeUNhdGNoIH0gZnJvbSAnLi4vbWlzYy5qcyc7Cgpjb25zdCBTeW1TcGVjaWVzID0gdHJ5Q2F0Y2goCiAgKCkgPT4gU3ltYm9sLAogIHN5bSA9PiBzeW0uc3BlY2llcwopOwoKY29uc3QgQ1RPUiA9IG9iaiA9PiB7CiAgaWYob2JqW1N5bVNwZWNpZXNdKSByZXR1cm4gb2JqW1N5bVNwZWNpZXNdOwogIGxldCBwID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7CiAgaWYocFtTeW1TcGVjaWVzXSkgcmV0dXJuIHBbU3ltU3BlY2llc107CiAgcmV0dXJuIHAuY29uc3RydWN0b3I7Cn07CgpleHBvcnQgZnVuY3Rpb24gUG9pbnQoLi4uYXJncykgewogIGxldCBpc05ldyA9IHRoaXMgaW5zdGFuY2VvZiBQb2ludDsKICBhcmdzID0gYXJnc1swXSBpbnN0YW5jZW9mIEFycmF5ID8gYXJncy5zaGlmdCgpIDogYXJnczsKICBsZXQgcCA9IGlzTmV3ID8gdGhpcyA6IG5ldyBQb2ludCguLi5hcmdzKTsKICBsZXQgYXJnID0gYXJncy5zaGlmdCgpOwoKICBpZighbmV3LnRhcmdldCkgaWYgKGFyZyBpbnN0YW5jZW9mIFBvaW50KSByZXR1cm4gYXJnOwoKICBpZih0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJykgewogICAgcC54ID0gYXJnOwogICAgcC55ID0gYXJncy5zaGlmdCgpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcpOwogICAgcC55ID0gcGFyc2VGbG9hdChhcmdzLnNoaWZ0KCkpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnc3RyaW5nJykgewogICAgY29uc3QgbWF0Y2hlcyA9IFsuLi5hcmcubWF0Y2hBbGwoLyhbLStdP2QqLj9kKykoPzpbZUVdKFstK10/ZCspKT8vZyldOwoKICAgIHAueCA9IHBhcnNlRmxvYXQobWF0Y2hlc1swXSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KG1hdGNoZXNbMV0pOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbCAmJiAoYXJnLnggIT09IHVuZGVmaW5lZCB8fCBhcmcueSAhPT0gdW5kZWZpbmVkKSkgewogICAgcC54ID0gYXJnLng7CiAgICBwLnkgPSBhcmcueTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZyA9PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGwgJiYgYXJnLmxlbmd0aCA+IDAgJiYgeCAhPT0gdW5kZWZpbmVkICYmIHkgIT09IHVuZGVmaW5lZCkgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcuc2hpZnQoKSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KGFyZy5zaGlmdCgpKTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZ3NbMF0gPT09ICdudW1iZXInICYmIHR5cGVvZiBhcmdzWzFdID09PSAnbnVtYmVyJykgewogICAgcC54ID0gYXJnc1swXTsKICAgIHAueSA9IGFyZ3NbMV07CiAgICBhcmdzLnNoaWZ0KDIpOwogIH0gZWxzZSB7CiAgICBwLnggPSAwOwogICAgcC55ID0gMDsKICB9CiAgaWYocC54ID09PSB1bmRlZmluZWQpIHAueCA9IDA7CiAgaWYocC55ID09PSB1bmRlZmluZWQpIHAueSA9IDA7CiAgaWYoaXNOYU4ocC54KSkgcC54ID0gdW5kZWZpbmVkOwogIGlmKGlzTmFOKHAueSkpIHAueSA9IHVuZGVmaW5lZDsKCiAgaWYoIWlzTmV3KSB7CiAgICAvKiBpZihwLnByb3RvdHlwZSA9PSBPYmplY3QpIHAucHJvdG90eXBlID0gUG9pbnQucHJvdG90eXBlOwogICAgZWxzZSBPYmplY3QuYXNzaWduKHAsIFBvaW50LnByb3RvdHlwZSk7Ki8KICAgIHJldHVybiBwOwogIH0KfQoKUG9pbnQuZ2V0T3RoZXIgPSBhcmdzID0+IChjb25zb2xlLmRlYnVnKCdnZXRPdGhlcicsIC4uLmFyZ3MpLCB0eXBlb2YgYXJnc1swXSA9PSAnbnVtYmVyJyA/IFt7IHg6IGFyZ3NbMF0sIHk6IGFyZ3NbMV0gfV0gOiBhcmdzKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBvaW50LnByb3RvdHlwZSwgewogIFg6IHsKICAgIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMueDsKICAgIH0KICB9LAogIFk6IHsKICAgIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMueTsKICAgIH0KICB9Cn0pOwoKZGVmaW5lKFBvaW50LnByb3RvdHlwZSwgeyAgbW92ZSh4LCB5KSB7CiAgdGhpcy54ICs9IHg7CiAgdGhpcy55ICs9IHk7CiAgcmV0dXJuIHRoaXM7Cn0sCiAgbW92ZVRvKHgsIHkpIHsKICB0aGlzLnggPSB4OwogIHRoaXMueSA9IHk7CiAgcmV0dXJuIHRoaXM7Cn0sCiAgY2xlYXIoeCwgeSkgewogIHRoaXMueCA9IDA7CiAgdGhpcy55ID0gMDsKICByZXR1cm4gdGhpczsKfSwKICBzZXQoZm4pIHsKICBpZih0eXBlb2YgZm4gIT0gJ2Z1bmN0aW9uJykgewogICAgUG9pbnQuYXBwbHkodGhpcywgWy4uLmFyZ3VtZW50c10pOwogICAgcmV0dXJuIHRoaXM7CiAgfQogIHJldHVybiBmbih0aGlzLngsIHRoaXMueSk7Cn0sCiAgY2xvbmUoKSB7CiAgY29uc3QgY3RvciA9IHRoaXNbU3ltYm9sLnNwZWNpZXNdIHx8IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdOwoKICByZXR1cm4gbmV3IGN0b3IoeyB4OiB0aGlzLngsIHk6IHRoaXMueSB9KTsKfSwKICBzdW0oLi4uYXJncykgewogIGNvbnN0IHAgPSBuZXcgUG9pbnQoLi4uYXJncyk7CiAgbGV0IHIgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsIHRoaXMueSk7CiAgci54ICs9IHAueDsKICByLnkgKz0gcC55OwogIHJldHVybiByOwp9LAogIGFkZCguLi5hcmdzKSB7CiAgY29uc3Qgb3RoZXIgPSBuZXcgUG9pbnQoLi4uYXJncyk7CiAgdGhpcy54ICs9IG90aGVyLng7CiAgdGhpcy55ICs9IG90aGVyLnk7CiAgcmV0dXJuIHRoaXM7Cn0sCiAgZGlmZihhcmcpIHsKICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogIGxldCBmbiA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgICBsZXQgciA9IG5ldyBQb2ludCh4LCB5KTsKICAgIHJldHVybiByLnN1YihvdGhlcik7CiAgfTsKICBpZihhcmcpIHJldHVybiBmbihhcmcpOwogIHJldHVybiBmbjsKfSwKICBzdWIoLi4uYXJncykgewogIGNvbnN0IG90aGVyID0gbmV3IFBvaW50KC4uLmFyZ3MpOwogIHRoaXMueCAtPSBvdGhlci54OwogIHRoaXMueSAtPSBvdGhlci55OwogIHJldHVybiB0aGlzOwp9LAogIHByb2QoZikgewogIGNvbnN0IG8gPSBpc1BvaW50KGYpID8gZiA6IHsgeDogZiwgeTogZiB9OwogIHJldHVybiBuZXcgUG9pbnQodGhpcy54ICogby54LCB0aGlzLnkgKiBvLnkpOwp9LAogIG11bChmKSB7CiAgY29uc3QgbyA9IGlzUG9pbnQoZikgPyBmIDogeyB4OiBmLCB5OiBmIH07CiAgdGhpcy54ICo9IG8ueDsKICB0aGlzLnkgKj0gby55OwogIHJldHVybiB0aGlzOwp9LAogIHF1b3Qob3RoZXIpIHsKICBvdGhlciA9IGlzUG9pbnQob3RoZXIpID8gb3RoZXIgOiB7IHg6IG90aGVyLCB5OiBvdGhlciB9OwogIHJldHVybiBuZXcgUG9pbnQodGhpcy54IC8gb3RoZXIueCwgdGhpcy55IC8gb3RoZXIueSk7Cn0sCiAgZGl2KG90aGVyKSB7CiAgb3RoZXIgPSBpc1BvaW50KG90aGVyKSA/IG90aGVyIDogeyB4OiBvdGhlciwgeTogb3RoZXIgfTsKICB0aGlzLnggLz0gb3RoZXIueDsKICB0aGlzLnkgLz0gb3RoZXIueTsKICByZXR1cm4gdGhpczsKfSwKICBjb21wKCkgewogIHJldHVybiBuZXcgUG9pbnQoeyB4OiAtdGhpcy54LCB5OiAtdGhpcy55IH0pOwp9LAogIG5lZygpIHsKICB0aGlzLnggKj0gLTE7CiAgdGhpcy55ICo9IC0xOwogIHJldHVybiB0aGlzOwp9LAogIGRpc3RhbmNlU3F1YXJlZChvdGhlciA9IHsgeDogMCwgeTogMCB9KSB7CiAgcmV0dXJuIChvdGhlci55IC0gdGhpcy55KSAqIChvdGhlci55IC0gdGhpcy55KSArIChvdGhlci54IC0gdGhpcy54KSAqIChvdGhlci54IC0gdGhpcy54KTsKfSwKICBkaXN0YW5jZShvdGhlciA9IHsgeDogMCwgeTogMCB9KSB7CiAgcmV0dXJuIE1hdGguc3FydChQb2ludC5wcm90b3R5cGUuZGlzdGFuY2VTcXVhcmVkLmNhbGwodGhpcywgUG9pbnQob3RoZXIpKSk7Cn0sCiAgZXF1YWxzKG90aGVyKSB7CiAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICByZXR1cm4gK3ggPT0gK290aGVyLnggJiYgK3kgPT0gK290aGVyLnk7Cn0sCiAgcm91bmQocHJlY2lzaW9uID0gMC4wMDEsIGRpZ2l0cywgdHlwZSkgewogIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgZGlnaXRzID0gZGlnaXRzIHx8IHJvdW5kRGlnaXRzKHByZWNpc2lvbik7CiAgdHlwZSA9IHR5cGUgfHwgJ3JvdW5kJzsKICB0aGlzLnggPSByb3VuZFRvKHgsIHByZWNpc2lvbiwgZGlnaXRzLCB0eXBlKTsKICB0aGlzLnkgPSByb3VuZFRvKHksIHByZWNpc2lvbiwgZGlnaXRzLCB0eXBlKTsKICByZXR1cm4gdGhpczsKfSwKICBjZWlsKCkgewogIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgdGhpcy54ID0gTWF0aC5jZWlsKHgpOwogIHRoaXMueSA9IE1hdGguY2VpbCh5KTsKICByZXR1cm4gdGhpczsKfSwKICBmbG9vcigpIHsKICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogIHRoaXMueCA9IE1hdGguZmxvb3IoeCk7CiAgdGhpcy55ID0gTWF0aC5mbG9vcih5KTsKICByZXR1cm4gdGhpczsKfSwKCiAgZG90KG90aGVyKSB7CiAgcmV0dXJuIHRoaXMueCAqIG90aGVyLnggKyB0aGlzLnkgKiBvdGhlci55Owp9LAoKICB2YWx1ZXMoKSB7CiAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07Cn0sCiAgZnJvbUFuZ2xlKGFuZ2xlLCBkaXN0ID0gMS4wKSB7CiAgdGhpcy54ID0gTWF0aC5jb3MoYW5nbGUpICogZGlzdDsKICB0aGlzLnkgPSBNYXRoLnNpbihhbmdsZSkgKiBkaXN0OwogIHJldHVybiB0aGlzOwp9LAogIHRvQW5nbGUoZGVnID0gZmFsc2UpIHsKICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLngsIHRoaXMueSkgKiAoZGVnID8gMTgwIC8gTWF0aC5QSSA6IDEpOwp9LAogIGFuZ2xlKG90aGVyLCBkZWcgPSBmYWxzZSkgewogIG90aGVyID0gb3RoZXIgfHwgeyB4OiAwLCB5OiAwIH07CiAgcmV0dXJuIFBvaW50LnByb3RvdHlwZS5kaWZmLmNhbGwodGhpcywgb3RoZXIpLnRvQW5nbGUoZGVnKTsKfSwKICByb3RhdGUoYW5nbGUsIG9yaWdpbiA9IHsgeDogMCwgeTogMCB9KSB7CiAgdGhpcy54IC09IG9yaWdpbi54OwogIHRoaXMueSAtPSBvcmlnaW4ueTsKICBsZXQgYyA9IE1hdGguY29zKGFuZ2xlKSwKICAgIHMgPSBNYXRoLnNpbihhbmdsZSk7CiAgbGV0IHhuZXcgPSB0aGlzLnggKiBjIC0gdGhpcy55ICogczsKICBsZXQgeW5ldyA9IHRoaXMueCAqIHMgKyB0aGlzLnkgKiBjOwogIHRoaXMueCA9IHhuZXc7CiAgdGhpcy55ID0geW5ldzsKICByZXR1cm4gdGhpczsKfSwKICB2YWx1ZU9mKHNobCA9IDE2KSB7CiAgY29uc3QgeyB4LCB5IH0gPSB0aGlzOwoKICBpZihzaGwgPCAwKSByZXR1cm4geCAqICgxIDw8IE1hdGguYWJzKHNobCkpICsgeTsKCiAgcmV0dXJuIHggKyB5ICogKDEgPDwgc2hsKTsKfSwKICB0b1N0cmluZyhvcHRzID0ge30pIHsKICBjb25zdCB7IHByZWNpc2lvbiA9IDAuMDAxLCB1bml0ID0gJycsIHNlcGFyYXRvciA9ICcsJywgbGVmdCA9ICcnLCByaWdodCA9ICcnLCBwYWQgPSAwIH0gPSBvcHRzOwogIGxldCB4ID0gcm91bmRUbyh0aGlzLngsIHByZWNpc2lvbik7CiAgbGV0IHkgPSByb3VuZFRvKHRoaXMueSwgcHJlY2lzaW9uKTsKICBpZihwYWQgPiAwKSB7CiAgICB4ID0geCArICcnOwogICAgeSA9IHkgKyAnJzsKICAgIGlmKHlbMF0gIT0gJy0nKSB5ID0gJyAnICsgeTsKICAgIGlmKHhbMF0gIT0gJy0nKSB4ID0gJyAnICsgeDsKICB9CiAgLy9jb25zb2xlLmRlYnVnKCJ0b1N0cmluZyIsIHt4LHl9LCB7cGFkfSk7CiAgcmV0dXJuIGAke2xlZnR9JHsoeCArICcnKS5wYWRTdGFydChwYWQsICcgJyl9JHt1bml0fSR7c2VwYXJhdG9yfSR7KHkgKyAnJykucGFkRW5kKHBhZCwgJyAnKX0ke3VuaXR9JHtyaWdodH1gOwp9LAogIHRvU291cmNlKG9wdHMgPSB7fSkgewogIGNvbnN0IHsgYXNBcnJheSA9IGZhbHNlLCBwbGFpbk9iaiA9IGZhbHNlLCBwYWQgPSBhID0+IGEgLyphLnBhZFN0YXJ0KDQsICcgJykqLywgc2hvd05ldyA9IHRydWUgfSA9IG9wdHM7CiAgbGV0IHggPSBwYWQodGhpcy54ICsgJycpOwogIGxldCB5ID0gcGFkKHRoaXMueSArICcnKTsKICBsZXQgYyA9IHQgPT4gdDsKICBpZih0eXBlb2YgdGhpcyAhPSAnb2JqZWN0JyB8fCB0aGlzID09PSBudWxsKSByZXR1cm4gJyc7CiAgaWYoYXNBcnJheSkgcmV0dXJuIGBbJHt4fSwke3l9XWA7CiAgaWYocGxhaW5PYmopIHJldHVybiBge3g6JHt4fSx5OiR7eX19YDsKCiAgcmV0dXJuIGAke2Moc2hvd05ldyA/ICduZXcgJyA6ICcnLCAxLCAzMSl9JHtjKCdQb2ludCcsIDEsIDMzKX0ke2MoJygnLCAxLCAzNil9JHtjKHgsIDEsIDMyKX0ke2MoJywnLCAxLCAzNil9JHtjKHksIDEsIDMyKX0ke2MoJyknLCAxLCAzNil9YDsKfSwKCi8qUG9pbnQucHJvdG90eXBlLnRvU291cmNlID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuICd7eDonICsgdGhpcy54ICsgJyx5OicgKyB0aGlzLnkgKyAnfSc7Cn07Ki8KICB0b09iamVjdChwcm90byA9IFBvaW50LnByb3RvdHlwZSkgewogIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICBjb25zdCBvYmogPSB7IHgsIHkgfTsKICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqLCBwcm90byk7CiAgcmV0dXJuIG9iajsKfSwKICB0b0NTUyhwcmVjaXNpb24gPSAwLjAwMSwgZWRnZXMgPSBbJ2xlZnQnLCAndG9wJ10pIHsKICByZXR1cm4gewogICAgW2VkZ2VzWzBdXTogcm91bmRUbyh0aGlzLngsIHByZWNpc2lvbikgKyAncHgnLAogICAgW2VkZ2VzWzFdXTogcm91bmRUbyh0aGlzLnksIHByZWNpc2lvbikgKyAncHgnCiAgfTsKfSwKICB0b0ZpeGVkKGRpZ2l0cykgewogIHJldHVybiBuZXcgUG9pbnQoK3RoaXMueC50b0ZpeGVkKGRpZ2l0cyksICt0aGlzLnkudG9GaXhlZChkaWdpdHMpKTsKfSwKICBpc051bGwoKSB7CiAgcmV0dXJuIHRoaXMueCA9PSAwICYmIHRoaXMueSA9PSAwOwp9LAogIGluc2lkZShyZWN0KSB7CiAgcmV0dXJuIHRoaXMueCA+PSByZWN0LnggJiYgdGhpcy54IDwgcmVjdC54ICsgcmVjdC53aWR0aCAmJiB0aGlzLnkgPj0gcmVjdC55ICYmIHRoaXMueSA8IHJlY3QueSArIHJlY3QuaGVpZ2h0Owp9LAogIHRyYW5zZm9ybShtLCByb3VuZCA9IHRydWUpIHsKICBpZihpc09iamVjdChtKSAmJiB0eXBlb2YgbS50b01hdHJpeCA9PSAnZnVuY3Rpb24nKSBtID0gbS50b01hdHJpeCgpOwogIC8vaWYoaXNPYmplY3QobSkgJiYgdHlwZW9mIG0udHJhbnNmb3JtUG9pbnQgPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG0udHJhbnNmb3JtUG9pbnQodGhpcyk7CgogIGNvbnN0IHggPSBtWzBdICogdGhpcy54ICsgbVsxXSAqIHRoaXMueSArIG1bMl07CiAgY29uc3QgeSA9IG1bM10gKiB0aGlzLnggKyBtWzRdICogdGhpcy55ICsgbVs1XTsKCiAgdGhpcy54ID0geDsKICB0aGlzLnkgPSB5OwogIGlmKHJvdW5kKSBQb2ludC5wcm90b3R5cGUucm91bmQuY2FsbCh0aGlzLCAxZS0xMywgMTMpOwoKICByZXR1cm4gdGhpczsKfSwKICBzY2FsZVRvKG1pbm1heCkgewogIHJldHVybiBuZXcgUG9pbnQoewogICAgeDogKHRoaXMueCAtIG1pbm1heC54MSkgLyAobWlubWF4LngyIC0gbWlubWF4LngxKSwKICAgIHk6ICh0aGlzLnkgLSBtaW5tYXgueTEpIC8gKG1pbm1heC55MiAtIG1pbm1heC55MSkKICB9KTsKfSwKICBub3JtYWxpemUoKSB7CiAgbGV0IGQgPSBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbCh0aGlzKTsKICByZXR1cm4gUG9pbnQucHJvdG90eXBlLmRpdi5jYWxsKHRoaXMsIHsgeDogZCwgeTogZCB9KTsKfSwKICBub3JtYWwoKSB7CiAgbGV0IGQgPSBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbCh0aGlzKTsKICByZXR1cm4gbmV3IFBvaW50KHsgeDogdGhpcy54IC8gZCwgeTogdGhpcy55IC8gZCB9KTsKfSwKCgoKCn0pOwoKCgoKCmRlZmluZUdldHRlcihQb2ludC5wcm90b3R5cGUsIFN5bWJvbC5pdGVyYXRvciwgZnVuY3Rpb24oKSB7CiAgY29uc3QgeyB4LCB5IH0gPSB0aGlzOwogIGxldCBhID0gW3gsIHldOwogIHJldHVybiBhW1N5bWJvbC5pdGVyYXRvcl0uYmluZChhKTsKfSk7ClBvaW50LnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ1BvaW50JzsKClBvaW50LmZyb21TdHJpbmcgPSBzdHIgPT4gbmV3IFBvaW50KC4uLnN0ci5zcGxpdCgvW14tLjAtOV0rL2cpLm1hcChuID0+ICtuKSk7ClBvaW50Lm1vdmUgPSAocG9pbnQsIHgsIHkpID0+IFBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwocG9pbnQsIHgsIHkpOwpQb2ludC5hbmdsZSA9IChwb2ludCwgb3RoZXIsIGRlZyA9IGZhbHNlKSA9PiBQb2ludC5wcm90b3R5cGUuYW5nbGUuY2FsbChwb2ludCwgb3RoZXIsIGRlZyk7ClBvaW50Lmluc2lkZSA9IChwb2ludCwgcmVjdCkgPT4gUG9pbnQucHJvdG90eXBlLmluc2lkZS5jYWxsKHBvaW50LCByZWN0KTsKUG9pbnQuc3ViID0gKHBvaW50LCBvdGhlcikgPT4gUG9pbnQucHJvdG90eXBlLnN1Yi5jYWxsKHBvaW50LCBvdGhlcik7ClBvaW50LnByb2QgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLnByb2QuY2FsbChhLCBiKTsKUG9pbnQucXVvdCA9IChhLCBiKSA9PiBQb2ludC5wcm90b3R5cGUucXVvdC5jYWxsKGEsIGIpOwpQb2ludC5lcXVhbHMgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLmVxdWFscy5jYWxsKGEsIGIpOwpQb2ludC5yb3VuZCA9IChwb2ludCwgcHJlYywgZGlnaXRzLCB0eXBlKSA9PiBQb2ludC5wcm90b3R5cGUucm91bmQuY2FsbChwb2ludCwgcHJlYywgZGlnaXRzLCB0eXBlKTsKUG9pbnQuZnJvbUFuZ2xlID0gKGFuZ2xlLCBmKSA9PiBuZXcgUG9pbnQoKS5mcm9tQW5nbGUoYW5nbGUsIGYpOwoKZm9yKGxldCBuYW1lIG9mIFsKICAnY2xvbmUnLAogICdjb21wJywKICAnbmVnJywKICAnc2lkZXMnLAogICdkaW1lbnNpb24nLAogICd0b1N0cmluZycsCiAgLy8ndG9Tb3VyY2UnLAogICd0b0NTUycsCiAgJ3N1YicsCiAgJ2RpZmYnLAogICdhZGQnLAogICdzdW0nLAogICdkaXN0YW5jZScKXSkgewogIFBvaW50W25hbWVdID0gKHBvaW50LCAuLi5hcmdzKSA9PiBQb2ludC5wcm90b3R5cGVbbmFtZV0uY2FsbChQb2ludChwb2ludCksIC4uLmFyZ3MpOwp9ClBvaW50LmludGVycG9sYXRlID0gKHAxLCBwMiwgYSkgPT4gewogIGEgPSBjbGFtcCgwLCAxLCBhKTsKICByZXR1cm4gbmV3IFBvaW50KHAxLnggKiAoMS4wIC0gYSkgKyBwMi54ICogYSwgcDEueSAqICgxLjAgLSBhKSArIHAyLnkgKiBhKTsKfTsKClBvaW50LnRvU291cmNlID0gKHBvaW50LCB7IHNwYWNlID0gJyAnLCBwYWRkaW5nID0gJyAnLCBzZXBhcmF0b3IgPSAnLCcgfSkgPT4gYHske3BhZGRpbmd9eDoke3NwYWNlfSR7cG9pbnQueH0ke3NlcGFyYXRvcn15OiR7c3BhY2V9JHtwb2ludC55fSR7cGFkZGluZ319YDsKCmV4cG9ydCBjb25zdCBpc1BvaW50ID0gbyA9PgogIG8gJiYKICAoKG8ueCAhPT0gdW5kZWZpbmVkICYmIG8ueSAhPT0gdW5kZWZpbmVkKSB8fAogICAgKChvLmxlZnQgIT09IHVuZGVmaW5lZCB8fCBvLnJpZ2h0ICE9PSB1bmRlZmluZWQpICYmIChvLnRvcCAhPT0gdW5kZWZpbmVkIHx8IG8uYm90dG9tICE9PSB1bmRlZmluZWQpKSB8fAogICAgbyBpbnN0YW5jZW9mIFBvaW50IHx8CiAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YobykuY29uc3RydWN0b3IgPT09IFBvaW50KTsKClBvaW50LmlzUG9pbnQgPSBpc1BvaW50OwoKUG9pbnQucHJvdG90eXBlW2luc3BlY3RTeW1ib2xdID0gZnVuY3Rpb24oZGVwdGgsIG9wdGlvbnMpIHsKICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgcmV0dXJuIC8qT2JqZWN0LnNldFByb3RvdHlwZU9mKi8geyB4LCB5IH0gLyosIFBvaW50LnByb3RvdHlwZSovOwp9OwoKUG9pbnQuYmluZCA9IChvLCBrZXlzLCBnKSA9PiB7CiAga2V5cyA/Pz0gWyd4JywgJ3knXTsKICBvID8/PSBuZXcgUG9pbnQoKTsKICBnID8/PSBrID0+IHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQgPyAob1trXSA9IHZhbHVlKSA6IG9ba107CgogIGNvbnN0IHsgeCwgeSB9ID0gQXJyYXkuaXNBcnJheShrZXlzKSA/IGtleXMucmVkdWNlKChhY2MsIG5hbWUsIGkpID0+ICh7IC4uLmFjYywgW2tleXNbaV1dOiBuYW1lIH0pLCB7fSkgOiBrZXlzOwogIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoYmluZFByb3BlcnRpZXMoe30sIG8sIHsgeCwgeSB9KSwgUG9pbnQucHJvdG90eXBlKTsKfTsKCmV4cG9ydCBkZWZhdWx0IFBvaW50OwoKZGVmaW5lR2V0dGVyKFBvaW50LCBTeW1ib2wuc3BlY2llcywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHRoaXM7Cn0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVBvaW50ID0gaW1tdXRhYmxlQ2xhc3MoUG9pbnQpOwpkZWZpbmVHZXR0ZXIoSW1tdXRhYmxlUG9pbnQsIFN5bWJvbC5zcGVjaWVzLCAoKSA9PiBJbW11dGFibGVQb2ludCk7CgAAAAAAAAAAcykAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAbB4AAAAAAABsHgAAAAAAAAAAAAAAAPC/"
				],
				[
					98,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAL8fAAAAAAAAwB8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvx8AAAAAAAC/HwAAAAAAAAAAAAAAAPC/"
				],
				[
					99,
					2,
					"left_delete",
					null,
					"AgAAAL8fAAAAAAAAvx8AAAAAAAABAAAAIL4fAAAAAAAAvh8AAAAAAAABAAAAfQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAwB8AAAAAAADAHwAAAAAAAAAAAAAAAPC/"
				],
				[
					100,
					1,
					"insert",
					{
						"characters": "},"
					},
					"AgAAAL4fAAAAAAAAvx8AAAAAAAAAAAAAvx8AAAAAAADAHwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvh8AAAAAAAC+HwAAAAAAAAAAAAAAAPC/"
				],
				[
					101,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMAfAAAAAAAAwR8AAAAAAAAAAAAAwR8AAAAAAADDHwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAwB8AAAAAAADAHwAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"paste",
					null,
					"AQAAAMMfAAAAAAAAPSAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAwx8AAAAAAADDHwAAAAAAAAAAAAAAAPC/"
				],
				[
					107,
					1,
					"insert",
					{
						"characters": "[insp"
					},
					"BQAAAMMfAAAAAAAAxB8AAAAAAAAAAAAAxB8AAAAAAADFHwAAAAAAAAAAAADFHwAAAAAAAMYfAAAAAAAAAAAAAMYfAAAAAAAAxx8AAAAAAAAAAAAAxx8AAAAAAADIHwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAwx8AAAAAAADDHwAAAAAAAAAAAAAAAPC/"
				],
				[
					108,
					8,
					"right_delete",
					null,
					"CAAAAMgfAAAAAAAAyB8AAAAAAAABAAAAZsgfAAAAAAAAyB8AAAAAAAABAAAAdcgfAAAAAAAAyB8AAAAAAAABAAAAbsgfAAAAAAAAyB8AAAAAAAABAAAAY8gfAAAAAAAAyB8AAAAAAAABAAAAdMgfAAAAAAAAyB8AAAAAAAABAAAAacgfAAAAAAAAyB8AAAAAAAABAAAAb8gfAAAAAAAAyB8AAAAAAAABAAAAbg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAyB8AAAAAAADIHwAAAAAAAAAAAAAAAPC/"
				],
				[
					109,
					1,
					"insert",
					{
						"characters": "ect"
					},
					"AwAAAMgfAAAAAAAAyR8AAAAAAAAAAAAAyR8AAAAAAADKHwAAAAAAAAAAAADKHwAAAAAAAMsfAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAyB8AAAAAAADIHwAAAAAAAAAAAAAAAPC/"
				],
				[
					110,
					1,
					"insert_completion",
					{
						"completion": "inspectSymbol",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "inspectSymbol"
					},
					"AgAAAMQfAAAAAAAAxB8AAAAAAAAHAAAAaW5zcGVjdMQfAAAAAAAA0R8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAyx8AAAAAAADLHwAAAAAAAAAAAAAAAPC/"
				],
				[
					111,
					1,
					"insert",
					{
						"characters": "]"
					},
					"AQAAANEfAAAAAAAA0h8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0R8AAAAAAADRHwAAAAAAAAAAAAAAAPC/"
				],
				[
					113,
					1,
					"left_delete",
					null,
					"AQAAAEIgAAAAAAAAQiAAAAAAAAABAAAAOw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAQyAAAAAAAABDIAAAAAAAAAAAAAAAQGVA"
				],
				[
					117,
					1,
					"left_delete",
					null,
					"AQAAAEIgAAAAAAAAQiAAAAAAAAABAAAACg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAQyAAAAAAAABDIAAAAAAAAAAAAAAAACRA"
				],
				[
					128,
					1,
					"right_delete",
					null,
					"AQAAAC4nAAAAAAAALicAAAAAAACbAAAAUG9pbnQucHJvdG90eXBlW2luc3BlY3RTeW1ib2xdID0gZnVuY3Rpb24oZGVwdGgsIG9wdGlvbnMpIHsKICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgcmV0dXJuIC8qT2JqZWN0LnNldFByb3RvdHlwZU9mKi8geyB4LCB5IH0gLyosIFBvaW50LnByb3RvdHlwZSovOwp9Owo",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAALicAAAAAAADJJwAAAAAAAAAAAAAAAAAA"
				],
				[
					134,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABbKQAAaW1wb3J0IHsgYmluZFByb3BlcnRpZXMsIGNsYW1wLCBkZWZpbmVHZXR0ZXIsIGltbXV0YWJsZUNsYXNzLCBpbnNwZWN0U3ltYm9sLCBpc09iamVjdCwgcm91bmREaWdpdHMsIHJvdW5kVG8sIHRyeUNhdGNoIH0gZnJvbSAnLi4vbWlzYy5qcyc7Cgpjb25zdCBTeW1TcGVjaWVzID0gdHJ5Q2F0Y2goCiAgKCkgPT4gU3ltYm9sLAogIHN5bSA9PiBzeW0uc3BlY2llcwopOwoKY29uc3QgQ1RPUiA9IG9iaiA9PiB7CiAgaWYob2JqW1N5bVNwZWNpZXNdKSByZXR1cm4gb2JqW1N5bVNwZWNpZXNdOwogIGxldCBwID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7CiAgaWYocFtTeW1TcGVjaWVzXSkgcmV0dXJuIHBbU3ltU3BlY2llc107CiAgcmV0dXJuIHAuY29uc3RydWN0b3I7Cn07CgpleHBvcnQgZnVuY3Rpb24gUG9pbnQoLi4uYXJncykgewogIGxldCBpc05ldyA9IHRoaXMgaW5zdGFuY2VvZiBQb2ludDsKICBhcmdzID0gYXJnc1swXSBpbnN0YW5jZW9mIEFycmF5ID8gYXJncy5zaGlmdCgpIDogYXJnczsKICBsZXQgcCA9IGlzTmV3ID8gdGhpcyA6IG5ldyBQb2ludCguLi5hcmdzKTsKICBsZXQgYXJnID0gYXJncy5zaGlmdCgpOwoKICBpZighbmV3LnRhcmdldCkgaWYgKGFyZyBpbnN0YW5jZW9mIFBvaW50KSByZXR1cm4gYXJnOwoKICBpZih0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJykgewogICAgcC54ID0gYXJnOwogICAgcC55ID0gYXJncy5zaGlmdCgpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcpOwogICAgcC55ID0gcGFyc2VGbG9hdChhcmdzLnNoaWZ0KCkpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnc3RyaW5nJykgewogICAgY29uc3QgbWF0Y2hlcyA9IFsuLi5hcmcubWF0Y2hBbGwoLyhbLStdP2QqLj9kKykoPzpbZUVdKFstK10/ZCspKT8vZyldOwoKICAgIHAueCA9IHBhcnNlRmxvYXQobWF0Y2hlc1swXSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KG1hdGNoZXNbMV0pOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbCAmJiAoYXJnLnggIT09IHVuZGVmaW5lZCB8fCBhcmcueSAhPT0gdW5kZWZpbmVkKSkgewogICAgcC54ID0gYXJnLng7CiAgICBwLnkgPSBhcmcueTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZyA9PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGwgJiYgYXJnLmxlbmd0aCA+IDAgJiYgeCAhPT0gdW5kZWZpbmVkICYmIHkgIT09IHVuZGVmaW5lZCkgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcuc2hpZnQoKSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KGFyZy5zaGlmdCgpKTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZ3NbMF0gPT09ICdudW1iZXInICYmIHR5cGVvZiBhcmdzWzFdID09PSAnbnVtYmVyJykgewogICAgcC54ID0gYXJnc1swXTsKICAgIHAueSA9IGFyZ3NbMV07CiAgICBhcmdzLnNoaWZ0KDIpOwogIH0gZWxzZSB7CiAgICBwLnggPSAwOwogICAgcC55ID0gMDsKICB9CiAgaWYocC54ID09PSB1bmRlZmluZWQpIHAueCA9IDA7CiAgaWYocC55ID09PSB1bmRlZmluZWQpIHAueSA9IDA7CiAgaWYoaXNOYU4ocC54KSkgcC54ID0gdW5kZWZpbmVkOwogIGlmKGlzTmFOKHAueSkpIHAueSA9IHVuZGVmaW5lZDsKCiAgaWYoIWlzTmV3KSB7CiAgICAvKiBpZihwLnByb3RvdHlwZSA9PSBPYmplY3QpIHAucHJvdG90eXBlID0gUG9pbnQucHJvdG90eXBlOwogICAgZWxzZSBPYmplY3QuYXNzaWduKHAsIFBvaW50LnByb3RvdHlwZSk7Ki8KICAgIHJldHVybiBwOwogIH0KfQoKUG9pbnQuZ2V0T3RoZXIgPSBhcmdzID0+IChjb25zb2xlLmRlYnVnKCdnZXRPdGhlcicsIC4uLmFyZ3MpLCB0eXBlb2YgYXJnc1swXSA9PSAnbnVtYmVyJyA/IFt7IHg6IGFyZ3NbMF0sIHk6IGFyZ3NbMV0gfV0gOiBhcmdzKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBvaW50LnByb3RvdHlwZSwgewogIFg6IHsKICAgIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMueDsKICAgIH0KICB9LAogIFk6IHsKICAgIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMueTsKICAgIH0KICB9Cn0pOwoKZGVmaW5lKFBvaW50LnByb3RvdHlwZSwgewogIG1vdmUoeCwgeSkgewogICAgdGhpcy54ICs9IHg7CiAgICB0aGlzLnkgKz0geTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgbW92ZVRvKHgsIHkpIHsKICAgIHRoaXMueCA9IHg7CiAgICB0aGlzLnkgPSB5OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBjbGVhcih4LCB5KSB7CiAgICB0aGlzLnggPSAwOwogICAgdGhpcy55ID0gMDsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgc2V0KGZuKSB7CiAgICBpZih0eXBlb2YgZm4gIT0gJ2Z1bmN0aW9uJykgewogICAgICBQb2ludC5hcHBseSh0aGlzLCBbLi4uYXJndW1lbnRzXSk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgcmV0dXJuIGZuKHRoaXMueCwgdGhpcy55KTsKICB9LAogIGNsb25lKCkgewogICAgY29uc3QgY3RvciA9IHRoaXNbU3ltYm9sLnNwZWNpZXNdIHx8IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdOwoKICAgIHJldHVybiBuZXcgY3Rvcih7IHg6IHRoaXMueCwgeTogdGhpcy55IH0pOwogIH0sCiAgc3VtKC4uLmFyZ3MpIHsKICAgIGNvbnN0IHAgPSBuZXcgUG9pbnQoLi4uYXJncyk7CiAgICBsZXQgciA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCwgdGhpcy55KTsKICAgIHIueCArPSBwLng7CiAgICByLnkgKz0gcC55OwogICAgcmV0dXJuIHI7CiAgfSwKICBhZGQoLi4uYXJncykgewogICAgY29uc3Qgb3RoZXIgPSBuZXcgUG9pbnQoLi4uYXJncyk7CiAgICB0aGlzLnggKz0gb3RoZXIueDsKICAgIHRoaXMueSArPSBvdGhlci55OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBkaWZmKGFyZykgewogICAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICAgIGxldCBmbiA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgICAgIGxldCByID0gbmV3IFBvaW50KHgsIHkpOwogICAgICByZXR1cm4gci5zdWIob3RoZXIpOwogICAgfTsKICAgIGlmKGFyZykgcmV0dXJuIGZuKGFyZyk7CiAgICByZXR1cm4gZm47CiAgfSwKICBzdWIoLi4uYXJncykgewogICAgY29uc3Qgb3RoZXIgPSBuZXcgUG9pbnQoLi4uYXJncyk7CiAgICB0aGlzLnggLT0gb3RoZXIueDsKICAgIHRoaXMueSAtPSBvdGhlci55OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBwcm9kKGYpIHsKICAgIGNvbnN0IG8gPSBpc1BvaW50KGYpID8gZiA6IHsgeDogZiwgeTogZiB9OwogICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLnggKiBvLngsIHRoaXMueSAqIG8ueSk7CiAgfSwKICBtdWwoZikgewogICAgY29uc3QgbyA9IGlzUG9pbnQoZikgPyBmIDogeyB4OiBmLCB5OiBmIH07CiAgICB0aGlzLnggKj0gby54OwogICAgdGhpcy55ICo9IG8ueTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgcXVvdChvdGhlcikgewogICAgb3RoZXIgPSBpc1BvaW50KG90aGVyKSA/IG90aGVyIDogeyB4OiBvdGhlciwgeTogb3RoZXIgfTsKICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy54IC8gb3RoZXIueCwgdGhpcy55IC8gb3RoZXIueSk7CiAgfSwKICBkaXYob3RoZXIpIHsKICAgIG90aGVyID0gaXNQb2ludChvdGhlcikgPyBvdGhlciA6IHsgeDogb3RoZXIsIHk6IG90aGVyIH07CiAgICB0aGlzLnggLz0gb3RoZXIueDsKICAgIHRoaXMueSAvPSBvdGhlci55OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBjb21wKCkgewogICAgcmV0dXJuIG5ldyBQb2ludCh7IHg6IC10aGlzLngsIHk6IC10aGlzLnkgfSk7CiAgfSwKICBuZWcoKSB7CiAgICB0aGlzLnggKj0gLTE7CiAgICB0aGlzLnkgKj0gLTE7CiAgICByZXR1cm4gdGhpczsKICB9LAogIGRpc3RhbmNlU3F1YXJlZChvdGhlciA9IHsgeDogMCwgeTogMCB9KSB7CiAgICByZXR1cm4gKG90aGVyLnkgLSB0aGlzLnkpICogKG90aGVyLnkgLSB0aGlzLnkpICsgKG90aGVyLnggLSB0aGlzLngpICogKG90aGVyLnggLSB0aGlzLngpOwogIH0sCiAgZGlzdGFuY2Uob3RoZXIgPSB7IHg6IDAsIHk6IDAgfSkgewogICAgcmV0dXJuIE1hdGguc3FydChQb2ludC5wcm90b3R5cGUuZGlzdGFuY2VTcXVhcmVkLmNhbGwodGhpcywgUG9pbnQob3RoZXIpKSk7CiAgfSwKICBlcXVhbHMob3RoZXIpIHsKICAgIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgICByZXR1cm4gK3ggPT0gK290aGVyLnggJiYgK3kgPT0gK290aGVyLnk7CiAgfSwKICByb3VuZChwcmVjaXNpb24gPSAwLjAwMSwgZGlnaXRzLCB0eXBlKSB7CiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogICAgZGlnaXRzID0gZGlnaXRzIHx8IHJvdW5kRGlnaXRzKHByZWNpc2lvbik7CiAgICB0eXBlID0gdHlwZSB8fCAncm91bmQnOwogICAgdGhpcy54ID0gcm91bmRUbyh4LCBwcmVjaXNpb24sIGRpZ2l0cywgdHlwZSk7CiAgICB0aGlzLnkgPSByb3VuZFRvKHksIHByZWNpc2lvbiwgZGlnaXRzLCB0eXBlKTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgY2VpbCgpIHsKICAgIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgICB0aGlzLnggPSBNYXRoLmNlaWwoeCk7CiAgICB0aGlzLnkgPSBNYXRoLmNlaWwoeSk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIGZsb29yKCkgewogICAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICAgIHRoaXMueCA9IE1hdGguZmxvb3IoeCk7CiAgICB0aGlzLnkgPSBNYXRoLmZsb29yKHkpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgZG90KG90aGVyKSB7CiAgICByZXR1cm4gdGhpcy54ICogb3RoZXIueCArIHRoaXMueSAqIG90aGVyLnk7CiAgfSwKCiAgdmFsdWVzKCkgewogICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07CiAgfSwKICBmcm9tQW5nbGUoYW5nbGUsIGRpc3QgPSAxLjApIHsKICAgIHRoaXMueCA9IE1hdGguY29zKGFuZ2xlKSAqIGRpc3Q7CiAgICB0aGlzLnkgPSBNYXRoLnNpbihhbmdsZSkgKiBkaXN0OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICB0b0FuZ2xlKGRlZyA9IGZhbHNlKSB7CiAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLngsIHRoaXMueSkgKiAoZGVnID8gMTgwIC8gTWF0aC5QSSA6IDEpOwogIH0sCiAgYW5nbGUob3RoZXIsIGRlZyA9IGZhbHNlKSB7CiAgICBvdGhlciA9IG90aGVyIHx8IHsgeDogMCwgeTogMCB9OwogICAgcmV0dXJuIFBvaW50LnByb3RvdHlwZS5kaWZmLmNhbGwodGhpcywgb3RoZXIpLnRvQW5nbGUoZGVnKTsKICB9LAogIHJvdGF0ZShhbmdsZSwgb3JpZ2luID0geyB4OiAwLCB5OiAwIH0pIHsKICAgIHRoaXMueCAtPSBvcmlnaW4ueDsKICAgIHRoaXMueSAtPSBvcmlnaW4ueTsKICAgIGxldCBjID0gTWF0aC5jb3MoYW5nbGUpLAogICAgICBzID0gTWF0aC5zaW4oYW5nbGUpOwogICAgbGV0IHhuZXcgPSB0aGlzLnggKiBjIC0gdGhpcy55ICogczsKICAgIGxldCB5bmV3ID0gdGhpcy54ICogcyArIHRoaXMueSAqIGM7CiAgICB0aGlzLnggPSB4bmV3OwogICAgdGhpcy55ID0geW5ldzsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgdmFsdWVPZihzaGwgPSAxNikgewogICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzOwoKICAgIGlmKHNobCA8IDApIHJldHVybiB4ICogKDEgPDwgTWF0aC5hYnMoc2hsKSkgKyB5OwoKICAgIHJldHVybiB4ICsgeSAqICgxIDw8IHNobCk7CiAgfSwKICB0b1N0cmluZyhvcHRzID0ge30pIHsKICAgIGNvbnN0IHsgcHJlY2lzaW9uID0gMC4wMDEsIHVuaXQgPSAnJywgc2VwYXJhdG9yID0gJywnLCBsZWZ0ID0gJycsIHJpZ2h0ID0gJycsIHBhZCA9IDAgfSA9IG9wdHM7CiAgICBsZXQgeCA9IHJvdW5kVG8odGhpcy54LCBwcmVjaXNpb24pOwogICAgbGV0IHkgPSByb3VuZFRvKHRoaXMueSwgcHJlY2lzaW9uKTsKICAgIGlmKHBhZCA+IDApIHsKICAgICAgeCA9IHggKyAnJzsKICAgICAgeSA9IHkgKyAnJzsKICAgICAgaWYoeVswXSAhPSAnLScpIHkgPSAnICcgKyB5OwogICAgICBpZih4WzBdICE9ICctJykgeCA9ICcgJyArIHg7CiAgICB9CiAgICAvL2NvbnNvbGUuZGVidWcoInRvU3RyaW5nIiwge3gseX0sIHtwYWR9KTsKICAgIHJldHVybiBgJHtsZWZ0fSR7KHggKyAnJykucGFkU3RhcnQocGFkLCAnICcpfSR7dW5pdH0ke3NlcGFyYXRvcn0keyh5ICsgJycpLnBhZEVuZChwYWQsICcgJyl9JHt1bml0fSR7cmlnaHR9YDsKICB9LAogIHRvU291cmNlKG9wdHMgPSB7fSkgewogICAgY29uc3QgeyBhc0FycmF5ID0gZmFsc2UsIHBsYWluT2JqID0gZmFsc2UsIHBhZCA9IGEgPT4gYSAvKmEucGFkU3RhcnQoNCwgJyAnKSovLCBzaG93TmV3ID0gdHJ1ZSB9ID0gb3B0czsKICAgIGxldCB4ID0gcGFkKHRoaXMueCArICcnKTsKICAgIGxldCB5ID0gcGFkKHRoaXMueSArICcnKTsKICAgIGxldCBjID0gdCA9PiB0OwogICAgaWYodHlwZW9mIHRoaXMgIT0gJ29iamVjdCcgfHwgdGhpcyA9PT0gbnVsbCkgcmV0dXJuICcnOwogICAgaWYoYXNBcnJheSkgcmV0dXJuIGBbJHt4fSwke3l9XWA7CiAgICBpZihwbGFpbk9iaikgcmV0dXJuIGB7eDoke3h9LHk6JHt5fX1gOwoKICAgIHJldHVybiBgJHtjKHNob3dOZXcgPyAnbmV3ICcgOiAnJywgMSwgMzEpfSR7YygnUG9pbnQnLCAxLCAzMyl9JHtjKCcoJywgMSwgMzYpfSR7Yyh4LCAxLCAzMil9JHtjKCcsJywgMSwgMzYpfSR7Yyh5LCAxLCAzMil9JHtjKCcpJywgMSwgMzYpfWA7CiAgfSwKCiAgLypQb2ludC5wcm90b3R5cGUudG9Tb3VyY2UgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gJ3t4OicgKyB0aGlzLnggKyAnLHk6JyArIHRoaXMueSArICd9JzsKfTsqLwogIHRvT2JqZWN0KHByb3RvID0gUG9pbnQucHJvdG90eXBlKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgICBjb25zdCBvYmogPSB7IHgsIHkgfTsKICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIHByb3RvKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICB0b0NTUyhwcmVjaXNpb24gPSAwLjAwMSwgZWRnZXMgPSBbJ2xlZnQnLCAndG9wJ10pIHsKICAgIHJldHVybiB7CiAgICAgIFtlZGdlc1swXV06IHJvdW5kVG8odGhpcy54LCBwcmVjaXNpb24pICsgJ3B4JywKICAgICAgW2VkZ2VzWzFdXTogcm91bmRUbyh0aGlzLnksIHByZWNpc2lvbikgKyAncHgnCiAgICB9OwogIH0sCiAgdG9GaXhlZChkaWdpdHMpIHsKICAgIHJldHVybiBuZXcgUG9pbnQoK3RoaXMueC50b0ZpeGVkKGRpZ2l0cyksICt0aGlzLnkudG9GaXhlZChkaWdpdHMpKTsKICB9LAogIGlzTnVsbCgpIHsKICAgIHJldHVybiB0aGlzLnggPT0gMCAmJiB0aGlzLnkgPT0gMDsKICB9LAogIGluc2lkZShyZWN0KSB7CiAgICByZXR1cm4gdGhpcy54ID49IHJlY3QueCAmJiB0aGlzLnggPCByZWN0LnggKyByZWN0LndpZHRoICYmIHRoaXMueSA+PSByZWN0LnkgJiYgdGhpcy55IDwgcmVjdC55ICsgcmVjdC5oZWlnaHQ7CiAgfSwKICB0cmFuc2Zvcm0obSwgcm91bmQgPSB0cnVlKSB7CiAgICBpZihpc09iamVjdChtKSAmJiB0eXBlb2YgbS50b01hdHJpeCA9PSAnZnVuY3Rpb24nKSBtID0gbS50b01hdHJpeCgpOwogICAgLy9pZihpc09iamVjdChtKSAmJiB0eXBlb2YgbS50cmFuc2Zvcm1Qb2ludCA9PSAnZnVuY3Rpb24nKSByZXR1cm4gbS50cmFuc2Zvcm1Qb2ludCh0aGlzKTsKCiAgICBjb25zdCB4ID0gbVswXSAqIHRoaXMueCArIG1bMV0gKiB0aGlzLnkgKyBtWzJdOwogICAgY29uc3QgeSA9IG1bM10gKiB0aGlzLnggKyBtWzRdICogdGhpcy55ICsgbVs1XTsKCiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICAgIGlmKHJvdW5kKSBQb2ludC5wcm90b3R5cGUucm91bmQuY2FsbCh0aGlzLCAxZS0xMywgMTMpOwoKICAgIHJldHVybiB0aGlzOwogIH0sCiAgc2NhbGVUbyhtaW5tYXgpIHsKICAgIHJldHVybiBuZXcgUG9pbnQoewogICAgICB4OiAodGhpcy54IC0gbWlubWF4LngxKSAvIChtaW5tYXgueDIgLSBtaW5tYXgueDEpLAogICAgICB5OiAodGhpcy55IC0gbWlubWF4LnkxKSAvIChtaW5tYXgueTIgLSBtaW5tYXgueTEpCiAgICB9KTsKICB9LAogIG5vcm1hbGl6ZSgpIHsKICAgIGxldCBkID0gUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlLmNhbGwodGhpcyk7CiAgICByZXR1cm4gUG9pbnQucHJvdG90eXBlLmRpdi5jYWxsKHRoaXMsIHsgeDogZCwgeTogZCB9KTsKICB9LAogIG5vcm1hbCgpIHsKICAgIGxldCBkID0gUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlLmNhbGwodGhpcyk7CiAgICByZXR1cm4gbmV3IFBvaW50KHsgeDogdGhpcy54IC8gZCwgeTogdGhpcy55IC8gZCB9KTsKICB9LAogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0aW9ucykgewogIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICByZXR1cm4gLypPYmplY3Quc2V0UHJvdG90eXBlT2YqLyB7IHgsIHkgfSAvKiwgUG9pbnQucHJvdG90eXBlKi87Cn0KfSk7CgpkZWZpbmVHZXR0ZXIoUG9pbnQucHJvdG90eXBlLCBTeW1ib2wuaXRlcmF0b3IsIGZ1bmN0aW9uKCkgewogIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICBsZXQgYSA9IFt4LCB5XTsKICByZXR1cm4gYVtTeW1ib2wuaXRlcmF0b3JdLmJpbmQoYSk7Cn0pOwpQb2ludC5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdQb2ludCc7CgpQb2ludC5mcm9tU3RyaW5nID0gc3RyID0+IG5ldyBQb2ludCguLi5zdHIuc3BsaXQoL1teLS4wLTldKy9nKS5tYXAobiA9PiArbikpOwpQb2ludC5tb3ZlID0gKHBvaW50LCB4LCB5KSA9PiBQb2ludC5wcm90b3R5cGUubW92ZS5jYWxsKHBvaW50LCB4LCB5KTsKUG9pbnQuYW5nbGUgPSAocG9pbnQsIG90aGVyLCBkZWcgPSBmYWxzZSkgPT4gUG9pbnQucHJvdG90eXBlLmFuZ2xlLmNhbGwocG9pbnQsIG90aGVyLCBkZWcpOwpQb2ludC5pbnNpZGUgPSAocG9pbnQsIHJlY3QpID0+IFBvaW50LnByb3RvdHlwZS5pbnNpZGUuY2FsbChwb2ludCwgcmVjdCk7ClBvaW50LnN1YiA9IChwb2ludCwgb3RoZXIpID0+IFBvaW50LnByb3RvdHlwZS5zdWIuY2FsbChwb2ludCwgb3RoZXIpOwpQb2ludC5wcm9kID0gKGEsIGIpID0+IFBvaW50LnByb3RvdHlwZS5wcm9kLmNhbGwoYSwgYik7ClBvaW50LnF1b3QgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLnF1b3QuY2FsbChhLCBiKTsKUG9pbnQuZXF1YWxzID0gKGEsIGIpID0+IFBvaW50LnByb3RvdHlwZS5lcXVhbHMuY2FsbChhLCBiKTsKUG9pbnQucm91bmQgPSAocG9pbnQsIHByZWMsIGRpZ2l0cywgdHlwZSkgPT4gUG9pbnQucHJvdG90eXBlLnJvdW5kLmNhbGwocG9pbnQsIHByZWMsIGRpZ2l0cywgdHlwZSk7ClBvaW50LmZyb21BbmdsZSA9IChhbmdsZSwgZikgPT4gbmV3IFBvaW50KCkuZnJvbUFuZ2xlKGFuZ2xlLCBmKTsKCmZvcihsZXQgbmFtZSBvZiBbCiAgJ2Nsb25lJywKICAnY29tcCcsCiAgJ25lZycsCiAgJ3NpZGVzJywKICAnZGltZW5zaW9uJywKICAndG9TdHJpbmcnLAogIC8vJ3RvU291cmNlJywKICAndG9DU1MnLAogICdzdWInLAogICdkaWZmJywKICAnYWRkJywKICAnc3VtJywKICAnZGlzdGFuY2UnCl0pIHsKICBQb2ludFtuYW1lXSA9IChwb2ludCwgLi4uYXJncykgPT4gUG9pbnQucHJvdG90eXBlW25hbWVdLmNhbGwoUG9pbnQocG9pbnQpLCAuLi5hcmdzKTsKfQpQb2ludC5pbnRlcnBvbGF0ZSA9IChwMSwgcDIsIGEpID0+IHsKICBhID0gY2xhbXAoMCwgMSwgYSk7CiAgcmV0dXJuIG5ldyBQb2ludChwMS54ICogKDEuMCAtIGEpICsgcDIueCAqIGEsIHAxLnkgKiAoMS4wIC0gYSkgKyBwMi55ICogYSk7Cn07CgpQb2ludC50b1NvdXJjZSA9IChwb2ludCwgeyBzcGFjZSA9ICcgJywgcGFkZGluZyA9ICcgJywgc2VwYXJhdG9yID0gJywnIH0pID0+IGB7JHtwYWRkaW5nfXg6JHtzcGFjZX0ke3BvaW50Lnh9JHtzZXBhcmF0b3J9eToke3NwYWNlfSR7cG9pbnQueX0ke3BhZGRpbmd9fWA7CgpleHBvcnQgY29uc3QgaXNQb2ludCA9IG8gPT4KICBvICYmCiAgKChvLnggIT09IHVuZGVmaW5lZCAmJiBvLnkgIT09IHVuZGVmaW5lZCkgfHwKICAgICgoby5sZWZ0ICE9PSB1bmRlZmluZWQgfHwgby5yaWdodCAhPT0gdW5kZWZpbmVkKSAmJiAoby50b3AgIT09IHVuZGVmaW5lZCB8fCBvLmJvdHRvbSAhPT0gdW5kZWZpbmVkKSkgfHwKICAgIG8gaW5zdGFuY2VvZiBQb2ludCB8fAogICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pLmNvbnN0cnVjdG9yID09PSBQb2ludCk7CgpQb2ludC5pc1BvaW50ID0gaXNQb2ludDsKCgpQb2ludC5iaW5kID0gKG8sIGtleXMsIGcpID0+IHsKICBrZXlzID8/PSBbJ3gnLCAneSddOwogIG8gPz89IG5ldyBQb2ludCgpOwogIGcgPz89IGsgPT4gdmFsdWUgPT4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IChvW2tdID0gdmFsdWUpIDogb1trXTsKCiAgY29uc3QgeyB4LCB5IH0gPSBBcnJheS5pc0FycmF5KGtleXMpID8ga2V5cy5yZWR1Y2UoKGFjYywgbmFtZSwgaSkgPT4gKHsgLi4uYWNjLCBba2V5c1tpXV06IG5hbWUgfSksIHt9KSA6IGtleXM7CiAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihiaW5kUHJvcGVydGllcyh7fSwgbywgeyB4LCB5IH0pLCBQb2ludC5wcm90b3R5cGUpOwp9OwoKZXhwb3J0IGRlZmF1bHQgUG9pbnQ7CgpkZWZpbmVHZXR0ZXIoUG9pbnQsIFN5bWJvbC5zcGVjaWVzLCBmdW5jdGlvbigpIHsKICByZXR1cm4gdGhpczsKfSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlUG9pbnQgPSBpbW11dGFibGVDbGFzcyhQb2ludCk7CmRlZmluZUdldHRlcihJbW11dGFibGVQb2ludCwgU3ltYm9sLnNwZWNpZXMsICgpID0+IEltbXV0YWJsZVBvaW50KTsKAAAAAAAAAABgKQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAWykAAAAAAABbKQAAAAAAAAAAAAAAAAAA"
				],
				[
					144,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAN0gAAAAAAAA3iAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA3SAAAAAAAADdIAAAAAAAAAAAAAAAAPC/"
				],
				[
					169,
					1,
					"cut",
					null,
					"AQAAAO8gAAAAAAAA7yAAAAAAAAASAAAAU3ltYm9sLnRvU3RyaW5nVGFn",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA7yAAAAAAAAABIQAAAAAAAAAAAAAAAPC/"
				],
				[
					170,
					1,
					"paste",
					null,
					"AQAAAO8gAAAAAAAAASEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA7yAAAAAAAADvIAAAAAAAAAAAAAAAAPC/"
				],
				[
					173,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAEggAAAAAAAASSAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAASCAAAAAAAABIIAAAAAAAAAAAAAAAAPC/"
				],
				[
					174,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAEkgAAAAAAAASiAAAAAAAAAAAAAASiAAAAAAAABMIAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAASSAAAAAAAABJIAAAAAAAAAAAAAAAAPC/"
				],
				[
					175,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAEwgAAAAAAAATiAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAATCAAAAAAAABMIAAAAAAAAAAAAAAAAPC/"
				],
				[
					176,
					1,
					"paste",
					null,
					"AQAAAE0gAAAAAAAAXyAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAATSAAAAAAAABNIAAAAAAAAAAAAAAAAPC/"
				],
				[
					178,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAGAgAAAAAAAAYSAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAYCAAAAAAAABgIAAAAAAAAAAAAAAAAPC/"
				],
				[
					179,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGEgAAAAAAAAYiAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAYSAAAAAAAABhIAAAAAAAAAAAAAAAAPC/"
				],
				[
					180,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAGIgAAAAAAAAZCAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAYiAAAAAAAABiIAAAAAAAAAAAAAAAAPC/"
				],
				[
					181,
					1,
					"insert",
					{
						"characters": "Pointr"
					},
					"BgAAAGMgAAAAAAAAZCAAAAAAAAAAAAAAZCAAAAAAAABlIAAAAAAAAAAAAABlIAAAAAAAAGYgAAAAAAAAAAAAAGYgAAAAAAAAZyAAAAAAAAAAAAAAZyAAAAAAAABoIAAAAAAAAAAAAABoIAAAAAAAAGkgAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAYyAAAAAAAABjIAAAAAAAAAAAAAAAAPC/"
				],
				[
					183,
					2,
					"left_delete",
					null,
					"AgAAAGkgAAAAAAAAaSAAAAAAAAABAAAAJ2ggAAAAAAAAaCAAAAAAAAABAAAAcg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAaiAAAAAAAABqIAAAAAAAAAAAAAAAAPC/"
				],
				[
					184,
					1,
					"insert",
					{
						"characters": "'"
					},
					"AQAAAGggAAAAAAAAaSAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAaCAAAAAAAABoIAAAAAAAAAAAAAAAAPC/"
				],
				[
					190,
					1,
					"cut",
					null,
					"AQAAAAAhAAAAAAAAACEAAAAAAAAwAAAAUG9pbnQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnUG9pbnQnOwoK",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAACEAAAAAAAAwIQAAAAAAAAAAAAAAAAAA"
				],
				[
					274,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAP8HAAAAAAAAAQgAAAAAAAAAAAAAbAcAAAAAAABuBwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA/wcAAAAAAABsBwAAAAAAAAAAAAAAAAAA"
				],
				[
					289,
					16,
					"right_delete",
					null,
					"EAAAALAZAAAAAAAAsBkAAAAAAAABAAAAULAZAAAAAAAAsBkAAAAAAAABAAAAb7AZAAAAAAAAsBkAAAAAAAABAAAAabAZAAAAAAAAsBkAAAAAAAABAAAAbrAZAAAAAAAAsBkAAAAAAAABAAAAdLAZAAAAAAAAsBkAAAAAAAABAAAALrAZAAAAAAAAsBkAAAAAAAABAAAAcLAZAAAAAAAAsBkAAAAAAAABAAAAcrAZAAAAAAAAsBkAAAAAAAABAAAAb7AZAAAAAAAAsBkAAAAAAAABAAAAdLAZAAAAAAAAsBkAAAAAAAABAAAAb7AZAAAAAAAAsBkAAAAAAAABAAAAdLAZAAAAAAAAsBkAAAAAAAABAAAAebAZAAAAAAAAsBkAAAAAAAABAAAAcLAZAAAAAAAAsBkAAAAAAAABAAAAZbAZAAAAAAAAsBkAAAAAAAABAAAALg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAsBkAAAAAAACwGQAAAAAAAAAAAAAAAPC/"
				],
				[
					291,
					9,
					"right_delete",
					null,
					"CQAAALoZAAAAAAAAuhkAAAAAAAABAAAAILoZAAAAAAAAuhkAAAAAAAABAAAAZroZAAAAAAAAuhkAAAAAAAABAAAAdboZAAAAAAAAuhkAAAAAAAABAAAAbroZAAAAAAAAuhkAAAAAAAABAAAAY7oZAAAAAAAAuhkAAAAAAAABAAAAdLoZAAAAAAAAuhkAAAAAAAABAAAAaboZAAAAAAAAuhkAAAAAAAABAAAAb7oZAAAAAAAAuhkAAAAAAAABAAAAbg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAuhkAAAAAAAC6GQAAAAAAAAAAAAAAAPC/"
				],
				[
					292,
					2,
					"left_delete",
					null,
					"AgAAALkZAAAAAAAAuRkAAAAAAAABAAAAPbgZAAAAAAAAuBkAAAAAAAABAAAAIA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAuhkAAAAAAAC6GQAAAAAAAAAAAAAAAPC/"
				],
				[
					294,
					1,
					"left_delete",
					null,
					"AQAAAKoZAAAAAAAAqhkAAAAAAAABAAAACg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAqxkAAAAAAACrGQAAAAAAAAAAAAAAAF5A"
				],
				[
					297,
					1,
					"left_delete",
					null,
					"AQAAAO0ZAAAAAAAA7RkAAAAAAAABAAAAOw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA7hkAAAAAAADuGQAAAAAAAAAAAAAAAPC/"
				],
				[
					298,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAO0ZAAAAAAAA7hkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA7RkAAAAAAADtGQAAAAAAAAAAAAAAAPC/"
				],
				[
					303,
					1,
					"cut",
					null,
					"AQAAAK0ZAAAAAAAArRkAAAAAAABDAAAALyp0b1NvdXJjZSgpIHsKICByZXR1cm4gJ3t4OicgKyB0aGlzLnggKyAnLHk6JyArIHRoaXMueSArICd9JzsKfSwqLw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAArRkAAAAAAADwGQAAAAAAAAAAAAAAAPC/"
				],
				[
					308,
					1,
					"paste",
					null,
					"AQAAAGgfAAAAAAAAqx8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAaB8AAAAAAABoHwAAAAAAAAAAAAAAADRA"
				],
				[
					313,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAKsfAAAAAAAArB8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAqx8AAAAAAACrHwAAAAAAAAAAAAAAAPC/"
				],
				[
					316,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA7KQAAaW1wb3J0IHsgYmluZFByb3BlcnRpZXMsIGNsYW1wLCBkZWZpbmVHZXR0ZXIsIGltbXV0YWJsZUNsYXNzLCBpbnNwZWN0U3ltYm9sLCBpc09iamVjdCwgcm91bmREaWdpdHMsIHJvdW5kVG8sIHRyeUNhdGNoIH0gZnJvbSAnLi4vbWlzYy5qcyc7Cgpjb25zdCBTeW1TcGVjaWVzID0gdHJ5Q2F0Y2goCiAgKCkgPT4gU3ltYm9sLAogIHN5bSA9PiBzeW0uc3BlY2llcwopOwoKY29uc3QgQ1RPUiA9IG9iaiA9PiB7CiAgaWYob2JqW1N5bVNwZWNpZXNdKSByZXR1cm4gb2JqW1N5bVNwZWNpZXNdOwogIGxldCBwID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7CiAgaWYocFtTeW1TcGVjaWVzXSkgcmV0dXJuIHBbU3ltU3BlY2llc107CiAgcmV0dXJuIHAuY29uc3RydWN0b3I7Cn07CgpleHBvcnQgZnVuY3Rpb24gUG9pbnQoLi4uYXJncykgewogIGxldCBpc05ldyA9IHRoaXMgaW5zdGFuY2VvZiBQb2ludDsKICBhcmdzID0gYXJnc1swXSBpbnN0YW5jZW9mIEFycmF5ID8gYXJncy5zaGlmdCgpIDogYXJnczsKICBsZXQgcCA9IGlzTmV3ID8gdGhpcyA6IG5ldyBQb2ludCguLi5hcmdzKTsKICBsZXQgYXJnID0gYXJncy5zaGlmdCgpOwoKICBpZighbmV3LnRhcmdldCkgaWYgKGFyZyBpbnN0YW5jZW9mIFBvaW50KSByZXR1cm4gYXJnOwoKICBpZih0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJykgewogICAgcC54ID0gYXJnOwogICAgcC55ID0gYXJncy5zaGlmdCgpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcpOwogICAgcC55ID0gcGFyc2VGbG9hdChhcmdzLnNoaWZ0KCkpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnc3RyaW5nJykgewogICAgY29uc3QgbWF0Y2hlcyA9IFsuLi5hcmcubWF0Y2hBbGwoLyhbLStdP2QqLj9kKykoPzpbZUVdKFstK10/ZCspKT8vZyldOwoKICAgIHAueCA9IHBhcnNlRmxvYXQobWF0Y2hlc1swXSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KG1hdGNoZXNbMV0pOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbCAmJiAoYXJnLnggIT09IHVuZGVmaW5lZCB8fCBhcmcueSAhPT0gdW5kZWZpbmVkKSkgewogICAgcC54ID0gYXJnLng7CiAgICBwLnkgPSBhcmcueTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZyA9PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGwgJiYgYXJnLmxlbmd0aCA+IDAgJiYgeCAhPT0gdW5kZWZpbmVkICYmIHkgIT09IHVuZGVmaW5lZCkgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcuc2hpZnQoKSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KGFyZy5zaGlmdCgpKTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZ3NbMF0gPT09ICdudW1iZXInICYmIHR5cGVvZiBhcmdzWzFdID09PSAnbnVtYmVyJykgewogICAgcC54ID0gYXJnc1swXTsKICAgIHAueSA9IGFyZ3NbMV07CiAgICBhcmdzLnNoaWZ0KDIpOwogIH0gZWxzZSB7CiAgICBwLnggPSAwOwogICAgcC55ID0gMDsKICB9CiAgaWYocC54ID09PSB1bmRlZmluZWQpIHAueCA9IDA7CiAgaWYocC55ID09PSB1bmRlZmluZWQpIHAueSA9IDA7CiAgaWYoaXNOYU4ocC54KSkgcC54ID0gdW5kZWZpbmVkOwogIGlmKGlzTmFOKHAueSkpIHAueSA9IHVuZGVmaW5lZDsKCiAgaWYoIWlzTmV3KSB7CiAgICAvKiBpZihwLnByb3RvdHlwZSA9PSBPYmplY3QpIHAucHJvdG90eXBlID0gUG9pbnQucHJvdG90eXBlOwogICAgZWxzZSBPYmplY3QuYXNzaWduKHAsIFBvaW50LnByb3RvdHlwZSk7Ki8KICAgIHJldHVybiBwOwogIH0KfQoKUG9pbnQuZ2V0T3RoZXIgPSBhcmdzID0+IChjb25zb2xlLmRlYnVnKCdnZXRPdGhlcicsIC4uLmFyZ3MpLCB0eXBlb2YgYXJnc1swXSA9PSAnbnVtYmVyJyA/IFt7IHg6IGFyZ3NbMF0sIHk6IGFyZ3NbMV0gfV0gOiBhcmdzKTsKCi8qT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUG9pbnQucHJvdG90eXBlLCB7CiAgWDogewogICAgZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy54OwogICAgfQogIH0sCiAgWTogewogICAgZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy55OwogICAgfQogIH0KfSk7Ki8KCmRlZmluZShQb2ludC5wcm90b3R5cGUsIHsKICBtb3ZlKHgsIHkpIHsKICAgIHRoaXMueCArPSB4OwogICAgdGhpcy55ICs9IHk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIG1vdmVUbyh4LCB5KSB7CiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgY2xlYXIoeCwgeSkgewogICAgdGhpcy54ID0gMDsKICAgIHRoaXMueSA9IDA7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHNldChmbikgewogICAgaWYodHlwZW9mIGZuICE9ICdmdW5jdGlvbicpIHsKICAgICAgUG9pbnQuYXBwbHkodGhpcywgWy4uLmFyZ3VtZW50c10pOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIHJldHVybiBmbih0aGlzLngsIHRoaXMueSk7CiAgfSwKICBjbG9uZSgpIHsKICAgIGNvbnN0IGN0b3IgPSB0aGlzW1N5bWJvbC5zcGVjaWVzXSB8fCB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKCiAgICByZXR1cm4gbmV3IGN0b3IoeyB4OiB0aGlzLngsIHk6IHRoaXMueSB9KTsKICB9LAogIHN1bSguLi5hcmdzKSB7CiAgICBjb25zdCBwID0gbmV3IFBvaW50KC4uLmFyZ3MpOwogICAgbGV0IHIgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsIHRoaXMueSk7CiAgICByLnggKz0gcC54OwogICAgci55ICs9IHAueTsKICAgIHJldHVybiByOwogIH0sCiAgYWRkKC4uLmFyZ3MpIHsKICAgIGNvbnN0IG90aGVyID0gbmV3IFBvaW50KC4uLmFyZ3MpOwogICAgdGhpcy54ICs9IG90aGVyLng7CiAgICB0aGlzLnkgKz0gb3RoZXIueTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgZGlmZihhcmcpIHsKICAgIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgICBsZXQgZm4gPSBmdW5jdGlvbihvdGhlcikgewogICAgICBsZXQgciA9IG5ldyBQb2ludCh4LCB5KTsKICAgICAgcmV0dXJuIHIuc3ViKG90aGVyKTsKICAgIH07CiAgICBpZihhcmcpIHJldHVybiBmbihhcmcpOwogICAgcmV0dXJuIGZuOwogIH0sCiAgc3ViKC4uLmFyZ3MpIHsKICAgIGNvbnN0IG90aGVyID0gbmV3IFBvaW50KC4uLmFyZ3MpOwogICAgdGhpcy54IC09IG90aGVyLng7CiAgICB0aGlzLnkgLT0gb3RoZXIueTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgcHJvZChmKSB7CiAgICBjb25zdCBvID0gaXNQb2ludChmKSA/IGYgOiB7IHg6IGYsIHk6IGYgfTsKICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy54ICogby54LCB0aGlzLnkgKiBvLnkpOwogIH0sCiAgbXVsKGYpIHsKICAgIGNvbnN0IG8gPSBpc1BvaW50KGYpID8gZiA6IHsgeDogZiwgeTogZiB9OwogICAgdGhpcy54ICo9IG8ueDsKICAgIHRoaXMueSAqPSBvLnk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHF1b3Qob3RoZXIpIHsKICAgIG90aGVyID0gaXNQb2ludChvdGhlcikgPyBvdGhlciA6IHsgeDogb3RoZXIsIHk6IG90aGVyIH07CiAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMueCAvIG90aGVyLngsIHRoaXMueSAvIG90aGVyLnkpOwogIH0sCiAgZGl2KG90aGVyKSB7CiAgICBvdGhlciA9IGlzUG9pbnQob3RoZXIpID8gb3RoZXIgOiB7IHg6IG90aGVyLCB5OiBvdGhlciB9OwogICAgdGhpcy54IC89IG90aGVyLng7CiAgICB0aGlzLnkgLz0gb3RoZXIueTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgY29tcCgpIHsKICAgIHJldHVybiBuZXcgUG9pbnQoeyB4OiAtdGhpcy54LCB5OiAtdGhpcy55IH0pOwogIH0sCiAgbmVnKCkgewogICAgdGhpcy54ICo9IC0xOwogICAgdGhpcy55ICo9IC0xOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBkaXN0YW5jZVNxdWFyZWQob3RoZXIgPSB7IHg6IDAsIHk6IDAgfSkgewogICAgcmV0dXJuIChvdGhlci55IC0gdGhpcy55KSAqIChvdGhlci55IC0gdGhpcy55KSArIChvdGhlci54IC0gdGhpcy54KSAqIChvdGhlci54IC0gdGhpcy54KTsKICB9LAogIGRpc3RhbmNlKG90aGVyID0geyB4OiAwLCB5OiAwIH0pIHsKICAgIHJldHVybiBNYXRoLnNxcnQoUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlU3F1YXJlZC5jYWxsKHRoaXMsIFBvaW50KG90aGVyKSkpOwogIH0sCiAgZXF1YWxzKG90aGVyKSB7CiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogICAgcmV0dXJuICt4ID09ICtvdGhlci54ICYmICt5ID09ICtvdGhlci55OwogIH0sCiAgcm91bmQocHJlY2lzaW9uID0gMC4wMDEsIGRpZ2l0cywgdHlwZSkgewogICAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICAgIGRpZ2l0cyA9IGRpZ2l0cyB8fCByb3VuZERpZ2l0cyhwcmVjaXNpb24pOwogICAgdHlwZSA9IHR5cGUgfHwgJ3JvdW5kJzsKICAgIHRoaXMueCA9IHJvdW5kVG8oeCwgcHJlY2lzaW9uLCBkaWdpdHMsIHR5cGUpOwogICAgdGhpcy55ID0gcm91bmRUbyh5LCBwcmVjaXNpb24sIGRpZ2l0cywgdHlwZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIGNlaWwoKSB7CiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogICAgdGhpcy54ID0gTWF0aC5jZWlsKHgpOwogICAgdGhpcy55ID0gTWF0aC5jZWlsKHkpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBmbG9vcigpIHsKICAgIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgICB0aGlzLnggPSBNYXRoLmZsb29yKHgpOwogICAgdGhpcy55ID0gTWF0aC5mbG9vcih5KTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIGRvdChvdGhlcikgewogICAgcmV0dXJuIHRoaXMueCAqIG90aGVyLnggKyB0aGlzLnkgKiBvdGhlci55OwogIH0sCgogIHZhbHVlcygpIHsKICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldOwogIH0sCiAgZnJvbUFuZ2xlKGFuZ2xlLCBkaXN0ID0gMS4wKSB7CiAgICB0aGlzLnggPSBNYXRoLmNvcyhhbmdsZSkgKiBkaXN0OwogICAgdGhpcy55ID0gTWF0aC5zaW4oYW5nbGUpICogZGlzdDsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgdG9BbmdsZShkZWcgPSBmYWxzZSkgewogICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy54LCB0aGlzLnkpICogKGRlZyA/IDE4MCAvIE1hdGguUEkgOiAxKTsKICB9LAogIGFuZ2xlKG90aGVyLCBkZWcgPSBmYWxzZSkgewogICAgb3RoZXIgPSBvdGhlciB8fCB7IHg6IDAsIHk6IDAgfTsKICAgIHJldHVybiBQb2ludC5wcm90b3R5cGUuZGlmZi5jYWxsKHRoaXMsIG90aGVyKS50b0FuZ2xlKGRlZyk7CiAgfSwKICByb3RhdGUoYW5nbGUsIG9yaWdpbiA9IHsgeDogMCwgeTogMCB9KSB7CiAgICB0aGlzLnggLT0gb3JpZ2luLng7CiAgICB0aGlzLnkgLT0gb3JpZ2luLnk7CiAgICBsZXQgYyA9IE1hdGguY29zKGFuZ2xlKSwKICAgICAgcyA9IE1hdGguc2luKGFuZ2xlKTsKICAgIGxldCB4bmV3ID0gdGhpcy54ICogYyAtIHRoaXMueSAqIHM7CiAgICBsZXQgeW5ldyA9IHRoaXMueCAqIHMgKyB0aGlzLnkgKiBjOwogICAgdGhpcy54ID0geG5ldzsKICAgIHRoaXMueSA9IHluZXc7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHZhbHVlT2Yoc2hsID0gMTYpIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKCiAgICBpZihzaGwgPCAwKSByZXR1cm4geCAqICgxIDw8IE1hdGguYWJzKHNobCkpICsgeTsKCiAgICByZXR1cm4geCArIHkgKiAoMSA8PCBzaGwpOwogIH0sCiAgdG9TdHJpbmcob3B0cyA9IHt9KSB7CiAgICBjb25zdCB7IHByZWNpc2lvbiA9IDAuMDAxLCB1bml0ID0gJycsIHNlcGFyYXRvciA9ICcsJywgbGVmdCA9ICcnLCByaWdodCA9ICcnLCBwYWQgPSAwIH0gPSBvcHRzOwogICAgbGV0IHggPSByb3VuZFRvKHRoaXMueCwgcHJlY2lzaW9uKTsKICAgIGxldCB5ID0gcm91bmRUbyh0aGlzLnksIHByZWNpc2lvbik7CiAgICBpZihwYWQgPiAwKSB7CiAgICAgIHggPSB4ICsgJyc7CiAgICAgIHkgPSB5ICsgJyc7CiAgICAgIGlmKHlbMF0gIT0gJy0nKSB5ID0gJyAnICsgeTsKICAgICAgaWYoeFswXSAhPSAnLScpIHggPSAnICcgKyB4OwogICAgfQogICAgLy9jb25zb2xlLmRlYnVnKCJ0b1N0cmluZyIsIHt4LHl9LCB7cGFkfSk7CiAgICByZXR1cm4gYCR7bGVmdH0keyh4ICsgJycpLnBhZFN0YXJ0KHBhZCwgJyAnKX0ke3VuaXR9JHtzZXBhcmF0b3J9JHsoeSArICcnKS5wYWRFbmQocGFkLCAnICcpfSR7dW5pdH0ke3JpZ2h0fWA7CiAgfSwKICB0b1NvdXJjZShvcHRzID0ge30pIHsKICAgIGNvbnN0IHsgYXNBcnJheSA9IGZhbHNlLCBwbGFpbk9iaiA9IGZhbHNlLCBwYWQgPSBhID0+IGEgLyphLnBhZFN0YXJ0KDQsICcgJykqLywgc2hvd05ldyA9IHRydWUgfSA9IG9wdHM7CiAgICBsZXQgeCA9IHBhZCh0aGlzLnggKyAnJyk7CiAgICBsZXQgeSA9IHBhZCh0aGlzLnkgKyAnJyk7CiAgICBsZXQgYyA9IHQgPT4gdDsKICAgIGlmKHR5cGVvZiB0aGlzICE9ICdvYmplY3QnIHx8IHRoaXMgPT09IG51bGwpIHJldHVybiAnJzsKICAgIGlmKGFzQXJyYXkpIHJldHVybiBgWyR7eH0sJHt5fV1gOwogICAgaWYocGxhaW5PYmopIHJldHVybiBge3g6JHt4fSx5OiR7eX19YDsKCiAgICByZXR1cm4gYCR7YyhzaG93TmV3ID8gJ25ldyAnIDogJycsIDEsIDMxKX0ke2MoJ1BvaW50JywgMSwgMzMpfSR7YygnKCcsIDEsIDM2KX0ke2MoeCwgMSwgMzIpfSR7YygnLCcsIDEsIDM2KX0ke2MoeSwgMSwgMzIpfSR7YygnKScsIDEsIDM2KX1gOwogIH0sCiAgCiAgdG9PYmplY3QocHJvdG8gPSBQb2ludC5wcm90b3R5cGUpIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICAgIGNvbnN0IG9iaiA9IHsgeCwgeSB9OwogICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iaiwgcHJvdG8pOwogICAgcmV0dXJuIG9iajsKICB9LAogIHRvQ1NTKHByZWNpc2lvbiA9IDAuMDAxLCBlZGdlcyA9IFsnbGVmdCcsICd0b3AnXSkgewogICAgcmV0dXJuIHsKICAgICAgW2VkZ2VzWzBdXTogcm91bmRUbyh0aGlzLngsIHByZWNpc2lvbikgKyAncHgnLAogICAgICBbZWRnZXNbMV1dOiByb3VuZFRvKHRoaXMueSwgcHJlY2lzaW9uKSArICdweCcKICAgIH07CiAgfSwKICB0b0ZpeGVkKGRpZ2l0cykgewogICAgcmV0dXJuIG5ldyBQb2ludCgrdGhpcy54LnRvRml4ZWQoZGlnaXRzKSwgK3RoaXMueS50b0ZpeGVkKGRpZ2l0cykpOwogIH0sCiAgaXNOdWxsKCkgewogICAgcmV0dXJuIHRoaXMueCA9PSAwICYmIHRoaXMueSA9PSAwOwogIH0sCiAgaW5zaWRlKHJlY3QpIHsKICAgIHJldHVybiB0aGlzLnggPj0gcmVjdC54ICYmIHRoaXMueCA8IHJlY3QueCArIHJlY3Qud2lkdGggJiYgdGhpcy55ID49IHJlY3QueSAmJiB0aGlzLnkgPCByZWN0LnkgKyByZWN0LmhlaWdodDsKICB9LAogIHRyYW5zZm9ybShtLCByb3VuZCA9IHRydWUpIHsKICAgIGlmKGlzT2JqZWN0KG0pICYmIHR5cGVvZiBtLnRvTWF0cml4ID09ICdmdW5jdGlvbicpIG0gPSBtLnRvTWF0cml4KCk7CiAgICAvL2lmKGlzT2JqZWN0KG0pICYmIHR5cGVvZiBtLnRyYW5zZm9ybVBvaW50ID09ICdmdW5jdGlvbicpIHJldHVybiBtLnRyYW5zZm9ybVBvaW50KHRoaXMpOwoKICAgIGNvbnN0IHggPSBtWzBdICogdGhpcy54ICsgbVsxXSAqIHRoaXMueSArIG1bMl07CiAgICBjb25zdCB5ID0gbVszXSAqIHRoaXMueCArIG1bNF0gKiB0aGlzLnkgKyBtWzVdOwoKICAgIHRoaXMueCA9IHg7CiAgICB0aGlzLnkgPSB5OwogICAgaWYocm91bmQpIFBvaW50LnByb3RvdHlwZS5yb3VuZC5jYWxsKHRoaXMsIDFlLTEzLCAxMyk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBzY2FsZVRvKG1pbm1heCkgewogICAgcmV0dXJuIG5ldyBQb2ludCh7CiAgICAgIHg6ICh0aGlzLnggLSBtaW5tYXgueDEpIC8gKG1pbm1heC54MiAtIG1pbm1heC54MSksCiAgICAgIHk6ICh0aGlzLnkgLSBtaW5tYXgueTEpIC8gKG1pbm1heC55MiAtIG1pbm1heC55MSkKICAgIH0pOwogIH0sCiAgbm9ybWFsaXplKCkgewogICAgbGV0IGQgPSBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbCh0aGlzKTsKICAgIHJldHVybiBQb2ludC5wcm90b3R5cGUuZGl2LmNhbGwodGhpcywgeyB4OiBkLCB5OiBkIH0pOwogIH0sCiAgbm9ybWFsKCkgewogICAgbGV0IGQgPSBQb2ludC5wcm90b3R5cGUuZGlzdGFuY2UuY2FsbCh0aGlzKTsKICAgIHJldHVybiBuZXcgUG9pbnQoeyB4OiB0aGlzLnggLyBkLCB5OiB0aGlzLnkgLyBkIH0pOwogIH0sCiAgLyp0b1NvdXJjZSgpIHsKICByZXR1cm4gJ3t4OicgKyB0aGlzLnggKyAnLHk6JyArIHRoaXMueSArICd9JzsKfSwqLwpbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdGlvbnMpIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICAgIHJldHVybiAvKk9iamVjdC5zZXRQcm90b3R5cGVPZiovIHsgeCwgeSB9IC8qLCBQb2ludC5wcm90b3R5cGUqLzsKICB9LAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnUG9pbnQnCn0pOwoKZGVmaW5lR2V0dGVyKFBvaW50LnByb3RvdHlwZSwgU3ltYm9sLml0ZXJhdG9yLCBmdW5jdGlvbigpIHsKICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgbGV0IGEgPSBbeCwgeV07CiAgcmV0dXJuIGFbU3ltYm9sLml0ZXJhdG9yXS5iaW5kKGEpOwp9KTsKClBvaW50LmZyb21TdHJpbmcgPSBzdHIgPT4gbmV3IFBvaW50KC4uLnN0ci5zcGxpdCgvW14tLjAtOV0rL2cpLm1hcChuID0+ICtuKSk7ClBvaW50Lm1vdmUgPSAocG9pbnQsIHgsIHkpID0+IFBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwocG9pbnQsIHgsIHkpOwpQb2ludC5hbmdsZSA9IChwb2ludCwgb3RoZXIsIGRlZyA9IGZhbHNlKSA9PiBQb2ludC5wcm90b3R5cGUuYW5nbGUuY2FsbChwb2ludCwgb3RoZXIsIGRlZyk7ClBvaW50Lmluc2lkZSA9IChwb2ludCwgcmVjdCkgPT4gUG9pbnQucHJvdG90eXBlLmluc2lkZS5jYWxsKHBvaW50LCByZWN0KTsKUG9pbnQuc3ViID0gKHBvaW50LCBvdGhlcikgPT4gUG9pbnQucHJvdG90eXBlLnN1Yi5jYWxsKHBvaW50LCBvdGhlcik7ClBvaW50LnByb2QgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLnByb2QuY2FsbChhLCBiKTsKUG9pbnQucXVvdCA9IChhLCBiKSA9PiBQb2ludC5wcm90b3R5cGUucXVvdC5jYWxsKGEsIGIpOwpQb2ludC5lcXVhbHMgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLmVxdWFscy5jYWxsKGEsIGIpOwpQb2ludC5yb3VuZCA9IChwb2ludCwgcHJlYywgZGlnaXRzLCB0eXBlKSA9PiBQb2ludC5wcm90b3R5cGUucm91bmQuY2FsbChwb2ludCwgcHJlYywgZGlnaXRzLCB0eXBlKTsKUG9pbnQuZnJvbUFuZ2xlID0gKGFuZ2xlLCBmKSA9PiBuZXcgUG9pbnQoKS5mcm9tQW5nbGUoYW5nbGUsIGYpOwoKZm9yKGxldCBuYW1lIG9mIFsKICAnY2xvbmUnLAogICdjb21wJywKICAnbmVnJywKICAnc2lkZXMnLAogICdkaW1lbnNpb24nLAogICd0b1N0cmluZycsCiAgLy8ndG9Tb3VyY2UnLAogICd0b0NTUycsCiAgJ3N1YicsCiAgJ2RpZmYnLAogICdhZGQnLAogICdzdW0nLAogICdkaXN0YW5jZScKXSkgewogIFBvaW50W25hbWVdID0gKHBvaW50LCAuLi5hcmdzKSA9PiBQb2ludC5wcm90b3R5cGVbbmFtZV0uY2FsbChQb2ludChwb2ludCksIC4uLmFyZ3MpOwp9ClBvaW50LmludGVycG9sYXRlID0gKHAxLCBwMiwgYSkgPT4gewogIGEgPSBjbGFtcCgwLCAxLCBhKTsKICByZXR1cm4gbmV3IFBvaW50KHAxLnggKiAoMS4wIC0gYSkgKyBwMi54ICogYSwgcDEueSAqICgxLjAgLSBhKSArIHAyLnkgKiBhKTsKfTsKClBvaW50LnRvU291cmNlID0gKHBvaW50LCB7IHNwYWNlID0gJyAnLCBwYWRkaW5nID0gJyAnLCBzZXBhcmF0b3IgPSAnLCcgfSkgPT4gYHske3BhZGRpbmd9eDoke3NwYWNlfSR7cG9pbnQueH0ke3NlcGFyYXRvcn15OiR7c3BhY2V9JHtwb2ludC55fSR7cGFkZGluZ319YDsKCmV4cG9ydCBjb25zdCBpc1BvaW50ID0gbyA9PgogIG8gJiYKICAoKG8ueCAhPT0gdW5kZWZpbmVkICYmIG8ueSAhPT0gdW5kZWZpbmVkKSB8fAogICAgKChvLmxlZnQgIT09IHVuZGVmaW5lZCB8fCBvLnJpZ2h0ICE9PSB1bmRlZmluZWQpICYmIChvLnRvcCAhPT0gdW5kZWZpbmVkIHx8IG8uYm90dG9tICE9PSB1bmRlZmluZWQpKSB8fAogICAgbyBpbnN0YW5jZW9mIFBvaW50IHx8CiAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YobykuY29uc3RydWN0b3IgPT09IFBvaW50KTsKClBvaW50LmlzUG9pbnQgPSBpc1BvaW50OwoKUG9pbnQuYmluZCA9IChvLCBrZXlzLCBnKSA9PiB7CiAga2V5cyA/Pz0gWyd4JywgJ3knXTsKICBvID8/PSBuZXcgUG9pbnQoKTsKICBnID8/PSBrID0+IHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQgPyAob1trXSA9IHZhbHVlKSA6IG9ba107CgogIGNvbnN0IHsgeCwgeSB9ID0gQXJyYXkuaXNBcnJheShrZXlzKSA/IGtleXMucmVkdWNlKChhY2MsIG5hbWUsIGkpID0+ICh7IC4uLmFjYywgW2tleXNbaV1dOiBuYW1lIH0pLCB7fSkgOiBrZXlzOwogIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoYmluZFByb3BlcnRpZXMoe30sIG8sIHsgeCwgeSB9KSwgUG9pbnQucHJvdG90eXBlKTsKfTsKCmV4cG9ydCBkZWZhdWx0IFBvaW50OwoKZGVmaW5lR2V0dGVyKFBvaW50LCBTeW1ib2wuc3BlY2llcywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHRoaXM7Cn0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVBvaW50ID0gaW1tdXRhYmxlQ2xhc3MoUG9pbnQpOwpkZWZpbmVHZXR0ZXIoSW1tdXRhYmxlUG9pbnQsIFN5bWJvbC5zcGVjaWVzLCAoKSA9PiBJbW11dGFibGVQb2ludCk7CgAAAAAAAAAAOykAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAArB8AAAAAAACsHwAAAAAAAAAAAAAAAPC/"
				],
				[
					319,
					1,
					"right_delete",
					null,
					"AQAAAGYfAAAAAAAAZh8AAAAAAABGAAAALyp0b1NvdXJjZSgpIHsKICByZXR1cm4gJ3t4OicgKyB0aGlzLnggKyAnLHk6JyArIHRoaXMueSArICd9JzsKfSwqLwogIA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAZh8AAAAAAACsHwAAAAAAAAAAAAAAADRA"
				],
				[
					331,
					1,
					"insert",
					{
						"characters": "define({x,y}"
					},
					"DAAAAK4fAAAAAAAArx8AAAAAAAAAAAAArx8AAAAAAACwHwAAAAAAAAAAAACwHwAAAAAAALEfAAAAAAAAAAAAALEfAAAAAAAAsh8AAAAAAAAAAAAAsh8AAAAAAACzHwAAAAAAAAAAAACzHwAAAAAAALQfAAAAAAAAAAAAALQfAAAAAAAAtR8AAAAAAAAAAAAAtR8AAAAAAAC2HwAAAAAAAAAAAAC2HwAAAAAAALcfAAAAAAAAAAAAALcfAAAAAAAAuB8AAAAAAAAAAAAAuB8AAAAAAAC5HwAAAAAAAAAAAAC5HwAAAAAAALofAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAArh8AAAAAAACuHwAAAAAAAAAAAAAAAPC/"
				],
				[
					332,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAALofAAAAAAAAux8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAuh8AAAAAAAC6HwAAAAAAAAAAAAAAAPC/"
				],
				[
					333,
					1,
					"insert",
					{
						"characters": " ["
					},
					"AgAAALsfAAAAAAAAvB8AAAAAAAAAAAAAvB8AAAAAAAC9HwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAux8AAAAAAAC7HwAAAAAAAAAAAAAAAPC/"
				],
				[
					334,
					1,
					"left_delete",
					null,
					"AQAAALwfAAAAAAAAvB8AAAAAAAABAAAAWw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvR8AAAAAAAC9HwAAAAAAAAAAAAAAAPC/"
				],
				[
					335,
					1,
					"insert",
					{
						"characters": "{"
					},
					"AQAAALwfAAAAAAAAvR8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvB8AAAAAAAC8HwAAAAAAAAAAAAAAAPC/"
				],
				[
					336,
					1,
					"insert",
					{
						"characters": " [Symbol.to"
					},
					"CwAAAL0fAAAAAAAAvh8AAAAAAAAAAAAAvh8AAAAAAAC/HwAAAAAAAAAAAAC/HwAAAAAAAMAfAAAAAAAAAAAAAMAfAAAAAAAAwR8AAAAAAAAAAAAAwR8AAAAAAADCHwAAAAAAAAAAAADCHwAAAAAAAMMfAAAAAAAAAAAAAMMfAAAAAAAAxB8AAAAAAAAAAAAAxB8AAAAAAADFHwAAAAAAAAAAAADFHwAAAAAAAMYfAAAAAAAAAAAAAMYfAAAAAAAAxx8AAAAAAAAAAAAAxx8AAAAAAADIHwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvR8AAAAAAAC9HwAAAAAAAAAAAAAAAPC/"
				],
				[
					337,
					1,
					"insert",
					{
						"characters": "S"
					},
					"AQAAAMgfAAAAAAAAyR8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAyB8AAAAAAADIHwAAAAAAAAAAAAAAAPC/"
				],
				[
					338,
					1,
					"insert_completion",
					{
						"completion": "toStringTag",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "toStringTag"
					},
					"AgAAAMYfAAAAAAAAxh8AAAAAAAADAAAAdG9Txh8AAAAAAADRHwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAyR8AAAAAAADJHwAAAAAAAAAAAAAAAPC/"
				],
				[
					339,
					1,
					"insert",
					{
						"characters": "]:"
					},
					"AgAAANEfAAAAAAAA0h8AAAAAAAAAAAAA0h8AAAAAAADTHwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0R8AAAAAAADRHwAAAAAAAAAAAAAAAPC/"
				],
				[
					340,
					1,
					"insert",
					{
						"characters": " 'Point'"
					},
					"CAAAANMfAAAAAAAA1B8AAAAAAAAAAAAA1B8AAAAAAADVHwAAAAAAAAAAAADVHwAAAAAAANYfAAAAAAAAAAAAANYfAAAAAAAA1x8AAAAAAAAAAAAA1x8AAAAAAADYHwAAAAAAAAAAAADYHwAAAAAAANkfAAAAAAAAAAAAANkfAAAAAAAA2h8AAAAAAAAAAAAA2h8AAAAAAADbHwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0x8AAAAAAADTHwAAAAAAAAAAAAAAAPC/"
				],
				[
					341,
					1,
					"insert",
					{
						"characters": " });"
					},
					"BAAAANsfAAAAAAAA3B8AAAAAAAAAAAAA3B8AAAAAAADdHwAAAAAAAAAAAADdHwAAAAAAAN4fAAAAAAAAAAAAAN4fAAAAAAAA3x8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA2x8AAAAAAADbHwAAAAAAAAAAAAAAAPC/"
				],
				[
					343,
					1,
					"cut",
					null,
					"AQAAAN8fAAAAAAAA3x8AAAAAAAA5AAAALypPYmplY3Quc2V0UHJvdG90eXBlT2YqLyB7IHgsIHkgfSAvKiwgUG9pbnQucHJvdG90eXBlKi87",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA3x8AAAAAAAAYIAAAAAAAAP///////+9/"
				],
				[
					393,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADtKAAAaW1wb3J0IHsgYmluZFByb3BlcnRpZXMsIGNsYW1wLCBkZWZpbmVHZXR0ZXIsIGltbXV0YWJsZUNsYXNzLCBpbnNwZWN0U3ltYm9sLCBpc09iamVjdCwgcm91bmREaWdpdHMsIHJvdW5kVG8sIHRyeUNhdGNoIH0gZnJvbSAnLi4vbWlzYy5qcyc7Cgpjb25zdCBTeW1TcGVjaWVzID0gdHJ5Q2F0Y2goCiAgKCkgPT4gU3ltYm9sLAogIHN5bSA9PiBzeW0uc3BlY2llcwopOwoKY29uc3QgQ1RPUiA9IG9iaiA9PiB7CiAgaWYob2JqW1N5bVNwZWNpZXNdKSByZXR1cm4gb2JqW1N5bVNwZWNpZXNdOwogIGxldCBwID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7CiAgaWYocFtTeW1TcGVjaWVzXSkgcmV0dXJuIHBbU3ltU3BlY2llc107CiAgcmV0dXJuIHAuY29uc3RydWN0b3I7Cn07CgpleHBvcnQgZnVuY3Rpb24gUG9pbnQoLi4uYXJncykgewogIGxldCBpc05ldyA9IHRoaXMgaW5zdGFuY2VvZiBQb2ludDsKICBhcmdzID0gYXJnc1swXSBpbnN0YW5jZW9mIEFycmF5ID8gYXJncy5zaGlmdCgpIDogYXJnczsKICBsZXQgcCA9IGlzTmV3ID8gdGhpcyA6IG5ldyBQb2ludCguLi5hcmdzKTsKICBsZXQgYXJnID0gYXJncy5zaGlmdCgpOwoKICBpZighbmV3LnRhcmdldCkgaWYgKGFyZyBpbnN0YW5jZW9mIFBvaW50KSByZXR1cm4gYXJnOwoKICBpZih0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJykgewogICAgcC54ID0gYXJnOwogICAgcC55ID0gYXJncy5zaGlmdCgpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcpOwogICAgcC55ID0gcGFyc2VGbG9hdChhcmdzLnNoaWZ0KCkpOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09PSAnc3RyaW5nJykgewogICAgY29uc3QgbWF0Y2hlcyA9IFsuLi5hcmcubWF0Y2hBbGwoLyhbLStdP2QqLj9kKykoPzpbZUVdKFstK10/ZCspKT8vZyldOwoKICAgIHAueCA9IHBhcnNlRmxvYXQobWF0Y2hlc1swXSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KG1hdGNoZXNbMV0pOwogIH0gZWxzZSBpZih0eXBlb2YgYXJnID09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbCAmJiAoYXJnLnggIT09IHVuZGVmaW5lZCB8fCBhcmcueSAhPT0gdW5kZWZpbmVkKSkgewogICAgcC54ID0gYXJnLng7CiAgICBwLnkgPSBhcmcueTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZyA9PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGwgJiYgYXJnLmxlbmd0aCA+IDAgJiYgeCAhPT0gdW5kZWZpbmVkICYmIHkgIT09IHVuZGVmaW5lZCkgewogICAgcC54ID0gcGFyc2VGbG9hdChhcmcuc2hpZnQoKSk7CiAgICBwLnkgPSBwYXJzZUZsb2F0KGFyZy5zaGlmdCgpKTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZ3NbMF0gPT09ICdudW1iZXInICYmIHR5cGVvZiBhcmdzWzFdID09PSAnbnVtYmVyJykgewogICAgcC54ID0gYXJnc1swXTsKICAgIHAueSA9IGFyZ3NbMV07CiAgICBhcmdzLnNoaWZ0KDIpOwogIH0gZWxzZSB7CiAgICBwLnggPSAwOwogICAgcC55ID0gMDsKICB9CiAgaWYocC54ID09PSB1bmRlZmluZWQpIHAueCA9IDA7CiAgaWYocC55ID09PSB1bmRlZmluZWQpIHAueSA9IDA7CiAgaWYoaXNOYU4ocC54KSkgcC54ID0gdW5kZWZpbmVkOwogIGlmKGlzTmFOKHAueSkpIHAueSA9IHVuZGVmaW5lZDsKCiAgaWYoIWlzTmV3KSB7CiAgICAvKiBpZihwLnByb3RvdHlwZSA9PSBPYmplY3QpIHAucHJvdG90eXBlID0gUG9pbnQucHJvdG90eXBlOwogICAgZWxzZSBPYmplY3QuYXNzaWduKHAsIFBvaW50LnByb3RvdHlwZSk7Ki8KICAgIHJldHVybiBwOwogIH0KfQoKUG9pbnQuZ2V0T3RoZXIgPSBhcmdzID0+IChjb25zb2xlLmRlYnVnKCdnZXRPdGhlcicsIC4uLmFyZ3MpLCB0eXBlb2YgYXJnc1swXSA9PSAnbnVtYmVyJyA/IFt7IHg6IGFyZ3NbMF0sIHk6IGFyZ3NbMV0gfV0gOiBhcmdzKTsKCi8qT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUG9pbnQucHJvdG90eXBlLCB7CiAgWDogewogICAgZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy54OwogICAgfQogIH0sCiAgWTogewogICAgZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy55OwogICAgfQogIH0KfSk7Ki8KCmRlZmluZShQb2ludC5wcm90b3R5cGUsIHsKICBtb3ZlKHgsIHkpIHsKICAgIHRoaXMueCArPSB4OwogICAgdGhpcy55ICs9IHk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIG1vdmVUbyh4LCB5KSB7CiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgY2xlYXIoeCwgeSkgewogICAgdGhpcy54ID0gMDsKICAgIHRoaXMueSA9IDA7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHNldChmbikgewogICAgaWYodHlwZW9mIGZuICE9ICdmdW5jdGlvbicpIHsKICAgICAgUG9pbnQuYXBwbHkodGhpcywgWy4uLmFyZ3VtZW50c10pOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIHJldHVybiBmbih0aGlzLngsIHRoaXMueSk7CiAgfSwKICBjbG9uZSgpIHsKICAgIGNvbnN0IGN0b3IgPSB0aGlzW1N5bWJvbC5zcGVjaWVzXSB8fCB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKCiAgICByZXR1cm4gbmV3IGN0b3IoeyB4OiB0aGlzLngsIHk6IHRoaXMueSB9KTsKICB9LAogIHN1bSguLi5hcmdzKSB7CiAgICBjb25zdCBwID0gbmV3IFBvaW50KC4uLmFyZ3MpOwogICAgbGV0IHIgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsIHRoaXMueSk7CiAgICByLnggKz0gcC54OwogICAgci55ICs9IHAueTsKICAgIHJldHVybiByOwogIH0sCiAgYWRkKC4uLmFyZ3MpIHsKICAgIGNvbnN0IG90aGVyID0gbmV3IFBvaW50KC4uLmFyZ3MpOwogICAgdGhpcy54ICs9IG90aGVyLng7CiAgICB0aGlzLnkgKz0gb3RoZXIueTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgZGlmZihhcmcpIHsKICAgIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgICBsZXQgZm4gPSBmdW5jdGlvbihvdGhlcikgewogICAgICBsZXQgciA9IG5ldyBQb2ludCh4LCB5KTsKICAgICAgcmV0dXJuIHIuc3ViKG90aGVyKTsKICAgIH07CiAgICBpZihhcmcpIHJldHVybiBmbihhcmcpOwogICAgcmV0dXJuIGZuOwogIH0sCiAgc3ViKC4uLmFyZ3MpIHsKICAgIGNvbnN0IG90aGVyID0gbmV3IFBvaW50KC4uLmFyZ3MpOwogICAgdGhpcy54IC09IG90aGVyLng7CiAgICB0aGlzLnkgLT0gb3RoZXIueTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgcHJvZChmKSB7CiAgICBjb25zdCBvID0gaXNQb2ludChmKSA/IGYgOiB7IHg6IGYsIHk6IGYgfTsKICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy54ICogby54LCB0aGlzLnkgKiBvLnkpOwogIH0sCiAgbXVsKGYpIHsKICAgIGNvbnN0IG8gPSBpc1BvaW50KGYpID8gZiA6IHsgeDogZiwgeTogZiB9OwogICAgdGhpcy54ICo9IG8ueDsKICAgIHRoaXMueSAqPSBvLnk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHF1b3Qob3RoZXIpIHsKICAgIG90aGVyID0gaXNQb2ludChvdGhlcikgPyBvdGhlciA6IHsgeDogb3RoZXIsIHk6IG90aGVyIH07CiAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMueCAvIG90aGVyLngsIHRoaXMueSAvIG90aGVyLnkpOwogIH0sCiAgZGl2KG90aGVyKSB7CiAgICBvdGhlciA9IGlzUG9pbnQob3RoZXIpID8gb3RoZXIgOiB7IHg6IG90aGVyLCB5OiBvdGhlciB9OwogICAgdGhpcy54IC89IG90aGVyLng7CiAgICB0aGlzLnkgLz0gb3RoZXIueTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgY29tcCgpIHsKICAgIHJldHVybiBuZXcgUG9pbnQoeyB4OiAtdGhpcy54LCB5OiAtdGhpcy55IH0pOwogIH0sCiAgbmVnKCkgewogICAgdGhpcy54ICo9IC0xOwogICAgdGhpcy55ICo9IC0xOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBkaXN0YW5jZVNxdWFyZWQob3RoZXIgPSB7IHg6IDAsIHk6IDAgfSkgewogICAgcmV0dXJuIChvdGhlci55IC0gdGhpcy55KSAqIChvdGhlci55IC0gdGhpcy55KSArIChvdGhlci54IC0gdGhpcy54KSAqIChvdGhlci54IC0gdGhpcy54KTsKICB9LAogIGRpc3RhbmNlKG90aGVyID0geyB4OiAwLCB5OiAwIH0pIHsKICAgIHJldHVybiBNYXRoLnNxcnQoUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlU3F1YXJlZC5jYWxsKHRoaXMsIFBvaW50KG90aGVyKSkpOwogIH0sCiAgZXF1YWxzKG90aGVyKSB7CiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogICAgcmV0dXJuICt4ID09ICtvdGhlci54ICYmICt5ID09ICtvdGhlci55OwogIH0sCiAgcm91bmQocHJlY2lzaW9uID0gMC4wMDEsIGRpZ2l0cywgdHlwZSkgewogICAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICAgIGRpZ2l0cyA9IGRpZ2l0cyB8fCByb3VuZERpZ2l0cyhwcmVjaXNpb24pOwogICAgdHlwZSA9IHR5cGUgfHwgJ3JvdW5kJzsKICAgIHRoaXMueCA9IHJvdW5kVG8oeCwgcHJlY2lzaW9uLCBkaWdpdHMsIHR5cGUpOwogICAgdGhpcy55ID0gcm91bmRUbyh5LCBwcmVjaXNpb24sIGRpZ2l0cywgdHlwZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIGNlaWwoKSB7CiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogICAgdGhpcy54ID0gTWF0aC5jZWlsKHgpOwogICAgdGhpcy55ID0gTWF0aC5jZWlsKHkpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBmbG9vcigpIHsKICAgIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgICB0aGlzLnggPSBNYXRoLmZsb29yKHgpOwogICAgdGhpcy55ID0gTWF0aC5mbG9vcih5KTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIGRvdChvdGhlcikgewogICAgcmV0dXJuIHRoaXMueCAqIG90aGVyLnggKyB0aGlzLnkgKiBvdGhlci55OwogIH0sCgogIHZhbHVlcygpIHsKICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldOwogIH0sCiAgZnJvbUFuZ2xlKGFuZ2xlLCBkaXN0ID0gMS4wKSB7CiAgICB0aGlzLnggPSBNYXRoLmNvcyhhbmdsZSkgKiBkaXN0OwogICAgdGhpcy55ID0gTWF0aC5zaW4oYW5nbGUpICogZGlzdDsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgdG9BbmdsZShkZWcgPSBmYWxzZSkgewogICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy54LCB0aGlzLnkpICogKGRlZyA/IDE4MCAvIE1hdGguUEkgOiAxKTsKICB9LAogIGFuZ2xlKG90aGVyLCBkZWcgPSBmYWxzZSkgewogICAgb3RoZXIgPSBvdGhlciB8fCB7IHg6IDAsIHk6IDAgfTsKICAgIHJldHVybiBQb2ludC5wcm90b3R5cGUuZGlmZi5jYWxsKHRoaXMsIG90aGVyKS50b0FuZ2xlKGRlZyk7CiAgfSwKICByb3RhdGUoYW5nbGUsIG9yaWdpbiA9IHsgeDogMCwgeTogMCB9KSB7CiAgICB0aGlzLnggLT0gb3JpZ2luLng7CiAgICB0aGlzLnkgLT0gb3JpZ2luLnk7CiAgICBsZXQgYyA9IE1hdGguY29zKGFuZ2xlKSwKICAgICAgcyA9IE1hdGguc2luKGFuZ2xlKTsKICAgIGxldCB4bmV3ID0gdGhpcy54ICogYyAtIHRoaXMueSAqIHM7CiAgICBsZXQgeW5ldyA9IHRoaXMueCAqIHMgKyB0aGlzLnkgKiBjOwogICAgdGhpcy54ID0geG5ldzsKICAgIHRoaXMueSA9IHluZXc7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHZhbHVlT2Yoc2hsID0gMTYpIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKCiAgICBpZihzaGwgPCAwKSByZXR1cm4geCAqICgxIDw8IE1hdGguYWJzKHNobCkpICsgeTsKCiAgICByZXR1cm4geCArIHkgKiAoMSA8PCBzaGwpOwogIH0sCiAgdG9TdHJpbmcob3B0cyA9IHt9KSB7CiAgICBjb25zdCB7IHByZWNpc2lvbiA9IDAuMDAxLCB1bml0ID0gJycsIHNlcGFyYXRvciA9ICcsJywgbGVmdCA9ICcnLCByaWdodCA9ICcnLCBwYWQgPSAwIH0gPSBvcHRzOwogICAgbGV0IHggPSByb3VuZFRvKHRoaXMueCwgcHJlY2lzaW9uKTsKICAgIGxldCB5ID0gcm91bmRUbyh0aGlzLnksIHByZWNpc2lvbik7CiAgICBpZihwYWQgPiAwKSB7CiAgICAgIHggPSB4ICsgJyc7CiAgICAgIHkgPSB5ICsgJyc7CiAgICAgIGlmKHlbMF0gIT0gJy0nKSB5ID0gJyAnICsgeTsKICAgICAgaWYoeFswXSAhPSAnLScpIHggPSAnICcgKyB4OwogICAgfQogICAgLy9jb25zb2xlLmRlYnVnKCJ0b1N0cmluZyIsIHt4LHl9LCB7cGFkfSk7CiAgICByZXR1cm4gYCR7bGVmdH0keyh4ICsgJycpLnBhZFN0YXJ0KHBhZCwgJyAnKX0ke3VuaXR9JHtzZXBhcmF0b3J9JHsoeSArICcnKS5wYWRFbmQocGFkLCAnICcpfSR7dW5pdH0ke3JpZ2h0fWA7CiAgfSwKICB0b1NvdXJjZShvcHRzID0ge30pIHsKICAgIGNvbnN0IHsgYXNBcnJheSA9IGZhbHNlLCBwbGFpbk9iaiA9IGZhbHNlLCBwYWQgPSBhID0+IGEgLyphLnBhZFN0YXJ0KDQsICcgJykqLywgc2hvd05ldyA9IHRydWUgfSA9IG9wdHM7CiAgICBsZXQgeCA9IHBhZCh0aGlzLnggKyAnJyk7CiAgICBsZXQgeSA9IHBhZCh0aGlzLnkgKyAnJyk7CiAgICBsZXQgYyA9IHQgPT4gdDsKICAgIGlmKHR5cGVvZiB0aGlzICE9ICdvYmplY3QnIHx8IHRoaXMgPT09IG51bGwpIHJldHVybiAnJzsKICAgIGlmKGFzQXJyYXkpIHJldHVybiBgWyR7eH0sJHt5fV1gOwogICAgaWYocGxhaW5PYmopIHJldHVybiBge3g6JHt4fSx5OiR7eX19YDsKCiAgICByZXR1cm4gYCR7YyhzaG93TmV3ID8gJ25ldyAnIDogJycsIDEsIDMxKX0ke2MoJ1BvaW50JywgMSwgMzMpfSR7YygnKCcsIDEsIDM2KX0ke2MoeCwgMSwgMzIpfSR7YygnLCcsIDEsIDM2KX0ke2MoeSwgMSwgMzIpfSR7YygnKScsIDEsIDM2KX1gOwogIH0sCgogIHRvT2JqZWN0KHByb3RvID0gUG9pbnQucHJvdG90eXBlKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgICBjb25zdCBvYmogPSB7IHgsIHkgfTsKICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIHByb3RvKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICB0b0NTUyhwcmVjaXNpb24gPSAwLjAwMSwgZWRnZXMgPSBbJ2xlZnQnLCAndG9wJ10pIHsKICAgIHJldHVybiB7CiAgICAgIFtlZGdlc1swXV06IHJvdW5kVG8odGhpcy54LCBwcmVjaXNpb24pICsgJ3B4JywKICAgICAgW2VkZ2VzWzFdXTogcm91bmRUbyh0aGlzLnksIHByZWNpc2lvbikgKyAncHgnCiAgICB9OwogIH0sCiAgdG9GaXhlZChkaWdpdHMpIHsKICAgIHJldHVybiBuZXcgUG9pbnQoK3RoaXMueC50b0ZpeGVkKGRpZ2l0cyksICt0aGlzLnkudG9GaXhlZChkaWdpdHMpKTsKICB9LAogIGlzTnVsbCgpIHsKICAgIHJldHVybiB0aGlzLnggPT0gMCAmJiB0aGlzLnkgPT0gMDsKICB9LAogIGluc2lkZShyZWN0KSB7CiAgICByZXR1cm4gdGhpcy54ID49IHJlY3QueCAmJiB0aGlzLnggPCByZWN0LnggKyByZWN0LndpZHRoICYmIHRoaXMueSA+PSByZWN0LnkgJiYgdGhpcy55IDwgcmVjdC55ICsgcmVjdC5oZWlnaHQ7CiAgfSwKICB0cmFuc2Zvcm0obSwgcm91bmQgPSB0cnVlKSB7CiAgICBpZihpc09iamVjdChtKSAmJiB0eXBlb2YgbS50b01hdHJpeCA9PSAnZnVuY3Rpb24nKSBtID0gbS50b01hdHJpeCgpOwogICAgLy9pZihpc09iamVjdChtKSAmJiB0eXBlb2YgbS50cmFuc2Zvcm1Qb2ludCA9PSAnZnVuY3Rpb24nKSByZXR1cm4gbS50cmFuc2Zvcm1Qb2ludCh0aGlzKTsKCiAgICBjb25zdCB4ID0gbVswXSAqIHRoaXMueCArIG1bMV0gKiB0aGlzLnkgKyBtWzJdOwogICAgY29uc3QgeSA9IG1bM10gKiB0aGlzLnggKyBtWzRdICogdGhpcy55ICsgbVs1XTsKCiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICAgIGlmKHJvdW5kKSBQb2ludC5wcm90b3R5cGUucm91bmQuY2FsbCh0aGlzLCAxZS0xMywgMTMpOwoKICAgIHJldHVybiB0aGlzOwogIH0sCiAgc2NhbGVUbyhtaW5tYXgpIHsKICAgIHJldHVybiBuZXcgUG9pbnQoewogICAgICB4OiAodGhpcy54IC0gbWlubWF4LngxKSAvIChtaW5tYXgueDIgLSBtaW5tYXgueDEpLAogICAgICB5OiAodGhpcy55IC0gbWlubWF4LnkxKSAvIChtaW5tYXgueTIgLSBtaW5tYXgueTEpCiAgICB9KTsKICB9LAogIG5vcm1hbGl6ZSgpIHsKICAgIGxldCBkID0gUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlLmNhbGwodGhpcyk7CiAgICByZXR1cm4gUG9pbnQucHJvdG90eXBlLmRpdi5jYWxsKHRoaXMsIHsgeDogZCwgeTogZCB9KTsKICB9LAogIG5vcm1hbCgpIHsKICAgIGxldCBkID0gUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlLmNhbGwodGhpcyk7CiAgICByZXR1cm4gbmV3IFBvaW50KHsgeDogdGhpcy54IC8gZCwgeTogdGhpcy55IC8gZCB9KTsKICB9LAogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0aW9ucykgewogICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzOwogICAgcmV0dXJuIGRlZmluZSh7eCx5fSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1BvaW50JyB9KTsKICB9LAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnUG9pbnQnCn0pOwoKZGVmaW5lR2V0dGVyKFBvaW50LnByb3RvdHlwZSwgU3ltYm9sLml0ZXJhdG9yLCBmdW5jdGlvbigpIHsKICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgbGV0IGEgPSBbeCwgeV07CiAgcmV0dXJuIGFbU3ltYm9sLml0ZXJhdG9yXS5iaW5kKGEpOwp9KTsKClBvaW50LmZyb21TdHJpbmcgPSBzdHIgPT4gbmV3IFBvaW50KC4uLnN0ci5zcGxpdCgvW14tLjAtOV0rL2cpLm1hcChuID0+ICtuKSk7ClBvaW50Lm1vdmUgPSAocG9pbnQsIHgsIHkpID0+IFBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwocG9pbnQsIHgsIHkpOwpQb2ludC5hbmdsZSA9IChwb2ludCwgb3RoZXIsIGRlZyA9IGZhbHNlKSA9PiBQb2ludC5wcm90b3R5cGUuYW5nbGUuY2FsbChwb2ludCwgb3RoZXIsIGRlZyk7ClBvaW50Lmluc2lkZSA9IChwb2ludCwgcmVjdCkgPT4gUG9pbnQucHJvdG90eXBlLmluc2lkZS5jYWxsKHBvaW50LCByZWN0KTsKUG9pbnQuc3ViID0gKHBvaW50LCBvdGhlcikgPT4gUG9pbnQucHJvdG90eXBlLnN1Yi5jYWxsKHBvaW50LCBvdGhlcik7ClBvaW50LnByb2QgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLnByb2QuY2FsbChhLCBiKTsKUG9pbnQucXVvdCA9IChhLCBiKSA9PiBQb2ludC5wcm90b3R5cGUucXVvdC5jYWxsKGEsIGIpOwpQb2ludC5lcXVhbHMgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLmVxdWFscy5jYWxsKGEsIGIpOwpQb2ludC5yb3VuZCA9IChwb2ludCwgcHJlYywgZGlnaXRzLCB0eXBlKSA9PiBQb2ludC5wcm90b3R5cGUucm91bmQuY2FsbChwb2ludCwgcHJlYywgZGlnaXRzLCB0eXBlKTsKUG9pbnQuZnJvbUFuZ2xlID0gKGFuZ2xlLCBmKSA9PiBuZXcgUG9pbnQoKS5mcm9tQW5nbGUoYW5nbGUsIGYpOwoKZm9yKGxldCBuYW1lIG9mIFsKICAnY2xvbmUnLAogICdjb21wJywKICAnbmVnJywKICAnc2lkZXMnLAogICdkaW1lbnNpb24nLAogICd0b1N0cmluZycsCiAgLy8ndG9Tb3VyY2UnLAogICd0b0NTUycsCiAgJ3N1YicsCiAgJ2RpZmYnLAogICdhZGQnLAogICdzdW0nLAogICdkaXN0YW5jZScKXSkgewogIFBvaW50W25hbWVdID0gKHBvaW50LCAuLi5hcmdzKSA9PiBQb2ludC5wcm90b3R5cGVbbmFtZV0uY2FsbChQb2ludChwb2ludCksIC4uLmFyZ3MpOwp9ClBvaW50LmludGVycG9sYXRlID0gKHAxLCBwMiwgYSkgPT4gewogIGEgPSBjbGFtcCgwLCAxLCBhKTsKICByZXR1cm4gbmV3IFBvaW50KHAxLnggKiAoMS4wIC0gYSkgKyBwMi54ICogYSwgcDEueSAqICgxLjAgLSBhKSArIHAyLnkgKiBhKTsKfTsKClBvaW50LnRvU291cmNlID0gKHBvaW50LCB7IHNwYWNlID0gJyAnLCBwYWRkaW5nID0gJyAnLCBzZXBhcmF0b3IgPSAnLCcgfSkgPT4gYHske3BhZGRpbmd9eDoke3NwYWNlfSR7cG9pbnQueH0ke3NlcGFyYXRvcn15OiR7c3BhY2V9JHtwb2ludC55fSR7cGFkZGluZ319YDsKCmV4cG9ydCBjb25zdCBpc1BvaW50ID0gbyA9PgogIG8gJiYKICAoKG8ueCAhPT0gdW5kZWZpbmVkICYmIG8ueSAhPT0gdW5kZWZpbmVkKSB8fAogICAgKChvLmxlZnQgIT09IHVuZGVmaW5lZCB8fCBvLnJpZ2h0ICE9PSB1bmRlZmluZWQpICYmIChvLnRvcCAhPT0gdW5kZWZpbmVkIHx8IG8uYm90dG9tICE9PSB1bmRlZmluZWQpKSB8fAogICAgbyBpbnN0YW5jZW9mIFBvaW50IHx8CiAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YobykuY29uc3RydWN0b3IgPT09IFBvaW50KTsKClBvaW50LmlzUG9pbnQgPSBpc1BvaW50OwoKUG9pbnQuYmluZCA9IChvLCBrZXlzLCBnKSA9PiB7CiAga2V5cyA/Pz0gWyd4JywgJ3knXTsKICBvID8/PSBuZXcgUG9pbnQoKTsKICBnID8/PSBrID0+IHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQgPyAob1trXSA9IHZhbHVlKSA6IG9ba107CgogIGNvbnN0IHsgeCwgeSB9ID0gQXJyYXkuaXNBcnJheShrZXlzKSA/IGtleXMucmVkdWNlKChhY2MsIG5hbWUsIGkpID0+ICh7IC4uLmFjYywgW2tleXNbaV1dOiBuYW1lIH0pLCB7fSkgOiBrZXlzOwogIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoYmluZFByb3BlcnRpZXMoe30sIG8sIHsgeCwgeSB9KSwgUG9pbnQucHJvdG90eXBlKTsKfTsKCmV4cG9ydCBkZWZhdWx0IFBvaW50OwoKZGVmaW5lR2V0dGVyKFBvaW50LCBTeW1ib2wuc3BlY2llcywgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHRoaXM7Cn0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVBvaW50ID0gaW1tdXRhYmxlQ2xhc3MoUG9pbnQpOwpkZWZpbmVHZXR0ZXIoSW1tdXRhYmxlUG9pbnQsIFN5bWJvbC5zcGVjaWVzLCAoKSA9PiBJbW11dGFibGVQb2ludCk7CgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwKAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": ",define"
					},
					"BwAAAHUAAAAAAAAAdgAAAAAAAAAAAAAAdgAAAAAAAAB3AAAAAAAAAAAAAAB3AAAAAAAAAHgAAAAAAAAAAAAAAHgAAAAAAAAAeQAAAAAAAAAAAAAAeQAAAAAAAAB6AAAAAAAAAAAAAAB6AAAAAAAAAHsAAAAAAAAAAAAAAHsAAAAAAAAAfAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1AAAAAAAAAHUAAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAD3KAAAaW1wb3J0IHsgYmluZFByb3BlcnRpZXMsIGNsYW1wLCBkZWZpbmVHZXR0ZXIsIGltbXV0YWJsZUNsYXNzLCBpbnNwZWN0U3ltYm9sLCBpc09iamVjdCwgcm91bmREaWdpdHMsIHJvdW5kVG8sIHRyeUNhdGNoLGRlZmluZSB9IGZyb20gJy4uL21pc2MuanMnOwoKY29uc3QgU3ltU3BlY2llcyA9IHRyeUNhdGNoKAogICgpID0+IFN5bWJvbCwKICBzeW0gPT4gc3ltLnNwZWNpZXMKKTsKCmNvbnN0IENUT1IgPSBvYmogPT4gewogIGlmKG9ialtTeW1TcGVjaWVzXSkgcmV0dXJuIG9ialtTeW1TcGVjaWVzXTsKICBsZXQgcCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopOwogIGlmKHBbU3ltU3BlY2llc10pIHJldHVybiBwW1N5bVNwZWNpZXNdOwogIHJldHVybiBwLmNvbnN0cnVjdG9yOwp9OwoKZXhwb3J0IGZ1bmN0aW9uIFBvaW50KC4uLmFyZ3MpIHsKICBsZXQgaXNOZXcgPSB0aGlzIGluc3RhbmNlb2YgUG9pbnQ7CiAgYXJncyA9IGFyZ3NbMF0gaW5zdGFuY2VvZiBBcnJheSA/IGFyZ3Muc2hpZnQoKSA6IGFyZ3M7CiAgbGV0IHAgPSBpc05ldyA/IHRoaXMgOiBuZXcgUG9pbnQoLi4uYXJncyk7CiAgbGV0IGFyZyA9IGFyZ3Muc2hpZnQoKTsKCiAgaWYoIW5ldy50YXJnZXQpIGlmIChhcmcgaW5zdGFuY2VvZiBQb2ludCkgcmV0dXJuIGFyZzsKCiAgaWYodHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgIHAueCA9IGFyZzsKICAgIHAueSA9IGFyZ3Muc2hpZnQoKTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHsKICAgIHAueCA9IHBhcnNlRmxvYXQoYXJnKTsKICAgIHAueSA9IHBhcnNlRmxvYXQoYXJncy5zaGlmdCgpKTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHsKICAgIGNvbnN0IG1hdGNoZXMgPSBbLi4uYXJnLm1hdGNoQWxsKC8oWy0rXT9kKi4/ZCspKD86W2VFXShbLStdP2QrKSk/L2cpXTsKCiAgICBwLnggPSBwYXJzZUZsb2F0KG1hdGNoZXNbMF0pOwogICAgcC55ID0gcGFyc2VGbG9hdChtYXRjaGVzWzFdKTsKICB9IGVsc2UgaWYodHlwZW9mIGFyZyA9PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGwgJiYgKGFyZy54ICE9PSB1bmRlZmluZWQgfHwgYXJnLnkgIT09IHVuZGVmaW5lZCkpIHsKICAgIHAueCA9IGFyZy54OwogICAgcC55ID0gYXJnLnk7CiAgfSBlbHNlIGlmKHR5cGVvZiBhcmcgPT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsICYmIGFyZy5sZW5ndGggPiAwICYmIHggIT09IHVuZGVmaW5lZCAmJiB5ICE9PSB1bmRlZmluZWQpIHsKICAgIHAueCA9IHBhcnNlRmxvYXQoYXJnLnNoaWZ0KCkpOwogICAgcC55ID0gcGFyc2VGbG9hdChhcmcuc2hpZnQoKSk7CiAgfSBlbHNlIGlmKHR5cGVvZiBhcmdzWzBdID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ251bWJlcicpIHsKICAgIHAueCA9IGFyZ3NbMF07CiAgICBwLnkgPSBhcmdzWzFdOwogICAgYXJncy5zaGlmdCgyKTsKICB9IGVsc2UgewogICAgcC54ID0gMDsKICAgIHAueSA9IDA7CiAgfQogIGlmKHAueCA9PT0gdW5kZWZpbmVkKSBwLnggPSAwOwogIGlmKHAueSA9PT0gdW5kZWZpbmVkKSBwLnkgPSAwOwogIGlmKGlzTmFOKHAueCkpIHAueCA9IHVuZGVmaW5lZDsKICBpZihpc05hTihwLnkpKSBwLnkgPSB1bmRlZmluZWQ7CgogIGlmKCFpc05ldykgewogICAgLyogaWYocC5wcm90b3R5cGUgPT0gT2JqZWN0KSBwLnByb3RvdHlwZSA9IFBvaW50LnByb3RvdHlwZTsKICAgIGVsc2UgT2JqZWN0LmFzc2lnbihwLCBQb2ludC5wcm90b3R5cGUpOyovCiAgICByZXR1cm4gcDsKICB9Cn0KClBvaW50LmdldE90aGVyID0gYXJncyA9PiAoY29uc29sZS5kZWJ1ZygnZ2V0T3RoZXInLCAuLi5hcmdzKSwgdHlwZW9mIGFyZ3NbMF0gPT0gJ251bWJlcicgPyBbeyB4OiBhcmdzWzBdLCB5OiBhcmdzWzFdIH1dIDogYXJncyk7CgovKk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFBvaW50LnByb3RvdHlwZSwgewogIFg6IHsKICAgIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMueDsKICAgIH0KICB9LAogIFk6IHsKICAgIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMueTsKICAgIH0KICB9Cn0pOyovCgpkZWZpbmUoUG9pbnQucHJvdG90eXBlLCB7CiAgbW92ZSh4LCB5KSB7CiAgICB0aGlzLnggKz0geDsKICAgIHRoaXMueSArPSB5OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBtb3ZlVG8oeCwgeSkgewogICAgdGhpcy54ID0geDsKICAgIHRoaXMueSA9IHk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIGNsZWFyKHgsIHkpIHsKICAgIHRoaXMueCA9IDA7CiAgICB0aGlzLnkgPSAwOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBzZXQoZm4pIHsKICAgIGlmKHR5cGVvZiBmbiAhPSAnZnVuY3Rpb24nKSB7CiAgICAgIFBvaW50LmFwcGx5KHRoaXMsIFsuLi5hcmd1bWVudHNdKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICByZXR1cm4gZm4odGhpcy54LCB0aGlzLnkpOwogIH0sCiAgY2xvbmUoKSB7CiAgICBjb25zdCBjdG9yID0gdGhpc1tTeW1ib2wuc3BlY2llc10gfHwgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CgogICAgcmV0dXJuIG5ldyBjdG9yKHsgeDogdGhpcy54LCB5OiB0aGlzLnkgfSk7CiAgfSwKICBzdW0oLi4uYXJncykgewogICAgY29uc3QgcCA9IG5ldyBQb2ludCguLi5hcmdzKTsKICAgIGxldCByID0gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LCB0aGlzLnkpOwogICAgci54ICs9IHAueDsKICAgIHIueSArPSBwLnk7CiAgICByZXR1cm4gcjsKICB9LAogIGFkZCguLi5hcmdzKSB7CiAgICBjb25zdCBvdGhlciA9IG5ldyBQb2ludCguLi5hcmdzKTsKICAgIHRoaXMueCArPSBvdGhlci54OwogICAgdGhpcy55ICs9IG90aGVyLnk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIGRpZmYoYXJnKSB7CiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogICAgbGV0IGZuID0gZnVuY3Rpb24ob3RoZXIpIHsKICAgICAgbGV0IHIgPSBuZXcgUG9pbnQoeCwgeSk7CiAgICAgIHJldHVybiByLnN1YihvdGhlcik7CiAgICB9OwogICAgaWYoYXJnKSByZXR1cm4gZm4oYXJnKTsKICAgIHJldHVybiBmbjsKICB9LAogIHN1YiguLi5hcmdzKSB7CiAgICBjb25zdCBvdGhlciA9IG5ldyBQb2ludCguLi5hcmdzKTsKICAgIHRoaXMueCAtPSBvdGhlci54OwogICAgdGhpcy55IC09IG90aGVyLnk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHByb2QoZikgewogICAgY29uc3QgbyA9IGlzUG9pbnQoZikgPyBmIDogeyB4OiBmLCB5OiBmIH07CiAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMueCAqIG8ueCwgdGhpcy55ICogby55KTsKICB9LAogIG11bChmKSB7CiAgICBjb25zdCBvID0gaXNQb2ludChmKSA/IGYgOiB7IHg6IGYsIHk6IGYgfTsKICAgIHRoaXMueCAqPSBvLng7CiAgICB0aGlzLnkgKj0gby55OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBxdW90KG90aGVyKSB7CiAgICBvdGhlciA9IGlzUG9pbnQob3RoZXIpID8gb3RoZXIgOiB7IHg6IG90aGVyLCB5OiBvdGhlciB9OwogICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLnggLyBvdGhlci54LCB0aGlzLnkgLyBvdGhlci55KTsKICB9LAogIGRpdihvdGhlcikgewogICAgb3RoZXIgPSBpc1BvaW50KG90aGVyKSA/IG90aGVyIDogeyB4OiBvdGhlciwgeTogb3RoZXIgfTsKICAgIHRoaXMueCAvPSBvdGhlci54OwogICAgdGhpcy55IC89IG90aGVyLnk7CiAgICByZXR1cm4gdGhpczsKICB9LAogIGNvbXAoKSB7CiAgICByZXR1cm4gbmV3IFBvaW50KHsgeDogLXRoaXMueCwgeTogLXRoaXMueSB9KTsKICB9LAogIG5lZygpIHsKICAgIHRoaXMueCAqPSAtMTsKICAgIHRoaXMueSAqPSAtMTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgZGlzdGFuY2VTcXVhcmVkKG90aGVyID0geyB4OiAwLCB5OiAwIH0pIHsKICAgIHJldHVybiAob3RoZXIueSAtIHRoaXMueSkgKiAob3RoZXIueSAtIHRoaXMueSkgKyAob3RoZXIueCAtIHRoaXMueCkgKiAob3RoZXIueCAtIHRoaXMueCk7CiAgfSwKICBkaXN0YW5jZShvdGhlciA9IHsgeDogMCwgeTogMCB9KSB7CiAgICByZXR1cm4gTWF0aC5zcXJ0KFBvaW50LnByb3RvdHlwZS5kaXN0YW5jZVNxdWFyZWQuY2FsbCh0aGlzLCBQb2ludChvdGhlcikpKTsKICB9LAogIGVxdWFscyhvdGhlcikgewogICAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICAgIHJldHVybiAreCA9PSArb3RoZXIueCAmJiAreSA9PSArb3RoZXIueTsKICB9LAogIHJvdW5kKHByZWNpc2lvbiA9IDAuMDAxLCBkaWdpdHMsIHR5cGUpIHsKICAgIGxldCB7IHgsIHkgfSA9IHRoaXM7CiAgICBkaWdpdHMgPSBkaWdpdHMgfHwgcm91bmREaWdpdHMocHJlY2lzaW9uKTsKICAgIHR5cGUgPSB0eXBlIHx8ICdyb3VuZCc7CiAgICB0aGlzLnggPSByb3VuZFRvKHgsIHByZWNpc2lvbiwgZGlnaXRzLCB0eXBlKTsKICAgIHRoaXMueSA9IHJvdW5kVG8oeSwgcHJlY2lzaW9uLCBkaWdpdHMsIHR5cGUpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBjZWlsKCkgewogICAgbGV0IHsgeCwgeSB9ID0gdGhpczsKICAgIHRoaXMueCA9IE1hdGguY2VpbCh4KTsKICAgIHRoaXMueSA9IE1hdGguY2VpbCh5KTsKICAgIHJldHVybiB0aGlzOwogIH0sCiAgZmxvb3IoKSB7CiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzOwogICAgdGhpcy54ID0gTWF0aC5mbG9vcih4KTsKICAgIHRoaXMueSA9IE1hdGguZmxvb3IoeSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBkb3Qob3RoZXIpIHsKICAgIHJldHVybiB0aGlzLnggKiBvdGhlci54ICsgdGhpcy55ICogb3RoZXIueTsKICB9LAoKICB2YWx1ZXMoKSB7CiAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTsKICB9LAogIGZyb21BbmdsZShhbmdsZSwgZGlzdCA9IDEuMCkgewogICAgdGhpcy54ID0gTWF0aC5jb3MoYW5nbGUpICogZGlzdDsKICAgIHRoaXMueSA9IE1hdGguc2luKGFuZ2xlKSAqIGRpc3Q7CiAgICByZXR1cm4gdGhpczsKICB9LAogIHRvQW5nbGUoZGVnID0gZmFsc2UpIHsKICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueCwgdGhpcy55KSAqIChkZWcgPyAxODAgLyBNYXRoLlBJIDogMSk7CiAgfSwKICBhbmdsZShvdGhlciwgZGVnID0gZmFsc2UpIHsKICAgIG90aGVyID0gb3RoZXIgfHwgeyB4OiAwLCB5OiAwIH07CiAgICByZXR1cm4gUG9pbnQucHJvdG90eXBlLmRpZmYuY2FsbCh0aGlzLCBvdGhlcikudG9BbmdsZShkZWcpOwogIH0sCiAgcm90YXRlKGFuZ2xlLCBvcmlnaW4gPSB7IHg6IDAsIHk6IDAgfSkgewogICAgdGhpcy54IC09IG9yaWdpbi54OwogICAgdGhpcy55IC09IG9yaWdpbi55OwogICAgbGV0IGMgPSBNYXRoLmNvcyhhbmdsZSksCiAgICAgIHMgPSBNYXRoLnNpbihhbmdsZSk7CiAgICBsZXQgeG5ldyA9IHRoaXMueCAqIGMgLSB0aGlzLnkgKiBzOwogICAgbGV0IHluZXcgPSB0aGlzLnggKiBzICsgdGhpcy55ICogYzsKICAgIHRoaXMueCA9IHhuZXc7CiAgICB0aGlzLnkgPSB5bmV3OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICB2YWx1ZU9mKHNobCA9IDE2KSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CgogICAgaWYoc2hsIDwgMCkgcmV0dXJuIHggKiAoMSA8PCBNYXRoLmFicyhzaGwpKSArIHk7CgogICAgcmV0dXJuIHggKyB5ICogKDEgPDwgc2hsKTsKICB9LAogIHRvU3RyaW5nKG9wdHMgPSB7fSkgewogICAgY29uc3QgeyBwcmVjaXNpb24gPSAwLjAwMSwgdW5pdCA9ICcnLCBzZXBhcmF0b3IgPSAnLCcsIGxlZnQgPSAnJywgcmlnaHQgPSAnJywgcGFkID0gMCB9ID0gb3B0czsKICAgIGxldCB4ID0gcm91bmRUbyh0aGlzLngsIHByZWNpc2lvbik7CiAgICBsZXQgeSA9IHJvdW5kVG8odGhpcy55LCBwcmVjaXNpb24pOwogICAgaWYocGFkID4gMCkgewogICAgICB4ID0geCArICcnOwogICAgICB5ID0geSArICcnOwogICAgICBpZih5WzBdICE9ICctJykgeSA9ICcgJyArIHk7CiAgICAgIGlmKHhbMF0gIT0gJy0nKSB4ID0gJyAnICsgeDsKICAgIH0KICAgIC8vY29uc29sZS5kZWJ1ZygidG9TdHJpbmciLCB7eCx5fSwge3BhZH0pOwogICAgcmV0dXJuIGAke2xlZnR9JHsoeCArICcnKS5wYWRTdGFydChwYWQsICcgJyl9JHt1bml0fSR7c2VwYXJhdG9yfSR7KHkgKyAnJykucGFkRW5kKHBhZCwgJyAnKX0ke3VuaXR9JHtyaWdodH1gOwogIH0sCiAgdG9Tb3VyY2Uob3B0cyA9IHt9KSB7CiAgICBjb25zdCB7IGFzQXJyYXkgPSBmYWxzZSwgcGxhaW5PYmogPSBmYWxzZSwgcGFkID0gYSA9PiBhIC8qYS5wYWRTdGFydCg0LCAnICcpKi8sIHNob3dOZXcgPSB0cnVlIH0gPSBvcHRzOwogICAgbGV0IHggPSBwYWQodGhpcy54ICsgJycpOwogICAgbGV0IHkgPSBwYWQodGhpcy55ICsgJycpOwogICAgbGV0IGMgPSB0ID0+IHQ7CiAgICBpZih0eXBlb2YgdGhpcyAhPSAnb2JqZWN0JyB8fCB0aGlzID09PSBudWxsKSByZXR1cm4gJyc7CiAgICBpZihhc0FycmF5KSByZXR1cm4gYFske3h9LCR7eX1dYDsKICAgIGlmKHBsYWluT2JqKSByZXR1cm4gYHt4OiR7eH0seToke3l9fWA7CgogICAgcmV0dXJuIGAke2Moc2hvd05ldyA/ICduZXcgJyA6ICcnLCAxLCAzMSl9JHtjKCdQb2ludCcsIDEsIDMzKX0ke2MoJygnLCAxLCAzNil9JHtjKHgsIDEsIDMyKX0ke2MoJywnLCAxLCAzNil9JHtjKHksIDEsIDMyKX0ke2MoJyknLCAxLCAzNil9YDsKICB9LAoKICB0b09iamVjdChwcm90byA9IFBvaW50LnByb3RvdHlwZSkgewogICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzOwogICAgY29uc3Qgb2JqID0geyB4LCB5IH07CiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqLCBwcm90byk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgdG9DU1MocHJlY2lzaW9uID0gMC4wMDEsIGVkZ2VzID0gWydsZWZ0JywgJ3RvcCddKSB7CiAgICByZXR1cm4gewogICAgICBbZWRnZXNbMF1dOiByb3VuZFRvKHRoaXMueCwgcHJlY2lzaW9uKSArICdweCcsCiAgICAgIFtlZGdlc1sxXV06IHJvdW5kVG8odGhpcy55LCBwcmVjaXNpb24pICsgJ3B4JwogICAgfTsKICB9LAogIHRvRml4ZWQoZGlnaXRzKSB7CiAgICByZXR1cm4gbmV3IFBvaW50KCt0aGlzLngudG9GaXhlZChkaWdpdHMpLCArdGhpcy55LnRvRml4ZWQoZGlnaXRzKSk7CiAgfSwKICBpc051bGwoKSB7CiAgICByZXR1cm4gdGhpcy54ID09IDAgJiYgdGhpcy55ID09IDA7CiAgfSwKICBpbnNpZGUocmVjdCkgewogICAgcmV0dXJuIHRoaXMueCA+PSByZWN0LnggJiYgdGhpcy54IDwgcmVjdC54ICsgcmVjdC53aWR0aCAmJiB0aGlzLnkgPj0gcmVjdC55ICYmIHRoaXMueSA8IHJlY3QueSArIHJlY3QuaGVpZ2h0OwogIH0sCiAgdHJhbnNmb3JtKG0sIHJvdW5kID0gdHJ1ZSkgewogICAgaWYoaXNPYmplY3QobSkgJiYgdHlwZW9mIG0udG9NYXRyaXggPT0gJ2Z1bmN0aW9uJykgbSA9IG0udG9NYXRyaXgoKTsKICAgIC8vaWYoaXNPYmplY3QobSkgJiYgdHlwZW9mIG0udHJhbnNmb3JtUG9pbnQgPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG0udHJhbnNmb3JtUG9pbnQodGhpcyk7CgogICAgY29uc3QgeCA9IG1bMF0gKiB0aGlzLnggKyBtWzFdICogdGhpcy55ICsgbVsyXTsKICAgIGNvbnN0IHkgPSBtWzNdICogdGhpcy54ICsgbVs0XSAqIHRoaXMueSArIG1bNV07CgogICAgdGhpcy54ID0geDsKICAgIHRoaXMueSA9IHk7CiAgICBpZihyb3VuZCkgUG9pbnQucHJvdG90eXBlLnJvdW5kLmNhbGwodGhpcywgMWUtMTMsIDEzKTsKCiAgICByZXR1cm4gdGhpczsKICB9LAogIHNjYWxlVG8obWlubWF4KSB7CiAgICByZXR1cm4gbmV3IFBvaW50KHsKICAgICAgeDogKHRoaXMueCAtIG1pbm1heC54MSkgLyAobWlubWF4LngyIC0gbWlubWF4LngxKSwKICAgICAgeTogKHRoaXMueSAtIG1pbm1heC55MSkgLyAobWlubWF4LnkyIC0gbWlubWF4LnkxKQogICAgfSk7CiAgfSwKICBub3JtYWxpemUoKSB7CiAgICBsZXQgZCA9IFBvaW50LnByb3RvdHlwZS5kaXN0YW5jZS5jYWxsKHRoaXMpOwogICAgcmV0dXJuIFBvaW50LnByb3RvdHlwZS5kaXYuY2FsbCh0aGlzLCB7IHg6IGQsIHk6IGQgfSk7CiAgfSwKICBub3JtYWwoKSB7CiAgICBsZXQgZCA9IFBvaW50LnByb3RvdHlwZS5kaXN0YW5jZS5jYWxsKHRoaXMpOwogICAgcmV0dXJuIG5ldyBQb2ludCh7IHg6IHRoaXMueCAvIGQsIHk6IHRoaXMueSAvIGQgfSk7CiAgfSwKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdGlvbnMpIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICAgIHJldHVybiBkZWZpbmUoeyB4LCB5IH0sIHsgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdQb2ludCcgfSk7CiAgfSwKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1BvaW50Jwp9KTsKCmRlZmluZUdldHRlcihQb2ludC5wcm90b3R5cGUsIFN5bWJvbC5pdGVyYXRvciwgZnVuY3Rpb24oKSB7CiAgY29uc3QgeyB4LCB5IH0gPSB0aGlzOwogIGxldCBhID0gW3gsIHldOwogIHJldHVybiBhW1N5bWJvbC5pdGVyYXRvcl0uYmluZChhKTsKfSk7CgpQb2ludC5mcm9tU3RyaW5nID0gc3RyID0+IG5ldyBQb2ludCguLi5zdHIuc3BsaXQoL1teLS4wLTldKy9nKS5tYXAobiA9PiArbikpOwpQb2ludC5tb3ZlID0gKHBvaW50LCB4LCB5KSA9PiBQb2ludC5wcm90b3R5cGUubW92ZS5jYWxsKHBvaW50LCB4LCB5KTsKUG9pbnQuYW5nbGUgPSAocG9pbnQsIG90aGVyLCBkZWcgPSBmYWxzZSkgPT4gUG9pbnQucHJvdG90eXBlLmFuZ2xlLmNhbGwocG9pbnQsIG90aGVyLCBkZWcpOwpQb2ludC5pbnNpZGUgPSAocG9pbnQsIHJlY3QpID0+IFBvaW50LnByb3RvdHlwZS5pbnNpZGUuY2FsbChwb2ludCwgcmVjdCk7ClBvaW50LnN1YiA9IChwb2ludCwgb3RoZXIpID0+IFBvaW50LnByb3RvdHlwZS5zdWIuY2FsbChwb2ludCwgb3RoZXIpOwpQb2ludC5wcm9kID0gKGEsIGIpID0+IFBvaW50LnByb3RvdHlwZS5wcm9kLmNhbGwoYSwgYik7ClBvaW50LnF1b3QgPSAoYSwgYikgPT4gUG9pbnQucHJvdG90eXBlLnF1b3QuY2FsbChhLCBiKTsKUG9pbnQuZXF1YWxzID0gKGEsIGIpID0+IFBvaW50LnByb3RvdHlwZS5lcXVhbHMuY2FsbChhLCBiKTsKUG9pbnQucm91bmQgPSAocG9pbnQsIHByZWMsIGRpZ2l0cywgdHlwZSkgPT4gUG9pbnQucHJvdG90eXBlLnJvdW5kLmNhbGwocG9pbnQsIHByZWMsIGRpZ2l0cywgdHlwZSk7ClBvaW50LmZyb21BbmdsZSA9IChhbmdsZSwgZikgPT4gbmV3IFBvaW50KCkuZnJvbUFuZ2xlKGFuZ2xlLCBmKTsKCmZvcihsZXQgbmFtZSBvZiBbCiAgJ2Nsb25lJywKICAnY29tcCcsCiAgJ25lZycsCiAgJ3NpZGVzJywKICAnZGltZW5zaW9uJywKICAndG9TdHJpbmcnLAogIC8vJ3RvU291cmNlJywKICAndG9DU1MnLAogICdzdWInLAogICdkaWZmJywKICAnYWRkJywKICAnc3VtJywKICAnZGlzdGFuY2UnCl0pIHsKICBQb2ludFtuYW1lXSA9IChwb2ludCwgLi4uYXJncykgPT4gUG9pbnQucHJvdG90eXBlW25hbWVdLmNhbGwoUG9pbnQocG9pbnQpLCAuLi5hcmdzKTsKfQpQb2ludC5pbnRlcnBvbGF0ZSA9IChwMSwgcDIsIGEpID0+IHsKICBhID0gY2xhbXAoMCwgMSwgYSk7CiAgcmV0dXJuIG5ldyBQb2ludChwMS54ICogKDEuMCAtIGEpICsgcDIueCAqIGEsIHAxLnkgKiAoMS4wIC0gYSkgKyBwMi55ICogYSk7Cn07CgpQb2ludC50b1NvdXJjZSA9IChwb2ludCwgeyBzcGFjZSA9ICcgJywgcGFkZGluZyA9ICcgJywgc2VwYXJhdG9yID0gJywnIH0pID0+IGB7JHtwYWRkaW5nfXg6JHtzcGFjZX0ke3BvaW50Lnh9JHtzZXBhcmF0b3J9eToke3NwYWNlfSR7cG9pbnQueX0ke3BhZGRpbmd9fWA7CgpleHBvcnQgY29uc3QgaXNQb2ludCA9IG8gPT4KICBvICYmCiAgKChvLnggIT09IHVuZGVmaW5lZCAmJiBvLnkgIT09IHVuZGVmaW5lZCkgfHwKICAgICgoby5sZWZ0ICE9PSB1bmRlZmluZWQgfHwgby5yaWdodCAhPT0gdW5kZWZpbmVkKSAmJiAoby50b3AgIT09IHVuZGVmaW5lZCB8fCBvLmJvdHRvbSAhPT0gdW5kZWZpbmVkKSkgfHwKICAgIG8gaW5zdGFuY2VvZiBQb2ludCB8fAogICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pLmNvbnN0cnVjdG9yID09PSBQb2ludCk7CgpQb2ludC5pc1BvaW50ID0gaXNQb2ludDsKClBvaW50LmJpbmQgPSAobywga2V5cywgZykgPT4gewogIGtleXMgPz89IFsneCcsICd5J107CiAgbyA/Pz0gbmV3IFBvaW50KCk7CiAgZyA/Pz0gayA9PiB2YWx1ZSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gKG9ba10gPSB2YWx1ZSkgOiBvW2tdOwoKICBjb25zdCB7IHgsIHkgfSA9IEFycmF5LmlzQXJyYXkoa2V5cykgPyBrZXlzLnJlZHVjZSgoYWNjLCBuYW1lLCBpKSA9PiAoeyAuLi5hY2MsIFtrZXlzW2ldXTogbmFtZSB9KSwge30pIDoga2V5czsKICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGJpbmRQcm9wZXJ0aWVzKHt9LCBvLCB7IHgsIHkgfSksIFBvaW50LnByb3RvdHlwZSk7Cn07CgpleHBvcnQgZGVmYXVsdCBQb2ludDsKCmRlZmluZUdldHRlcihQb2ludCwgU3ltYm9sLnNwZWNpZXMsIGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzOwp9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVQb2ludCA9IGltbXV0YWJsZUNsYXNzKFBvaW50KTsKZGVmaW5lR2V0dGVyKEltbXV0YWJsZVBvaW50LCBTeW1ib2wuc3BlY2llcywgKCkgPT4gSW1tdXRhYmxlUG9pbnQpOwoAAAAAAAAAAPgoAAAAAAAAAAAAAAAAAAAAAAAA+CgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB8AAAAAAAAAHwAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/geom/matrix.js",
			"settings":
			{
				"buffer_size": 20683,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": "inspectSymbol"
					},
					"DgAAAMU+AAAAAAAAxj4AAAAAAAAAAAAAxj4AAAAAAADGPgAAAAAAACgAAABTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpxj4AAAAAAADHPgAAAAAAAAAAAADHPgAAAAAAAMg+AAAAAAAAAAAAAMg+AAAAAAAAyT4AAAAAAAAAAAAAyT4AAAAAAADKPgAAAAAAAAAAAADKPgAAAAAAAMs+AAAAAAAAAAAAAMs+AAAAAAAAzD4AAAAAAAAAAAAAzD4AAAAAAADNPgAAAAAAAAAAAADNPgAAAAAAAM4+AAAAAAAAAAAAAM4+AAAAAAAAzz4AAAAAAAAAAAAAzz4AAAAAAADQPgAAAAAAAAAAAADQPgAAAAAAANE+AAAAAAAAAAAAANE+AAAAAAAA0j4AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAxT4AAAAAAADtPgAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAAFMAAAAAAAAAUwAAAAAAAAABAAAAIA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAVAAAAAAAAABUAAAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAFMAAAAAAAAAVAAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAUwAAAAAAAABTAAAAAAAAAAAAAAAAAPC/"
				],
				[
					14,
					1,
					"insert",
					{
						"characters": " inspec"
					},
					"BwAAAFQAAAAAAAAAVQAAAAAAAAAAAAAAVQAAAAAAAABWAAAAAAAAAAAAAABWAAAAAAAAAFcAAAAAAAAAAAAAAFcAAAAAAAAAWAAAAAAAAAAAAAAAWAAAAAAAAABZAAAAAAAAAAAAAABZAAAAAAAAAFoAAAAAAAAAAAAAAFoAAAAAAAAAWwAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAVAAAAAAAAABUAAAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"insert_completion",
					{
						"completion": "inspectSymbol",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "inspectSymbol"
					},
					"AgAAAFUAAAAAAAAAVQAAAAAAAAAGAAAAaW5zcGVjVQAAAAAAAABiAAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAWwAAAAAAAABbAAAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGIAAAAAAAAAYwAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAYgAAAAAAAABiAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/geom/transformation.js",
			"settings":
			{
				"buffer_size": 21584,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAEAPAAAAAAAAQQ8AAAAAAAAAAAAAQQ8AAAAAAABBDwAAAAAAAE8AAAAKICAvKiBbU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0oKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSov",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAQA8AAAAAAACPDwAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAgWAAAaW1wb3J0IHsgTWF0cml4LCBpc01hdHJpeCB9IGZyb20gJy4uL2dlb20vbWF0cml4LmpzJzsKaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9nZW9tL3BvaW50LmpzJzsKaW1wb3J0IFV0aWwgZnJvbSAnLi4vdXRpbC5qcyc7Cgpjb25zdCBSQUQyREVHID0gMTgwIC8gTWF0aC5QSTsKY29uc3QgREVHMlJBRCA9IE1hdGguUEkgLyAxODA7CgpleHBvcnQgY2xhc3MgVHJhbnNmb3JtYXRpb24gewogIC8vdHlwZU5hbWUgPSBudWxsOwoKICBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm1hdGlvbikgewogICAgaWYodHJhbnNmb3JtYXRpb24gaW5zdGFuY2VvZiBUcmFuc2Zvcm1hdGlvbikgcmV0dXJuIHRyYW5zZm9ybWF0aW9uOwogICAgaWYodHJhbnNmb3JtYXRpb24gaW5zdGFuY2VvZiBUcmFuc2Zvcm1hdGlvbkxpc3QpIHJldHVybiB0cmFuc2Zvcm1hdGlvbjsKCiAgICBpZih0eXBlb2YgdHJhbnNmb3JtYXRpb24gPT0gJ3N0cmluZycpIHJldHVybiBUcmFuc2Zvcm1hdGlvbi5mcm9tU3RyaW5nKHRyYW5zZm9ybWF0aW9uKTsKICAgIC8vVXRpbC5kZWZpbmUodGhpcywgeyB0eXBlTmFtZSB9KTsKICAgIC8vdGhpcy50eXBlID0gdHlwZTsKICAgIC8vCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUcmFuc2Zvcm1hdGlvbicpOwoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIFV0aWwuZnVuY3Rpb25OYW1lKHRoaXMuY29uc3RydWN0b3IpOwogIH0KCiAgZ2V0IHR5cGUoKSB7CiAgICBsZXQgdHlwZSA9CiAgICAgIHRoaXMudHlwZU5hbWUgfHwKICAgICAgVXRpbC5jbGFzc05hbWUodGhpcykKICAgICAgICAudG9Mb3dlckNhc2UoKQogICAgICAgIC5yZXBsYWNlKC90cmFuc2Zvcm0oYXRpb24pPy8sICcnKQogICAgICAgIC5yZXBsYWNlKC8oaW9ufGluZykkLywgJ2UnKTsKICAgIHJldHVybiB0eXBlOwogIH0KCiAgZ2V0IFtTeW1ib2wuaXNDb25jYXRTcHJlYWRhYmxlXSgpIHsKICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yID09PSBUcmFuc2Zvcm1hdGlvbkxpc3QgfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpID09IFRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUgfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yID09IFRyYW5zZm9ybWF0aW9uTGlzdDsKICB9CiAgZ2V0IGF4ZXMoKSB7CiAgICByZXR1cm4gdGhpcy5heGlzICE9PSB1bmRlZmluZWQgPyBbdGhpcy5heGlzXSA6IFsneCcsICd5JywgJ3onXS5maWx0ZXIoYXhpcyA9PiBheGlzIGluIHRoaXMpOwogIH0KICBnZXQgcHJvcHMoKSB7CiAgICByZXR1cm4gdGhpcy5heGVzLmNvbmNhdChbJ2F4aXMnLCAnYW5nbGUnXS5maWx0ZXIoa2V5ID0+IGtleSBpbiB0aGlzKSk7CiAgfQoKICBoYXMoYXhpcykgewogICAgaWYodGhpcy5heGlzICE9PSB1bmRlZmluZWQpIHJldHVybiBheGlzID09PSB0aGlzLmF4aXM7CiAgICByZXR1cm4gYXhpcyBpbiB0aGlzOwogIH0KCiAgZ2V0IGlzM0QoKSB7CiAgICByZXR1cm4gdGhpcy5oYXMoJ3onKTsKICB9CgogIGVudHJpZXMoKSB7CiAgICByZXR1cm4gdGhpcy5wcm9wcy5tYXAocHJvcCA9PiBbcHJvcCwgdGhpc1twcm9wXV0pOwogIH0KCiAgdG9KU09OKCkgewogICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmVudHJpZXMoKSk7CiAgfQoKICB2ZWN0b3IodW5pdCkgewogICAgaWYodW5pdCA9PT0gdW5kZWZpbmVkKSB1bml0ID0gdGhpcy51bml0OwogICAgcmV0dXJuICh0aGlzLmlzM0QgPyBbJ3gnLCAneScsICd6J10gOiBbJ3gnLCAneSddKS5tYXAodW5pdCA/IGF4aXMgPT4gdGhpc1theGlzXSArIHVuaXQgOiBheGlzID0+IHRoaXNbYXhpc10pOwogIH0KCiAgdG9TdHJpbmcodFVuaXQpIHsKICAgIHJldHVybiBgJHt0aGlzLnR5cGV9JHt0aGlzLmlzM0QgPyAnM2QnIDogJyd9KCR7dGhpcy52ZWN0b3IodFVuaXQpLmpvaW4oJywgJyl9KWA7CiAgfQoKICAvKiAgdG9Tb3VyY2UodW5pdCkgewogICAgcmV0dXJuIFV0aWwuY29sb3JUZXh0KCduZXcgJywxLDMxKStVdGlsLmNvbG9yVGV4dChVdGlsLmNsYXNzTmFtZSh0aGlzKSwgMSwzMykgK1V0aWwuY29sb3JUZXh0KCcoJyArdGhpcy52ZWN0b3IodW5pdCkuam9pbignLCAnKSArICcpJywgMSAsMzYpOwogIH0qLwoKICBjbG9uZSgpIHsKICAgIGxldCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModGhpcyk7CiAgICBsZXQgcHJvcHMgPSB0aGlzLnByb3BzLnJlZHVjZSgoYWNjLCBwcm9wKSA9PiAoeyAuLi5hY2MsIFtwcm9wXTogZGVzY1twcm9wXSB9KSwge30pOwogICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLCBwcm9wcyk7CiAgfQoKICBzdGF0aWMgZnJvbVN0cmluZyhhcmcpIHsKICAgIGxldCBjbWRMZW4gPSBhcmcuaW5kZXhPZignKCcpOwogICAgbGV0IGFyZ1N0ciA9IGFyZy5zbGljZShjbWRMZW4gKyAxLCBhcmcuaW5kZXhPZignKScpKTsKICAgIGxldCBhcmdzID0gYXJnU3RyLnNwbGl0KC9bLFxzXCBdKy9nKTsKICAgIGxldCBjbWQgPSBhcmcuc3Vic3RyaW5nKDAsIGNtZExlbik7CiAgICBsZXQgdDsKICAgIGxldCB1bml0OwoKICAgIGFyZ3MgPSBhcmdzCiAgICAgIC5maWx0ZXIoYXJnID0+IC9eWy0rMC05Ll0rW2Etel0qJC8udGVzdChhcmcpKQogICAgICAubWFwKGFyZyA9PiB7CiAgICAgICAgaWYoL1thLXpdJC8udGVzdChhcmcpKSB7CiAgICAgICAgICB1bml0ID0gYXJnLnJlcGxhY2UoL1stKzAtOS5dKi9nLCAnJyk7CiAgICAgICAgICBhcmcgPSBhcmcucmVwbGFjZSgvW2Etel0qJC9nLCAnJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gK2FyZzsKICAgICAgfSk7CiAgICAvL2NvbnNvbGUubG9nKCdmcm9tU3RyaW5nJywgeyBjbWQsIGFyZ3MgfSk7CgogICAgY29uc3QgaXMzRCA9IGNtZC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCczZCcpOwogICAgaWYoaXMzRCkgY21kID0gY21kLnNsaWNlKDAsIC0yKTsKCiAgICBpZihjbWQuc3RhcnRzV2l0aCgncm90YXQnKSkgewogICAgICBjb25zdCBheGlzID0gaXMzRCA/ICcnIDogY21kLnNsaWNlKDYpOwogICAgICBhcmdzID0gYXhpcyAhPSAnJyA/IFthcmdzWzBdLCBheGlzXSA6IGFyZ3M7CiAgICAgIHQgPSBuZXcgUm90YXRpb24oLi4uYXJncyk7CiAgICB9IGVsc2UgaWYoY21kLnN0YXJ0c1dpdGgoJ3RyYW5zbGF0JykpIHsKICAgICAgY29uc3QgYXhpcyA9IGlzM0QgPyAnJyA6IGNtZC5zbGljZSg5KTsKICAgICAgYXJncyA9IGF4aXMgIT0gJycgPyBbYXJnc1swXSwgYXhpc10gOiBhcmdzOwogICAgICB0ID0gbmV3IFRyYW5zbGF0aW9uKC4uLmFyZ3MpOwogICAgfSBlbHNlIGlmKGNtZC5zdGFydHNXaXRoKCdzY2FsJykpIHsKICAgICAgY29uc3QgYXhpcyA9IGlzM0QgPyAnJyA6IGNtZC5zbGljZSg1KTsKICAgICAgYXJncyA9IGF4aXMgIT0gJycgPyBbYXJnc1swXSwgYXhpc10gOiBhcmdzOwogICAgICB0ID0gbmV3IFNjYWxpbmcoLi4uYXJncyk7CiAgICB9IGVsc2UgaWYoY21kLnN0YXJ0c1dpdGgoJ21hdHJpeCcpKSB7CiAgICAgIGNvbnN0IFthLCBiLCBjLCBkLCBlLCBmXSA9IGFyZ3M7CiAgICAgIHQgPSBuZXcgTWF0cml4VHJhbnNmb3JtYXRpb24oYSwgYywgZSwgYiwgZCwgZik7CiAgICB9CiAgICBpZih1bml0KSB0LnVuaXQgPSB1bml0OwogICAgcmV0dXJuIHQ7CiAgfQoKICAvKltTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTsKICB9Ki8KCiAgW1N5bWJvbC50b1ByaW1pdGl2ZV0oaGludCkgewogICAgLy8gY29uc29sZS5sb2coImhpbnQ6IixoaW50KTsKICAgIGlmKGhpbnQgPT0gJ3N0cmluZycgfHwgaGludCA9PSAnZGVmYXVsdCcpIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7CgogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKSAhPSAnJzsKICB9CiAKCiAgc3RhdGljIGdldCByb3RhdGlvbigpIHsKICAgIHJldHVybiBSb3RhdGlvbjsKICB9CiAgc3RhdGljIGdldCB0cmFuc2xhdGlvbigpIHsKICAgIHJldHVybiBUcmFuc2xhdGlvbjsKICB9CiAgc3RhdGljIGdldCBzY2FsaW5nKCkgewogICAgcmV0dXJuIFNjYWxpbmc7CiAgfQogIHN0YXRpYyBnZXQgbWF0cml4KCkgewogICAgcmV0dXJuIE1hdHJpeFRyYW5zZm9ybWF0aW9uOwogIH0KfQoKLy9UcmFuc2Zvcm1hdGlvbi5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXT0nVHJhbnNmb3JtYXRpb24nOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybWF0aW9uLCBTeW1ib2wuaGFzSW5zdGFuY2UsIHsKICB2YWx1ZShpbnN0KSB7CiAgICByZXR1cm4gW1RyYW5zZm9ybWF0aW9uLCBNYXRyaXhUcmFuc2Zvcm1hdGlvbiwgUm90YXRpb24sIFRyYW5zbGF0aW9uLCBTY2FsaW5nLCBUcmFuc2Zvcm1hdGlvbkxpc3RdLnNvbWUoY3RvciA9PiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5zdCkgPT0gY3Rvci5wcm90b3R5cGUpOwogIH0KfSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlVHJhbnNmb3JtYXRpb24gPSBVdGlsLmltbXV0YWJsZUNsYXNzKFRyYW5zZm9ybWF0aW9uKTsKCmV4cG9ydCBjbGFzcyBSb3RhdGlvbiBleHRlbmRzIFRyYW5zZm9ybWF0aW9uIHsKICBhbmdsZSA9IDA7CiAgLy9heGlzID0gdW5kZWZpbmVkOwoKICBjb25zdHJ1Y3RvcihhbmdsZSwgeCwgeSkgewogICAgc3VwZXIoJ3JvdGF0ZScpOwoKICAgIGlmKHR5cGVvZiB4ID09ICdzdHJpbmcnICYmIFsneCcsICd5JywgJ3onXS5pbmRleE9mKHgudG9Mb3dlckNhc2UoKSkgIT0gLTEpIHsKICAgICAgdGhpcy5heGlzID0geC50b0xvd2VyQ2FzZSgpOwogICAgfSBlbHNlIGlmKCFpc05hTigreCkgJiYgIWlzTmFOKCt5KSkgewogICAgICB0aGlzLmNlbnRlciA9IFsreCwgK3ldOwogICAgfQogICAgLy9lbHNlIHRoaXMuYXhpcyA9ICd6JzsKICAgIHRoaXMuYW5nbGUgPSBhbmdsZTsKICB9CgogIGludmVydCgpIHsKICAgIHJldHVybiBuZXcgUm90YXRpb24oLXRoaXMuYW5nbGUsIHRoaXMuYXhpcyk7CiAgfQoKICBnZXQgdmFsdWVzKCkgewogICAgcmV0dXJuIHsgW3RoaXMuYXhpcyB8fCAneiddOiB0aGlzLmFuZ2xlIH07CiAgfQoKICBnZXQgaXMzRCgpIHsKICAgIHJldHVybiB0aGlzLmF4aXMgPT0gJ3onOwogIH0KCiAgaXNaZXJvKCkgewogICAgcmV0dXJuIHRoaXMuYW5nbGUgPT0gMDsKICB9CgogIHRvU3RyaW5nKHJVbml0KSB7CiAgICByVW5pdCA9IHJVbml0IHx8IHRoaXMudW5pdCB8fCAnJzsKICAgIGNvbnN0IGF4aXMgPSB0aGlzLmF4aXMgIT09IHVuZGVmaW5lZCA/IHRoaXMuYXhpcy50b1VwcGVyQ2FzZSgpIDogJyc7CiAgICBjb25zdCBhbmdsZSA9IHRoaXMuY29uc3RydWN0b3IuY29udmVydEFuZ2xlKHRoaXMuYW5nbGUsIHJVbml0KTsKICAgIHJldHVybiBgcm90YXRlJHt0aGlzLmlzM0QgPyBheGlzIDogJyd9KCR7YW5nbGV9JHtyVW5pdH0ke3RoaXMuY2VudGVyID8gdGhpcy5jZW50ZXIubWFwKGNvb3JkID0+IGAsICR7Y29vcmR9YCkuam9pbignJykgOiAnJ30pYDsKICB9CgogIHRvU291cmNlKCkgewogICAgbGV0IG8gPSBVdGlsLmNvbG9yVGV4dCgnbmV3ICcsIDEsIDMxKSArIFV0aWwuY29sb3JUZXh0KFV0aWwuY2xhc3NOYW1lKHRoaXMpLCAxLCAzMykgKyBVdGlsLmNvbG9yVGV4dCgnKCcgKyB0aGlzLmFuZ2xlICsgJyknLCAxLCAzNik7CgogICAgcmV0dXJuIG87CiAgfQoKICB0b01hdHJpeChtYXRyaXggPSBNYXRyaXguaWRlbnRpdHkoKSkgewogICAgY29uc3QgeyBjZW50ZXIsIGFuZ2xlIH0gPSB0aGlzOwogICAgaWYoY2VudGVyKSBtYXRyaXgudHJhbnNsYXRlU2VsZiguLi5bLi4uY2VudGVyXS5tYXAoY29vcmQgPT4gLWNvb3JkKSk7CiAgICBtYXRyaXgucm90YXRlU2VsZihERUcyUkFEICogYW5nbGUpOwogICAgaWYoY2VudGVyKSBtYXRyaXgudHJhbnNsYXRlU2VsZiguLi5jZW50ZXIpOwogICAgcmV0dXJuIG1hdHJpeC5yb3VuZFNlbGYoKTsKICB9CgogIGFjY3VtdWxhdGUob3RoZXIpIHsKICAgIGlmKHRoaXMudHlwZSAhPT0gb3RoZXIudHlwZSAmJiB0aGlzLmF4aXMgIT09IG90aGVyLmF4aXMpIHRocm93IG5ldyBFcnJvcihVdGlsLmNsYXNzTmFtZSh0aGlzKSArICc6IGFjY3VtdWxhdGUgbWlzbWF0Y2gnKTsKICAgIHJldHVybiBuZXcgUm90YXRpb24odGhpcy5hbmdsZSArIG90aGVyLmFuZ2xlLCB0aGlzLmF4aXMpOwogIH0KCiAgc3RhdGljIGNvbnZlcnRBbmdsZShhbmdsZSwgdW5pdCkgewogICAgc3dpdGNoICh1bml0KSB7CiAgICAgIGNhc2UgJ2RlZyc6CiAgICAgICAgcmV0dXJuIGFuZ2xlOwogICAgICBjYXNlICdyYWQnOgogICAgICAgIHJldHVybiBERUcyUkFEICogYW5nbGU7CiAgICAgIGNhc2UgJ3R1cm4nOgogICAgICAgIHJldHVybiBhbmdsZSAvIDM2MDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYW5nbGU7CiAgICB9CiAgfQp9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoUm90YXRpb24ucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdSb3RhdGlvbicsIGVudW1lcmFibGU6IGZhbHNlIH0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVJvdGF0aW9uID0gVXRpbC5pbW11dGFibGVDbGFzcyhSb3RhdGlvbik7CgpleHBvcnQgY2xhc3MgVHJhbnNsYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1hdGlvbiB7CiAgeCA9IDA7CiAgeSA9IDA7CiAgLy96ID0gdW5kZWZpbmVkOwoKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBzdXBlcigndHJhbnNsYXRlJyk7CgogICAgaWYodHlwZW9mIGFyZ3NbMV0gPT0gJ3N0cmluZycgJiYgWyd4JywgJ3knLCAneiddLmluZGV4T2YoYXJnc1sxXS50b0xvd2VyQ2FzZSgpKSAhPSAtMSkgewogICAgICBjb25zdCBuID0gYXJncy5zaGlmdCgpOwogICAgICBjb25zdCBheGlzID0gYXJncy5zaGlmdCgpLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXNbYXhpc10gPSBuOwogICAgfSBlbHNlIHsKICAgICAgbGV0IG51bURpbSA9IFsuLi5hcmdzLCAnLiddLmZpbmRJbmRleChhID0+IGlzTmFOKCthKSk7CiAgICAgIGNvbnN0IFt4ID0gMCwgeSA9IDAsIHpdID0gYXJncy5zcGxpY2UoMCwgbnVtRGltKTsKICAgICAgdGhpcy54ID0gK3g7CiAgICAgIHRoaXMueSA9ICt5OwogICAgICBpZih6ICE9PSB1bmRlZmluZWQpIHRoaXMueiA9ICt6OwogICAgfQogICAgaWYoYXJncy5sZW5ndGggPiAwICYmIHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSB0aGlzLnVuaXQgPSBhcmdzLnNoaWZ0KCk7CiAgfQoKICBnZXQgdmFsdWVzKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuICd6JyBpbiB0aGlzID8geyB4LCB5LCB6IH0gOiB7IHgsIHkgfTsKICB9CgogIGlzWmVybygpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiAneicgaW4gdGhpcyA/IHggPT0gMCAmJiB5ID09IDAgJiYgeiA9PSAwIDogeCA9PSAwICYmIHkgPT0gMDsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgICByZXR1cm4gbWF0cml4LnRyYW5zbGF0ZVNlbGYoeCwgeSk7CiAgfQoKICAvKmNsb25lKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuIHogIT09IHVuZGVmaW5lZCA/IG5ldyBUcmFuc2xhdGlvbih4LCB5LCB6KSA6IG5ldyBUcmFuc2xhdGlvbih4LCB5KTsKICB9Ki8KCiAgaW52ZXJ0KCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuIHogIT09IHVuZGVmaW5lZCA/IG5ldyBUcmFuc2xhdGlvbigteCwgLXksIC16KSA6IG5ldyBUcmFuc2xhdGlvbihNYXRoLmFicyh4KSA9PSAwID8gMCA6IC14LCBNYXRoLmFicyh5KSA9PSAwID8gMCA6IC15KTsKICB9CgogIGFjY3VtdWxhdGUob3RoZXIpIHsKICAgIGlmKHRoaXMudHlwZSAhPT0gb3RoZXIudHlwZSkgdGhyb3cgbmV3IEVycm9yKFV0aWwuY2xhc3NOYW1lKHRoaXMpICsgJzogYWNjdW11bGF0ZSBtaXNtYXRjaCcpOwoKICAgIGlmKHRoaXMuaXMzRCkgcmV0dXJuIG5ldyBUcmFuc2xhdGlvbih0aGlzLnggKyBvdGhlci54LCB0aGlzLnkgKyBvdGhlci55LCB0aGlzLnogKyBvdGhlci56KTsKICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb24odGhpcy54ICsgb3RoZXIueCwgdGhpcy55ICsgb3RoZXIueSk7CiAgfQp9Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2xhdGlvbi5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ1RyYW5zbGF0aW9uJywgZW51bWVyYWJsZTogZmFsc2UgfSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlVHJhbnNsYXRpb24gPSBVdGlsLmltbXV0YWJsZUNsYXNzKFRyYW5zbGF0aW9uKTsKCmV4cG9ydCBjbGFzcyBTY2FsaW5nIGV4dGVuZHMgVHJhbnNmb3JtYXRpb24gewogIHggPSAxOwogIHkgPSAxOwogIC8veiA9IHVuZGVmaW5lZDsKCiAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgc3VwZXIoJ3NjYWxlJyk7CgogICAgaWYodHlwZW9mIGFyZ3NbMV0gPT0gJ3N0cmluZycgJiYgWyd4JywgJ3knLCAneiddLmluZGV4T2YoYXJnc1sxXS50b0xvd2VyQ2FzZSgpKSAhPSAtMSkgewogICAgICBjb25zdCBuID0gYXJncy5zaGlmdCgpOwogICAgICBjb25zdCBheGlzID0gYXJncy5zaGlmdCgpLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXNbYXhpc10gPSBuOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgW3ggPSAxLCB5LCB6XSA9IGFyZ3Muc3BsaWNlKDAsIDMpOwogICAgICB0aGlzLnggPSAreDsKICAgICAgdGhpcy55ID0geSA9PT0gdW5kZWZpbmVkID8gdGhpcy54IDogK3k7CiAgICAgIGlmKHogIT09IHVuZGVmaW5lZCkgdGhpcy56ID0gK3o7CiAgICB9CiAgfQoKICBnZXQgdmFsdWVzKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuICd6JyBpbiB0aGlzID8geyB4LCB5LCB6IH0gOiB7IHgsIHkgfTsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgICByZXR1cm4gbWF0cml4LnNjYWxlU2VsZih4LCB5KTsKICB9CgogIGlzWmVybygpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiAneicgaW4gdGhpcyA/IHggPT0gMSAmJiB5ID09IDEgJiYgeiA9PSAxIDogeCA9PSAxICYmIHkgPT0gMTsKICB9CgogIHRvU3RyaW5nKCkgewogICAgY29uc3QgdmVjdG9yID0gdGhpcy52ZWN0b3IoJycpOwogICAgY29uc3QgY29vcmRzID0gLypVdGlsLmFsbEVxdWFsKHZlY3RvcikgPyB2ZWN0b3JbMF0gOiAqLyB2ZWN0b3Iuam9pbignLCAnKTsKCiAgICByZXR1cm4gYCR7dGhpcy50eXBlfSR7dGhpcy5pczNEID8gJzNkJyA6ICcnfSgke2Nvb3Jkc30pYDsKICB9CgogIC8qY2xvbmUoKSB7CiAgICBjb25zdCB7IHgsIHksIHogfSA9IHRoaXM7CiAgICByZXR1cm4geiAhPT0gdW5kZWZpbmVkID8gbmV3IFNjYWxpbmcoeCwgeSwgeikgOiBuZXcgU2NhbGluZyh4LCB5KTsKICB9Ki8KCiAgaW52ZXJ0KCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuIHogIT09IHVuZGVmaW5lZCA/IG5ldyBTY2FsaW5nKDEgLyB4LCAxIC8geSwgMSAvIHopIDogbmV3IFNjYWxpbmcoMSAvIHgsIDEgLyB5KTsKICB9CgogIGFjY3VtdWxhdGUob3RoZXIpIHsKICAgIGlmKHRoaXMudHlwZSAhPT0gb3RoZXIudHlwZSkgdGhyb3cgbmV3IEVycm9yKFV0aWwuY2xhc3NOYW1lKHRoaXMpICsgJzogYWNjdW11bGF0ZSBtaXNtYXRjaCcpOwoKICAgIGlmKHRoaXMuaXMzRCkgcmV0dXJuIG5ldyBTY2FsaW5nKHRoaXMueCAqIG90aGVyLngsIHRoaXMueSAqIG90aGVyLnksIHRoaXMueiAqIG90aGVyLnopOwogICAgcmV0dXJuIG5ldyBTY2FsaW5nKHRoaXMueCAqIG90aGVyLngsIHRoaXMueSAqIG90aGVyLnkpOwogIH0KfQpPYmplY3QuZGVmaW5lUHJvcGVydHkoU2NhbGluZy5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ1NjYWxpbmcnLCBlbnVtZXJhYmxlOiBmYWxzZSB9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVTY2FsaW5nID0gVXRpbC5pbW11dGFibGVDbGFzcyhTY2FsaW5nKTsKCmV4cG9ydCBjbGFzcyBNYXRyaXhUcmFuc2Zvcm1hdGlvbiBleHRlbmRzIFRyYW5zZm9ybWF0aW9uIHsKICBtYXRyaXggPSBNYXRyaXguSURFTlRJVFk7CgogIGNvbnN0cnVjdG9yKGluaXQpIHsKICAgIHN1cGVyKCdtYXRyaXgnKTsKCiAgICBpZihpbml0IGluc3RhbmNlb2YgTWF0cml4KSB0aGlzLm1hdHJpeCA9IGluaXQ7CiAgICBlbHNlIGlmKGlzTWF0cml4KGluaXQpKSB0aGlzLm1hdHJpeCA9IG5ldyBNYXRyaXgoaW5pdCk7CiAgICBlbHNlIHRoaXMubWF0cml4ID0gbmV3IE1hdHJpeCguLi5hcmd1bWVudHMpOwogIH0KCiAgZ2V0IHZhbHVlcygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC52YWx1ZXMoKTsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICByZXR1cm4gbWF0cml4Lm11bHRpcGx5U2VsZih0aGlzLm1hdHJpeCk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC50b1N0cmluZygnJyk7CiAgfQoKICBpbnZlcnQoKSB7CiAgICByZXR1cm4gbmV3IE1hdHJpeFRyYW5zZm9ybWF0aW9uKHRoaXMubWF0cml4LmludmVydCgpKTsKICB9CgogIGlzWmVybygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC5pc0lkZW50aXR5KCk7CiAgfQoKICBhY2N1bXVsYXRlKG90aGVyKSB7CiAgICBpZih0aGlzLnR5cGUgIT09IG90aGVyLnR5cGUpIHRocm93IG5ldyBFcnJvcihVdGlsLmNsYXNzTmFtZSh0aGlzKSArICc6IGFjY3VtdWxhdGUgbWlzbWF0Y2gnKTsKCiAgICByZXR1cm4gbmV3IE1hdHJpeFRyYW5zZm9ybWF0aW9uKHRoaXMubWF0cml4Lm11bHRpcGx5KG90aGVyLm1hdHJpeCkpOwogIH0KfQpPYmplY3QuZGVmaW5lUHJvcGVydHkoTWF0cml4VHJhbnNmb3JtYXRpb24ucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsKICB2YWx1ZTogJ01hdHJpeFRyYW5zZm9ybWF0aW9uJywKICBlbnVtZXJhYmxlOiBmYWxzZQp9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVNYXRyaXhUcmFuc2Zvcm1hdGlvbiA9IFV0aWwuaW1tdXRhYmxlQ2xhc3MoTWF0cml4VHJhbnNmb3JtYXRpb24pOwoKZXhwb3J0IGNsYXNzIFRyYW5zZm9ybWF0aW9uTGlzdCBleHRlbmRzIEFycmF5IHsKICBjb25zdHJ1Y3Rvcihpbml0LCB0VW5pdCwgclVuaXQpIHsKICAgIHN1cGVyKCk7CiAgICBpZihVdGlsLmlzT2JqZWN0KGluaXQpKSB7CiAgICAgIGlmKHRVbml0ID09PSB1bmRlZmluZWQpIHRVbml0ID0gaW5pdC50cmFuc2xhdGlvblVuaXQgfHwgaW5pdC50VW5pdDsKICAgICAgaWYoclVuaXQgPT0gdW5kZWZpbmVkKSByVW5pdCA9IGluaXQucm90YXRpb25Vbml0IHx8IGluaXQuclVuaXQ7CiAgICB9CiAgICAvLyAgIGlmKHR5cGVvZiBpbml0ICE9ICdudW1iZXInICYmIHR5cGVvZiBpbml0ICE9ICd1bmRlZmluZWQnICYmICEoQXJyYXkuaXNBcnJheShpbml0KSAmJiBpbml0Lmxlbmd0aCA9PSAwKSkgY29uc29sZS5kZWJ1ZyhgVHJhbnNmb3JtYXRpb25MaXN0LmNvbnN0cnVjdG9yKGAsIHR5cGVvZiBpbml0ID09ICdzdHJpbmcnID8gVXRpbC5hYmJyZXZpYXRlKGluaXQpIDogaW5pdCwgdFVuaXQsIHJVbml0LCBgKWApOwogICAgaWYoaW5pdCkgewogICAgICB0aGlzLmluaXRpYWxpemUoaW5pdCk7CiAgICAgIC8vIGlmKCEodHlwZW9mIGluaXQgPT0gJ251bWJlcicgfHwgKEFycmF5LmlzQXJyYXkoaW5pdCkgJiYgaW5pdC5sZW5ndGggPT0gMCkpKSBjb25zb2xlLmRlYnVnKGBUcmFuc2Zvcm1hdGlvbkxpc3QgICBpbml0aWFsaXplZCB0bzpgLCB0aGlzKTsKICAgIH0KICAgIGlmKHR5cGVvZiB0VW5pdCA9PSAnc3RyaW5nJykgdGhpcy50cmFuc2xhdGlvblVuaXQgPSB0VW5pdDsKICAgIGlmKHR5cGVvZiByVW5pdCA9PSAnc3RyaW5nJykgdGhpcy5yb3RhdGlvblVuaXQgPSByVW5pdDsKCiAgICByZXR1cm4gdGhpczsKICB9CgogIGluaXRpYWxpemUoaW5pdCkgewogICAgaWYodHlwZW9mIGluaXQgPT0gJ251bWJlcicpIHdoaWxlKHRoaXMubGVuZ3RoIDwgaW5pdCkgdGhpcy5wdXNoKHVuZGVmaW5lZCk7CiAgICBlbHNlIGlmKHR5cGVvZiBpbml0ID09ICdzdHJpbmcnKSBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLmZyb21TdHJpbmcuY2FsbCh0aGlzLCBpbml0KTsKICAgIGVsc2UgaWYoaW5pdCBpbnN0YW5jZW9mIEFycmF5KSBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLmZyb21BcnJheS5jYWxsKHRoaXMsIGluaXQpOwogICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ05vIHN1Y2ggaW5pdGlhbGl6YXRpb246ICcgKyBpbml0KTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZ2V0IFtTeW1ib2wuaXNDb25jYXRTcHJlYWRhYmxlXSgpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoKICBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHsKICAgIHJldHVybiB0aGlzLnRvU291cmNlKCk7CiAgfSovCgogIHN0YXRpYyBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBUcmFuc2Zvcm1hdGlvbkxpc3Q7CiAgfQoKICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBUcmFuc2Zvcm1hdGlvbkxpc3Q7CiAgfQoKICBmcm9tU3RyaW5nKHN0cikgewogICAgbGV0IG4sCiAgICAgIGEgPSBbXTsKCiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSArPSBuKSB7CiAgICAgIGxldCBzID0gc3RyLnNsaWNlKGkpOwogICAgICBuID0gcy5pbmRleE9mKCcpJykgKyAxOwogICAgICBpZihuID09IDApIG4gPSBzdHIubGVuZ3RoOwogICAgICBzID0gcy5zbGljZSgwLCBuKS50cmltKCk7CiAgICAgIGlmKHMgIT0gJycpIGEucHVzaChzKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmZyb21BcnJheShhKTsKICB9CgogIGZyb21BcnJheShhcnIpIHsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgYXJnID0gYXJyW2ldOwoKICAgICAgaWYoYXJnIGluc3RhbmNlb2YgVHJhbnNmb3JtYXRpb24pIHRoaXMucHVzaChhcmcpOwogICAgICBlbHNlIGlmKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIHRoaXMucHVzaChUcmFuc2Zvcm1hdGlvbi5mcm9tU3RyaW5nKGFyZykpOwogICAgICBlbHNlIHRocm93IG5ldyBFcnJvcignTm8gc3VjaCB0cmFuc2Zvcm1hdGlvbjogJyArIGFyZyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBnZXQgdHJhbnNsYXRpb25Vbml0KCkgewogICAgcmV0dXJuIChVdGlsLmlzT2JqZWN0KHRoaXMudHJhbnNsYXRpb24pICYmIHRoaXMudHJhbnNsYXRpb24udW5pdCkgfHwgdGhpcy50VW5pdDsKICB9CiAgc2V0IHRyYW5zbGF0aW9uVW5pdCh2YWx1ZSkgewogICAgaWYoVXRpbC5pc09iamVjdCh0aGlzLnRyYW5zbGF0aW9uKSkgdGhpcy50cmFuc2xhdGlvbi51bml0ID0gdmFsdWU7CiAgICBlbHNlIHRoaXMudFVuaXQgPSB2YWx1ZTsKICB9CgogIGdldCByb3RhdGlvblVuaXQoKSB7CiAgICByZXR1cm4gKFV0aWwuaXNPYmplY3QodGhpcy5yb3RhdGlvbikgJiYgdGhpcy5yb3RhdGlvbi51bml0KSB8fCB0aGlzLnJVbml0OwogIH0KICBzZXQgcm90YXRpb25Vbml0KHZhbHVlKSB7CiAgICBpZihVdGlsLmlzT2JqZWN0KHRoaXMucm90YXRpb24pKSB0aGlzLnJvdGF0aW9uLnVuaXQgPSB2YWx1ZTsKICAgIGVsc2UgdGhpcy5yVW5pdCA9IHZhbHVlOwogIH0KICBzdGF0aWMgZnJvbVN0cmluZyhzdHIpIHsKICAgIHJldHVybiBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCkuZnJvbVN0cmluZyhzdHIpOwogIH0KCiAgc3RhdGljIGZyb21BcnJheShhcnIpIHsKICAgIHJldHVybiBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCkuZnJvbUFycmF5KGFycik7CiAgfQoKICBzdGF0aWMgZnJvbU1hdHJpeChtYXRyaXgpIHsKICAgIG1hdHJpeCA9IG1hdHJpeCBpbnN0YW5jZW9mIE1hdHJpeCA/IG1hdHJpeCA6IG5ldyBNYXRyaXgobWF0cml4KTsKCiAgICBjb25zdCB0cmFuc2Zvcm1hdGlvbnMgPSBNYXRyaXguZGVjb21wb3NlKG1hdHJpeCwgdHJ1ZSk7CgogICAgVXRpbC5leHRlbmQodHJhbnNmb3JtYXRpb25zLnNjYWxlLCB7CiAgICAgIHRvQXJyYXkoKSB7CiAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07CiAgICAgIH0KICAgIH0pOwogICAgVXRpbC5leHRlbmQodHJhbnNmb3JtYXRpb25zLnRyYW5zbGF0ZSwgewogICAgICB0b0FycmF5KCkgewogICAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldOwogICAgICB9CiAgICB9KTsKCiAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwoKICAgIHJldC50cmFuc2xhdGUoLi4udHJhbnNmb3JtYXRpb25zLnRyYW5zbGF0ZS50b0FycmF5KCkpOwogICAgcmV0LnJvdGF0ZSh0cmFuc2Zvcm1hdGlvbnMucm90YXRlKTsKICAgIHJldC5zY2FsZSguLi50cmFuc2Zvcm1hdGlvbnMuc2NhbGUudG9BcnJheSgpKTsKCiAgICByZXR1cm4gcmV0OwogIH0KCiAgcHVzaCguLi5hcmdzKSB7CiAgICBmb3IobGV0IGFyZyBvZiBhcmdzKSB7CiAgICAgIGlmKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIGFyZyA9IFRyYW5zZm9ybWF0aW9uLmZyb21TdHJpbmcoYXJnKTsKICAgICAgZWxzZSBpZihpc01hdHJpeChhcmcpKSBhcmcgPSBuZXcgTWF0cml4VHJhbnNmb3JtYXRpb24oYXJnKTsKCiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgYXJnKTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgY2xvbmUoKSB7CiAgICByZXR1cm4gdGhpcy5tYXAodCA9PiB0LmNsb25lKCkpOyAvLyB0aGlzLnNsaWNlKCk7CiAgfQoKICBtYXAoZm4pIHsKICAgIHJldHVybiB0aGlzLmJhc2VDYWxsKEFycmF5LnByb3RvdHlwZS5tYXApKGZuKTsKICB9CgogIHNsaWNlKC4uLmFyZ3MpIHsKICAgIHJldHVybiB0aGlzLmJhc2VDYWxsKEFycmF5LnByb3RvdHlwZS5zbGljZSkoLi4uYXJncyk7CiAgfQoKICBzcGxpY2UoLi4uYXJncykgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLnNwbGljZSkoLi4uYXJncyk7CiAgfQoKICBjb25jYXQoLi4uYXJncykgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLmNvbmNhdCkoLi4uYXJncyk7CiAgfQoKICBmaWx0ZXIocHJlZCkgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLmZpbHRlcikocHJlZCk7CiAgfQoKICBiYXNlQ2FsbChjID0gQXJyYXkucHJvdG90eXBlLm1hcCkgewogICAgcmV0dXJuICguLi5hcmdzKSA9PiB7CiAgICAgIGNvbnN0IHsgdFVuaXQsIHJVbml0IH0gPSB0aGlzOwogICAgICBsZXQgciA9IGMuY2FsbCh0aGlzLCAuLi5hcmdzKTsKICAgICAgaWYodFVuaXQpIHIudFVuaXQgPSB0VW5pdDsKICAgICAgaWYoclVuaXQpIHIuclVuaXQgPSByVW5pdDsKICAgICAgcmV0dXJuIHI7CiAgICB9OwogIH0KCiAgdW5zaGlmdCguLi5hcmdzKSB7CiAgICBmb3IobGV0IGFyZyBvZiBhcmdzLnJldmVyc2UoKSkgewogICAgICBpZih0eXBlb2YgYXJnID09ICdzdHJpbmcnKSBhcmcgPSBUcmFuc2Zvcm1hdGlvbi5mcm9tU3RyaW5nKGFyZyk7CiAgICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwodGhpcywgYXJnKTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgcm90YXRlKC4uLmFyZ3MpIHsKICAgIGxldCByb3RhdGlvbiA9IG5ldyBSb3RhdGlvbiguLi5hcmdzKTsKICAgIGlmKCFyb3RhdGlvbi5pc1plcm8oKSkgQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCByb3RhdGlvbik7CiAgICByZXR1cm4gdGhpczsKICB9CgogIHRyYW5zbGF0ZSh4LCB5KSB7CiAgICBsZXQgdHJhbnMgPSB0aGlzLmZpbHRlcih0ID0+ICF0LnR5cGUuc3RhcnRzV2l0aCgndHJhbnNsYXQnKSk7CiAgICBsZXQgdmVjID0gbmV3IFBvaW50KHgsIHkpOwoKICAgIC8vdHJhbnMudG9NYXRyaXgoKS50cmFuc2Zvcm1Qb2ludCh2ZWMpOwoKICAgIHZlYyA9IHZlYy5yb3VuZCgwLjAwMDAxLCA1KTsKICAgIC8vY29uc29sZS5sb2coImZyb206IiwgbmV3IFBvaW50KHgseSksICIgdG86IiwgdmVjKTsKICAgIGxldCB0cmFuc2xhdGlvbiA9IG5ldyBUcmFuc2xhdGlvbih2ZWMueCwgdmVjLnkpOwoKICAgIGlmKCF0cmFuc2xhdGlvbi5pc1plcm8oKSkgLyogICAgaWYoTWF0aC5hYnModmVjLngpICE9IDAgfHwgTWF0aC5hYnModmVjLnkpICE9IDApICovIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgdHJhbnNsYXRpb24pOwoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgc2NhbGUoLi4uYXJncykgewogICAgbGV0IHNjYWxpbmcgPSBuZXcgU2NhbGluZyguLi5hcmdzKTsKICAgIGlmKCFzY2FsaW5nLmlzWmVybygpKSBBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIHNjYWxpbmcpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBtYXRyaXgoLi4uYXJncykgewogICAgbGV0IG1hdHJpeFRyYW5zZm9ybWF0aW9uID0gbmV3IE1hdHJpeFRyYW5zZm9ybWF0aW9uKC4uLmFyZ3MpOwogICAgaWYoIW1hdHJpeFRyYW5zZm9ybWF0aW9uLmlzWmVybygpKSBBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIG1hdHJpeFRyYW5zZm9ybWF0aW9uKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgdG9TdHJpbmcodFVuaXQsIHJVbml0KSB7CiAgICBpZih0aGlzLmxlbmd0aCA+IDApIHsKICAgICAgdFVuaXQgPSB0VW5pdCB8fCB0aGlzLnRyYW5zbGF0aW9uVW5pdDsKICAgICAgclVuaXQgPSByVW5pdCB8fCB0aGlzLnJvdGF0aW9uVW5pdDsKICAgICAgbGV0IHIgPSB0aGlzLm1hcCh0ID0+IHQgJiYgdC50eXBlICYmIHQudG9TdHJpbmcodC50eXBlLnN0YXJ0c1dpdGgoJ3NjYWwnKSA/ICcnIDogdC50eXBlLnN0YXJ0c1dpdGgoJ3JvdGF0JykgPyByVW5pdCA6IHRVbml0KSkuam9pbignICcpOwogICAgICByZXR1cm4gcjsKICAgIH0KICAgIHJldHVybiAnJzsKICB9CgogIHRvRE9NKCkgewogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoJ3B4JywgJ2RlZycpOwogIH0KCiAgLyogIFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTsKICB9Ki8KCiAgdG9Tb3VyY2UoKSB7CiAgICBsZXQgcyA9IFV0aWwuY29sb3JUZXh0KCduZXcgJywgMSwgMzEpICsgVXRpbC5jb2xvclRleHQoVXRpbC5jbGFzc05hbWUodGhpcyksIDEsIDMzKSArIFV0aWwuY29sb3JUZXh0KCcoWycsIDEsIDM2KTsKCiAgICBzICs9IHRoaXMubWFwKHQgPT4gdC50b1NvdXJjZSgpKS5qb2luKCcsICcpOwogICAgcmV0dXJuIHMgKyBVdGlsLmNvbG9yVGV4dCgnXSknLCAxLCAzNik7CiAgfQoKICB0b01hdHJpY2VzKCkgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChbLi4udGhpc10sIHQgPT4gdC50b01hdHJpeCgpKTsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICBmb3IobGV0IG90aGVyIG9mIHRoaXMudG9NYXRyaWNlcygpKSBtYXRyaXgubXVsdGlwbHlTZWxmKG90aGVyKTsKCiAgICByZXR1cm4gbWF0cml4LnJvdW5kU2VsZigpOwogIH0KCiAgdW5kbygpIHsKICAgIGxldCByZXQgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCk7CgogICAgZm9yKGxldCBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChyZXQsIHRoaXNbaV0uaW52ZXJ0KCkpOwoKICAgIHJldHVybiByZXQ7CiAgfQoKICBtZXJnZSguLi5hcmdzKSB7CiAgICBmb3IobGV0IGFyZyBvZiBhcmdzKSB7CiAgICAgIGlmKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIGFyZyA9IFRyYW5zZm9ybWF0aW9uTGlzdC5mcm9tU3RyaW5nKGFyZyk7CgogICAgICBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcywgYXJnKTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgZGVjb21wb3NlKGRlZ3JlZXMgPSB0cnVlLCB0cmFuc2Zvcm1hdGlvbkxpc3QgPSB0cnVlKSB7CiAgICBsZXQgbWF0cml4ID0gdGhpcy50b01hdHJpeCgpOwogICAgY29uc3QgeyB0cmFuc2xhdGUsIHJvdGF0ZSwgc2NhbGUgfSA9IG1hdHJpeC5kZWNvbXBvc2UoZGVncmVlcyk7CiAgICBsZXQgZGVjb21wb3NlZCA9IHsgdHJhbnNsYXRlLCByb3RhdGUsIHNjYWxlIH07CgogICAgaWYodHJhbnNmb3JtYXRpb25MaXN0KSB7CiAgICAgIGxldCByZXQgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCk7CiAgICAgIHJldC50cmFuc2xhdGUodHJhbnNsYXRlLngsIHRyYW5zbGF0ZS55LCB0cmFuc2xhdGUueik7CiAgICAgIHJldC5yb3RhdGUocm90YXRlKTsKICAgICAgcmV0LnNjYWxlKHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnopOwogICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIGRlY29tcG9zZWQuc2NhbGUudG9BcnJheSA9IGRlY29tcG9zZWQudHJhbnNsYXRlLnRvQXJyYXkgPSBmdW5jdGlvbiB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTsKICAgIH07CiAgICByZXR1cm4gZGVjb21wb3NlZDsKICB9CgogIGZpbmRMYXN0SW5kZXgocHJlZGljYXRlKSB7CiAgICBmb3IobGV0IGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzW2ldOwogICAgICBpZihwcmVkaWNhdGUoeCkpIHJldHVybiBpOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICBmaW5kTGFzdChwcmVkaWNhdGUpIHsKICAgIGxldCBpbmRleCA9IHRoaXMuZmluZExhc3RJbmRleChwcmVkaWNhdGUpOwogICAgcmV0dXJuIHRoaXNbaW5kZXhdOwogIH0KCiAgZ2V0IHJvdGF0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZmluZExhc3QoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHlwZSAmJiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgncm90YXQnKSk7CiAgfQogIHNldCByb3RhdGlvbih2YWx1ZSkgewogICAgbGV0IGluZGV4ID0gdGhpcy5maW5kTGFzdEluZGV4KGl0ZW0gPT4gaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ3JvdGF0JykpOwogICAgdmFsdWUgPSB2YWx1ZSBpbnN0YW5jZW9mIFJvdGF0aW9uID8gdmFsdWUgOiBuZXcgUm90YXRpb24odmFsdWUpOwogICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIGluZGV4LCAxLCB2YWx1ZSk7CiAgfQoKICBnZXQgc2NhbGluZygpIHsKICAgIHJldHVybiB0aGlzLmZpbmRMYXN0KGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnR5cGUgJiYgaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ3NjYWwnKSk7CiAgfQogIHNldCBzY2FsaW5nKHZhbHVlKSB7CiAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmRMYXN0SW5kZXgoaXRlbSA9PiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgnc2NhbCcpKTsKICAgIHZhbHVlID0gdmFsdWUgaW5zdGFuY2VvZiBTY2FsaW5nID8gdmFsdWUgOiBuZXcgU2NhbGluZyh2YWx1ZSk7CiAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwodGhpcywgaW5kZXgsIDEsIHZhbHVlKTsKICB9CgogIGdldCB0cmFuc2xhdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmZpbmRMYXN0KGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnR5cGUgJiYgdHlwZW9mIGl0ZW0udHlwZSA9PSAnc3RyaW5nJyAmJiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgndHJhbnNsYXQnKSk7CiAgfQoKICBzZXQgdHJhbnNsYXRpb24odmFsdWUpIHsKICAgIGxldCBpbmRleCA9IHRoaXMuZmluZExhc3RJbmRleChpdGVtID0+IGl0ZW0gJiYgaXRlbS50eXBlICYmIGl0ZW0udHlwZS5zdGFydHNXaXRoKCd0cmFuc2wnKSk7CiAgICB2YWx1ZSA9IHZhbHVlIGluc3RhbmNlb2YgVHJhbnNsYXRpb24gPyB2YWx1ZSA6IG5ldyBUcmFuc2xhdGlvbih2YWx1ZSk7CiAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwodGhpcywgaW5kZXgsIDEsIHZhbHVlKTsKICB9CiAgLyogIG1hcCguLi5hcmdzKSB7CiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5hcHBseShBcnJheS5mcm9tKHRoaXMpLCBhcmdzKTsKICB9Ki8KCiAgZ2V0IGxhc3QoKSB7CiAgICByZXR1cm4gdGhpcy5hdCgtMSk7CiAgfQogIGdldCBmaXJzdCgpIHsKICAgIHJldHVybiB0aGlzLmF0KDApOwogIH0KCiAgYXQocG9zKSB7CiAgICBpZihwb3MgPCAwKSBwb3MgKz0gdGhpcy5sZW5ndGg7CiAgICByZXR1cm4gdGhpc1twb3NdOwogIH0KCiAgY29sbGFwc2UoKSB7CiAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwoKICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBpdGVtID0gdGhpc1tpXTsKICAgICAgaWYoaSArIDEgPCB0aGlzLmxlbmd0aCAmJiB0aGlzW2kgKyAxXS50eXBlID09IHRoaXNbaV0udHlwZSkgewogICAgICAgIGl0ZW0gPSBpdGVtLmFjY3VtdWxhdGUodGhpc1tpICsgMV0pOwogICAgICAgIGkrKzsKICAgICAgfSBlbHNlIHsKICAgICAgICBpdGVtID0gaXRlbS5jbG9uZSgpOwogICAgICB9CiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocmV0LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQoKICBjb2xsYXBzZUFsbCgpIHsKICAgIHJldHVybiBUcmFuc2Zvcm1hdGlvbkxpc3QuZnJvbU1hdHJpeCh0aGlzLnRvTWF0cml4KCkpOwogIH0KCiAgZ2V0IGFuZ2xlKCkgewogICAgbGV0IG1hdHJpeCA9IHRoaXMudG9NYXRyaXgoKTsKICAgIGxldCB0ID0gbWF0cml4LmRlY29tcG9zZSgpOwogICAgbGV0IHsgcm90YXRlIH0gPSB0OwogICAgLy9jb25zb2xlLmxvZygnUk9UQVRJT046Jywgcm90YXRlKTsKICAgIHJldHVybiByb3RhdGU7CiAgfQoKICBpbnZlcnQoKSB7CiAgICAvL3JldHVybiB0aGlzLnJlZHVjZSgoYWNjLCB0KSA9PiBbdC5pbnZlcnQoKSwgLi4uYWNjXSwgW10pOwogICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm1hdGlvbkxpc3QodGhpcy5yZWR1Y2VSaWdodCgoYWNjLCB0KSA9PiBbLi4uYWNjLCB0LmludmVydCgpXSwgW10pKTsKICB9CgogIGpvaW4oc2VwID0gJyAnKSB7CiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLCBzZXApOwogIH0KCiAgY2xlYXIoKSB7CiAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwodGhpcywgMCwgdGhpcy5sZW5ndGgpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBhcHBseShvYmosIHJvdW5kID0gdHJ1ZSkgewogICAgaWYodHlwZW9mIG9iai50cmFuc2Zvcm0gPT0gJ2Z1bmN0aW9uJykgewogICAgICBjb25zdCBtYXRyaXggPSB0aGlzLnRvTWF0cml4KCk7CiAgICAgIHJldHVybiBvYmoudHJhbnNmb3JtKG1hdHJpeCwgcm91bmQpOwogICAgfQogIH0KfQpPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7CiAgdmFsdWU6ICdUcmFuc2Zvcm1hdGlvbkxpc3QnLAogIGVudW1lcmFibGU6IGZhbHNlCn0pOwoKY29uc3QgeyBjb25jYXQsIGNvcHlXaXRoaW4sIGZpbmQsIGZpbmRJbmRleCwgbGFzdEluZGV4T2YsIHBvcCwgcHVzaCwgc2hpZnQsIHVuc2hpZnQsIHNsaWNlLCBzcGxpY2UsIGluY2x1ZGVzLCBpbmRleE9mLCBlbnRyaWVzLCBmaWx0ZXIsIG1hcCwgZXZlcnksIHNvbWUsIHJlZHVjZSwgcmVkdWNlUmlnaHQgfSA9IEFycmF5LnByb3RvdHlwZTsKClV0aWwuaW5oZXJpdCgKICBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLAogIHsKICAgIC8vIGNvbmNhdCwKICAgIGNvcHlXaXRoaW4sCiAgICBmaW5kLAogICAgZmluZEluZGV4LAogICAgbGFzdEluZGV4T2YsCiAgICBwb3AsCiAgICBzaGlmdCwKICAgIC8vICAgc2xpY2UsCiAgICAvL3NwbGljZSwKICAgIGluY2x1ZGVzLAogICAgaW5kZXhPZiwKICAgIGVudHJpZXMsCiAgICAvLyAgZmlsdGVyLAogICAgLy8gIG1hcCwKICAgIGV2ZXJ5LAogICAgc29tZSwKICAgIHJlZHVjZSwKICAgIHJlZHVjZVJpZ2h0CiAgfSwKICB7CiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdOwogICAgfSwKICAgIFtTeW1ib2wuaXNDb25jYXRTcHJlYWRhYmxlXSgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQopOwoKLy9PYmplY3Quc2V0UHJvdG90eXBlT2YoVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZSwgVHJhbnNmb3JtYXRpb24ucHJvdG90eXBlKTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVUcmFuc2Zvcm1hdGlvbkxpc3QgPSBVdGlsLmltbXV0YWJsZUNsYXNzKFRyYW5zZm9ybWF0aW9uTGlzdCk7CgpJbW11dGFibGVUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICByZXR1cm4gdGhpcy5jb25jYXQoW25ldyBJbW11dGFibGVSb3RhdGlvbiguLi5hcmdzKV0pOwp9OwoKSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiguLi5hcmdzKSB7CiAgcmV0dXJuIHRoaXMuY29uY2F0KFtuZXcgSW1tdXRhYmxlVHJhbnNsYXRpb24oLi4uYXJncyldKTsKfTsKCkltbXV0YWJsZVRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiguLi5hcmdzKSB7CiAgcmV0dXJuIHRoaXMuY29uY2F0KFtuZXcgSW1tdXRhYmxlU2NhbGluZyguLi5hcmdzKV0pOwp9OwoKVXRpbC5kZWZpbmVHZXR0ZXIoSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0LCBTeW1ib2wuc3BlY2llcywgKCkgPT4gSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0KTsKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5YAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAQQ8AAAAAAABBDwAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAJ8HAAAAAAAAoAcAAAAAAAAAAAAAoAcAAAAAAACgBwAAAAAAALIAAAAKCiAgLyogIHRvU291cmNlKHVuaXQpIHsKICAgIHJldHVybiBVdGlsLmNvbG9yVGV4dCgnbmV3ICcsMSwzMSkrVXRpbC5jb2xvclRleHQoVXRpbC5jbGFzc05hbWUodGhpcyksIDEsMzMpICtVdGlsLmNvbG9yVGV4dCgnKCcgK3RoaXMudmVjdG9yKHVuaXQpLmpvaW4oJywgJykgKyAnKScsIDEgLDM2KTsKICB9Ki8K",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACfBwAAAAAAAFEIAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAACwjAAAAAAAALSMAAAAAAAAAAAAALSMAAAAAAAAtIwAAAAAAACkAAAAvKlV0aWwuYWxsRXF1YWwodmVjdG9yKSA/IHZlY3RvclswXSA6ICovIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsIwAAAAAAAFUjAAAAAAAAAAAAAAAA8L8"
				],
				[
					55,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAHsrAAAAAAAAfCsAAAAAAAAAAAAAfCsAAAAAAAB8KwAAAAAAAO4AAAAgICAgLy8gICBpZih0eXBlb2YgaW5pdCAhPSAnbnVtYmVyJyAmJiB0eXBlb2YgaW5pdCAhPSAndW5kZWZpbmVkJyAmJiAhKEFycmF5LmlzQXJyYXkoaW5pdCkgJiYgaW5pdC5sZW5ndGggPT0gMCkpIGNvbnNvbGUuZGVidWcoYFRyYW5zZm9ybWF0aW9uTGlzdC5jb25zdHJ1Y3RvcihgLCB0eXBlb2YgaW5pdCA9PSAnc3RyaW5nJyA/IFV0aWwuYWJicmV2aWF0ZShpbml0KSA6IGluaXQsIHRVbml0LCByVW5pdCwgYClgKTsK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB7KwAAAAAAAGksAAAAAAAAAAAAAAAA8L8"
				],
				[
					67,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAKgrAAAAAAAAqSsAAAAAAAAAAAAAqSsAAAAAAACpKwAAAAAAAJIAAAAgICAgICAvLyBpZighKHR5cGVvZiBpbml0ID09ICdudW1iZXInIHx8IChBcnJheS5pc0FycmF5KGluaXQpICYmIGluaXQubGVuZ3RoID09IDApKSkgY29uc29sZS5kZWJ1ZyhgVHJhbnNmb3JtYXRpb25MaXN0ICAgaW5pdGlhbGl6ZWQgdG86YCwgdGhpcyk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACoKwAAAAAAADosAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					2,
					"delete_blank_lines",
					{
						"surplus": false
					},
					"AgAAAK4UAAAAAAAAVRUAAAAAAACoAAAAdG9Tb3VyY2UoKSB7CiAgICBsZXQgbyA9IFV0aWwuY29sb3JUZXh0KCduZXcgJywgMSwgMzEpICsgVXRpbC5jb2xvclRleHQoVXRpbC5jbGFzc05hbWUodGhpcyksIDEsIDMzKSArIFV0aWwuY29sb3JUZXh0KCcoJyArIHRoaXMuYW5nbGUgKyAnKScsIDEsIDM2KTsKCiAgICByZXR1cm4gbzsKICB9rhQAAAAAAABVFQAAAAAAAKcAAAB0b1NvdXJjZSgpIHsKICAgIGxldCBvID0gVXRpbC5jb2xvclRleHQoJ25ldyAnLCAxLCAzMSkgKyBVdGlsLmNvbG9yVGV4dChVdGlsLmNsYXNzTmFtZSh0aGlzKSwgMSwgMzMpICsgVXRpbC5jb2xvclRleHQoJygnICsgdGhpcy5hbmdsZSArICcpJywgMSwgMzYpOwogICAgcmV0dXJuIG87CiAgfQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABWFQAAAAAAAK4UAAAAAAAAAAAAAAAA8L8"
				],
				[
					97,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAFUVAAAAAAAAVxUAAAAAAAAAAAAArhQAAAAAAACwFAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuFAAAAAAAAFUVAAAAAAAAAAAAAAAA8L8"
				],
				[
					105,
					1,
					"cut",
					null,
					"AQAAAMkUAAAAAAAAyRQAAAAAAAAPAAAAVXRpbC5jb2xvclRleHQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADJFAAAAAAAANgUAAAAAAAAAAAAAAAA8L8"
				],
				[
					107,
					9,
					"right_delete",
					null,
					"CQAAAM8UAAAAAAAAzxQAAAAAAAABAAAALM8UAAAAAAAAzxQAAAAAAAABAAAAIM8UAAAAAAAAzxQAAAAAAAABAAAAMc8UAAAAAAAAzxQAAAAAAAABAAAALM8UAAAAAAAAzxQAAAAAAAABAAAAIM8UAAAAAAAAzxQAAAAAAAABAAAAM88UAAAAAAAAzxQAAAAAAAABAAAAMc8UAAAAAAAAzxQAAAAAAAABAAAAKc8UAAAAAAAAzxQAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADPFAAAAAAAAM8UAAAAAAAAAAAAAAAA8L8"
				],
				[
					110,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAANEUAAAAAAAA0hQAAAAAAAAAAAAA0hQAAAAAAADSFAAAAAAAAA4AAABVdGlsLmNvbG9yVGV4dA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADRFAAAAAAAAN8UAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					1,
					"right_delete",
					null,
					"AQAAANIUAAAAAAAA0hQAAAAAAAABAAAAKA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADSFAAAAAAAANIUAAAAAAAAAAAAAAAA8L8"
				],
				[
					113,
					10,
					"right_delete",
					null,
					"CgAAAOYUAAAAAAAA5hQAAAAAAAABAAAALOYUAAAAAAAA5hQAAAAAAAABAAAAIOYUAAAAAAAA5hQAAAAAAAABAAAAMeYUAAAAAAAA5hQAAAAAAAABAAAALOYUAAAAAAAA5hQAAAAAAAABAAAAIOYUAAAAAAAA5hQAAAAAAAABAAAAM+YUAAAAAAAA5hQAAAAAAAABAAAAM+YUAAAAAAAA5hQAAAAAAAABAAAAKeYUAAAAAAAA5hQAAAAAAAABAAAAIOYUAAAAAAAA5hQAAAAAAAABAAAAKw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmFAAAAAAAAOYUAAAAAAAAAAAAAAAA8L8"
				],
				[
					115,
					1,
					"insert",
					{
						"characters": "+"
					},
					"AQAAAOcUAAAAAAAA6BQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADnFAAAAAAAAOcUAAAAAAAAAAAAAAAA8L8"
				],
				[
					116,
					16,
					"right_delete",
					null,
					"EAAAAOgUAAAAAAAA6BQAAAAAAAABAAAAVegUAAAAAAAA6BQAAAAAAAABAAAAdOgUAAAAAAAA6BQAAAAAAAABAAAAaegUAAAAAAAA6BQAAAAAAAABAAAAbOgUAAAAAAAA6BQAAAAAAAABAAAALugUAAAAAAAA6BQAAAAAAAABAAAAY+gUAAAAAAAA6BQAAAAAAAABAAAAb+gUAAAAAAAA6BQAAAAAAAABAAAAbOgUAAAAAAAA6BQAAAAAAAABAAAAb+gUAAAAAAAA6BQAAAAAAAABAAAAcugUAAAAAAAA6BQAAAAAAAABAAAAVOgUAAAAAAAA6BQAAAAAAAABAAAAZegUAAAAAAAA6BQAAAAAAAABAAAAeOgUAAAAAAAA6BQAAAAAAAABAAAAdOgUAAAAAAAA6BQAAAAAAAABAAAAKOgUAAAAAAAA6BQAAAAAAAABAAAAJw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADoFAAAAAAAAOgUAAAAAAAAAAAAAAAA8L8"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": "'"
					},
					"AQAAAOgUAAAAAAAA6RQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADoFAAAAAAAAOgUAAAAAAAAAAAAAAAA8L8"
				],
				[
					120,
					8,
					"right_delete",
					null,
					"CAAAAP4UAAAAAAAA/hQAAAAAAAABAAAALP4UAAAAAAAA/hQAAAAAAAABAAAAIP4UAAAAAAAA/hQAAAAAAAABAAAAMf4UAAAAAAAA/hQAAAAAAAABAAAALP4UAAAAAAAA/hQAAAAAAAABAAAAIP4UAAAAAAAA/hQAAAAAAAABAAAAM/4UAAAAAAAA/hQAAAAAAAABAAAANv4UAAAAAAAA/hQAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD+FAAAAAAAAP4UAAAAAAAAAAAAAAAA8L8"
				],
				[
					125,
					2,
					"right_delete",
					null,
					"AgAAAK4UAAAAAAAArhQAAAAAAAABAAAAL64UAAAAAAAArhQAAAAAAAABAAAAKg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuFAAAAAAAAK4UAAAAAAAAAAAAAAAA8L8"
				],
				[
					130,
					2,
					"left_delete",
					null,
					"AgAAABAVAAAAAAAAEBUAAAAAAAABAAAALw8VAAAAAAAADxUAAAAAAAABAAAAKg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAARFQAAAAAAABEVAAAAAAAAAAAAAAAAREA"
				],
				[
					142,
					1,
					"cut",
					null,
					"AQAAANA/AAAAAAAA0D8AAAAAAAAPAAAAVXRpbC5jb2xvclRleHQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADQPwAAAAAAAN8/AAAAAAAAAAAAAAAA8L8"
				],
				[
					145,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAANY/AAAAAAAA1z8AAAAAAAAAAAAA1z8AAAAAAADXPwAAAAAAAAgAAAAsIDEsIDMxKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADWPwAAAAAAAN4/AAAAAAAAAAAAAAAA8L8"
				],
				[
					148,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAANk/AAAAAAAA2j8AAAAAAAAAAAAA2j8AAAAAAADaPwAAAAAAABAAAAAgVXRpbC5jb2xvclRleHQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADZPwAAAAAAAOk/AAAAAAAAAAAAAAAA8L8"
				],
				[
					151,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAO4/AAAAAAAA7z8AAAAAAAAAAAAA7z8AAAAAAADvPwAAAAAAAAgAAAAsIDEsIDMzKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuPwAAAAAAAPY/AAAAAAAAAAAAAAAA8L8"
				],
				[
					156,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAPE/AAAAAAAA8j8AAAAAAAAAAAAA8j8AAAAAAADyPwAAAAAAABAAAAAgVXRpbC5jb2xvclRleHQo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADxPwAAAAAAAAFAAAAAAAAAAAAAAAAA8L8"
				],
				[
					159,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BgAAAPc/AAAAAAAA+D8AAAAAAAAAAAAA+D8AAAAAAAD8PwAAAAAAAAAAAAD8PwAAAAAAAPw/AAAAAAAABwAAACAxLCAzNin8PwAAAAAAAP0/AAAAAAAAAAAAAP0/AAAAAAAAAUAAAAAAAAAAAAAA+D8AAAAAAAD4PwAAAAAAAAQAAAAgICAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3PwAAAAAAAP4/AAAAAAAAAAAAAAAA8L8"
				],
				[
					160,
					5,
					"left_delete",
					null,
					"BQAAAPs/AAAAAAAA+z8AAAAAAAACAAAAICD5PwAAAAAAAPk/AAAAAAAAAgAAACAg+D8AAAAAAAD4PwAAAAAAAAEAAAAK9z8AAAAAAAD3PwAAAAAAAAEAAAAK9j8AAAAAAAD2PwAAAAAAAAEAAAAs",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9PwAAAAAAAP0/AAAAAAAAAAAAAAAA8L8"
				],
				[
					163,
					8,
					"left_delete",
					null,
					"CAAAAFNAAAAAAAAAU0AAAAAAAAABAAAAKVJAAAAAAAAAUkAAAAAAAAABAAAANlFAAAAAAAAAUUAAAAAAAAABAAAAM1BAAAAAAAAAUEAAAAAAAAABAAAAIE9AAAAAAAAAT0AAAAAAAAABAAAALE5AAAAAAAAATkAAAAAAAAABAAAAMU1AAAAAAAAATUAAAAAAAAABAAAAIExAAAAAAAAATEAAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABUQAAAAAAAAFRAAAAAAAAAAAAAAAAA8L8"
				],
				[
					165,
					15,
					"left_delete",
					null,
					"DwAAAEdAAAAAAAAAR0AAAAAAAAABAAAAKEZAAAAAAAAARkAAAAAAAAABAAAAdEVAAAAAAAAARUAAAAAAAAABAAAAeERAAAAAAAAAREAAAAAAAAABAAAAZUNAAAAAAAAAQ0AAAAAAAAABAAAAVEJAAAAAAAAAQkAAAAAAAAABAAAAckFAAAAAAAAAQUAAAAAAAAABAAAAb0BAAAAAAAAAQEAAAAAAAAABAAAAbD9AAAAAAAAAP0AAAAAAAAABAAAAbz5AAAAAAAAAPkAAAAAAAAABAAAAYz1AAAAAAAAAPUAAAAAAAAABAAAALjxAAAAAAAAAPEAAAAAAAAABAAAAbDtAAAAAAAAAO0AAAAAAAAABAAAAaTpAAAAAAAAAOkAAAAAAAAABAAAAdDlAAAAAAAAAOUAAAAAAAAABAAAAVQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABIQAAAAAAAAEhAAAAAAAAAAAAAAAAA8L8"
				],
				[
					196,
					1,
					"",
					null,
					"AgAAAGU0AAAAAAAAazQAAAAAAAALAAAAVXRpbC5leHRlbmT5MwAAAAAAAP8zAAAAAAAACwAAAFV0aWwuZXh0ZW5k",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5MwAAAAAAAAQ0AAAAAAAAAAAAAAAA8L8"
				],
				[
					208,
					1,
					"cut",
					null,
					"AQAAAGAAAAAAAAAAYAAAAAAAAAAfAAAAaW1wb3J0IFV0aWwgZnJvbSAnLi4vdXRpbC5qcyc7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgAAAAAAAAAH8AAAAAAAAAAAAAAAAA8L8"
				],
				[
					209,
					1,
					"paste",
					null,
					"AQAAAGAAAAAAAAAAfwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					212,
					1,
					"paste",
					null,
					"AQAAAH8AAAAAAAAAngAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB/AAAAAAAAAH8AAAAAAAAAAAAAAAAA8L8"
				],
				[
					215,
					1,
					"insert",
					{
						"characters": " Ã¶"
					},
					"AwAAAIYAAAAAAAAAhwAAAAAAAAAAAAAAhwAAAAAAAACHAAAAAAAAAAQAAABVdGlshwAAAAAAAACIAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGAAAAAAAAAIoAAAAAAAAAAAAAAAAA8L8"
				],
				[
					216,
					2,
					"left_delete",
					null,
					"AgAAAIcAAAAAAAAAhwAAAAAAAAACAAAAw7aGAAAAAAAAAIYAAAAAAAAAAQAAACA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACIAAAAAAAAAIgAAAAAAAAAAAAAAAAA8L8"
				],
				[
					217,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAIYAAAAAAAAAiAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGAAAAAAAAAIYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					218,
					1,
					"insert",
					{
						"characters": "Ã°efn"
					},
					"BAAAAIcAAAAAAAAAiAAAAAAAAAAAAAAAiAAAAAAAAACJAAAAAAAAAAAAAACJAAAAAAAAAIoAAAAAAAAAAAAAAIoAAAAAAAAAiwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHAAAAAAAAAIcAAAAAAAAAAAAAAAAA8L8"
				],
				[
					219,
					4,
					"left_delete",
					null,
					"BAAAAIoAAAAAAAAAigAAAAAAAAABAAAAbokAAAAAAAAAiQAAAAAAAAABAAAAZogAAAAAAAAAiAAAAAAAAAABAAAAZYcAAAAAAAAAhwAAAAAAAAACAAAAw7A",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACLAAAAAAAAAIsAAAAAAAAAAAAAAAAA8L8"
				],
				[
					220,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAIYAAAAAAAAAhgAAAAAAAAABAAAAe4YAAAAAAAAAhgAAAAAAAAABAAAAfQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHAAAAAAAAAIcAAAAAAAAAAAAAAAAA8L8"
				],
				[
					221,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAIYAAAAAAAAAiAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGAAAAAAAAAIYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					222,
					1,
					"insert",
					{
						"characters": "define"
					},
					"BgAAAIcAAAAAAAAAiAAAAAAAAAAAAAAAiAAAAAAAAACJAAAAAAAAAAAAAACJAAAAAAAAAIoAAAAAAAAAAAAAAIoAAAAAAAAAiwAAAAAAAAAAAAAAiwAAAAAAAACMAAAAAAAAAAAAAACMAAAAAAAAAI0AAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHAAAAAAAAAIcAAAAAAAAAAAAAAAAA8L8"
				],
				[
					224,
					3,
					"right_delete",
					null,
					"AwAAAJkAAAAAAAAAmQAAAAAAAAABAAAAdJkAAAAAAAAAmQAAAAAAAAABAAAAaZkAAAAAAAAAmQAAAAAAAAABAAAAbA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACZAAAAAAAAAJkAAAAAAAAAAAAAAAAA8L8"
				],
				[
					225,
					1,
					"left_delete",
					null,
					"AQAAAJgAAAAAAAAAmAAAAAAAAAABAAAAdQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACZAAAAAAAAAJkAAAAAAAAAAAAAAAAA8L8"
				],
				[
					226,
					1,
					"insert",
					{
						"characters": "misc"
					},
					"BAAAAJgAAAAAAAAAmQAAAAAAAAAAAAAAmQAAAAAAAACaAAAAAAAAAAAAAACaAAAAAAAAAJsAAAAAAAAAAAAAAJsAAAAAAAAAnAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACYAAAAAAAAAJgAAAAAAAAAAAAAAAAA8L8"
				],
				[
					248,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAIJRAAAAAAAAg1EAAAAAAAAAAAAAg1EAAAAAAACDUQAAAAAAAB4AAAAgICAgLy8gICBzbGljZSwKICAgIC8vc3BsaWNlLAo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCUQAAAAAAAKBRAAAAAAAAAAAAAAAA8L8"
				],
				[
					255,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAACVRAAAAAAAAJlEAAAAAAAAAAAAAJlEAAAAAAAAmUQAAAAAAAA8AAAAgICAgLy8gY29uY2F0LAo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAlUQAAAAAAADRRAAAAAAAAAAAAAAAA8L8"
				],
				[
					258,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAJ5RAAAAAAAAn1EAAAAAAAAAAAAAn1EAAAAAAACfUQAAAAAAAB0AAAAgICAvLyAgZmlsdGVyLAogICAgLy8gIG1hcCwKIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeUQAAAAAAALtRAAAAAAAAAAAAAAAA8L8"
				],
				[
					271,
					1,
					"insert",
					{
						"characters": "define"
					},
					"BwAAAPNQAAAAAAAA9FAAAAAAAAAAAAAA9FAAAAAAAAD0UAAAAAAAAAwAAABVdGlsLmluaGVyaXT0UAAAAAAAAPVQAAAAAAAAAAAAAPVQAAAAAAAA9lAAAAAAAAAAAAAA9lAAAAAAAAD3UAAAAAAAAAAAAAD3UAAAAAAAAPhQAAAAAAAAAAAAAPhQAAAAAAAA+VAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD/UAAAAAAAAPNQAAAAAAAAAAAAAAAAAAA"
				],
				[
					281,
					1,
					"insert",
					{
						"characters": "."
					},
					"AQAAAI0AAAAAAAAAjgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNAAAAAAAAAI0AAAAAAAAAAAAAAAAA8L8"
				],
				[
					282,
					1,
					"left_delete",
					null,
					"AQAAAI0AAAAAAAAAjQAAAAAAAAABAAAALg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOAAAAAAAAAI4AAAAAAAAAAAAAAAAA8L8"
				],
				[
					283,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAI0AAAAAAAAAjgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNAAAAAAAAAI0AAAAAAAAAAAAAAAAA8L8"
				],
				[
					285,
					1,
					"",
					null,
					"AQAAAI4AAAAAAAAA1gAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOAAAAAAAAAI4AAAAAAAAAAAAAAAAA8L8"
				],
				[
					286,
					1,
					"left_delete",
					null,
					"AQAAANUAAAAAAAAA1QAAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADWAAAAAAAAANYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					289,
					8,
					"right_delete",
					null,
					"CAAAAIYAAAAAAAAAhgAAAAAAAAABAAAAe4YAAAAAAAAAhgAAAAAAAAABAAAAZIYAAAAAAAAAhgAAAAAAAAABAAAAZYYAAAAAAAAAhgAAAAAAAAABAAAAZoYAAAAAAAAAhgAAAAAAAAABAAAAaYYAAAAAAAAAhgAAAAAAAAABAAAAboYAAAAAAAAAhgAAAAAAAAABAAAAZYYAAAAAAAAAhgAAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGAAAAAAAAAIYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					290,
					1,
					"insert",
					{
						"characters": "Ç˜"
					},
					"AQAAAIYAAAAAAAAAhwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGAAAAAAAAAIYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					291,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAIcAAAAAAAAAiAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHAAAAAAAAAIcAAAAAAAAAAAAAAAAA8L8"
				],
				[
					292,
					2,
					"left_delete",
					null,
					"AgAAAIcAAAAAAAAAhwAAAAAAAAABAAAAIIYAAAAAAAAAhgAAAAAAAAACAAAAx5g",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACIAAAAAAAAAIgAAAAAAAAAAAAAAAAA8L8"
				],
				[
					293,
					1,
					"insert",
					{
						"characters": "{"
					},
					"AQAAAIYAAAAAAAAAhwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGAAAAAAAAAIYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					297,
					1,
					"right_delete",
					null,
					"AQAAAGAAAAAAAAAAYAAAAAAAAAAfAAAAaW1wb3J0IFV0aWwgZnJvbSAnLi4vdXRpbC5qcyc7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAA"
				],
				[
					305,
					1,
					"",
					null,
					"FQAAALFUAAAAAAAAsVQAAAAAAAAFAAAAVXRpbC4GUwAAAAAAAAZTAAAAAAAABQAAAFV0aWwuFUAAAAAAAAAVQAAAAAAAAAUAAABVdGlsLpYyAAAAAAAAljIAAAAAAAAFAAAAVXRpbC4sMgAAAAAAACwyAAAAAAAABQAAAFV0aWwupzEAAAAAAACnMQAAAAAAAAUAAABVdGlsLjQxAAAAAAAANDEAAAAAAAAFAAAAVXRpbC7MKgAAAAAAAMwqAAAAAAAABQAAAFV0aWwuOCoAAAAAAAA4KgAAAAAAAAUAAABVdGlsLgQpAAAAAAAABCkAAAAAAAAFAAAAVXRpbC4mJgAAAAAAACYmAAAAAAAABQAAAFV0aWwuziQAAAAAAADOJAAAAAAAAAUAAABVdGlsLocfAAAAAAAAhx8AAAAAAAAFAAAAVXRpbC4bHgAAAAAAABseAAAAAAAABQAAAFV0aWwuvxgAAAAAAAC/GAAAAAAAAAUAAABVdGlsLswWAAAAAAAAzBYAAAAAAAAFAAAAVXRpbC4VFQAAAAAAABUVAAAAAAAABQAAAFV0aWwuExEAAAAAAAATEQAAAAAAAAUAAABVdGlsLmADAAAAAAAAYAMAAAAAAAAFAAAAVXRpbC77AgAAAAAAAPsCAAAAAAAABQAAAFV0aWwuTwIAAAAAAABPAgAAAAAAAAUAAABVdGlsLg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABPAgAAAAAAAFQCAAAAAAAAAAAAAAAA8L8"
				],
				[
					310,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACrVAAAaW1wb3J0IHsgTWF0cml4LCBpc01hdHJpeCB9IGZyb20gJy4uL2dlb20vbWF0cml4LmpzJzsKaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9nZW9tL3BvaW50LmpzJzsKaW1wb3J0IHtjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyLCBmdW5jdGlvbk5hbWUsIGltbXV0YWJsZUNsYXNzLCBpc09iamVjdH0gZnJvbSAnLi4vbWlzYy5qcyc7Cgpjb25zdCBSQUQyREVHID0gMTgwIC8gTWF0aC5QSTsKY29uc3QgREVHMlJBRCA9IE1hdGguUEkgLyAxODA7CgpleHBvcnQgY2xhc3MgVHJhbnNmb3JtYXRpb24gewogIC8vdHlwZU5hbWUgPSBudWxsOwoKICBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm1hdGlvbikgewogICAgaWYodHJhbnNmb3JtYXRpb24gaW5zdGFuY2VvZiBUcmFuc2Zvcm1hdGlvbikgcmV0dXJuIHRyYW5zZm9ybWF0aW9uOwogICAgaWYodHJhbnNmb3JtYXRpb24gaW5zdGFuY2VvZiBUcmFuc2Zvcm1hdGlvbkxpc3QpIHJldHVybiB0cmFuc2Zvcm1hdGlvbjsKCiAgICBpZih0eXBlb2YgdHJhbnNmb3JtYXRpb24gPT0gJ3N0cmluZycpIHJldHVybiBUcmFuc2Zvcm1hdGlvbi5mcm9tU3RyaW5nKHRyYW5zZm9ybWF0aW9uKTsKICAgIC8vZGVmaW5lKHRoaXMsIHsgdHlwZU5hbWUgfSk7CiAgICAvL3RoaXMudHlwZSA9IHR5cGU7CiAgICAvLwogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVHJhbnNmb3JtYXRpb24nKTsKCiAgICByZXR1cm4gdGhpczsKICB9CgogIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHsKICAgIHJldHVybiBmdW5jdGlvbk5hbWUodGhpcy5jb25zdHJ1Y3Rvcik7CiAgfQoKICBnZXQgdHlwZSgpIHsKICAgIGxldCB0eXBlID0KICAgICAgdGhpcy50eXBlTmFtZSB8fAogICAgICBjbGFzc05hbWUodGhpcykKICAgICAgICAudG9Mb3dlckNhc2UoKQogICAgICAgIC5yZXBsYWNlKC90cmFuc2Zvcm0oYXRpb24pPy8sICcnKQogICAgICAgIC5yZXBsYWNlKC8oaW9ufGluZykkLywgJ2UnKTsKICAgIHJldHVybiB0eXBlOwogIH0KCiAgZ2V0IFtTeW1ib2wuaXNDb25jYXRTcHJlYWRhYmxlXSgpIHsKICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yID09PSBUcmFuc2Zvcm1hdGlvbkxpc3QgfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpID09IFRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUgfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yID09IFRyYW5zZm9ybWF0aW9uTGlzdDsKICB9CiAgZ2V0IGF4ZXMoKSB7CiAgICByZXR1cm4gdGhpcy5heGlzICE9PSB1bmRlZmluZWQgPyBbdGhpcy5heGlzXSA6IFsneCcsICd5JywgJ3onXS5maWx0ZXIoYXhpcyA9PiBheGlzIGluIHRoaXMpOwogIH0KICBnZXQgcHJvcHMoKSB7CiAgICByZXR1cm4gdGhpcy5heGVzLmNvbmNhdChbJ2F4aXMnLCAnYW5nbGUnXS5maWx0ZXIoa2V5ID0+IGtleSBpbiB0aGlzKSk7CiAgfQoKICBoYXMoYXhpcykgewogICAgaWYodGhpcy5heGlzICE9PSB1bmRlZmluZWQpIHJldHVybiBheGlzID09PSB0aGlzLmF4aXM7CiAgICByZXR1cm4gYXhpcyBpbiB0aGlzOwogIH0KCiAgZ2V0IGlzM0QoKSB7CiAgICByZXR1cm4gdGhpcy5oYXMoJ3onKTsKICB9CgogIGVudHJpZXMoKSB7CiAgICByZXR1cm4gdGhpcy5wcm9wcy5tYXAocHJvcCA9PiBbcHJvcCwgdGhpc1twcm9wXV0pOwogIH0KCiAgdG9KU09OKCkgewogICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmVudHJpZXMoKSk7CiAgfQoKICB2ZWN0b3IodW5pdCkgewogICAgaWYodW5pdCA9PT0gdW5kZWZpbmVkKSB1bml0ID0gdGhpcy51bml0OwogICAgcmV0dXJuICh0aGlzLmlzM0QgPyBbJ3gnLCAneScsICd6J10gOiBbJ3gnLCAneSddKS5tYXAodW5pdCA/IGF4aXMgPT4gdGhpc1theGlzXSArIHVuaXQgOiBheGlzID0+IHRoaXNbYXhpc10pOwogIH0KCiAgdG9TdHJpbmcodFVuaXQpIHsKICAgIHJldHVybiBgJHt0aGlzLnR5cGV9JHt0aGlzLmlzM0QgPyAnM2QnIDogJyd9KCR7dGhpcy52ZWN0b3IodFVuaXQpLmpvaW4oJywgJyl9KWA7CiAgfSAKICBjbG9uZSgpIHsKICAgIGxldCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModGhpcyk7CiAgICBsZXQgcHJvcHMgPSB0aGlzLnByb3BzLnJlZHVjZSgoYWNjLCBwcm9wKSA9PiAoeyAuLi5hY2MsIFtwcm9wXTogZGVzY1twcm9wXSB9KSwge30pOwogICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLCBwcm9wcyk7CiAgfQoKICBzdGF0aWMgZnJvbVN0cmluZyhhcmcpIHsKICAgIGxldCBjbWRMZW4gPSBhcmcuaW5kZXhPZignKCcpOwogICAgbGV0IGFyZ1N0ciA9IGFyZy5zbGljZShjbWRMZW4gKyAxLCBhcmcuaW5kZXhPZignKScpKTsKICAgIGxldCBhcmdzID0gYXJnU3RyLnNwbGl0KC9bLFxzXCBdKy9nKTsKICAgIGxldCBjbWQgPSBhcmcuc3Vic3RyaW5nKDAsIGNtZExlbik7CiAgICBsZXQgdDsKICAgIGxldCB1bml0OwoKICAgIGFyZ3MgPSBhcmdzCiAgICAgIC5maWx0ZXIoYXJnID0+IC9eWy0rMC05Ll0rW2Etel0qJC8udGVzdChhcmcpKQogICAgICAubWFwKGFyZyA9PiB7CiAgICAgICAgaWYoL1thLXpdJC8udGVzdChhcmcpKSB7CiAgICAgICAgICB1bml0ID0gYXJnLnJlcGxhY2UoL1stKzAtOS5dKi9nLCAnJyk7CiAgICAgICAgICBhcmcgPSBhcmcucmVwbGFjZSgvW2Etel0qJC9nLCAnJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gK2FyZzsKICAgICAgfSk7CiAgICAvL2NvbnNvbGUubG9nKCdmcm9tU3RyaW5nJywgeyBjbWQsIGFyZ3MgfSk7CgogICAgY29uc3QgaXMzRCA9IGNtZC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCczZCcpOwogICAgaWYoaXMzRCkgY21kID0gY21kLnNsaWNlKDAsIC0yKTsKCiAgICBpZihjbWQuc3RhcnRzV2l0aCgncm90YXQnKSkgewogICAgICBjb25zdCBheGlzID0gaXMzRCA/ICcnIDogY21kLnNsaWNlKDYpOwogICAgICBhcmdzID0gYXhpcyAhPSAnJyA/IFthcmdzWzBdLCBheGlzXSA6IGFyZ3M7CiAgICAgIHQgPSBuZXcgUm90YXRpb24oLi4uYXJncyk7CiAgICB9IGVsc2UgaWYoY21kLnN0YXJ0c1dpdGgoJ3RyYW5zbGF0JykpIHsKICAgICAgY29uc3QgYXhpcyA9IGlzM0QgPyAnJyA6IGNtZC5zbGljZSg5KTsKICAgICAgYXJncyA9IGF4aXMgIT0gJycgPyBbYXJnc1swXSwgYXhpc10gOiBhcmdzOwogICAgICB0ID0gbmV3IFRyYW5zbGF0aW9uKC4uLmFyZ3MpOwogICAgfSBlbHNlIGlmKGNtZC5zdGFydHNXaXRoKCdzY2FsJykpIHsKICAgICAgY29uc3QgYXhpcyA9IGlzM0QgPyAnJyA6IGNtZC5zbGljZSg1KTsKICAgICAgYXJncyA9IGF4aXMgIT0gJycgPyBbYXJnc1swXSwgYXhpc10gOiBhcmdzOwogICAgICB0ID0gbmV3IFNjYWxpbmcoLi4uYXJncyk7CiAgICB9IGVsc2UgaWYoY21kLnN0YXJ0c1dpdGgoJ21hdHJpeCcpKSB7CiAgICAgIGNvbnN0IFthLCBiLCBjLCBkLCBlLCBmXSA9IGFyZ3M7CiAgICAgIHQgPSBuZXcgTWF0cml4VHJhbnNmb3JtYXRpb24oYSwgYywgZSwgYiwgZCwgZik7CiAgICB9CiAgICBpZih1bml0KSB0LnVuaXQgPSB1bml0OwogICAgcmV0dXJuIHQ7CiAgfQoKICAvKltTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTsKICB9Ki8KCiAgW1N5bWJvbC50b1ByaW1pdGl2ZV0oaGludCkgewogICAgLy8gY29uc29sZS5sb2coImhpbnQ6IixoaW50KTsKICAgIGlmKGhpbnQgPT0gJ3N0cmluZycgfHwgaGludCA9PSAnZGVmYXVsdCcpIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7CgogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKSAhPSAnJzsKICB9CgogIHN0YXRpYyBnZXQgcm90YXRpb24oKSB7CiAgICByZXR1cm4gUm90YXRpb247CiAgfQogIHN0YXRpYyBnZXQgdHJhbnNsYXRpb24oKSB7CiAgICByZXR1cm4gVHJhbnNsYXRpb247CiAgfQogIHN0YXRpYyBnZXQgc2NhbGluZygpIHsKICAgIHJldHVybiBTY2FsaW5nOwogIH0KICBzdGF0aWMgZ2V0IG1hdHJpeCgpIHsKICAgIHJldHVybiBNYXRyaXhUcmFuc2Zvcm1hdGlvbjsKICB9Cn0KCi8vVHJhbnNmb3JtYXRpb24ucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ109J1RyYW5zZm9ybWF0aW9uJzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2Zvcm1hdGlvbiwgU3ltYm9sLmhhc0luc3RhbmNlLCB7CiAgdmFsdWUoaW5zdCkgewogICAgcmV0dXJuIFtUcmFuc2Zvcm1hdGlvbiwgTWF0cml4VHJhbnNmb3JtYXRpb24sIFJvdGF0aW9uLCBUcmFuc2xhdGlvbiwgU2NhbGluZywgVHJhbnNmb3JtYXRpb25MaXN0XS5zb21lKGN0b3IgPT4gT2JqZWN0LmdldFByb3RvdHlwZU9mKGluc3QpID09IGN0b3IucHJvdG90eXBlKTsKICB9Cn0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVRyYW5zZm9ybWF0aW9uID0gaW1tdXRhYmxlQ2xhc3MoVHJhbnNmb3JtYXRpb24pOwoKZXhwb3J0IGNsYXNzIFJvdGF0aW9uIGV4dGVuZHMgVHJhbnNmb3JtYXRpb24gewogIGFuZ2xlID0gMDsKICAvL2F4aXMgPSB1bmRlZmluZWQ7CgogIGNvbnN0cnVjdG9yKGFuZ2xlLCB4LCB5KSB7CiAgICBzdXBlcigncm90YXRlJyk7CgogICAgaWYodHlwZW9mIHggPT0gJ3N0cmluZycgJiYgWyd4JywgJ3knLCAneiddLmluZGV4T2YoeC50b0xvd2VyQ2FzZSgpKSAhPSAtMSkgewogICAgICB0aGlzLmF4aXMgPSB4LnRvTG93ZXJDYXNlKCk7CiAgICB9IGVsc2UgaWYoIWlzTmFOKCt4KSAmJiAhaXNOYU4oK3kpKSB7CiAgICAgIHRoaXMuY2VudGVyID0gWyt4LCAreV07CiAgICB9CiAgICAvL2Vsc2UgdGhpcy5heGlzID0gJ3onOwogICAgdGhpcy5hbmdsZSA9IGFuZ2xlOwogIH0KCiAgaW52ZXJ0KCkgewogICAgcmV0dXJuIG5ldyBSb3RhdGlvbigtdGhpcy5hbmdsZSwgdGhpcy5heGlzKTsKICB9CgogIGdldCB2YWx1ZXMoKSB7CiAgICByZXR1cm4geyBbdGhpcy5heGlzIHx8ICd6J106IHRoaXMuYW5nbGUgfTsKICB9CgogIGdldCBpczNEKCkgewogICAgcmV0dXJuIHRoaXMuYXhpcyA9PSAneic7CiAgfQoKICBpc1plcm8oKSB7CiAgICByZXR1cm4gdGhpcy5hbmdsZSA9PSAwOwogIH0KCiAgdG9TdHJpbmcoclVuaXQpIHsKICAgIHJVbml0ID0gclVuaXQgfHwgdGhpcy51bml0IHx8ICcnOwogICAgY29uc3QgYXhpcyA9IHRoaXMuYXhpcyAhPT0gdW5kZWZpbmVkID8gdGhpcy5heGlzLnRvVXBwZXJDYXNlKCkgOiAnJzsKICAgIGNvbnN0IGFuZ2xlID0gdGhpcy5jb25zdHJ1Y3Rvci5jb252ZXJ0QW5nbGUodGhpcy5hbmdsZSwgclVuaXQpOwogICAgcmV0dXJuIGByb3RhdGUke3RoaXMuaXMzRCA/IGF4aXMgOiAnJ30oJHthbmdsZX0ke3JVbml0fSR7dGhpcy5jZW50ZXIgPyB0aGlzLmNlbnRlci5tYXAoY29vcmQgPT4gYCwgJHtjb29yZH1gKS5qb2luKCcnKSA6ICcnfSlgOwogIH0KCiAgdG9Tb3VyY2UoKSB7CiAgICBsZXQgbyA9ICduZXcgJysgIGNsYXNzTmFtZSh0aGlzKSArJygnICsgdGhpcy5hbmdsZSArICcpJzsKICAgIHJldHVybiBvOwogIH0KCiAgdG9NYXRyaXgobWF0cml4ID0gTWF0cml4LmlkZW50aXR5KCkpIHsKICAgIGNvbnN0IHsgY2VudGVyLCBhbmdsZSB9ID0gdGhpczsKICAgIGlmKGNlbnRlcikgbWF0cml4LnRyYW5zbGF0ZVNlbGYoLi4uWy4uLmNlbnRlcl0ubWFwKGNvb3JkID0+IC1jb29yZCkpOwogICAgbWF0cml4LnJvdGF0ZVNlbGYoREVHMlJBRCAqIGFuZ2xlKTsKICAgIGlmKGNlbnRlcikgbWF0cml4LnRyYW5zbGF0ZVNlbGYoLi4uY2VudGVyKTsKICAgIHJldHVybiBtYXRyaXgucm91bmRTZWxmKCk7CiAgfQoKICBhY2N1bXVsYXRlKG90aGVyKSB7CiAgICBpZih0aGlzLnR5cGUgIT09IG90aGVyLnR5cGUgJiYgdGhpcy5heGlzICE9PSBvdGhlci5heGlzKSB0aHJvdyBuZXcgRXJyb3IoY2xhc3NOYW1lKHRoaXMpICsgJzogYWNjdW11bGF0ZSBtaXNtYXRjaCcpOwogICAgcmV0dXJuIG5ldyBSb3RhdGlvbih0aGlzLmFuZ2xlICsgb3RoZXIuYW5nbGUsIHRoaXMuYXhpcyk7CiAgfQoKICBzdGF0aWMgY29udmVydEFuZ2xlKGFuZ2xlLCB1bml0KSB7CiAgICBzd2l0Y2ggKHVuaXQpIHsKICAgICAgY2FzZSAnZGVnJzoKICAgICAgICByZXR1cm4gYW5nbGU7CiAgICAgIGNhc2UgJ3JhZCc6CiAgICAgICAgcmV0dXJuIERFRzJSQUQgKiBhbmdsZTsKICAgICAgY2FzZSAndHVybic6CiAgICAgICAgcmV0dXJuIGFuZ2xlIC8gMzYwOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBhbmdsZTsKICAgIH0KICB9Cn0KCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSb3RhdGlvbi5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ1JvdGF0aW9uJywgZW51bWVyYWJsZTogZmFsc2UgfSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlUm90YXRpb24gPSBpbW11dGFibGVDbGFzcyhSb3RhdGlvbik7CgpleHBvcnQgY2xhc3MgVHJhbnNsYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1hdGlvbiB7CiAgeCA9IDA7CiAgeSA9IDA7CiAgLy96ID0gdW5kZWZpbmVkOwoKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBzdXBlcigndHJhbnNsYXRlJyk7CgogICAgaWYodHlwZW9mIGFyZ3NbMV0gPT0gJ3N0cmluZycgJiYgWyd4JywgJ3knLCAneiddLmluZGV4T2YoYXJnc1sxXS50b0xvd2VyQ2FzZSgpKSAhPSAtMSkgewogICAgICBjb25zdCBuID0gYXJncy5zaGlmdCgpOwogICAgICBjb25zdCBheGlzID0gYXJncy5zaGlmdCgpLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXNbYXhpc10gPSBuOwogICAgfSBlbHNlIHsKICAgICAgbGV0IG51bURpbSA9IFsuLi5hcmdzLCAnLiddLmZpbmRJbmRleChhID0+IGlzTmFOKCthKSk7CiAgICAgIGNvbnN0IFt4ID0gMCwgeSA9IDAsIHpdID0gYXJncy5zcGxpY2UoMCwgbnVtRGltKTsKICAgICAgdGhpcy54ID0gK3g7CiAgICAgIHRoaXMueSA9ICt5OwogICAgICBpZih6ICE9PSB1bmRlZmluZWQpIHRoaXMueiA9ICt6OwogICAgfQogICAgaWYoYXJncy5sZW5ndGggPiAwICYmIHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSB0aGlzLnVuaXQgPSBhcmdzLnNoaWZ0KCk7CiAgfQoKICBnZXQgdmFsdWVzKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuICd6JyBpbiB0aGlzID8geyB4LCB5LCB6IH0gOiB7IHgsIHkgfTsKICB9CgogIGlzWmVybygpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiAneicgaW4gdGhpcyA/IHggPT0gMCAmJiB5ID09IDAgJiYgeiA9PSAwIDogeCA9PSAwICYmIHkgPT0gMDsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgICByZXR1cm4gbWF0cml4LnRyYW5zbGF0ZVNlbGYoeCwgeSk7CiAgfQoKICAvKmNsb25lKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuIHogIT09IHVuZGVmaW5lZCA/IG5ldyBUcmFuc2xhdGlvbih4LCB5LCB6KSA6IG5ldyBUcmFuc2xhdGlvbih4LCB5KTsKICB9Ki8KCiAgaW52ZXJ0KCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuIHogIT09IHVuZGVmaW5lZCA/IG5ldyBUcmFuc2xhdGlvbigteCwgLXksIC16KSA6IG5ldyBUcmFuc2xhdGlvbihNYXRoLmFicyh4KSA9PSAwID8gMCA6IC14LCBNYXRoLmFicyh5KSA9PSAwID8gMCA6IC15KTsKICB9CgogIGFjY3VtdWxhdGUob3RoZXIpIHsKICAgIGlmKHRoaXMudHlwZSAhPT0gb3RoZXIudHlwZSkgdGhyb3cgbmV3IEVycm9yKGNsYXNzTmFtZSh0aGlzKSArICc6IGFjY3VtdWxhdGUgbWlzbWF0Y2gnKTsKCiAgICBpZih0aGlzLmlzM0QpIHJldHVybiBuZXcgVHJhbnNsYXRpb24odGhpcy54ICsgb3RoZXIueCwgdGhpcy55ICsgb3RoZXIueSwgdGhpcy56ICsgb3RoZXIueik7CiAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uKHRoaXMueCArIG90aGVyLngsIHRoaXMueSArIG90aGVyLnkpOwogIH0KfQpPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNsYXRpb24ucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdUcmFuc2xhdGlvbicsIGVudW1lcmFibGU6IGZhbHNlIH0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVRyYW5zbGF0aW9uID0gaW1tdXRhYmxlQ2xhc3MoVHJhbnNsYXRpb24pOwoKZXhwb3J0IGNsYXNzIFNjYWxpbmcgZXh0ZW5kcyBUcmFuc2Zvcm1hdGlvbiB7CiAgeCA9IDE7CiAgeSA9IDE7CiAgLy96ID0gdW5kZWZpbmVkOwoKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBzdXBlcignc2NhbGUnKTsKCiAgICBpZih0eXBlb2YgYXJnc1sxXSA9PSAnc3RyaW5nJyAmJiBbJ3gnLCAneScsICd6J10uaW5kZXhPZihhcmdzWzFdLnRvTG93ZXJDYXNlKCkpICE9IC0xKSB7CiAgICAgIGNvbnN0IG4gPSBhcmdzLnNoaWZ0KCk7CiAgICAgIGNvbnN0IGF4aXMgPSBhcmdzLnNoaWZ0KCkudG9Mb3dlckNhc2UoKTsKICAgICAgdGhpc1theGlzXSA9IG47CiAgICB9IGVsc2UgewogICAgICBjb25zdCBbeCA9IDEsIHksIHpdID0gYXJncy5zcGxpY2UoMCwgMyk7CiAgICAgIHRoaXMueCA9ICt4OwogICAgICB0aGlzLnkgPSB5ID09PSB1bmRlZmluZWQgPyB0aGlzLnggOiAreTsKICAgICAgaWYoeiAhPT0gdW5kZWZpbmVkKSB0aGlzLnogPSArejsKICAgIH0KICB9CgogIGdldCB2YWx1ZXMoKSB7CiAgICBjb25zdCB7IHgsIHksIHogfSA9IHRoaXM7CiAgICByZXR1cm4gJ3onIGluIHRoaXMgPyB7IHgsIHksIHogfSA6IHsgeCwgeSB9OwogIH0KCiAgdG9NYXRyaXgobWF0cml4ID0gTWF0cml4LmlkZW50aXR5KCkpIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICAgIHJldHVybiBtYXRyaXguc2NhbGVTZWxmKHgsIHkpOwogIH0KCiAgaXNaZXJvKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuICd6JyBpbiB0aGlzID8geCA9PSAxICYmIHkgPT0gMSAmJiB6ID09IDEgOiB4ID09IDEgJiYgeSA9PSAxOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICBjb25zdCB2ZWN0b3IgPSB0aGlzLnZlY3RvcignJyk7CiAgICBjb25zdCBjb29yZHMgPSAgdmVjdG9yLmpvaW4oJywgJyk7CgogICAgcmV0dXJuIGAke3RoaXMudHlwZX0ke3RoaXMuaXMzRCA/ICczZCcgOiAnJ30oJHtjb29yZHN9KWA7CiAgfQoKICAvKmNsb25lKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuIHogIT09IHVuZGVmaW5lZCA/IG5ldyBTY2FsaW5nKHgsIHksIHopIDogbmV3IFNjYWxpbmcoeCwgeSk7CiAgfSovCgogIGludmVydCgpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiB6ICE9PSB1bmRlZmluZWQgPyBuZXcgU2NhbGluZygxIC8geCwgMSAvIHksIDEgLyB6KSA6IG5ldyBTY2FsaW5nKDEgLyB4LCAxIC8geSk7CiAgfQoKICBhY2N1bXVsYXRlKG90aGVyKSB7CiAgICBpZih0aGlzLnR5cGUgIT09IG90aGVyLnR5cGUpIHRocm93IG5ldyBFcnJvcihjbGFzc05hbWUodGhpcykgKyAnOiBhY2N1bXVsYXRlIG1pc21hdGNoJyk7CgogICAgaWYodGhpcy5pczNEKSByZXR1cm4gbmV3IFNjYWxpbmcodGhpcy54ICogb3RoZXIueCwgdGhpcy55ICogb3RoZXIueSwgdGhpcy56ICogb3RoZXIueik7CiAgICByZXR1cm4gbmV3IFNjYWxpbmcodGhpcy54ICogb3RoZXIueCwgdGhpcy55ICogb3RoZXIueSk7CiAgfQp9Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2FsaW5nLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnU2NhbGluZycsIGVudW1lcmFibGU6IGZhbHNlIH0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVNjYWxpbmcgPSBpbW11dGFibGVDbGFzcyhTY2FsaW5nKTsKCmV4cG9ydCBjbGFzcyBNYXRyaXhUcmFuc2Zvcm1hdGlvbiBleHRlbmRzIFRyYW5zZm9ybWF0aW9uIHsKICBtYXRyaXggPSBNYXRyaXguSURFTlRJVFk7CgogIGNvbnN0cnVjdG9yKGluaXQpIHsKICAgIHN1cGVyKCdtYXRyaXgnKTsKCiAgICBpZihpbml0IGluc3RhbmNlb2YgTWF0cml4KSB0aGlzLm1hdHJpeCA9IGluaXQ7CiAgICBlbHNlIGlmKGlzTWF0cml4KGluaXQpKSB0aGlzLm1hdHJpeCA9IG5ldyBNYXRyaXgoaW5pdCk7CiAgICBlbHNlIHRoaXMubWF0cml4ID0gbmV3IE1hdHJpeCguLi5hcmd1bWVudHMpOwogIH0KCiAgZ2V0IHZhbHVlcygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC52YWx1ZXMoKTsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICByZXR1cm4gbWF0cml4Lm11bHRpcGx5U2VsZih0aGlzLm1hdHJpeCk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC50b1N0cmluZygnJyk7CiAgfQoKICBpbnZlcnQoKSB7CiAgICByZXR1cm4gbmV3IE1hdHJpeFRyYW5zZm9ybWF0aW9uKHRoaXMubWF0cml4LmludmVydCgpKTsKICB9CgogIGlzWmVybygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC5pc0lkZW50aXR5KCk7CiAgfQoKICBhY2N1bXVsYXRlKG90aGVyKSB7CiAgICBpZih0aGlzLnR5cGUgIT09IG90aGVyLnR5cGUpIHRocm93IG5ldyBFcnJvcihjbGFzc05hbWUodGhpcykgKyAnOiBhY2N1bXVsYXRlIG1pc21hdGNoJyk7CgogICAgcmV0dXJuIG5ldyBNYXRyaXhUcmFuc2Zvcm1hdGlvbih0aGlzLm1hdHJpeC5tdWx0aXBseShvdGhlci5tYXRyaXgpKTsKICB9Cn0KT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFRyYW5zZm9ybWF0aW9uLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7CiAgdmFsdWU6ICdNYXRyaXhUcmFuc2Zvcm1hdGlvbicsCiAgZW51bWVyYWJsZTogZmFsc2UKfSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlTWF0cml4VHJhbnNmb3JtYXRpb24gPSBpbW11dGFibGVDbGFzcyhNYXRyaXhUcmFuc2Zvcm1hdGlvbik7CgpleHBvcnQgY2xhc3MgVHJhbnNmb3JtYXRpb25MaXN0IGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKGluaXQsIHRVbml0LCByVW5pdCkgewogICAgc3VwZXIoKTsKICAgIGlmKGlzT2JqZWN0KGluaXQpKSB7CiAgICAgIGlmKHRVbml0ID09PSB1bmRlZmluZWQpIHRVbml0ID0gaW5pdC50cmFuc2xhdGlvblVuaXQgfHwgaW5pdC50VW5pdDsKICAgICAgaWYoclVuaXQgPT0gdW5kZWZpbmVkKSByVW5pdCA9IGluaXQucm90YXRpb25Vbml0IHx8IGluaXQuclVuaXQ7CiAgICB9CiAgICAgaWYoaW5pdCkgewogICAgICB0aGlzLmluaXRpYWxpemUoaW5pdCk7CiAgICAgfQogICAgaWYodHlwZW9mIHRVbml0ID09ICdzdHJpbmcnKSB0aGlzLnRyYW5zbGF0aW9uVW5pdCA9IHRVbml0OwogICAgaWYodHlwZW9mIHJVbml0ID09ICdzdHJpbmcnKSB0aGlzLnJvdGF0aW9uVW5pdCA9IHJVbml0OwoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgaW5pdGlhbGl6ZShpbml0KSB7CiAgICBpZih0eXBlb2YgaW5pdCA9PSAnbnVtYmVyJykgd2hpbGUodGhpcy5sZW5ndGggPCBpbml0KSB0aGlzLnB1c2godW5kZWZpbmVkKTsKICAgIGVsc2UgaWYodHlwZW9mIGluaXQgPT0gJ3N0cmluZycpIFRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUuZnJvbVN0cmluZy5jYWxsKHRoaXMsIGluaXQpOwogICAgZWxzZSBpZihpbml0IGluc3RhbmNlb2YgQXJyYXkpIFRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUuZnJvbUFycmF5LmNhbGwodGhpcywgaW5pdCk7CiAgICBlbHNlIHRocm93IG5ldyBFcnJvcignTm8gc3VjaCBpbml0aWFsaXphdGlvbjogJyArIGluaXQpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBnZXQgW1N5bWJvbC5pc0NvbmNhdFNwcmVhZGFibGVdKCkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKgogIFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIHRoaXMudG9Tb3VyY2UoKTsKICB9Ki8KCiAgc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkgewogICAgcmV0dXJuIFRyYW5zZm9ybWF0aW9uTGlzdDsKICB9CgogIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkgewogICAgcmV0dXJuIFRyYW5zZm9ybWF0aW9uTGlzdDsKICB9CgogIGZyb21TdHJpbmcoc3RyKSB7CiAgICBsZXQgbiwKICAgICAgYSA9IFtdOwoKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpICs9IG4pIHsKICAgICAgbGV0IHMgPSBzdHIuc2xpY2UoaSk7CiAgICAgIG4gPSBzLmluZGV4T2YoJyknKSArIDE7CiAgICAgIGlmKG4gPT0gMCkgbiA9IHN0ci5sZW5ndGg7CiAgICAgIHMgPSBzLnNsaWNlKDAsIG4pLnRyaW0oKTsKICAgICAgaWYocyAhPSAnJykgYS5wdXNoKHMpOwogICAgfQogICAgcmV0dXJuIHRoaXMuZnJvbUFycmF5KGEpOwogIH0KCiAgZnJvbUFycmF5KGFycikgewogICAgZm9yKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBjb25zdCBhcmcgPSBhcnJbaV07CgogICAgICBpZihhcmcgaW5zdGFuY2VvZiBUcmFuc2Zvcm1hdGlvbikgdGhpcy5wdXNoKGFyZyk7CiAgICAgIGVsc2UgaWYodHlwZW9mIGFyZyA9PSAnc3RyaW5nJykgdGhpcy5wdXNoKFRyYW5zZm9ybWF0aW9uLmZyb21TdHJpbmcoYXJnKSk7CiAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdObyBzdWNoIHRyYW5zZm9ybWF0aW9uOiAnICsgYXJnKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9CgogIGdldCB0cmFuc2xhdGlvblVuaXQoKSB7CiAgICByZXR1cm4gKGlzT2JqZWN0KHRoaXMudHJhbnNsYXRpb24pICYmIHRoaXMudHJhbnNsYXRpb24udW5pdCkgfHwgdGhpcy50VW5pdDsKICB9CiAgc2V0IHRyYW5zbGF0aW9uVW5pdCh2YWx1ZSkgewogICAgaWYoaXNPYmplY3QodGhpcy50cmFuc2xhdGlvbikpIHRoaXMudHJhbnNsYXRpb24udW5pdCA9IHZhbHVlOwogICAgZWxzZSB0aGlzLnRVbml0ID0gdmFsdWU7CiAgfQoKICBnZXQgcm90YXRpb25Vbml0KCkgewogICAgcmV0dXJuIChpc09iamVjdCh0aGlzLnJvdGF0aW9uKSAmJiB0aGlzLnJvdGF0aW9uLnVuaXQpIHx8IHRoaXMuclVuaXQ7CiAgfQogIHNldCByb3RhdGlvblVuaXQodmFsdWUpIHsKICAgIGlmKGlzT2JqZWN0KHRoaXMucm90YXRpb24pKSB0aGlzLnJvdGF0aW9uLnVuaXQgPSB2YWx1ZTsKICAgIGVsc2UgdGhpcy5yVW5pdCA9IHZhbHVlOwogIH0KICBzdGF0aWMgZnJvbVN0cmluZyhzdHIpIHsKICAgIHJldHVybiBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCkuZnJvbVN0cmluZyhzdHIpOwogIH0KCiAgc3RhdGljIGZyb21BcnJheShhcnIpIHsKICAgIHJldHVybiBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCkuZnJvbUFycmF5KGFycik7CiAgfQoKICBzdGF0aWMgZnJvbU1hdHJpeChtYXRyaXgpIHsKICAgIG1hdHJpeCA9IG1hdHJpeCBpbnN0YW5jZW9mIE1hdHJpeCA/IG1hdHJpeCA6IG5ldyBNYXRyaXgobWF0cml4KTsKCiAgICBjb25zdCB0cmFuc2Zvcm1hdGlvbnMgPSBNYXRyaXguZGVjb21wb3NlKG1hdHJpeCwgdHJ1ZSk7CgogICAgZGVmaW5lKHRyYW5zZm9ybWF0aW9ucy5zY2FsZSwgewogICAgICB0b0FycmF5KCkgewogICAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldOwogICAgICB9CiAgICB9KTsKICAgIGRlZmluZSh0cmFuc2Zvcm1hdGlvbnMudHJhbnNsYXRlLCB7CiAgICAgIHRvQXJyYXkoKSB7CiAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07CiAgICAgIH0KICAgIH0pOwoKICAgIGxldCByZXQgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCk7CgogICAgcmV0LnRyYW5zbGF0ZSguLi50cmFuc2Zvcm1hdGlvbnMudHJhbnNsYXRlLnRvQXJyYXkoKSk7CiAgICByZXQucm90YXRlKHRyYW5zZm9ybWF0aW9ucy5yb3RhdGUpOwogICAgcmV0LnNjYWxlKC4uLnRyYW5zZm9ybWF0aW9ucy5zY2FsZS50b0FycmF5KCkpOwoKICAgIHJldHVybiByZXQ7CiAgfQoKICBwdXNoKC4uLmFyZ3MpIHsKICAgIGZvcihsZXQgYXJnIG9mIGFyZ3MpIHsKICAgICAgaWYodHlwZW9mIGFyZyA9PSAnc3RyaW5nJykgYXJnID0gVHJhbnNmb3JtYXRpb24uZnJvbVN0cmluZyhhcmcpOwogICAgICBlbHNlIGlmKGlzTWF0cml4KGFyZykpIGFyZyA9IG5ldyBNYXRyaXhUcmFuc2Zvcm1hdGlvbihhcmcpOwoKICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCBhcmcpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBjbG9uZSgpIHsKICAgIHJldHVybiB0aGlzLm1hcCh0ID0+IHQuY2xvbmUoKSk7IC8vIHRoaXMuc2xpY2UoKTsKICB9CgogIG1hcChmbikgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLm1hcCkoZm4pOwogIH0KCiAgc2xpY2UoLi4uYXJncykgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLnNsaWNlKSguLi5hcmdzKTsKICB9CgogIHNwbGljZSguLi5hcmdzKSB7CiAgICByZXR1cm4gdGhpcy5iYXNlQ2FsbChBcnJheS5wcm90b3R5cGUuc3BsaWNlKSguLi5hcmdzKTsKICB9CgogIGNvbmNhdCguLi5hcmdzKSB7CiAgICByZXR1cm4gdGhpcy5iYXNlQ2FsbChBcnJheS5wcm90b3R5cGUuY29uY2F0KSguLi5hcmdzKTsKICB9CgogIGZpbHRlcihwcmVkKSB7CiAgICByZXR1cm4gdGhpcy5iYXNlQ2FsbChBcnJheS5wcm90b3R5cGUuZmlsdGVyKShwcmVkKTsKICB9CgogIGJhc2VDYWxsKGMgPSBBcnJheS5wcm90b3R5cGUubWFwKSB7CiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHsKICAgICAgY29uc3QgeyB0VW5pdCwgclVuaXQgfSA9IHRoaXM7CiAgICAgIGxldCByID0gYy5jYWxsKHRoaXMsIC4uLmFyZ3MpOwogICAgICBpZih0VW5pdCkgci50VW5pdCA9IHRVbml0OwogICAgICBpZihyVW5pdCkgci5yVW5pdCA9IHJVbml0OwogICAgICByZXR1cm4gcjsKICAgIH07CiAgfQoKICB1bnNoaWZ0KC4uLmFyZ3MpIHsKICAgIGZvcihsZXQgYXJnIG9mIGFyZ3MucmV2ZXJzZSgpKSB7CiAgICAgIGlmKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIGFyZyA9IFRyYW5zZm9ybWF0aW9uLmZyb21TdHJpbmcoYXJnKTsKICAgICAgQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbCh0aGlzLCBhcmcpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICByb3RhdGUoLi4uYXJncykgewogICAgbGV0IHJvdGF0aW9uID0gbmV3IFJvdGF0aW9uKC4uLmFyZ3MpOwogICAgaWYoIXJvdGF0aW9uLmlzWmVybygpKSBBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIHJvdGF0aW9uKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgdHJhbnNsYXRlKHgsIHkpIHsKICAgIGxldCB0cmFucyA9IHRoaXMuZmlsdGVyKHQgPT4gIXQudHlwZS5zdGFydHNXaXRoKCd0cmFuc2xhdCcpKTsKICAgIGxldCB2ZWMgPSBuZXcgUG9pbnQoeCwgeSk7CgogICAgLy90cmFucy50b01hdHJpeCgpLnRyYW5zZm9ybVBvaW50KHZlYyk7CgogICAgdmVjID0gdmVjLnJvdW5kKDAuMDAwMDEsIDUpOwogICAgLy9jb25zb2xlLmxvZygiZnJvbToiLCBuZXcgUG9pbnQoeCx5KSwgIiB0bzoiLCB2ZWMpOwogICAgbGV0IHRyYW5zbGF0aW9uID0gbmV3IFRyYW5zbGF0aW9uKHZlYy54LCB2ZWMueSk7CgogICAgaWYoIXRyYW5zbGF0aW9uLmlzWmVybygpKSAvKiAgICBpZihNYXRoLmFicyh2ZWMueCkgIT0gMCB8fCBNYXRoLmFicyh2ZWMueSkgIT0gMCkgKi8gQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCB0cmFuc2xhdGlvbik7CgogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBzY2FsZSguLi5hcmdzKSB7CiAgICBsZXQgc2NhbGluZyA9IG5ldyBTY2FsaW5nKC4uLmFyZ3MpOwogICAgaWYoIXNjYWxpbmcuaXNaZXJvKCkpIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgc2NhbGluZyk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIG1hdHJpeCguLi5hcmdzKSB7CiAgICBsZXQgbWF0cml4VHJhbnNmb3JtYXRpb24gPSBuZXcgTWF0cml4VHJhbnNmb3JtYXRpb24oLi4uYXJncyk7CiAgICBpZighbWF0cml4VHJhbnNmb3JtYXRpb24uaXNaZXJvKCkpIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgbWF0cml4VHJhbnNmb3JtYXRpb24pOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICB0b1N0cmluZyh0VW5pdCwgclVuaXQpIHsKICAgIGlmKHRoaXMubGVuZ3RoID4gMCkgewogICAgICB0VW5pdCA9IHRVbml0IHx8IHRoaXMudHJhbnNsYXRpb25Vbml0OwogICAgICByVW5pdCA9IHJVbml0IHx8IHRoaXMucm90YXRpb25Vbml0OwogICAgICBsZXQgciA9IHRoaXMubWFwKHQgPT4gdCAmJiB0LnR5cGUgJiYgdC50b1N0cmluZyh0LnR5cGUuc3RhcnRzV2l0aCgnc2NhbCcpID8gJycgOiB0LnR5cGUuc3RhcnRzV2l0aCgncm90YXQnKSA/IHJVbml0IDogdFVuaXQpKS5qb2luKCcgJyk7CiAgICAgIHJldHVybiByOwogICAgfQogICAgcmV0dXJuICcnOwogIH0KCiAgdG9ET00oKSB7CiAgICByZXR1cm4gdGhpcy50b1N0cmluZygncHgnLCAnZGVnJyk7CiAgfQoKICAvKiAgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7CiAgICByZXR1cm4gdGhpcy50b1N0cmluZygpOwogIH0qLwoKICB0b1NvdXJjZSgpIHsKICAgIGxldCBzID0gJ25ldyAnICArIGNsYXNzTmFtZSh0aGlzKSAgKyAnKFsnOwoKICAgIHMgKz0gdGhpcy5tYXAodCA9PiB0LnRvU291cmNlKCkpLmpvaW4oJywgJyk7CiAgICByZXR1cm4gcyArICddKSc7CiAgfQoKICB0b01hdHJpY2VzKCkgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChbLi4udGhpc10sIHQgPT4gdC50b01hdHJpeCgpKTsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICBmb3IobGV0IG90aGVyIG9mIHRoaXMudG9NYXRyaWNlcygpKSBtYXRyaXgubXVsdGlwbHlTZWxmKG90aGVyKTsKCiAgICByZXR1cm4gbWF0cml4LnJvdW5kU2VsZigpOwogIH0KCiAgdW5kbygpIHsKICAgIGxldCByZXQgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCk7CgogICAgZm9yKGxldCBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChyZXQsIHRoaXNbaV0uaW52ZXJ0KCkpOwoKICAgIHJldHVybiByZXQ7CiAgfQoKICBtZXJnZSguLi5hcmdzKSB7CiAgICBmb3IobGV0IGFyZyBvZiBhcmdzKSB7CiAgICAgIGlmKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIGFyZyA9IFRyYW5zZm9ybWF0aW9uTGlzdC5mcm9tU3RyaW5nKGFyZyk7CgogICAgICBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcywgYXJnKTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgZGVjb21wb3NlKGRlZ3JlZXMgPSB0cnVlLCB0cmFuc2Zvcm1hdGlvbkxpc3QgPSB0cnVlKSB7CiAgICBsZXQgbWF0cml4ID0gdGhpcy50b01hdHJpeCgpOwogICAgY29uc3QgeyB0cmFuc2xhdGUsIHJvdGF0ZSwgc2NhbGUgfSA9IG1hdHJpeC5kZWNvbXBvc2UoZGVncmVlcyk7CiAgICBsZXQgZGVjb21wb3NlZCA9IHsgdHJhbnNsYXRlLCByb3RhdGUsIHNjYWxlIH07CgogICAgaWYodHJhbnNmb3JtYXRpb25MaXN0KSB7CiAgICAgIGxldCByZXQgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCk7CiAgICAgIHJldC50cmFuc2xhdGUodHJhbnNsYXRlLngsIHRyYW5zbGF0ZS55LCB0cmFuc2xhdGUueik7CiAgICAgIHJldC5yb3RhdGUocm90YXRlKTsKICAgICAgcmV0LnNjYWxlKHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnopOwogICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIGRlY29tcG9zZWQuc2NhbGUudG9BcnJheSA9IGRlY29tcG9zZWQudHJhbnNsYXRlLnRvQXJyYXkgPSBmdW5jdGlvbiB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTsKICAgIH07CiAgICByZXR1cm4gZGVjb21wb3NlZDsKICB9CgogIGZpbmRMYXN0SW5kZXgocHJlZGljYXRlKSB7CiAgICBmb3IobGV0IGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzW2ldOwogICAgICBpZihwcmVkaWNhdGUoeCkpIHJldHVybiBpOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICBmaW5kTGFzdChwcmVkaWNhdGUpIHsKICAgIGxldCBpbmRleCA9IHRoaXMuZmluZExhc3RJbmRleChwcmVkaWNhdGUpOwogICAgcmV0dXJuIHRoaXNbaW5kZXhdOwogIH0KCiAgZ2V0IHJvdGF0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZmluZExhc3QoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHlwZSAmJiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgncm90YXQnKSk7CiAgfQogIHNldCByb3RhdGlvbih2YWx1ZSkgewogICAgbGV0IGluZGV4ID0gdGhpcy5maW5kTGFzdEluZGV4KGl0ZW0gPT4gaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ3JvdGF0JykpOwogICAgdmFsdWUgPSB2YWx1ZSBpbnN0YW5jZW9mIFJvdGF0aW9uID8gdmFsdWUgOiBuZXcgUm90YXRpb24odmFsdWUpOwogICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIGluZGV4LCAxLCB2YWx1ZSk7CiAgfQoKICBnZXQgc2NhbGluZygpIHsKICAgIHJldHVybiB0aGlzLmZpbmRMYXN0KGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnR5cGUgJiYgaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ3NjYWwnKSk7CiAgfQogIHNldCBzY2FsaW5nKHZhbHVlKSB7CiAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmRMYXN0SW5kZXgoaXRlbSA9PiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgnc2NhbCcpKTsKICAgIHZhbHVlID0gdmFsdWUgaW5zdGFuY2VvZiBTY2FsaW5nID8gdmFsdWUgOiBuZXcgU2NhbGluZyh2YWx1ZSk7CiAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwodGhpcywgaW5kZXgsIDEsIHZhbHVlKTsKICB9CgogIGdldCB0cmFuc2xhdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmZpbmRMYXN0KGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnR5cGUgJiYgdHlwZW9mIGl0ZW0udHlwZSA9PSAnc3RyaW5nJyAmJiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgndHJhbnNsYXQnKSk7CiAgfQoKICBzZXQgdHJhbnNsYXRpb24odmFsdWUpIHsKICAgIGxldCBpbmRleCA9IHRoaXMuZmluZExhc3RJbmRleChpdGVtID0+IGl0ZW0gJiYgaXRlbS50eXBlICYmIGl0ZW0udHlwZS5zdGFydHNXaXRoKCd0cmFuc2wnKSk7CiAgICB2YWx1ZSA9IHZhbHVlIGluc3RhbmNlb2YgVHJhbnNsYXRpb24gPyB2YWx1ZSA6IG5ldyBUcmFuc2xhdGlvbih2YWx1ZSk7CiAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwodGhpcywgaW5kZXgsIDEsIHZhbHVlKTsKICB9CiAgLyogIG1hcCguLi5hcmdzKSB7CiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5hcHBseShBcnJheS5mcm9tKHRoaXMpLCBhcmdzKTsKICB9Ki8KCiAgZ2V0IGxhc3QoKSB7CiAgICByZXR1cm4gdGhpcy5hdCgtMSk7CiAgfQogIGdldCBmaXJzdCgpIHsKICAgIHJldHVybiB0aGlzLmF0KDApOwogIH0KCiAgYXQocG9zKSB7CiAgICBpZihwb3MgPCAwKSBwb3MgKz0gdGhpcy5sZW5ndGg7CiAgICByZXR1cm4gdGhpc1twb3NdOwogIH0KCiAgY29sbGFwc2UoKSB7CiAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwoKICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBpdGVtID0gdGhpc1tpXTsKICAgICAgaWYoaSArIDEgPCB0aGlzLmxlbmd0aCAmJiB0aGlzW2kgKyAxXS50eXBlID09IHRoaXNbaV0udHlwZSkgewogICAgICAgIGl0ZW0gPSBpdGVtLmFjY3VtdWxhdGUodGhpc1tpICsgMV0pOwogICAgICAgIGkrKzsKICAgICAgfSBlbHNlIHsKICAgICAgICBpdGVtID0gaXRlbS5jbG9uZSgpOwogICAgICB9CiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocmV0LCBpdGVtKTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQoKICBjb2xsYXBzZUFsbCgpIHsKICAgIHJldHVybiBUcmFuc2Zvcm1hdGlvbkxpc3QuZnJvbU1hdHJpeCh0aGlzLnRvTWF0cml4KCkpOwogIH0KCiAgZ2V0IGFuZ2xlKCkgewogICAgbGV0IG1hdHJpeCA9IHRoaXMudG9NYXRyaXgoKTsKICAgIGxldCB0ID0gbWF0cml4LmRlY29tcG9zZSgpOwogICAgbGV0IHsgcm90YXRlIH0gPSB0OwogICAgLy9jb25zb2xlLmxvZygnUk9UQVRJT046Jywgcm90YXRlKTsKICAgIHJldHVybiByb3RhdGU7CiAgfQoKICBpbnZlcnQoKSB7CiAgICAvL3JldHVybiB0aGlzLnJlZHVjZSgoYWNjLCB0KSA9PiBbdC5pbnZlcnQoKSwgLi4uYWNjXSwgW10pOwogICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm1hdGlvbkxpc3QodGhpcy5yZWR1Y2VSaWdodCgoYWNjLCB0KSA9PiBbLi4uYWNjLCB0LmludmVydCgpXSwgW10pKTsKICB9CgogIGpvaW4oc2VwID0gJyAnKSB7CiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLCBzZXApOwogIH0KCiAgY2xlYXIoKSB7CiAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwodGhpcywgMCwgdGhpcy5sZW5ndGgpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBhcHBseShvYmosIHJvdW5kID0gdHJ1ZSkgewogICAgaWYodHlwZW9mIG9iai50cmFuc2Zvcm0gPT0gJ2Z1bmN0aW9uJykgewogICAgICBjb25zdCBtYXRyaXggPSB0aGlzLnRvTWF0cml4KCk7CiAgICAgIHJldHVybiBvYmoudHJhbnNmb3JtKG1hdHJpeCwgcm91bmQpOwogICAgfQogIH0KfQpPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7CiAgdmFsdWU6ICdUcmFuc2Zvcm1hdGlvbkxpc3QnLAogIGVudW1lcmFibGU6IGZhbHNlCn0pOwoKY29uc3QgeyBjb25jYXQsIGNvcHlXaXRoaW4sIGZpbmQsIGZpbmRJbmRleCwgbGFzdEluZGV4T2YsIHBvcCwgcHVzaCwgc2hpZnQsIHVuc2hpZnQsIHNsaWNlLCBzcGxpY2UsIGluY2x1ZGVzLCBpbmRleE9mLCBlbnRyaWVzLCBmaWx0ZXIsIG1hcCwgZXZlcnksIHNvbWUsIHJlZHVjZSwgcmVkdWNlUmlnaHQgfSA9IEFycmF5LnByb3RvdHlwZTsKCmRlZmluZSgKICBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLAogIHsKICAgICBjb3B5V2l0aGluLAogICAgZmluZCwKICAgIGZpbmRJbmRleCwKICAgIGxhc3RJbmRleE9mLAogICAgcG9wLAogICAgc2hpZnQsCiAgICAgaW5jbHVkZXMsCiAgICBpbmRleE9mLAogICAgZW50cmllcywKICAgICBldmVyeSwKICAgIHNvbWUsCiAgICByZWR1Y2UsCiAgICByZWR1Y2VSaWdodAogIH0sCiAgewogICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXTsKICAgIH0sCiAgICBbU3ltYm9sLmlzQ29uY2F0U3ByZWFkYWJsZV0oKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KKTsKCi8vT2JqZWN0LnNldFByb3RvdHlwZU9mKFRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUsIFRyYW5zZm9ybWF0aW9uLnByb3RvdHlwZSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0ID0gaW1tdXRhYmxlQ2xhc3MoVHJhbnNmb3JtYXRpb25MaXN0KTsKCkltbXV0YWJsZVRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24oLi4uYXJncykgewogIHJldHVybiB0aGlzLmNvbmNhdChbbmV3IEltbXV0YWJsZVJvdGF0aW9uKC4uLmFyZ3MpXSk7Cn07CgpJbW11dGFibGVUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICByZXR1cm4gdGhpcy5jb25jYXQoW25ldyBJbW11dGFibGVUcmFuc2xhdGlvbiguLi5hcmdzKV0pOwp9OwoKSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICByZXR1cm4gdGhpcy5jb25jYXQoW25ldyBJbW11dGFibGVTY2FsaW5nKC4uLmFyZ3MpXSk7Cn07CgpkZWZpbmVHZXR0ZXIoSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0LCBTeW1ib2wuc3BlY2llcywgKCkgPT4gSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0KTsKAAAAAAAAAAClVAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhAwAAAAAAAOEDAAAAAAAAAAAAAAAA8L8"
				],
				[
					323,
					1,
					"right_delete",
					null,
					"AQAAAG4cAAAAAAAAbhwAAAAAAAAEAAAAU2VsZg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABuHAAAAAAAAHIcAAAAAAAAAAAAAAAA8L8"
				],
				[
					351,
					1,
					"insert",
					{
						"characters": "\nfor"
					},
					"BgAAAClAAAAAAAAAKkAAAAAAAAAAAAAAKkAAAAAAAAAsQAAAAAAAAAAAAAAsQAAAAAAAAC5AAAAAAAAAAAAAAC5AAAAAAAAAL0AAAAAAAAAAAAAAL0AAAAAAAAAwQAAAAAAAAAAAAAAwQAAAAAAAADFAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAApQAAAAAAAAClAAAAAAAAAAAAAAAAA8L8"
				],
				[
					352,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAADFAAAAAAAAAM0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxQAAAAAAAADFAAAAAAAAAAAAAAAAA8L8"
				],
				[
					353,
					1,
					"insert",
					{
						"characters": "lket"
					},
					"BAAAADJAAAAAAAAAM0AAAAAAAAAAAAAAM0AAAAAAAAA0QAAAAAAAAAAAAAA0QAAAAAAAADVAAAAAAAAAAAAAADVAAAAAAAAANkAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAyQAAAAAAAADJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					354,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADZAAAAAAAAAN0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA2QAAAAAAAADZAAAAAAAAAAAAAAAAA8L8"
				],
				[
					355,
					4,
					"left_delete",
					null,
					"BAAAADZAAAAAAAAANkAAAAAAAAABAAAAIDVAAAAAAAAANUAAAAAAAAABAAAAdDRAAAAAAAAANEAAAAAAAAABAAAAZTNAAAAAAAAAM0AAAAAAAAABAAAAaw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA3QAAAAAAAADdAAAAAAAAAAAAAAAAA8L8"
				],
				[
					356,
					1,
					"insert",
					{
						"characters": "et"
					},
					"AgAAADNAAAAAAAAANEAAAAAAAAAAAAAANEAAAAAAAAA1QAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAzQAAAAAAAADNAAAAAAAAAAAAAAAAA8L8"
				],
				[
					357,
					1,
					"insert",
					{
						"characters": " t"
					},
					"AgAAADVAAAAAAAAANkAAAAAAAAAAAAAANkAAAAAAAAA3QAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA1QAAAAAAAADVAAAAAAAAAAAAAAAAA8L8"
				],
				[
					358,
					1,
					"insert",
					{
						"characters": " of"
					},
					"AwAAADdAAAAAAAAAOEAAAAAAAAAAAAAAOEAAAAAAAAA5QAAAAAAAAAAAAAA5QAAAAAAAADpAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA3QAAAAAAAADdAAAAAAAAAAAAAAAAA8L8"
				],
				[
					359,
					1,
					"insert",
					{
						"characters": " this"
					},
					"BQAAADpAAAAAAAAAO0AAAAAAAAAAAAAAO0AAAAAAAAA8QAAAAAAAAAAAAAA8QAAAAAAAAD1AAAAAAAAAAAAAAD1AAAAAAAAAPkAAAAAAAAAAAAAAPkAAAAAAAAA/QAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA6QAAAAAAAADpAAAAAAAAAAAAAAAAA8L8"
				],
				[
					361,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAEBAAAAAAAAAQUAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABAQAAAAAAAAEBAAAAAAAAAAAAAAAAA8L8"
				],
				[
					362,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAEFAAAAAAAAAQ0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABBQAAAAAAAAEFAAAAAAAAAAAAAAAAA8L8"
				],
				[
					363,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAEFAAAAAAAAAQUAAAAAAAAABAAAAe0FAAAAAAAAAQUAAAAAAAAABAAAAfQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABCQAAAAAAAAEJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					377,
					1,
					"insert",
					{
						"characters": "\nreturn"
					},
					"CQAAAClAAAAAAAAAKkAAAAAAAAAAAAAAKkAAAAAAAAAsQAAAAAAAAAAAAAAsQAAAAAAAAC5AAAAAAAAAAAAAAC5AAAAAAAAAL0AAAAAAAAAAAAAAL0AAAAAAAAAwQAAAAAAAAAAAAAAwQAAAAAAAADFAAAAAAAAAAAAAADFAAAAAAAAAMkAAAAAAAAAAAAAAMkAAAAAAAAAzQAAAAAAAAAAAAAAzQAAAAAAAADRAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAApQAAAAAAAAClAAAAAAAAAAAAAAAAAZ0A"
				],
				[
					378,
					1,
					"insert",
					{
						"characters": " this.map"
					},
					"CQAAADRAAAAAAAAANUAAAAAAAAAAAAAANUAAAAAAAAA2QAAAAAAAAAAAAAA2QAAAAAAAADdAAAAAAAAAAAAAADdAAAAAAAAAOEAAAAAAAAAAAAAAOEAAAAAAAAA5QAAAAAAAAAAAAAA5QAAAAAAAADpAAAAAAAAAAAAAADpAAAAAAAAAO0AAAAAAAAAAAAAAO0AAAAAAAAA8QAAAAAAAAAAAAAA8QAAAAAAAAD1AAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA0QAAAAAAAADRAAAAAAAAAAAAAAAAA8L8"
				],
				[
					379,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAD1AAAAAAAAAP0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA9QAAAAAAAAD1AAAAAAAAAAAAAAAAA8L8"
				],
				[
					380,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAAD5AAAAAAAAAP0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA+QAAAAAAAAD5AAAAAAAAAAAAAAAAA8L8"
				],
				[
					381,
					1,
					"insert",
					{
						"characters": " =>"
					},
					"AwAAAD9AAAAAAAAAQEAAAAAAAAAAAAAAQEAAAAAAAABBQAAAAAAAAAAAAABBQAAAAAAAAEJAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA/QAAAAAAAAD9AAAAAAAAAAAAAAAAA8L8"
				],
				[
					382,
					1,
					"insert",
					{
						"characters": " t.toMatrix"
					},
					"CwAAAEJAAAAAAAAAQ0AAAAAAAAAAAAAAQ0AAAAAAAABEQAAAAAAAAAAAAABEQAAAAAAAAEVAAAAAAAAAAAAAAEVAAAAAAAAARkAAAAAAAAAAAAAARkAAAAAAAABHQAAAAAAAAAAAAABHQAAAAAAAAEhAAAAAAAAAAAAAAEhAAAAAAAAASUAAAAAAAAAAAAAASUAAAAAAAABKQAAAAAAAAAAAAABKQAAAAAAAAEtAAAAAAAAAAAAAAEtAAAAAAAAATEAAAAAAAAAAAAAATEAAAAAAAABNQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABCQAAAAAAAAEJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					383,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAE1AAAAAAAAAT0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABNQAAAAAAAAE1AAAAAAAAAAAAAAAAA8L8"
				],
				[
					385,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAFBAAAAAAAAAUUAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABQQAAAAAAAAFBAAAAAAAAAAAAAAAAA8L8"
				],
				[
					388,
					1,
					"left_delete",
					null,
					"AQAAAFJAAAAAAAAAUkAAAAAAAABbAAAAICAgIGZvcihsZXQgdCBvZiB0aGlzKSAKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoWy4uLnRoaXNdLCB0ID0+IHQudG9NYXRyaXgoKSk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABSQAAAAAAAAK1AAAAAAAAAAAAAAAAAAAA"
				],
				[
					395,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAGJAAAAAAAAAY0AAAAAAAAAAAAAAY0AAAAAAAABjQAAAAAAAABoAAABtYXRyaXggPSBNYXRyaXguaWRlbnRpdHkoKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABiQAAAAAAAAHxAAAAAAAAAAAAAAAAA8L8"
				],
				[
					398,
					1,
					"insert",
					{
						"characters": "\nreturn"
					},
					"CQAAAGZAAAAAAAAAZ0AAAAAAAAAAAAAAZ0AAAAAAAABpQAAAAAAAAAAAAABpQAAAAAAAAGtAAAAAAAAAAAAAAGtAAAAAAAAAbEAAAAAAAAAAAAAAbEAAAAAAAABtQAAAAAAAAAAAAABtQAAAAAAAAG5AAAAAAAAAAAAAAG5AAAAAAAAAb0AAAAAAAAAAAAAAb0AAAAAAAABwQAAAAAAAAAAAAABwQAAAAAAAAHFAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABmQAAAAAAAAGZAAAAAAAAAAAAAAAAA8L8"
				],
				[
					399,
					1,
					"insert",
					{
						"characters": " Matrix.mulitpoly"
					},
					"EQAAAHFAAAAAAAAAckAAAAAAAAAAAAAAckAAAAAAAABzQAAAAAAAAAAAAABzQAAAAAAAAHRAAAAAAAAAAAAAAHRAAAAAAAAAdUAAAAAAAAAAAAAAdUAAAAAAAAB2QAAAAAAAAAAAAAB2QAAAAAAAAHdAAAAAAAAAAAAAAHdAAAAAAAAAeEAAAAAAAAAAAAAAeEAAAAAAAAB5QAAAAAAAAAAAAAB5QAAAAAAAAHpAAAAAAAAAAAAAAHpAAAAAAAAAe0AAAAAAAAAAAAAAe0AAAAAAAAB8QAAAAAAAAAAAAAB8QAAAAAAAAH1AAAAAAAAAAAAAAH1AAAAAAAAAfkAAAAAAAAAAAAAAfkAAAAAAAAB/QAAAAAAAAAAAAAB/QAAAAAAAAIBAAAAAAAAAAAAAAIBAAAAAAAAAgUAAAAAAAAAAAAAAgUAAAAAAAACCQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxQAAAAAAAAHFAAAAAAAAAAAAAAAAA8L8"
				],
				[
					400,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIJAAAAAAAAAhEAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCQAAAAAAAAIJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					401,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAIJAAAAAAAAAgkAAAAAAAAABAAAAKIJAAAAAAAAAgkAAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACDQAAAAAAAAINAAAAAAAAAAAAAAAAA8L8"
				],
				[
					402,
					3,
					"left_delete",
					null,
					"AwAAAIFAAAAAAAAAgUAAAAAAAAABAAAAeYBAAAAAAAAAgEAAAAAAAAABAAAAbH9AAAAAAAAAf0AAAAAAAAABAAAAbw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCQAAAAAAAAIJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					403,
					1,
					"insert",
					{
						"characters": "ly"
					},
					"AgAAAH9AAAAAAAAAgEAAAAAAAAAAAAAAgEAAAAAAAACBQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB/QAAAAAAAAH9AAAAAAAAAAAAAAAAA8L8"
				],
				[
					404,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIFAAAAAAAAAg0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACBQAAAAAAAAIFAAAAAAAAAAAAAAAAA8L8"
				],
				[
					405,
					1,
					"insert",
					{
						"characters": "...this.toMatric"
					},
					"EAAAAIJAAAAAAAAAg0AAAAAAAAAAAAAAg0AAAAAAAACEQAAAAAAAAAAAAACEQAAAAAAAAIVAAAAAAAAAAAAAAIVAAAAAAAAAhkAAAAAAAAAAAAAAhkAAAAAAAACHQAAAAAAAAAAAAACHQAAAAAAAAIhAAAAAAAAAAAAAAIhAAAAAAAAAiUAAAAAAAAAAAAAAiUAAAAAAAACKQAAAAAAAAAAAAACKQAAAAAAAAItAAAAAAAAAAAAAAItAAAAAAAAAjEAAAAAAAAAAAAAAjEAAAAAAAACNQAAAAAAAAAAAAACNQAAAAAAAAI5AAAAAAAAAAAAAAI5AAAAAAAAAj0AAAAAAAAAAAAAAj0AAAAAAAACQQAAAAAAAAAAAAACQQAAAAAAAAJFAAAAAAAAAAAAAAJFAAAAAAAAAkkAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCQAAAAAAAAIJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					406,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAAJJAAAAAAAAAk0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSQAAAAAAAAJJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					407,
					1,
					"left_delete",
					null,
					"AQAAAJJAAAAAAAAAkkAAAAAAAAABAAAAcw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACTQAAAAAAAAJNAAAAAAAAAAAAAAAAA8L8"
				],
				[
					408,
					1,
					"insert",
					{
						"characters": "es"
					},
					"AgAAAJJAAAAAAAAAk0AAAAAAAAAAAAAAk0AAAAAAAACUQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSQAAAAAAAAJJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					409,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJRAAAAAAAAAlkAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUQAAAAAAAAJRAAAAAAAAAAAAAAAAA8L8"
				],
				[
					411,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAJdAAAAAAAAAmEAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACXQAAAAAAAAJdAAAAAAAAAAAAAAAAA8L8"
				],
				[
					414,
					1,
					"left_delete",
					null,
					"AQAAAJlAAAAAAAAAmUAAAAAAAABkAAAAICAgIGZvcihsZXQgb3RoZXIgb2YgdGhpcy50b01hdHJpY2VzKCkpIG1hdHJpeC5tdWx0aXBseVNlbGYob3RoZXIpOwoKICAgIHJldHVybiBtYXRyaXgucm91bmRTZWxmKCk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACZQAAAAAAAAP1AAAAAAAAAAAAAAAAAAAA"
				],
				[
					430,
					1,
					"left_delete",
					null,
					"AQAAAHxAAAAAAAAAfEAAAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9QAAAAAAAAH1AAAAAAAAAAAAAAAAA8L8"
				],
				[
					432,
					1,
					"insert",
					{
						"characters": "i"
					},
					"AQAAAH1AAAAAAAAAfkAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9QAAAAAAAAH1AAAAAAAAAAAAAAAAA8L8"
				],
				[
					438,
					1,
					"insert",
					{
						"characters": "oide"
					},
					"BAAAAHlAAAAAAAAAekAAAAAAAAAAAAAAekAAAAAAAAB7QAAAAAAAAAAAAAB7QAAAAAAAAHxAAAAAAAAAAAAAAHxAAAAAAAAAfUAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5QAAAAAAAAHlAAAAAAAAAAAAAAAAA8L8"
				],
				[
					439,
					4,
					"left_delete",
					null,
					"BAAAAHxAAAAAAAAAfEAAAAAAAAABAAAAZXtAAAAAAAAAe0AAAAAAAAABAAAAZHpAAAAAAAAAekAAAAAAAAABAAAAaXlAAAAAAAAAeUAAAAAAAAABAAAAbw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9QAAAAAAAAH1AAAAAAAAAAAAAAAAA8L8"
				],
				[
					440,
					1,
					"insert",
					{
						"characters": "identity()."
					},
					"CwAAAHlAAAAAAAAAekAAAAAAAAAAAAAAekAAAAAAAAB7QAAAAAAAAAAAAAB7QAAAAAAAAHxAAAAAAAAAAAAAAHxAAAAAAAAAfUAAAAAAAAAAAAAAfUAAAAAAAAB+QAAAAAAAAAAAAAB+QAAAAAAAAH9AAAAAAAAAAAAAAH9AAAAAAAAAgEAAAAAAAAAAAAAAgEAAAAAAAACBQAAAAAAAAAAAAACBQAAAAAAAAIJAAAAAAAAAAAAAAIJAAAAAAAAAg0AAAAAAAAAAAAAAg0AAAAAAAACEQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5QAAAAAAAAHlAAAAAAAAAAAAAAAAA8L8"
				],
				[
					457,
					1,
					"insert",
					{
						"characters": "new"
					},
					"AwAAAHJAAAAAAAAAc0AAAAAAAAAAAAAAc0AAAAAAAAB0QAAAAAAAAAAAAAB0QAAAAAAAAHVAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByQAAAAAAAAHJAAAAAAAAAAAAAAAAA8L8"
				],
				[
					458,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHVAAAAAAAAAdkAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1QAAAAAAAAHVAAAAAAAAAAAAAAAAA8L8"
				],
				[
					469,
					2,
					"left_delete",
					null,
					"AgAAAH1AAAAAAAAAfUAAAAAAAAAIAAAAaWRlbnRpdHl8QAAAAAAAAHxAAAAAAAAAAQAAAC4",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9QAAAAAAAAIVAAAAAAAAAAAAAAAAA8L8"
				],
				[
					494,
					1,
					"insert",
					{
						"characters": "[..."
					},
					"BAAAADVAAAAAAAAANkAAAAAAAAAAAAAANkAAAAAAAAA3QAAAAAAAAAAAAAA3QAAAAAAAADhAAAAAAAAAAAAAADhAAAAAAAAAOUAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA1QAAAAAAAADVAAAAAAAAAAAAAAAAA8L8"
				],
				[
					496,
					1,
					"insert",
					{
						"characters": "]"
					},
					"AQAAAD1AAAAAAAAAPkAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA9QAAAAAAAAD1AAAAAAAAAAAAAAAAA8L8"
				],
				[
					501,
					1,
					"left_delete",
					null,
					"AQAAAD1AAAAAAAAAPUAAAAAAAAABAAAAXQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA+QAAAAAAAAD5AAAAAAAAAAAAAAAAA8L8"
				],
				[
					506,
					1,
					"insert",
					{
						"characters": "]"
					},
					"AQAAAFRAAAAAAAAAVUAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABUQAAAAAAAAFRAAAAAAAAAAAAAAAAA8L8"
				],
				[
					542,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAHdRAAAAAAAAeFEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB3UQAAAAAAAHdRAAAAAAAAAAAAAAAA8L8"
				],
				[
					543,
					1,
					"left_delete",
					null,
					"AQAAAHdRAAAAAAAAd1EAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4UQAAAAAAAHhRAAAAAAAAAAAAAAAA8L8"
				],
				[
					544,
					1,
					"insert",
					{
						"characters": ".call"
					},
					"BQAAAHdRAAAAAAAAeFEAAAAAAAAAAAAAeFEAAAAAAAB5UQAAAAAAAAAAAAB5UQAAAAAAAHpRAAAAAAAAAAAAAHpRAAAAAAAAe1EAAAAAAAAAAAAAe1EAAAAAAAB8UQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB3UQAAAAAAAHdRAAAAAAAAAAAAAAAA8L8"
				],
				[
					545,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAHxRAAAAAAAAflEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB8UQAAAAAAAHxRAAAAAAAAAAAAAAAA8L8"
				],
				[
					546,
					1,
					"insert",
					{
						"characters": "this"
					},
					"BAAAAH1RAAAAAAAAflEAAAAAAAAAAAAAflEAAAAAAAB/UQAAAAAAAAAAAAB/UQAAAAAAAIBRAAAAAAAAAAAAAIBRAAAAAAAAgVEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9UQAAAAAAAH1RAAAAAAAAAAAAAAAA8L8"
				],
				[
					564,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABRVAAAaW1wb3J0IHsgTWF0cml4LCBpc01hdHJpeCB9IGZyb20gJy4uL2dlb20vbWF0cml4LmpzJzsKaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9nZW9tL3BvaW50LmpzJzsKaW1wb3J0IHsgY2xhc3NOYW1lLCBkZWZpbmUsIGRlZmluZUdldHRlciwgZnVuY3Rpb25OYW1lLCBpbW11dGFibGVDbGFzcywgaXNPYmplY3QgfSBmcm9tICcuLi9taXNjLmpzJzsKCmNvbnN0IFJBRDJERUcgPSAxODAgLyBNYXRoLlBJOwpjb25zdCBERUcyUkFEID0gTWF0aC5QSSAvIDE4MDsKCmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm1hdGlvbiB7CiAgLy90eXBlTmFtZSA9IG51bGw7CgogIGNvbnN0cnVjdG9yKHRyYW5zZm9ybWF0aW9uKSB7CiAgICBpZih0cmFuc2Zvcm1hdGlvbiBpbnN0YW5jZW9mIFRyYW5zZm9ybWF0aW9uKSByZXR1cm4gdHJhbnNmb3JtYXRpb247CiAgICBpZih0cmFuc2Zvcm1hdGlvbiBpbnN0YW5jZW9mIFRyYW5zZm9ybWF0aW9uTGlzdCkgcmV0dXJuIHRyYW5zZm9ybWF0aW9uOwoKICAgIGlmKHR5cGVvZiB0cmFuc2Zvcm1hdGlvbiA9PSAnc3RyaW5nJykgcmV0dXJuIFRyYW5zZm9ybWF0aW9uLmZyb21TdHJpbmcodHJhbnNmb3JtYXRpb24pOwogICAgLy9kZWZpbmUodGhpcywgeyB0eXBlTmFtZSB9KTsKICAgIC8vdGhpcy50eXBlID0gdHlwZTsKICAgIC8vCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUcmFuc2Zvcm1hdGlvbicpOwoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIGZ1bmN0aW9uTmFtZSh0aGlzLmNvbnN0cnVjdG9yKTsKICB9CgogIGdldCB0eXBlKCkgewogICAgbGV0IHR5cGUgPQogICAgICB0aGlzLnR5cGVOYW1lIHx8CiAgICAgIGNsYXNzTmFtZSh0aGlzKQogICAgICAgIC50b0xvd2VyQ2FzZSgpCiAgICAgICAgLnJlcGxhY2UoL3RyYW5zZm9ybShhdGlvbik/LywgJycpCiAgICAgICAgLnJlcGxhY2UoLyhpb258aW5nKSQvLCAnZScpOwogICAgcmV0dXJuIHR5cGU7CiAgfQoKICBnZXQgW1N5bWJvbC5pc0NvbmNhdFNwcmVhZGFibGVdKCkgewogICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IgPT09IFRyYW5zZm9ybWF0aW9uTGlzdCB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykgPT0gVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZSB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3IgPT0gVHJhbnNmb3JtYXRpb25MaXN0OwogIH0KICBnZXQgYXhlcygpIHsKICAgIHJldHVybiB0aGlzLmF4aXMgIT09IHVuZGVmaW5lZCA/IFt0aGlzLmF4aXNdIDogWyd4JywgJ3knLCAneiddLmZpbHRlcihheGlzID0+IGF4aXMgaW4gdGhpcyk7CiAgfQogIGdldCBwcm9wcygpIHsKICAgIHJldHVybiB0aGlzLmF4ZXMuY29uY2F0KFsnYXhpcycsICdhbmdsZSddLmZpbHRlcihrZXkgPT4ga2V5IGluIHRoaXMpKTsKICB9CgogIGhhcyhheGlzKSB7CiAgICBpZih0aGlzLmF4aXMgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGF4aXMgPT09IHRoaXMuYXhpczsKICAgIHJldHVybiBheGlzIGluIHRoaXM7CiAgfQoKICBnZXQgaXMzRCgpIHsKICAgIHJldHVybiB0aGlzLmhhcygneicpOwogIH0KCiAgZW50cmllcygpIHsKICAgIHJldHVybiB0aGlzLnByb3BzLm1hcChwcm9wID0+IFtwcm9wLCB0aGlzW3Byb3BdXSk7CiAgfQoKICB0b0pTT04oKSB7CiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuZW50cmllcygpKTsKICB9CgogIHZlY3Rvcih1bml0KSB7CiAgICBpZih1bml0ID09PSB1bmRlZmluZWQpIHVuaXQgPSB0aGlzLnVuaXQ7CiAgICByZXR1cm4gKHRoaXMuaXMzRCA/IFsneCcsICd5JywgJ3onXSA6IFsneCcsICd5J10pLm1hcCh1bml0ID8gYXhpcyA9PiB0aGlzW2F4aXNdICsgdW5pdCA6IGF4aXMgPT4gdGhpc1theGlzXSk7CiAgfQoKICB0b1N0cmluZyh0VW5pdCkgewogICAgcmV0dXJuIGAke3RoaXMudHlwZX0ke3RoaXMuaXMzRCA/ICczZCcgOiAnJ30oJHt0aGlzLnZlY3Rvcih0VW5pdCkuam9pbignLCAnKX0pYDsKICB9CiAgY2xvbmUoKSB7CiAgICBsZXQgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHRoaXMpOwogICAgbGV0IHByb3BzID0gdGhpcy5wcm9wcy5yZWR1Y2UoKGFjYywgcHJvcCkgPT4gKHsgLi4uYWNjLCBbcHJvcF06IGRlc2NbcHJvcF0gfSksIHt9KTsKICAgIHJldHVybiBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSwgcHJvcHMpOwogIH0KCiAgc3RhdGljIGZyb21TdHJpbmcoYXJnKSB7CiAgICBsZXQgY21kTGVuID0gYXJnLmluZGV4T2YoJygnKTsKICAgIGxldCBhcmdTdHIgPSBhcmcuc2xpY2UoY21kTGVuICsgMSwgYXJnLmluZGV4T2YoJyknKSk7CiAgICBsZXQgYXJncyA9IGFyZ1N0ci5zcGxpdCgvWyxcc1wgXSsvZyk7CiAgICBsZXQgY21kID0gYXJnLnN1YnN0cmluZygwLCBjbWRMZW4pOwogICAgbGV0IHQ7CiAgICBsZXQgdW5pdDsKCiAgICBhcmdzID0gYXJncwogICAgICAuZmlsdGVyKGFyZyA9PiAvXlstKzAtOS5dK1thLXpdKiQvLnRlc3QoYXJnKSkKICAgICAgLm1hcChhcmcgPT4gewogICAgICAgIGlmKC9bYS16XSQvLnRlc3QoYXJnKSkgewogICAgICAgICAgdW5pdCA9IGFyZy5yZXBsYWNlKC9bLSswLTkuXSovZywgJycpOwogICAgICAgICAgYXJnID0gYXJnLnJlcGxhY2UoL1thLXpdKiQvZywgJycpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICthcmc7CiAgICAgIH0pOwogICAgLy9jb25zb2xlLmxvZygnZnJvbVN0cmluZycsIHsgY21kLCBhcmdzIH0pOwoKICAgIGNvbnN0IGlzM0QgPSBjbWQudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnM2QnKTsKICAgIGlmKGlzM0QpIGNtZCA9IGNtZC5zbGljZSgwLCAtMik7CgogICAgaWYoY21kLnN0YXJ0c1dpdGgoJ3JvdGF0JykpIHsKICAgICAgY29uc3QgYXhpcyA9IGlzM0QgPyAnJyA6IGNtZC5zbGljZSg2KTsKICAgICAgYXJncyA9IGF4aXMgIT0gJycgPyBbYXJnc1swXSwgYXhpc10gOiBhcmdzOwogICAgICB0ID0gbmV3IFJvdGF0aW9uKC4uLmFyZ3MpOwogICAgfSBlbHNlIGlmKGNtZC5zdGFydHNXaXRoKCd0cmFuc2xhdCcpKSB7CiAgICAgIGNvbnN0IGF4aXMgPSBpczNEID8gJycgOiBjbWQuc2xpY2UoOSk7CiAgICAgIGFyZ3MgPSBheGlzICE9ICcnID8gW2FyZ3NbMF0sIGF4aXNdIDogYXJnczsKICAgICAgdCA9IG5ldyBUcmFuc2xhdGlvbiguLi5hcmdzKTsKICAgIH0gZWxzZSBpZihjbWQuc3RhcnRzV2l0aCgnc2NhbCcpKSB7CiAgICAgIGNvbnN0IGF4aXMgPSBpczNEID8gJycgOiBjbWQuc2xpY2UoNSk7CiAgICAgIGFyZ3MgPSBheGlzICE9ICcnID8gW2FyZ3NbMF0sIGF4aXNdIDogYXJnczsKICAgICAgdCA9IG5ldyBTY2FsaW5nKC4uLmFyZ3MpOwogICAgfSBlbHNlIGlmKGNtZC5zdGFydHNXaXRoKCdtYXRyaXgnKSkgewogICAgICBjb25zdCBbYSwgYiwgYywgZCwgZSwgZl0gPSBhcmdzOwogICAgICB0ID0gbmV3IE1hdHJpeFRyYW5zZm9ybWF0aW9uKGEsIGMsIGUsIGIsIGQsIGYpOwogICAgfQogICAgaWYodW5pdCkgdC51bml0ID0gdW5pdDsKICAgIHJldHVybiB0OwogIH0KCiAgLypbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHsKICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7CiAgfSovCgogIFtTeW1ib2wudG9QcmltaXRpdmVdKGhpbnQpIHsKICAgIC8vIGNvbnNvbGUubG9nKCJoaW50OiIsaGludCk7CiAgICBpZihoaW50ID09ICdzdHJpbmcnIHx8IGhpbnQgPT0gJ2RlZmF1bHQnKSByZXR1cm4gdGhpcy50b1N0cmluZygpOwoKICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCkgIT0gJyc7CiAgfQoKICBzdGF0aWMgZ2V0IHJvdGF0aW9uKCkgewogICAgcmV0dXJuIFJvdGF0aW9uOwogIH0KICBzdGF0aWMgZ2V0IHRyYW5zbGF0aW9uKCkgewogICAgcmV0dXJuIFRyYW5zbGF0aW9uOwogIH0KICBzdGF0aWMgZ2V0IHNjYWxpbmcoKSB7CiAgICByZXR1cm4gU2NhbGluZzsKICB9CiAgc3RhdGljIGdldCBtYXRyaXgoKSB7CiAgICByZXR1cm4gTWF0cml4VHJhbnNmb3JtYXRpb247CiAgfQp9CgovL1RyYW5zZm9ybWF0aW9uLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddPSdUcmFuc2Zvcm1hdGlvbic7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtYXRpb24sIFN5bWJvbC5oYXNJbnN0YW5jZSwgewogIHZhbHVlKGluc3QpIHsKICAgIHJldHVybiBbVHJhbnNmb3JtYXRpb24sIE1hdHJpeFRyYW5zZm9ybWF0aW9uLCBSb3RhdGlvbiwgVHJhbnNsYXRpb24sIFNjYWxpbmcsIFRyYW5zZm9ybWF0aW9uTGlzdF0uc29tZShjdG9yID0+IE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0KSA9PSBjdG9yLnByb3RvdHlwZSk7CiAgfQp9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVUcmFuc2Zvcm1hdGlvbiA9IGltbXV0YWJsZUNsYXNzKFRyYW5zZm9ybWF0aW9uKTsKCmV4cG9ydCBjbGFzcyBSb3RhdGlvbiBleHRlbmRzIFRyYW5zZm9ybWF0aW9uIHsKICBhbmdsZSA9IDA7CiAgLy9heGlzID0gdW5kZWZpbmVkOwoKICBjb25zdHJ1Y3RvcihhbmdsZSwgeCwgeSkgewogICAgc3VwZXIoJ3JvdGF0ZScpOwoKICAgIGlmKHR5cGVvZiB4ID09ICdzdHJpbmcnICYmIFsneCcsICd5JywgJ3onXS5pbmRleE9mKHgudG9Mb3dlckNhc2UoKSkgIT0gLTEpIHsKICAgICAgdGhpcy5heGlzID0geC50b0xvd2VyQ2FzZSgpOwogICAgfSBlbHNlIGlmKCFpc05hTigreCkgJiYgIWlzTmFOKCt5KSkgewogICAgICB0aGlzLmNlbnRlciA9IFsreCwgK3ldOwogICAgfQogICAgLy9lbHNlIHRoaXMuYXhpcyA9ICd6JzsKICAgIHRoaXMuYW5nbGUgPSBhbmdsZTsKICB9CgogIGludmVydCgpIHsKICAgIHJldHVybiBuZXcgUm90YXRpb24oLXRoaXMuYW5nbGUsIHRoaXMuYXhpcyk7CiAgfQoKICBnZXQgdmFsdWVzKCkgewogICAgcmV0dXJuIHsgW3RoaXMuYXhpcyB8fCAneiddOiB0aGlzLmFuZ2xlIH07CiAgfQoKICBnZXQgaXMzRCgpIHsKICAgIHJldHVybiB0aGlzLmF4aXMgPT0gJ3onOwogIH0KCiAgaXNaZXJvKCkgewogICAgcmV0dXJuIHRoaXMuYW5nbGUgPT0gMDsKICB9CgogIHRvU3RyaW5nKHJVbml0KSB7CiAgICByVW5pdCA9IHJVbml0IHx8IHRoaXMudW5pdCB8fCAnJzsKICAgIGNvbnN0IGF4aXMgPSB0aGlzLmF4aXMgIT09IHVuZGVmaW5lZCA/IHRoaXMuYXhpcy50b1VwcGVyQ2FzZSgpIDogJyc7CiAgICBjb25zdCBhbmdsZSA9IHRoaXMuY29uc3RydWN0b3IuY29udmVydEFuZ2xlKHRoaXMuYW5nbGUsIHJVbml0KTsKICAgIHJldHVybiBgcm90YXRlJHt0aGlzLmlzM0QgPyBheGlzIDogJyd9KCR7YW5nbGV9JHtyVW5pdH0ke3RoaXMuY2VudGVyID8gdGhpcy5jZW50ZXIubWFwKGNvb3JkID0+IGAsICR7Y29vcmR9YCkuam9pbignJykgOiAnJ30pYDsKICB9CgogIHRvU291cmNlKCkgewogICAgbGV0IG8gPSAnbmV3ICcgKyBjbGFzc05hbWUodGhpcykgKyAnKCcgKyB0aGlzLmFuZ2xlICsgJyknOwogICAgcmV0dXJuIG87CiAgfQoKICB0b01hdHJpeChtYXRyaXggPSBNYXRyaXguaWRlbnRpdHkoKSkgewogICAgY29uc3QgeyBjZW50ZXIsIGFuZ2xlIH0gPSB0aGlzOwogICAgaWYoY2VudGVyKSBtYXRyaXgudHJhbnNsYXRlU2VsZiguLi5bLi4uY2VudGVyXS5tYXAoY29vcmQgPT4gLWNvb3JkKSk7CiAgICBtYXRyaXgucm90YXRlU2VsZihERUcyUkFEICogYW5nbGUpOwogICAgaWYoY2VudGVyKSBtYXRyaXgudHJhbnNsYXRlU2VsZiguLi5jZW50ZXIpOwogICAgcmV0dXJuIG1hdHJpeC5yb3VuZFNlbGYoKTsKICB9CgogIGFjY3VtdWxhdGUob3RoZXIpIHsKICAgIGlmKHRoaXMudHlwZSAhPT0gb3RoZXIudHlwZSAmJiB0aGlzLmF4aXMgIT09IG90aGVyLmF4aXMpIHRocm93IG5ldyBFcnJvcihjbGFzc05hbWUodGhpcykgKyAnOiBhY2N1bXVsYXRlIG1pc21hdGNoJyk7CiAgICByZXR1cm4gbmV3IFJvdGF0aW9uKHRoaXMuYW5nbGUgKyBvdGhlci5hbmdsZSwgdGhpcy5heGlzKTsKICB9CgogIHN0YXRpYyBjb252ZXJ0QW5nbGUoYW5nbGUsIHVuaXQpIHsKICAgIHN3aXRjaCAodW5pdCkgewogICAgICBjYXNlICdkZWcnOgogICAgICAgIHJldHVybiBhbmdsZTsKICAgICAgY2FzZSAncmFkJzoKICAgICAgICByZXR1cm4gREVHMlJBRCAqIGFuZ2xlOwogICAgICBjYXNlICd0dXJuJzoKICAgICAgICByZXR1cm4gYW5nbGUgLyAzNjA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGFuZ2xlOwogICAgfQogIH0KfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KFJvdGF0aW9uLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnUm90YXRpb24nLCBlbnVtZXJhYmxlOiBmYWxzZSB9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVSb3RhdGlvbiA9IGltbXV0YWJsZUNsYXNzKFJvdGF0aW9uKTsKCmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvbiBleHRlbmRzIFRyYW5zZm9ybWF0aW9uIHsKICB4ID0gMDsKICB5ID0gMDsKICAvL3ogPSB1bmRlZmluZWQ7CgogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgIHN1cGVyKCd0cmFuc2xhdGUnKTsKCiAgICBpZih0eXBlb2YgYXJnc1sxXSA9PSAnc3RyaW5nJyAmJiBbJ3gnLCAneScsICd6J10uaW5kZXhPZihhcmdzWzFdLnRvTG93ZXJDYXNlKCkpICE9IC0xKSB7CiAgICAgIGNvbnN0IG4gPSBhcmdzLnNoaWZ0KCk7CiAgICAgIGNvbnN0IGF4aXMgPSBhcmdzLnNoaWZ0KCkudG9Mb3dlckNhc2UoKTsKICAgICAgdGhpc1theGlzXSA9IG47CiAgICB9IGVsc2UgewogICAgICBsZXQgbnVtRGltID0gWy4uLmFyZ3MsICcuJ10uZmluZEluZGV4KGEgPT4gaXNOYU4oK2EpKTsKICAgICAgY29uc3QgW3ggPSAwLCB5ID0gMCwgel0gPSBhcmdzLnNwbGljZSgwLCBudW1EaW0pOwogICAgICB0aGlzLnggPSAreDsKICAgICAgdGhpcy55ID0gK3k7CiAgICAgIGlmKHogIT09IHVuZGVmaW5lZCkgdGhpcy56ID0gK3o7CiAgICB9CiAgICBpZihhcmdzLmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ3NbMF0gPT0gJ3N0cmluZycpIHRoaXMudW5pdCA9IGFyZ3Muc2hpZnQoKTsKICB9CgogIGdldCB2YWx1ZXMoKSB7CiAgICBjb25zdCB7IHgsIHksIHogfSA9IHRoaXM7CiAgICByZXR1cm4gJ3onIGluIHRoaXMgPyB7IHgsIHksIHogfSA6IHsgeCwgeSB9OwogIH0KCiAgaXNaZXJvKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuICd6JyBpbiB0aGlzID8geCA9PSAwICYmIHkgPT0gMCAmJiB6ID09IDAgOiB4ID09IDAgJiYgeSA9PSAwOwogIH0KCiAgdG9NYXRyaXgobWF0cml4ID0gTWF0cml4LmlkZW50aXR5KCkpIHsKICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpczsKICAgIHJldHVybiBtYXRyaXgudHJhbnNsYXRlKHgsIHkpOwogIH0KCiAgLypjbG9uZSgpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiB6ICE9PSB1bmRlZmluZWQgPyBuZXcgVHJhbnNsYXRpb24oeCwgeSwgeikgOiBuZXcgVHJhbnNsYXRpb24oeCwgeSk7CiAgfSovCgogIGludmVydCgpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiB6ICE9PSB1bmRlZmluZWQgPyBuZXcgVHJhbnNsYXRpb24oLXgsIC15LCAteikgOiBuZXcgVHJhbnNsYXRpb24oTWF0aC5hYnMoeCkgPT0gMCA/IDAgOiAteCwgTWF0aC5hYnMoeSkgPT0gMCA/IDAgOiAteSk7CiAgfQoKICBhY2N1bXVsYXRlKG90aGVyKSB7CiAgICBpZih0aGlzLnR5cGUgIT09IG90aGVyLnR5cGUpIHRocm93IG5ldyBFcnJvcihjbGFzc05hbWUodGhpcykgKyAnOiBhY2N1bXVsYXRlIG1pc21hdGNoJyk7CgogICAgaWYodGhpcy5pczNEKSByZXR1cm4gbmV3IFRyYW5zbGF0aW9uKHRoaXMueCArIG90aGVyLngsIHRoaXMueSArIG90aGVyLnksIHRoaXMueiArIG90aGVyLnopOwogICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvbih0aGlzLnggKyBvdGhlci54LCB0aGlzLnkgKyBvdGhlci55KTsKICB9Cn0KT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zbGF0aW9uLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnVHJhbnNsYXRpb24nLCBlbnVtZXJhYmxlOiBmYWxzZSB9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVUcmFuc2xhdGlvbiA9IGltbXV0YWJsZUNsYXNzKFRyYW5zbGF0aW9uKTsKCmV4cG9ydCBjbGFzcyBTY2FsaW5nIGV4dGVuZHMgVHJhbnNmb3JtYXRpb24gewogIHggPSAxOwogIHkgPSAxOwogIC8veiA9IHVuZGVmaW5lZDsKCiAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgc3VwZXIoJ3NjYWxlJyk7CgogICAgaWYodHlwZW9mIGFyZ3NbMV0gPT0gJ3N0cmluZycgJiYgWyd4JywgJ3knLCAneiddLmluZGV4T2YoYXJnc1sxXS50b0xvd2VyQ2FzZSgpKSAhPSAtMSkgewogICAgICBjb25zdCBuID0gYXJncy5zaGlmdCgpOwogICAgICBjb25zdCBheGlzID0gYXJncy5zaGlmdCgpLnRvTG93ZXJDYXNlKCk7CiAgICAgIHRoaXNbYXhpc10gPSBuOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgW3ggPSAxLCB5LCB6XSA9IGFyZ3Muc3BsaWNlKDAsIDMpOwogICAgICB0aGlzLnggPSAreDsKICAgICAgdGhpcy55ID0geSA9PT0gdW5kZWZpbmVkID8gdGhpcy54IDogK3k7CiAgICAgIGlmKHogIT09IHVuZGVmaW5lZCkgdGhpcy56ID0gK3o7CiAgICB9CiAgfQoKICBnZXQgdmFsdWVzKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuICd6JyBpbiB0aGlzID8geyB4LCB5LCB6IH0gOiB7IHgsIHkgfTsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXM7CiAgICByZXR1cm4gbWF0cml4LnNjYWxlU2VsZih4LCB5KTsKICB9CgogIGlzWmVybygpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiAneicgaW4gdGhpcyA/IHggPT0gMSAmJiB5ID09IDEgJiYgeiA9PSAxIDogeCA9PSAxICYmIHkgPT0gMTsKICB9CgogIHRvU3RyaW5nKCkgewogICAgY29uc3QgdmVjdG9yID0gdGhpcy52ZWN0b3IoJycpOwogICAgY29uc3QgY29vcmRzID0gdmVjdG9yLmpvaW4oJywgJyk7CgogICAgcmV0dXJuIGAke3RoaXMudHlwZX0ke3RoaXMuaXMzRCA/ICczZCcgOiAnJ30oJHtjb29yZHN9KWA7CiAgfQoKICAvKmNsb25lKCkgewogICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzOwogICAgcmV0dXJuIHogIT09IHVuZGVmaW5lZCA/IG5ldyBTY2FsaW5nKHgsIHksIHopIDogbmV3IFNjYWxpbmcoeCwgeSk7CiAgfSovCgogIGludmVydCgpIHsKICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpczsKICAgIHJldHVybiB6ICE9PSB1bmRlZmluZWQgPyBuZXcgU2NhbGluZygxIC8geCwgMSAvIHksIDEgLyB6KSA6IG5ldyBTY2FsaW5nKDEgLyB4LCAxIC8geSk7CiAgfQoKICBhY2N1bXVsYXRlKG90aGVyKSB7CiAgICBpZih0aGlzLnR5cGUgIT09IG90aGVyLnR5cGUpIHRocm93IG5ldyBFcnJvcihjbGFzc05hbWUodGhpcykgKyAnOiBhY2N1bXVsYXRlIG1pc21hdGNoJyk7CgogICAgaWYodGhpcy5pczNEKSByZXR1cm4gbmV3IFNjYWxpbmcodGhpcy54ICogb3RoZXIueCwgdGhpcy55ICogb3RoZXIueSwgdGhpcy56ICogb3RoZXIueik7CiAgICByZXR1cm4gbmV3IFNjYWxpbmcodGhpcy54ICogb3RoZXIueCwgdGhpcy55ICogb3RoZXIueSk7CiAgfQp9Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2FsaW5nLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnU2NhbGluZycsIGVudW1lcmFibGU6IGZhbHNlIH0pOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVNjYWxpbmcgPSBpbW11dGFibGVDbGFzcyhTY2FsaW5nKTsKCmV4cG9ydCBjbGFzcyBNYXRyaXhUcmFuc2Zvcm1hdGlvbiBleHRlbmRzIFRyYW5zZm9ybWF0aW9uIHsKICBtYXRyaXggPSBNYXRyaXguSURFTlRJVFk7CgogIGNvbnN0cnVjdG9yKGluaXQpIHsKICAgIHN1cGVyKCdtYXRyaXgnKTsKCiAgICBpZihpbml0IGluc3RhbmNlb2YgTWF0cml4KSB0aGlzLm1hdHJpeCA9IGluaXQ7CiAgICBlbHNlIGlmKGlzTWF0cml4KGluaXQpKSB0aGlzLm1hdHJpeCA9IG5ldyBNYXRyaXgoaW5pdCk7CiAgICBlbHNlIHRoaXMubWF0cml4ID0gbmV3IE1hdHJpeCguLi5hcmd1bWVudHMpOwogIH0KCiAgZ2V0IHZhbHVlcygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC52YWx1ZXMoKTsKICB9CgogIHRvTWF0cml4KG1hdHJpeCA9IE1hdHJpeC5pZGVudGl0eSgpKSB7CiAgICByZXR1cm4gbWF0cml4Lm11bHRpcGx5U2VsZih0aGlzLm1hdHJpeCk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC50b1N0cmluZygnJyk7CiAgfQoKICBpbnZlcnQoKSB7CiAgICByZXR1cm4gbmV3IE1hdHJpeFRyYW5zZm9ybWF0aW9uKHRoaXMubWF0cml4LmludmVydCgpKTsKICB9CgogIGlzWmVybygpIHsKICAgIHJldHVybiB0aGlzLm1hdHJpeC5pc0lkZW50aXR5KCk7CiAgfQoKICBhY2N1bXVsYXRlKG90aGVyKSB7CiAgICBpZih0aGlzLnR5cGUgIT09IG90aGVyLnR5cGUpIHRocm93IG5ldyBFcnJvcihjbGFzc05hbWUodGhpcykgKyAnOiBhY2N1bXVsYXRlIG1pc21hdGNoJyk7CgogICAgcmV0dXJuIG5ldyBNYXRyaXhUcmFuc2Zvcm1hdGlvbih0aGlzLm1hdHJpeC5tdWx0aXBseShvdGhlci5tYXRyaXgpKTsKICB9Cn0KT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdHJpeFRyYW5zZm9ybWF0aW9uLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7CiAgdmFsdWU6ICdNYXRyaXhUcmFuc2Zvcm1hdGlvbicsCiAgZW51bWVyYWJsZTogZmFsc2UKfSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlTWF0cml4VHJhbnNmb3JtYXRpb24gPSBpbW11dGFibGVDbGFzcyhNYXRyaXhUcmFuc2Zvcm1hdGlvbik7CgpleHBvcnQgY2xhc3MgVHJhbnNmb3JtYXRpb25MaXN0IGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKGluaXQsIHRVbml0LCByVW5pdCkgewogICAgc3VwZXIoKTsKICAgIGlmKGlzT2JqZWN0KGluaXQpKSB7CiAgICAgIGlmKHRVbml0ID09PSB1bmRlZmluZWQpIHRVbml0ID0gaW5pdC50cmFuc2xhdGlvblVuaXQgfHwgaW5pdC50VW5pdDsKICAgICAgaWYoclVuaXQgPT0gdW5kZWZpbmVkKSByVW5pdCA9IGluaXQucm90YXRpb25Vbml0IHx8IGluaXQuclVuaXQ7CiAgICB9CiAgICBpZihpbml0KSB7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZShpbml0KTsKICAgIH0KICAgIGlmKHR5cGVvZiB0VW5pdCA9PSAnc3RyaW5nJykgdGhpcy50cmFuc2xhdGlvblVuaXQgPSB0VW5pdDsKICAgIGlmKHR5cGVvZiByVW5pdCA9PSAnc3RyaW5nJykgdGhpcy5yb3RhdGlvblVuaXQgPSByVW5pdDsKCiAgICByZXR1cm4gdGhpczsKICB9CgogIGluaXRpYWxpemUoaW5pdCkgewogICAgaWYodHlwZW9mIGluaXQgPT0gJ251bWJlcicpIHdoaWxlKHRoaXMubGVuZ3RoIDwgaW5pdCkgdGhpcy5wdXNoKHVuZGVmaW5lZCk7CiAgICBlbHNlIGlmKHR5cGVvZiBpbml0ID09ICdzdHJpbmcnKSBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLmZyb21TdHJpbmcuY2FsbCh0aGlzLCBpbml0KTsKICAgIGVsc2UgaWYoaW5pdCBpbnN0YW5jZW9mIEFycmF5KSBUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLmZyb21BcnJheS5jYWxsKHRoaXMsIGluaXQpOwogICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ05vIHN1Y2ggaW5pdGlhbGl6YXRpb246ICcgKyBpbml0KTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZ2V0IFtTeW1ib2wuaXNDb25jYXRTcHJlYWRhYmxlXSgpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoKICBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHsKICAgIHJldHVybiB0aGlzLnRvU291cmNlKCk7CiAgfSovCgogIHN0YXRpYyBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBUcmFuc2Zvcm1hdGlvbkxpc3Q7CiAgfQoKICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBUcmFuc2Zvcm1hdGlvbkxpc3Q7CiAgfQoKICBmcm9tU3RyaW5nKHN0cikgewogICAgbGV0IG4sCiAgICAgIGEgPSBbXTsKCiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSArPSBuKSB7CiAgICAgIGxldCBzID0gc3RyLnNsaWNlKGkpOwogICAgICBuID0gcy5pbmRleE9mKCcpJykgKyAxOwogICAgICBpZihuID09IDApIG4gPSBzdHIubGVuZ3RoOwogICAgICBzID0gcy5zbGljZSgwLCBuKS50cmltKCk7CiAgICAgIGlmKHMgIT0gJycpIGEucHVzaChzKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmZyb21BcnJheShhKTsKICB9CgogIGZyb21BcnJheShhcnIpIHsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgYXJnID0gYXJyW2ldOwoKICAgICAgaWYoYXJnIGluc3RhbmNlb2YgVHJhbnNmb3JtYXRpb24pIHRoaXMucHVzaChhcmcpOwogICAgICBlbHNlIGlmKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIHRoaXMucHVzaChUcmFuc2Zvcm1hdGlvbi5mcm9tU3RyaW5nKGFyZykpOwogICAgICBlbHNlIHRocm93IG5ldyBFcnJvcignTm8gc3VjaCB0cmFuc2Zvcm1hdGlvbjogJyArIGFyZyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBnZXQgdHJhbnNsYXRpb25Vbml0KCkgewogICAgcmV0dXJuIChpc09iamVjdCh0aGlzLnRyYW5zbGF0aW9uKSAmJiB0aGlzLnRyYW5zbGF0aW9uLnVuaXQpIHx8IHRoaXMudFVuaXQ7CiAgfQogIHNldCB0cmFuc2xhdGlvblVuaXQodmFsdWUpIHsKICAgIGlmKGlzT2JqZWN0KHRoaXMudHJhbnNsYXRpb24pKSB0aGlzLnRyYW5zbGF0aW9uLnVuaXQgPSB2YWx1ZTsKICAgIGVsc2UgdGhpcy50VW5pdCA9IHZhbHVlOwogIH0KCiAgZ2V0IHJvdGF0aW9uVW5pdCgpIHsKICAgIHJldHVybiAoaXNPYmplY3QodGhpcy5yb3RhdGlvbikgJiYgdGhpcy5yb3RhdGlvbi51bml0KSB8fCB0aGlzLnJVbml0OwogIH0KICBzZXQgcm90YXRpb25Vbml0KHZhbHVlKSB7CiAgICBpZihpc09iamVjdCh0aGlzLnJvdGF0aW9uKSkgdGhpcy5yb3RhdGlvbi51bml0ID0gdmFsdWU7CiAgICBlbHNlIHRoaXMuclVuaXQgPSB2YWx1ZTsKICB9CiAgc3RhdGljIGZyb21TdHJpbmcoc3RyKSB7CiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpLmZyb21TdHJpbmcoc3RyKTsKICB9CgogIHN0YXRpYyBmcm9tQXJyYXkoYXJyKSB7CiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpLmZyb21BcnJheShhcnIpOwogIH0KCiAgc3RhdGljIGZyb21NYXRyaXgobWF0cml4KSB7CiAgICBtYXRyaXggPSBtYXRyaXggaW5zdGFuY2VvZiBNYXRyaXggPyBtYXRyaXggOiBuZXcgTWF0cml4KG1hdHJpeCk7CgogICAgY29uc3QgdHJhbnNmb3JtYXRpb25zID0gTWF0cml4LmRlY29tcG9zZShtYXRyaXgsIHRydWUpOwoKICAgIGRlZmluZSh0cmFuc2Zvcm1hdGlvbnMuc2NhbGUsIHsKICAgICAgdG9BcnJheSgpIHsKICAgICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTsKICAgICAgfQogICAgfSk7CiAgICBkZWZpbmUodHJhbnNmb3JtYXRpb25zLnRyYW5zbGF0ZSwgewogICAgICB0b0FycmF5KCkgewogICAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldOwogICAgICB9CiAgICB9KTsKCiAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwoKICAgIHJldC50cmFuc2xhdGUoLi4udHJhbnNmb3JtYXRpb25zLnRyYW5zbGF0ZS50b0FycmF5KCkpOwogICAgcmV0LnJvdGF0ZSh0cmFuc2Zvcm1hdGlvbnMucm90YXRlKTsKICAgIHJldC5zY2FsZSguLi50cmFuc2Zvcm1hdGlvbnMuc2NhbGUudG9BcnJheSgpKTsKCiAgICByZXR1cm4gcmV0OwogIH0KCiAgcHVzaCguLi5hcmdzKSB7CiAgICBmb3IobGV0IGFyZyBvZiBhcmdzKSB7CiAgICAgIGlmKHR5cGVvZiBhcmcgPT0gJ3N0cmluZycpIGFyZyA9IFRyYW5zZm9ybWF0aW9uLmZyb21TdHJpbmcoYXJnKTsKICAgICAgZWxzZSBpZihpc01hdHJpeChhcmcpKSBhcmcgPSBuZXcgTWF0cml4VHJhbnNmb3JtYXRpb24oYXJnKTsKCiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgYXJnKTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgY2xvbmUoKSB7CiAgICByZXR1cm4gdGhpcy5tYXAodCA9PiB0LmNsb25lKCkpOyAvLyB0aGlzLnNsaWNlKCk7CiAgfQoKICBtYXAoZm4pIHsKICAgIHJldHVybiB0aGlzLmJhc2VDYWxsKEFycmF5LnByb3RvdHlwZS5tYXApKGZuKTsKICB9CgogIHNsaWNlKC4uLmFyZ3MpIHsKICAgIHJldHVybiB0aGlzLmJhc2VDYWxsKEFycmF5LnByb3RvdHlwZS5zbGljZSkoLi4uYXJncyk7CiAgfQoKICBzcGxpY2UoLi4uYXJncykgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLnNwbGljZSkoLi4uYXJncyk7CiAgfQoKICBjb25jYXQoLi4uYXJncykgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLmNvbmNhdCkoLi4uYXJncyk7CiAgfQoKICBmaWx0ZXIocHJlZCkgewogICAgcmV0dXJuIHRoaXMuYmFzZUNhbGwoQXJyYXkucHJvdG90eXBlLmZpbHRlcikocHJlZCk7CiAgfQoKICBiYXNlQ2FsbChjID0gQXJyYXkucHJvdG90eXBlLm1hcCkgewogICAgcmV0dXJuICguLi5hcmdzKSA9PiB7CiAgICAgIGNvbnN0IHsgdFVuaXQsIHJVbml0IH0gPSB0aGlzOwogICAgICBsZXQgciA9IGMuY2FsbCh0aGlzLCAuLi5hcmdzKTsKICAgICAgaWYodFVuaXQpIHIudFVuaXQgPSB0VW5pdDsKICAgICAgaWYoclVuaXQpIHIuclVuaXQgPSByVW5pdDsKICAgICAgcmV0dXJuIHI7CiAgICB9OwogIH0KCiAgdW5zaGlmdCguLi5hcmdzKSB7CiAgICBmb3IobGV0IGFyZyBvZiBhcmdzLnJldmVyc2UoKSkgewogICAgICBpZih0eXBlb2YgYXJnID09ICdzdHJpbmcnKSBhcmcgPSBUcmFuc2Zvcm1hdGlvbi5mcm9tU3RyaW5nKGFyZyk7CiAgICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwodGhpcywgYXJnKTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgcm90YXRlKC4uLmFyZ3MpIHsKICAgIGxldCByb3RhdGlvbiA9IG5ldyBSb3RhdGlvbiguLi5hcmdzKTsKICAgIGlmKCFyb3RhdGlvbi5pc1plcm8oKSkgQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCByb3RhdGlvbik7CiAgICByZXR1cm4gdGhpczsKICB9CgogIHRyYW5zbGF0ZSh4LCB5KSB7CiAgICBsZXQgdHJhbnMgPSB0aGlzLmZpbHRlcih0ID0+ICF0LnR5cGUuc3RhcnRzV2l0aCgndHJhbnNsYXQnKSk7CiAgICBsZXQgdmVjID0gbmV3IFBvaW50KHgsIHkpOwoKICAgIC8vdHJhbnMudG9NYXRyaXgoKS50cmFuc2Zvcm1Qb2ludCh2ZWMpOwoKICAgIHZlYyA9IHZlYy5yb3VuZCgwLjAwMDAxLCA1KTsKICAgIC8vY29uc29sZS5sb2coImZyb206IiwgbmV3IFBvaW50KHgseSksICIgdG86IiwgdmVjKTsKICAgIGxldCB0cmFuc2xhdGlvbiA9IG5ldyBUcmFuc2xhdGlvbih2ZWMueCwgdmVjLnkpOwoKICAgIGlmKCF0cmFuc2xhdGlvbi5pc1plcm8oKSkgLyogICAgaWYoTWF0aC5hYnModmVjLngpICE9IDAgfHwgTWF0aC5hYnModmVjLnkpICE9IDApICovIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgdHJhbnNsYXRpb24pOwoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgc2NhbGUoLi4uYXJncykgewogICAgbGV0IHNjYWxpbmcgPSBuZXcgU2NhbGluZyguLi5hcmdzKTsKICAgIGlmKCFzY2FsaW5nLmlzWmVybygpKSBBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIHNjYWxpbmcpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBtYXRyaXgoLi4uYXJncykgewogICAgbGV0IG1hdHJpeFRyYW5zZm9ybWF0aW9uID0gbmV3IE1hdHJpeFRyYW5zZm9ybWF0aW9uKC4uLmFyZ3MpOwogICAgaWYoIW1hdHJpeFRyYW5zZm9ybWF0aW9uLmlzWmVybygpKSBBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIG1hdHJpeFRyYW5zZm9ybWF0aW9uKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgdG9TdHJpbmcodFVuaXQsIHJVbml0KSB7CiAgICBpZih0aGlzLmxlbmd0aCA+IDApIHsKICAgICAgdFVuaXQgPSB0VW5pdCB8fCB0aGlzLnRyYW5zbGF0aW9uVW5pdDsKICAgICAgclVuaXQgPSByVW5pdCB8fCB0aGlzLnJvdGF0aW9uVW5pdDsKICAgICAgbGV0IHIgPSB0aGlzLm1hcCh0ID0+IHQgJiYgdC50eXBlICYmIHQudG9TdHJpbmcodC50eXBlLnN0YXJ0c1dpdGgoJ3NjYWwnKSA/ICcnIDogdC50eXBlLnN0YXJ0c1dpdGgoJ3JvdGF0JykgPyByVW5pdCA6IHRVbml0KSkuam9pbignICcpOwogICAgICByZXR1cm4gcjsKICAgIH0KICAgIHJldHVybiAnJzsKICB9CgogIHRvRE9NKCkgewogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoJ3B4JywgJ2RlZycpOwogIH0KCiAgLyogIFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTsKICB9Ki8KCiAgdG9Tb3VyY2UoKSB7CiAgICBsZXQgcyA9ICduZXcgJyArIGNsYXNzTmFtZSh0aGlzKSArICcoWyc7CgogICAgcyArPSB0aGlzLm1hcCh0ID0+IHQudG9Tb3VyY2UoKSkuam9pbignLCAnKTsKICAgIHJldHVybiBzICsgJ10pJzsKICB9CgogIHRvTWF0cmljZXMoKSB7CiAgICByZXR1cm4gWy4uLnRoaXMubWFwKHQgPT4gdC50b01hdHJpeCgpKV07CiAgfQoKICB0b01hdHJpeCggKSB7CiAgICByZXR1cm4gbmV3IE1hdHJpeCgpLm11bHRpcGx5KC4uLnRoaXMudG9NYXRyaWNlcygpKTsKICB9CgogIHVuZG8oKSB7CiAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwoKICAgIGZvcihsZXQgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwocmV0LCB0aGlzW2ldLmludmVydCgpKTsKCiAgICByZXR1cm4gcmV0OwogIH0KCiAgbWVyZ2UoLi4uYXJncykgewogICAgZm9yKGxldCBhcmcgb2YgYXJncykgewogICAgICBpZih0eXBlb2YgYXJnID09ICdzdHJpbmcnKSBhcmcgPSBUcmFuc2Zvcm1hdGlvbkxpc3QuZnJvbVN0cmluZyhhcmcpOwoKICAgICAgVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMsIGFyZyk7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9CgogIGRlY29tcG9zZShkZWdyZWVzID0gdHJ1ZSwgdHJhbnNmb3JtYXRpb25MaXN0ID0gdHJ1ZSkgewogICAgbGV0IG1hdHJpeCA9IHRoaXMudG9NYXRyaXgoKTsKICAgIGNvbnN0IHsgdHJhbnNsYXRlLCByb3RhdGUsIHNjYWxlIH0gPSBtYXRyaXguZGVjb21wb3NlKGRlZ3JlZXMpOwogICAgbGV0IGRlY29tcG9zZWQgPSB7IHRyYW5zbGF0ZSwgcm90YXRlLCBzY2FsZSB9OwoKICAgIGlmKHRyYW5zZm9ybWF0aW9uTGlzdCkgewogICAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwogICAgICByZXQudHJhbnNsYXRlKHRyYW5zbGF0ZS54LCB0cmFuc2xhdGUueSwgdHJhbnNsYXRlLnopOwogICAgICByZXQucm90YXRlKHJvdGF0ZSk7CiAgICAgIHJldC5zY2FsZShzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTsKICAgICAgcmV0dXJuIHJldDsKICAgIH0KCiAgICBkZWNvbXBvc2VkLnNjYWxlLnRvQXJyYXkgPSBkZWNvbXBvc2VkLnRyYW5zbGF0ZS50b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheSgpIHsKICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07CiAgICB9OwogICAgcmV0dXJuIGRlY29tcG9zZWQ7CiAgfQoKICBmaW5kTGFzdEluZGV4KHByZWRpY2F0ZSkgewogICAgZm9yKGxldCBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICBjb25zdCB4ID0gdGhpc1tpXTsKICAgICAgaWYocHJlZGljYXRlKHgpKSByZXR1cm4gaTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZmluZExhc3QocHJlZGljYXRlKSB7CiAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmRMYXN0SW5kZXgocHJlZGljYXRlKTsKICAgIHJldHVybiB0aGlzW2luZGV4XTsKICB9CgogIGdldCByb3RhdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmZpbmRMYXN0KGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnR5cGUgJiYgaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ3JvdGF0JykpOwogIH0KICBzZXQgcm90YXRpb24odmFsdWUpIHsKICAgIGxldCBpbmRleCA9IHRoaXMuZmluZExhc3RJbmRleChpdGVtID0+IGl0ZW0udHlwZS5zdGFydHNXaXRoKCdyb3RhdCcpKTsKICAgIHZhbHVlID0gdmFsdWUgaW5zdGFuY2VvZiBSb3RhdGlvbiA/IHZhbHVlIDogbmV3IFJvdGF0aW9uKHZhbHVlKTsKICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbCh0aGlzLCBpbmRleCwgMSwgdmFsdWUpOwogIH0KCiAgZ2V0IHNjYWxpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5maW5kTGFzdChpdGVtID0+IGl0ZW0gJiYgaXRlbS50eXBlICYmIGl0ZW0udHlwZS5zdGFydHNXaXRoKCdzY2FsJykpOwogIH0KICBzZXQgc2NhbGluZyh2YWx1ZSkgewogICAgbGV0IGluZGV4ID0gdGhpcy5maW5kTGFzdEluZGV4KGl0ZW0gPT4gaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ3NjYWwnKSk7CiAgICB2YWx1ZSA9IHZhbHVlIGluc3RhbmNlb2YgU2NhbGluZyA/IHZhbHVlIDogbmV3IFNjYWxpbmcodmFsdWUpOwogICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIGluZGV4LCAxLCB2YWx1ZSk7CiAgfQoKICBnZXQgdHJhbnNsYXRpb24oKSB7CiAgICByZXR1cm4gdGhpcy5maW5kTGFzdChpdGVtID0+IGl0ZW0gJiYgaXRlbS50eXBlICYmIHR5cGVvZiBpdGVtLnR5cGUgPT0gJ3N0cmluZycgJiYgaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ3RyYW5zbGF0JykpOwogIH0KCiAgc2V0IHRyYW5zbGF0aW9uKHZhbHVlKSB7CiAgICBsZXQgaW5kZXggPSB0aGlzLmZpbmRMYXN0SW5kZXgoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHlwZSAmJiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgndHJhbnNsJykpOwogICAgdmFsdWUgPSB2YWx1ZSBpbnN0YW5jZW9mIFRyYW5zbGF0aW9uID8gdmFsdWUgOiBuZXcgVHJhbnNsYXRpb24odmFsdWUpOwogICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIGluZGV4LCAxLCB2YWx1ZSk7CiAgfQogIC8qICBtYXAoLi4uYXJncykgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuYXBwbHkoQXJyYXkuZnJvbSh0aGlzKSwgYXJncyk7CiAgfSovCgogIGdldCBsYXN0KCkgewogICAgcmV0dXJuIHRoaXMuYXQoLTEpOwogIH0KICBnZXQgZmlyc3QoKSB7CiAgICByZXR1cm4gdGhpcy5hdCgwKTsKICB9CgogIGF0KHBvcykgewogICAgaWYocG9zIDwgMCkgcG9zICs9IHRoaXMubGVuZ3RoOwogICAgcmV0dXJuIHRoaXNbcG9zXTsKICB9CgogIGNvbGxhcHNlKCkgewogICAgbGV0IHJldCA9IG5ldyBUcmFuc2Zvcm1hdGlvbkxpc3QoKTsKCiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICBsZXQgaXRlbSA9IHRoaXNbaV07CiAgICAgIGlmKGkgKyAxIDwgdGhpcy5sZW5ndGggJiYgdGhpc1tpICsgMV0udHlwZSA9PSB0aGlzW2ldLnR5cGUpIHsKICAgICAgICBpdGVtID0gaXRlbS5hY2N1bXVsYXRlKHRoaXNbaSArIDFdKTsKICAgICAgICBpKys7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbSA9IGl0ZW0uY2xvbmUoKTsKICAgICAgfQogICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKHJldCwgaXRlbSk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KCiAgY29sbGFwc2VBbGwoKSB7CiAgICByZXR1cm4gVHJhbnNmb3JtYXRpb25MaXN0LmZyb21NYXRyaXgodGhpcy50b01hdHJpeCgpKTsKICB9CgogIGdldCBhbmdsZSgpIHsKICAgIGxldCBtYXRyaXggPSB0aGlzLnRvTWF0cml4KCk7CiAgICBsZXQgdCA9IG1hdHJpeC5kZWNvbXBvc2UoKTsKICAgIGxldCB7IHJvdGF0ZSB9ID0gdDsKICAgIC8vY29uc29sZS5sb2coJ1JPVEFUSU9OOicsIHJvdGF0ZSk7CiAgICByZXR1cm4gcm90YXRlOwogIH0KCiAgaW52ZXJ0KCkgewogICAgLy9yZXR1cm4gdGhpcy5yZWR1Y2UoKGFjYywgdCkgPT4gW3QuaW52ZXJ0KCksIC4uLmFjY10sIFtdKTsKICAgIHJldHVybiBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KHRoaXMucmVkdWNlUmlnaHQoKGFjYywgdCkgPT4gWy4uLmFjYywgdC5pbnZlcnQoKV0sIFtdKSk7CiAgfQoKICBqb2luKHNlcCA9ICcgJykgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwodGhpcywgc2VwKTsKICB9CgogIGNsZWFyKCkgewogICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKHRoaXMsIDAsIHRoaXMubGVuZ3RoKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgYXBwbHkob2JqLCByb3VuZCA9IHRydWUpIHsKICAgIGlmKHR5cGVvZiBvYmoudHJhbnNmb3JtID09ICdmdW5jdGlvbicpIHsKICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy50b01hdHJpeCgpOwogICAgICByZXR1cm4gb2JqLnRyYW5zZm9ybShtYXRyaXgsIHJvdW5kKTsKICAgIH0KICB9Cn0KT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywgewogIHZhbHVlOiAnVHJhbnNmb3JtYXRpb25MaXN0JywKICBlbnVtZXJhYmxlOiBmYWxzZQp9KTsKCmNvbnN0IHsgY29uY2F0LCBjb3B5V2l0aGluLCBmaW5kLCBmaW5kSW5kZXgsIGxhc3RJbmRleE9mLCBwb3AsIHB1c2gsIHNoaWZ0LCB1bnNoaWZ0LCBzbGljZSwgc3BsaWNlLCBpbmNsdWRlcywgaW5kZXhPZiwgZW50cmllcywgZmlsdGVyLCBtYXAsIGV2ZXJ5LCBzb21lLCByZWR1Y2UsIHJlZHVjZVJpZ2h0IH0gPSBBcnJheS5wcm90b3R5cGU7CgpkZWZpbmUoCiAgVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZSwKICB7CiAgICBjb3B5V2l0aGluLAogICAgZmluZCwKICAgIGZpbmRJbmRleCwKICAgIGxhc3RJbmRleE9mLAogICAgcG9wLAogICAgc2hpZnQsCiAgICBpbmNsdWRlcywKICAgIGluZGV4T2YsCiAgICBlbnRyaWVzLAogICAgZXZlcnksCiAgICBzb21lLAogICAgcmVkdWNlLAogICAgcmVkdWNlUmlnaHQKICB9LAogIHsKICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0uY2FsbCh0aGlzKTsKICAgIH0sCiAgICBbU3ltYm9sLmlzQ29uY2F0U3ByZWFkYWJsZV0oKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KKTsKCi8vT2JqZWN0LnNldFByb3RvdHlwZU9mKFRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUsIFRyYW5zZm9ybWF0aW9uLnByb3RvdHlwZSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0ID0gaW1tdXRhYmxlQ2xhc3MoVHJhbnNmb3JtYXRpb25MaXN0KTsKCkltbXV0YWJsZVRyYW5zZm9ybWF0aW9uTGlzdC5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24oLi4uYXJncykgewogIHJldHVybiB0aGlzLmNvbmNhdChbbmV3IEltbXV0YWJsZVJvdGF0aW9uKC4uLmFyZ3MpXSk7Cn07CgpJbW11dGFibGVUcmFuc2Zvcm1hdGlvbkxpc3QucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICByZXR1cm4gdGhpcy5jb25jYXQoW25ldyBJbW11dGFibGVUcmFuc2xhdGlvbiguLi5hcmdzKV0pOwp9OwoKSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICByZXR1cm4gdGhpcy5jb25jYXQoW25ldyBJbW11dGFibGVTY2FsaW5nKC4uLmFyZ3MpXSk7Cn07CgpkZWZpbmVHZXR0ZXIoSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0LCBTeW1ib2wuc3BlY2llcywgKCkgPT4gSW1tdXRhYmxlVHJhbnNmb3JtYXRpb25MaXN0KTsKAAAAAAAAAABQVAAAAAAAAAAAAAAAAAAAAAAAAFBUAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABnUQAAAAAAAHZRAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/geom/bbox.js",
			"settings":
			{
				"buffer_size": 7020,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					22,
					1,
					"cut",
					null,
					"AQAAADYAAAAAAAAANgAAAAAAAAAwAAAAaW1wb3J0IHsgaXNSZWN0LCBSZWN0IH0gZnJvbSAnLi4vZ2VvbS9yZWN0LmpzJzsK",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAANgAAAAAAAABmAAAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					2,
					"paste",
					null,
					"AgAAADYAAAAAAAAAZgAAAAAAAAAAAAAAZgAAAAAAAACWAAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAANgAAAAAAAAA2AAAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "isPoint"
					},
					"CAAAAD8AAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAYAAABpc1JlY3RAAAAAAAAAAEEAAAAAAAAAAAAAAEEAAAAAAAAAQgAAAAAAAAAAAAAAQgAAAAAAAABDAAAAAAAAAAAAAABDAAAAAAAAAEQAAAAAAAAAAAAAAEQAAAAAAAAARQAAAAAAAAAAAAAARQAAAAAAAABGAAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAPwAAAAAAAABFAAAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					4,
					"right_delete",
					null,
					"BAAAAEgAAAAAAAAASAAAAAAAAAABAAAAUkgAAAAAAAAASAAAAAAAAAABAAAAZUgAAAAAAAAASAAAAAAAAAABAAAAY0gAAAAAAAAASAAAAAAAAAABAAAAdA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAASAAAAAAAAABIAAAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": "Point"
					},
					"BQAAAEgAAAAAAAAASQAAAAAAAAAAAAAASQAAAAAAAABKAAAAAAAAAAAAAABKAAAAAAAAAEsAAAAAAAAAAAAAAEsAAAAAAAAATAAAAAAAAAAAAAAATAAAAAAAAABNAAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAASAAAAAAAAABIAAAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"cut",
					null,
					"AQAAAE0HAAAAAAAATQcAAAAAAABjAAAAZWxzZSBpZihpc0JCb3goYXJnLm9iamVjdHMpKSB7CiAgICAgICAgdGhpcy51cGRhdGVMaXN0KE9iamVjdC52YWx1ZXMoYXJnLm9iamVjdHMpLCBvZmZzZXQpOwogICAgICB9",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAATQcAAAAAAACwBwAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					2,
					"paste",
					null,
					"AgAAAE0HAAAAAAAAsAcAAAAAAAAAAAAAsAcAAAAAAAATCAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAATQcAAAAAAABNBwAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": "io"
					},
					"AwAAAFUHAAAAAAAAVgcAAAAAAAAAAAAAVgcAAAAAAABWBwAAAAAAAAYAAABpc0JCb3hWBwAAAAAAAFcHAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAVQcAAAAAAABbBwAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"left_delete",
					null,
					"AQAAAFYHAAAAAAAAVgcAAAAAAAABAAAAbw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAVwcAAAAAAABXBwAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": "sPoint"
					},
					"BgAAAFYHAAAAAAAAVwcAAAAAAAAAAAAAVwcAAAAAAABYBwAAAAAAAAAAAABYBwAAAAAAAFkHAAAAAAAAAAAAAFkHAAAAAAAAWgcAAAAAAAAAAAAAWgcAAAAAAABbBwAAAAAAAAAAAABbBwAAAAAAAFwHAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAVgcAAAAAAABWBwAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": "arg"
					},
					"AwAAAF0HAAAAAAAAXgcAAAAAAAAAAAAAXgcAAAAAAABfBwAAAAAAAAAAAABfBwAAAAAAAGAHAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAXQcAAAAAAABdBwAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"cut",
					null,
					"AQAAAGAHAAAAAAAAYAcAAAAAAAALAAAAYXJnLm9iamVjdHM",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAYAcAAAAAAABrBwAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					5,
					"left_delete",
					null,
					"BQAAAHsHAAAAAAAAewcAAAAAAAABAAAAdHoHAAAAAAAAegcAAAAAAAABAAAAc3kHAAAAAAAAeQcAAAAAAAABAAAAaXgHAAAAAAAAeAcAAAAAAAABAAAATHcHAAAAAAAAdwcAAAAAAAABAAAAZQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAfAcAAAAAAAB8BwAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAAHcHAAAAAAAAeAcAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAdwcAAAAAAAB3BwAAAAAAAAAAAAAAAPC/"
				],
				[
					57,
					1,
					"insert",
					{
						"characters": "1"
					},
					"AQAAAG4JAAAAAAAAbwkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAbgkAAAAAAABuCQAAAAAAAAAAAAAAAFlA"
				],
				[
					58,
					1,
					"left_delete",
					null,
					"AQAAAG4JAAAAAAAAbgkAAAAAAAABAAAAMQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAbwkAAAAAAABvCQAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"paste",
					null,
					"AgAAAGwHAAAAAAAAuwcAAAAAAAAAAAAAuwcAAAAAAAC7BwAAAAAAADEAAAAgdGhpcy51cGRhdGUoT2JqZWN0LnZhbHVlcyhhcmcub2JqZWN0cyksIG9mZnNldCk7",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAbAcAAAAAAACdBwAAAAAAAAAAAAAAAPC/"
				],
				[
					90,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAARGwAAaW1wb3J0IHsgZGVmaW5lLCB0eXBlcywgaXNPYmplY3QgfSBmcm9tICcuLi9taXNjLmpzJzsKaW1wb3J0IHsgaXNQb2ludCwgUG9pbnQgfSBmcm9tICcuLi9nZW9tL3JlY3QuanMnOwppbXBvcnQgeyBpc1JlY3QsIFJlY3QgfSBmcm9tICcuLi9nZW9tL3JlY3QuanMnOwppbXBvcnQgeyBpc1NpemUsIFNpemUgfSBmcm9tICcuLi9nZW9tL3NpemUuanMnOwoKZXhwb3J0IGNsYXNzIEJCb3ggewogIHN0YXRpYyBmcm9tUG9pbnRzKHB0cykgewogICAgbGV0IHB0ID0gcHRzLnNoaWZ0KCk7CiAgICBsZXQgYmIgPSBuZXcgQkJveChwdC54LCBwdC55LCBwdC54LCBwdC55KTsKICAgIGJiLnVwZGF0ZShwdHMpOwogICAgcmV0dXJuIGJiOwogIH0KCiAgc3RhdGljIGZyb21SZWN0KHJlY3QpIHsKICAgIHJldHVybiBuZXcgQkJveChyZWN0LngsIHJlY3QueSwgcmVjdC54ICsgcmVjdC53aWR0aCwgcmVjdC55ICsgcmVjdC5oZWlnaHQpOwogIH0KCiAgc3RhdGljIGNyZWF0ZShhcmcpIHsKICAgIGlmKGlzUmVjdChhcmcpKSByZXR1cm4gbmV3IEJCb3gocmVjdC54LCByZWN0LnksIHJlY3QueCArIHJlY3Qud2lkdGgsIHJlY3QueSArIHJlY3QuaGVpZ2h0KTsKCiAgICBpZihBcnJheS5pc0FycmF5KGFyZykgfHwgdHlwZXMuaXNJdGVyYWJsZShhcmcpKSByZXR1cm4gQkJveC5vZiguLi5hcmcpOwogIH0KCiAgc3RhdGljIG9mKC4uLmFyZ3MpIHsKICAgIHJldHVybiBCQm94LmZyb20oYXJncyk7CiAgfQoKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBpZihhcmdzLmxlbmd0aCA9PSA0ICYmIGFyZ3MuZXZlcnkoYXJnID0+IE51bWJlci5pc0Zpbml0ZShhcmcpKSkgewogICAgICBjb25zdCBbeDEsIHkxLCB4MiwgeTJdID0gYXJnczsKCiAgICAgIHRoaXMueDEgPSBNYXRoLm1pbih4MSwgeDIpOwogICAgICB0aGlzLnkxID0gTWF0aC5taW4oeTEsIHkyKTsKICAgICAgdGhpcy54MiA9IE1hdGgubWF4KHgxLCB4Mik7CiAgICAgIHRoaXMueTIgPSBNYXRoLm1heCh5MSwgeTIpOwogICAgfSBlbHNlIGlmKGlzQkJveChhcmdzWzBdKSkgewogICAgICBjb25zdCB7IHgxLCB5MSwgeDIsIHkyIH0gPSBhcmdzWzBdOwogICAgICB0aGlzLngxID0geDE7CiAgICAgIHRoaXMueTEgPSB5MTsKICAgICAgdGhpcy54MiA9IHgyOwogICAgICB0aGlzLnkyID0geTI7CiAgICB9IGVsc2UgewogICAgICB0aGlzLngxID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnkxID0gdW5kZWZpbmVkOwogICAgICB0aGlzLngyID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnkyID0gdW5kZWZpbmVkOwogICAgICBpZihhcmdzLmxlbmd0aCA+IDApIHRoaXMudXBkYXRlTGlzdChbLi4uYXJnc10pOwogICAgfQoKICAgIGRlZmluZSh0aGlzLCAnb2JqZWN0cycsIHt9KTsKICB9CgogIGdldE9iamVjdHMoKSB7CiAgICByZXR1cm4gbmV3IE1hcChPYmplY3QuZW50cmllcyh0aGlzLm9iamVjdHMpKTsKICB9CgogIHVwZGF0ZUxpc3QobGlzdCwgb2Zmc2V0ID0gMC4wLCBvYmpGbiA9IGl0ZW0gPT4gaXRlbSwgdCA9IGEgPT4gYSkgewogICAgZm9yKGxldCBhcmcgb2YgbGlzdCkgdGhpcy51cGRhdGUodChhcmcpLCBvZmZzZXQsIG9iakZuKGFyZykpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICB1cGRhdGUoYXJnLCBvZmZzZXQgPSAwLjAsIG9iaiA9IG51bGwpIHsKICAgIC8vY29uc29sZS5sb2coJ0JCb3gudXBkYXRlJywgeyBhcmcsIG9mZnNldCwgb2JqIH0pOwogICAgaWYoQXJyYXkuaXNBcnJheShhcmcpKSByZXR1cm4gdGhpcy51cGRhdGVMaXN0KGFyZywgb2Zmc2V0KTsKICAgIGVsc2UgaWYoaXNPYmplY3QoYXJnKSkgewogICAgICBpZih0eXBlb2YgYXJnLmJib3ggPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGFyZyA9IGFyZy5iYm94KCk7CiAgICAgIH0gZWxzZSBpZihpc1BvaW50KGFyZykpIHsKICAgICAgIHRoaXMudXBkYXRlWFkoYXJnLngsIGFyZy55LCBvZmZzZXQsIG5hbWUgPT4gKHRoaXMub2JqZWN0c1tuYW1lXSA9IG9iaiB8fCBhcmcpKTsKICAgICAgfWVsc2UgaWYoaXNCQm94KGFyZy5vYmplY3RzKSkgewogICAgICAgIHRoaXMudXBkYXRlTGlzdChPYmplY3QudmFsdWVzKGFyZy5vYmplY3RzKSwgb2Zmc2V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZihhcmcueDIgIT09IHVuZGVmaW5lZCAmJiBhcmcueTIgIT0gdW5kZWZpbmVkKQogICAgICAgICAgdGhpcy51cGRhdGVYWShhcmcueDIsIGFyZy55MiwgMCwgbmFtZSA9PiAodGhpcy5vYmplY3RzW25hbWVdID0gb2JqIHx8IGFyZykpOwogICAgICAgIGlmKGFyZy54MSAhPT0gdW5kZWZpbmVkICYmIGFyZy55MSAhPSB1bmRlZmluZWQpCiAgICAgICAgICB0aGlzLnVwZGF0ZVhZKGFyZy54MSwgYXJnLnkxLCAwLCBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgICAgaWYoYXJnLnggIT09IHVuZGVmaW5lZCAmJiBhcmcueSAhPSB1bmRlZmluZWQpCiAgICAgICAgICB0aGlzLnVwZGF0ZVhZKGFyZy54LCBhcmcueSwgb2Zmc2V0LCBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9CgogIHVwZGF0ZVhZKHgsIHksIG9mZnNldCA9IDAsIHNldCA9ICgpID0+IHt9KSB7CiAgICBsZXQgdXBkYXRlZCA9IHt9OwogICAgaWYodGhpcy54MSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMueDEgPiB4IC0gb2Zmc2V0KSB7CiAgICAgIHRoaXMueDEgPSB4IC0gb2Zmc2V0OwogICAgICBzZXQoJ3gxJyk7CiAgICB9CiAgICBpZih0aGlzLngyID09PSB1bmRlZmluZWQgfHwgdGhpcy54MiA8IHggKyBvZmZzZXQpIHsKICAgICAgdGhpcy54MiA9IHggKyBvZmZzZXQ7CiAgICAgIHNldCgneDInKTsKICAgIH0KICAgIGlmKHRoaXMueTEgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnkxID4geSAtIG9mZnNldCkgewogICAgICB0aGlzLnkxID0geSAtIG9mZnNldDsKICAgICAgc2V0KCd5MScpOwogICAgfQogICAgaWYodGhpcy55MiA9PT0gdW5kZWZpbmVkIHx8IHRoaXMueTIgPCB5ICsgb2Zmc2V0KSB7CiAgICAgIHRoaXMueTIgPSB5ICsgb2Zmc2V0OwogICAgICBzZXQoJ3kyJyk7CiAgICB9CiAgICAvL2lmKE9iamVjdC5rZXlzKHVwZGF0ZWQpKSBjb25zb2xlLmxvZyhgQkJveCB1cGRhdGUgJHt4fSwke3l9IGAsIHVwZGF0ZWQpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBnZXQgY2VudGVyKCkgewogICAgcmV0dXJuIG5ldyBQb2ludCh7CiAgICAgIHg6IHRoaXMueCArIHRoaXMud2lkdGggLyAyLAogICAgICB5OiB0aGlzLnkgKyB0aGlzLmhlaWdodCAvIDIKICAgIH0pOwogIH0KCiAgcmVsYXRpdmVfdG8oeCwgeSkgewogICAgcmV0dXJuIG5ldyBCQm94KHRoaXMueDEgLSB4LCB0aGlzLnkxIC0geSwgdGhpcy54MiAtIHgsIHRoaXMueTIgLSB5KTsKICB9CgogIGdldCB4KCkgewogICAgcmV0dXJuIHRoaXMueDE7CiAgfQoKICBnZXQgd2lkdGgoKSB7CiAgICByZXR1cm4gLypNYXRoLmFicyovIHRoaXMueDIgLSB0aGlzLngxOwogIH0KCiAgZ2V0IHkoKSB7CiAgICByZXR1cm4gdGhpcy55MSA8IHRoaXMueTIgPyB0aGlzLnkxIDogdGhpcy55MjsKICB9CgogIGdldCBoZWlnaHQoKSB7CiAgICByZXR1cm4gLypNYXRoLmFicyovIHRoaXMueTIgLSB0aGlzLnkxOwogIH0KCiAgc2V0IHgoeCkgewogICAgbGV0IGl4ID0geCAtIHRoaXMueDE7CiAgICB0aGlzLngxICs9IGl4OwogICAgdGhpcy54MiArPSBpeDsKICB9CgogIHNldCB3aWR0aCh3KSB7CiAgICB0aGlzLngyID0gdGhpcy54MSArIHc7CiAgfQoKICBzZXQgeSh5KSB7CiAgICBsZXQgaXkgPSB5IC0gdGhpcy55MTsKICAgIHRoaXMueTEgKz0gaXk7CiAgICB0aGlzLnkyICs9IGl5OwogIH0KCiAgc2V0IGhlaWdodChoKSB7CiAgICB0aGlzLnkyID0gdGhpcy55MSArIGg7CiAgfQoKICBnZXQgcmVjdCgpIHsKICAgIGNvbnN0IHsgeDEsIHkxLCB4MiwgeTIgfSA9IHRoaXM7CiAgICByZXR1cm4gewogICAgICB4OiB4MSwKICAgICAgeTogeTEsCiAgICAgIHdpZHRoOiB4MiAtIHgxLAogICAgICBoZWlnaHQ6IHkyIC0geTEKICAgIH07CiAgfQoKICBnZXQgc2l6ZSgpIHsKICAgIGNvbnN0IHsgeDEsIHkxLCB4MiwgeTIgfSA9IHRoaXM7CiAgICByZXR1cm4gbmV3IFNpemUoeDIgLSB4MSwgeTIgLSB5MSk7CiAgfQoKICB0b1JlY3QocHJvdG8pIHsKICAgIGxldCByID0gdGhpcy5yZWN0OwogICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihyLCBwcm90byB8fCBPYmplY3QucHJvdG90eXBlKTsKICB9CgogIHRvU2l6ZShjdG9yID0gb2JqID0+IE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIE9iamVjdC5wcm90b3R5cGUpKSB7CiAgICBsZXQgd2lkdGggPSB0aGlzLngyIC0gdGhpcy54MTsKICAgIGxldCBoZWlnaHQgPSB0aGlzLnkyIC0gdGhpcy55MTsKICAgIHJldHVybiBjdG9yKHsgd2lkdGgsIGhlaWdodCB9KTsKICB9CgogIHRvT2JqZWN0KCkgewogICAgY29uc3QgeyB4MSwgeTEsIHgyLCB5MiB9ID0gdGhpczsKICAgIGxldCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgb2JqLngxID0geDE7CiAgICBvYmoueTEgPSB5MTsKICAgIG9iai54MiA9IHgyOwogICAgb2JqLnkyID0geTI7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gYCR7dGhpcy54MX0gJHt0aGlzLnkxfSAke3RoaXMueDJ9ICR7dGhpcy55Mn1gOwogIH0KCiAgdG9TVkcoKSB7CiAgICByZXR1cm4gYCR7dGhpcy54MX0gJHt0aGlzLnkxfSAke3RoaXMud2lkdGh9ICR7dGhpcy5oZWlnaHR9YDsKICB9CgogIHRyYW5zZm9ybShmbiA9IGFyZyA9PiBhcmcsIG91dCkgewogICAgaWYoIW91dCkgb3V0ID0gdGhpczsKICAgIGZvcihsZXQgcHJvcCBvZiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJ10pIHsKICAgICAgY29uc3QgdiA9IHRoaXNbcHJvcF07CiAgICAgIG91dFtwcm9wXSA9IGZuKHYpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICByb3VuZChmbiA9IGFyZyA9PiBNYXRoLnJvdW5kKGFyZykpIHsKICAgIGxldCByZXQgPSBuZXcgQkJveCgpOwogICAgdGhpcy50cmFuc2Zvcm0oZm4sIHJldCk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgbW92ZSh4LCB5KSB7CiAgICB0aGlzLngxICs9IHg7CiAgICB0aGlzLnkxICs9IHk7CiAgICB0aGlzLngyICs9IHg7CiAgICB0aGlzLnkyICs9IHk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIG91dHNldCguLi5hcmdzKSB7CiAgICBpZihhcmdzLmxlbmd0aCA+PSA0KSB7CiAgICAgIGNvbnN0IFt0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRdID0gYXJnczsKICAgICAgcmV0dXJuIG5ldyBCQm94KHRoaXMueDEgLSBsZWZ0LCB0aGlzLnkxIC0gdG9wLCB0aGlzLngyICsgcmlnaHQsIHRoaXMueTIgKyBib3R0b20pOwogICAgfQogICAgaWYoYXJncy5sZW5ndGggPj0gMikgewogICAgICBjb25zdCBbdmVydGljYWwsIGhvcml6b250YWxdID0gYXJnczsKICAgICAgcmV0dXJuIHRoaXMub3V0c2V0KHZlcnRpY2FsLCBob3Jpem9udGFsLCB2ZXJ0aWNhbCwgaG9yaXpvbnRhbCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRzZXQoYXJnc1swXSwgYXJnc1swXSwgYXJnc1swXSwgYXJnc1swXSk7CiAgfQoKICBpbnNldCguLi5hcmdzKSB7CiAgICByZXR1cm4gdGhpcy5vdXRzZXQoLi4uYXJncy5tYXAobiA9PiAtbikpOwogIH0KCiAgc3RhdGljIGZyb20oaXRlciwgdHAgPSBwID0+IHApIHsKICAgIGlmKHR5cGVvZiBpdGVyID09ICdzdHJpbmcnKSB7CiAgICAgIGxldCBbeDEsIHkxLCB4MiwgeTJdID0gWy4uLml0ZXIubWF0Y2hBbGwoL1stKy4wLTldKy9nKV0ubWFwKChbbV0pID0+ICttKTsKICAgICAgaXRlciA9IFt7IHgxLCB5MSwgeDIsIHkyIH1dOwogICAgfQoKICAgIGlmKHR5cGVvZiBpdGVyID09ICdvYmplY3QnICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSkgaXRlciA9IGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSgpOwoKICAgIGxldCByID0gbmV3IEJCb3goKTsKICAgIGxldCByZXN1bHQgPSBpdGVyLm5leHQoKTsKICAgIGxldCBwOwogICAgaWYocmVzdWx0LnZhbHVlKSB7CiAgICAgIHAgPSB0cChyZXN1bHQudmFsdWUpOwogICAgICByLngxID0gcC54MSAhPT0gdW5kZWZpbmVkID8gcC54MSA6IHAueDsKICAgICAgci54MiA9IHAueDIgIT09IHVuZGVmaW5lZCA/IHAueDIgOiBwLng7CiAgICAgIHIueTEgPSBwLnkxICE9PSB1bmRlZmluZWQgPyBwLnkxIDogcC55OwogICAgICByLnkyID0gcC55MiAhPT0gdW5kZWZpbmVkID8gcC55MiA6IHAueTsKICAgIH0KICAgIHdoaWxlKHRydWUpIHsKICAgICAgcmVzdWx0ID0gaXRlci5uZXh0KCk7CiAgICAgIGlmKCFyZXN1bHQudmFsdWUpIGJyZWFrOwogICAgICBwID0gdHAocmVzdWx0LnZhbHVlKTsKCiAgICAgIHIudXBkYXRlKHApOwogICAgfQogICAgcmV0dXJuIHI7CiAgfQoKICBzdGF0aWMgZnJvbVN0cmluZyhzKSB7CiAgICAvL2NvbnNvbGUubG9nKCdCQm94LmZyb21TdHJpbmcnLHMpOwogICAgbGV0IFt4MSwgeTEsIHgyLCB5Ml0gPSBbLi4ucy5tYXRjaEFsbCgvWy0rLjAtOV0rL2cpXS5tYXAoKFttXSkgPT4gK20pOwoKICAgIGxldCByID0gbmV3IEJCb3goKTsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKHIsIHsgeDEsIHkxLCB4MiwgeTIgfSk7CiAgfQoKICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICBsZXQgW3gxLCB4MiwgeTEsIHkyXSA9IHRoaXM7CiAgICBmb3IobGV0IHByb3Agb2YgW3gxLCB4MiwgeTEsIHkyXSkgeWllbGQgcHJvcDsKICB9Cn0KCkJCb3gucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnQkJveCc7CgpleHBvcnQgY29uc3QgaXNCQm94ID0gKGJib3gsIHRlc3RGbiA9IChwcm9wLCBuYW1lLCBvYmopID0+IG5hbWUgaW4gb2JqKSA9PgogIGlzT2JqZWN0KGJib3gpICYmIFsneDEnLCAneTEnLCAneDInLCAneTInXS5ldmVyeShuID0+IHRlc3RGbihiYm94W25dLCBuLCBiYm94KSk7CgpleHBvcnQgZGVmYXVsdCBCQm94OwoAAAAAAAAAAPMaAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAARQcAAAAAAABlBwAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"paste",
					null,
					"AgAAAJEHAAAAAAAAvgcAAAAAAAAAAAAAvgcAAAAAAAC+BwAAAAAAACsAAABuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAkQcAAAAAAAC8BwAAAAAAAAAAAAAAAPC/"
				],
				[
					107,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAJAHAAAAAAAAkQcAAAAAAAAAAAAAkQcAAAAAAACRBwAAAAAAAAIAAAAgLA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAkgcAAAAAAACQBwAAAAAAAAAAAAAAAPC/"
				],
				[
					124,
					1,
					"doxy_enter",
					null,
					"AgAAAHAGAAAAAAAAcQYAAAAAAAAAAAAAcQYAAAAAAAB1BgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAcAYAAAAAAABwBgAAAAAAAAAAAAAAAPC/"
				],
				[
					126,
					1,
					"insert",
					{
						"characters": "v"
					},
					"AQAAAHAGAAAAAAAAcQYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAcAYAAAAAAABwBgAAAAAAAAAAAAAAAERA"
				],
				[
					127,
					1,
					"left_delete",
					null,
					"AQAAAHAGAAAAAAAAcAYAAAAAAAABAAAAdg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAcQYAAAAAAABxBgAAAAAAAAAAAAAAAPC/"
				],
				[
					128,
					1,
					"paste",
					null,
					"AQAAAHAGAAAAAAAAfAYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAcAYAAAAAAABwBgAAAAAAAAAAAAAAAPC/"
				],
				[
					129,
					1,
					"insert",
					{
						"characters": "??="
					},
					"AwAAAHwGAAAAAAAAfQYAAAAAAAAAAAAAfQYAAAAAAAB+BgAAAAAAAAAAAAB+BgAAAAAAAH8GAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAfAYAAAAAAAB8BgAAAAAAAAAAAAAAAPC/"
				],
				[
					130,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAH8GAAAAAAAAgQYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAfwYAAAAAAAB/BgAAAAAAAAAAAAAAAPC/"
				],
				[
					132,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAIEGAAAAAAAAggYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAgQYAAAAAAACBBgAAAAAAAAAAAAAAAPC/"
				],
				[
					136,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAALGwAAaW1wb3J0IHsgZGVmaW5lLCB0eXBlcywgaXNPYmplY3QgfSBmcm9tICcuLi9taXNjLmpzJzsKaW1wb3J0IHsgaXNQb2ludCwgUG9pbnQgfSBmcm9tICcuLi9nZW9tL3JlY3QuanMnOwppbXBvcnQgeyBpc1JlY3QsIFJlY3QgfSBmcm9tICcuLi9nZW9tL3JlY3QuanMnOwppbXBvcnQgeyBpc1NpemUsIFNpemUgfSBmcm9tICcuLi9nZW9tL3NpemUuanMnOwoKZXhwb3J0IGNsYXNzIEJCb3ggewogIHN0YXRpYyBmcm9tUG9pbnRzKHB0cykgewogICAgbGV0IHB0ID0gcHRzLnNoaWZ0KCk7CiAgICBsZXQgYmIgPSBuZXcgQkJveChwdC54LCBwdC55LCBwdC54LCBwdC55KTsKICAgIGJiLnVwZGF0ZShwdHMpOwogICAgcmV0dXJuIGJiOwogIH0KCiAgc3RhdGljIGZyb21SZWN0KHJlY3QpIHsKICAgIHJldHVybiBuZXcgQkJveChyZWN0LngsIHJlY3QueSwgcmVjdC54ICsgcmVjdC53aWR0aCwgcmVjdC55ICsgcmVjdC5oZWlnaHQpOwogIH0KCiAgc3RhdGljIGNyZWF0ZShhcmcpIHsKICAgIGlmKGlzUmVjdChhcmcpKSByZXR1cm4gbmV3IEJCb3gocmVjdC54LCByZWN0LnksIHJlY3QueCArIHJlY3Qud2lkdGgsIHJlY3QueSArIHJlY3QuaGVpZ2h0KTsKCiAgICBpZihBcnJheS5pc0FycmF5KGFyZykgfHwgdHlwZXMuaXNJdGVyYWJsZShhcmcpKSByZXR1cm4gQkJveC5vZiguLi5hcmcpOwogIH0KCiAgc3RhdGljIG9mKC4uLmFyZ3MpIHsKICAgIHJldHVybiBCQm94LmZyb20oYXJncyk7CiAgfQoKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBpZihhcmdzLmxlbmd0aCA9PSA0ICYmIGFyZ3MuZXZlcnkoYXJnID0+IE51bWJlci5pc0Zpbml0ZShhcmcpKSkgewogICAgICBjb25zdCBbeDEsIHkxLCB4MiwgeTJdID0gYXJnczsKCiAgICAgIHRoaXMueDEgPSBNYXRoLm1pbih4MSwgeDIpOwogICAgICB0aGlzLnkxID0gTWF0aC5taW4oeTEsIHkyKTsKICAgICAgdGhpcy54MiA9IE1hdGgubWF4KHgxLCB4Mik7CiAgICAgIHRoaXMueTIgPSBNYXRoLm1heCh5MSwgeTIpOwogICAgfSBlbHNlIGlmKGlzQkJveChhcmdzWzBdKSkgewogICAgICBjb25zdCB7IHgxLCB5MSwgeDIsIHkyIH0gPSBhcmdzWzBdOwogICAgICB0aGlzLngxID0geDE7CiAgICAgIHRoaXMueTEgPSB5MTsKICAgICAgdGhpcy54MiA9IHgyOwogICAgICB0aGlzLnkyID0geTI7CiAgICB9IGVsc2UgewogICAgICB0aGlzLngxID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnkxID0gdW5kZWZpbmVkOwogICAgICB0aGlzLngyID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnkyID0gdW5kZWZpbmVkOwogICAgICBpZihhcmdzLmxlbmd0aCA+IDApIHRoaXMudXBkYXRlTGlzdChbLi4uYXJnc10pOwogICAgfQoKICAgIGRlZmluZSh0aGlzLCAnb2JqZWN0cycsIHt9KTsKICB9CgogIGdldE9iamVjdHMoKSB7CiAgICByZXR1cm4gbmV3IE1hcChPYmplY3QuZW50cmllcyh0aGlzLm9iamVjdHMpKTsKICB9CgogIHVwZGF0ZUxpc3QobGlzdCwgb2Zmc2V0ID0gMC4wLCBvYmpGbiA9IGl0ZW0gPT4gaXRlbSwgdCA9IGEgPT4gYSkgewogICAgZm9yKGxldCBhcmcgb2YgbGlzdCkgdGhpcy51cGRhdGUodChhcmcpLCBvZmZzZXQsIG9iakZuKGFyZykpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICB1cGRhdGUoYXJnLCBvZmZzZXQgPSAwLjAsIG9iaiA9IG51bGwpIHsKICAgIHRoaXMub2JqZWN0cz8/PXt9OwogICAgLy9jb25zb2xlLmxvZygnQkJveC51cGRhdGUnLCB7IGFyZywgb2Zmc2V0LCBvYmogfSk7CiAgICBpZihBcnJheS5pc0FycmF5KGFyZykpIHJldHVybiB0aGlzLnVwZGF0ZUxpc3QoYXJnLCBvZmZzZXQpOwogICAgZWxzZSBpZihpc09iamVjdChhcmcpKSB7CiAgICAgIGlmKHR5cGVvZiBhcmcuYmJveCA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgYXJnID0gYXJnLmJib3goKTsKICAgICAgfSBlbHNlIGlmKGlzUG9pbnQoYXJnKSkgewogICAgICAgIHRoaXMudXBkYXRlWFkoYXJnLngsIGFyZy55LCBvZmZzZXQsICBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgIH0gZWxzZSBpZihpc0JCb3goYXJnLm9iamVjdHMpKSB7CiAgICAgICAgdGhpcy51cGRhdGVMaXN0KE9iamVjdC52YWx1ZXMoYXJnLm9iamVjdHMpLCBvZmZzZXQpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmKGFyZy54MiAhPT0gdW5kZWZpbmVkICYmIGFyZy55MiAhPSB1bmRlZmluZWQpIHRoaXMudXBkYXRlWFkoYXJnLngyLCBhcmcueTIsIDAsIG5hbWUgPT4gKHRoaXMub2JqZWN0c1tuYW1lXSA9IG9iaiB8fCBhcmcpKTsKICAgICAgICBpZihhcmcueDEgIT09IHVuZGVmaW5lZCAmJiBhcmcueTEgIT0gdW5kZWZpbmVkKSB0aGlzLnVwZGF0ZVhZKGFyZy54MSwgYXJnLnkxLCAwLCBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgICAgaWYoYXJnLnggIT09IHVuZGVmaW5lZCAmJiBhcmcueSAhPSB1bmRlZmluZWQpIHRoaXMudXBkYXRlWFkoYXJnLngsIGFyZy55LCBvZmZzZXQsIG5hbWUgPT4gKHRoaXMub2JqZWN0c1tuYW1lXSA9IG9iaiB8fCBhcmcpKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgdXBkYXRlWFkoeCwgeSwgb2Zmc2V0ID0gMCwgc2V0ID0gKCkgPT4ge30pIHsKICAgIGxldCB1cGRhdGVkID0ge307CiAgICBpZih0aGlzLngxID09PSB1bmRlZmluZWQgfHwgdGhpcy54MSA+IHggLSBvZmZzZXQpIHsKICAgICAgdGhpcy54MSA9IHggLSBvZmZzZXQ7CiAgICAgIHNldCgneDEnKTsKICAgIH0KICAgIGlmKHRoaXMueDIgPT09IHVuZGVmaW5lZCB8fCB0aGlzLngyIDwgeCArIG9mZnNldCkgewogICAgICB0aGlzLngyID0geCArIG9mZnNldDsKICAgICAgc2V0KCd4MicpOwogICAgfQogICAgaWYodGhpcy55MSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMueTEgPiB5IC0gb2Zmc2V0KSB7CiAgICAgIHRoaXMueTEgPSB5IC0gb2Zmc2V0OwogICAgICBzZXQoJ3kxJyk7CiAgICB9CiAgICBpZih0aGlzLnkyID09PSB1bmRlZmluZWQgfHwgdGhpcy55MiA8IHkgKyBvZmZzZXQpIHsKICAgICAgdGhpcy55MiA9IHkgKyBvZmZzZXQ7CiAgICAgIHNldCgneTInKTsKICAgIH0KICAgIC8vaWYoT2JqZWN0LmtleXModXBkYXRlZCkpIGNvbnNvbGUubG9nKGBCQm94IHVwZGF0ZSAke3h9LCR7eX0gYCwgdXBkYXRlZCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIGdldCBjZW50ZXIoKSB7CiAgICByZXR1cm4gbmV3IFBvaW50KHsKICAgICAgeDogdGhpcy54ICsgdGhpcy53aWR0aCAvIDIsCiAgICAgIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMgogICAgfSk7CiAgfQoKICByZWxhdGl2ZV90byh4LCB5KSB7CiAgICByZXR1cm4gbmV3IEJCb3godGhpcy54MSAtIHgsIHRoaXMueTEgLSB5LCB0aGlzLngyIC0geCwgdGhpcy55MiAtIHkpOwogIH0KCiAgZ2V0IHgoKSB7CiAgICByZXR1cm4gdGhpcy54MTsKICB9CgogIGdldCB3aWR0aCgpIHsKICAgIHJldHVybiAvKk1hdGguYWJzKi8gdGhpcy54MiAtIHRoaXMueDE7CiAgfQoKICBnZXQgeSgpIHsKICAgIHJldHVybiB0aGlzLnkxIDwgdGhpcy55MiA/IHRoaXMueTEgOiB0aGlzLnkyOwogIH0KCiAgZ2V0IGhlaWdodCgpIHsKICAgIHJldHVybiAvKk1hdGguYWJzKi8gdGhpcy55MiAtIHRoaXMueTE7CiAgfQoKICBzZXQgeCh4KSB7CiAgICBsZXQgaXggPSB4IC0gdGhpcy54MTsKICAgIHRoaXMueDEgKz0gaXg7CiAgICB0aGlzLngyICs9IGl4OwogIH0KCiAgc2V0IHdpZHRoKHcpIHsKICAgIHRoaXMueDIgPSB0aGlzLngxICsgdzsKICB9CgogIHNldCB5KHkpIHsKICAgIGxldCBpeSA9IHkgLSB0aGlzLnkxOwogICAgdGhpcy55MSArPSBpeTsKICAgIHRoaXMueTIgKz0gaXk7CiAgfQoKICBzZXQgaGVpZ2h0KGgpIHsKICAgIHRoaXMueTIgPSB0aGlzLnkxICsgaDsKICB9CgogIGdldCByZWN0KCkgewogICAgY29uc3QgeyB4MSwgeTEsIHgyLCB5MiB9ID0gdGhpczsKICAgIHJldHVybiB7CiAgICAgIHg6IHgxLAogICAgICB5OiB5MSwKICAgICAgd2lkdGg6IHgyIC0geDEsCiAgICAgIGhlaWdodDogeTIgLSB5MQogICAgfTsKICB9CgogIGdldCBzaXplKCkgewogICAgY29uc3QgeyB4MSwgeTEsIHgyLCB5MiB9ID0gdGhpczsKICAgIHJldHVybiBuZXcgU2l6ZSh4MiAtIHgxLCB5MiAtIHkxKTsKICB9CgogIHRvUmVjdChwcm90bykgewogICAgbGV0IHIgPSB0aGlzLnJlY3Q7CiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHIsIHByb3RvIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIH0KCiAgdG9TaXplKGN0b3IgPSBvYmogPT4gT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iaiwgT2JqZWN0LnByb3RvdHlwZSkpIHsKICAgIGxldCB3aWR0aCA9IHRoaXMueDIgLSB0aGlzLngxOwogICAgbGV0IGhlaWdodCA9IHRoaXMueTIgLSB0aGlzLnkxOwogICAgcmV0dXJuIGN0b3IoeyB3aWR0aCwgaGVpZ2h0IH0pOwogIH0KCiAgdG9PYmplY3QoKSB7CiAgICBjb25zdCB7IHgxLCB5MSwgeDIsIHkyIH0gPSB0aGlzOwogICAgbGV0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBvYmoueDEgPSB4MTsKICAgIG9iai55MSA9IHkxOwogICAgb2JqLngyID0geDI7CiAgICBvYmoueTIgPSB5MjsKICAgIHJldHVybiBvYmo7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIHJldHVybiBgJHt0aGlzLngxfSAke3RoaXMueTF9ICR7dGhpcy54Mn0gJHt0aGlzLnkyfWA7CiAgfQoKICB0b1NWRygpIHsKICAgIHJldHVybiBgJHt0aGlzLngxfSAke3RoaXMueTF9ICR7dGhpcy53aWR0aH0gJHt0aGlzLmhlaWdodH1gOwogIH0KCiAgdHJhbnNmb3JtKGZuID0gYXJnID0+IGFyZywgb3V0KSB7CiAgICBpZighb3V0KSBvdXQgPSB0aGlzOwogICAgZm9yKGxldCBwcm9wIG9mIFsneDEnLCAneTEnLCAneDInLCAneTInXSkgewogICAgICBjb25zdCB2ID0gdGhpc1twcm9wXTsKICAgICAgb3V0W3Byb3BdID0gZm4odik7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9CgogIHJvdW5kKGZuID0gYXJnID0+IE1hdGgucm91bmQoYXJnKSkgewogICAgbGV0IHJldCA9IG5ldyBCQm94KCk7CiAgICB0aGlzLnRyYW5zZm9ybShmbiwgcmV0KTsKICAgIHJldHVybiByZXQ7CiAgfQoKICBtb3ZlKHgsIHkpIHsKICAgIHRoaXMueDEgKz0geDsKICAgIHRoaXMueTEgKz0geTsKICAgIHRoaXMueDIgKz0geDsKICAgIHRoaXMueTIgKz0geTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgb3V0c2V0KC4uLmFyZ3MpIHsKICAgIGlmKGFyZ3MubGVuZ3RoID49IDQpIHsKICAgICAgY29uc3QgW3RvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdF0gPSBhcmdzOwogICAgICByZXR1cm4gbmV3IEJCb3godGhpcy54MSAtIGxlZnQsIHRoaXMueTEgLSB0b3AsIHRoaXMueDIgKyByaWdodCwgdGhpcy55MiArIGJvdHRvbSk7CiAgICB9CiAgICBpZihhcmdzLmxlbmd0aCA+PSAyKSB7CiAgICAgIGNvbnN0IFt2ZXJ0aWNhbCwgaG9yaXpvbnRhbF0gPSBhcmdzOwogICAgICByZXR1cm4gdGhpcy5vdXRzZXQodmVydGljYWwsIGhvcml6b250YWwsIHZlcnRpY2FsLCBob3Jpem9udGFsKTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dHNldChhcmdzWzBdLCBhcmdzWzBdLCBhcmdzWzBdLCBhcmdzWzBdKTsKICB9CgogIGluc2V0KC4uLmFyZ3MpIHsKICAgIHJldHVybiB0aGlzLm91dHNldCguLi5hcmdzLm1hcChuID0+IC1uKSk7CiAgfQoKICBzdGF0aWMgZnJvbShpdGVyLCB0cCA9IHAgPT4gcCkgewogICAgaWYodHlwZW9mIGl0ZXIgPT0gJ3N0cmluZycpIHsKICAgICAgbGV0IFt4MSwgeTEsIHgyLCB5Ml0gPSBbLi4uaXRlci5tYXRjaEFsbCgvWy0rLjAtOV0rL2cpXS5tYXAoKFttXSkgPT4gK20pOwogICAgICBpdGVyID0gW3sgeDEsIHkxLCB4MiwgeTIgfV07CiAgICB9CgogICAgaWYodHlwZW9mIGl0ZXIgPT0gJ29iamVjdCcgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdKSBpdGVyID0gaXRlcltTeW1ib2wuaXRlcmF0b3JdKCk7CgogICAgbGV0IHIgPSBuZXcgQkJveCgpOwogICAgbGV0IHJlc3VsdCA9IGl0ZXIubmV4dCgpOwogICAgbGV0IHA7CiAgICBpZihyZXN1bHQudmFsdWUpIHsKICAgICAgcCA9IHRwKHJlc3VsdC52YWx1ZSk7CiAgICAgIHIueDEgPSBwLngxICE9PSB1bmRlZmluZWQgPyBwLngxIDogcC54OwogICAgICByLngyID0gcC54MiAhPT0gdW5kZWZpbmVkID8gcC54MiA6IHAueDsKICAgICAgci55MSA9IHAueTEgIT09IHVuZGVmaW5lZCA/IHAueTEgOiBwLnk7CiAgICAgIHIueTIgPSBwLnkyICE9PSB1bmRlZmluZWQgPyBwLnkyIDogcC55OwogICAgfQogICAgd2hpbGUodHJ1ZSkgewogICAgICByZXN1bHQgPSBpdGVyLm5leHQoKTsKICAgICAgaWYoIXJlc3VsdC52YWx1ZSkgYnJlYWs7CiAgICAgIHAgPSB0cChyZXN1bHQudmFsdWUpOwoKICAgICAgci51cGRhdGUocCk7CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIHN0YXRpYyBmcm9tU3RyaW5nKHMpIHsKICAgIC8vY29uc29sZS5sb2coJ0JCb3guZnJvbVN0cmluZycscyk7CiAgICBsZXQgW3gxLCB5MSwgeDIsIHkyXSA9IFsuLi5zLm1hdGNoQWxsKC9bLSsuMC05XSsvZyldLm1hcCgoW21dKSA9PiArbSk7CgogICAgbGV0IHIgPSBuZXcgQkJveCgpOwogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ociwgeyB4MSwgeTEsIHgyLCB5MiB9KTsKICB9CgogICpbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgIGxldCBbeDEsIHgyLCB5MSwgeTJdID0gdGhpczsKICAgIGZvcihsZXQgcHJvcCBvZiBbeDEsIHgyLCB5MSwgeTJdKSB5aWVsZCBwcm9wOwogIH0KfQoKQkJveC5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdCQm94JzsKCmV4cG9ydCBjb25zdCBpc0JCb3ggPSAoYmJveCwgdGVzdEZuID0gKHByb3AsIG5hbWUsIG9iaikgPT4gbmFtZSBpbiBvYmopID0+IGlzT2JqZWN0KGJib3gpICYmIFsneDEnLCAneTEnLCAneDInLCAneTInXS5ldmVyeShuID0+IHRlc3RGbihiYm94W25dLCBuLCBiYm94KSk7CgpleHBvcnQgZGVmYXVsdCBCQm94OwoAAAAAAAAAAAwbAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAgwYAAAAAAACDBgAAAAAAAAAAAAAAAPC/"
				],
				[
					154,
					1,
					"insert",
					{
						"characters": "{"
					},
					"AQAAAEgFAAAAAAAASQUAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAASAUAAAAAAABIBQAAAAAAAAAAAAAAAPC/"
				],
				[
					155,
					1,
					"insert",
					{
						"characters": " objcts"
					},
					"BwAAAEkFAAAAAAAASgUAAAAAAAAAAAAASgUAAAAAAABLBQAAAAAAAAAAAABLBQAAAAAAAEwFAAAAAAAAAAAAAEwFAAAAAAAATQUAAAAAAAAAAAAATQUAAAAAAABOBQAAAAAAAAAAAABOBQAAAAAAAE8FAAAAAAAAAAAAAE8FAAAAAAAAUAUAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAASQUAAAAAAABJBQAAAAAAAAAAAAAAAPC/"
				],
				[
					156,
					3,
					"left_delete",
					null,
					"AwAAAE8FAAAAAAAATwUAAAAAAAABAAAAc04FAAAAAAAATgUAAAAAAAABAAAAdE0FAAAAAAAATQUAAAAAAAABAAAAYw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAUAUAAAAAAABQBQAAAAAAAAAAAAAAAPC/"
				],
				[
					157,
					1,
					"insert",
					{
						"characters": "ects:"
					},
					"BQAAAE0FAAAAAAAATgUAAAAAAAAAAAAATgUAAAAAAABPBQAAAAAAAAAAAABPBQAAAAAAAFAFAAAAAAAAAAAAAFAFAAAAAAAAUQUAAAAAAAAAAAAAUQUAAAAAAABSBQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAATQUAAAAAAABNBQAAAAAAAAAAAAAAAPC/"
				],
				[
					158,
					1,
					"insert",
					{
						"characters": " {}"
					},
					"AwAAAFIFAAAAAAAAUwUAAAAAAAAAAAAAUwUAAAAAAABUBQAAAAAAAAAAAABUBQAAAAAAAFUFAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAUgUAAAAAAABSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					159,
					1,
					"insert",
					{
						"characters": " }"
					},
					"AgAAAFUFAAAAAAAAVgUAAAAAAAAAAAAAVgUAAAAAAABXBQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAVQUAAAAAAABVBQAAAAAAAAAAAAAAAPC/"
				],
				[
					162,
					1,
					"cut",
					null,
					"AQAAAFcFAAAAAAAAVwUAAAAAAAANAAAAJ29iamVjdHMnLCB7fQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAVwUAAAAAAABkBQAAAAAAAAAAAAAAAPC/"
				],
				[
					168,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAL8GAAAAAAAAwAYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvwYAAAAAAAC/BgAAAAAAAAAAAAAAAAAA"
				],
				[
					173,
					1,
					"right_delete",
					null,
					"AQAAAG4GAAAAAAAAbgYAAAAAAAAZAAAAICAgIHRoaXMub2JqZWN0cyA/Pz0ge307Cg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAbgYAAAAAAACHBgAAAAAAAAAAAAAAAAAA"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD2GgAAaW1wb3J0IHsgZGVmaW5lLCB0eXBlcywgaXNPYmplY3QgfSBmcm9tICcuLi9taXNjLmpzJzsKaW1wb3J0IHsgaXNQb2ludCwgUG9pbnQgfSBmcm9tICcuLi9nZW9tL3JlY3QuanMnOwppbXBvcnQgeyBpc1JlY3QsIFJlY3QgfSBmcm9tICcuLi9nZW9tL3JlY3QuanMnOwppbXBvcnQgeyBpc1NpemUsIFNpemUgfSBmcm9tICcuLi9nZW9tL3NpemUuanMnOwoKZXhwb3J0IGNsYXNzIEJCb3ggewogIHN0YXRpYyBmcm9tUG9pbnRzKHB0cykgewogICAgbGV0IHB0ID0gcHRzLnNoaWZ0KCk7CiAgICBsZXQgYmIgPSBuZXcgQkJveChwdC54LCBwdC55LCBwdC54LCBwdC55KTsKICAgIGJiLnVwZGF0ZShwdHMpOwogICAgcmV0dXJuIGJiOwogIH0KCiAgc3RhdGljIGZyb21SZWN0KHJlY3QpIHsKICAgIHJldHVybiBuZXcgQkJveChyZWN0LngsIHJlY3QueSwgcmVjdC54ICsgcmVjdC53aWR0aCwgcmVjdC55ICsgcmVjdC5oZWlnaHQpOwogIH0KCiAgc3RhdGljIGNyZWF0ZShhcmcpIHsKICAgIGlmKGlzUmVjdChhcmcpKSByZXR1cm4gbmV3IEJCb3gocmVjdC54LCByZWN0LnksIHJlY3QueCArIHJlY3Qud2lkdGgsIHJlY3QueSArIHJlY3QuaGVpZ2h0KTsKCiAgICBpZihBcnJheS5pc0FycmF5KGFyZykgfHwgdHlwZXMuaXNJdGVyYWJsZShhcmcpKSByZXR1cm4gQkJveC5vZiguLi5hcmcpOwogIH0KCiAgc3RhdGljIG9mKC4uLmFyZ3MpIHsKICAgIHJldHVybiBCQm94LmZyb20oYXJncyk7CiAgfQoKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBpZihhcmdzLmxlbmd0aCA9PSA0ICYmIGFyZ3MuZXZlcnkoYXJnID0+IE51bWJlci5pc0Zpbml0ZShhcmcpKSkgewogICAgICBjb25zdCBbeDEsIHkxLCB4MiwgeTJdID0gYXJnczsKCiAgICAgIHRoaXMueDEgPSBNYXRoLm1pbih4MSwgeDIpOwogICAgICB0aGlzLnkxID0gTWF0aC5taW4oeTEsIHkyKTsKICAgICAgdGhpcy54MiA9IE1hdGgubWF4KHgxLCB4Mik7CiAgICAgIHRoaXMueTIgPSBNYXRoLm1heCh5MSwgeTIpOwogICAgfSBlbHNlIGlmKGlzQkJveChhcmdzWzBdKSkgewogICAgICBjb25zdCB7IHgxLCB5MSwgeDIsIHkyIH0gPSBhcmdzWzBdOwogICAgICB0aGlzLngxID0geDE7CiAgICAgIHRoaXMueTEgPSB5MTsKICAgICAgdGhpcy54MiA9IHgyOwogICAgICB0aGlzLnkyID0geTI7CiAgICB9IGVsc2UgewogICAgICB0aGlzLngxID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnkxID0gdW5kZWZpbmVkOwogICAgICB0aGlzLngyID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnkyID0gdW5kZWZpbmVkOwogICAgICBpZihhcmdzLmxlbmd0aCA+IDApIHRoaXMudXBkYXRlTGlzdChbLi4uYXJnc10pOwogICAgfQoKICAgIGRlZmluZSh0aGlzLCB7IG9iamVjdHM6IHt9IH0pOwogIH0KCiAgZ2V0T2JqZWN0cygpIHsKICAgIHJldHVybiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHRoaXMub2JqZWN0cykpOwogIH0KCiAgdXBkYXRlTGlzdChsaXN0LCBvZmZzZXQgPSAwLjAsIG9iakZuID0gaXRlbSA9PiBpdGVtLCB0ID0gYSA9PiBhKSB7CiAgICBmb3IobGV0IGFyZyBvZiBsaXN0KSB0aGlzLnVwZGF0ZSh0KGFyZyksIG9mZnNldCwgb2JqRm4oYXJnKSk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIHVwZGF0ZShhcmcsIG9mZnNldCA9IDAuMCwgb2JqID0gbnVsbCkgewogICAgLy9jb25zb2xlLmxvZygnQkJveC51cGRhdGUnLCB7IGFyZywgb2Zmc2V0LCBvYmogfSk7CgogICAgaWYoQXJyYXkuaXNBcnJheShhcmcpKSByZXR1cm4gdGhpcy51cGRhdGVMaXN0KGFyZywgb2Zmc2V0KTsKICAgIGVsc2UgaWYoaXNPYmplY3QoYXJnKSkgewogICAgICBpZih0eXBlb2YgYXJnLmJib3ggPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGFyZyA9IGFyZy5iYm94KCk7CiAgICAgIH0gZWxzZSBpZihpc1BvaW50KGFyZykpIHsKICAgICAgICB0aGlzLnVwZGF0ZVhZKGFyZy54LCBhcmcueSwgb2Zmc2V0LCBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgIH0gZWxzZSBpZihpc0JCb3goYXJnLm9iamVjdHMpKSB7CiAgICAgICAgdGhpcy51cGRhdGVMaXN0KE9iamVjdC52YWx1ZXMoYXJnLm9iamVjdHMpLCBvZmZzZXQpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmKGFyZy54MiAhPT0gdW5kZWZpbmVkICYmIGFyZy55MiAhPSB1bmRlZmluZWQpIHRoaXMudXBkYXRlWFkoYXJnLngyLCBhcmcueTIsIDAsIG5hbWUgPT4gKHRoaXMub2JqZWN0c1tuYW1lXSA9IG9iaiB8fCBhcmcpKTsKICAgICAgICBpZihhcmcueDEgIT09IHVuZGVmaW5lZCAmJiBhcmcueTEgIT0gdW5kZWZpbmVkKSB0aGlzLnVwZGF0ZVhZKGFyZy54MSwgYXJnLnkxLCAwLCBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgICAgaWYoYXJnLnggIT09IHVuZGVmaW5lZCAmJiBhcmcueSAhPSB1bmRlZmluZWQpIHRoaXMudXBkYXRlWFkoYXJnLngsIGFyZy55LCBvZmZzZXQsIG5hbWUgPT4gKHRoaXMub2JqZWN0c1tuYW1lXSA9IG9iaiB8fCBhcmcpKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgdXBkYXRlWFkoeCwgeSwgb2Zmc2V0ID0gMCwgc2V0ID0gKCkgPT4ge30pIHsKICAgIGxldCB1cGRhdGVkID0ge307CiAgICBpZih0aGlzLngxID09PSB1bmRlZmluZWQgfHwgdGhpcy54MSA+IHggLSBvZmZzZXQpIHsKICAgICAgdGhpcy54MSA9IHggLSBvZmZzZXQ7CiAgICAgIHNldCgneDEnKTsKICAgIH0KICAgIGlmKHRoaXMueDIgPT09IHVuZGVmaW5lZCB8fCB0aGlzLngyIDwgeCArIG9mZnNldCkgewogICAgICB0aGlzLngyID0geCArIG9mZnNldDsKICAgICAgc2V0KCd4MicpOwogICAgfQogICAgaWYodGhpcy55MSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMueTEgPiB5IC0gb2Zmc2V0KSB7CiAgICAgIHRoaXMueTEgPSB5IC0gb2Zmc2V0OwogICAgICBzZXQoJ3kxJyk7CiAgICB9CiAgICBpZih0aGlzLnkyID09PSB1bmRlZmluZWQgfHwgdGhpcy55MiA8IHkgKyBvZmZzZXQpIHsKICAgICAgdGhpcy55MiA9IHkgKyBvZmZzZXQ7CiAgICAgIHNldCgneTInKTsKICAgIH0KICAgIC8vaWYoT2JqZWN0LmtleXModXBkYXRlZCkpIGNvbnNvbGUubG9nKGBCQm94IHVwZGF0ZSAke3h9LCR7eX0gYCwgdXBkYXRlZCk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIGdldCBjZW50ZXIoKSB7CiAgICByZXR1cm4gbmV3IFBvaW50KHsKICAgICAgeDogdGhpcy54ICsgdGhpcy53aWR0aCAvIDIsCiAgICAgIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMgogICAgfSk7CiAgfQoKICByZWxhdGl2ZV90byh4LCB5KSB7CiAgICByZXR1cm4gbmV3IEJCb3godGhpcy54MSAtIHgsIHRoaXMueTEgLSB5LCB0aGlzLngyIC0geCwgdGhpcy55MiAtIHkpOwogIH0KCiAgZ2V0IHgoKSB7CiAgICByZXR1cm4gdGhpcy54MTsKICB9CgogIGdldCB3aWR0aCgpIHsKICAgIHJldHVybiAvKk1hdGguYWJzKi8gdGhpcy54MiAtIHRoaXMueDE7CiAgfQoKICBnZXQgeSgpIHsKICAgIHJldHVybiB0aGlzLnkxIDwgdGhpcy55MiA/IHRoaXMueTEgOiB0aGlzLnkyOwogIH0KCiAgZ2V0IGhlaWdodCgpIHsKICAgIHJldHVybiAvKk1hdGguYWJzKi8gdGhpcy55MiAtIHRoaXMueTE7CiAgfQoKICBzZXQgeCh4KSB7CiAgICBsZXQgaXggPSB4IC0gdGhpcy54MTsKICAgIHRoaXMueDEgKz0gaXg7CiAgICB0aGlzLngyICs9IGl4OwogIH0KCiAgc2V0IHdpZHRoKHcpIHsKICAgIHRoaXMueDIgPSB0aGlzLngxICsgdzsKICB9CgogIHNldCB5KHkpIHsKICAgIGxldCBpeSA9IHkgLSB0aGlzLnkxOwogICAgdGhpcy55MSArPSBpeTsKICAgIHRoaXMueTIgKz0gaXk7CiAgfQoKICBzZXQgaGVpZ2h0KGgpIHsKICAgIHRoaXMueTIgPSB0aGlzLnkxICsgaDsKICB9CgogIGdldCByZWN0KCkgewogICAgY29uc3QgeyB4MSwgeTEsIHgyLCB5MiB9ID0gdGhpczsKICAgIHJldHVybiB7CiAgICAgIHg6IHgxLAogICAgICB5OiB5MSwKICAgICAgd2lkdGg6IHgyIC0geDEsCiAgICAgIGhlaWdodDogeTIgLSB5MQogICAgfTsKICB9CgogIGdldCBzaXplKCkgewogICAgY29uc3QgeyB4MSwgeTEsIHgyLCB5MiB9ID0gdGhpczsKICAgIHJldHVybiBuZXcgU2l6ZSh4MiAtIHgxLCB5MiAtIHkxKTsKICB9CgogIHRvUmVjdChwcm90bykgewogICAgbGV0IHIgPSB0aGlzLnJlY3Q7CiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHIsIHByb3RvIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIH0KCiAgdG9TaXplKGN0b3IgPSBvYmogPT4gT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iaiwgT2JqZWN0LnByb3RvdHlwZSkpIHsKICAgIGxldCB3aWR0aCA9IHRoaXMueDIgLSB0aGlzLngxOwogICAgbGV0IGhlaWdodCA9IHRoaXMueTIgLSB0aGlzLnkxOwogICAgcmV0dXJuIGN0b3IoeyB3aWR0aCwgaGVpZ2h0IH0pOwogIH0KCiAgdG9PYmplY3QoKSB7CiAgICBjb25zdCB7IHgxLCB5MSwgeDIsIHkyIH0gPSB0aGlzOwogICAgbGV0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBvYmoueDEgPSB4MTsKICAgIG9iai55MSA9IHkxOwogICAgb2JqLngyID0geDI7CiAgICBvYmoueTIgPSB5MjsKICAgIHJldHVybiBvYmo7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIHJldHVybiBgJHt0aGlzLngxfSAke3RoaXMueTF9ICR7dGhpcy54Mn0gJHt0aGlzLnkyfWA7CiAgfQoKICB0b1NWRygpIHsKICAgIHJldHVybiBgJHt0aGlzLngxfSAke3RoaXMueTF9ICR7dGhpcy53aWR0aH0gJHt0aGlzLmhlaWdodH1gOwogIH0KCiAgdHJhbnNmb3JtKGZuID0gYXJnID0+IGFyZywgb3V0KSB7CiAgICBpZighb3V0KSBvdXQgPSB0aGlzOwogICAgZm9yKGxldCBwcm9wIG9mIFsneDEnLCAneTEnLCAneDInLCAneTInXSkgewogICAgICBjb25zdCB2ID0gdGhpc1twcm9wXTsKICAgICAgb3V0W3Byb3BdID0gZm4odik7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9CgogIHJvdW5kKGZuID0gYXJnID0+IE1hdGgucm91bmQoYXJnKSkgewogICAgbGV0IHJldCA9IG5ldyBCQm94KCk7CiAgICB0aGlzLnRyYW5zZm9ybShmbiwgcmV0KTsKICAgIHJldHVybiByZXQ7CiAgfQoKICBtb3ZlKHgsIHkpIHsKICAgIHRoaXMueDEgKz0geDsKICAgIHRoaXMueTEgKz0geTsKICAgIHRoaXMueDIgKz0geDsKICAgIHRoaXMueTIgKz0geTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgb3V0c2V0KC4uLmFyZ3MpIHsKICAgIGlmKGFyZ3MubGVuZ3RoID49IDQpIHsKICAgICAgY29uc3QgW3RvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdF0gPSBhcmdzOwogICAgICByZXR1cm4gbmV3IEJCb3godGhpcy54MSAtIGxlZnQsIHRoaXMueTEgLSB0b3AsIHRoaXMueDIgKyByaWdodCwgdGhpcy55MiArIGJvdHRvbSk7CiAgICB9CiAgICBpZihhcmdzLmxlbmd0aCA+PSAyKSB7CiAgICAgIGNvbnN0IFt2ZXJ0aWNhbCwgaG9yaXpvbnRhbF0gPSBhcmdzOwogICAgICByZXR1cm4gdGhpcy5vdXRzZXQodmVydGljYWwsIGhvcml6b250YWwsIHZlcnRpY2FsLCBob3Jpem9udGFsKTsKICAgIH0KICAgIHJldHVybiB0aGlzLm91dHNldChhcmdzWzBdLCBhcmdzWzBdLCBhcmdzWzBdLCBhcmdzWzBdKTsKICB9CgogIGluc2V0KC4uLmFyZ3MpIHsKICAgIHJldHVybiB0aGlzLm91dHNldCguLi5hcmdzLm1hcChuID0+IC1uKSk7CiAgfQoKICBzdGF0aWMgZnJvbShpdGVyLCB0cCA9IHAgPT4gcCkgewogICAgaWYodHlwZW9mIGl0ZXIgPT0gJ3N0cmluZycpIHsKICAgICAgbGV0IFt4MSwgeTEsIHgyLCB5Ml0gPSBbLi4uaXRlci5tYXRjaEFsbCgvWy0rLjAtOV0rL2cpXS5tYXAoKFttXSkgPT4gK20pOwogICAgICBpdGVyID0gW3sgeDEsIHkxLCB4MiwgeTIgfV07CiAgICB9CgogICAgaWYodHlwZW9mIGl0ZXIgPT0gJ29iamVjdCcgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdKSBpdGVyID0gaXRlcltTeW1ib2wuaXRlcmF0b3JdKCk7CgogICAgbGV0IHIgPSBuZXcgQkJveCgpOwogICAgbGV0IHJlc3VsdCA9IGl0ZXIubmV4dCgpOwogICAgbGV0IHA7CiAgICBpZihyZXN1bHQudmFsdWUpIHsKICAgICAgcCA9IHRwKHJlc3VsdC52YWx1ZSk7CiAgICAgIHIueDEgPSBwLngxICE9PSB1bmRlZmluZWQgPyBwLngxIDogcC54OwogICAgICByLngyID0gcC54MiAhPT0gdW5kZWZpbmVkID8gcC54MiA6IHAueDsKICAgICAgci55MSA9IHAueTEgIT09IHVuZGVmaW5lZCA/IHAueTEgOiBwLnk7CiAgICAgIHIueTIgPSBwLnkyICE9PSB1bmRlZmluZWQgPyBwLnkyIDogcC55OwogICAgfQogICAgd2hpbGUodHJ1ZSkgewogICAgICByZXN1bHQgPSBpdGVyLm5leHQoKTsKICAgICAgaWYoIXJlc3VsdC52YWx1ZSkgYnJlYWs7CiAgICAgIHAgPSB0cChyZXN1bHQudmFsdWUpOwoKICAgICAgci51cGRhdGUocCk7CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIHN0YXRpYyBmcm9tU3RyaW5nKHMpIHsKICAgIC8vY29uc29sZS5sb2coJ0JCb3guZnJvbVN0cmluZycscyk7CiAgICBsZXQgW3gxLCB5MSwgeDIsIHkyXSA9IFsuLi5zLm1hdGNoQWxsKC9bLSsuMC05XSsvZyldLm1hcCgoW21dKSA9PiArbSk7CgogICAgbGV0IHIgPSBuZXcgQkJveCgpOwogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ociwgeyB4MSwgeTEsIHgyLCB5MiB9KTsKICB9CgogICpbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgIGxldCBbeDEsIHgyLCB5MSwgeTJdID0gdGhpczsKICAgIGZvcihsZXQgcHJvcCBvZiBbeDEsIHgyLCB5MSwgeTJdKSB5aWVsZCBwcm9wOwogIH0KfQoKQkJveC5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdCQm94JzsKCmV4cG9ydCBjb25zdCBpc0JCb3ggPSAoYmJveCwgdGVzdEZuID0gKHByb3AsIG5hbWUsIG9iaikgPT4gbmFtZSBpbiBvYmopID0+IGlzT2JqZWN0KGJib3gpICYmIFsneDEnLCAneTEnLCAneDInLCAneTInXS5ldmVyeShuID0+IHRlc3RGbihiYm94W25dLCBuLCBiYm94KSk7CgpleHBvcnQgZGVmYXVsdCBCQm94OwoAAAAAAAAAAPcaAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAG8UAAAAAAAAcBQAAAAAAAAAAAAAcBQAAAAAAAB2FAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABvFAAAAAAAAG8UAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					4,
					"left_delete",
					null,
					"BAAAAHQUAAAAAAAAdBQAAAAAAAACAAAAICByFAAAAAAAAHIUAAAAAAAAAgAAACAgcBQAAAAAAABwFAAAAAAAAAIAAAAgIG8UAAAAAAAAbxQAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB2FAAAAAAAAHYUAAAAAAAAAAAAAAAA8L8"
				],
				[
					123,
					1,
					"cut",
					null,
					"AQAAAMgYAAAAAAAAyBgAAAAAAADaAAAACiAgc3RhdGljIGZyb21TdHJpbmcocykgewogICAgLy9jb25zb2xlLmxvZygnQkJveC5mcm9tU3RyaW5nJyxzKTsKICAgIGxldCBbeDEsIHkxLCB4MiwgeTJdID0gWy4uLnMubWF0Y2hBbGwoL1stKy4wLTldKy9nKV0ubWFwKChbbV0pID0+ICttKTsKCiAgICBsZXQgciA9IG5ldyBCQm94KCk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyLCB7IHgxLCB5MSwgeDIsIHkyIH0pOwogIH0",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADIGAAAAAAAAKIZAAAAAAAAAAAAAAAA8L8"
				],
				[
					124,
					2,
					"paste",
					null,
					"AgAAAMgYAAAAAAAAohkAAAAAAAAAAAAAohkAAAAAAAB8GgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADIGAAAAAAAAMgYAAAAAAAAAAAAAAAA8L8"
				],
				[
					127,
					1,
					"insert",
					{
						"characters": "SVG"
					},
					"BAAAALAZAAAAAAAAsRkAAAAAAAAAAAAAsRkAAAAAAACxGQAAAAAAAAYAAABTdHJpbmexGQAAAAAAALIZAAAAAAAAAAAAALIZAAAAAAAAsxkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwGQAAAAAAALYZAAAAAAAAAAAAAAAA8L8"
				],
				[
					134,
					1,
					"right_delete",
					null,
					"AQAAAOsZAAAAAAAA6xkAAAAAAAABAAAAMQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADrGQAAAAAAAOsZAAAAAAAAAAAAAAAA8L8"
				],
				[
					136,
					1,
					"right_delete",
					null,
					"AQAAAO4ZAAAAAAAA7hkAAAAAAAABAAAAMQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuGQAAAAAAAO4ZAAAAAAAAAAAAAAAA8L8"
				],
				[
					139,
					1,
					"insert",
					{
						"characters": "wd"
					},
					"AgAAAPAZAAAAAAAA8RkAAAAAAAAAAAAA8RkAAAAAAADyGQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwGQAAAAAAAPAZAAAAAAAAAAAAAAAA8L8"
				],
				[
					140,
					1,
					"left_delete",
					null,
					"AQAAAPEZAAAAAAAA8RkAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyGQAAAAAAAPIZAAAAAAAAAAAAAAAA8L8"
				],
				[
					141,
					1,
					"insert",
					{
						"characters": "idth,e"
					},
					"BgAAAPEZAAAAAAAA8hkAAAAAAAAAAAAA8hkAAAAAAADzGQAAAAAAAAAAAADzGQAAAAAAAPQZAAAAAAAAAAAAAPQZAAAAAAAA9RkAAAAAAAAAAAAA9RkAAAAAAAD2GQAAAAAAAAAAAAD2GQAAAAAAAPcZAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADxGQAAAAAAAPEZAAAAAAAAAAAAAAAA8L8"
				],
				[
					142,
					1,
					"left_delete",
					null,
					"AQAAAPYZAAAAAAAA9hkAAAAAAAABAAAAZQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3GQAAAAAAAPcZAAAAAAAAAAAAAAAA8L8"
				],
				[
					143,
					1,
					"insert",
					{
						"characters": "heihgt"
					},
					"BgAAAPYZAAAAAAAA9xkAAAAAAAAAAAAA9xkAAAAAAAD4GQAAAAAAAAAAAAD4GQAAAAAAAPkZAAAAAAAAAAAAAPkZAAAAAAAA+hkAAAAAAAAAAAAA+hkAAAAAAAD7GQAAAAAAAAAAAAD7GQAAAAAAAPwZAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2GQAAAAAAAPYZAAAAAAAAAAAAAAAA8L8"
				],
				[
					144,
					3,
					"left_delete",
					null,
					"AwAAAPsZAAAAAAAA+xkAAAAAAAABAAAAdPoZAAAAAAAA+hkAAAAAAAABAAAAZ/kZAAAAAAAA+RkAAAAAAAABAAAAaA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8GQAAAAAAAPwZAAAAAAAAAAAAAAAA8L8"
				],
				[
					145,
					1,
					"insert",
					{
						"characters": "ght"
					},
					"AwAAAPkZAAAAAAAA+hkAAAAAAAAAAAAA+hkAAAAAAAD7GQAAAAAAAAAAAAD7GQAAAAAAAPwZAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5GQAAAAAAAPkZAAAAAAAAAAAAAAAA8L8"
				],
				[
					146,
					6,
					"right_delete",
					null,
					"BgAAAPwZAAAAAAAA/BkAAAAAAAABAAAAePwZAAAAAAAA/BkAAAAAAAABAAAAMvwZAAAAAAAA/BkAAAAAAAABAAAALPwZAAAAAAAA/BkAAAAAAAABAAAAIPwZAAAAAAAA/BkAAAAAAAABAAAAefwZAAAAAAAA/BkAAAAAAAABAAAAMg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8GQAAAAAAAPwZAAAAAAAAAAAAAAAA8L8"
				],
				[
					168,
					1,
					"insert",
					{
						"characters": "x,y,x"
					},
					"BQAAAEYaAAAAAAAARxoAAAAAAAAAAAAARxoAAAAAAABIGgAAAAAAAAAAAABIGgAAAAAAAEkaAAAAAAAAAAAAAEkaAAAAAAAAShoAAAAAAAAAAAAAShoAAAAAAABLGgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABGGgAAAAAAAEYaAAAAAAAAAAAAAAAA8L8"
				],
				[
					169,
					1,
					"insert",
					{
						"characters": "+width,y+"
					},
					"CQAAAEsaAAAAAAAATBoAAAAAAAAAAAAATBoAAAAAAABNGgAAAAAAAAAAAABNGgAAAAAAAE4aAAAAAAAAAAAAAE4aAAAAAAAATxoAAAAAAAAAAAAATxoAAAAAAABQGgAAAAAAAAAAAABQGgAAAAAAAFEaAAAAAAAAAAAAAFEaAAAAAAAAUhoAAAAAAAAAAAAAUhoAAAAAAABTGgAAAAAAAAAAAABTGgAAAAAAAFQaAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABLGgAAAAAAAEsaAAAAAAAAAAAAAAAA8L8"
				],
				[
					170,
					1,
					"insert",
					{
						"characters": "height"
					},
					"BgAAAFQaAAAAAAAAVRoAAAAAAAAAAAAAVRoAAAAAAABWGgAAAAAAAAAAAABWGgAAAAAAAFcaAAAAAAAAAAAAAFcaAAAAAAAAWBoAAAAAAAAAAAAAWBoAAAAAAABZGgAAAAAAAAAAAABZGgAAAAAAAFoaAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABUGgAAAAAAAFQaAAAAAAAAAAAAAAAA8L8"
				],
				[
					174,
					1,
					"insert",
					{
						"characters": "return"
					},
					"BwAAADUaAAAAAAAANhoAAAAAAAAAAAAANhoAAAAAAAA2GgAAAAAAAAcAAABsZXQgciA9NhoAAAAAAAA3GgAAAAAAAAAAAAA3GgAAAAAAADgaAAAAAAAAAAAAADgaAAAAAAAAORoAAAAAAAAAAAAAORoAAAAAAAA6GgAAAAAAAAAAAAA6GgAAAAAAADsaAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA8GgAAAAAAADUaAAAAAAAAAAAAAAAAQEA"
				],
				[
					179,
					1,
					"right_delete",
					null,
					"AQAAAFwaAAAAAAAAXBoAAAAAAAAxAAAAICAgIHJldHVybiBPYmplY3QuYXNzaWduKHIsIHsgeDEsIHkxLCB4MiwgeTIgfSk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABcGgAAAAAAAI0aAAAAAAAAAAAAAAAAAAA"
				],
				[
					182,
					1,
					"right_delete",
					null,
					"AQAAALkZAAAAAAAAuRkAAAAAAAAoAAAAICAgIC8vY29uc29sZS5sb2coJ0JCb3guZnJvbVN0cmluZycscyk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC5GQAAAAAAAOEZAAAAAAAAAAAAAAAAAAA"
				],
				[
					184,
					1,
					"left_delete",
					null,
					"AQAAAAcaAAAAAAAABxoAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIGgAAAAAAAAgaAAAAAAAAAAAAAAAAAAA"
				],
				[
					186,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKIZAAAAAAAAoxkAAAAAAAAAAAAAoxkAAAAAAAClGQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACiGQAAAAAAAKIZAAAAAAAAAAAAAACAg0A"
				],
				[
					191,
					1,
					"right_delete",
					null,
					"AgAAAOQYAAAAAAAA5BgAAAAAAAAoAAAAICAvL2NvbnNvbGUubG9nKCdCQm94LmZyb21TdHJpbmcnLHMpOwogIHsZAAAAAAAAexkAAAAAAAACAAAAICA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkGAAAAAAAAAwZAAAAAAAAAAAAAAAAMEA"
				],
				[
					194,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABkGwAAaW1wb3J0IHsgZGVmaW5lLCB0eXBlcywgaXNPYmplY3QgfSBmcm9tICcuLi9taXNjLmpzJzsKaW1wb3J0IHsgaXNQb2ludCwgUG9pbnQgfSBmcm9tICcuLi9nZW9tL3BvaW50LmpzJzsKaW1wb3J0IHsgaXNSZWN0LCBSZWN0IH0gZnJvbSAnLi4vZ2VvbS9yZWN0LmpzJzsKaW1wb3J0IHsgaXNTaXplLCBTaXplIH0gZnJvbSAnLi4vZ2VvbS9zaXplLmpzJzsKCmV4cG9ydCBjbGFzcyBCQm94IHsKICBzdGF0aWMgZnJvbVBvaW50cyhwdHMpIHsKICAgIGxldCBwdCA9IHB0cy5zaGlmdCgpOwogICAgbGV0IGJiID0gbmV3IEJCb3gocHQueCwgcHQueSwgcHQueCwgcHQueSk7CiAgICBiYi51cGRhdGUocHRzKTsKICAgIHJldHVybiBiYjsKICB9CgogIHN0YXRpYyBmcm9tUmVjdChyZWN0KSB7CiAgICByZXR1cm4gbmV3IEJCb3gocmVjdC54LCByZWN0LnksIHJlY3QueCArIHJlY3Qud2lkdGgsIHJlY3QueSArIHJlY3QuaGVpZ2h0KTsKICB9CgogIHN0YXRpYyBjcmVhdGUoYXJnKSB7CiAgICBpZihpc1JlY3QoYXJnKSkgcmV0dXJuIG5ldyBCQm94KHJlY3QueCwgcmVjdC55LCByZWN0LnggKyByZWN0LndpZHRoLCByZWN0LnkgKyByZWN0LmhlaWdodCk7CgogICAgaWYoQXJyYXkuaXNBcnJheShhcmcpIHx8IHR5cGVzLmlzSXRlcmFibGUoYXJnKSkgcmV0dXJuIEJCb3gub2YoLi4uYXJnKTsKICB9CgogIHN0YXRpYyBvZiguLi5hcmdzKSB7CiAgICByZXR1cm4gQkJveC5mcm9tKGFyZ3MpOwogIH0KCiAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgaWYoYXJncy5sZW5ndGggPT0gNCAmJiBhcmdzLmV2ZXJ5KGFyZyA9PiBOdW1iZXIuaXNGaW5pdGUoYXJnKSkpIHsKICAgICAgY29uc3QgW3gxLCB5MSwgeDIsIHkyXSA9IGFyZ3M7CgogICAgICB0aGlzLngxID0gTWF0aC5taW4oeDEsIHgyKTsKICAgICAgdGhpcy55MSA9IE1hdGgubWluKHkxLCB5Mik7CiAgICAgIHRoaXMueDIgPSBNYXRoLm1heCh4MSwgeDIpOwogICAgICB0aGlzLnkyID0gTWF0aC5tYXgoeTEsIHkyKTsKICAgIH0gZWxzZSBpZihpc0JCb3goYXJnc1swXSkpIHsKICAgICAgY29uc3QgeyB4MSwgeTEsIHgyLCB5MiB9ID0gYXJnc1swXTsKICAgICAgdGhpcy54MSA9IHgxOwogICAgICB0aGlzLnkxID0geTE7CiAgICAgIHRoaXMueDIgPSB4MjsKICAgICAgdGhpcy55MiA9IHkyOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy54MSA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy55MSA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy54MiA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy55MiA9IHVuZGVmaW5lZDsKICAgICAgaWYoYXJncy5sZW5ndGggPiAwKSB0aGlzLnVwZGF0ZUxpc3QoWy4uLmFyZ3NdKTsKICAgIH0KCiAgICBkZWZpbmUodGhpcywgeyBvYmplY3RzOiB7fSB9KTsKICB9CgogIGdldE9iamVjdHMoKSB7CiAgICByZXR1cm4gbmV3IE1hcChPYmplY3QuZW50cmllcyh0aGlzLm9iamVjdHMpKTsKICB9CgogIHVwZGF0ZUxpc3QobGlzdCwgb2Zmc2V0ID0gMC4wLCBvYmpGbiA9IGl0ZW0gPT4gaXRlbSwgdCA9IGEgPT4gYSkgewogICAgZm9yKGxldCBhcmcgb2YgbGlzdCkgdGhpcy51cGRhdGUodChhcmcpLCBvZmZzZXQsIG9iakZuKGFyZykpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICB1cGRhdGUoYXJnLCBvZmZzZXQgPSAwLjAsIG9iaiA9IG51bGwpIHsKICAgIC8vY29uc29sZS5sb2coJ0JCb3gudXBkYXRlJywgeyBhcmcsIG9mZnNldCwgb2JqIH0pOwoKICAgIGlmKEFycmF5LmlzQXJyYXkoYXJnKSkgcmV0dXJuIHRoaXMudXBkYXRlTGlzdChhcmcsIG9mZnNldCk7CiAgICBlbHNlIGlmKGlzT2JqZWN0KGFyZykpIHsKICAgICAgaWYodHlwZW9mIGFyZy5iYm94ID09ICdmdW5jdGlvbicpIHsKICAgICAgICBhcmcgPSBhcmcuYmJveCgpOwogICAgICB9IGVsc2UgaWYoaXNQb2ludChhcmcpKSB7CiAgICAgICAgdGhpcy51cGRhdGVYWShhcmcueCwgYXJnLnksIG9mZnNldCwgbmFtZSA9PiAodGhpcy5vYmplY3RzW25hbWVdID0gb2JqIHx8IGFyZykpOwogICAgICB9IGVsc2UgaWYoaXNCQm94KGFyZy5vYmplY3RzKSkgewogICAgICAgIHRoaXMudXBkYXRlTGlzdChPYmplY3QudmFsdWVzKGFyZy5vYmplY3RzKSwgb2Zmc2V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZihhcmcueDIgIT09IHVuZGVmaW5lZCAmJiBhcmcueTIgIT0gdW5kZWZpbmVkKSB0aGlzLnVwZGF0ZVhZKGFyZy54MiwgYXJnLnkyLCAwLCBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgICAgaWYoYXJnLngxICE9PSB1bmRlZmluZWQgJiYgYXJnLnkxICE9IHVuZGVmaW5lZCkgdGhpcy51cGRhdGVYWShhcmcueDEsIGFyZy55MSwgMCwgbmFtZSA9PiAodGhpcy5vYmplY3RzW25hbWVdID0gb2JqIHx8IGFyZykpOwogICAgICAgIGlmKGFyZy54ICE9PSB1bmRlZmluZWQgJiYgYXJnLnkgIT0gdW5kZWZpbmVkKSB0aGlzLnVwZGF0ZVhZKGFyZy54LCBhcmcueSwgb2Zmc2V0LCBuYW1lID0+ICh0aGlzLm9iamVjdHNbbmFtZV0gPSBvYmogfHwgYXJnKSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9CgogIHVwZGF0ZVhZKHgsIHksIG9mZnNldCA9IDAsIHNldCA9ICgpID0+IHt9KSB7CiAgICBsZXQgdXBkYXRlZCA9IHt9OwogICAgaWYodGhpcy54MSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMueDEgPiB4IC0gb2Zmc2V0KSB7CiAgICAgIHRoaXMueDEgPSB4IC0gb2Zmc2V0OwogICAgICBzZXQoJ3gxJyk7CiAgICB9CiAgICBpZih0aGlzLngyID09PSB1bmRlZmluZWQgfHwgdGhpcy54MiA8IHggKyBvZmZzZXQpIHsKICAgICAgdGhpcy54MiA9IHggKyBvZmZzZXQ7CiAgICAgIHNldCgneDInKTsKICAgIH0KICAgIGlmKHRoaXMueTEgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnkxID4geSAtIG9mZnNldCkgewogICAgICB0aGlzLnkxID0geSAtIG9mZnNldDsKICAgICAgc2V0KCd5MScpOwogICAgfQogICAgaWYodGhpcy55MiA9PT0gdW5kZWZpbmVkIHx8IHRoaXMueTIgPCB5ICsgb2Zmc2V0KSB7CiAgICAgIHRoaXMueTIgPSB5ICsgb2Zmc2V0OwogICAgICBzZXQoJ3kyJyk7CiAgICB9CiAgICAvL2lmKE9iamVjdC5rZXlzKHVwZGF0ZWQpKSBjb25zb2xlLmxvZyhgQkJveCB1cGRhdGUgJHt4fSwke3l9IGAsIHVwZGF0ZWQpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBnZXQgY2VudGVyKCkgewogICAgcmV0dXJuIG5ldyBQb2ludCh7CiAgICAgIHg6IHRoaXMueCArIHRoaXMud2lkdGggLyAyLAogICAgICB5OiB0aGlzLnkgKyB0aGlzLmhlaWdodCAvIDIKICAgIH0pOwogIH0KCiAgcmVsYXRpdmVfdG8oeCwgeSkgewogICAgcmV0dXJuIG5ldyBCQm94KHRoaXMueDEgLSB4LCB0aGlzLnkxIC0geSwgdGhpcy54MiAtIHgsIHRoaXMueTIgLSB5KTsKICB9CgogIGdldCB4KCkgewogICAgcmV0dXJuIHRoaXMueDE7CiAgfQoKICBnZXQgd2lkdGgoKSB7CiAgICByZXR1cm4gLypNYXRoLmFicyovIHRoaXMueDIgLSB0aGlzLngxOwogIH0KCiAgZ2V0IHkoKSB7CiAgICByZXR1cm4gdGhpcy55MSA8IHRoaXMueTIgPyB0aGlzLnkxIDogdGhpcy55MjsKICB9CgogIGdldCBoZWlnaHQoKSB7CiAgICByZXR1cm4gLypNYXRoLmFicyovIHRoaXMueTIgLSB0aGlzLnkxOwogIH0KCiAgc2V0IHgoeCkgewogICAgbGV0IGl4ID0geCAtIHRoaXMueDE7CiAgICB0aGlzLngxICs9IGl4OwogICAgdGhpcy54MiArPSBpeDsKICB9CgogIHNldCB3aWR0aCh3KSB7CiAgICB0aGlzLngyID0gdGhpcy54MSArIHc7CiAgfQoKICBzZXQgeSh5KSB7CiAgICBsZXQgaXkgPSB5IC0gdGhpcy55MTsKICAgIHRoaXMueTEgKz0gaXk7CiAgICB0aGlzLnkyICs9IGl5OwogIH0KCiAgc2V0IGhlaWdodChoKSB7CiAgICB0aGlzLnkyID0gdGhpcy55MSArIGg7CiAgfQoKICBnZXQgcmVjdCgpIHsKICAgIGNvbnN0IHsgeDEsIHkxLCB4MiwgeTIgfSA9IHRoaXM7CiAgICByZXR1cm4gewogICAgICB4OiB4MSwKICAgICAgeTogeTEsCiAgICAgIHdpZHRoOiB4MiAtIHgxLAogICAgICBoZWlnaHQ6IHkyIC0geTEKICAgIH07CiAgfQoKICBnZXQgc2l6ZSgpIHsKICAgIGNvbnN0IHsgeDEsIHkxLCB4MiwgeTIgfSA9IHRoaXM7CiAgICByZXR1cm4gbmV3IFNpemUoeDIgLSB4MSwgeTIgLSB5MSk7CiAgfQoKICB0b1JlY3QocHJvdG8pIHsKICAgIGxldCByID0gdGhpcy5yZWN0OwogICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihyLCBwcm90byB8fCBPYmplY3QucHJvdG90eXBlKTsKICB9CgogIHRvU2l6ZShjdG9yID0gb2JqID0+IE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIE9iamVjdC5wcm90b3R5cGUpKSB7CiAgICBsZXQgd2lkdGggPSB0aGlzLngyIC0gdGhpcy54MTsKICAgIGxldCBoZWlnaHQgPSB0aGlzLnkyIC0gdGhpcy55MTsKICAgIHJldHVybiBjdG9yKHsgd2lkdGgsIGhlaWdodCB9KTsKICB9CgogIHRvT2JqZWN0KCkgewogICAgY29uc3QgeyB4MSwgeTEsIHgyLCB5MiB9ID0gdGhpczsKICAgIGxldCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgb2JqLngxID0geDE7CiAgICBvYmoueTEgPSB5MTsKICAgIG9iai54MiA9IHgyOwogICAgb2JqLnkyID0geTI7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gYCR7dGhpcy54MX0gJHt0aGlzLnkxfSAke3RoaXMueDJ9ICR7dGhpcy55Mn1gOwogIH0KCiAgdG9TVkcoKSB7CiAgICByZXR1cm4gYCR7dGhpcy54MX0gJHt0aGlzLnkxfSAke3RoaXMud2lkdGh9ICR7dGhpcy5oZWlnaHR9YDsKICB9CgogIHRyYW5zZm9ybShmbiA9IGFyZyA9PiBhcmcsIG91dCkgewogICAgaWYoIW91dCkgb3V0ID0gdGhpczsKICAgIGZvcihsZXQgcHJvcCBvZiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJ10pIHsKICAgICAgY29uc3QgdiA9IHRoaXNbcHJvcF07CiAgICAgIG91dFtwcm9wXSA9IGZuKHYpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICByb3VuZChmbiA9IGFyZyA9PiBNYXRoLnJvdW5kKGFyZykpIHsKICAgIGxldCByZXQgPSBuZXcgQkJveCgpOwogICAgdGhpcy50cmFuc2Zvcm0oZm4sIHJldCk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgbW92ZSh4LCB5KSB7CiAgICB0aGlzLngxICs9IHg7CiAgICB0aGlzLnkxICs9IHk7CiAgICB0aGlzLngyICs9IHg7CiAgICB0aGlzLnkyICs9IHk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIG91dHNldCguLi5hcmdzKSB7CiAgICBpZihhcmdzLmxlbmd0aCA+PSA0KSB7CiAgICAgIGNvbnN0IFt0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRdID0gYXJnczsKICAgICAgcmV0dXJuIG5ldyBCQm94KHRoaXMueDEgLSBsZWZ0LCB0aGlzLnkxIC0gdG9wLCB0aGlzLngyICsgcmlnaHQsIHRoaXMueTIgKyBib3R0b20pOwogICAgfQogICAgaWYoYXJncy5sZW5ndGggPj0gMikgewogICAgICBjb25zdCBbdmVydGljYWwsIGhvcml6b250YWxdID0gYXJnczsKICAgICAgcmV0dXJuIHRoaXMub3V0c2V0KHZlcnRpY2FsLCBob3Jpem9udGFsLCB2ZXJ0aWNhbCwgaG9yaXpvbnRhbCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5vdXRzZXQoYXJnc1swXSwgYXJnc1swXSwgYXJnc1swXSwgYXJnc1swXSk7CiAgfQoKICBpbnNldCguLi5hcmdzKSB7CiAgICByZXR1cm4gdGhpcy5vdXRzZXQoLi4uYXJncy5tYXAobiA9PiAtbikpOwogIH0KCiAgc3RhdGljIGZyb20oaXRlciwgdHAgPSBwID0+IHApIHsKICAgIGlmKHR5cGVvZiBpdGVyID09ICdzdHJpbmcnKSB7CiAgICAgIGxldCBbeDEsIHkxLCB4MiwgeTJdID0gWy4uLml0ZXIubWF0Y2hBbGwoL1stKy4wLTldKy9nKV0ubWFwKChbbV0pID0+ICttKTsKICAgICAgaXRlciA9IFt7IHgxLCB5MSwgeDIsIHkyIH1dOwogICAgfQoKICAgIGlmKHR5cGVvZiBpdGVyID09ICdvYmplY3QnICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSkgaXRlciA9IGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSgpOwoKICAgIGxldCByID0gbmV3IEJCb3goKTsKICAgIGxldCByZXN1bHQgPSBpdGVyLm5leHQoKTsKICAgIGxldCBwOwogICAgaWYocmVzdWx0LnZhbHVlKSB7CiAgICAgIHAgPSB0cChyZXN1bHQudmFsdWUpOwogICAgICByLngxID0gcC54MSAhPT0gdW5kZWZpbmVkID8gcC54MSA6IHAueDsKICAgICAgci54MiA9IHAueDIgIT09IHVuZGVmaW5lZCA/IHAueDIgOiBwLng7CiAgICAgIHIueTEgPSBwLnkxICE9PSB1bmRlZmluZWQgPyBwLnkxIDogcC55OwogICAgICByLnkyID0gcC55MiAhPT0gdW5kZWZpbmVkID8gcC55MiA6IHAueTsKICAgIH0KICAgIHdoaWxlKHRydWUpIHsKICAgICAgcmVzdWx0ID0gaXRlci5uZXh0KCk7CiAgICAgIGlmKCFyZXN1bHQudmFsdWUpIGJyZWFrOwogICAgICBwID0gdHAocmVzdWx0LnZhbHVlKTsKCiAgICAgIHIudXBkYXRlKHApOwogICAgfQogICAgcmV0dXJuIHI7CiAgfQoKICBzdGF0aWMgZnJvbVN0cmluZyhzKSB7CiAgICBsZXQgW3gxLCB5MSwgeDIsIHkyXSA9IFsuLi5zLm1hdGNoQWxsKC9bLSsuMC05XSsvZyldLm1hcCgoW21dKSA9PiArbSk7CgogICAgbGV0IHIgPSBuZXcgQkJveCgpOwogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ociwgeyB4MSwgeTEsIHgyLCB5MiB9KTsKICB9CgogIHN0YXRpYyBmcm9tU1ZHKHMpIHsKICAgIGxldCBbeCwgeSwgd2lkdGgsaGVpZ2h0XSA9IFsuLi5zLm1hdGNoQWxsKC9bLSsuMC05XSsvZyldLm1hcCgoW21dKSA9PiArbSk7CiAgICByZXR1cm4gbmV3IEJCb3goeCx5LHgrd2lkdGgseStoZWlnaHQpOwogIH0KCiAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgbGV0IFt4MSwgeDIsIHkxLCB5Ml0gPSB0aGlzOwogICAgZm9yKGxldCBwcm9wIG9mIFt4MSwgeDIsIHkxLCB5Ml0pIHlpZWxkIHByb3A7CiAgfQp9CgpCQm94LnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ0JCb3gnOwoKZXhwb3J0IGNvbnN0IGlzQkJveCA9IChiYm94LCB0ZXN0Rm4gPSAocHJvcCwgbmFtZSwgb2JqKSA9PiBuYW1lIGluIG9iaikgPT4gaXNPYmplY3QoYmJveCkgJiYgWyd4MScsICd5MScsICd4MicsICd5MiddLmV2ZXJ5KG4gPT4gdGVzdEZuKGJib3hbbl0sIG4sIGJib3gpKTsKCmV4cG9ydCBkZWZhdWx0IEJCb3g7CgAAAAAAAAAAbBsAAAAAAAAAAAAAAAAAAAAAAABsGwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkGAAAAAAAAOQYAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "quickjs/qjs-modules/lib/dom.js",
			"settings":
			{
				"buffer_size": 38201,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					107,
					1,
					"insert",
					{
						"characters": " {"
					},
					"AgAAADU9AAAAAAAANj0AAAAAAAAAAAAANj0AAAAAAAA3PQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAANT0AAAAAAAA1PQAAAAAAAAAAAAAAAPC/"
				],
				[
					108,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAADc9AAAAAAAAOD0AAAAAAAAAAAAAOD0AAAAAAAA8PQAAAAAAAAAAAAA4PQAAAAAAADg9AAAAAAAABAAAACAgICA4PQAAAAAAAD49AAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAANz0AAAAAAAA3PQAAAAAAAAAAAAAAAPC/"
				],
				[
					110,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BQAAAJA9AAAAAAAAkT0AAAAAAAAAAAAAkT0AAAAAAACXPQAAAAAAAAAAAACXPQAAAAAAAJg9AAAAAAAAAAAAAJE9AAAAAAAAkT0AAAAAAAAGAAAAICAgICAgkT0AAAAAAACVPQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAkD0AAAAAAACQPQAAAAAAAP///////+9/"
				],
				[
					121,
					1,
					"cut",
					null,
					"AQAAAEQ9AAAAAAAARD0AAAAAAAA/AAAAZmFjKHR5cGVvZiBub2RlID09ICdzdHJpbmcnID8gRW50aXRpZXMuVGV4dCA6IEVudGl0aWVzLkVsZW1lbnQp",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAgz0AAAAAAABEPQAAAAAAAAAAAAAAAPC/"
				],
				[
					122,
					1,
					"insert",
					{
						"characters": "fn"
					},
					"AgAAAEQ9AAAAAAAART0AAAAAAAAAAAAART0AAAAAAABGPQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAARD0AAAAAAABEPQAAAAAAAAAAAAAAAPC/"
				],
				[
					125,
					1,
					"insert",
					{
						"characters": "\nlet"
					},
					"BgAAADc9AAAAAAAAOD0AAAAAAAAAAAAAOD0AAAAAAAA8PQAAAAAAAAAAAAA8PQAAAAAAAD49AAAAAAAAAAAAAD49AAAAAAAAPz0AAAAAAAAAAAAAPz0AAAAAAABAPQAAAAAAAAAAAABAPQAAAAAAAEE9AAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAANz0AAAAAAAA3PQAAAAAAAP///////+9/"
				],
				[
					126,
					1,
					"insert",
					{
						"characters": " fn="
					},
					"BAAAAEE9AAAAAAAAQj0AAAAAAAAAAAAAQj0AAAAAAABDPQAAAAAAAAAAAABDPQAAAAAAAEQ9AAAAAAAAAAAAAEQ9AAAAAAAART0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAQT0AAAAAAABBPQAAAAAAAAAAAAAAAPC/"
				],
				[
					127,
					1,
					"paste",
					null,
					"AQAAAEU9AAAAAAAAhD0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAART0AAAAAAABFPQAAAAAAAAAAAAAAAPC/"
				],
				[
					128,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAIQ9AAAAAAAAhT0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAhD0AAAAAAACEPQAAAAAAAAAAAAAAAPC/"
				],
				[
					134,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABXlgAAaW1wb3J0ICogYXMgZGVlcCBmcm9tICdkZWVwJzsKaW1wb3J0IHsgVHJlZVdhbGtlciB9IGZyb20gJ3RyZWVfd2Fsa2VyJzsKaW1wb3J0IHsgY2FtZWxpemUsIGRlY2FtZWxpemUsIGlzT2JqZWN0LCBkZWZpbmUsIHF1b3RlLCByYW5nZSwgYXNzZXJ0LCBtZW1vaXplLCBnZXRzZXQsIG1vZGlmaWVyLCBnZXR0ZXJzZXR0ZXIsIGFycmF5RmFjYWRlLCBsYXp5UHJvcGVydGllcyB9IGZyb20gJ3V0aWwnOwppbXBvcnQgeyByZWFkIGFzIHJlYWRYTUwsIHdyaXRlIGFzIHdyaXRlWE1MIH0gZnJvbSAneG1sJzsKaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnOwppbXBvcnQgeyBwYXJzZVNlbGVjdG9ycyB9IGZyb20gJy4vY3NzMy1zZWxlY3RvcnMuanMnOwppbXBvcnQgeyBpbnNwZWN0U3ltYm9sIH0gZnJvbSAndXRpbCc7Cgpjb25zdCByYXdOb2RlID0gbmV3IFdlYWtNYXAoKTsKY29uc3QgcGFyZW50Tm9kZSA9IG5ldyBNYXAoKTsKY29uc3Qgb3duZXJFbGVtZW50ID0gbmV3IE1hcCgpOwpjb25zdCB0ZXh0VmFsdWVzID0gZ2V0dGVyc2V0dGVyKG5ldyBXZWFrTWFwKCkpOwoKY29uc3QgRUxFTUVOVF9OT0RFID0gMTsKY29uc3QgQVRUUklCVVRFX05PREUgPSAyOwpjb25zdCBURVhUX05PREUgPSAzOwpjb25zdCBDREFUQV9TRUNUSU9OX05PREUgPSA0Owpjb25zdCBFTlRJVFlfUkVGRVJFTkNFX05PREUgPSA1Owpjb25zdCBFTlRJVFlfTk9ERSA9IDY7CmNvbnN0IFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERSA9IDc7CmNvbnN0IENPTU1FTlRfTk9ERSA9IDg7CmNvbnN0IERPQ1VNRU5UX05PREUgPSA5Owpjb25zdCBET0NVTUVOVF9UWVBFX05PREUgPSAxMDsKY29uc3QgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSA9IDExOwpjb25zdCBOT1RBVElPTl9OT0RFID0gMTI7Cgpjb25zdCBjcmVhdGVGdW5jdGlvbnMgPSBbCiAgLAogICdjcmVhdGVFbGVtZW50JywKICAnY3JlYXRlQXR0cmlidXRlJywKICAnY3JlYXRlVGV4dCcsCiAgJ2NyZWF0ZUNEQVRBU2VjdGlvbicsCiAgJ2NyZWF0ZUVudGl0eVJlZmVyZW5jZScsCiAgJ2NyZWF0ZUVudGl0eScsCiAgJ2NyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbicsCiAgJ2NyZWF0ZUNvbW1lbnQnLAogICdjcmVhdGVEb2N1bWVudCcsCiAgJ2NyZWF0ZURvY3VtZW50VHlwZScsCiAgJ2NyZWF0ZURvY3VtZW50RnJhZ21lbnQnLAogICdjcmVhdGVOb3RhdGlvbicKXTsKCmNvbnN0IEVudGl0eU5hbWVzID0gWwogICdEb2N1bWVudCcsCiAgJ05vZGUnLAogICdOb2RlTGlzdCcsCiAgJ0VsZW1lbnQnLAogICdOYW1lZE5vZGVNYXAnLAogICdBdHRyJywKICAnVGV4dCcsCiAgJ0NvbW1lbnQnLAogICdUb2tlbkxpc3QnLAogICdDU1NTdHlsZURlY2xhcmF0aW9uJwpdOwpjb25zdCBFbnRpdHlUeXBlID0gbmFtZSA9PiBFbnRpdHlOYW1lcy5pbmRleE9mKG5hbWUpOwpleHBvcnQgY29uc3QgRW50aXRpZXMgPSBFbnRpdHlOYW1lcy5yZWR1Y2UoKG9iaiwgbmFtZSwgaWQpID0+ICh7IFtuYW1lXTogaWQsIC4uLm9iaiB9KSwge30pOwoKY29uc3Qga2V5T2YgPSAob2JqLCB2YWx1ZSkgPT4gewogIGZvcihsZXQga2V5IGluIG9iaikgaWYob2JqW2tleV0gPT09IHZhbHVlKSByZXR1cm4ga2V5OwogIHJldHVybiAtMTsKfTsKCmNsYXNzIERlcmVmZXJlbmNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgY29uc3RydWN0b3Iob2JqLCBpLCBwYXRoLCBlcnJvcikgewogICAgc3VwZXIoYGRlcmVmZXJlbmNlIGVycm9yIG9mIDwke29ian0+IGF0ICR7aX0gJyR7cGF0aC5zbGljZSgwLCBpKX0nOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgfQp9CgovL2NvbnN0IGFwcGx5UGF0aCA9IChwYXRoLCBvYmopID0+IHBhdGgucmVkdWNlKChhY2MsIHBhcnQpID0+IGFjY1twYXJ0XSwgb2JqKTsKZnVuY3Rpb24gYXBwbHlQYXRoKHBhdGgsIG9iaikgewogIGxldCB7IGxlbmd0aCB9ID0gcGF0aDsKICBsZXQgcHJvcCA9IG9iajsKICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIGxldCBrZXkgPSBwYXRoW2ldOwogICAgdHJ5IHsKICAgICAgcHJvcCA9IHByb3Bba2V5XTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgdGhyb3cgbmV3IERlcmVmZXJlbmNlRXJyb3Iob2JqLCBpLCBwYXRoLCBlcnJvcik7CiAgICB9CiAgfQogIHJldHVybiBwcm9wOwp9CgpmdW5jdGlvbiogcXVlcnkocm9vdCwgc2VsZWN0b3JzLCB0ID0gKHBhdGgsIHJvb3QpID0+IHBhdGgpIHsKICBsZXQgcmVzdWx0ID0gW107CgogIGZvcihsZXQgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKQogICAgZm9yKGxldCBwYXRoIG9mIGRlZXAuaXRlcmF0ZShyb290LCBzZWxlY3RvciwgZGVlcC5SRVRVUk5fUEFUSCkpIHsKICAgICAgeWllbGQgdChwYXRoLCByb290KTsKICAgIH0KfQoKZXhwb3J0IGNvbnN0IG5vZGVUeXBlcyA9IFsKICAsCiAgJ0VMRU1FTlRfTk9ERScsCiAgJ0FUVFJJQlVURV9OT0RFJywKICAnVEVYVF9OT0RFJywKICAnQ0RBVEFfU0VDVElPTl9OT0RFJywKICAnRU5USVRZX1JFRkVSRU5DRV9OT0RFJywKICAnRU5USVRZX05PREUnLAogICdQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREUnLAogICdDT01NRU5UX05PREUnLAogICdET0NVTUVOVF9OT0RFJywKICAnRE9DVU1FTlRfVFlQRV9OT0RFJywKICAnRE9DVU1FTlRfRlJBR01FTlRfTk9ERScsCiAgJ05PVEFUSU9OX05PREUnCl07CgpmdW5jdGlvbiBjaGVja05vZGUobm9kZSkgewogIGlmKCFpc09iamVjdChub2RlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbm9kZSBpcyBub3QgYW4gb2JqZWN0Jyk7CiAgLy9pZighbm9kZVtTeW1ib2wudG9TdHJpbmdUYWddKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub2RlIGRvZXMgbm90IGhhdmUgW1N5bWJvbC50b1N0cmluZ1RhZ10nKTsKICAvL2lmKE9iamVjdC5nZXRQcm90b3R5cGVPZihub2RlKSA9PSBPYmplY3QucHJvdG90eXBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub2RlIGlzIE9iamVjdCcpOwp9CgpleHBvcnQgZnVuY3Rpb24gUHJvdG90eXBlcygKICBjb25zdHJ1Y3RvcnMgPSB7CiAgICBEb2N1bWVudCwKICAgIE5vZGUsCiAgICBOb2RlTGlzdCwKICAgIEVsZW1lbnQsCiAgICBOYW1lZE5vZGVNYXAsCiAgICBBdHRyLAogICAgVGV4dCwKICAgIENvbW1lbnQsCiAgICBUb2tlbkxpc3QsCiAgICBDU1NTdHlsZURlY2xhcmF0aW9uCiAgfQopIHsKICBsZXQgcHJvdG90eXBlcyA9IHt9OwogIGZvcihsZXQga2V5IGluIGNvbnN0cnVjdG9ycykgewogICAgcHJvdG90eXBlc1trZXldID0gY29uc3RydWN0b3JzW2tleV0ucHJvdG90eXBlOwogIH0KICByZXR1cm4gcHJvdG90eXBlczsKfQoKbGV0IGZhY3RvcmllcyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBmdW5jdGlvbiBGYWN0b3J5KHR5cGVzID0gUHJvdG90eXBlcygpKSB7CiAgbGV0IHJldDsKCiAgaWYobmV3LnRhcmdldCkgewogICAgcmV0ID0gZnVuY3Rpb24gRmFjdG9yeSh0eXBlKSB7CiAgICAgIGlmKHR5cGVvZiB0eXBlID09ICdudW1iZXInKSB0eXBlID0gRW50aXR5TmFtZXNbdHlwZV07CiAgICAgIC8vIGlmKHR5cGVvZiB0eXBlID09ICdzdHJpbmcnKSB0eXBlID0gRW50aXR5VHlwZSh0eXBlKTsKCiAgICAgIHJldHVybiByZXRbdHlwZV0ubmV3OwogICAgfTsKICAgIGlmKEFycmF5LmlzQXJyYXkodHlwZXMpKSB0eXBlcyA9IHR5cGVzLnJlZHVjZSgoYWNjLCBwcm90bywgaSkgPT4gKHsgW0VudGl0eU5hbWVzW2ldXTogcHJvdG8sIC4uLmFjYyB9KSwge30pOwoKICAgIGlmKHR5cGVvZiB0eXBlcyAhPSAnZnVuY3Rpb24nKSB7CiAgICAgIGxldCBvYmogPSB0eXBlczsKICAgICAgdHlwZXMgPSAodHlwZSwgLi4uYXJncykgPT4gewogICAgICAgIGlmKHR5cGVvZiB0eXBlID09ICdudW1iZXInKSB0eXBlID0gRW50aXR5TmFtZXNbdHlwZV07CiAgICAgICAgbGV0IHByb3RvID0gb2JqW3R5cGVdOwogICAgICAgIHJldHVybiBuZXcgcHJvdG8uY29uc3RydWN0b3IoLi4uYXJncyk7CiAgICAgIH07CiAgICAgIHR5cGVzLmNhY2hlID0gKHR5cGUsIC4uLmFyZ3MpID0+IHsKICAgICAgICBpZih0eXBlb2YgdHlwZSA9PSAnbnVtYmVyJykgdHlwZSA9IEVudGl0eU5hbWVzW3R5cGVdOwogICAgICAgIGxldCBwcm90byA9IG9ialt0eXBlXTsKICAgICAgICByZXR1cm4gKHByb3RvLmNvbnN0cnVjdG9yLmNhY2hlID8/IE1ha2VDYWNoZSgoLi4uYSkgPT4gbmV3IHByb3RvLmNvbnN0cnVjdG9yKC4uLmEpKSkoLi4uYXJncyk7CiAgICAgIH07CiAgICB9CgogICAgZm9yKGxldCBpID0gMDsgaSA8IEVudGl0eU5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBuYW1lID0gRW50aXR5TmFtZXNbaV07CiAgICAgIHJldFtuYW1lXSA9IHsgbmV3OiAoLi4uYXJncykgPT4gdHlwZXMobmFtZSwgLi4uYXJncyksIGNhY2hlOiAoLi4uYXJncykgPT4gdHlwZXMuY2FjaGUobmFtZSwgLi4uYXJncykgfTsKICAgIH0KCiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgRmFjdG9yeS5wcm90b3R5cGUpOwogIH0KCiAgcmV0dXJuIGZhY3Rvcmllcyh0eXBlcyk7Cn0KCk9iamVjdC5zZXRQcm90b3R5cGVPZihGYWN0b3J5LnByb3RvdHlwZSwgRnVuY3Rpb24ucHJvdG90eXBlKTsKCmRlZmluZShGYWN0b3J5LCB7CiAgZm9yOiBub2RlID0+IHsKICAgIC8vcmV0dXJuIE5vZGUuaGllcihub2RlKS5yZWR1Y2VSaWdodCgoYWNjLCBub2RlKSA9PiBhY2MgPz8gZmFjdG9yaWVzKG5vZGUpKTsKICAgIGxldCBwID0gbm9kZTsKICAgIGRvIHsKICAgICAgbGV0IGYgPSBmYWN0b3JpZXMoTm9kZS5yYXcocCkpOwogICAgICBpZihmKSByZXR1cm4gZjsKICAgIH0gd2hpbGUoKHAgPSBOb2RlLnBhcmVudChwKSA/PyBOb2RlLm93bmVyKHApKSk7CgogICAgZm9yKGxldCBuIG9mIE5vZGUuaGllcihub2RlKSkgewogICAgICBsZXQgZiA9IGZhY3RvcmllcyhOb2RlLnJhdyhuKSk7CiAgICAgIGlmKGYpIHJldHVybiBmOwogICAgfQogIH0sCiAgc2V0OiAobm9kZSwgZmFjdG9yeSkgPT4gZmFjdG9yaWVzKE5vZGUucmF3KG5vZGUpLCBmYWN0b3J5KQp9KTsKCmV4cG9ydCBjbGFzcyBQYXJzZXIgewogIGNvbnN0cnVjdG9yKGZhY3RvcnkpIHsKICAgIGZhY3RvcnkgPz89IG5ldyBGYWN0b3J5KCk7CiAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5OwogIH0KCiAgcGFyc2VGcm9tU3RyaW5nKHN0ciwgZmlsZSkgewogICAgbGV0IGRhdGEgPSByZWFkWE1MKHN0ciwgZmlsZSk7CgogICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICBpZihkYXRhLmxlbmd0aCA+IDEpCiAgICAgICAgZGF0YSA9IHsKICAgICAgICAgIHRhZ05hbWU6ICc/eG1sJywKICAgICAgICAgIGF0dHJpYnV0ZXM6IHsgdmVyc2lvbjogJzEuMCcsIGVuY29kaW5nOiAndXRmLTgnIH0sCiAgICAgICAgICBjaGlsZHJlbjogZGF0YQogICAgICAgIH07CiAgICAgIGVsc2UgZGF0YSA9IGRhdGFbMF07CiAgICB9CiAgICBjb25zdCB7IGZhY3RvcnkgfSA9IHRoaXM7CiAgICAvL2NvbnNvbGUubG9nKCdmYWN0b3J5JywgZmFjdG9yeSk7CiAgICBsZXQgZG9jID0gZmFjdG9yeS5Eb2N1bWVudC5uZXcoZGF0YSwgZmFjdG9yeSk7CiAgICBGYWN0b3J5LnNldChkb2MsIGZhY3RvcnkpOwogICAgcmV0dXJuIGRvYzsKICB9CgogIHBhcnNlRnJvbUZpbGUoZmlsZSkgewogICAgbGV0IHhtbCA9IHJlYWRGaWxlU3luYyhmaWxlKTsKICAgIGNvbnN0IHsgZmFjdG9yeSB9ID0gdGhpczsKICAgIHJldHVybiB0aGlzLnBhcnNlRnJvbVN0cmluZyh4bWwsIGZpbGUsIGZhY3RvcnkpOwogIH0KfQoKZXhwb3J0IGNsYXNzIFNlcmlhbGl6ZXIgewogIHNlcmlhbGl6ZVRvU3RyaW5nKG5vZGUpIHsKICAgIGxldCBzdHIgPSB3cml0ZVhNTChOb2RlLnJhdyhub2RlKSA/PyBub2RlKTsKICAgIHJldHVybiBzdHI7CiAgfQp9CgpmdW5jdGlvbiBHZXROb2RlKG9iaiwgb3duZXIsIGZhY3RvcnkpIHsKICBsZXQgdHlwZSA9IEdldFR5cGUob2JqLCBvd25lcik7CgogIGlmKHR5cGUgPT09IEVudGl0aWVzLlRleHQgJiYgdHlwZW9mIG9iaiA9PSAnc3RyaW5nJykgb2JqID0gb3duZXIuaW5kZXhPZihvYmopOwoKICBmYWN0b3J5ID8/PSBGYWN0b3J5LmZvcihvd25lcik7CiAgaWYoIWZhY3RvcnkpIGNvbnNvbGUubG9nKCdObyBmYWN0b3J5IGZvcicsIG93bmVyLCBvd25lci5jb25zdHJ1Y3Rvci5uYW1lKTsKICBsZXQgY3RvciA9IGZhY3RvcnkodHlwZSk7CgogIGlmKCFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoYE5vIHN1Y2ggbm9kZSB0eXBlIGZvciAke29ialtpbnNwZWN0U3ltYm9sXSgpfWApOwogIGlmKGN0b3IuY2FjaGUpIHJldHVybiBjdG9yLmNhY2hlKG9iaiwgb3duZXIpOwogIHJldHVybiBjdG9yKG9iaiwgb3duZXIpOwp9CgpleHBvcnQgY2xhc3MgSW50ZXJmYWNlIHsKICBnZXQgcGFyZW50Tm9kZSgpIHsKICAgIGxldCByID0gTm9kZS5wYXJlbnQodGhpcyk7CiAgICBpZihpc09iamVjdChyKSAmJiAhKHIgaW5zdGFuY2VvZiBOb2RlKSkgciA9IE5vZGUub3duZXIocik7CiAgICByZXR1cm4gcjsKICB9CgogIGdldCBwYXJlbnRFbGVtZW50KCkgewogICAgbGV0IG9iaiA9IHRoaXMucGFyZW50Tm9kZTsKICAgIHJldHVybiBvYmoubm9kZVR5cGUgPT0gRUxFTUVOVF9OT0RFID8gb2JqIDogbnVsbDsKICB9CgogIGdldCBvd25lckRvY3VtZW50KCkgewogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgd2hpbGUobm9kZSAmJiBub2RlLm5vZGVUeXBlICE9IERPQ1VNRU5UX05PREUpIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CiAgICByZXR1cm4gbm9kZTsKICB9CgogIGdldCBjaGlsZE5vZGVzKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CgogICAgcmV0dXJuIEZhY3RvcnkuZm9yKHRoaXMpLk5vZGVMaXN0LmNhY2hlKChyYXcuY2hpbGRyZW4gPz89IFtdKSwgdGhpcywgTm9kZUxpc3QpOwogIH0KCiAgZ2V0IGZpcnN0Q2hpbGQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGlmKGNoaWxkcmVuPy5sZW5ndGgpIHsKICAgICAgbGV0IFtmaXJzdF0gPSBjaGlsZHJlbjsKICAgICAgcmV0dXJuIEdldE5vZGUoZmlyc3QsIHRoaXMpOwogICAgfQogIH0KCiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgaWYoY2hpbGRyZW4/Lmxlbmd0aCkgewogICAgICBsZXQgbGFzdCA9IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdOwogICAgICByZXR1cm4gR2V0Tm9kZShsYXN0LCB0aGlzKTsKICAgIH0KICB9CgogIGdldCBuZXh0U2libGluZygpIHsKICAgIGxldCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzLnBhcmVudE5vZGUpOwoKICAgIGlmKGNoaWxkcmVuKSB7CiAgICAgIGxldCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgICAgLy9jb25zb2xlLmxvZygnY2hpbGRyZW4nLCBjaGlsZHJlbik7CiAgICAgIGxldCBpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YocmF3KTsKICAgICAgaWYoaW5kZXggIT0gLTEpIHJldHVybiBHZXROb2RlKGNoaWxkcmVuW2luZGV4ICsgMV0sIE5vZGUub3duZXIodGhpcykpOwogICAgfQogIH0KCiAgZ2V0IHByZXZpb3VzU2libGluZygpIHsKICAgIGxldCBwYXJlbnQ7CiAgICBpZigocGFyZW50ID0gTm9kZS5wYXJlbnQodGhpcykpKSB7CiAgICAgIGxldCBpbmRleCA9IHBhcmVudC5pbmRleE9mKHRoaXMpOwogICAgICBpZihpbmRleCAhPSAtMSkgcmV0dXJuIEdldE5vZGUocGFyZW50W2luZGV4IC0gMV0sIHBhcmVudCk7CiAgICB9CiAgfQoKICBhcHBlbmRDaGlsZChub2RlKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCByYXcgPSBOb2RlLnJhdyhub2RlKTsKICAgIGlmKG5vZGUgaW5zdGFuY2VvZiBUZXh0KSB7CiAgICAgIGxldCBrZXkgPSBjaGlsZHJlbi5sZW5ndGg7CiAgICAgIHRleHRWYWx1ZXMoCiAgICAgICAgdGhpcywKICAgICAgICBtb2RpZmllcigKICAgICAgICAgICgpID0+IGNoaWxkcmVuW2tleV0gPz8gJycsCiAgICAgICAgICB2YWx1ZSA9PiAoY2hpbGRyZW5ba2V5XSA9IHZhbHVlKQogICAgICAgICkKICAgICAgKTsKICAgIH0KICAgIG93bmVyRWxlbWVudC5zZXQobm9kZSwgdGhpcy5jaGlsZE5vZGVzKTsKICAgIHBhcmVudE5vZGUuc2V0KG5vZGUsIHRoaXMpOwoKICAgIGNoaWxkcmVuLnB1c2gocmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IGluZGV4LAogICAgICByYXcgPSBpc09iamVjdChub2RlKSAmJiBub2RlIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KG5vZGUpIDogbm9kZSwKICAgICAgcmVmID0gaXNPYmplY3QocmVmTm9kZSkgJiYgcmVmTm9kZSBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhyZWZOb2RlKSA6IHJlZk5vZGU7CiAgICBpZigoaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHJlZikpID09IC0xKSBpbmRleCA9IGNoaWxkcmVuLmxlbmd0aDsKICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCwgMCwgcmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgcmVtb3ZlQ2hpbGQobm9kZSkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgaW5kZXgsCiAgICAgIHJhdyA9IGlzT2JqZWN0KG5vZGUpICYmIG5vZGUgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcobm9kZSkgOiBub2RlOwogICAgaWYoKGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihyYXcpKSA9PSAtMSkgdGhyb3cgbmV3IEVycm9yKGBOb2RlLnJlbW92ZUNoaWxkIG5vIHN1Y2ggY2hpbGQhYCk7CiAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICByZXBsYWNlQ2hpbGQobmV3Q2hpbGQsIG9sZENoaWxkKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBpbmRleCwKICAgICAgb2xkID0gaXNPYmplY3Qob2xkQ2hpbGQpICYmIG9sZENoaWxkIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KG9sZENoaWxkKSA6IG9sZENoaWxkLAogICAgICByYXcgPSBpc09iamVjdChuZXdDaGlsZCkgJiYgbmV3Q2hpbGQgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcobmV3Q2hpbGQpIDogbmV3Q2hpbGQ7CiAgICBpZigoaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKG9sZCkpID09IC0xKSB0aHJvdyBuZXcgRXJyb3IoYE5vZGUucmVwbGFjZUNoaWxkIG5vIHN1Y2ggY2hpbGQhYCk7CiAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEsIHJhdyk7CiAgICByZXR1cm4gbmV3Q2hpbGQ7CiAgfQoKICBxdWVyeVNlbGVjdG9yKC4uLnNlbGVjdG9ycykgewogICAgbGV0IG5vZGUgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGlmKHR5cGVvZiBzZWxlY3RvcnNbMF0gPT0gJ3N0cmluZycpIHNlbGVjdG9ycyA9IFsuLi5wYXJzZVNlbGVjdG9ycyguLi5zZWxlY3RvcnMpXTsKICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdG9ycycsIGNvbnNvbGUuY29uZmlnKHsgZGVwdGg6IEluZmluaXR5LCBjb21wYWN0OiAwIH0pLCBzZWxlY3RvcnMpOwogICAgbGV0IGdlbiA9IHF1ZXJ5KG5vZGUsIHNlbGVjdG9ycyk7CiAgICBsZXQgeyB2YWx1ZSwgZG9uZSB9ID0gZ2VuLm5leHQoKTsKICAgIGlmKHZhbHVlKSByZXR1cm4gYXBwbHlQYXRoKHZhbHVlLCB0aGlzKTsKICB9CgogIHF1ZXJ5U2VsZWN0b3JBbGwoLi4uc2VsZWN0b3JzKSB7CiAgICBsZXQgbm9kZSA9IE5vZGUucmF3KHRoaXMpOwoKICAgIGlmKHR5cGVvZiBzZWxlY3RvcnNbMF0gPT0gJ3N0cmluZycpIHNlbGVjdG9ycyA9IFsuLi5wYXJzZVNlbGVjdG9ycyguLi5zZWxlY3RvcnMpXTsKCiAgICAvL2NvbnNvbGUubG9nKCdzZWxlY3RvcnMnLCAoZ2xvYmFsVGhpcy5zZWxlY3RvcnMgPSBzZWxlY3RvcnMpKTsKCiAgICByZXR1cm4gcXVlcnkobm9kZSwgc2VsZWN0b3JzLCBwID0+IGFwcGx5UGF0aChwLCB0aGlzKSk7CiAgfQp9CgpleHBvcnQgY2xhc3MgTm9kZSB7CiAgY29uc3RydWN0b3Iob2JqLCBwYXJlbnQpIHsKICAgIC8vICBpZihpc09iamVjdChwcm90bykpIGFzc2VydChPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykgaW5zdGFuY2VvZiBOb2RlLCB0cnVlLCAncHJvdG8nKTsKICAgIGFzc2VydCh0aGlzIGluc3RhbmNlb2YgTm9kZSwgdHJ1ZSwgJ2luc3RhbmNlb2YgTm9kZScpOwoKICAgIC8vaWYoIWlzT2JqZWN0KG9iaikpIGNvbnNvbGUubG9nKCdOb2RlLmNvbnN0cnVjdG9yJywgeyBvYmosIHBhcmVudCwgcHJvdG8gfSk7CiAgICBpZihpc09iamVjdChvYmopKSByYXdOb2RlLnNldCh0aGlzLCBvYmopOwoKICAgIHBhcmVudE5vZGUuc2V0KHRoaXMsIHBhcmVudCk7CiAgICAvL3BhcmVudE5vZGUuc2V0KG9iaiwgcGFyZW50KTsKICB9CgogIGdldCBwYXRoKCkgewogICAgcmV0dXJuIE5vZGUucGF0aCh0aGlzKTsKICB9CgogIFtpbnNwZWN0U3ltYm9sXSgpIHsKICAgIHJldHVybiBgXHgxYlsxOzMxbSR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfVx4MWJbMG1gOwogIH0KfQoKTm9kZS50eXBlcyA9IG5vZGVUeXBlczsKY29uc3QgTk9ERV9UWVBFUyA9IHsKICBBVFRSSUJVVEVfTk9ERSwKICBDREFUQV9TRUNUSU9OX05PREUsCiAgQ09NTUVOVF9OT0RFLAogIERPQ1VNRU5UX0ZSQUdNRU5UX05PREUsCiAgRE9DVU1FTlRfTk9ERSwKICBET0NVTUVOVF9UWVBFX05PREUsCiAgRUxFTUVOVF9OT0RFLAogIEVOVElUWV9OT0RFLAogIEVOVElUWV9SRUZFUkVOQ0VfTk9ERSwKICBOT1RBVElPTl9OT0RFLAogIFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERSwKICBURVhUX05PREUKfTsKZGVmaW5lKE5vZGUucHJvdG90eXBlLCBJbnRlcmZhY2UucHJvdG90eXBlKTsKZGVmaW5lKE5vZGUucHJvdG90eXBlLCBOT0RFX1RZUEVTKTsKZGVmaW5lKE5vZGUsIE5PREVfVFlQRVMpOwpkZWZpbmUoTm9kZSwgewogIHJhdyhub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICByZXR1cm4gcmF3Tm9kZS5nZXQobm9kZSk7CiAgfSwKCiAgY2hpbGRyZW4obm9kZSkgewogICAgcmV0dXJuIE5vZGUucmF3KG5vZGUpPy5jaGlsZHJlbjsKICB9LAoKICBvd25lcihub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgb3duZXIsIHBhcmVudDsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChub2RlKSkgJiYgQXJyYXkuaXNBcnJheShwYXJlbnQuY2hpbGRyZW4pKSByZXR1cm4gcGFyZW50LmNoaWxkcmVuOwoKICAgIGxldCByYXcgPSBOb2RlLnJhdyhub2RlKTsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChyYXcpKSAmJiBBcnJheS5pc0FycmF5KHBhcmVudC5jaGlsZHJlbikpIHJldHVybiBwYXJlbnQuY2hpbGRyZW47CgogICAgaWYoKG93bmVyID0gb3duZXJFbGVtZW50LmdldChub2RlKSkpIHJldHVybiBvd25lcjsKICAgIHJldHVybiBvd25lckVsZW1lbnQuZ2V0KHJhdyk7CiAgfSwKCiAgcGFyZW50KG5vZGUpIHsKICAgIGNoZWNrTm9kZShub2RlKTsKICAgIGxldCByZXQgPSBwYXJlbnROb2RlLmdldChub2RlKTsKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgaGllcihub2RlLCBwcmVkID0gbm9kZSA9PiB0cnVlKSB7CiAgICBjb25zdCByID0gW107CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgbmV4dDsKICAgIGRvIHsKICAgICAgaWYocHJlZChub2RlKSkgci51bnNoaWZ0KG5vZGUpOwogICAgICBuZXh0ID0gTm9kZS5vd25lcihub2RlKSA/PyBOb2RlLnBhcmVudChub2RlKSAvKiA/PyAoCiAgICAgICAgeyBOb2RlTGlzdDogTm9kZS5vd25lciwgTmFtZWROb2RlTWFwOiBOb2RlLm93bmVyLCBFbGVtZW50OiBOb2RlLnBhcmVudCwgVGV4dDogTm9kZS5vd25lciB9WwogICAgICAgICAgbm9kZS5jb25zdHJ1Y3Rvci5uYW1lCiAgICAgICAgXSA/PyBOb2RlLnBhcmVudAogICAgICApLmNhbGwoTm9kZSwgbm9kZSkqLzsKICAgICAgaWYoci5pbmRleE9mKG5leHQpICE9IC0xKSB0aHJvdyBuZXcgRXJyb3IoYGNpcmN1bGFyIGxvb3BgKTsKICAgIH0gd2hpbGUobmV4dCAmJiAobm9kZSA9IG5leHQpKTsKICAgIHJldHVybiByOwogIH0sCgogIGRvY3VtZW50KG5vZGUpIHsKICAgIGNvbnN0IGhpZXIgPSBOb2RlLmhpZXIobm9kZSk7CiAgICByZXR1cm4gaGllci5maW5kKCh7IG5vZGVUeXBlIH0pID0+IG5vZGVUeXBlID09IERPQ1VNRU5UX05PREUpOwogIH0sCgogIHBhdGgoYXJnLCBwYXRoKSB7CiAgICBpZihhcmcub3duZXJFbGVtZW50KSB7CiAgICAgIGxldCBjaGlsZCA9IHsgTm9kZUxpc3Q6IFsnY2hpbGRyZW4nXSwgTmFtZWROb2RlTWFwOiBbJ2F0dHJpYnV0ZXMnXSwgQXR0cjogWydhdHRyaWJ1dGVzJywgYXJnLm5hbWVdIH1bCiAgICAgICAgYXJnLmNvbnN0cnVjdG9yLm5hbWUKICAgICAgXTsKICAgICAgaWYoY2hpbGQucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjW2tleV0sIGFyZy5vd25lckVsZW1lbnQpKSByZXR1cm4gTm9kZS5wYXRoKGFyZy5vd25lckVsZW1lbnQpLmNvbmNhdChjaGlsZCk7CiAgICB9CiAgICBjb25zdCBoaWVyID0gTm9kZS5oaWVyKGFyZyk7CgogICAgaWYoIUFycmF5LmlzQXJyYXkocGF0aCkpIHBhdGggPSBbXTsKCiAgICB3aGlsZShoaWVyLmxlbmd0aCA+PSAyKSB7CiAgICAgIGxldCBpbmRleCA9IGtleU9mKE5vZGUucmF3KGhpZXJbMF0pLCBOb2RlLnJhdyhoaWVyWzFdKSk7CiAgICAgIGlmKGluZGV4ID09IC0xKSBpbmRleCA9IGtleU9mKGhpZXJbMF0sIGhpZXJbMV0pOwoKICAgICAgaWYoIWlzTmFOKCtpbmRleCkpIGluZGV4ID0gK2luZGV4OwogICAgICBwYXRoLnB1c2goaW5kZXgpOwogICAgICBoaWVyLnNoaWZ0KCk7CiAgICB9CiAgICByZXR1cm4gcGF0aDsKICB9LAoKICBmcm9tKG9iaikge30KfSk7CgpOb2RlLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ05vZGUnOwoKZnVuY3Rpb24gTWFrZUNhY2hlKGN0b3IsIHN0b3JlID0gbmV3IFdlYWtNYXAoKSkgewogIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KHN0b3JlKTsKICByZXR1cm4gKGssIC4uLmFyZ3MpID0+IHsKICAgIGxldCB2OwogICAgaWYoISh2ID0gZ2V0KGspKSkgewogICAgICB2ID0gY3RvcihrLCAuLi5hcmdzKTsKICAgICAgc2V0KGssIHYpOwogICAgfQogICAgb3duZXJFbGVtZW50LnNldCh2LCBhcmdzWzBdKTsKICAgIHJldHVybiB2OwogIH07Cn0KCmZ1bmN0aW9uIE1ha2VDYWNoZTIoY3Rvciwgc3RvcmUgPSBuZXcgV2Vha01hcCgpKSB7CiAgbGV0IG1rY2ggPSBtZW1vaXplKGtleSA9PiBbXSwgc3RvcmUpOwoKICByZXR1cm4gKGlkLCBvd25lcikgPT4gewogICAgLy8gY29uc29sZS5sb2coJ0NhY2hlMicse2lkLG93bmVyIH0pOwogICAgaWYoIWlzTmFOKCtpZCkpIGlkID0gK2lkOwogICAgbGV0IHRleHRMaXN0ID0gbWtjaChvd25lcik7CiAgICB0ZXh0TGlzdFtpZF0gPz89IGN0b3IoaWQsIG93bmVyKTsKICAgIC8vIGNvbnNvbGUubG9nKCdDYWNoZTInLHsgdGV4dExpc3QgfSk7CiAgICByZXR1cm4gdGV4dExpc3RbaWRdOwogIH07Cn0KCmV4cG9ydCBjbGFzcyBOb2RlTGlzdCB7CiAgY29uc3RydWN0b3Iob2JqLCBvd25lcikgewogICAgbGV0IG5vZGVMaXN0OwogICAgY29uc3QgaXNFbGVtZW50ID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiAhaXNOYU4oK3Byb3ApOwogICAgY29uc3QgaXNMaXN0ID0gcHJvcCA9PiBpc0VsZW1lbnQocHJvcCkgfHwgcHJvcCA9PSAnbGVuZ3RoJzsKCiAgICBjb25zdCBmYWN0b3J5ID0gRmFjdG9yeS5mb3Iob3duZXIpOwogICAgLypjb25zdCB3cmFwRWxlbWVudCA9ICh2YWx1ZSwgcHJvcCkgPT4KICAgICAgdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnID8gVGV4dC5jYWNoZShwcm9wLCBub2RlTGlzdCkgOiBFbGVtZW50LmNhY2hlKHZhbHVlLCBub2RlTGlzdCk7Ki8KCiAgICByYXdOb2RlLnNldCh0aGlzLCBvYmopOwogICAgLy9wYXJlbnROb2RlLnNldChvYmosIG93bmVyKTsKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIG5vZGVMaXN0ID0gbmV3IFByb3h5KHRoaXMsIHsKICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gewogICAgICAgIGlmKHByb3AgPT09IFN5bWJvbC5pdGVyYXRvcikgcmV0dXJuIE5vZGVMaXN0LnByb3RvdHlwZVtwcm9wXTsKICAgICAgICBpZihpc0xpc3QocHJvcCkpIHsKICAgICAgICAgIGlmKHByb3AgPT0gJ2xlbmd0aCcpIHJldHVybiBvYmoubGVuZ3RoOwogICAgICAgICAgaWYocHJvcCA+PSAwICYmIHByb3AgPCBvYmoubGVuZ3RoKSByZXR1cm4gR2V0Tm9kZShvYmpbcHJvcF0sIG5vZGVMaXN0LCBmYWN0b3J5KTsgLy8gd3JhcEVsZW1lbnQob2JqW3Byb3BdLCBwcm9wKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpOwogICAgICB9LAogICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICh0YXJnZXQsIHByb3ApID0+IHsKICAgICAgICBpZihpc0xpc3QocHJvcCkpIHsKICAgICAgICAgIGlmKHByb3AgPT0gJ2xlbmd0aCcgfHwgKHByb3AgPj0gMCAmJiBwcm9wIDwgb2JqLmxlbmd0aCkpCiAgICAgICAgICAgIHJldHVybiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IG9ialtwcm9wXSB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTsKICAgICAgfSwKICAgICAgb3duS2V5czogdGFyZ2V0ID0+CiAgICAgICAgcmFuZ2UoMCwgb2JqLmxlbmd0aCAtIDEpCiAgICAgICAgICAubWFwKHByb3AgPT4gcHJvcCArICcnKQogICAgICAgICAgLmNvbmNhdChbJ2xlbmd0aCddKSwKICAgICAgZ2V0UHJvdG90eXBlT2Y6IHRhcmdldCA9PiBOb2RlTGlzdC5wcm90b3R5cGUKICAgIH0pOwoKICAgIHJhd05vZGUuc2V0KG5vZGVMaXN0LCBvYmopOwogICAgb3duZXJFbGVtZW50LnNldChub2RlTGlzdCwgb3duZXIpOwoKICAgIHJldHVybiBub2RlTGlzdDsKICB9CgogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgbGV0IHN0ciA9IGluc3BlY3QoWy4uLnRoaXNdLCBkZXB0aCArIDEsIHsgLi4ub3B0cywgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9KTsKICAgIGxldCBpbmRleGVzID0gc3RyWzBdID09ICdbJyA/IFtzdHIuaW5kZXhPZignWycpICsgMSwgc3RyLmxhc3RJbmRleE9mKCddJyldIDogWzBdOwogICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoLi4uaW5kZXhlcyk7CiAgfQp9CgovL05vZGVMaXN0LnByb3RvdHlwZS5fX3Byb3RvX18gPSBBcnJheS5wcm90b3R5cGU7CgpkZWZpbmUoTm9kZUxpc3QucHJvdG90eXBlLCB7CiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdOb2RlTGlzdCcsCiAgZ2V0IHBhdGgoKSB7CiAgICBsZXQgb3duZXIgPSBOb2RlLm93bmVyKHRoaXMpOwogICAgcmV0dXJuIE5vZGUucGF0aChvd25lcikuY29uY2F0KFsnY2hpbGRyZW4nXSk7CiAgfSwKCiAgLyogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICByZXR1cm4gdXRpbAogICAgICAucmFuZ2UoMCwgcmF3Lmxlbmd0aCAtIDEpCiAgICAgIC5tYXAobiA9PiBpbnNwZWN0KHRoaXNbbl0sIGRlcHRoLTEsb3B0cykpCiAgICAgIC5qb2luKCcsXG4gICcpOwogIH0sKi8KCiAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBjb25zdCBmYWMgPSBGYWN0b3J5KHRoaXMpOwogICAgZm9yKGxldCBub2RlIG9mIHJhdykgIHsKICAgICAgbGV0IGZuPWZhYyh0eXBlb2Ygbm9kZSA9PSAnc3RyaW5nJyA/IEVudGl0aWVzLlRleHQgOiBFbnRpdGllcy5FbGVtZW50KTsKICAgICAgeWllbGQgZm4obm9kZSwgdGhpcyk7CiAgICB9CiAgfQp9KTsKCmV4cG9ydCBmdW5jdGlvbiBOYW1lZE5vZGVNYXAob2JqLCBvd25lcikgewogIGlmKCF0aGlzKSByZXR1cm4gbmV3IE5hbWVkTm9kZU1hcChvYmosIG93bmVyKTsKCiAgbGV0IG5vZGVNYXA7CiAgY29uc3QgaXNBdHRyID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiBwcm9wIGluIG9iajsKICBjb25zdCB3cmFwQXR0ciA9ICh2YWx1ZSwgcHJvcCkgPT4gbmV3IEF0dHIoW29iaiwgcHJvcF0sIG5vZGVNYXApOwoKICByYXdOb2RlLnNldCh0aGlzLCBvYmopOwogIC8vcGFyZW50Tm9kZS5zZXQob2JqLG93bmVyKTsKICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgbm9kZU1hcCA9IG5ldyBQcm94eSh0aGlzLCB7CiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiB7CiAgICAgIC8vICBpZihwcm9wID09ICdpdGVtJykgcmV0dXJuIGkgPT4gaXNOYU4oK2kpID8gb2JqW2ldIDogb2JqW09iamVjdC5rZXlzKG9iailbK2ldXTsKICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoOwogICAgICBpZih0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJykgewogICAgICAgIGlmKCFpc05hTigrcHJvcCkpIHsKICAgICAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgICAgICAgIGlmKHByb3AgPj0gMCAmJiBwcm9wIDwga2V5cy5sZW5ndGgpIHJldHVybiB3cmFwQXR0cihvYmpba2V5c1srcHJvcF1dLCBrZXlzWytwcm9wXSk7CiAgICAgICAgfSBlbHNlIGlmKHByb3AgaW4gb2JqKSByZXR1cm4gd3JhcEF0dHIob2JqW3Byb3BdLCBwcm9wKTsKICAgICAgfQogICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICB9LAogICAgb3duS2V5czogdGFyZ2V0ID0+IE9iamVjdC5rZXlzKG9iaikKICB9KTsKCiAgcmF3Tm9kZS5zZXQobm9kZU1hcCwgb2JqKTsKICBvd25lckVsZW1lbnQuc2V0KG5vZGVNYXAsIG93bmVyKTsKCiAgcmV0dXJuIG5vZGVNYXA7Cn0KCk9iamVjdC5zZXRQcm90b3R5cGVPZihOYW1lZE5vZGVNYXAucHJvdG90eXBlLCBBcnJheS5wcm90b3R5cGUpOwoKZGVmaW5lKE5hbWVkTm9kZU1hcC5wcm90b3R5cGUsIHsKICBjb25zdHJ1Y3RvcjogTmFtZWROb2RlTWFwLAogIGdldCBwYXRoKCkgewogICAgbGV0IG93bmVyID0gTm9kZS5vd25lcih0aGlzKTsKICAgIHJldHVybiBOb2RlLnBhdGgob3duZXIpLmNvbmNhdChbJ2F0dHJpYnV0ZXMnXSk7CiAgfSwKCiAgaXRlbShrZXkpIHsKICAgIHJldHVybiB0aGlzW2tleV07CiAgfSwKICBzZXROYW1lZEl0ZW0oYXR0cikgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBjb25zdCB7IG5hbWUsIHZhbHVlIH0gPSBhdHRyOwogICAgcmF3W25hbWVdID0gdmFsdWU7CiAgfSwKICByZW1vdmVOYW1lZEl0ZW0obmFtZSkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBkZWxldGUgcmF3W25hbWVdOwogIH0sCiAgZ2V0TmFtZWRJdGVtKG5hbWUpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIHJhd1tuYW1lXTsKICB9LAoKICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgdGhpcy5pdGVtKGkpOwogIH0sCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdOYW1lZE5vZGVNYXAnLAogIFtpbnNwZWN0U3ltYm9sXSgpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHMgPSAnJzsKICAgIGZvcihsZXQgYXR0ciBpbiByYXcpIHsKICAgICAgcyArPSAnIFx4MWJbMTszNW0nICsgYXR0ciArICdceDFiWzE7MzZtPSInICsgcmF3W2F0dHJdICsgJyJceDFiWzBtJzsKICAgIH0KICAgIHJldHVybiAneycgKyBzICsgJyB9JzsKICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKS5yZWR1Y2UoKGFjYywgcHJvcCkgPT4gKHsgLi4uYWNjLCBbcHJvcF06IHRoaXNbcHJvcF0gfSksIHt9KTsKICB9Cn0pOwovKgogRWxlbWVudCBtZXRob2RzOgogICAgIGFmdGVyCiAgICBhbmltYXRlCiAgICBhcHBlbmQKICAgIGF0dGFjaFNoYWRvdwogICAgYmVmb3JlCiAgICBjbG9zZXN0CiAgICBjb21wdXRlZFN0eWxlTWFwCiAgICBjcmVhdGVTaGFkb3dSb290CiAgICBnZXRBbmltYXRpb25zCiAgICBnZXRBdHRyaWJ1dGUKICAgIGdldEF0dHJpYnV0ZU5hbWVzCiAgICBnZXRBdHRyaWJ1dGVOb2RlCiAgICBnZXRBdHRyaWJ1dGVOb2RlTlMKICAgIGdldEF0dHJpYnV0ZU5TCiAgICBnZXRCb3VuZGluZ0NsaWVudFJlY3QKICAgIGdldENsaWVudFJlY3RzCiAgICBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lCiAgICBnZXRFbGVtZW50c0J5VGFnTmFtZQogICAgZ2V0RWxlbWVudHNCeVRhZ05hbWVOUwogICAgaGFzQXR0cmlidXRlCiAgICBoYXNBdHRyaWJ1dGVOUwogICAgaGFzQXR0cmlidXRlcwogICAgaGFzUG9pbnRlckNhcHR1cmUKICAgIGluc2VydEFkamFjZW50RWxlbWVudAogICAgaW5zZXJ0QWRqYWNlbnRIVE1MCiAgICBpbnNlcnRBZGphY2VudFRleHQKICAgIG1hdGNoZXMKICAgIG1zWm9vbVRvCiAgICBwcmVwZW5kCiAgICBxdWVyeVNlbGVjdG9yCiAgICBxdWVyeVNlbGVjdG9yQWxsCiAgICByZWxlYXNlUG9pbnRlckNhcHR1cmUKICAgIHJlbW92ZQogICAgcmVtb3ZlQXR0cmlidXRlCiAgICByZW1vdmVBdHRyaWJ1dGVOb2RlCiAgICByZW1vdmVBdHRyaWJ1dGVOUwogICAgcmVwbGFjZUNoaWxkcmVuCiAgICByZXBsYWNlV2l0aAogICAgcmVxdWVzdEZ1bGxzY3JlZW4KICAgIHJlcXVlc3RQb2ludGVyTG9jawogICAgc2Nyb2xsCiAgICBzY3JvbGxCeQogICAgc2Nyb2xsSW50b1ZpZXcKICAgIHNjcm9sbEludG9WaWV3SWZOZWVkZWQKICAgIHNjcm9sbFRvCiAgICBzZXRBdHRyaWJ1dGUKICAgIHNldEF0dHJpYnV0ZU5vZGUKICAgIHNldEF0dHJpYnV0ZU5vZGVOUwogICAgc2V0QXR0cmlidXRlTlMKICAgIHNldENhcHR1cmUKICAgIHNldEhUTUwKICAgIHNldFBvaW50ZXJDYXB0dXJlCgoKRWxlbWVudCBwcm9wZXJ0aWVzOgogICAgYXNzaWduZWRTbG90UmVhZAogICAgYXR0cmlidXRlcwogICAgY2hpbGRFbGVtZW50Q291bnQKICAgIGNoaWxkcmVuCiAgICBjbGFzc0xpc3QKICAgIGNsYXNzTmFtZQogICAgY2xpZW50SGVpZ2h0CiAgICBjbGllbnRMZWZ0CiAgICBjbGllbnRUb3AKICAgIGNsaWVudFdpZHRoCiAgICBmaXJzdEVsZW1lbnRDaGlsZAogICAgaWQKICAgIGlubmVySFRNTAogICAgbGFzdEVsZW1lbnRDaGlsZAogICAgbG9jYWxOYW1lCiAgICBuYW1lc3BhY2VVUkkKICAgIG5leHRFbGVtZW50U2libGluZwogICAgb3V0ZXJIVE1MCiAgICBvcGVuT3JDbG9zZWRTaGFkb3dSb290CiAgICBwYXJ0CiAgICBwcmVmaXgKICAgIHByZXZpb3VzRWxlbWVudFNpYmxpbmcKICAgIHNjcm9sbEhlaWdodAogICAgc2Nyb2xsTGVmdAogICAgc2Nyb2xsTGVmdE1heAogICAgc2Nyb2xsVG9wCiAgICBzY3JvbGxUb3BNYXgKICAgIHNjcm9sbFdpZHRoCiAgICBzaGFkb3dSb290UmVhZAogICAgc2xvdAoKICovCmV4cG9ydCBjbGFzcyBFbGVtZW50IGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3Iob2JqLCBwYXJlbnQpIHsKICAgIHN1cGVyKG9iaiwgcGFyZW50KTsKCiAgICAvKiBsYXp5UHJvcGVydHkodGhpcywgJ2NsYXNzTGlzdCcsICgpID0+IG5ldyBUb2tlbkxpc3QoJ2NsYXNzJywgdGhpcykpOwogICAgZGVmaW5lKHRoaXMsIHsgY2xhc3NMaXN0OiBuZXcgVG9rZW5MaXN0KHRoaXMsICdjbGFzcycpIH0pOyovCiAgICBsYXp5UHJvcGVydGllcyh0aGlzLCB7IGNsYXNzTGlzdDogKCkgPT4gbmV3IFRva2VuTGlzdCh0aGlzLCAnY2xhc3MnKSB9KTsKICB9CgogIGdldCBwYXJlbnRFbGVtZW50KCkgewogICAgbGV0IG9iaiA9IHRoaXM7CiAgICBkbyB7CiAgICAgIG9iaiA9IG9iai5wYXJlbnROb2RlOwogICAgfSB3aGlsZShvYmoubm9kZVR5cGUgIT0gRUxFTUVOVF9OT0RFKTsKICAgIHJldHVybiBvYmo7CiAgfQoKICBnZXQgYXR0cmlidXRlcygpIHsKICAgIGxldCBmYWN0b3J5ID0gRmFjdG9yeS5mb3IodGhpcy5vd25lckRvY3VtZW50KTsKICAgIGlmKCFmYWN0b3J5KSBjb25zb2xlLmxvZyh0aGlzLmNvbnN0cnVjdG9yLm5hbWUsICdObyBmYWN0b3J5JywgdGhpcyk7CiAgICByZXR1cm4gZmFjdG9yeS5OYW1lZE5vZGVNYXAuY2FjaGUoKE5vZGUucmF3KHRoaXMpLmF0dHJpYnV0ZXMgPz89IHt9KSwgdGhpcyk7CiAgfQoKICAvKiAgc2V0IHRhZ05hbWUodikgewogICAgTm9kZS5yYXcodGhpcykudGFnTmFtZSA9IHY7CiAgfQogIGdldCB0YWdOYW1lKCkgewogICAgcmV0dXJuIE5vZGUucmF3KHRoaXMpLnRhZ05hbWU7CiAgfSovCiAgc2V0IG5vZGVOYW1lKHYpIHsKICAgIHRoaXMudGFnTmFtZSA9IHY7CiAgfQogIGdldCBub2RlTmFtZSgpIHsKICAgIHJldHVybiB0aGlzLnRhZ05hbWU7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4gfSA9IHRoaXM7CiAgICBsZXQgcyA9IGA8JHt0YWdOYW1lfWA7CiAgICBjb25zdCBhID0gYXR0cmlidXRlc1tpbnNwZWN0U3ltYm9sXShkZXB0aCArIDEsIG9wdHMpCiAgICAgIC5zbGljZSgxLCAtMSkKICAgICAgLnRyaW0oKTsKICAgIGxldCBjOwogICAgdHJ5IHsKICAgICAgYyA9IGNoaWxkcmVuW2luc3BlY3RTeW1ib2xdKGRlcHRoICsgMSwgb3B0cyk7CiAgICB9IGNhdGNoKGVycikgewogICAgICBjID0gJyc7CiAgICB9CiAgICBpZihhKSBzICs9ICcgJyArIGE7CiAgICBzICs9ICc+JzsKICAgIGlmKGMpIHMgKz0gYCR7Y308LyR7dGFnTmFtZX0+YDsKICAgIC8vY29uc29sZS5sb2codGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgJy5pbnNwZWN0Jywgcyk7CiAgICByZXR1cm4gczsKICB9CgogIGdldCBjaGlsZHJlbigpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwoKICAgIC8vIGNvbnNvbGUubG9nKCdyYXcnLGluc3BlY3QocmF3LCB7ZGVwdGg6IDB9KSk7CiAgICBsZXQgZmFjdG9yeSA9IEZhY3RvcnkuZm9yKHRoaXMub3duZXJEb2N1bWVudCk7CiAgICBpZighZmFjdG9yeSkgY29uc29sZS5sb2codGhpcy5jb25zdHJ1Y3Rvci5uYW1lLCAnTm8gZmFjdG9yeScsIHRoaXMpOwogICAgcmV0dXJuIGZhY3RvcnkuTm9kZUxpc3QuY2FjaGUoKHJhdy5jaGlsZHJlbiA/Pz0gW10pLCB0aGlzKTsKICB9CgogIGdldCBzdHlsZSgpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwoKICAgIC8vIGNvbnNvbGUubG9nKCdyYXcnLGluc3BlY3QocmF3LCB7ZGVwdGg6IDB9KSk7CiAgICBsZXQgZmFjdG9yeSA9IEZhY3RvcnkuZm9yKHRoaXMub3duZXJEb2N1bWVudCk7CiAgICBpZighZmFjdG9yeSkgY29uc29sZS5sb2codGhpcy5jb25zdHJ1Y3Rvci5uYW1lLCAnTm8gZmFjdG9yeScsIHRoaXMpOwogICAgcmV0dXJuIGZhY3RvcnkuQ1NTU3R5bGVEZWNsYXJhdGlvbi5jYWNoZSgocmF3LmF0dHJpYnV0ZXMgPz89IHt9KSwgdGhpcyk7CiAgfQoKICBnZXQgY2hpbGRFbGVtZW50Q291bnQoKSB7CiAgICByZXR1cm4gTm9kZS5yYXcodGhpcykuY2hpbGRyZW4/Lmxlbmd0aCA/PyAwOwogIH0KCiAgZ2V0IGZpcnN0RWxlbWVudENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgZWxlbWVudCA9IGNoaWxkcmVuLmZpbmQobiA9PiBpc09iamVjdChuKSAmJiAndGFnTmFtZScgaW4gbik7CiAgICBpZihlbGVtZW50KSByZXR1cm4gRWxlbWVudC5jYWNoZShlbGVtZW50LCB0aGlzLmNoaWxkcmVuKTsKICB9CgogIGdldCBsYXN0RWxlbWVudENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBpZihjaGlsZHJlbj8ubGVuZ3RoKQogICAgICBmb3IobGV0IGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkKICAgICAgICBpZihpc09iamVjdChjaGlsZHJlbltpXSkgJiYgJ3RhZ05hbWUnIGluIGNoaWxkcmVuW2ldKSByZXR1cm4gRWxlbWVudC5jYWNoZShjaGlsZHJlbltpXSwgdGhpcy5jaGlsZHJlbik7CiAgfQoKICBnZXQgaWQoKSB7CiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2lkJyk7CiAgfQoKICBnZXRBdHRyaWJ1dGUobmFtZSkgewogICAgcmV0dXJuIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IGF0dHJpYnV0ZXNbbmFtZV0pOwogIH0KCiAgZ2V0QXR0cmlidXRlTmFtZXMoKSB7CiAgICByZXR1cm4gRWxlbWVudC5hdHRyaWJ1dGVzKHRoaXMpKGF0dHJpYnV0ZXMgPT4gT2JqZWN0LmtleXMoYXR0cmlidXRlcykpOwogIH0KCiAgaGFzQXR0cmlidXRlKG5hbWUpIHsKICAgIHJldHVybiBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBuYW1lIGluIGF0dHJpYnV0ZXMpOwogIH0KCiAgaGFzQXR0cmlidXRlcygpIHsKICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZU5hbWVzKCkubGVuZ3RoID4gMDsKICB9CgogIHJlbW92ZUF0dHJpYnV0ZShuYW1lKSB7CiAgICBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBkZWxldGUgYXR0cmlidXRlc1tuYW1lXSk7CiAgfQoKICBnZXRBdHRyaWJ1dGVOb2RlKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07CiAgfQoKICBzZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHsKICAgIGlmKCEodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8ICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLnRvU3RyaW5nKSkpCiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEVsZW1lbnQuc2V0QXR0cmlidXRlKCk6IHZhbHVlIG5vdCBvZiB0eXBlICdzdHJpbmcnOiAke3ZhbHVlfWApOwoKICAgIHZhbHVlID0gdmFsdWUgKyAnJzsKCiAgICBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiAoYXR0cmlidXRlc1tuYW1lXSA9IHZhbHVlKSk7CiAgfQoKICBnZXQgaW5uZXJUZXh0KCkgewogICAgbGV0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHRleHRzID0gW107CiAgICBmb3IobGV0IFt2YWx1ZSwgcGF0aF0gb2YgZGVlcC5pdGVyYXRlKHJhdywgKG4sIGspID0+IHR5cGVvZiBuID09ICdzdHJpbmcnICYmIGtbay5sZW5ndGggLSAyXSA9PSAnY2hpbGRyZW4nKSkgewogICAgICB0ZXh0cy5wdXNoKHZhbHVlLnJlcGxhY2UoLzxzKy9nLCAnICcpKTsKICAgIH0KICAgIHJldHVybiB0ZXh0cy5qb2luKCcgJyk7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUoKG9iaiwgb3duZXIpID0+IG5ldyBFbGVtZW50KG9iaiwgb3duZXIpKTsKfQoKZGVmaW5lKEVsZW1lbnQsIHsKICBhdHRyaWJ1dGVzKGVsZW0pIHsKICAgIHJldHVybiBtb2RpZmllcihOb2RlLnJhdyhlbGVtKSwgJ2F0dHJpYnV0ZXMnKTsKICB9LAogIHRvU3RyaW5nKGVsZW0pIHsKICAgIHJldHVybiBlbGVtW2luc3BlY3RTeW1ib2xdKDAsIHt9KS5yZXBsYWNlKC9ceDFiXFtbXmEtel0qW2Etel0vZywgJycpOwogIH0KfSk7CgovL2RlZmluZShFbGVtZW50LCB7IGNhY2hlOiBNYWtlQ2FjaGUoRWxlbWVudCkgfSk7CmRlZmluZShFbGVtZW50LnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0VsZW1lbnQnLCBub2RlVHlwZTogRUxFTUVOVF9OT0RFIH0pOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCAndGFnTmFtZScsIHsKICBzZXQodikgewogICAgTm9kZS5yYXcodGhpcykudGFnTmFtZSA9IHY7CiAgfSwKICBnZXQoKSB7CiAgICByZXR1cm4gTm9kZS5yYXcodGhpcykudGFnTmFtZTsKICB9LAogIGVudW1lcmFibGU6IHRydWUKfSk7CgovKgogIERvY3VtZW50IG1ldGhvZHM6CiAgICBhZG9wdE5vZGUKICAgIGFwcGVuZAogICAgY2FwdHVyZUV2ZW50cwogICAgY2FyZXRSYW5nZUZyb21Qb2ludAogICAgY2xlYXIKICAgIGNsb3NlCiAgICBjcmVhdGVBdHRyaWJ1dGUKICAgIGNyZWF0ZUF0dHJpYnV0ZU5TCiAgICBjcmVhdGVDREFUQVNlY3Rpb24KICAgIGNyZWF0ZUNvbW1lbnQKICAgIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQKICAgIGNyZWF0ZUVsZW1lbnQKICAgIGNyZWF0ZUVsZW1lbnROUwogICAgY3JlYXRlRXZlbnQKICAgIGNyZWF0ZUV4cHJlc3Npb24KICAgIGNyZWF0ZU5TUmVzb2x2ZXIKICAgIGNyZWF0ZU5vZGVJdGVyYXRvcgogICAgY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uCiAgICBjcmVhdGVSYW5nZQogICAgY3JlYXRlVGV4dE5vZGUKICAgIGNyZWF0ZVRyZWVXYWxrZXIKICAgIGVsZW1lbnRGcm9tUG9pbnQKICAgIGVsZW1lbnRzRnJvbVBvaW50CiAgICBldmFsdWF0ZQogICAgZXhlY0NvbW1hbmQKICAgIGV4aXRGdWxsc2NyZWVuCiAgICBleGl0UG9pbnRlckxvY2sKICAgIGdldEVsZW1lbnRCeUlkCiAgICBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lCiAgICBnZXRFbGVtZW50c0J5TmFtZQogICAgZ2V0RWxlbWVudHNCeVRhZ05hbWUKICAgIGdldEVsZW1lbnRzQnlUYWdOYW1lTlMKICAgIGdldFNlbGVjdGlvbgogICAgaGFzRm9jdXMKICAgIGltcG9ydE5vZGUKICAgIG9wZW4KICAgIHByZXBlbmQKICAgIHF1ZXJ5Q29tbWFuZEVuYWJsZWQKICAgIHF1ZXJ5Q29tbWFuZEluZGV0ZXJtCiAgICBxdWVyeUNvbW1hbmRTdGF0ZQogICAgcXVlcnlDb21tYW5kU3VwcG9ydGVkCiAgICBxdWVyeUNvbW1hbmRWYWx1ZQogICAgcXVlcnlTZWxlY3RvcgogICAgcXVlcnlTZWxlY3RvckFsbAogICAgcmVsZWFzZUV2ZW50cwogICAgcmVwbGFjZUNoaWxkcmVuCiAgICB3ZWJraXRDYW5jZWxGdWxsU2NyZWVuCiAgICB3ZWJraXRFeGl0RnVsbHNjcmVlbgogICAgd3JpdGUKICAgIHdyaXRlbG4KICAgIGNvbnN0cnVjdG9yCiAgICBleGl0UGljdHVyZUluUGljdHVyZQogICAgZ2V0QW5pbWF0aW9ucwoKICBEb2N1bWVudCBwcm9wZXJ0aWVzOgogICAgaW1wbGVtZW50YXRpb24KICAgIFVSTAogICAgZG9jdW1lbnRVUkkKICAgIGNvbXBhdE1vZGUKICAgIGNoYXJhY3RlclNldAogICAgY2hhcnNldAogICAgaW5wdXRFbmNvZGluZwogICAgY29udGVudFR5cGUKICAgIGRvY3R5cGUKICAgIGRvY3VtZW50RWxlbWVudAogICAgeG1sRW5jb2RpbmcKICAgIHhtbFZlcnNpb24KICAgIHhtbFN0YW5kYWxvbmUKICAgIGRvbWFpbgogICAgcmVmZXJyZXIKICAgIGNvb2tpZQogICAgbGFzdE1vZGlmaWVkCiAgICByZWFkeVN0YXRlCiAgICB0aXRsZQogICAgZGlyCiAgICBib2R5CiAgICBoZWFkCiAgICBpbWFnZXMKICAgIGVtYmVkcwogICAgcGx1Z2lucwogICAgbGlua3MKICAgIGZvcm1zCiAgICBzY3JpcHRzCiAgICBjdXJyZW50U2NyaXB0CiAgICBkZWZhdWx0VmlldwogICAgZGVzaWduTW9kZQogICAgYW5jaG9ycwogICAgYXBwbGV0cwogICAgZmdDb2xvcgogICAgbGlua0NvbG9yCiAgICB2bGlua0NvbG9yCiAgICBhbGlua0NvbG9yCiAgICBiZ0NvbG9yCiAgICBhbGwKICAgIHNjcm9sbGluZ0VsZW1lbnQKICAgIGhpZGRlbgogICAgdmlzaWJpbGl0eVN0YXRlCiAgICB3YXNEaXNjYXJkZWQKICAgIGZlYXR1cmVQb2xpY3kKICAgIHdlYmtpdFZpc2liaWxpdHlTdGF0ZQogICAgd2Via2l0SGlkZGVuCiAgICBmdWxsc2NyZWVuRW5hYmxlZAogICAgZnVsbHNjcmVlbgogICAgd2Via2l0SXNGdWxsU2NyZWVuCiAgICB3ZWJraXRDdXJyZW50RnVsbFNjcmVlbkVsZW1lbnQKICAgIHdlYmtpdEZ1bGxzY3JlZW5FbmFibGVkCiAgICB3ZWJraXRGdWxsc2NyZWVuRWxlbWVudAogICAgcm9vdEVsZW1lbnQKICAgIGNoaWxkcmVuCiAgICBmaXJzdEVsZW1lbnRDaGlsZAogICAgbGFzdEVsZW1lbnRDaGlsZAogICAgY2hpbGRFbGVtZW50Q291bnQKICAgIGFjdGl2ZUVsZW1lbnQKICAgIHN0eWxlU2hlZXRzCiAgICBwb2ludGVyTG9ja0VsZW1lbnQKICAgIGZ1bGxzY3JlZW5FbGVtZW50CiAgICBhZG9wdGVkU3R5bGVTaGVldHMKICAgIGZvbnRzCiAgICBmcmFnbWVudERpcmVjdGl2ZQogICAgYWRkcmVzc1NwYWNlCiAgICB0aW1lbGluZQogICAgcGljdHVyZUluUGljdHVyZUVuYWJsZWQKICAgIHBpY3R1cmVJblBpY3R1cmVFbGVtZW50CiAqLwoKZXhwb3J0IGNsYXNzIERvY3VtZW50IGV4dGVuZHMgRWxlbWVudCB7CiAgY29uc3RydWN0b3Iob2JqLCBmYWN0b3J5KSB7CiAgICBzdXBlcihvYmosIG51bGwsIGZhY3RvcnkpOwogIH0KCiAgY3JlYXRlQXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gbmV3IEF0dHIoW251bGwsIG5hbWVdLCBudWxsKTsKICB9CgogIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSkgewogICAgcmV0dXJuIEVsZW1lbnQuY2FjaGUoeyB0YWdOYW1lLCBhdHRyaWJ1dGVzOiB7fSwgY2hpbGRyZW46IFtdIH0sIG51bGwpOwogIH0KCiAgY3JlYXRlVGV4dE5vZGUodGV4dCkgewogICAgcmV0dXJuIG5ldyBUZXh0KHRleHQpOwogIH0KCiAgY3JlYXRlVHJlZVdhbGtlcigKICAgIHJvb3QsCiAgICB3aGF0VG9TaG93ID0gVHJlZVdhbGtlci5UWVBFX0FMTCwKICAgIGZpbHRlciA9IHsgYWNjZXB0Tm9kZTogbm9kZSA9PiBUcmVlV2Fsa2VyLkZJTFRFUl9BQ0NFUFQgfSwKICAgIGV4cGFuZEVudGl0eVJlZmVyZW5jZXMgPSBmYWxzZQogICkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcocm9vdCk7CiAgICBsZXQgd2Fsa2VyOwogICAgd2Fsa2VyID0gbmV3IFRyZWVXYWxrZXIoCiAgICAgIHJhdywKICAgICAgKG4sIGspID0+IHR5cGVvZiBrID09ICdudW1iZXInICYmIHByZWQobiwgayksCiAgICAgIChuLCBwKSA9PiBHZXROb2RlKG4sIGRlZXAuZ2V0KHJhdywgcC5zbGljZSgwLCAtMSkpKQogICAgKTsKICAgIHJldHVybiB3YWxrZXI7CiAgfQoKICBnZXQgYm9keSgpIHsKICAgIGxldCBlbGVtZW50ID0gdGhpcy5sYXN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQ7CiAgICBpZigvXmJvZHkkL2kudGVzdChlbGVtZW50LnRhZ05hbWUpKSByZXR1cm4gZWxlbWVudDsKICB9CgogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgeyB0YWdOYW1lLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbiB9ID0gdGhpczsKICAgIC8vY29uc29sZS5sb2coJ0RvY3VtZW50Lmluc3BlY3QnKTsKICAgIHJldHVybiBgXHgxYlsxOzMxbURvY3VtZW50XHgxYlswbSAke3RhZ05hbWV9IGF0dHJpYnV0ZXM6ICR7YXR0cmlidXRlc1tpbnNwZWN0U3ltYm9sXSgKICAgICAgZGVwdGggKyAxLAogICAgICBvcHRzCiAgICApfSBjaGlsZHJlbjogJHtjaGlsZHJlbi5yZWR1Y2UoKGFjYywgYykgPT4gYWNjICsgY1tpbnNwZWN0U3ltYm9sXShkZXB0aCArIDIsIG9wdHMpLCAnJyl9PmA7CiAgfQp9CgpkZWZpbmUoRG9jdW1lbnQucHJvdG90eXBlLCB7IFtTeW1ib2wudG9TdHJpbmdUYWddOiAnRG9jdW1lbnQnLCBub2RlVHlwZTogRE9DVU1FTlRfTk9ERSB9KTsKCmV4cG9ydCBjbGFzcyBBdHRyIGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3IocmF3LCBvd25lcikgewogICAgLy8gY29uc29sZS5sb2coJ0F0dHInLCB7IHJhdywgb3duZXIgfSk7CiAgICBzdXBlcihyYXcsIG93bmVyKTsKCiAgICByYXdOb2RlLnNldCh0aGlzLCByYXcpOwogICAgb3duZXJFbGVtZW50LnNldCh0aGlzLCBvd25lcik7CgogICAgZGVmaW5lKHRoaXMsIHt9KTsKICB9CgogIGdldCBwYXRoKCkgewogICAgbGV0IHsgb3duZXJFbGVtZW50IH0gPSB0aGlzOwogICAgbGV0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXRoJyx7b3duZXIscGFyZW50fSk7CiAgICByZXR1cm4gTm9kZS5wYXRoKG93bmVyRWxlbWVudCkuY29uY2F0KFsnYXR0cmlidXRlcycsIG5hbWVdKTsKICB9CgogIGdldCBvd25lckVsZW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5vd25lcihOb2RlLm93bmVyKHRoaXMpKTsKICB9CiAgZ2V0IG93bmVyRG9jdW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5kb2N1bWVudCh0aGlzKTsKICB9CgogIGdldCBuYW1lKCkgewogICAgY29uc3QgWywgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIHJldHVybiBuYW1lOwogIH0KICBzZXQgbmFtZSh2KSB7CiAgICBOb2RlLnJhdyh0aGlzKVsxXSA9IHY7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICBjb25zdCBbb2JqLCBuYW1lXSA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIG9ialtuYW1lXTsKICB9CiAgc2V0IHZhbHVlKHYpIHsKICAgIGNvbnN0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICBvYmpbbmFtZV0gPSB2OwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKCkgewogICAgY29uc3QgW29iaiwgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGNvbnN0IHZhbHVlID0gb2JqW25hbWVdOwogICAgcmV0dXJuIGBceDFiWzE7MzVtJHtuYW1lfVx4MWJbMTszNG09JHtxdW90ZSh2YWx1ZSwgJyInKX1ceDFiWzBtYDsKICB9Cn0KCmRlZmluZShBdHRyLnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBBVFRSSUJVVEVfTk9ERSwKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0F0dHInCn0pOwoKZXhwb3J0IGNsYXNzIFRleHQgZXh0ZW5kcyBOb2RlIHsKICBzdGF0aWMgc3RvcmUgPSBnZXR0ZXJzZXR0ZXIocmF3Tm9kZSk7CgogIGNvbnN0cnVjdG9yKGtleSwgb3duZXIpIHsKICAgIHN1cGVyKG93bmVyID8ga2V5IDogbnVsbCwgb3duZXIpOwogICAgbGV0IGdldCwgc2V0OwogICAgaWYob3duZXIpIHsKICAgICAgbGV0IHJhdyA9IG93bmVyIGluc3RhbmNlb2YgTm9kZUxpc3QgPyBOb2RlLnJhdyhvd25lcikgOiBvd25lcjsKICAgICAgaWYoa2V5IGluIHJhdykgewogICAgICB9IGVsc2UgaWYocmF3LmluZGV4T2Yoa2V5KSAhPSAtMSkgewogICAgICAgIGtleSA9IHJhdy5pbmRleE9mKGtleSk7CiAgICAgIH0KICAgICAgZ2V0ID0gKCkgPT4gcmF3W2tleV0gPz8gJyc7CiAgICAgIHNldCA9IHZhbHVlID0+IChyYXdba2V5XSA9IHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIFRleHQuc3RvcmUodGhpcywga2V5KTsKICAgICAgZ2V0ID0gKCkgPT4gVGV4dC5zdG9yZSh0aGlzKTsKICAgICAgc2V0ID0gdmFsdWUgPT4gVGV4dC5zdG9yZSh0aGlzLCB2YWx1ZSk7CiAgICB9CiAgICB0ZXh0VmFsdWVzKHRoaXMsIG1vZGlmaWVyKGdldCwgc2V0KSk7CiAgICAvL2NvbnNvbGUubG9nKCdUZXh0JywgZ2V0KCkpOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gdGV4dFZhbHVlcyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZSk7CiAgfQoKICBnZXQgbm9kZVZhbHVlKCkgewogICAgcmV0dXJuIHRleHRWYWx1ZXModGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5kYXRhOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYFx4MWJbMTszMW0ke3RoaXNbU3ltYm9sLnRvU3RyaW5nVGFnXX1ceDFiWzBtIFx4MWJbMzg7MjsxOTI7MjU1MG0ke3F1b3RlKGRhdGEsICInIil9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChrZXksIG93bmVyKSA9PiBuZXcgVGV4dChrZXksIG93bmVyKSk7Cn0KClRleHQucHJvdG90eXBlLl9fcHJvdG9fXyA9IE5vZGUucHJvdG90eXBlOwpkZWZpbmUoVGV4dC5wcm90b3R5cGUsIHsKICBub2RlVHlwZTogVEVYVF9OT0RFLAogIG5vZGVOYW1lOiAnI3RleHQnLAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnVGV4dCcKfSk7Cgpjb25zdCBUYWcgPSBnZXR0ZXJzZXR0ZXIobmV3IFdlYWtNYXAoKSk7CgpleHBvcnQgY2xhc3MgQ29tbWVudCBleHRlbmRzIE5vZGUgewogIGNvbnN0cnVjdG9yKHJhdywgb3duZXIpIHsKICAgIHN1cGVyKHJhdywgb3duZXIpOwoKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIC8vY29uc29sZS5sb2coJ0NvbW1lbnQuY29uc3RydWN0b3IgcmF3JywgcmF3KTsKCiAgICBsZXQgZ2V0ID0gKCkgPT4gcmF3LnRhZ05hbWUgPz8gJyEtLS0tJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAocmF3LnRhZ05hbWUgPSB2YWx1ZSk7CgogICAgVGFnKAogICAgICB0aGlzLAogICAgICBtb2RpZmllcigKICAgICAgICAoKSA9PiBnZXQoKS5yZXBsYWNlKC9eIS0tKC4qKS0tJC9nLCAnJDEnKSwKICAgICAgICB2YWx1ZSA9PiBzZXQoYCEtLSR7dmFsdWV9LS1gKQogICAgICApCiAgICApOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gVGFnKHRoaXMpKHZhbHVlID0+ICc8IS0tJyArIHZhbHVlICsgJy0tPicpOwogIH0KCiAgZ2V0IG5vZGVWYWx1ZSgpIHsKICAgIHJldHVybiBUYWcodGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYENvbW1lbnQgXHgxYlszODsyOzE4NDswOzIzNG0ke2RhdGF9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChub2RlLCBvd25lcikgPT4gbmV3IENvbW1lbnQobm9kZSwgb3duZXIpKTsKfQoKQ29tbWVudC5wcm90b3R5cGUuX19wcm90b19fID0gTm9kZS5wcm90b3R5cGU7CmRlZmluZShDb21tZW50LnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBDT01NRU5UX05PREUsCiAgbm9kZU5hbWU6ICcjY29tbWVudCcsCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdDb21tZW50Jwp9KTsKCmNvbnN0IFRva2VucyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBjbGFzcyBUb2tlbkxpc3QgewogIGNvbnN0cnVjdG9yKG93bmVyLCBrZXkgPSAnY2xhc3MnKSB7CiAgICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgICBsZXQgeyBhdHRyaWJ1dGVzIH0gPSBOb2RlLnJhdyhvd25lcik7CgogICAgbGV0IGdldCA9ICgpID0+IGF0dHJpYnV0ZXNba2V5XSA/PyAnJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAoYXR0cmlidXRlc1trZXldID0gdmFsdWUpOwoKICAgIFRva2VucygKICAgICAgdGhpcywKICAgICAgbW9kaWZpZXIoCiAgICAgICAgKCkgPT4gZ2V0KCkudHJpbSgpLnNwbGl0KC9ccysvZyksCiAgICAgICAgdmFsdWUgPT4gc2V0KHZhbHVlLmpvaW4oJyAnKSkKICAgICAgKQogICAgKTsKICB9CgogIGdldCBsZW5ndGgoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmxlbmd0aCk7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmpvaW4oJyAnKSk7CiAgfQoKICBpdGVtKGluZGV4KSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlW2luZGV4XSk7CiAgfQoKICBjb250YWlucyh0b2tlbikgewogICAgcmV0dXJuIFRva2Vucyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZS5pbmRleE9mKHRva2VuKSAhPSAtMSk7CiAgfQoKICBhZGQoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIGlmKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSA9PSAtMSkgYXJyLnB1c2godG9rZW4pOwogICAgICB9CiAgICAgIHNldChhcnIpOwogICAgfSk7CiAgfQoKICByZW1vdmUoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIHdoaWxlKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSAhPSAtMSkgYXJyLnNwbGljZShpLCAxKTsKICAgICAgfQogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgdG9nZ2xlKHRva2VuLCBmb3JjZSkgewogICAgVG9rZW5zKHRoaXMpKChhcnIsIHNldCkgPT4gewogICAgICBsZXQgaTsKICAgICAgaWYoKGkgPSBhcnIuaW5kZXhPZih0b2tlbikpID09IC0xKSBhcnIucHVzaCh0b2tlbik7CiAgICAgIGVsc2UgYXJyLnNwbGljZShpLCAxKTsKICAgICAgc2V0KGFycik7CiAgICB9KTsKICB9CgogIHN1cHBvcnRzKHRva2VuKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJlcGxhY2Uob2xkVG9rZW4sIG5ld1Rva2VuKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBpZigoaSA9IGFyci5pbmRleE9mKG9sZFRva2VuKSkgIT0gLTEpIGFyci5zcGxpY2UoaSwgMSwgbmV3VG9rZW4pOwogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICByZXR1cm4gJ1Rva2VuTGlzdCBbJyArIFRva2Vucyh0aGlzKSgpLmpvaW4oJywnKSArICddJzsKICB9Cn0KCmRlZmluZShUb2tlbkxpc3QucHJvdG90eXBlLCB7CiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdUb2tlbkxpc3QnCn0pOwphcnJheUZhY2FkZShUb2tlbkxpc3QucHJvdG90eXBlLCAoY29udGFpbmVyLCBpKSA9PiBjb250YWluZXIuaXRlbShpKSk7Cgpjb25zdCBjc3NTdHlsZU1hcCA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBjbGFzcyBDU1NTdHlsZURlY2xhcmF0aW9uIHsKICBjb25zdHJ1Y3RvcihhdHRyT2JqLCBvd25lcikgewogICAgbGV0IGNzc1N0eWxlOwogICAgY29uc3QgZmFjdG9yeSA9IEZhY3RvcnkuZm9yKG93bmVyKTsKCiAgICByYXdOb2RlLnNldCh0aGlzLCBhdHRyT2JqKTsKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIGxldCBlbnRyaWVzID0gZ2V0RW50cmllcygpOwoKICAgIGxldCBpbnRlcm5hbCA9IHsKICAgICAgZW50cmllcywKICAgICAgb2JqOiBnZXRPYmooZW50cmllcyksCiAgICAgIHNldChrZXksIHZhbHVlKSB7CiAgICAgICAgdGhpcy5vYmpba2V5XSA9IHZhbHVlOwogICAgICAgIHNldEVudHJpZXMoKHRoaXMuZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMub2JqKSkpOwogICAgICB9LAogICAgICByZW1vdmUoa2V5KSB7CiAgICAgICAgaWYoa2V5IGluIHRoaXMub2JqKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5vYmpba2V5XTsKICAgICAgICAgIHNldEVudHJpZXMoKHRoaXMuZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMub2JqKSkpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBjc3NTdHlsZSA9IG5ldyBQcm94eSh0aGlzLCB7CiAgICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IHsKICAgICAgICBpZihwcm9wID09PSAnY29uc3RydWN0b3InKSByZXR1cm4gQ1NTU3R5bGVEZWNsYXJhdGlvbjsKICAgICAgICBpZih0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJykgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuIGludGVybmFsLmVudHJpZXMubGVuZ3RoOwogICAgICAgICAgaWYoIS8tLy50ZXN0KHByb3ApKSB7CiAgICAgICAgICAgIGxldCBkZWMgPSAvW2Etel1bQS1aXS8udGVzdChwcm9wKSA/IGRlY2FtZWxpemUocHJvcCkgOiBwcm9wOwogICAgICAgICAgICBpZihkZWMgaW4gaW50ZXJuYWwub2JqKSByZXR1cm4gaW50ZXJuYWwub2JqW2RlY107CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qICBpZihwcm9wIGluIENTU1N0eWxlRGVjbGFyYXRpb24ucHJvdG90eXBlKSByZXR1cm4gQ1NTU3R5bGVEZWNsYXJhdGlvbi5wcm90b3R5cGVbcHJvcF07Ki8KCiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpOwogICAgICB9LAogICAgICBzZXQ6ICh0YXJnZXQsIHByb3AsIHZhbHVlKSA9PiB7CiAgICAgICAgaWYodHlwZW9mIHByb3AgPT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmKHByb3AgPT0gJ2xlbmd0aCcpIHJldHVybjsKICAgICAgICAgIGlmKCEvLS8udGVzdChwcm9wKSkgewogICAgICAgICAgICBsZXQgZGVjID0gL1thLXpdW0EtWl0vLnRlc3QocHJvcCkgPyBkZWNhbWVsaXplKHByb3ApIDogcHJvcDsKICAgICAgICAgICAgaW50ZXJuYWwuc2V0KGRlYywgdmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSk7CiAgICAgIH0sCiAgICAgIGRlbGV0ZVByb3BlcnR5OiAodGFyZ2V0LCBwcm9wKSA9PiB7CiAgICAgICAgaWYodHlwZW9mIHByb3AgPT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmKCEvLS8udGVzdChwcm9wKSkgewogICAgICAgICAgICBsZXQgZGVjID0gL1thLXpdW0EtWl0vLnRlc3QocHJvcCkgPyBkZWNhbWVsaXplKHByb3ApIDogcHJvcDsKICAgICAgICAgICAgaW50ZXJuYWwucmVtb3ZlKGRlYyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcCk7CiAgICAgIH0gLyosCiAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcCkgPT4gewogICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApOwogICAgICB9Ki8KICAgIH0pOwoKICAgIGNzc1N0eWxlTWFwKGNzc1N0eWxlLCBpbnRlcm5hbCk7CgogICAgcmF3Tm9kZS5zZXQoY3NzU3R5bGUsIGF0dHJPYmopOwogICAgb3duZXJFbGVtZW50LnNldChjc3NTdHlsZSwgb3duZXIpOwoKICAgIGZ1bmN0aW9uIHNldFN0eWxlKHN0cikgewogICAgICBhdHRyT2JqLnN0eWxlID0gc3RyOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3R5bGUoKSB7CiAgICAgIHJldHVybiBhdHRyT2JqLnN0eWxlOwogICAgfQogICAgZnVuY3Rpb24gZ2V0RW50cmllcygpIHsKICAgICAgbGV0IGEgPSBnZXRTdHlsZSgpCiAgICAgICAgLnNwbGl0KC9ccyo7XHMqL2cpCiAgICAgICAgLmZpbHRlcihpdGVtID0+IC86Ly50ZXN0KGl0ZW0pKTsKICAgICAgcmV0dXJuIGEubWFwKGl0ZW0gPT4gaXRlbS5zcGxpdCgvXHMqOlxzKi8pKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNldEVudHJpZXMoZW50KSB7CiAgICAgIGxldCBzdHIgPSBlbnQubWFwKChbaywgdl0pID0+IGAke2t9OiR7dn07YCkuam9pbignJyk7CiAgICAgIHNldFN0eWxlKHN0cik7CiAgICAgIHJldHVybiBzdHI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T2JqKGVudCA9IGludGVybmFsLmVudHJpZXMpIHsKICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhlbnQpOwogICAgfQoKICAgIHJldHVybiBjc3NTdHlsZTsKICB9CgogIC8qIGdldCBjc3NUZXh0KCkgewogICAgIGNvbnN0IGludGVybmFsID0gY3NzU3R5bGVNYXAodGhpcyk7CiAgICByZXR1cm4gaW50ZXJuYWwuZW50cmllcy5tYXAoKFtrLCB2XSkgPT4gYCR7a306JHt2fTtgKS5qb2luKCcnKTsKICB9Ki8KCiAgc2V0UHJvcGVydHkoaywgdikgewogICAgY29uc3QgaW50ZXJuYWwgPSBjc3NTdHlsZU1hcCh0aGlzKTsKICAgIGludGVybmFsLnNldChrLCB2KTsKICB9CgogIGl0ZW0oaW5kZXgpIHsKICAgIGNvbnN0IGludGVybmFsID0gY3NzU3R5bGVNYXAodGhpcyk7CiAgICByZXR1cm4gaW50ZXJuYWwuZW50cmllc1tpbmRleF1bMF07CiAgfQoKICBnZXRQcm9wZXJ0eVZhbHVlKGspIHsKICAgIGNvbnN0IGludGVybmFsID0gY3NzU3R5bGVNYXAodGhpcyk7CiAgICByZXR1cm4gaW50ZXJuYWwub2JqW2tdOwogIH0KCiAgcmVtb3ZlUHJvcGVydHkoaykgewogICAgY29uc3QgaW50ZXJuYWwgPSBjc3NTdHlsZU1hcCh0aGlzKTsKICAgIGludGVybmFsLnJlbW92ZShrKTsKICB9Cn0KCmRlZmluZShDU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZSwgewogIGNvbnN0cnVjdG9yOiBDU1NTdHlsZURlY2xhcmF0aW9uLAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnQ1NTU3R5bGVEZWNsYXJhdGlvbicsCiAgZ2V0IGNzc1RleHQoKSB7CiAgICBsZXQgeyBzdHlsZSB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICByZXR1cm4gc3R5bGU7CiAgfSwKCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBsZXQgc3RyID0gaW5zcGVjdCh0aGlzLCBkZXB0aCArIDEsIHsgLi4ub3B0cywgY3VzdG9tSW5zcGVjdDogZmFsc2UgfSk7CiAgICBzdHIgPSBzdHIucmVwbGFjZSgvXFtPYmplY3QuKi9nLCAnJyk7CiAgICByZXR1cm4gc3RyICsgdGhpcy5jc3NUZXh0OwogIH0KfSk7CgpmdW5jdGlvbiBNZW1icmFuZShpbnN0YW5jZSwgb2JqLCBwcm90bywgd3JhcFByb3AsIHdyYXBFbGVtZW50KSB7CiAgdGhyb3cgbmV3IEVycm9yKCdNZW1icmFuZScpOwogIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UsIHsKICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+CiAgICAgIHdyYXBQcm9wKHByb3ApID8gd3JhcEVsZW1lbnQob2JqW3Byb3BdLCBwcm9wKSA6IFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLAogICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAod3JhcFByb3AocHJvcCkgPyB0cnVlIDogUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wKSksCiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICh0YXJnZXQsIHByb3ApID0+CiAgICAgIHdyYXBQcm9wKHByb3ApCiAgICAgICAgPyB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiB3cmFwRWxlbWVudChvYmpbcHJvcF0sIHByb3ApCiAgICAgICAgICB9CiAgICAgICAgOiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApLAogICAgZ2V0UHJvdG90eXBlT2Y6IHRhcmdldCA9PiBwcm90byA/PyBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5zdGFuY2UpLAogICAgc2V0UHJvdG90eXBlT2Y6ICh0YXJnZXQsIHApID0+IChwcm90byA9IHApLAogICAgb3duS2V5czogdGFyZ2V0ID0+IFsuLi5SZWZsZWN0Lm93bktleXModGFyZ2V0KV0KICB9KTsKfQoKLypleHBvcnQgZnVuY3Rpb24gTWFrZUZhY3RvcnkoKSB7CiAgY29uc3QgbWVtbyA9IG1lbW9pemUoKHJhdywgb3duZXIsIGN0b3IpID0+IHsKICAgIGNvbnN0IGlzQXJyYXkgPSBjdG9yID09IE5vZGVMaXN0IHx8IG93bmVyLmNoaWxkcmVuID09IHJhdzsKICAgIGNvbnN0IGlzRWxlbWVudCA9IGN0b3IgPT0gRWxlbWVudCB8fCAob3duZXIuY2hpbGRyZW4gIT0gcmF3ICYmIG93bmVyLmF0dHJpYnV0ZXMgIT0gcmF3KTsKICAgIGNvbnNvbGUubG9nKCdceDFiWzM4OzI7MTEyOzExMjsyNTJtTWVtb2l6ZVx4MWJbMG0nLCB7IGlzQXJyYXksIGlzRWxlbWVudCwgcmF3IH0pOwoKICAgIGlmKFN5bWJvbC50b1N0cmluZ1RhZyBpbiBvd25lcikgb3duZXIgPSBOb2RlLnJhdyhvd25lcik7CiAgICBjb25zdCBrZXkgPSBpc0FycmF5ID8gJ2NoaWxkcmVuJyA6ICFpc0VsZW1lbnQgPyAnYXR0cmlidXRlcycgOiBrZXlPZihvd25lciwgcmF3KTsKICAgIGNvbnN0IGxpc3QgPSBvd25lcltrZXldOwogICAgY3RvciA/Pz0gb3duZXIuYXR0cmlidXRlcyA9PSByYXcgPyBOYW1lZE5vZGVNYXAgOiBvd25lci5jaGlsZHJlbiA9PSByYXcgPyBOb2RlTGlzdCA6IEVsZW1lbnQ7CiAgICBsZXQgcmV0ID0gbmV3IGN0b3IocmF3LCBvd25lciwgY3Rvcik7CiAgICAvL2NvbnNvbGUubG9nKCdceDFiWzM4OzI7MTEyOzExMjsyNTJtTWVtb2l6ZVx4MWJbMG0nLCB7IGtleSwgY3RvciwgcmV0IH0pOwogICAgcmV0dXJuIHJldDsKICB9KTsKCiAgcmV0dXJuIGRlZmluZSgKICAgIChyYXcsIG93bmVyLCBjdG9yKSA9PiB7CiAgICAgIGxldCByZXQ7CiAgICAgIGlmKChyZXQgPSBtZW1vLmdldChyYXcpKSkgewogICAgICAgIHJldCBpbnN0YW5jZW9mIE5vZGUgPyBwYXJlbnROb2RlLnNldChyYXcsIG93bmVyKSA6IG93bmVyTm9kZS5zZXQocmF3LCBvd25lcik7CiAgICAgICAgcmV0dXJuIHJldDsKICAgICAgfQogICAgICByZXR1cm4gbWVtbyhyYXcsIG93bmVyLCBjdG9yKTsKICAgIH0sCiAgICB7IG1lbW8gfQogICk7Cn0qLwoKLypsZXQgbWFwID0gbmV3IFdlYWtNYXAoKTsKCmV4cG9ydCBmdW5jdGlvbiBGYWN0b3J5KHJhdywgb3duZXIsIGN0b3IpIHsKICBsZXQgb2JqOwogIGlmKGlzT2JqZWN0KHJhdykgJiYgKG9iaiA9IG1hcC5nZXQocmF3KSkpIHsKICAgIG93bmVyRWxlbWVudC5zZXQob2JqLCBvd25lcik7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgY29uc3QgaXNBcnJheSA9IGFyZyA9PiBBcnJheS5pc0FycmF5KGFyZyk7CiAgY29uc3QgaXNBdHRyaWJ1dGVzID0gYXJnID0+IGlzT2JqZWN0KGFyZykgJiYgIWlzQXJyYXkoYXJnKSAmJiAhKCd0YWdOYW1lJyBpbiBhcmcpOwoKICBjdG9yID8/PSBpc0FycmF5KHJhdykgPyBOb2RlTGlzdCA6IGlzQXR0cmlidXRlcyhyYXcpID8gTmFtZWROb2RlTWFwIDogdHlwZW9mIHJhdyA9PSAnc3RyaW5nJyA/IFRleHQgOiBFbGVtZW50OwoKICBvYmogPSBuZXcgY3RvcihyYXcsIG93bmVyKTsKICByZXR1cm4gb2JqOwp9Ki8KCmV4cG9ydCBmdW5jdGlvbiBHZXRUeXBlKHJhdywgb3duZXIsIGN0b3IpIHsKICBjb25zdCBpc0FycmF5ID0gYXJnID0+IEFycmF5LmlzQXJyYXkoYXJnKTsKICBjb25zdCBpc0F0dHJpYnV0ZXMgPSBhcmcgPT4gaXNPYmplY3QoYXJnKSAmJiAhaXNBcnJheShhcmcpICYmICEoJ3RhZ05hbWUnIGluIGFyZyk7CgogIGlmKGlzQXJyYXkocmF3KSkgcmV0dXJuIEVudGl0aWVzLk5vZGVMaXN0OwogIGlmKCd0YWdOYW1lJyBpbiByYXcpIHJldHVybiAvXiEtLS4qLS0kLy50ZXN0KHJhdy50YWdOYW1lKSA/IEVudGl0aWVzLkNvbW1lbnQgOiBFbnRpdGllcy5FbGVtZW50OwogIGlmKHR5cGVvZiByYXcgPT0gJ3N0cmluZycpIHJldHVybiBFbnRpdGllcy5UZXh0OwogIGlmKHR5cGVvZiByYXcgPT0gJ29iamVjdCcpIHJldHVybiBFbnRpdGllcy5OYW1lZE5vZGVNYXA7Cn0KAAAAAAAAAABYlgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAhj0AAAAAAACGPQAAAAAAAAAAAAAAAPC/"
				],
				[
					212,
					1,
					"insert",
					{
						"characters": ".bind"
					},
					"BQAAANM2AAAAAAAA1DYAAAAAAAAAAAAA1DYAAAAAAADVNgAAAAAAAAAAAADVNgAAAAAAANY2AAAAAAAAAAAAANY2AAAAAAAA1zYAAAAAAAAAAAAA1zYAAAAAAADYNgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0zYAAAAAAADTNgAAAAAAAAAAAAAAAPC/"
				],
				[
					213,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAANg2AAAAAAAA2jYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA2DYAAAAAAADYNgAAAAAAAAAAAAAAAPC/"
				],
				[
					214,
					1,
					"insert",
					{
						"characters": "this"
					},
					"BAAAANk2AAAAAAAA2jYAAAAAAAAAAAAA2jYAAAAAAADbNgAAAAAAAAAAAADbNgAAAAAAANw2AAAAAAAAAAAAANw2AAAAAAAA3TYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA2TYAAAAAAADZNgAAAAAAAAAAAAAAAPC/"
				],
				[
					292,
					1,
					"insert",
					{
						"characters": ".for"
					},
					"BAAAAB89AAAAAAAAID0AAAAAAAAAAAAAID0AAAAAAAAhPQAAAAAAAAAAAAAhPQAAAAAAACI9AAAAAAAAAAAAACI9AAAAAAAAIz0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAHz0AAAAAAAAfPQAAAAAAAAAAAAAAAPC/"
				],
				[
					299,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAACM9AAAAAAAAJD0AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAIz0AAAAAAAAjPQAAAAAAAAAAAAAAAPC/"
				],
				[
					341,
					1,
					"left_delete",
					null,
					"AQAAACM9AAAAAAAAIz0AAAAAAAABAAAAdA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAJD0AAAAAAAAkPQAAAAAAAAAAAAAAAPC/"
				],
				[
					356,
					1,
					"right_delete",
					null,
					"AQAAAAs8AAAAAAAACzwAAAAAAADDAAAACiAgLyogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICByZXR1cm4gdXRpbAogICAgICAucmFuZ2UoMCwgcmF3Lmxlbmd0aCAtIDEpCiAgICAgIC5tYXAobiA9PiBpbnNwZWN0KHRoaXNbbl0sIGRlcHRoLTEsb3B0cykpCiAgICAgIC5qb2luKCcsXG4gICcpOwogIH0sKi8K",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzjwAAAAAAAALPAAAAAAAAAAAAAAAAAAA"
				],
				[
					381,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAAo8AAAAAAAADDwAAAAAAAAAAAAApTsAAAAAAACnOwAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAApTsAAAAAAAAKPAAAAAAAAAAAAAAAAPC/"
				],
				[
					385,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAAColQAAaW1wb3J0ICogYXMgZGVlcCBmcm9tICdkZWVwJzsKaW1wb3J0IHsgVHJlZVdhbGtlciB9IGZyb20gJ3RyZWVfd2Fsa2VyJzsKaW1wb3J0IHsgY2FtZWxpemUsIGRlY2FtZWxpemUsIGlzT2JqZWN0LCBkZWZpbmUsIHF1b3RlLCByYW5nZSwgYXNzZXJ0LCBtZW1vaXplLCBnZXRzZXQsIG1vZGlmaWVyLCBnZXR0ZXJzZXR0ZXIsIGFycmF5RmFjYWRlLCBsYXp5UHJvcGVydGllcyB9IGZyb20gJ3V0aWwnOwppbXBvcnQgeyByZWFkIGFzIHJlYWRYTUwsIHdyaXRlIGFzIHdyaXRlWE1MIH0gZnJvbSAneG1sJzsKaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnOwppbXBvcnQgeyBwYXJzZVNlbGVjdG9ycyB9IGZyb20gJy4vY3NzMy1zZWxlY3RvcnMuanMnOwppbXBvcnQgeyBpbnNwZWN0U3ltYm9sIH0gZnJvbSAndXRpbCc7Cgpjb25zdCByYXdOb2RlID0gbmV3IFdlYWtNYXAoKTsKY29uc3QgcGFyZW50Tm9kZSA9IG5ldyBNYXAoKTsKY29uc3Qgb3duZXJFbGVtZW50ID0gbmV3IE1hcCgpOwpjb25zdCB0ZXh0VmFsdWVzID0gZ2V0dGVyc2V0dGVyKG5ldyBXZWFrTWFwKCkpOwoKY29uc3QgRUxFTUVOVF9OT0RFID0gMTsKY29uc3QgQVRUUklCVVRFX05PREUgPSAyOwpjb25zdCBURVhUX05PREUgPSAzOwpjb25zdCBDREFUQV9TRUNUSU9OX05PREUgPSA0Owpjb25zdCBFTlRJVFlfUkVGRVJFTkNFX05PREUgPSA1Owpjb25zdCBFTlRJVFlfTk9ERSA9IDY7CmNvbnN0IFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERSA9IDc7CmNvbnN0IENPTU1FTlRfTk9ERSA9IDg7CmNvbnN0IERPQ1VNRU5UX05PREUgPSA5Owpjb25zdCBET0NVTUVOVF9UWVBFX05PREUgPSAxMDsKY29uc3QgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSA9IDExOwpjb25zdCBOT1RBVElPTl9OT0RFID0gMTI7Cgpjb25zdCBjcmVhdGVGdW5jdGlvbnMgPSBbCiAgLAogICdjcmVhdGVFbGVtZW50JywKICAnY3JlYXRlQXR0cmlidXRlJywKICAnY3JlYXRlVGV4dCcsCiAgJ2NyZWF0ZUNEQVRBU2VjdGlvbicsCiAgJ2NyZWF0ZUVudGl0eVJlZmVyZW5jZScsCiAgJ2NyZWF0ZUVudGl0eScsCiAgJ2NyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbicsCiAgJ2NyZWF0ZUNvbW1lbnQnLAogICdjcmVhdGVEb2N1bWVudCcsCiAgJ2NyZWF0ZURvY3VtZW50VHlwZScsCiAgJ2NyZWF0ZURvY3VtZW50RnJhZ21lbnQnLAogICdjcmVhdGVOb3RhdGlvbicKXTsKCmNvbnN0IEVudGl0eU5hbWVzID0gWwogICdEb2N1bWVudCcsCiAgJ05vZGUnLAogICdOb2RlTGlzdCcsCiAgJ0VsZW1lbnQnLAogICdOYW1lZE5vZGVNYXAnLAogICdBdHRyJywKICAnVGV4dCcsCiAgJ0NvbW1lbnQnLAogICdUb2tlbkxpc3QnLAogICdDU1NTdHlsZURlY2xhcmF0aW9uJwpdOwpjb25zdCBFbnRpdHlUeXBlID0gbmFtZSA9PiBFbnRpdHlOYW1lcy5pbmRleE9mKG5hbWUpOwpleHBvcnQgY29uc3QgRW50aXRpZXMgPSBFbnRpdHlOYW1lcy5yZWR1Y2UoKG9iaiwgbmFtZSwgaWQpID0+ICh7IFtuYW1lXTogaWQsIC4uLm9iaiB9KSwge30pOwoKY29uc3Qga2V5T2YgPSAob2JqLCB2YWx1ZSkgPT4gewogIGZvcihsZXQga2V5IGluIG9iaikgaWYob2JqW2tleV0gPT09IHZhbHVlKSByZXR1cm4ga2V5OwogIHJldHVybiAtMTsKfTsKCmNsYXNzIERlcmVmZXJlbmNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgY29uc3RydWN0b3Iob2JqLCBpLCBwYXRoLCBlcnJvcikgewogICAgc3VwZXIoYGRlcmVmZXJlbmNlIGVycm9yIG9mIDwke29ian0+IGF0ICR7aX0gJyR7cGF0aC5zbGljZSgwLCBpKX0nOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgfQp9CgovL2NvbnN0IGFwcGx5UGF0aCA9IChwYXRoLCBvYmopID0+IHBhdGgucmVkdWNlKChhY2MsIHBhcnQpID0+IGFjY1twYXJ0XSwgb2JqKTsKZnVuY3Rpb24gYXBwbHlQYXRoKHBhdGgsIG9iaikgewogIGxldCB7IGxlbmd0aCB9ID0gcGF0aDsKICBsZXQgcHJvcCA9IG9iajsKICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIGxldCBrZXkgPSBwYXRoW2ldOwogICAgdHJ5IHsKICAgICAgcHJvcCA9IHByb3Bba2V5XTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgdGhyb3cgbmV3IERlcmVmZXJlbmNlRXJyb3Iob2JqLCBpLCBwYXRoLCBlcnJvcik7CiAgICB9CiAgfQogIHJldHVybiBwcm9wOwp9CgpmdW5jdGlvbiogcXVlcnkocm9vdCwgc2VsZWN0b3JzLCB0ID0gKHBhdGgsIHJvb3QpID0+IHBhdGgpIHsKICBsZXQgcmVzdWx0ID0gW107CgogIGZvcihsZXQgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKQogICAgZm9yKGxldCBwYXRoIG9mIGRlZXAuaXRlcmF0ZShyb290LCBzZWxlY3RvciwgZGVlcC5SRVRVUk5fUEFUSCkpIHsKICAgICAgeWllbGQgdChwYXRoLCByb290KTsKICAgIH0KfQoKZXhwb3J0IGNvbnN0IG5vZGVUeXBlcyA9IFsKICAsCiAgJ0VMRU1FTlRfTk9ERScsCiAgJ0FUVFJJQlVURV9OT0RFJywKICAnVEVYVF9OT0RFJywKICAnQ0RBVEFfU0VDVElPTl9OT0RFJywKICAnRU5USVRZX1JFRkVSRU5DRV9OT0RFJywKICAnRU5USVRZX05PREUnLAogICdQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREUnLAogICdDT01NRU5UX05PREUnLAogICdET0NVTUVOVF9OT0RFJywKICAnRE9DVU1FTlRfVFlQRV9OT0RFJywKICAnRE9DVU1FTlRfRlJBR01FTlRfTk9ERScsCiAgJ05PVEFUSU9OX05PREUnCl07CgpmdW5jdGlvbiBjaGVja05vZGUobm9kZSkgewogIGlmKCFpc09iamVjdChub2RlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbm9kZSBpcyBub3QgYW4gb2JqZWN0Jyk7CiAgLy9pZighbm9kZVtTeW1ib2wudG9TdHJpbmdUYWddKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub2RlIGRvZXMgbm90IGhhdmUgW1N5bWJvbC50b1N0cmluZ1RhZ10nKTsKICAvL2lmKE9iamVjdC5nZXRQcm90b3R5cGVPZihub2RlKSA9PSBPYmplY3QucHJvdG90eXBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub2RlIGlzIE9iamVjdCcpOwp9CgpleHBvcnQgZnVuY3Rpb24gUHJvdG90eXBlcygKICBjb25zdHJ1Y3RvcnMgPSB7CiAgICBEb2N1bWVudCwKICAgIE5vZGUsCiAgICBOb2RlTGlzdCwKICAgIEVsZW1lbnQsCiAgICBOYW1lZE5vZGVNYXAsCiAgICBBdHRyLAogICAgVGV4dCwKICAgIENvbW1lbnQsCiAgICBUb2tlbkxpc3QsCiAgICBDU1NTdHlsZURlY2xhcmF0aW9uCiAgfQopIHsKICBsZXQgcHJvdG90eXBlcyA9IHt9OwogIGZvcihsZXQga2V5IGluIGNvbnN0cnVjdG9ycykgewogICAgcHJvdG90eXBlc1trZXldID0gY29uc3RydWN0b3JzW2tleV0ucHJvdG90eXBlOwogIH0KICByZXR1cm4gcHJvdG90eXBlczsKfQoKbGV0IGZhY3RvcmllcyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBmdW5jdGlvbiBGYWN0b3J5KHR5cGVzID0gUHJvdG90eXBlcygpKSB7CiAgbGV0IHJldDsKCiAgaWYobmV3LnRhcmdldCkgewogICAgcmV0ID0gZnVuY3Rpb24gRmFjdG9yeSh0eXBlKSB7CiAgICAgIGlmKHR5cGVvZiB0eXBlID09ICdudW1iZXInKSB0eXBlID0gRW50aXR5TmFtZXNbdHlwZV07CiAgICAgIC8vIGlmKHR5cGVvZiB0eXBlID09ICdzdHJpbmcnKSB0eXBlID0gRW50aXR5VHlwZSh0eXBlKTsKCiAgICAgIHJldHVybiByZXRbdHlwZV0ubmV3OwogICAgfTsKICAgIGlmKEFycmF5LmlzQXJyYXkodHlwZXMpKSB0eXBlcyA9IHR5cGVzLnJlZHVjZSgoYWNjLCBwcm90bywgaSkgPT4gKHsgW0VudGl0eU5hbWVzW2ldXTogcHJvdG8sIC4uLmFjYyB9KSwge30pOwoKICAgIGlmKHR5cGVvZiB0eXBlcyAhPSAnZnVuY3Rpb24nKSB7CiAgICAgIGxldCBvYmogPSB0eXBlczsKICAgICAgdHlwZXMgPSAodHlwZSwgLi4uYXJncykgPT4gewogICAgICAgIGlmKHR5cGVvZiB0eXBlID09ICdudW1iZXInKSB0eXBlID0gRW50aXR5TmFtZXNbdHlwZV07CiAgICAgICAgbGV0IHByb3RvID0gb2JqW3R5cGVdOwogICAgICAgIHJldHVybiBuZXcgcHJvdG8uY29uc3RydWN0b3IoLi4uYXJncyk7CiAgICAgIH07CiAgICAgIHR5cGVzLmNhY2hlID0gKHR5cGUsIC4uLmFyZ3MpID0+IHsKICAgICAgICBpZih0eXBlb2YgdHlwZSA9PSAnbnVtYmVyJykgdHlwZSA9IEVudGl0eU5hbWVzW3R5cGVdOwogICAgICAgIGxldCBwcm90byA9IG9ialt0eXBlXTsKICAgICAgICByZXR1cm4gKHByb3RvLmNvbnN0cnVjdG9yLmNhY2hlID8/IE1ha2VDYWNoZSgoLi4uYSkgPT4gbmV3IHByb3RvLmNvbnN0cnVjdG9yKC4uLmEpKSkoLi4uYXJncyk7CiAgICAgIH07CiAgICB9CgogICAgZm9yKGxldCBpID0gMDsgaSA8IEVudGl0eU5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBuYW1lID0gRW50aXR5TmFtZXNbaV07CiAgICAgIHJldFtuYW1lXSA9IHsgbmV3OiAoLi4uYXJncykgPT4gdHlwZXMobmFtZSwgLi4uYXJncyksIGNhY2hlOiAoLi4uYXJncykgPT4gdHlwZXMuY2FjaGUobmFtZSwgLi4uYXJncykgfTsKICAgIH0KCiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgRmFjdG9yeS5wcm90b3R5cGUpOwogIH0KCiAgcmV0dXJuIGZhY3Rvcmllcyh0eXBlcyk7Cn0KCk9iamVjdC5zZXRQcm90b3R5cGVPZihGYWN0b3J5LnByb3RvdHlwZSwgRnVuY3Rpb24ucHJvdG90eXBlKTsKCmRlZmluZShGYWN0b3J5LCB7CiAgZm9yOiBub2RlID0+IHsKICAgIC8vcmV0dXJuIE5vZGUuaGllcihub2RlKS5yZWR1Y2VSaWdodCgoYWNjLCBub2RlKSA9PiBhY2MgPz8gZmFjdG9yaWVzKG5vZGUpKTsKICAgIGxldCBwID0gbm9kZTsKICAgIGRvIHsKICAgICAgbGV0IGYgPSBmYWN0b3JpZXMoTm9kZS5yYXcocCkpOwogICAgICBpZihmKSByZXR1cm4gZjsKICAgIH0gd2hpbGUoKHAgPSBOb2RlLnBhcmVudChwKSA/PyBOb2RlLm93bmVyKHApKSk7CgogICAgZm9yKGxldCBuIG9mIE5vZGUuaGllcihub2RlKSkgewogICAgICBsZXQgZiA9IGZhY3RvcmllcyhOb2RlLnJhdyhuKSk7CiAgICAgIGlmKGYpIHJldHVybiBmOwogICAgfQogIH0sCiAgc2V0OiAobm9kZSwgZmFjdG9yeSkgPT4gZmFjdG9yaWVzKE5vZGUucmF3KG5vZGUpLCBmYWN0b3J5KQp9KTsKCmV4cG9ydCBjbGFzcyBQYXJzZXIgewogIGNvbnN0cnVjdG9yKGZhY3RvcnkpIHsKICAgIGZhY3RvcnkgPz89IG5ldyBGYWN0b3J5KCk7CiAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5OwogIH0KCiAgcGFyc2VGcm9tU3RyaW5nKHN0ciwgZmlsZSkgewogICAgbGV0IGRhdGEgPSByZWFkWE1MKHN0ciwgZmlsZSk7CgogICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICBpZihkYXRhLmxlbmd0aCA+IDEpCiAgICAgICAgZGF0YSA9IHsKICAgICAgICAgIHRhZ05hbWU6ICc/eG1sJywKICAgICAgICAgIGF0dHJpYnV0ZXM6IHsgdmVyc2lvbjogJzEuMCcsIGVuY29kaW5nOiAndXRmLTgnIH0sCiAgICAgICAgICBjaGlsZHJlbjogZGF0YQogICAgICAgIH07CiAgICAgIGVsc2UgZGF0YSA9IGRhdGFbMF07CiAgICB9CiAgICBjb25zdCB7IGZhY3RvcnkgfSA9IHRoaXM7CiAgICAvL2NvbnNvbGUubG9nKCdmYWN0b3J5JywgZmFjdG9yeSk7CiAgICBsZXQgZG9jID0gZmFjdG9yeS5Eb2N1bWVudC5uZXcoZGF0YSwgZmFjdG9yeSk7CiAgICBGYWN0b3J5LnNldChkb2MsIGZhY3RvcnkpOwogICAgcmV0dXJuIGRvYzsKICB9CgogIHBhcnNlRnJvbUZpbGUoZmlsZSkgewogICAgbGV0IHhtbCA9IHJlYWRGaWxlU3luYyhmaWxlKTsKICAgIGNvbnN0IHsgZmFjdG9yeSB9ID0gdGhpczsKICAgIHJldHVybiB0aGlzLnBhcnNlRnJvbVN0cmluZyh4bWwsIGZpbGUsIGZhY3RvcnkpOwogIH0KfQoKZXhwb3J0IGNsYXNzIFNlcmlhbGl6ZXIgewogIHNlcmlhbGl6ZVRvU3RyaW5nKG5vZGUpIHsKICAgIGxldCBzdHIgPSB3cml0ZVhNTChOb2RlLnJhdyhub2RlKSA/PyBub2RlKTsKICAgIHJldHVybiBzdHI7CiAgfQp9CgpmdW5jdGlvbiBHZXROb2RlKG9iaiwgb3duZXIsIGZhY3RvcnkpIHsKICBsZXQgdHlwZSA9IEdldFR5cGUob2JqLCBvd25lcik7CgogIGlmKHR5cGUgPT09IEVudGl0aWVzLlRleHQgJiYgdHlwZW9mIG9iaiA9PSAnc3RyaW5nJykgb2JqID0gb3duZXIuaW5kZXhPZihvYmopOwoKICBmYWN0b3J5ID8/PSBGYWN0b3J5LmZvcihvd25lcik7CiAgaWYoIWZhY3RvcnkpIGNvbnNvbGUubG9nKCdObyBmYWN0b3J5IGZvcicsIG93bmVyLCBvd25lci5jb25zdHJ1Y3Rvci5uYW1lKTsKICBsZXQgY3RvciA9IGZhY3RvcnkodHlwZSk7CgogIGlmKCFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoYE5vIHN1Y2ggbm9kZSB0eXBlIGZvciAke29ialtpbnNwZWN0U3ltYm9sXSgpfWApOwogIGlmKGN0b3IuY2FjaGUpIHJldHVybiBjdG9yLmNhY2hlKG9iaiwgb3duZXIpOwogIHJldHVybiBjdG9yKG9iaiwgb3duZXIpOwp9CgpleHBvcnQgY2xhc3MgSW50ZXJmYWNlIHsKICBnZXQgcGFyZW50Tm9kZSgpIHsKICAgIGxldCByID0gTm9kZS5wYXJlbnQodGhpcyk7CiAgICBpZihpc09iamVjdChyKSAmJiAhKHIgaW5zdGFuY2VvZiBOb2RlKSkgciA9IE5vZGUub3duZXIocik7CiAgICByZXR1cm4gcjsKICB9CgogIGdldCBwYXJlbnRFbGVtZW50KCkgewogICAgbGV0IG9iaiA9IHRoaXMucGFyZW50Tm9kZTsKICAgIHJldHVybiBvYmoubm9kZVR5cGUgPT0gRUxFTUVOVF9OT0RFID8gb2JqIDogbnVsbDsKICB9CgogIGdldCBvd25lckRvY3VtZW50KCkgewogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgd2hpbGUobm9kZSAmJiBub2RlLm5vZGVUeXBlICE9IERPQ1VNRU5UX05PREUpIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CiAgICByZXR1cm4gbm9kZTsKICB9CgogIGdldCBjaGlsZE5vZGVzKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CgogICAgcmV0dXJuIEZhY3RvcnkuZm9yKHRoaXMpLk5vZGVMaXN0LmNhY2hlKChyYXcuY2hpbGRyZW4gPz89IFtdKSwgdGhpcywgTm9kZUxpc3QpOwogIH0KCiAgZ2V0IGZpcnN0Q2hpbGQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGlmKGNoaWxkcmVuPy5sZW5ndGgpIHsKICAgICAgbGV0IFtmaXJzdF0gPSBjaGlsZHJlbjsKICAgICAgcmV0dXJuIEdldE5vZGUoZmlyc3QsIHRoaXMpOwogICAgfQogIH0KCiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgaWYoY2hpbGRyZW4/Lmxlbmd0aCkgewogICAgICBsZXQgbGFzdCA9IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdOwogICAgICByZXR1cm4gR2V0Tm9kZShsYXN0LCB0aGlzKTsKICAgIH0KICB9CgogIGdldCBuZXh0U2libGluZygpIHsKICAgIGxldCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzLnBhcmVudE5vZGUpOwoKICAgIGlmKGNoaWxkcmVuKSB7CiAgICAgIGxldCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgICAgLy9jb25zb2xlLmxvZygnY2hpbGRyZW4nLCBjaGlsZHJlbik7CiAgICAgIGxldCBpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YocmF3KTsKICAgICAgaWYoaW5kZXggIT0gLTEpIHJldHVybiBHZXROb2RlKGNoaWxkcmVuW2luZGV4ICsgMV0sIE5vZGUub3duZXIodGhpcykpOwogICAgfQogIH0KCiAgZ2V0IHByZXZpb3VzU2libGluZygpIHsKICAgIGxldCBwYXJlbnQ7CiAgICBpZigocGFyZW50ID0gTm9kZS5wYXJlbnQodGhpcykpKSB7CiAgICAgIGxldCBpbmRleCA9IHBhcmVudC5pbmRleE9mKHRoaXMpOwogICAgICBpZihpbmRleCAhPSAtMSkgcmV0dXJuIEdldE5vZGUocGFyZW50W2luZGV4IC0gMV0sIHBhcmVudCk7CiAgICB9CiAgfQoKICBhcHBlbmRDaGlsZChub2RlKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCByYXcgPSBOb2RlLnJhdyhub2RlKTsKICAgIGlmKG5vZGUgaW5zdGFuY2VvZiBUZXh0KSB7CiAgICAgIGxldCBrZXkgPSBjaGlsZHJlbi5sZW5ndGg7CiAgICAgIHRleHRWYWx1ZXMoCiAgICAgICAgdGhpcywKICAgICAgICBtb2RpZmllcigKICAgICAgICAgICgpID0+IGNoaWxkcmVuW2tleV0gPz8gJycsCiAgICAgICAgICB2YWx1ZSA9PiAoY2hpbGRyZW5ba2V5XSA9IHZhbHVlKQogICAgICAgICkKICAgICAgKTsKICAgIH0KICAgIG93bmVyRWxlbWVudC5zZXQobm9kZSwgdGhpcy5jaGlsZE5vZGVzKTsKICAgIHBhcmVudE5vZGUuc2V0KG5vZGUsIHRoaXMpOwoKICAgIGNoaWxkcmVuLnB1c2gocmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IGluZGV4LAogICAgICByYXcgPSBpc09iamVjdChub2RlKSAmJiBub2RlIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KG5vZGUpIDogbm9kZSwKICAgICAgcmVmID0gaXNPYmplY3QocmVmTm9kZSkgJiYgcmVmTm9kZSBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhyZWZOb2RlKSA6IHJlZk5vZGU7CiAgICBpZigoaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHJlZikpID09IC0xKSBpbmRleCA9IGNoaWxkcmVuLmxlbmd0aDsKICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCwgMCwgcmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgcmVtb3ZlQ2hpbGQobm9kZSkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgaW5kZXgsCiAgICAgIHJhdyA9IGlzT2JqZWN0KG5vZGUpICYmIG5vZGUgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcobm9kZSkgOiBub2RlOwogICAgaWYoKGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihyYXcpKSA9PSAtMSkgdGhyb3cgbmV3IEVycm9yKGBOb2RlLnJlbW92ZUNoaWxkIG5vIHN1Y2ggY2hpbGQhYCk7CiAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICByZXBsYWNlQ2hpbGQobmV3Q2hpbGQsIG9sZENoaWxkKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBpbmRleCwKICAgICAgb2xkID0gaXNPYmplY3Qob2xkQ2hpbGQpICYmIG9sZENoaWxkIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KG9sZENoaWxkKSA6IG9sZENoaWxkLAogICAgICByYXcgPSBpc09iamVjdChuZXdDaGlsZCkgJiYgbmV3Q2hpbGQgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcobmV3Q2hpbGQpIDogbmV3Q2hpbGQ7CiAgICBpZigoaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKG9sZCkpID09IC0xKSB0aHJvdyBuZXcgRXJyb3IoYE5vZGUucmVwbGFjZUNoaWxkIG5vIHN1Y2ggY2hpbGQhYCk7CiAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEsIHJhdyk7CiAgICByZXR1cm4gbmV3Q2hpbGQ7CiAgfQoKICBxdWVyeVNlbGVjdG9yKC4uLnNlbGVjdG9ycykgewogICAgbGV0IG5vZGUgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGlmKHR5cGVvZiBzZWxlY3RvcnNbMF0gPT0gJ3N0cmluZycpIHNlbGVjdG9ycyA9IFsuLi5wYXJzZVNlbGVjdG9ycyguLi5zZWxlY3RvcnMpXTsKICAgIC8vY29uc29sZS5sb2coJ3NlbGVjdG9ycycsIGNvbnNvbGUuY29uZmlnKHsgZGVwdGg6IEluZmluaXR5LCBjb21wYWN0OiAwIH0pLCBzZWxlY3RvcnMpOwogICAgbGV0IGdlbiA9IHF1ZXJ5KG5vZGUsIHNlbGVjdG9ycyk7CiAgICBsZXQgeyB2YWx1ZSwgZG9uZSB9ID0gZ2VuLm5leHQoKTsKICAgIGlmKHZhbHVlKSByZXR1cm4gYXBwbHlQYXRoKHZhbHVlLCB0aGlzKTsKICB9CgogIHF1ZXJ5U2VsZWN0b3JBbGwoLi4uc2VsZWN0b3JzKSB7CiAgICBsZXQgbm9kZSA9IE5vZGUucmF3KHRoaXMpOwoKICAgIGlmKHR5cGVvZiBzZWxlY3RvcnNbMF0gPT0gJ3N0cmluZycpIHNlbGVjdG9ycyA9IFsuLi5wYXJzZVNlbGVjdG9ycyguLi5zZWxlY3RvcnMpXTsKCiAgICAvL2NvbnNvbGUubG9nKCdzZWxlY3RvcnMnLCAoZ2xvYmFsVGhpcy5zZWxlY3RvcnMgPSBzZWxlY3RvcnMpKTsKCiAgICByZXR1cm4gcXVlcnkobm9kZSwgc2VsZWN0b3JzLCBwID0+IGFwcGx5UGF0aChwLCB0aGlzKSk7CiAgfQp9CgpleHBvcnQgY2xhc3MgTm9kZSB7CiAgY29uc3RydWN0b3Iob2JqLCBwYXJlbnQpIHsKICAgIC8vICBpZihpc09iamVjdChwcm90bykpIGFzc2VydChPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykgaW5zdGFuY2VvZiBOb2RlLCB0cnVlLCAncHJvdG8nKTsKICAgIGFzc2VydCh0aGlzIGluc3RhbmNlb2YgTm9kZSwgdHJ1ZSwgJ2luc3RhbmNlb2YgTm9kZScpOwoKICAgIC8vaWYoIWlzT2JqZWN0KG9iaikpIGNvbnNvbGUubG9nKCdOb2RlLmNvbnN0cnVjdG9yJywgeyBvYmosIHBhcmVudCwgcHJvdG8gfSk7CiAgICBpZihpc09iamVjdChvYmopKSByYXdOb2RlLnNldCh0aGlzLCBvYmopOwoKICAgIHBhcmVudE5vZGUuc2V0KHRoaXMsIHBhcmVudCk7CiAgICAvL3BhcmVudE5vZGUuc2V0KG9iaiwgcGFyZW50KTsKICB9CgogIGdldCBwYXRoKCkgewogICAgcmV0dXJuIE5vZGUucGF0aCh0aGlzKTsKICB9CgogIFtpbnNwZWN0U3ltYm9sXSgpIHsKICAgIHJldHVybiBgXHgxYlsxOzMxbSR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfVx4MWJbMG1gOwogIH0KfQoKTm9kZS50eXBlcyA9IG5vZGVUeXBlczsKY29uc3QgTk9ERV9UWVBFUyA9IHsKICBBVFRSSUJVVEVfTk9ERSwKICBDREFUQV9TRUNUSU9OX05PREUsCiAgQ09NTUVOVF9OT0RFLAogIERPQ1VNRU5UX0ZSQUdNRU5UX05PREUsCiAgRE9DVU1FTlRfTk9ERSwKICBET0NVTUVOVF9UWVBFX05PREUsCiAgRUxFTUVOVF9OT0RFLAogIEVOVElUWV9OT0RFLAogIEVOVElUWV9SRUZFUkVOQ0VfTk9ERSwKICBOT1RBVElPTl9OT0RFLAogIFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERSwKICBURVhUX05PREUKfTsKZGVmaW5lKE5vZGUucHJvdG90eXBlLCBJbnRlcmZhY2UucHJvdG90eXBlKTsKZGVmaW5lKE5vZGUucHJvdG90eXBlLCBOT0RFX1RZUEVTKTsKZGVmaW5lKE5vZGUsIE5PREVfVFlQRVMpOwpkZWZpbmUoTm9kZSwgewogIHJhdyhub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICByZXR1cm4gcmF3Tm9kZS5nZXQobm9kZSk7CiAgfSwKCiAgY2hpbGRyZW4obm9kZSkgewogICAgcmV0dXJuIE5vZGUucmF3KG5vZGUpPy5jaGlsZHJlbjsKICB9LAoKICBvd25lcihub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgb3duZXIsIHBhcmVudDsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChub2RlKSkgJiYgQXJyYXkuaXNBcnJheShwYXJlbnQuY2hpbGRyZW4pKSByZXR1cm4gcGFyZW50LmNoaWxkcmVuOwoKICAgIGxldCByYXcgPSBOb2RlLnJhdyhub2RlKTsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChyYXcpKSAmJiBBcnJheS5pc0FycmF5KHBhcmVudC5jaGlsZHJlbikpIHJldHVybiBwYXJlbnQuY2hpbGRyZW47CgogICAgaWYoKG93bmVyID0gb3duZXJFbGVtZW50LmdldChub2RlKSkpIHJldHVybiBvd25lcjsKICAgIHJldHVybiBvd25lckVsZW1lbnQuZ2V0KHJhdyk7CiAgfSwKCiAgcGFyZW50KG5vZGUpIHsKICAgIGNoZWNrTm9kZShub2RlKTsKICAgIGxldCByZXQgPSBwYXJlbnROb2RlLmdldChub2RlKTsKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgaGllcihub2RlLCBwcmVkID0gbm9kZSA9PiB0cnVlKSB7CiAgICBjb25zdCByID0gW107CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgbmV4dDsKICAgIGRvIHsKICAgICAgaWYocHJlZChub2RlKSkgci51bnNoaWZ0KG5vZGUpOwogICAgICBuZXh0ID0gTm9kZS5vd25lcihub2RlKSA/PyBOb2RlLnBhcmVudChub2RlKSAvKiA/PyAoCiAgICAgICAgeyBOb2RlTGlzdDogTm9kZS5vd25lciwgTmFtZWROb2RlTWFwOiBOb2RlLm93bmVyLCBFbGVtZW50OiBOb2RlLnBhcmVudCwgVGV4dDogTm9kZS5vd25lciB9WwogICAgICAgICAgbm9kZS5jb25zdHJ1Y3Rvci5uYW1lCiAgICAgICAgXSA/PyBOb2RlLnBhcmVudAogICAgICApLmNhbGwoTm9kZSwgbm9kZSkqLzsKICAgICAgaWYoci5pbmRleE9mKG5leHQpICE9IC0xKSB0aHJvdyBuZXcgRXJyb3IoYGNpcmN1bGFyIGxvb3BgKTsKICAgIH0gd2hpbGUobmV4dCAmJiAobm9kZSA9IG5leHQpKTsKICAgIHJldHVybiByOwogIH0sCgogIGRvY3VtZW50KG5vZGUpIHsKICAgIGNvbnN0IGhpZXIgPSBOb2RlLmhpZXIobm9kZSk7CiAgICByZXR1cm4gaGllci5maW5kKCh7IG5vZGVUeXBlIH0pID0+IG5vZGVUeXBlID09IERPQ1VNRU5UX05PREUpOwogIH0sCgogIHBhdGgoYXJnLCBwYXRoKSB7CiAgICBpZihhcmcub3duZXJFbGVtZW50KSB7CiAgICAgIGxldCBjaGlsZCA9IHsgTm9kZUxpc3Q6IFsnY2hpbGRyZW4nXSwgTmFtZWROb2RlTWFwOiBbJ2F0dHJpYnV0ZXMnXSwgQXR0cjogWydhdHRyaWJ1dGVzJywgYXJnLm5hbWVdIH1bCiAgICAgICAgYXJnLmNvbnN0cnVjdG9yLm5hbWUKICAgICAgXTsKICAgICAgaWYoY2hpbGQucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjW2tleV0sIGFyZy5vd25lckVsZW1lbnQpKSByZXR1cm4gTm9kZS5wYXRoKGFyZy5vd25lckVsZW1lbnQpLmNvbmNhdChjaGlsZCk7CiAgICB9CiAgICBjb25zdCBoaWVyID0gTm9kZS5oaWVyKGFyZyk7CgogICAgaWYoIUFycmF5LmlzQXJyYXkocGF0aCkpIHBhdGggPSBbXTsKCiAgICB3aGlsZShoaWVyLmxlbmd0aCA+PSAyKSB7CiAgICAgIGxldCBpbmRleCA9IGtleU9mKE5vZGUucmF3KGhpZXJbMF0pLCBOb2RlLnJhdyhoaWVyWzFdKSk7CiAgICAgIGlmKGluZGV4ID09IC0xKSBpbmRleCA9IGtleU9mKGhpZXJbMF0sIGhpZXJbMV0pOwoKICAgICAgaWYoIWlzTmFOKCtpbmRleCkpIGluZGV4ID0gK2luZGV4OwogICAgICBwYXRoLnB1c2goaW5kZXgpOwogICAgICBoaWVyLnNoaWZ0KCk7CiAgICB9CiAgICByZXR1cm4gcGF0aDsKICB9LAoKICBmcm9tKG9iaikge30KfSk7CgpOb2RlLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ05vZGUnOwoKZnVuY3Rpb24gTWFrZUNhY2hlKGN0b3IsIHN0b3JlID0gbmV3IFdlYWtNYXAoKSkgewogIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KHN0b3JlKTsKICByZXR1cm4gKGssIC4uLmFyZ3MpID0+IHsKICAgIGxldCB2OwogICAgaWYoISh2ID0gZ2V0KGspKSkgewogICAgICB2ID0gY3RvcihrLCAuLi5hcmdzKTsKICAgICAgc2V0KGssIHYpOwogICAgfQogICAgb3duZXJFbGVtZW50LnNldCh2LCBhcmdzWzBdKTsKICAgIHJldHVybiB2OwogIH07Cn0KCmZ1bmN0aW9uIE1ha2VDYWNoZTIoY3Rvciwgc3RvcmUgPSBuZXcgV2Vha01hcCgpKSB7CiAgbGV0IG1rY2ggPSBtZW1vaXplKGtleSA9PiBbXSwgc3RvcmUpOwoKICByZXR1cm4gKGlkLCBvd25lcikgPT4gewogICAgLy8gY29uc29sZS5sb2coJ0NhY2hlMicse2lkLG93bmVyIH0pOwogICAgaWYoIWlzTmFOKCtpZCkpIGlkID0gK2lkOwogICAgbGV0IHRleHRMaXN0ID0gbWtjaChvd25lcik7CiAgICB0ZXh0TGlzdFtpZF0gPz89IGN0b3IoaWQsIG93bmVyKTsKICAgIC8vIGNvbnNvbGUubG9nKCdDYWNoZTInLHsgdGV4dExpc3QgfSk7CiAgICByZXR1cm4gdGV4dExpc3RbaWRdOwogIH07Cn0KCmV4cG9ydCBjbGFzcyBOb2RlTGlzdCB7CiAgY29uc3RydWN0b3Iob2JqLCBvd25lcikgewogICAgbGV0IG5vZGVMaXN0OwogICAgY29uc3QgaXNFbGVtZW50ID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiAhaXNOYU4oK3Byb3ApOwogICAgY29uc3QgaXNMaXN0ID0gcHJvcCA9PiBpc0VsZW1lbnQocHJvcCkgfHwgcHJvcCA9PSAnbGVuZ3RoJzsKCiAgICBjb25zdCBmYWN0b3J5ID0gRmFjdG9yeS5mb3Iob3duZXIpOwogICAgLypjb25zdCB3cmFwRWxlbWVudCA9ICh2YWx1ZSwgcHJvcCkgPT4KICAgICAgdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnID8gVGV4dC5jYWNoZShwcm9wLCBub2RlTGlzdCkgOiBFbGVtZW50LmNhY2hlKHZhbHVlLCBub2RlTGlzdCk7Ki8KCiAgICByYXdOb2RlLnNldCh0aGlzLCBvYmopOwogICAgLy9wYXJlbnROb2RlLnNldChvYmosIG93bmVyKTsKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIG5vZGVMaXN0ID0gbmV3IFByb3h5KHRoaXMsIHsKICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gewogICAgICAgIGlmKHByb3AgPT09IFN5bWJvbC5pdGVyYXRvcikgcmV0dXJuIE5vZGVMaXN0LnByb3RvdHlwZVtwcm9wXS5iaW5kKHRoaXMpOwogICAgICAgIGlmKGlzTGlzdChwcm9wKSkgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuIG9iai5sZW5ndGg7CiAgICAgICAgICBpZihwcm9wID49IDAgJiYgcHJvcCA8IG9iai5sZW5ndGgpIHJldHVybiBHZXROb2RlKG9ialtwcm9wXSwgbm9kZUxpc3QsIGZhY3RvcnkpOyAvLyB3cmFwRWxlbWVudChvYmpbcHJvcF0sIHByb3ApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICAgIH0sCiAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcCkgPT4gewogICAgICAgIGlmKGlzTGlzdChwcm9wKSkgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJyB8fCAocHJvcCA+PSAwICYmIHByb3AgPCBvYmoubGVuZ3RoKSkKICAgICAgICAgICAgcmV0dXJuIHsgY29uZmlndXJhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogb2JqW3Byb3BdIH07CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApOwogICAgICB9LAogICAgICBvd25LZXlzOiB0YXJnZXQgPT4KICAgICAgICByYW5nZSgwLCBvYmoubGVuZ3RoIC0gMSkKICAgICAgICAgIC5tYXAocHJvcCA9PiBwcm9wICsgJycpCiAgICAgICAgICAuY29uY2F0KFsnbGVuZ3RoJ10pLAogICAgICBnZXRQcm90b3R5cGVPZjogdGFyZ2V0ID0+IE5vZGVMaXN0LnByb3RvdHlwZQogICAgfSk7CgogICAgcmF3Tm9kZS5zZXQobm9kZUxpc3QsIG9iaik7CiAgICBvd25lckVsZW1lbnQuc2V0KG5vZGVMaXN0LCBvd25lcik7CgogICAgcmV0dXJuIG5vZGVMaXN0OwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBsZXQgc3RyID0gaW5zcGVjdChbLi4udGhpc10sIGRlcHRoICsgMSwgeyAuLi5vcHRzLCBjdXN0b21JbnNwZWN0OiB0cnVlIH0pOwogICAgbGV0IGluZGV4ZXMgPSBzdHJbMF0gPT0gJ1snID8gW3N0ci5pbmRleE9mKCdbJykgKyAxLCBzdHIubGFzdEluZGV4T2YoJ10nKV0gOiBbMF07CiAgICByZXR1cm4gc3RyLnN1YnN0cmluZyguLi5pbmRleGVzKTsKICB9Cn0KCi8vTm9kZUxpc3QucHJvdG90eXBlLl9fcHJvdG9fXyA9IEFycmF5LnByb3RvdHlwZTsKCmRlZmluZShOb2RlTGlzdC5wcm90b3R5cGUsIHsKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ05vZGVMaXN0JywKICAvKmdldCBwYXRoKCkgewogICAgbGV0IG93bmVyID0gTm9kZS5vd25lcih0aGlzKTsKICAgIHJldHVybiBOb2RlLnBhdGgob3duZXIpLmNvbmNhdChbJ2NoaWxkcmVuJ10pOwogIH0sKi8KCiAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBjb25zdCBmYWMgPSBGYWN0b3J5LmZvcih0aGlzKTsKICAgIGZvcihsZXQgbm9kZSBvZiByYXcpIHsKICAgICAgbGV0IGZuID0gZmFjKHR5cGVvZiBub2RlID09ICdzdHJpbmcnID8gRW50aXRpZXMuVGV4dCA6IEVudGl0aWVzLkVsZW1lbnQpOwogICAgICB5aWVsZCBmbihub2RlLCB0aGlzKTsKICAgIH0KICB9Cn0pOwoKZXhwb3J0IGZ1bmN0aW9uIE5hbWVkTm9kZU1hcChvYmosIG93bmVyKSB7CiAgaWYoIXRoaXMpIHJldHVybiBuZXcgTmFtZWROb2RlTWFwKG9iaiwgb3duZXIpOwoKICBsZXQgbm9kZU1hcDsKICBjb25zdCBpc0F0dHIgPSBwcm9wID0+IHR5cGVvZiBwcm9wID09ICdzdHJpbmcnICYmIHByb3AgaW4gb2JqOwogIGNvbnN0IHdyYXBBdHRyID0gKHZhbHVlLCBwcm9wKSA9PiBuZXcgQXR0cihbb2JqLCBwcm9wXSwgbm9kZU1hcCk7CgogIHJhd05vZGUuc2V0KHRoaXMsIG9iaik7CiAgLy9wYXJlbnROb2RlLnNldChvYmosb3duZXIpOwogIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICBub2RlTWFwID0gbmV3IFByb3h5KHRoaXMsIHsKICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IHsKICAgICAgLy8gIGlmKHByb3AgPT0gJ2l0ZW0nKSByZXR1cm4gaSA9PiBpc05hTigraSkgPyBvYmpbaV0gOiBvYmpbT2JqZWN0LmtleXMob2JqKVsraV1dOwogICAgICBpZihwcm9wID09ICdsZW5ndGgnKSByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7CiAgICAgIGlmKHR5cGVvZiBwcm9wID09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYoIWlzTmFOKCtwcm9wKSkgewogICAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopOwogICAgICAgICAgaWYocHJvcCA+PSAwICYmIHByb3AgPCBrZXlzLmxlbmd0aCkgcmV0dXJuIHdyYXBBdHRyKG9ialtrZXlzWytwcm9wXV0sIGtleXNbK3Byb3BdKTsKICAgICAgICB9IGVsc2UgaWYocHJvcCBpbiBvYmopIHJldHVybiB3cmFwQXR0cihvYmpbcHJvcF0sIHByb3ApOwogICAgICB9CiAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTsKICAgIH0sCiAgICBvd25LZXlzOiB0YXJnZXQgPT4gT2JqZWN0LmtleXMob2JqKQogIH0pOwoKICByYXdOb2RlLnNldChub2RlTWFwLCBvYmopOwogIG93bmVyRWxlbWVudC5zZXQobm9kZU1hcCwgb3duZXIpOwoKICByZXR1cm4gbm9kZU1hcDsKfQoKT2JqZWN0LnNldFByb3RvdHlwZU9mKE5hbWVkTm9kZU1hcC5wcm90b3R5cGUsIEFycmF5LnByb3RvdHlwZSk7CgpkZWZpbmUoTmFtZWROb2RlTWFwLnByb3RvdHlwZSwgewogIGNvbnN0cnVjdG9yOiBOYW1lZE5vZGVNYXAsCiAgZ2V0IHBhdGgoKSB7CiAgICBsZXQgb3duZXIgPSBOb2RlLm93bmVyKHRoaXMpOwogICAgcmV0dXJuIE5vZGUucGF0aChvd25lcikuY29uY2F0KFsnYXR0cmlidXRlcyddKTsKICB9LAoKICBpdGVtKGtleSkgewogICAgcmV0dXJuIHRoaXNba2V5XTsKICB9LAogIHNldE5hbWVkSXRlbShhdHRyKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGNvbnN0IHsgbmFtZSwgdmFsdWUgfSA9IGF0dHI7CiAgICByYXdbbmFtZV0gPSB2YWx1ZTsKICB9LAogIHJlbW92ZU5hbWVkSXRlbShuYW1lKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGRlbGV0ZSByYXdbbmFtZV07CiAgfSwKICBnZXROYW1lZEl0ZW0obmFtZSkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICByZXR1cm4gcmF3W25hbWVdOwogIH0sCgogICpbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCB0aGlzLml0ZW0oaSk7CiAgfSwKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ05hbWVkTm9kZU1hcCcsCiAgW2luc3BlY3RTeW1ib2xdKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgcyA9ICcnOwogICAgZm9yKGxldCBhdHRyIGluIHJhdykgewogICAgICBzICs9ICcgXHgxYlsxOzM1bScgKyBhdHRyICsgJ1x4MWJbMTszNm09IicgKyByYXdbYXR0cl0gKyAnIlx4MWJbMG0nOwogICAgfQogICAgcmV0dXJuICd7JyArIHMgKyAnIH0nOwogICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLnJlZHVjZSgoYWNjLCBwcm9wKSA9PiAoeyAuLi5hY2MsIFtwcm9wXTogdGhpc1twcm9wXSB9KSwge30pOwogIH0KfSk7Ci8qCiBFbGVtZW50IG1ldGhvZHM6CiAgICAgYWZ0ZXIKICAgIGFuaW1hdGUKICAgIGFwcGVuZAogICAgYXR0YWNoU2hhZG93CiAgICBiZWZvcmUKICAgIGNsb3Nlc3QKICAgIGNvbXB1dGVkU3R5bGVNYXAKICAgIGNyZWF0ZVNoYWRvd1Jvb3QKICAgIGdldEFuaW1hdGlvbnMKICAgIGdldEF0dHJpYnV0ZQogICAgZ2V0QXR0cmlidXRlTmFtZXMKICAgIGdldEF0dHJpYnV0ZU5vZGUKICAgIGdldEF0dHJpYnV0ZU5vZGVOUwogICAgZ2V0QXR0cmlidXRlTlMKICAgIGdldEJvdW5kaW5nQ2xpZW50UmVjdAogICAgZ2V0Q2xpZW50UmVjdHMKICAgIGdldEVsZW1lbnRzQnlDbGFzc05hbWUKICAgIGdldEVsZW1lbnRzQnlUYWdOYW1lCiAgICBnZXRFbGVtZW50c0J5VGFnTmFtZU5TCiAgICBoYXNBdHRyaWJ1dGUKICAgIGhhc0F0dHJpYnV0ZU5TCiAgICBoYXNBdHRyaWJ1dGVzCiAgICBoYXNQb2ludGVyQ2FwdHVyZQogICAgaW5zZXJ0QWRqYWNlbnRFbGVtZW50CiAgICBpbnNlcnRBZGphY2VudEhUTUwKICAgIGluc2VydEFkamFjZW50VGV4dAogICAgbWF0Y2hlcwogICAgbXNab29tVG8KICAgIHByZXBlbmQKICAgIHF1ZXJ5U2VsZWN0b3IKICAgIHF1ZXJ5U2VsZWN0b3JBbGwKICAgIHJlbGVhc2VQb2ludGVyQ2FwdHVyZQogICAgcmVtb3ZlCiAgICByZW1vdmVBdHRyaWJ1dGUKICAgIHJlbW92ZUF0dHJpYnV0ZU5vZGUKICAgIHJlbW92ZUF0dHJpYnV0ZU5TCiAgICByZXBsYWNlQ2hpbGRyZW4KICAgIHJlcGxhY2VXaXRoCiAgICByZXF1ZXN0RnVsbHNjcmVlbgogICAgcmVxdWVzdFBvaW50ZXJMb2NrCiAgICBzY3JvbGwKICAgIHNjcm9sbEJ5CiAgICBzY3JvbGxJbnRvVmlldwogICAgc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZAogICAgc2Nyb2xsVG8KICAgIHNldEF0dHJpYnV0ZQogICAgc2V0QXR0cmlidXRlTm9kZQogICAgc2V0QXR0cmlidXRlTm9kZU5TCiAgICBzZXRBdHRyaWJ1dGVOUwogICAgc2V0Q2FwdHVyZQogICAgc2V0SFRNTAogICAgc2V0UG9pbnRlckNhcHR1cmUKCgpFbGVtZW50IHByb3BlcnRpZXM6CiAgICBhc3NpZ25lZFNsb3RSZWFkCiAgICBhdHRyaWJ1dGVzCiAgICBjaGlsZEVsZW1lbnRDb3VudAogICAgY2hpbGRyZW4KICAgIGNsYXNzTGlzdAogICAgY2xhc3NOYW1lCiAgICBjbGllbnRIZWlnaHQKICAgIGNsaWVudExlZnQKICAgIGNsaWVudFRvcAogICAgY2xpZW50V2lkdGgKICAgIGZpcnN0RWxlbWVudENoaWxkCiAgICBpZAogICAgaW5uZXJIVE1MCiAgICBsYXN0RWxlbWVudENoaWxkCiAgICBsb2NhbE5hbWUKICAgIG5hbWVzcGFjZVVSSQogICAgbmV4dEVsZW1lbnRTaWJsaW5nCiAgICBvdXRlckhUTUwKICAgIG9wZW5PckNsb3NlZFNoYWRvd1Jvb3QKICAgIHBhcnQKICAgIHByZWZpeAogICAgcHJldmlvdXNFbGVtZW50U2libGluZwogICAgc2Nyb2xsSGVpZ2h0CiAgICBzY3JvbGxMZWZ0CiAgICBzY3JvbGxMZWZ0TWF4CiAgICBzY3JvbGxUb3AKICAgIHNjcm9sbFRvcE1heAogICAgc2Nyb2xsV2lkdGgKICAgIHNoYWRvd1Jvb3RSZWFkCiAgICBzbG90CgogKi8KZXhwb3J0IGNsYXNzIEVsZW1lbnQgZXh0ZW5kcyBOb2RlIHsKICBjb25zdHJ1Y3RvcihvYmosIHBhcmVudCkgewogICAgc3VwZXIob2JqLCBwYXJlbnQpOwoKICAgIC8qIGxhenlQcm9wZXJ0eSh0aGlzLCAnY2xhc3NMaXN0JywgKCkgPT4gbmV3IFRva2VuTGlzdCgnY2xhc3MnLCB0aGlzKSk7CiAgICBkZWZpbmUodGhpcywgeyBjbGFzc0xpc3Q6IG5ldyBUb2tlbkxpc3QodGhpcywgJ2NsYXNzJykgfSk7Ki8KICAgIGxhenlQcm9wZXJ0aWVzKHRoaXMsIHsgY2xhc3NMaXN0OiAoKSA9PiBuZXcgVG9rZW5MaXN0KHRoaXMsICdjbGFzcycpIH0pOwogIH0KCiAgZ2V0IHBhcmVudEVsZW1lbnQoKSB7CiAgICBsZXQgb2JqID0gdGhpczsKICAgIGRvIHsKICAgICAgb2JqID0gb2JqLnBhcmVudE5vZGU7CiAgICB9IHdoaWxlKG9iai5ub2RlVHlwZSAhPSBFTEVNRU5UX05PREUpOwogICAgcmV0dXJuIG9iajsKICB9CgogIGdldCBhdHRyaWJ1dGVzKCkgewogICAgbGV0IGZhY3RvcnkgPSBGYWN0b3J5LmZvcih0aGlzLm93bmVyRG9jdW1lbnQpOwogICAgaWYoIWZhY3RvcnkpIGNvbnNvbGUubG9nKHRoaXMuY29uc3RydWN0b3IubmFtZSwgJ05vIGZhY3RvcnknLCB0aGlzKTsKICAgIHJldHVybiBmYWN0b3J5Lk5hbWVkTm9kZU1hcC5jYWNoZSgoTm9kZS5yYXcodGhpcykuYXR0cmlidXRlcyA/Pz0ge30pLCB0aGlzKTsKICB9CgogIC8qICBzZXQgdGFnTmFtZSh2KSB7CiAgICBOb2RlLnJhdyh0aGlzKS50YWdOYW1lID0gdjsKICB9CiAgZ2V0IHRhZ05hbWUoKSB7CiAgICByZXR1cm4gTm9kZS5yYXcodGhpcykudGFnTmFtZTsKICB9Ki8KICBzZXQgbm9kZU5hbWUodikgewogICAgdGhpcy50YWdOYW1lID0gdjsKICB9CiAgZ2V0IG5vZGVOYW1lKCkgewogICAgcmV0dXJuIHRoaXMudGFnTmFtZTsKICB9CgogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgeyB0YWdOYW1lLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbiB9ID0gdGhpczsKICAgIGxldCBzID0gYDwke3RhZ05hbWV9YDsKICAgIGNvbnN0IGEgPSBhdHRyaWJ1dGVzW2luc3BlY3RTeW1ib2xdKGRlcHRoICsgMSwgb3B0cykKICAgICAgLnNsaWNlKDEsIC0xKQogICAgICAudHJpbSgpOwogICAgbGV0IGM7CiAgICB0cnkgewogICAgICBjID0gY2hpbGRyZW5baW5zcGVjdFN5bWJvbF0oZGVwdGggKyAxLCBvcHRzKTsKICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgIGMgPSAnJzsKICAgIH0KICAgIGlmKGEpIHMgKz0gJyAnICsgYTsKICAgIHMgKz0gJz4nOwogICAgaWYoYykgcyArPSBgJHtjfTwvJHt0YWdOYW1lfT5gOwogICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnLmluc3BlY3QnLCBzKTsKICAgIHJldHVybiBzOwogIH0KCiAgZ2V0IGNoaWxkcmVuKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CgogICAgLy8gY29uc29sZS5sb2coJ3JhdycsaW5zcGVjdChyYXcsIHtkZXB0aDogMH0pKTsKICAgIGxldCBmYWN0b3J5ID0gRmFjdG9yeS5mb3IodGhpcy5vd25lckRvY3VtZW50KTsKICAgIGlmKCFmYWN0b3J5KSBjb25zb2xlLmxvZyh0aGlzLmNvbnN0cnVjdG9yLm5hbWUsICdObyBmYWN0b3J5JywgdGhpcyk7CiAgICByZXR1cm4gZmFjdG9yeS5Ob2RlTGlzdC5jYWNoZSgocmF3LmNoaWxkcmVuID8/PSBbXSksIHRoaXMpOwogIH0KCiAgZ2V0IHN0eWxlKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CgogICAgLy8gY29uc29sZS5sb2coJ3JhdycsaW5zcGVjdChyYXcsIHtkZXB0aDogMH0pKTsKICAgIGxldCBmYWN0b3J5ID0gRmFjdG9yeS5mb3IodGhpcy5vd25lckRvY3VtZW50KTsKICAgIGlmKCFmYWN0b3J5KSBjb25zb2xlLmxvZyh0aGlzLmNvbnN0cnVjdG9yLm5hbWUsICdObyBmYWN0b3J5JywgdGhpcyk7CiAgICByZXR1cm4gZmFjdG9yeS5DU1NTdHlsZURlY2xhcmF0aW9uLmNhY2hlKChyYXcuYXR0cmlidXRlcyA/Pz0ge30pLCB0aGlzKTsKICB9CgogIGdldCBjaGlsZEVsZW1lbnRDb3VudCgpIHsKICAgIHJldHVybiBOb2RlLnJhdyh0aGlzKS5jaGlsZHJlbj8ubGVuZ3RoID8/IDA7CiAgfQoKICBnZXQgZmlyc3RFbGVtZW50Q2hpbGQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBlbGVtZW50ID0gY2hpbGRyZW4uZmluZChuID0+IGlzT2JqZWN0KG4pICYmICd0YWdOYW1lJyBpbiBuKTsKICAgIGlmKGVsZW1lbnQpIHJldHVybiBFbGVtZW50LmNhY2hlKGVsZW1lbnQsIHRoaXMuY2hpbGRyZW4pOwogIH0KCiAgZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGlmKGNoaWxkcmVuPy5sZW5ndGgpCiAgICAgIGZvcihsZXQgaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKQogICAgICAgIGlmKGlzT2JqZWN0KGNoaWxkcmVuW2ldKSAmJiAndGFnTmFtZScgaW4gY2hpbGRyZW5baV0pIHJldHVybiBFbGVtZW50LmNhY2hlKGNoaWxkcmVuW2ldLCB0aGlzLmNoaWxkcmVuKTsKICB9CgogIGdldCBpZCgpIHsKICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgnaWQnKTsKICB9CgogIGdldEF0dHJpYnV0ZShuYW1lKSB7CiAgICByZXR1cm4gRWxlbWVudC5hdHRyaWJ1dGVzKHRoaXMpKGF0dHJpYnV0ZXMgPT4gYXR0cmlidXRlc1tuYW1lXSk7CiAgfQoKICBnZXRBdHRyaWJ1dGVOYW1lcygpIHsKICAgIHJldHVybiBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKSk7CiAgfQoKICBoYXNBdHRyaWJ1dGUobmFtZSkgewogICAgcmV0dXJuIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IG5hbWUgaW4gYXR0cmlidXRlcyk7CiAgfQoKICBoYXNBdHRyaWJ1dGVzKCkgewogICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlTmFtZXMoKS5sZW5ndGggPiAwOwogIH0KCiAgcmVtb3ZlQXR0cmlidXRlKG5hbWUpIHsKICAgIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IGRlbGV0ZSBhdHRyaWJ1dGVzW25hbWVdKTsKICB9CgogIGdldEF0dHJpYnV0ZU5vZGUobmFtZSkgewogICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1tuYW1lXTsKICB9CgogIHNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkgewogICAgaWYoISh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUudG9TdHJpbmcpKSkKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRWxlbWVudC5zZXRBdHRyaWJ1dGUoKTogdmFsdWUgbm90IG9mIHR5cGUgJ3N0cmluZyc6ICR7dmFsdWV9YCk7CgogICAgdmFsdWUgPSB2YWx1ZSArICcnOwoKICAgIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IChhdHRyaWJ1dGVzW25hbWVdID0gdmFsdWUpKTsKICB9CgogIGdldCBpbm5lclRleHQoKSB7CiAgICBsZXQgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgdGV4dHMgPSBbXTsKICAgIGZvcihsZXQgW3ZhbHVlLCBwYXRoXSBvZiBkZWVwLml0ZXJhdGUocmF3LCAobiwgaykgPT4gdHlwZW9mIG4gPT0gJ3N0cmluZycgJiYga1trLmxlbmd0aCAtIDJdID09ICdjaGlsZHJlbicpKSB7CiAgICAgIHRleHRzLnB1c2godmFsdWUucmVwbGFjZSgvPHMrL2csICcgJykpOwogICAgfQogICAgcmV0dXJuIHRleHRzLmpvaW4oJyAnKTsKICB9CgogIHN0YXRpYyBjYWNoZSA9IE1ha2VDYWNoZSgob2JqLCBvd25lcikgPT4gbmV3IEVsZW1lbnQob2JqLCBvd25lcikpOwp9CgpkZWZpbmUoRWxlbWVudCwgewogIGF0dHJpYnV0ZXMoZWxlbSkgewogICAgcmV0dXJuIG1vZGlmaWVyKE5vZGUucmF3KGVsZW0pLCAnYXR0cmlidXRlcycpOwogIH0sCiAgdG9TdHJpbmcoZWxlbSkgewogICAgcmV0dXJuIGVsZW1baW5zcGVjdFN5bWJvbF0oMCwge30pLnJlcGxhY2UoL1x4MWJcW1teYS16XSpbYS16XS9nLCAnJyk7CiAgfQp9KTsKCi8vZGVmaW5lKEVsZW1lbnQsIHsgY2FjaGU6IE1ha2VDYWNoZShFbGVtZW50KSB9KTsKZGVmaW5lKEVsZW1lbnQucHJvdG90eXBlLCB7IFtTeW1ib2wudG9TdHJpbmdUYWddOiAnRWxlbWVudCcsIG5vZGVUeXBlOiBFTEVNRU5UX05PREUgfSk7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsICd0YWdOYW1lJywgewogIHNldCh2KSB7CiAgICBOb2RlLnJhdyh0aGlzKS50YWdOYW1lID0gdjsKICB9LAogIGdldCgpIHsKICAgIHJldHVybiBOb2RlLnJhdyh0aGlzKS50YWdOYW1lOwogIH0sCiAgZW51bWVyYWJsZTogdHJ1ZQp9KTsKCi8qCiAgRG9jdW1lbnQgbWV0aG9kczoKICAgIGFkb3B0Tm9kZQogICAgYXBwZW5kCiAgICBjYXB0dXJlRXZlbnRzCiAgICBjYXJldFJhbmdlRnJvbVBvaW50CiAgICBjbGVhcgogICAgY2xvc2UKICAgIGNyZWF0ZUF0dHJpYnV0ZQogICAgY3JlYXRlQXR0cmlidXRlTlMKICAgIGNyZWF0ZUNEQVRBU2VjdGlvbgogICAgY3JlYXRlQ29tbWVudAogICAgY3JlYXRlRG9jdW1lbnRGcmFnbWVudAogICAgY3JlYXRlRWxlbWVudAogICAgY3JlYXRlRWxlbWVudE5TCiAgICBjcmVhdGVFdmVudAogICAgY3JlYXRlRXhwcmVzc2lvbgogICAgY3JlYXRlTlNSZXNvbHZlcgogICAgY3JlYXRlTm9kZUl0ZXJhdG9yCiAgICBjcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24KICAgIGNyZWF0ZVJhbmdlCiAgICBjcmVhdGVUZXh0Tm9kZQogICAgY3JlYXRlVHJlZVdhbGtlcgogICAgZWxlbWVudEZyb21Qb2ludAogICAgZWxlbWVudHNGcm9tUG9pbnQKICAgIGV2YWx1YXRlCiAgICBleGVjQ29tbWFuZAogICAgZXhpdEZ1bGxzY3JlZW4KICAgIGV4aXRQb2ludGVyTG9jawogICAgZ2V0RWxlbWVudEJ5SWQKICAgIGdldEVsZW1lbnRzQnlDbGFzc05hbWUKICAgIGdldEVsZW1lbnRzQnlOYW1lCiAgICBnZXRFbGVtZW50c0J5VGFnTmFtZQogICAgZ2V0RWxlbWVudHNCeVRhZ05hbWVOUwogICAgZ2V0U2VsZWN0aW9uCiAgICBoYXNGb2N1cwogICAgaW1wb3J0Tm9kZQogICAgb3BlbgogICAgcHJlcGVuZAogICAgcXVlcnlDb21tYW5kRW5hYmxlZAogICAgcXVlcnlDb21tYW5kSW5kZXRlcm0KICAgIHF1ZXJ5Q29tbWFuZFN0YXRlCiAgICBxdWVyeUNvbW1hbmRTdXBwb3J0ZWQKICAgIHF1ZXJ5Q29tbWFuZFZhbHVlCiAgICBxdWVyeVNlbGVjdG9yCiAgICBxdWVyeVNlbGVjdG9yQWxsCiAgICByZWxlYXNlRXZlbnRzCiAgICByZXBsYWNlQ2hpbGRyZW4KICAgIHdlYmtpdENhbmNlbEZ1bGxTY3JlZW4KICAgIHdlYmtpdEV4aXRGdWxsc2NyZWVuCiAgICB3cml0ZQogICAgd3JpdGVsbgogICAgY29uc3RydWN0b3IKICAgIGV4aXRQaWN0dXJlSW5QaWN0dXJlCiAgICBnZXRBbmltYXRpb25zCgogIERvY3VtZW50IHByb3BlcnRpZXM6CiAgICBpbXBsZW1lbnRhdGlvbgogICAgVVJMCiAgICBkb2N1bWVudFVSSQogICAgY29tcGF0TW9kZQogICAgY2hhcmFjdGVyU2V0CiAgICBjaGFyc2V0CiAgICBpbnB1dEVuY29kaW5nCiAgICBjb250ZW50VHlwZQogICAgZG9jdHlwZQogICAgZG9jdW1lbnRFbGVtZW50CiAgICB4bWxFbmNvZGluZwogICAgeG1sVmVyc2lvbgogICAgeG1sU3RhbmRhbG9uZQogICAgZG9tYWluCiAgICByZWZlcnJlcgogICAgY29va2llCiAgICBsYXN0TW9kaWZpZWQKICAgIHJlYWR5U3RhdGUKICAgIHRpdGxlCiAgICBkaXIKICAgIGJvZHkKICAgIGhlYWQKICAgIGltYWdlcwogICAgZW1iZWRzCiAgICBwbHVnaW5zCiAgICBsaW5rcwogICAgZm9ybXMKICAgIHNjcmlwdHMKICAgIGN1cnJlbnRTY3JpcHQKICAgIGRlZmF1bHRWaWV3CiAgICBkZXNpZ25Nb2RlCiAgICBhbmNob3JzCiAgICBhcHBsZXRzCiAgICBmZ0NvbG9yCiAgICBsaW5rQ29sb3IKICAgIHZsaW5rQ29sb3IKICAgIGFsaW5rQ29sb3IKICAgIGJnQ29sb3IKICAgIGFsbAogICAgc2Nyb2xsaW5nRWxlbWVudAogICAgaGlkZGVuCiAgICB2aXNpYmlsaXR5U3RhdGUKICAgIHdhc0Rpc2NhcmRlZAogICAgZmVhdHVyZVBvbGljeQogICAgd2Via2l0VmlzaWJpbGl0eVN0YXRlCiAgICB3ZWJraXRIaWRkZW4KICAgIGZ1bGxzY3JlZW5FbmFibGVkCiAgICBmdWxsc2NyZWVuCiAgICB3ZWJraXRJc0Z1bGxTY3JlZW4KICAgIHdlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudAogICAgd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQKICAgIHdlYmtpdEZ1bGxzY3JlZW5FbGVtZW50CiAgICByb290RWxlbWVudAogICAgY2hpbGRyZW4KICAgIGZpcnN0RWxlbWVudENoaWxkCiAgICBsYXN0RWxlbWVudENoaWxkCiAgICBjaGlsZEVsZW1lbnRDb3VudAogICAgYWN0aXZlRWxlbWVudAogICAgc3R5bGVTaGVldHMKICAgIHBvaW50ZXJMb2NrRWxlbWVudAogICAgZnVsbHNjcmVlbkVsZW1lbnQKICAgIGFkb3B0ZWRTdHlsZVNoZWV0cwogICAgZm9udHMKICAgIGZyYWdtZW50RGlyZWN0aXZlCiAgICBhZGRyZXNzU3BhY2UKICAgIHRpbWVsaW5lCiAgICBwaWN0dXJlSW5QaWN0dXJlRW5hYmxlZAogICAgcGljdHVyZUluUGljdHVyZUVsZW1lbnQKICovCgpleHBvcnQgY2xhc3MgRG9jdW1lbnQgZXh0ZW5kcyBFbGVtZW50IHsKICBjb25zdHJ1Y3RvcihvYmosIGZhY3RvcnkpIHsKICAgIHN1cGVyKG9iaiwgbnVsbCwgZmFjdG9yeSk7CiAgfQoKICBjcmVhdGVBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHsKICAgIHJldHVybiBuZXcgQXR0cihbbnVsbCwgbmFtZV0sIG51bGwpOwogIH0KCiAgY3JlYXRlRWxlbWVudCh0YWdOYW1lKSB7CiAgICByZXR1cm4gRWxlbWVudC5jYWNoZSh7IHRhZ05hbWUsIGF0dHJpYnV0ZXM6IHt9LCBjaGlsZHJlbjogW10gfSwgbnVsbCk7CiAgfQoKICBjcmVhdGVUZXh0Tm9kZSh0ZXh0KSB7CiAgICByZXR1cm4gbmV3IFRleHQodGV4dCk7CiAgfQoKICBjcmVhdGVUcmVlV2Fsa2VyKAogICAgcm9vdCwKICAgIHdoYXRUb1Nob3cgPSBUcmVlV2Fsa2VyLlRZUEVfQUxMLAogICAgZmlsdGVyID0geyBhY2NlcHROb2RlOiBub2RlID0+IFRyZWVXYWxrZXIuRklMVEVSX0FDQ0VQVCB9LAogICAgZXhwYW5kRW50aXR5UmVmZXJlbmNlcyA9IGZhbHNlCiAgKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyhyb290KTsKICAgIGxldCB3YWxrZXI7CiAgICB3YWxrZXIgPSBuZXcgVHJlZVdhbGtlcigKICAgICAgcmF3LAogICAgICAobiwgaykgPT4gdHlwZW9mIGsgPT0gJ251bWJlcicgJiYgcHJlZChuLCBrKSwKICAgICAgKG4sIHApID0+IEdldE5vZGUobiwgZGVlcC5nZXQocmF3LCBwLnNsaWNlKDAsIC0xKSkpCiAgICApOwogICAgcmV0dXJuIHdhbGtlcjsKICB9CgogIGdldCBib2R5KCkgewogICAgbGV0IGVsZW1lbnQgPSB0aGlzLmxhc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDsKICAgIGlmKC9eYm9keSQvaS50ZXN0KGVsZW1lbnQudGFnTmFtZSkpIHJldHVybiBlbGVtZW50OwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IHRhZ05hbWUsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuIH0gPSB0aGlzOwogICAgLy9jb25zb2xlLmxvZygnRG9jdW1lbnQuaW5zcGVjdCcpOwogICAgcmV0dXJuIGBceDFiWzE7MzFtRG9jdW1lbnRceDFiWzBtICR7dGFnTmFtZX0gYXR0cmlidXRlczogJHthdHRyaWJ1dGVzW2luc3BlY3RTeW1ib2xdKAogICAgICBkZXB0aCArIDEsCiAgICAgIG9wdHMKICAgICl9IGNoaWxkcmVuOiAke2NoaWxkcmVuLnJlZHVjZSgoYWNjLCBjKSA9PiBhY2MgKyBjW2luc3BlY3RTeW1ib2xdKGRlcHRoICsgMiwgb3B0cyksICcnKX0+YDsKICB9Cn0KCmRlZmluZShEb2N1bWVudC5wcm90b3R5cGUsIHsgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdEb2N1bWVudCcsIG5vZGVUeXBlOiBET0NVTUVOVF9OT0RFIH0pOwoKZXhwb3J0IGNsYXNzIEF0dHIgZXh0ZW5kcyBOb2RlIHsKICBjb25zdHJ1Y3RvcihyYXcsIG93bmVyKSB7CiAgICAvLyBjb25zb2xlLmxvZygnQXR0cicsIHsgcmF3LCBvd25lciB9KTsKICAgIHN1cGVyKHJhdywgb3duZXIpOwoKICAgIHJhd05vZGUuc2V0KHRoaXMsIHJhdyk7CiAgICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgICBkZWZpbmUodGhpcywge30pOwogIH0KCiAgZ2V0IHBhdGgoKSB7CiAgICBsZXQgeyBvd25lckVsZW1lbnQgfSA9IHRoaXM7CiAgICBsZXQgW29iaiwgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIC8vY29uc29sZS5sb2coJ3BhdGgnLHtvd25lcixwYXJlbnR9KTsKICAgIHJldHVybiBOb2RlLnBhdGgob3duZXJFbGVtZW50KS5jb25jYXQoWydhdHRyaWJ1dGVzJywgbmFtZV0pOwogIH0KCiAgZ2V0IG93bmVyRWxlbWVudCgpIHsKICAgIHJldHVybiBOb2RlLm93bmVyKE5vZGUub3duZXIodGhpcykpOwogIH0KICBnZXQgb3duZXJEb2N1bWVudCgpIHsKICAgIHJldHVybiBOb2RlLmRvY3VtZW50KHRoaXMpOwogIH0KCiAgZ2V0IG5hbWUoKSB7CiAgICBjb25zdCBbLCBuYW1lXSA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIG5hbWU7CiAgfQogIHNldCBuYW1lKHYpIHsKICAgIE5vZGUucmF3KHRoaXMpWzFdID0gdjsKICB9CgogIGdldCB2YWx1ZSgpIHsKICAgIGNvbnN0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICByZXR1cm4gb2JqW25hbWVdOwogIH0KICBzZXQgdmFsdWUodikgewogICAgY29uc3QgW29iaiwgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIG9ialtuYW1lXSA9IHY7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oKSB7CiAgICBjb25zdCBbb2JqLCBuYW1lXSA9IE5vZGUucmF3KHRoaXMpOwogICAgY29uc3QgdmFsdWUgPSBvYmpbbmFtZV07CiAgICByZXR1cm4gYFx4MWJbMTszNW0ke25hbWV9XHgxYlsxOzM0bT0ke3F1b3RlKHZhbHVlLCAnIicpfVx4MWJbMG1gOwogIH0KfQoKZGVmaW5lKEF0dHIucHJvdG90eXBlLCB7CiAgbm9kZVR5cGU6IEFUVFJJQlVURV9OT0RFLAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnQXR0cicKfSk7CgpleHBvcnQgY2xhc3MgVGV4dCBleHRlbmRzIE5vZGUgewogIHN0YXRpYyBzdG9yZSA9IGdldHRlcnNldHRlcihyYXdOb2RlKTsKCiAgY29uc3RydWN0b3Ioa2V5LCBvd25lcikgewogICAgc3VwZXIob3duZXIgPyBrZXkgOiBudWxsLCBvd25lcik7CiAgICBsZXQgZ2V0LCBzZXQ7CiAgICBpZihvd25lcikgewogICAgICBsZXQgcmF3ID0gb3duZXIgaW5zdGFuY2VvZiBOb2RlTGlzdCA/IE5vZGUucmF3KG93bmVyKSA6IG93bmVyOwogICAgICBpZihrZXkgaW4gcmF3KSB7CiAgICAgIH0gZWxzZSBpZihyYXcuaW5kZXhPZihrZXkpICE9IC0xKSB7CiAgICAgICAga2V5ID0gcmF3LmluZGV4T2Yoa2V5KTsKICAgICAgfQogICAgICBnZXQgPSAoKSA9PiByYXdba2V5XSA/PyAnJzsKICAgICAgc2V0ID0gdmFsdWUgPT4gKHJhd1trZXldID0gdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgVGV4dC5zdG9yZSh0aGlzLCBrZXkpOwogICAgICBnZXQgPSAoKSA9PiBUZXh0LnN0b3JlKHRoaXMpOwogICAgICBzZXQgPSB2YWx1ZSA9PiBUZXh0LnN0b3JlKHRoaXMsIHZhbHVlKTsKICAgIH0KICAgIHRleHRWYWx1ZXModGhpcywgbW9kaWZpZXIoZ2V0LCBzZXQpKTsKICAgIC8vY29uc29sZS5sb2coJ1RleHQnLCBnZXQoKSk7CiAgfQoKICBnZXQgZGF0YSgpIHsKICAgIHJldHVybiB0ZXh0VmFsdWVzKHRoaXMpKHZhbHVlID0+IHZhbHVlKTsKICB9CgogIGdldCBub2RlVmFsdWUoKSB7CiAgICByZXR1cm4gdGV4dFZhbHVlcyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZSk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIHJldHVybiB0aGlzLmRhdGE7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpczsKICAgIHJldHVybiBgXHgxYlsxOzMxbSR7dGhpc1tTeW1ib2wudG9TdHJpbmdUYWddfVx4MWJbMG0gXHgxYlszODsyOzE5MjsyNTUwbSR7cXVvdGUoZGF0YSwgIiciKX1ceDFiWzBtYDsKICB9CgogIHN0YXRpYyBjYWNoZSA9IE1ha2VDYWNoZTIoKGtleSwgb3duZXIpID0+IG5ldyBUZXh0KGtleSwgb3duZXIpKTsKfQoKVGV4dC5wcm90b3R5cGUuX19wcm90b19fID0gTm9kZS5wcm90b3R5cGU7CmRlZmluZShUZXh0LnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBURVhUX05PREUsCiAgbm9kZU5hbWU6ICcjdGV4dCcsCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdUZXh0Jwp9KTsKCmNvbnN0IFRhZyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBjbGFzcyBDb21tZW50IGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3IocmF3LCBvd25lcikgewogICAgc3VwZXIocmF3LCBvd25lcik7CgogICAgb3duZXJFbGVtZW50LnNldCh0aGlzLCBvd25lcik7CgogICAgLy9jb25zb2xlLmxvZygnQ29tbWVudC5jb25zdHJ1Y3RvciByYXcnLCByYXcpOwoKICAgIGxldCBnZXQgPSAoKSA9PiByYXcudGFnTmFtZSA/PyAnIS0tLS0nOwogICAgbGV0IHNldCA9IHZhbHVlID0+IChyYXcudGFnTmFtZSA9IHZhbHVlKTsKCiAgICBUYWcoCiAgICAgIHRoaXMsCiAgICAgIG1vZGlmaWVyKAogICAgICAgICgpID0+IGdldCgpLnJlcGxhY2UoL14hLS0oLiopLS0kL2csICckMScpLAogICAgICAgIHZhbHVlID0+IHNldChgIS0tJHt2YWx1ZX0tLWApCiAgICAgICkKICAgICk7CiAgfQoKICBnZXQgZGF0YSgpIHsKICAgIHJldHVybiBUYWcodGhpcykodmFsdWUgPT4gJzwhLS0nICsgdmFsdWUgKyAnLS0+Jyk7CiAgfQoKICBnZXQgbm9kZVZhbHVlKCkgewogICAgcmV0dXJuIFRhZyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZSk7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpczsKICAgIHJldHVybiBgQ29tbWVudCBceDFiWzM4OzI7MTg0OzA7MjM0bSR7ZGF0YX1ceDFiWzBtYDsKICB9CgogIHN0YXRpYyBjYWNoZSA9IE1ha2VDYWNoZTIoKG5vZGUsIG93bmVyKSA9PiBuZXcgQ29tbWVudChub2RlLCBvd25lcikpOwp9CgpDb21tZW50LnByb3RvdHlwZS5fX3Byb3RvX18gPSBOb2RlLnByb3RvdHlwZTsKZGVmaW5lKENvbW1lbnQucHJvdG90eXBlLCB7CiAgbm9kZVR5cGU6IENPTU1FTlRfTk9ERSwKICBub2RlTmFtZTogJyNjb21tZW50JywKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0NvbW1lbnQnCn0pOwoKY29uc3QgVG9rZW5zID0gZ2V0dGVyc2V0dGVyKG5ldyBXZWFrTWFwKCkpOwoKZXhwb3J0IGNsYXNzIFRva2VuTGlzdCB7CiAgY29uc3RydWN0b3Iob3duZXIsIGtleSA9ICdjbGFzcycpIHsKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIGxldCB7IGF0dHJpYnV0ZXMgfSA9IE5vZGUucmF3KG93bmVyKTsKCiAgICBsZXQgZ2V0ID0gKCkgPT4gYXR0cmlidXRlc1trZXldID8/ICcnOwogICAgbGV0IHNldCA9IHZhbHVlID0+IChhdHRyaWJ1dGVzW2tleV0gPSB2YWx1ZSk7CgogICAgVG9rZW5zKAogICAgICB0aGlzLAogICAgICBtb2RpZmllcigKICAgICAgICAoKSA9PiBnZXQoKS50cmltKCkuc3BsaXQoL1xzKy9nKSwKICAgICAgICB2YWx1ZSA9PiBzZXQodmFsdWUuam9pbignICcpKQogICAgICApCiAgICApOwogIH0KCiAgZ2V0IGxlbmd0aCgpIHsKICAgIHJldHVybiBUb2tlbnModGhpcykodmFsdWUgPT4gdmFsdWUubGVuZ3RoKTsKICB9CgogIGdldCB2YWx1ZSgpIHsKICAgIHJldHVybiBUb2tlbnModGhpcykodmFsdWUgPT4gdmFsdWUuam9pbignICcpKTsKICB9CgogIGl0ZW0oaW5kZXgpIHsKICAgIHJldHVybiBUb2tlbnModGhpcykodmFsdWUgPT4gdmFsdWVbaW5kZXhdKTsKICB9CgogIGNvbnRhaW5zKHRva2VuKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmluZGV4T2YodG9rZW4pICE9IC0xKTsKICB9CgogIGFkZCguLi50b2tlbnMpIHsKICAgIFRva2Vucyh0aGlzKSgoYXJyLCBzZXQpID0+IHsKICAgICAgbGV0IGk7CiAgICAgIGZvcihsZXQgdG9rZW4gb2YgdG9rZW5zKSB7CiAgICAgICAgaWYoKGkgPSBhcnIuaW5kZXhPZih0b2tlbikpID09IC0xKSBhcnIucHVzaCh0b2tlbik7CiAgICAgIH0KICAgICAgc2V0KGFycik7CiAgICB9KTsKICB9CgogIHJlbW92ZSguLi50b2tlbnMpIHsKICAgIFRva2Vucyh0aGlzKSgoYXJyLCBzZXQpID0+IHsKICAgICAgbGV0IGk7CiAgICAgIGZvcihsZXQgdG9rZW4gb2YgdG9rZW5zKSB7CiAgICAgICAgd2hpbGUoKGkgPSBhcnIuaW5kZXhPZih0b2tlbikpICE9IC0xKSBhcnIuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICAgIHNldChhcnIpOwogICAgfSk7CiAgfQoKICB0b2dnbGUodG9rZW4sIGZvcmNlKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBpZigoaSA9IGFyci5pbmRleE9mKHRva2VuKSkgPT0gLTEpIGFyci5wdXNoKHRva2VuKTsKICAgICAgZWxzZSBhcnIuc3BsaWNlKGksIDEpOwogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgc3VwcG9ydHModG9rZW4pIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgcmVwbGFjZShvbGRUb2tlbiwgbmV3VG9rZW4pIHsKICAgIFRva2Vucyh0aGlzKSgoYXJyLCBzZXQpID0+IHsKICAgICAgbGV0IGk7CiAgICAgIGlmKChpID0gYXJyLmluZGV4T2Yob2xkVG9rZW4pKSAhPSAtMSkgYXJyLnNwbGljZShpLCAxLCBuZXdUb2tlbik7CiAgICAgIHNldChhcnIpOwogICAgfSk7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIHJldHVybiAnVG9rZW5MaXN0IFsnICsgVG9rZW5zKHRoaXMpKCkuam9pbignLCcpICsgJ10nOwogIH0KfQoKZGVmaW5lKFRva2VuTGlzdC5wcm90b3R5cGUsIHsKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1Rva2VuTGlzdCcKfSk7CmFycmF5RmFjYWRlKFRva2VuTGlzdC5wcm90b3R5cGUsIChjb250YWluZXIsIGkpID0+IGNvbnRhaW5lci5pdGVtKGkpKTsKCmNvbnN0IGNzc1N0eWxlTWFwID0gZ2V0dGVyc2V0dGVyKG5ldyBXZWFrTWFwKCkpOwoKZXhwb3J0IGNsYXNzIENTU1N0eWxlRGVjbGFyYXRpb24gewogIGNvbnN0cnVjdG9yKGF0dHJPYmosIG93bmVyKSB7CiAgICBsZXQgY3NzU3R5bGU7CiAgICBjb25zdCBmYWN0b3J5ID0gRmFjdG9yeS5mb3Iob3duZXIpOwoKICAgIHJhd05vZGUuc2V0KHRoaXMsIGF0dHJPYmopOwogICAgb3duZXJFbGVtZW50LnNldCh0aGlzLCBvd25lcik7CgogICAgbGV0IGVudHJpZXMgPSBnZXRFbnRyaWVzKCk7CgogICAgbGV0IGludGVybmFsID0gewogICAgICBlbnRyaWVzLAogICAgICBvYmo6IGdldE9iaihlbnRyaWVzKSwKICAgICAgc2V0KGtleSwgdmFsdWUpIHsKICAgICAgICB0aGlzLm9ialtrZXldID0gdmFsdWU7CiAgICAgICAgc2V0RW50cmllcygodGhpcy5lbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5vYmopKSk7CiAgICAgIH0sCiAgICAgIHJlbW92ZShrZXkpIHsKICAgICAgICBpZihrZXkgaW4gdGhpcy5vYmopIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLm9ialtrZXldOwogICAgICAgICAgc2V0RW50cmllcygodGhpcy5lbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5vYmopKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIGNzc1N0eWxlID0gbmV3IFByb3h5KHRoaXMsIHsKICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gewogICAgICAgIGlmKHByb3AgPT09ICdjb25zdHJ1Y3RvcicpIHJldHVybiBDU1NTdHlsZURlY2xhcmF0aW9uOwogICAgICAgIGlmKHR5cGVvZiBwcm9wID09ICdzdHJpbmcnKSB7CiAgICAgICAgICBpZihwcm9wID09ICdsZW5ndGgnKSByZXR1cm4gaW50ZXJuYWwuZW50cmllcy5sZW5ndGg7CiAgICAgICAgICBpZighLy0vLnRlc3QocHJvcCkpIHsKICAgICAgICAgICAgbGV0IGRlYyA9IC9bYS16XVtBLVpdLy50ZXN0KHByb3ApID8gZGVjYW1lbGl6ZShwcm9wKSA6IHByb3A7CiAgICAgICAgICAgIGlmKGRlYyBpbiBpbnRlcm5hbC5vYmopIHJldHVybiBpbnRlcm5hbC5vYmpbZGVjXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyogIGlmKHByb3AgaW4gQ1NTU3R5bGVEZWNsYXJhdGlvbi5wcm90b3R5cGUpIHJldHVybiBDU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZVtwcm9wXTsqLwoKICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICAgIH0sCiAgICAgIHNldDogKHRhcmdldCwgcHJvcCwgdmFsdWUpID0+IHsKICAgICAgICBpZih0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJykgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuOwogICAgICAgICAgaWYoIS8tLy50ZXN0KHByb3ApKSB7CiAgICAgICAgICAgIGxldCBkZWMgPSAvW2Etel1bQS1aXS8udGVzdChwcm9wKSA/IGRlY2FtZWxpemUocHJvcCkgOiBwcm9wOwogICAgICAgICAgICBpbnRlcm5hbC5zZXQoZGVjLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlKTsKICAgICAgfSwKICAgICAgZGVsZXRlUHJvcGVydHk6ICh0YXJnZXQsIHByb3ApID0+IHsKICAgICAgICBpZih0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJykgewogICAgICAgICAgaWYoIS8tLy50ZXN0KHByb3ApKSB7CiAgICAgICAgICAgIGxldCBkZWMgPSAvW2Etel1bQS1aXS8udGVzdChwcm9wKSA/IGRlY2FtZWxpemUocHJvcCkgOiBwcm9wOwogICAgICAgICAgICBpbnRlcm5hbC5yZW1vdmUoZGVjKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wKTsKICAgICAgfSAvKiwKICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAodGFyZ2V0LCBwcm9wKSA9PiB7CiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCk7CiAgICAgIH0qLwogICAgfSk7CgogICAgY3NzU3R5bGVNYXAoY3NzU3R5bGUsIGludGVybmFsKTsKCiAgICByYXdOb2RlLnNldChjc3NTdHlsZSwgYXR0ck9iaik7CiAgICBvd25lckVsZW1lbnQuc2V0KGNzc1N0eWxlLCBvd25lcik7CgogICAgZnVuY3Rpb24gc2V0U3R5bGUoc3RyKSB7CiAgICAgIGF0dHJPYmouc3R5bGUgPSBzdHI7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRTdHlsZSgpIHsKICAgICAgcmV0dXJuIGF0dHJPYmouc3R5bGU7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRFbnRyaWVzKCkgewogICAgICBsZXQgYSA9IGdldFN0eWxlKCkKICAgICAgICAuc3BsaXQoL1xzKjtccyovZykKICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gLzovLnRlc3QoaXRlbSkpOwogICAgICByZXR1cm4gYS5tYXAoaXRlbSA9PiBpdGVtLnNwbGl0KC9ccyo6XHMqLykpOwogICAgfQogICAgZnVuY3Rpb24gc2V0RW50cmllcyhlbnQpIHsKICAgICAgbGV0IHN0ciA9IGVudC5tYXAoKFtrLCB2XSkgPT4gYCR7a306JHt2fTtgKS5qb2luKCcnKTsKICAgICAgc2V0U3R5bGUoc3RyKTsKICAgICAgcmV0dXJuIHN0cjsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRPYmooZW50ID0gaW50ZXJuYWwuZW50cmllcykgewogICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKGVudCk7CiAgICB9CgogICAgcmV0dXJuIGNzc1N0eWxlOwogIH0KCiAgLyogZ2V0IGNzc1RleHQoKSB7CiAgICAgY29uc3QgaW50ZXJuYWwgPSBjc3NTdHlsZU1hcCh0aGlzKTsKICAgIHJldHVybiBpbnRlcm5hbC5lbnRyaWVzLm1hcCgoW2ssIHZdKSA9PiBgJHtrfToke3Z9O2ApLmpvaW4oJycpOwogIH0qLwoKICBzZXRQcm9wZXJ0eShrLCB2KSB7CiAgICBjb25zdCBpbnRlcm5hbCA9IGNzc1N0eWxlTWFwKHRoaXMpOwogICAgaW50ZXJuYWwuc2V0KGssIHYpOwogIH0KCiAgaXRlbShpbmRleCkgewogICAgY29uc3QgaW50ZXJuYWwgPSBjc3NTdHlsZU1hcCh0aGlzKTsKICAgIHJldHVybiBpbnRlcm5hbC5lbnRyaWVzW2luZGV4XVswXTsKICB9CgogIGdldFByb3BlcnR5VmFsdWUoaykgewogICAgY29uc3QgaW50ZXJuYWwgPSBjc3NTdHlsZU1hcCh0aGlzKTsKICAgIHJldHVybiBpbnRlcm5hbC5vYmpba107CiAgfQoKICByZW1vdmVQcm9wZXJ0eShrKSB7CiAgICBjb25zdCBpbnRlcm5hbCA9IGNzc1N0eWxlTWFwKHRoaXMpOwogICAgaW50ZXJuYWwucmVtb3ZlKGspOwogIH0KfQoKZGVmaW5lKENTU1N0eWxlRGVjbGFyYXRpb24ucHJvdG90eXBlLCB7CiAgY29uc3RydWN0b3I6IENTU1N0eWxlRGVjbGFyYXRpb24sCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdDU1NTdHlsZURlY2xhcmF0aW9uJywKICBnZXQgY3NzVGV4dCgpIHsKICAgIGxldCB7IHN0eWxlIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIHJldHVybiBzdHlsZTsKICB9LAoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGxldCBzdHIgPSBpbnNwZWN0KHRoaXMsIGRlcHRoICsgMSwgeyAuLi5vcHRzLCBjdXN0b21JbnNwZWN0OiBmYWxzZSB9KTsKICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cW09iamVjdC4qL2csICcnKTsKICAgIHJldHVybiBzdHIgKyB0aGlzLmNzc1RleHQ7CiAgfQp9KTsKCmZ1bmN0aW9uIE1lbWJyYW5lKGluc3RhbmNlLCBvYmosIHByb3RvLCB3cmFwUHJvcCwgd3JhcEVsZW1lbnQpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ01lbWJyYW5lJyk7CiAgcmV0dXJuIG5ldyBQcm94eShpbnN0YW5jZSwgewogICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4KICAgICAgd3JhcFByb3AocHJvcCkgPyB3cmFwRWxlbWVudChvYmpbcHJvcF0sIHByb3ApIDogUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksCiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICh3cmFwUHJvcChwcm9wKSA/IHRydWUgOiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApKSwKICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcCkgPT4KICAgICAgd3JhcFByb3AocHJvcCkKICAgICAgICA/IHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmFsdWU6IHdyYXBFbGVtZW50KG9ialtwcm9wXSwgcHJvcCkKICAgICAgICAgIH0KICAgICAgICA6IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCksCiAgICBnZXRQcm90b3R5cGVPZjogdGFyZ2V0ID0+IHByb3RvID8/IE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0YW5jZSksCiAgICBzZXRQcm90b3R5cGVPZjogKHRhcmdldCwgcCkgPT4gKHByb3RvID0gcCksCiAgICBvd25LZXlzOiB0YXJnZXQgPT4gWy4uLlJlZmxlY3Qub3duS2V5cyh0YXJnZXQpXQogIH0pOwp9CgovKmV4cG9ydCBmdW5jdGlvbiBNYWtlRmFjdG9yeSgpIHsKICBjb25zdCBtZW1vID0gbWVtb2l6ZSgocmF3LCBvd25lciwgY3RvcikgPT4gewogICAgY29uc3QgaXNBcnJheSA9IGN0b3IgPT0gTm9kZUxpc3QgfHwgb3duZXIuY2hpbGRyZW4gPT0gcmF3OwogICAgY29uc3QgaXNFbGVtZW50ID0gY3RvciA9PSBFbGVtZW50IHx8IChvd25lci5jaGlsZHJlbiAhPSByYXcgJiYgb3duZXIuYXR0cmlidXRlcyAhPSByYXcpOwogICAgY29uc29sZS5sb2coJ1x4MWJbMzg7MjsxMTI7MTEyOzI1Mm1NZW1vaXplXHgxYlswbScsIHsgaXNBcnJheSwgaXNFbGVtZW50LCByYXcgfSk7CgogICAgaWYoU3ltYm9sLnRvU3RyaW5nVGFnIGluIG93bmVyKSBvd25lciA9IE5vZGUucmF3KG93bmVyKTsKICAgIGNvbnN0IGtleSA9IGlzQXJyYXkgPyAnY2hpbGRyZW4nIDogIWlzRWxlbWVudCA/ICdhdHRyaWJ1dGVzJyA6IGtleU9mKG93bmVyLCByYXcpOwogICAgY29uc3QgbGlzdCA9IG93bmVyW2tleV07CiAgICBjdG9yID8/PSBvd25lci5hdHRyaWJ1dGVzID09IHJhdyA/IE5hbWVkTm9kZU1hcCA6IG93bmVyLmNoaWxkcmVuID09IHJhdyA/IE5vZGVMaXN0IDogRWxlbWVudDsKICAgIGxldCByZXQgPSBuZXcgY3RvcihyYXcsIG93bmVyLCBjdG9yKTsKICAgIC8vY29uc29sZS5sb2coJ1x4MWJbMzg7MjsxMTI7MTEyOzI1Mm1NZW1vaXplXHgxYlswbScsIHsga2V5LCBjdG9yLCByZXQgfSk7CiAgICByZXR1cm4gcmV0OwogIH0pOwoKICByZXR1cm4gZGVmaW5lKAogICAgKHJhdywgb3duZXIsIGN0b3IpID0+IHsKICAgICAgbGV0IHJldDsKICAgICAgaWYoKHJldCA9IG1lbW8uZ2V0KHJhdykpKSB7CiAgICAgICAgcmV0IGluc3RhbmNlb2YgTm9kZSA/IHBhcmVudE5vZGUuc2V0KHJhdywgb3duZXIpIDogb3duZXJOb2RlLnNldChyYXcsIG93bmVyKTsKICAgICAgICByZXR1cm4gcmV0OwogICAgICB9CiAgICAgIHJldHVybiBtZW1vKHJhdywgb3duZXIsIGN0b3IpOwogICAgfSwKICAgIHsgbWVtbyB9CiAgKTsKfSovCgovKmxldCBtYXAgPSBuZXcgV2Vha01hcCgpOwoKZXhwb3J0IGZ1bmN0aW9uIEZhY3RvcnkocmF3LCBvd25lciwgY3RvcikgewogIGxldCBvYmo7CiAgaWYoaXNPYmplY3QocmF3KSAmJiAob2JqID0gbWFwLmdldChyYXcpKSkgewogICAgb3duZXJFbGVtZW50LnNldChvYmosIG93bmVyKTsKICAgIHJldHVybiBvYmo7CiAgfQoKICBjb25zdCBpc0FycmF5ID0gYXJnID0+IEFycmF5LmlzQXJyYXkoYXJnKTsKICBjb25zdCBpc0F0dHJpYnV0ZXMgPSBhcmcgPT4gaXNPYmplY3QoYXJnKSAmJiAhaXNBcnJheShhcmcpICYmICEoJ3RhZ05hbWUnIGluIGFyZyk7CgogIGN0b3IgPz89IGlzQXJyYXkocmF3KSA/IE5vZGVMaXN0IDogaXNBdHRyaWJ1dGVzKHJhdykgPyBOYW1lZE5vZGVNYXAgOiB0eXBlb2YgcmF3ID09ICdzdHJpbmcnID8gVGV4dCA6IEVsZW1lbnQ7CgogIG9iaiA9IG5ldyBjdG9yKHJhdywgb3duZXIpOwogIHJldHVybiBvYmo7Cn0qLwoKZXhwb3J0IGZ1bmN0aW9uIEdldFR5cGUocmF3LCBvd25lciwgY3RvcikgewogIGNvbnN0IGlzQXJyYXkgPSBhcmcgPT4gQXJyYXkuaXNBcnJheShhcmcpOwogIGNvbnN0IGlzQXR0cmlidXRlcyA9IGFyZyA9PiBpc09iamVjdChhcmcpICYmICFpc0FycmF5KGFyZykgJiYgISgndGFnTmFtZScgaW4gYXJnKTsKCiAgaWYoaXNBcnJheShyYXcpKSByZXR1cm4gRW50aXRpZXMuTm9kZUxpc3Q7CiAgaWYoJ3RhZ05hbWUnIGluIHJhdykgcmV0dXJuIC9eIS0tLiotLSQvLnRlc3QocmF3LnRhZ05hbWUpID8gRW50aXRpZXMuQ29tbWVudCA6IEVudGl0aWVzLkVsZW1lbnQ7CiAgaWYodHlwZW9mIHJhdyA9PSAnc3RyaW5nJykgcmV0dXJuIEVudGl0aWVzLlRleHQ7CiAgaWYodHlwZW9mIHJhdyA9PSAnb2JqZWN0JykgcmV0dXJuIEVudGl0aWVzLk5hbWVkTm9kZU1hcDsKfQoAAAAAAAAAADmVAAAAAAAAAAAAAAAAAAAAAAAAOZUAAAAAAAAAAAAAAAAAAAAAAAA5lQAAAAAAAAAAAAAAAAAAAAAAADmVAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAgzsAAAAAAACDOwAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"out",
				"Browse Mode: Outline (Right)"
			],
			[
				"outline",
				"Browse Mode: Outline (Right)"
			],
			[
				"prettier",
				"JsPrettier: Format Code"
			],
			[
				"pre",
				"Project: Edit Project"
			],
			[
				"prett",
				"JsPrettier: Format Code"
			],
			[
				"",
				"Auto indent"
			],
			[
				"list pack",
				"Package Control: List Packages"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"edit ",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"edit",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"remove",
				"Package Control: Remove Package"
			],
			[
				"outli",
				"Browse Mode: Outline (Right)"
			],
			[
				"debugger",
				"Preferences: Debugger Settings"
			],
			[
				"add re",
				"Package Control: Add Repository"
			],
			[
				"scheme",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"outlin",
				"Browse Mode: Outline (Right)"
			],
			[
				"INSTALL",
				"Package Control: Install Package"
			],
			[
				"disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: ",
				"Package Control: Disable Package"
			],
			[
				"adap",
				"Debugger: Install Adapters"
			],
			[
				"install ada",
				"Debugger: Install Adapters"
			],
			[
				"adapter",
				"Debugger: Install Adapters"
			],
			[
				"debug",
				"Debugger: Install Adapters"
			],
			[
				"Package Control: remove",
				"Package Control: Remove Package"
			],
			[
				"debu",
				"Debugger: Install Adapters"
			],
			[
				"instal",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 289.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/roman/Projects/plot-cv",
		"/home/roman/Projects/plot-cv/lib",
		"/home/roman/Projects/plot-cv/lib/dsp",
		"/home/roman/Projects/plot-cv/lib/eagle"
	],
	"file_history":
	[
		"/home/roman/Projects/plot-cv/svg-crop-pad.js",
		"/home/roman/Projects/plot-cv/40106-4069-Synth.cropped.svg",
		"/home/roman/.config/sublime-text/Packages/User/Themes/Luscious.tmTheme",
		"/home/roman/mnt/samsung-roman/Projects/an-tronics/Mind-Synchronizing-Generator-PinHdrPotX.svg",
		"/home/roman/Projects/plot-cv/lib/util.js",
		"/home/roman/Projects/plot-cv/lib/misc.js",
		"/home/roman/mnt/samsung-roman/Projects/an-tronics/40106-4069-Synth.svg",
		"/home/roman/Projects/plot-cv/lib/eagle/element.js",
		"/home/roman/Projects/plot-cv/lib/geom/pointList.js",
		"/home/roman/Projects/plot-cv/lib/geom/matrix.js",
		"/home/roman/Projects/plot-cv/lib/svg/path.js",
		"/home/roman/Projects/plot-cv/lib/dom/svg.js",
		"/home/roman/Projects/plot-cv/io-helpers.js",
		"/home/roman/Projects/plot-cv/lib/geom/bbox.js",
		"/home/roman/Projects/plot-cv/lib/geom/size.js",
		"/home/roman/Projects/plot-cv/lib/eda/units.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/css3-selectors.js",
		"/home/roman/mnt/samsung-roman/Projects/an-tronics/StyroCutter-556-heatsink-5V.svg",
		"/home/roman/Projects/plot-cv/plot-cv.sublime-project",
		"/home/roman/Projects/plot-cv/os-helpers.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
		"/home/roman/Projects/plot-cv/eagle-commands.js",
		"/home/roman/Projects/plot-cv/lib/eagle/document.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/resolve-imports.js",
		"/home/roman/Projects/plot-cv/lib/geom/trbl.js",
		"/home/roman/Projects/plot-cv/lib/geom/point.js",
		"/home/roman/Projects/plot-cv/lib/geom/line.js",
		"/home/roman/Projects/plot-cv/lib/geom/rect.js",
		"/home/roman/Projects/plot-cv/lib/dom.js",
		"/home/roman/Projects/plot-cv/lib/geom/transformation.js",
		"/home/roman/Projects/plot-cv/lib/grammars/ebnf.ebnf",
		"/home/roman/Projects/plot-cv/cli-helpers.js",
		"/home/roman/Projects/plot-cv/eagle-shell.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/repl.js",
		"/home/roman/Projects/plot-cv/CMakeLists.txt",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
		"/home/roman/Projects/plot-cv/draw.js",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_lexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-net/lib/jsutils.c",
		"/home/roman/Projects/plot-cv/draw.html",
		"/home/roman/Projects/plot-cv/debugger-client.js",
		"/home/roman/Projects/plot-cv/debugger-server.js",
		"/home/roman/Projects/plot-cv/lib/dom/element.js",
		"/home/roman/Projects/plot-cv/fire.js",
		"/home/roman/Projects/plot-cv/upload-server.js",
		"/home/roman/Projects/plot-cv/quickjs/quickjs-libc.c",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.c",
		"/home/roman/Projects/plot-cv/quickjs/qjscalc.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/list-exports.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/buffer-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/lexer.h",
		"/home/roman/Projects/plot-cv/lib/ecmascript.js",
		"/home/roman/Projects/plot-cv/getModuleProps.js",
		"/home/roman/Projects/plot-cv/test-operators.js",
		"/home/roman/Projects/plot-cv/data/test-websocket.functions.js",
		"/home/roman/Projects/plot-cv/test-nanovg.js",
		"/home/roman/Projects/plot-cv/lib/alea.js",
		"/home/roman/Projects/plot-cv/upload.js",
		"/usr/include/sqlite3.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/js-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-internal.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c",
		"/home/roman/Projects/plot-cv/test-sqlite3.js",
		"/home/roman/Projects/plot-cv/sqlite3.js",
		"/home/roman/Projects/plot-cv/ast-shell.js",
		"/home/roman/Projects/plot-cv/clang-ast.js",
		"/home/roman/Projects/mariadb-10.3-10.3.38/scripts/mysql_system_tables.sql",
		"/home/roman/Projects/plot-cv/test-bjson.js",
		"/home/roman/Projects/mariadb-10.3-10.3.38/scripts/fill_help_tables.sql",
		"/home/roman/Projects/plot-cv/quickjs/run-test262.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-net/build-libwebsockets.sh",
		"/home/roman/Projects/plot-cv/quickjs/qjs-net/build/build.ninja",
		"/home/roman/Projects/plot-cv/lib/fd-graph.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/textElement.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/symbol.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/pin.js",
		"/home/roman/Projects/plot-cv/555-PWM-Motor-Speed-Controller-alt-schematic.svg",
		"/home/roman/Projects/plot-cv/555-PWM-Motor-Speed-Controller-alt-board.svg",
		"/home/roman/Projects/an-tronics/eagle/555-PWM-Motor-Speed-Controller-alt.brd",
		"/home/roman/Projects/an-tronics/eagle/555-PWM-Motor-Speed-Controller-alt.sch",
		"/home/roman/Projects/plot-cv/lib/eagle/renderUtils.js",
		"/home/roman/Projects/plot-cv/lib/dsp/util.js",
		"/home/roman/Projects/plot-cv/Zeichnung.svg",
		"/home/roman/Projects/plot-cv/lib/eagle/svg/ZoomRedraw.svg",
		"/home/roman/Projects/plot-cv/lib/eagle/components/text.js",
		"/home/roman/Projects/plot-cv/lib/eagle/schematicRenderer.js",
		"/home/roman/Projects/plot-cv/lib/eagle/svgRenderer.js",
		"/home/roman/Projects/plot-cv/qjs-opencv/line.js",
		"/home/roman/Projects/plot-cv/lib/eagle/boardRenderer.js",
		"/home/roman/Projects/plot-cv/eagle2svg.js",
		"/home/roman/Projects/plot-cv/lib/eagle/project.js",
		"/home/roman/Projects/plot-cv/lib/eagle/nodeList.js",
		"/home/roman/Projects/plot-cv/lib/eagle/common.js",
		"/home/roman/Projects/plot-cv/lib/dom/preactComponent.js",
		"/home/roman/Projects/plot-cv/lib/eagle/node.js",
		"/home/roman/Projects/plot-cv/lib/eagle/ref.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/grid.js",
		"/home/roman/Projects/plot-cv/lib/eagle/elementProxy.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/smd.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/wirePath.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/wire.js",
		"/home/roman/Projects/plot-cv/lib/eagle/nodeMap.js",
		"/home/roman/Projects/plot-cv/lib/eagle/renderer.js",
		"/home/roman/Projects/plot-cv/resolve-imports.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/circle.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/pad.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/via.js",
		"/home/roman/Projects/plot-cv/lib/eagle/libraryRenderer.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components.js",
		"/home/roman/Projects/plot-cv/quickjs/cmake/functions.cmake",
		"/home/roman/Projects/plot-cv/qjs-opencv/cmake/functions.cmake",
		"/home/roman/Projects/plot-cv/cmake/functions.cmake",
		"/home/roman/Projects/plot-cv/lib/container/spatial-hash.js",
		"/home/roman/Projects/plot-cv/lib/container/Hash-Multimap.js",
		"/home/roman/Projects/plot-cv/lib/container/componentMap.js",
		"/home/roman/Projects/plot-cv/lib/container/multikeymap.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/drawing.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-misc.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/util-w-2.diff",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/new.diff",
		"/home/roman/Projects/plot-cv/lib/eda/colorCoding.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/xml-shell.js",
		"/home/roman/Projects/plot-cv/lib/color/rgba.js",
		"/home/roman/Projects/plot-cv/lib/delegate.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/package.js"
	],
	"find":
	{
		"height": 38.0
	},
	"find_in_files":
	{
		"height": 142.0,
		"where_history":
		[
			"/home/roman/Projects/plot-cv,*.c,*.h,*.js",
			""
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"size.*unit",
			"debug",
			"clip-path",
			"AllPar",
			"clip-path",
			"xref",
			"clip-path",
			"clip3",
			"#clip3",
			"M 27\\.199933 474\\.158751 L 27\\.199933 486\\.086916 ",
			"M 27.199933 474.158751 L 27.199933 486.086916 ",
			"Positioned",
			"<clipPath",
			"clip.*path",
			"clip.*path\n",
			"clip.*path",
			"clip-path",
			"serialize",
			"FileWriter",
			"FileWriterw",
			"FileWriter",
			"open\\(",
			"written",
			"WriteFile",
			"\\, \\{mode\\:0o755\\}",
			"WriteFile",
			"verb",
			"WriteFile",
			"GetB",
			"ERROR",
			"GetPoints",
			"new Point",
			"pathToPoints",
			"GetPoints",
			"pathToPoints",
			"GetPoints",
			"map =",
			"filter =",
			"'z'",
			"filter =",
			"GetPoints",
			"roundTo",
			"round =",
			"at =",
			"deref =",
			"deref",
			"GetPoints",
			"GetTransformedPoints",
			"GetBounds",
			"pointsToAbsolute",
			"splitPath",
			"Element",
			"ELement",
			"parseValues",
			"parse",
			"parseS",
			"parseSVG",
			"parseSVGPath",
			"path293",
			"GetBounds",
			"GetPoints",
			"formMatrix",
			"ElementTransform",
			"AllTra",
			"AllTransforms",
			"GetTransform",
			"getTransformationMatrix",
			"AllTransforms",
			"Symbol.iterator",
			"'multiply'",
			"Matrix.multiply",
			"multiply'",
			"Util\\.",
			"Util.inherit",
			"Util\\.extend",
			"extend\\(",
			"inherit",
			"colorText",
			"Util\\.",
			"parse",
			"fromDOM",
			"GetBounds",
			"fromString",
			"getAttribute",
			"'svg'",
			"'sv'",
			"unitConv",
			"unitConv\\(",
			"unitConv",
			"unitConv\\(",
			"unitConv",
			"toSVG",
			"outset",
			"dom",
			"dom.js",
			"globalImports",
			"toSource",
			"PointList\\.\\.prototype",
			"PointList\\.\\.",
			"};\nPointList",
			"coloring",
			"searchArrayBuffe",
			"padAnsi",
			"import ",
			"mapFunction",
			"mapFunc",
			"ansi",
			"stripAnsi",
			"inspectSy",
			"nodejs.util.inspect.custom",
			"nodejs.*inspect",
			"nodejs",
			"inspectSymb",
			"Point.prototype",
			"inspectSymb",
			"objects",
			"GetPoints",
			"Positioned",
			"GetBounds",
			"updateXY",
			"GetBounds",
			"}\nfunction",
			"'m'",
			"Factory",
			"(function|class) NodeList",
			"function NodeList",
			"class NodeList",
			"NodeList"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"MakePoint",
			"",
			"define",
			"PointList\\.prototype",
			"};\\n\nPointList.",
			"}\\n\nfunction",
			"",
			"isObject",
			"roundTo",
			"define",
			"padding"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"current_file": null,
							"function_name_status_row": 28,
							"outline_rename_mode": false,
							"symkeys":
							[
							],
							"symlist":
							[
							],
							"syntax": "Packages/Outline/outline.hidden-tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680856036.03,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 1,
					"file": "quickjs/qjs-modules/resolve-imports.js",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 55973,
						"regions":
						{
						},
						"selection":
						[
							[
								45114,
								45170
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 1633,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680889241.65,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 22350.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "quickjs/qjs-modules/include/location.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1660,
						"regions":
						{
						},
						"selection":
						[
							[
								1383,
								1132
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 38,
							"syntax": "Packages/C++11/C++11.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680889099.37,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "quickjs/qjs-modules/quickjs-lexer.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 42478,
						"regions":
						{
						},
						"selection":
						[
							[
								27908,
								27924
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 1106,
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680889100.37,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 15070.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "/home/roman/mnt/samsung-roman/Projects/an-tronics/Mind-Synchronizing-Generator-PinHdrPotX.svg",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1786216,
						"regions":
						{
						},
						"selection":
						[
							[
								1695367,
								1695376
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 3485,
							"syntax": "Packages/XML/XML.sublime-syntax",
							"tabs_extra_last_activated": 1680871717.34,
							"tabs_extra_last_activated_sheet_index": 2
						},
						"translation.x": 0.0,
						"translation.y": 231624.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "lib/dom/svg.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 17260,
						"regions":
						{
						},
						"selection":
						[
							[
								16308,
								16459
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 499,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680874465.24,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 7044.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "lib/eagle/ref.js",
					"semi_transient": true,
					"settings":
					{
						"buffer_size": 3417,
						"regions":
						{
						},
						"selection":
						[
							[
								7,
								6
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680879735.5,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "/home/roman/.config/sublime-text/Packages/User/Themes/Luscious.tmTheme",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 16654,
						"regions":
						{
							"col_191D27FF":
							{
								"flags": 16,
								"regions":
								[
									[
										359,
										366
									]
								],
								"scope": "col_191D27FF"
							},
							"col_191D27FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_191D27FF_circle.png",
								"regions":
								[
									[
										272,
										272
									]
								],
								"scope": "col_gutter"
							}
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/XML/XML.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680872739.95,
							"tabs_extra_last_activated_sheet_index": 1,
							"tabs_extra_moving":
							[
								3,
								0
							],
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "lib/misc.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 64185,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680843553.14,
							"tabs_extra_last_activated_sheet_index": 1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "lib/util.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 185808,
						"regions":
						{
						},
						"selection":
						[
							[
								5645,
								5645
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 187,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680843551.53,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2360.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "lib/geom/pointList.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 13290,
						"regions":
						{
						},
						"selection":
						[
							[
								4420,
								4420
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 146,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680853562.71,
							"tabs_extra_last_activated_sheet_index": 5,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2025.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "io-helpers.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 11741,
						"regions":
						{
						},
						"selection":
						[
							[
								2392,
								3218
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 97,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680869756.29,
							"tabs_extra_last_activated_sheet_index": 7,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1125.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "package.json",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5876,
						"regions":
						{
						},
						"selection":
						[
							[
								1012,
								1012
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 25,
							"syntax": "Packages/JSON/JSON.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680817281.25,
							"tabs_extra_last_activated_sheet_index": 1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "lib/geom/point.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10488,
						"regions":
						{
						},
						"selection":
						[
							[
								4419,
								4436
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 174,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680852657.97,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2094.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "lib/geom/matrix.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 20683,
						"regions":
						{
						},
						"selection":
						[
							[
								19151,
								19257
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 625,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680847947.34,
							"tabs_extra_last_activated_sheet_index": 7,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 8904.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "lib/geom/transformation.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 21584,
						"regions":
						{
						},
						"selection":
						[
							[
								20839,
								20854
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 796,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680847946.92,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 11124.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "lib/geom/bbox.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7020,
						"regions":
						{
						},
						"selection":
						[
							[
								6372,
								6372
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 263,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680845785.44,
							"tabs_extra_last_activated_sheet_index": 9,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3469.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "quickjs/qjs-modules/lib/dom.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 38201,
						"regions":
						{
						},
						"selection":
						[
							[
								15235,
								15235
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 556,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680813744.89,
							"tabs_extra_last_activated_sheet_index": 6,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 10388.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 23.0
	},
	"input":
	{
		"height": 42.0
	},
	"layout":
	{
		"cells":
		[
			[
				2,
				0,
				3,
				2
			],
			[
				0,
				0,
				2,
				2
			]
		],
		"cols":
		[
			0.0,
			0.2,
			0.8,
			1.0
		],
		"rows":
		[
			0.0,
			0.5,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "Run with qjsm",
	"project": "plot-cv.sublime-project",
	"replace":
	{
		"height": 42.0
	},
	"save_all_on_build": false,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"-lexer",
				"quickjs/qjs-modules/quickjs-lexer.c"
			],
			[
				"location.h",
				"quickjs/qjs-modules/include/location.h"
			],
			[
				"res",
				"quickjs/qjs-modules/resolve-imports.js"
			],
			[
				"resolve-im",
				"quickjs/qjs-modules/resolve-imports.js"
			],
			[
				"io-help",
				"io-helpers.js"
			],
			[
				"pointList",
				"lib/geom/pointList.js"
			],
			[
				"PointList",
				"lib/geom/pointList.js"
			],
			[
				"point.js",
				"lib/geom/point.js"
			],
			[
				"svg.js",
				"lib/dom/svg.js"
			],
			[
				"matrix",
				"lib/geom/matrix.js"
			],
			[
				"trans",
				"lib/geom/transformation.js"
			],
			[
				"transform",
				"lib/geom/transformation.js"
			],
			[
				"bbox",
				"lib/geom/bbox.js"
			],
			[
				"misc",
				"lib/misc.js"
			],
			[
				"util",
				"lib/util.js"
			],
			[
				"misc.js",
				"lib/misc.js"
			],
			[
				"util.js",
				"lib/util.js"
			],
			[
				"io-he",
				"io-helpers.js"
			],
			[
				"package.js",
				"package.json"
			],
			[
				"bbox.js",
				"lib/geom/bbox.js"
			],
			[
				"matrix.js",
				"lib/geom/matrix.js"
			],
			[
				"svg/path.js",
				"lib/svg/path.js"
			],
			[
				"units",
				"lib/eda/units.js"
			],
			[
				"size.js",
				"lib/geom/size.js"
			],
			[
				"svg-cr",
				"svg-crop-pad.js"
			],
			[
				"svg-cro",
				"svg-crop-pad.js"
			],
			[
				"rect.js",
				"lib/geom/rect.js"
			],
			[
				"lib/ut",
				"lib/util.js"
			],
			[
				"trbl",
				"lib/geom/trbl.js"
			],
			[
				"point",
				"lib/geom/point.js"
			],
			[
				"point.j",
				"lib/geom/point.js"
			],
			[
				"line.js",
				"lib/geom/line.js"
			],
			[
				"dom.js",
				"lib/dom.js"
			],
			[
				"bbox.j",
				"lib/geom/bbox.js"
			],
			[
				"repl.js",
				"quickjs/qjs-modules/lib/repl.js"
			],
			[
				"svg-crop",
				"svg-crop-pad.js"
			],
			[
				"cli-help",
				"cli-helpers.js"
			],
			[
				"project",
				"lib/eagle/project.js"
			],
			[
				"eagle-comm",
				"eagle-commands.js"
			],
			[
				"lib/util",
				"quickjs/qjs-modules/lib/util.js"
			],
			[
				"eagle-shell",
				"eagle-shell.js"
			],
			[
				"io-helper",
				"io-helpers.js"
			],
			[
				"os-helper",
				"os-helpers.js"
			],
			[
				"cmakelists",
				"CMakeLists.txt"
			],
			[
				"lexer.c",
				"quickjs/qjs-modules/src/lexer.c"
			],
			[
				"-lexer.c",
				"quickjs/qjs-modules/quickjs-lexer.c"
			],
			[
				"utils.c",
				"quickjs/qjs-modules/src/utils.c"
			],
			[
				"ecma",
				"lib/ecmascript.js"
			],
			[
				"lexer.c ",
				"quickjs/qjs-modules/src/lexer.c"
			],
			[
				"lexer.h",
				"quickjs/qjs-modules/include/lexer.h"
			],
			[
				"quickjs-lex",
				"quickjs/qjs-modules/quickjs-lexer.c"
			],
			[
				"test_lexer",
				"quickjs/qjs-modules/tests/test_lexer.js"
			],
			[
				"buffer-u",
				"quickjs/qjs-modules/src/buffer-utils.c"
			],
			[
				"upload-server",
				"upload-server.js"
			],
			[
				"fire.js",
				"fire.js"
			],
			[
				"debugger-cli",
				"debugger-client.js"
			],
			[
				"debugger-ser",
				"debugger-server.js"
			],
			[
				"upload-ser",
				"upload-server.js"
			],
			[
				"debugger-server",
				"debugger-server.js"
			],
			[
				"quickjs-libc",
				"quickjs/quickjs-libc.c"
			],
			[
				"quickjs.c",
				"quickjs/quickjs.c"
			],
			[
				"quickjs-lib",
				"quickjs/quickjs-libc.c"
			],
			[
				"list-ex",
				"quickjs/qjs-modules/list-exports.js"
			],
			[
				"draw.js",
				"draw.js"
			],
			[
				"draw.html",
				"draw.html"
			],
			[
				"getMod",
				"getModuleProps.js"
			],
			[
				"test-op",
				"test-operators.js"
			],
			[
				"nanovg",
				"test-nanovg.js"
			],
			[
				"alea",
				"lib/alea.js"
			],
			[
				"upload.js",
				"upload.js"
			],
			[
				"fire",
				"fire.js"
			],
			[
				"clang-as",
				"clang-ast.js"
			],
			[
				"jsut",
				"quickjs/qjs-modules/src/js-utils.c"
			],
			[
				"qjsm.c",
				"quickjs/qjs-modules/src/qjsm.c"
			],
			[
				"ast-shell",
				"ast-shell.js"
			],
			[
				"quickjs-in",
				"quickjs/qjs-modules/quickjs-internal.h"
			],
			[
				"run-test",
				"quickjs/run-test262.c"
			],
			[
				"quickjs.h",
				"quickjs/quickjs.h"
			],
			[
				"build-libwe",
				"quickjs/qjs-net/build-libwebsockets.sh"
			],
			[
				"ast-she",
				"ast-shell.js"
			],
			[
				"eagle-she",
				"eagle-shell.js"
			],
			[
				"pin.js",
				"lib/eagle/components/pin.js"
			],
			[
				"",
				"~/Projects/an-tronics/eagle/555-PWM-Motor-Speed-Controller-alt.sch"
			],
			[
				"preactCom",
				"lib/dom/preactComponent.js"
			],
			[
				"symb",
				"lib/eagle/components/symbol.js"
			],
			[
				"schematicren",
				"lib/eagle/schematicRenderer.js"
			],
			[
				"svgre",
				"lib/eagle/svgRenderer.js"
			],
			[
				"boardren",
				"lib/eagle/boardRenderer.js"
			],
			[
				"element",
				"lib/eagle/element.js"
			],
			[
				"svgRend",
				"lib/eagle/svgRenderer.js"
			],
			[
				"boardRen",
				"lib/eagle/boardRenderer.js"
			],
			[
				"document",
				"lib/eagle/document.js"
			],
			[
				"boardRe",
				"lib/eagle/boardRenderer.js"
			],
			[
				"renderUtil",
				"lib/eagle/renderUtils.js"
			],
			[
				"eagle2sv",
				"eagle2svg.js"
			],
			[
				"project.js",
				"lib/eagle/project.js"
			],
			[
				"text.js",
				"lib/eagle/components/text.js"
			],
			[
				"nodeList",
				"lib/eagle/nodeList.js"
			],
			[
				"lib/util.js",
				"lib/util.js"
			],
			[
				"elemen",
				"lib/eagle/element.js"
			],
			[
				"svgRe",
				"lib/eagle/svgRenderer.js"
			],
			[
				"common",
				"lib/eagle/common.js"
			],
			[
				"ref.js",
				"lib/eagle/ref.js"
			],
			[
				"node.js",
				"lib/eagle/node.js"
			],
			[
				"element.js",
				"lib/eagle/element.js"
			],
			[
				"common.j",
				"lib/eagle/common.js"
			],
			[
				"nodeLi",
				"lib/eagle/nodeList.js"
			],
			[
				"common.js",
				"lib/eagle/common.js"
			],
			[
				"elementP",
				"lib/eagle/elementProxy.js"
			],
			[
				"smd.js",
				"lib/eagle/components/smd.js"
			],
			[
				"wirePa",
				"lib/eagle/components/wirePath.js"
			],
			[
				"wire.js",
				"lib/eagle/components/wire.js"
			],
			[
				"nodeMap",
				"lib/eagle/nodeMap.js"
			],
			[
				"renderer.js",
				"lib/eagle/renderer.js"
			],
			[
				"functions.cmake",
				"qjs-opencv/cmake/functions.cmake"
			],
			[
				"textEle",
				"lib/eagle/components/textElement.js"
			],
			[
				"quickjs-misc",
				"quickjs/qjs-modules/quickjs-misc.c"
			],
			[
				"drawing",
				"lib/eagle/components/drawing.js"
			],
			[
				"pathMapper",
				"lib/json/pathMapper.js"
			],
			[
				"xml-shell",
				"quickjs/qjs-modules/xml-shell.js"
			],
			[
				"server.js",
				"upload-server.js"
			],
			[
				"delega",
				"lib/delegate.js"
			],
			[
				"rgba",
				"lib/color/rgba.js"
			],
			[
				"eagle-com",
				"eagle-commands.js"
			],
			[
				"colorCod",
				"lib/eda/colorCoding.js"
			],
			[
				"eagle-qu",
				"eagle-query.js"
			],
			[
				"eagle-q",
				"eagle-query.js"
			],
			[
				"read.hex",
				"read.hex"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"~/Projects/plot-cv/plot-cv.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 309.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"WS"
			]
		],
		"width": 784.0
	},
	"selected_group": 1,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 248.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
