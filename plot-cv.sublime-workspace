{
	"auto_complete":
	{
		"selected_items":
		[
<<<<<<< HEAD
=======
			[
				"impor",
				"importReplacer"
			],
			[
				"attr",
				"attributeLists"
			],
			[
				"Transfo",
				"TransformedElements"
			],
			[
				"Elem",
				"ElementTransformLists"
			],
			[
				"pathTo",
				"pathToPointIterator"
			],
			[
				"Element",
				"ElementTransformMatrix"
			],
			[
				"Elemen",
				"ElementTransformList"
			],
			[
				"getTra",
				"getTransformationList"
			],
			[
				"serialize",
				"serializeToString"
			],
			[
				"unitConv",
				"unitConvToMM"
			],
			[
				"lazy",
				"lazyProperties"
			],
			[
				"ex",
				"expansion"
			],
			[
				"isArra",
				"isArrayBuffer"
			],
			[
				"Extra",
				"ExtractRotation"
			],
			[
				"tra",
				"transformation"
			],
			[
				"define",
				"defineProperties"
			],
			[
				"getters",
				"gettersSetters"
			],
			[
				"circui",
				"circuitFilePath"
			],
			[
				"Conn",
				"ConnectionPoint"
			],
			[
				"parseCom",
				"parseCommentOrEmpty"
			],
			[
				"circ",
				"circuitFilePath"
			],
			[
				"built",
				"builtin_attr"
			],
			[
				"dep",
				"depthOrPred"
			],
			[
				"exte",
				"extendAsyncGenerator"
			],
			[
				"extend",
				"extendArray"
			],
			[
				"allo",
				"allowedDirs"
			],
			[
				"getOwnPr",
				"getOwnPropertyNames(...)"
			],
			[
				"Prom",
				"PromiseWorker"
			],
			[
				"trans",
				"transformation"
			],
			[
				"allow",
				"allowedDirs"
			],
			[
				"Get",
				"GetElementsBySignal"
			],
			[
				"GetEle",
				"GetElementsBySignal"
			],
			[
				"getOwn",
				"getOwnPropertyNames(...)"
			],
			[
				"ColorSi",
				"ColorSignals"
			],
			[
				"HTML",
				"HTMLTableRow"
			],
			[
				"HTMLTable",
				"HTMLTableColumn"
			],
			[
				"rend",
				"renderToString"
			],
			[
				"Pack",
				"Package2Circuit"
			],
			[
				"lazyP",
				"lazyProperties"
			],
			[
				"JS_Get",
				"JS_GetProperty"
			],
			[
				"Ret",
				"ReturnValuePathFunction"
			],
			[
				"cFunc",
				"cFuncListObjects"
			],
			[
				"isC",
				"isCFuncCall"
			],
			[
				"En",
				"EntityNames"
			],
			[
				"parseFrom",
				"parseFromString"
			],
			[
				"pseu",
				"pseudoClassArg"
			],
			[
				"pseudoC",
				"pseudoClassName"
			],
			[
				"Key",
				"KeyboardEvent"
			],
			[
				"getOp",
				"getOptionEntries"
			],
			[
				"setProp",
				"setPropertyValue"
			],
			[
				"parse",
				"parseSelectors"
			],
			[
				"JS_SetPr",
				"JS_SetPropertyStr"
			],
			[
				"jsm_buil",
				"jsm_builtin_init"
			],
			[
				"JS_Free",
				"JS_FreeCString"
			],
			[
				"JS_Set",
				"JS_SetProperty"
			],
			[
				"JS_New",
				"JS_NewObject"
			],
			[
				"ide",
				"importIdentifiers"
			],
			[
				"iden",
				"importIdentifiers"
			],
			[
				"import",
				"importIdentifiers"
			],
			[
				"ident",
				"identifierSets"
			],
			[
				"path_is",
				"path_is_absolute"
			],
			[
				"js_is_",
				"js_is_null_or_undefined"
			],
			[
				"path_skip_se",
				"path_skip_separator_s"
			],
			[
				"WRITABLE_METHO",
				"WRITABLE_METHOD_CLOSE"
			],
			[
				"list_fo",
				"list_for_each_prev"
			],
			[
				"JS_Th",
				"JS_ThrowOutOfMemory"
			],
			[
				"JS_",
				"JS_ThrowOutOfMemory"
			],
			[
				"underly",
				"underlying_source"
			],
			[
				"Tok",
				"TokenSequence"
			],
			[
				"JS_GetPr",
				"JS_GetPropertyStr"
			],
			[
				"JS_Thro",
				"JS_ThrowOutOfMemory"
			],
			[
				"getAt",
				"getAttributeNames"
			],
			[
				"self",
				"self_closing_tags"
			],
			[
				"self_",
				"self_closing_tags"
			],
			[
				"JS_PROP",
				"JS_PROP_ENUMERABLE"
			],
			[
				"depe",
				"dependencyMap"
			],
			[
				"de",
				"dependencyMap"
			],
			[
				"js_is_null",
				"js_is_null_or_undefined"
			],
			[
				"JS_P",
				"JS_PROP_ENUMERABLE"
			],
			[
				"JS_SetP",
				"JS_SetPropertyUint32"
			],
			[
				"spec",
				"specifiers"
			],
			[
				"Num",
				"NumericRange"
			],
			[
				"token_r",
				"token_release_rt"
			],
			[
				"JS_Thr",
				"JS_ThrowTypeError"
			],
			[
				"js_",
				"js_location_data"
			],
			[
				"debug_js_mall",
				"debug_js_malloc_usable_size"
			],
			[
				"repl",
				"replaceRange"
			],
			[
				"js_malloc_u",
				"js_malloc_usable_size_rt"
			],
			[
				"malloc",
				"malloc_usable_size"
			],
			[
				"all",
				"alloc_block_list"
			],
			[
				"alloc",
				"alloc_block_list"
			],
			[
				"path_skip",
				"path_skip_component"
			],
			[
				"jsm_mo",
				"jsm_module_loader"
			],
			[
				"JS_Throw",
				"JS_ThrowInternalError"
			],
			[
				"JS_AtomTo",
				"JS_AtomToValue"
			],
			[
				"inspect",
				"inspectSymbol"
			],
			[
				"at",
				"attributes"
			],
			[
				"parent",
				"parentElement"
			],
			[
				"owner",
				"ownerElement"
			],
			[
				"get",
				"getPrototypeOf"
			],
			[
				"child",
				"childElementCount"
			],
			[
				"getO",
				"getOwnPropertyNames"
			],
			[
				"js_misc_im",
				"js_misc_immutable_constructor"
			],
			[
				"obj",
				"object_tostring"
			],
			[
				"js_misc_immu",
				"js_misc_immutable_free"
			],
			[
				"js_misc_imm",
				"js_misc_immutable_constructor"
			],
			[
				"CMAKE_IMPORT",
				"CMAKE_IMPORT_LIBRARY_SUFFIX"
			],
			[
				"CMAKE_CUR",
				"CMAKE_CURRENT_BINARY_DIR"
			],
			[
				"js_is",
				"js_is_null_or_undefined"
			],
			[
				"js_asy",
				"js_async_socket_class_id"
			],
			[
				"JS_NewObj",
				"JS_NewObjectProtoClass"
			],
			[
				"async_",
				"async_socket_proto"
			],
			[
				"js_socket_class",
				"js_socket_class_id"
			],
			[
				"g",
				"getOwnPropertyNames(...)"
			],
			[
				"js_sockaddr_cl",
				"js_sockaddr_class_id"
			],
			[
				"js_so",
				"js_sockaddr_constructor"
			],
			[
				"js_sys",
				"js_syscallerror_class_id"
			],
			[
				"js_string",
				"js_stringdecoder_class_id"
			],
			[
				"js_pred",
				"js_predicate_class_id"
			],
			[
				"js_syn",
				"js_syntaxerror_class"
			],
			[
				"js_child",
				"js_child_process_class_id"
			],
			[
				"js_b",
				"js_blob_class_id"
			],
			[
				"js_loca",
				"js_location_class_id"
			],
			[
				"js_token_in",
				"js_token_inspect_funcs"
			],
			[
				"set",
				"setReadHandler"
			],
			[
				"js_get_",
				"js_get_propertystr_bool"
			],
			[
				"js_misc_ate",
				"js_misc_atexit_functions"
			],
			[
				"isF",
				"isFunction"
			]
>>>>>>> 979c935d7a4c83106f43a8bb0ed4bf294e82e26a
		]
	},
	"buffers":
	[
		{
<<<<<<< HEAD
			"contents": "  parseSVGPath(s)\n  parseValues = args =>\n   (_, c, args) =>\n  splitPath(ps)\n  pathToAbsolute(path)\n  pathToPoints(path)\n  isUpper = s =>\nMakePoint = (x, y) =>\n  n =>\n  pointsToAbsolute(it)\n  isUpper = s =>\n  save(filename)\nNumericArgs(s, t = a => a)\n  deref = p => obj =>\n(o, k) =>\nParentPaths(p)\nCumulativePaths(p)\nAllParents(elem)\nAllTransforms(elem, getter = getTransformationMatrix)\nElementTransformList(elem)\nElementTransformMatrix(elem)\nGetXY(elem)\nGetPoints(elem)\n  p =>\n  c =>\n  a =>\n([x, y]) =>\nGetTransformedPoints(elem)\nGetMatrix(elem)\nIsClipPath(elem)\n  e =>\n  e =>\nHasClipPath(elem)\n  e =>\nPositionedElements(svgElem = svg, skip)\n() =>\n   (v, p) =>\n   e =>\n  n =>\nHasParent(elem, other)\nGetBounds(svgElem = svg)\nProcessPath(d)\n  unitConvToMM(value)\n  pc: mm =>\n  px: mm =>\n  pt: mm =>\n  in: mm =>\n  mil: mm =>\n  cm: mm =>\n  mm: mm =>\n  m: mm =>\n  unitConv(unit)\n   value =>\n  unitConvTo(value, unit)\n  getViewBox(svgElem = svg)\nXML2String(elem)\n  getWidthHeight(svgElem = svg, t = a => a)\n  getTransformationList(e)\n  getTransformationMatrix(e)\n  main(...args)\n   (_x, _y, opts) =>\n   () =>\n   a =>\n   a =>\n   a =>\n  print = (file, ...args) =>\n  print = (file, ...args) =>\n  n =>\n  u =>\n(a, i) =>",
			"settings":
			{
				"buffer_size": 1210,
=======
			"contents": "() =>\n  res =>\n() =>\n  r =>\n  r =>\n  entries()\nGetProject = arg =>\n  p =>\n  () =>\n  value =>\n  add = (arr, ...items) =>\n  useSlot = (arr, i) =>\n() =>\n  v =>\n  trklGetSet = (get, set) => value =>\nMouseEvents = h =>\n() =>\n(parent, delegate) =>\n  append_to(elem, p)\nDrawSVG(...args)\n  append_to(elem, p)\n  adjustViewBox(e)\n  calcViewBox(box)\n  setViewBox(svgOwner, box)\nElementToXML = (e, predicate) =>\n  (v, k) =>\n  (v, k) =>\n  (v, k) =>\n  readFile(filename)\n  writeFile(filename, data, overwrite = true)\n  exists(filename)\n  realpath(filename)\nLoadFile(file)\nSaveFile(filename, data, contentType)\n  s =>\n() =>\nSaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])\n  predicate = element =>\nLoadSVG(filename)\nLoadImage(filename)\n() =>\nRenderComponent(component)\nModifyColors = fn => e =>\nFindLayer = name_or_id =>\n  n =>\n  l =>\n(id = '#geom') =>\n(props = {}) =>\n  maxZIndex = () =>\n  e =>\n  z =>\n  z =>\n() =>\n  randomColor = () =>\nDrawArc(start, end, angle)\n  props =>\n  p =>\n  a =>\n  m =>\n  hex =>\n  p =>\n  p =>\n  p =>\n({ x, y }) =>\n  a =>\n({ x, y }, i) =>\n  e =>\n(l, i) =>\n(p, i) =>\n(p, i) =>\n  add = (level, item) =>\nRecurseBinaryNode(node, parent = null, depth = 0)\n(nodes, i, level) =>\n  fx = j =>\n(node, j) =>\n  item =>\nDrawNode(x, y, node)\nDrawEdge(item, parent)\nGetPaths(query, parent = project.svgElement)\n(a, e) =>\nPathToPolylines(path, step = 0.01)\n  p =>\n  poly =>\n  poly =>\n  (p, d, set, stop) =>\nPathToPolyline(path, step = 0.01)\n  (p, d, set, stop) =>\nPathsToPolylines(paths, step = 0.01)\n  path =>\nOutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)\n  .toPolylines = function()\n  p =>\n({ X, Y }) =>\nOutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)\n  path =>\n(a, p) =>\nClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)\n  add = (p, clip = false) =>\n  .toPolylines = function()\n  p =>\n({ X, Y }) =>\n  saveItemStates(itemList, get = item => is.\n(item.\n))\n  item =>\n  restoreItemStates(itemStates, /*prettier-ignore */ set = (item, value) => item.\n(value ? 'yes' : 'no'))\nEagleMaps(project)\n  transformPath = p =>\n  e =>\n  dom2eagle = node =>\n  eagle2dom = elem =>\n  path2dom = p =>\n(key, value) =>\n(key, value) =>\nPackageNames(doc = project.doc)\n  e =>\n([e, b]) =>\n([e, w, h, m, v]) =>\n({ index, ...match }) =>\n  ({ s, v, indexes }, match, i) =>\n([token, index]) =>\n([token, index]) =>\nNextDocument(n = 1)\n  (idx, i) =>\n  (idx, i) =>\nLoadDocument(project, parentElem)\n  err =>\n() =>\n  ent =>\n() =>\n  ent =>\n  renamePackages()\n  a =>\n  value =>\n  layer =>\n() =>\n  layer =>\n() =>\n  fn = function(v)\n() =>\n  .makeGroup = function({ transform, ...props } = {})\n  id =>\n() =>\n  xx()\n  () =>\n(transform)\n  (tag, attr, children = []) =>\n  value =>\n() =>\nRect\nChooseDocument(project, i)\nGenerateVoronoi = () =>\nRect\n  p =>\n  e =>\n({ lSite, rSite, ...edge }) =>\n  e =>\n({ lSite, rSite, ...edge }) =>\n  e =>\n({ va, vb, ...edge }) =>\n  v =>\n  add = (arr, ...items) =>\n  l =>\n  t =>\n  l =>\n  t =>\n  p =>\n  (acc, { site, halfedges }) =>\n({ site }) =>\nPackageChildren(element, layer)\n(c, i) =>\n([i, p]) =>\n([i, e]) =>\nElementChildren(layer = 'tPlace', rfn = ent => \n(ent))\n([name, element]) =>\nElementGeometries(layer = 'tPlace', rfn = ent => \n(ent))\n  ent =>\n([name, children]) =>\n([i, e]) =>\n([name, lines]) =>\n  pts =>\n([name, lines, polygons]) =>\nNewPath(path)\nMakeFitAction = index =>\n  event =>\nZoomFactor(val = config.\n)\nZoomLog(factor)\nAdjustZoom(l = config.\n)\nCreateGrblSocket = (port = 'tnt1') =>\nHandleMessage(msg)\n  pointStr =>\n  socketFn = () =>\n  .send = (...args) =>\nAuthorizationDialog = ({ onAuth, ...props }) =>\n  onSubmit: () =>\n  onInput: e =>\n  onInput: e =>\n  onClick: e =>\n  arg =>\n  .onload = () =>\n  response =>\n  e =>\n  v =>\nTestArc: () =>\n() =>\n(push, stop) =>\n() =>\n(push, stop) =>\n  target =>\n  (key, modifiers = 0) =>\n  .focusSearch = state =>\n  children: () =>\n  geometries: () =>\n  value =>\n() =>\n  testComponent = props =>\n  resp =>\n  json =>\nFile(obj, i)\nFile\nFile.prototype.toString = function()\n(a, b) =>\n(obj, i) =>\n(acc, file) =>\n  i =>\n  value =>\n  value =>\n  value =>\n  value =>\n  value =>\n  value =>\n  updateIfChanged = (trkl, newValue, callback) =>\n  (elem, i) =>\n  changeInput = e =>\n  p =>\n  arg =>\nConsumer = props =>\n()\n  log(type, time, msg)\nLogger = props =>\n()\n([type, d, t, m], i) =>\nDumper = props =>\n  value =>\n([k, v], i) =>\nCommander = ({ onCommand, ...props }) =>\n  handler = e =>\n  toggle = trkl =>\nLayer = ({ title, name, label, i, color, element, className, ...props }) =>\n  setVisible = value =>\n  e =>\n  e =>\n  l =>\n  l =>\n  (item, value) =>\n  item =>\n  l =>\n([l, state]) =>\n  e =>\n  onMouseMove: e =>\n  onMouseUp: e =>\nDocumentList\n  constructor()\n(push, stop) =>\n  add(name, component)\n  addEntry([name, component])\n  remove(name)\n  update()\n  fn: e =>\n  fn: () =>\n  open =>\n  props =>\n  props =>\n  e =>\n  i =>\n  i =>\n({ coord }) =>\n  side =>\n  create: (project, props = {}) =>\n  a =>\n  e =>\n  e =>\n  name =>\n  e =>\n  makeLayerName(name, side)\n  fn: () =>\n  onChange(event)\n  props =>\n  props =>\n  props =>\n(e, p, i) =>\n  makeSortCompare: key =>\n  function(a, b)\n  function(a, b)\n  onCommand: cmdStr =>\n  handleChange: e =>\n  event =>\n  e =>\nMoveEvent(event, prevEvent)\nWalkUp(e)\n  e =>\n  z =>\n  p =>\n  e =>\n  e =>\n  e =>\n  v =>\n  l =>\n  e =>\n  () =>\n  (e, depth) =>\n  classes =>\n  e =>\n  e =>\n  (a, b) =>\n  (a, b) =>\nNode\n  e =>\n  (p, d, set, stop) =>\n  e =>\n  e =>\nTouchEvent(event)\n  e =>\n(p, i) =>\n(a, b) =>\n  size =>\n  border =>\n  r =>\n  mod(n, m)\n() =>\n  (pos, last, first) =>\n  cancel()\n  .oncontextmenu = function(e)\n  .processEvents = function eventLoop()\n  event =>\n  e =>\n  onRuntimeInitialized: () =>\n  print: txt =>",
			"settings":
			{
				"buffer_size": 5635,
>>>>>>> 979c935d7a4c83106f43a8bb0ed4bf294e82e26a
				"line_ending": "Unix",
				"name": "𝌆 Outline",
				"scratch": true
			},
			"undo_stack":
			[
				[
<<<<<<< HEAD
					1,
					2,
					"outline_refresh",
					{
						"path": "/home/janos/Projects/plot-cv/svg-crop-pad.js",
						"symkeys":
						[
							[
								1504,
								1528
							],
							[
								1748,
								1769
							],
							[
								1995,
								2011
							],
							[
								2565,
								2587
							],
							[
								2886,
								2916
							],
							[
								3076,
								3103
							],
							[
								3240,
								3254
							],
							[
								3360,
								3381
							],
							[
								3813,
								3817
							],
							[
								3977,
								4007
							],
							[
								4059,
								4073
							],
							[
								5097,
								5111
							],
							[
								5362,
								5398
							],
							[
								5509,
								5528
							],
							[
								5538,
								5547
							],
							[
								5561,
								5585
							],
							[
								5671,
								5699
							],
							[
								5789,
								5815
							],
							[
								5975,
								6037
							],
							[
								6212,
								6247
							],
							[
								6339,
								6376
							],
							[
								6457,
								6477
							],
							[
								6553,
								6577
							],
							[
								6919,
								6923
							],
							[
								7382,
								7386
							],
							[
								7411,
								7415
							],
							[
								7480,
								7491
							],
							[
								7696,
								7731
							],
							[
								7873,
								7897
							],
							[
								7953,
								7978
							],
							[
								8057,
								8061
							],
							[
								8095,
								8099
							],
							[
								8129,
								8155
							],
							[
								8214,
								8218
							],
							[
								8252,
								8301
							],
							[
								8316,
								8321
							],
							[
								8449,
								8459
							],
							[
								8572,
								8577
							],
							[
								8599,
								8603
							],
							[
								8860,
								8891
							],
							[
								9180,
								9213
							],
							[
								9613,
								9637
							],
							[
								9992,
								10020
							],
							[
								10636,
								10645
							],
							[
								10662,
								10671
							],
							[
								10703,
								10712
							],
							[
								10731,
								10740
							],
							[
								10754,
								10764
							],
							[
								10780,
								10789
							],
							[
								10803,
								10812
							],
							[
								10819,
								10827
							],
							[
								10842,
								10865
							],
							[
								10876,
								10885
							],
							[
								10930,
								10962
							],
							[
								11040,
								11074
							],
							[
								11270,
								11295
							],
							[
								11352,
								11402
							],
							[
								11672,
								11705
							],
							[
								11805,
								11840
							],
							[
								11917,
								11939
							],
							[
								12559,
								12577
							],
							[
								12620,
								12626
							],
							[
								12660,
								12665
							],
							[
								12707,
								12712
							],
							[
								12829,
								12834
							],
							[
								13129,
								13155
							],
							[
								13256,
								13282
							],
							[
								14588,
								14592
							],
							[
								14778,
								14782
							],
							[
								14870,
								14879
							]
						],
						"symlist":
						[
							"function parseSVGPath(s)",
							"parseValues = args =>",
							" (_, c, args) =>",
							"function splitPath(ps)",
							"function* pathToAbsolute(path)",
							"function pathToPoints(path)",
							"isUpper = s =>",
							"MakePoint = (x, y) =>",
							"n =>",
							"function* pointsToAbsolute(it)",
							"isUpper = s =>",
							"save(filename)",
							"function* NumericArgs(s, t = a => a)",
							"deref = p => obj =>",
							"(o, k) =>",
							"function* ParentPaths(p)",
							"function* CumulativePaths(p)",
							"function* AllParents(elem)",
							"function AllTransforms(elem, getter = getTransformationMatrix)",
							"function ElementTransformList(elem)",
							"function ElementTransformMatrix(elem)",
							"function GetXY(elem)",
							"function GetPoints(elem)",
							"p =>",
							"c =>",
							"a =>",
							"([x, y]) =>",
							"function GetTransformedPoints(elem)",
							"function GetMatrix(elem)",
							"function IsClipPath(elem)",
							"e =>",
							"e =>",
							"function HasClipPath(elem)",
							"e =>",
							"function* PositionedElements(svgElem = svg, skip)",
							"() =>",
							" (v, p) =>",
							" e =>",
							"n =>",
							"function HasParent(elem, other)",
							"function GetBounds(svgElem = svg)",
							"function* ProcessPath(d)",
							"function unitConvToMM(value)",
							"pc: mm =>",
							"px: mm =>",
							"pt: mm =>",
							"in: mm =>",
							"mil: mm =>",
							"cm: mm =>",
							"mm: mm =>",
							"m: mm =>",
							"function unitConv(unit)",
							" value =>",
							"function unitConvTo(value, unit)",
							"function getViewBox(svgElem = svg)",
							"function XML2String(elem)",
							"function getWidthHeight(svgElem = svg, t = a => a)",
							"function getTransformationList(e)",
							"function getTransformationMatrix(e)",
							"function main(...args)",
							" (_x, _y, opts) =>",
							" () =>",
							" a =>",
							" a =>",
							" a =>",
							"print = (file, ...args) =>",
							"print = (file, ...args) =>",
							"n =>",
							"u =>",
							"(a, i) =>"
						]
					},
					"AwAAAAAAAAAAAAAAugQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALoEAAAgIHBhcnNlU1ZHUGF0aChzKQogIHBhcnNlVmFsdWVzID0gYXJncyA9PgogICAoXywgYywgYXJncykgPT4KICBzcGxpdFBhdGgocHMpCiAgcGF0aFRvQWJzb2x1dGUocGF0aCkKICBwYXRoVG9Qb2ludHMocGF0aCkKICBpc1VwcGVyID0gcyA9PgpNYWtlUG9pbnQgPSAoeCwgeSkgPT4KICBuID0+CiAgcG9pbnRzVG9BYnNvbHV0ZShpdCkKICBpc1VwcGVyID0gcyA9PgogIHNhdmUoZmlsZW5hbWUpCk51bWVyaWNBcmdzKHMsIHQgPSBhID0+IGEpCiAgZGVyZWYgPSBwID0+IG9iaiA9PgoobywgaykgPT4KUGFyZW50UGF0aHMocCkKQ3VtdWxhdGl2ZVBhdGhzKHApCkFsbFBhcmVudHMoZWxlbSkKQWxsVHJhbnNmb3JtcyhlbGVtLCBnZXR0ZXIgPSBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeCkKRWxlbWVudFRyYW5zZm9ybUxpc3QoZWxlbSkKRWxlbWVudFRyYW5zZm9ybU1hdHJpeChlbGVtKQpHZXRYWShlbGVtKQpHZXRQb2ludHMoZWxlbSkKICBwID0+CiAgYyA9PgogIGEgPT4KKFt4LCB5XSkgPT4KR2V0VHJhbnNmb3JtZWRQb2ludHMoZWxlbSkKR2V0TWF0cml4KGVsZW0pCklzQ2xpcFBhdGgoZWxlbSkKICBlID0+CiAgZSA9PgpIYXNDbGlwUGF0aChlbGVtKQogIGUgPT4KUG9zaXRpb25lZEVsZW1lbnRzKHN2Z0VsZW0gPSBzdmcsIHNraXApCigpID0+CiAgICh2LCBwKSA9PgogICBlID0+CiAgbiA9PgpIYXNQYXJlbnQoZWxlbSwgb3RoZXIpCkdldEJvdW5kcyhzdmdFbGVtID0gc3ZnKQpQcm9jZXNzUGF0aChkKQogIHVuaXRDb252VG9NTSh2YWx1ZSkKICBwYzogbW0gPT4KICBweDogbW0gPT4KICBwdDogbW0gPT4KICBpbjogbW0gPT4KICBtaWw6IG1tID0+CiAgY206IG1tID0+CiAgbW06IG1tID0+CiAgbTogbW0gPT4KICB1bml0Q29udih1bml0KQogICB2YWx1ZSA9PgogIHVuaXRDb252VG8odmFsdWUsIHVuaXQpCiAgZ2V0Vmlld0JveChzdmdFbGVtID0gc3ZnKQpYTUwyU3RyaW5nKGVsZW0pCiAgZ2V0V2lkdGhIZWlnaHQoc3ZnRWxlbSA9IHN2ZywgdCA9IGEgPT4gYSkKICBnZXRUcmFuc2Zvcm1hdGlvbkxpc3QoZSkKICBnZXRUcmFuc2Zvcm1hdGlvbk1hdHJpeChlKQogIG1haW4oLi4uYXJncykKICAgKF94LCBfeSwgb3B0cykgPT4KICAgKCkgPT4KICAgYSA9PgogICBhID0+CiAgIGEgPT4KICBwcmludCA9IChmaWxlLCAuLi5hcmdzKSA9PgogIHByaW50ID0gKGZpbGUsIC4uLmFyZ3MpID0+CiAgbiA9PgogIHUgPT4KKGEsIGkpID0+AAAAAAAAAAC6BAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "ushd #!/usr/bin/env qjsm\nimport { Console } from 'console';\nimport { kill, SIGUSR1 } from 'os';\nimport { getOpt, showHelp, isObject, mapWrapper, startInteractive, define, roundTo } from 'util';\nimport { basename, extname } from 'path';\nimport { Entities, nodeTypes, Prototypes, Factory, Parser, Serializer, Interface, Node, NodeList, NamedNodeMap, Element, Document, Attr, Text, Comment, TokenList, CSSStyleDeclaration, GetType } from './quickjs/qjs-modules/lib/dom.js';\n//import { Transformation, Rotation, Translation, Scaling, MatrixTransformation, TransformationList } from './lib/geom/transformation.js';\nimport { BBox, isBBox } from './lib/geom/bbox.js';\nimport { Size, isSize } from './lib/geom/size.js';\nimport { TreeIterator } from 'tree_walker';\nimport { WriteFile } from './io-helpers.js';\nimport { Matrix, isMatrix, ImmutableMatrix } from './lib/geom/matrix.js';\nimport { Transformation, ImmutableTransformation, Rotation, ImmutableRotation, Translation, ImmutableTranslation, Scaling, ImmutableScaling, MatrixTransformation, ImmutableMatrixTransformation, TransformationList, ImmutableTransformationList } from './lib/geom/transformation.js';\nimport { Point } from './lib/geom/point.js';\nimport { PointList } from './lib/geom/pointList.js';\nimport { SvgPath } from './lib/svg/path.js';\nimport extendGenerator from 'extendGenerator';\nimport extendArray from 'extendArray';\nimport { read as readXML, write as writeXML } from 'xml';\nimport * as deep from 'deep';\n\nextendGenerator();\nextendArray();\n\nfunction parseSVGPath(s) {\n  let { length, segment } = {\n    length: { a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0 },\n    segment: /([astvzqmhlc])([^astvzqmhlc]*)/gi\n  };\n\n  const n = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/gi;\n  const parseValues = args => {\n    let nm = args.match(n);\n    return nm ? nm.map(Number) : [];\n  };\n  let r = new SvgPath();\n\n  if(typeof s != 'string' && isObject(s) && typeof s.getAttribute == 'function') s = s.getAttribute('d');\n\n  s.replace(segment, (_, c, args) => {\n    let t = c.toLowerCase();\n    args = parseValues(args);\n    //overloaded moveTo\n    if(t == 'm' && args.length > 2) {\n      r.cmd(...[c].concat(args.splice(0, 2)));\n      t = 'l';\n      c = c == 'm' ? 'l' : 'L';\n    }\n    while(true) {\n      if(args.length == length[t]) {\n        args.unshift(c);\n        r.cmd(...args);\n        return;\n      }\n      if(args.length < length[t]) throw new Error(`malformed path data (${args.length} < ${length[t]}): ${c} ${args}`);\n      r.cmd(...[c].concat(args.splice(0, length[t])));\n    }\n  });\n  return r;\n}\n\nfunction splitPath(ps) {\n  let i = 0,\n    cmds = [];\n  for(let [m] of ps.matchAll(/([a-zA-Z]|-?[0-9]*(?:\\.[0-9]+|))/g)) {\n    if(m === '') continue;\n    if(!isNaN(+m)) m = +m;\n    else if(i == 0) m = m.toUpperCase();\n    if(typeof m == 'string') cmds.push([m]);\n    else cmds.last.push(m);\n    ++i;\n  }\n  return cmds;\n}\n\nfunction* pathToAbsolute(path) {\n  let prev = [0, 0];\n  for(let [cmd, x, y] of splitPath(path)) {\n    yield [cmd, x + prev[0], y + prev[1]];\n\n    prev = [x ?? prev[0], y ?? prev[1]];\n  }\n}\n\nfunction pathToPoints(path) {\n  let result = [],\n    splitted = splitPath(path);\n  let { length } = splitted;\n  let lastmove;\n  let prev = new Point(0, 0);\n  const isUpper = s => s.toUpperCase() == s;\n  for(let i = 0; i < length; i++) {\n    let pt,\n      cmd = splitted[i];\n    const MakePoint = (x, y) => Object.assign(new Point(x, y), { cmd });\n\n    switch (cmd[0].toLowerCase()) {\n      case 'z':\n        pt = MakePoint(+lastmove[1], +lastmove[2]);\n        break;\n      case 'v':\n        pt = MakePoint(0, +cmd[1]);\n        break;\n      case 'h':\n        pt = MakePoint(+cmd[1], 0);\n        break;\n      case 'z':\n        pt = MakePoint(undefined, undefined);\n        break;\n      default:\n        pt = MakePoint(...cmd.slice(-2).map(n => +n));\n        if(cmd[0].toLowerCase() == 'm') lastmove = [...pt];\n        break;\n    }\n\n    define(pt, { cmd });\n\n    result.push(pt);\n  }\n  return result;\n}\n\nfunction* pointsToAbsolute(it) {\n  let prev = new Point(0, 0),\n    i = 0;\n  const isUpper = s => s.toUpperCase() == s;\n\n  for(let pt of it) {\n    let p = isUpper(pt.cmd[0]) ? pt.clone() : pt.sum(prev);\n    p.round();\n    p.cmd = pt.cmd;\n    yield (prev = p);\n  }\n}\n\nObject.assign(globalThis, {\n  Entities,\n  nodeTypes,\n  Prototypes,\n  Factory,\n  Parser,\n  Serializer,\n  Interface,\n  Node,\n  NodeList,\n  NamedNodeMap,\n  Element,\n  Document,\n  Attr,\n  Text,\n  Comment,\n  TokenList,\n  CSSStyleDeclaration,\n  GetType\n});\nObject.assign(globalThis, {\n  TreeIterator,\n  BBox,\n  isBBox,\n  Size,\n  isSize,\n  Matrix,\n  Point,\n  PointList,\n  parseSVGPath,\n  splitPath,\n  pathToPoints,\n  pointsToAbsolute,\n  NumericArgs,\n  ParentPaths,\n  CumulativePaths,\n  AllParents,\n  getTransformationMatrix,\n  getTransformationList,\n  AllTransforms,\n  ElementTransformMatrix,\n  ElementTransformList,\n  GetXY,\n  GetPoints,\n  GetMatrix,\n  GetTransformedPoints,\n  PositionedElements,\n  HasParent,\n  GetBounds,\n  ProcessPath,\n  unitConvToMM,\n  unitConv,\n  unitConvTo,\n  getViewBox,\n  getWidthHeight,\n  XML2String\n});\n\nObject.assign(globalThis, {\n  save(filename) {\n    filename ??= basename(globalThis.file, extname(globalThis.file)) + '.out.svg';\n    const str = serializer.serializeToString(document);\n\n    let ret = WriteFile(filename, str);\n    console.log(`'${filename}' written.`);\n    return ret;\n  }\n});\n\nfunction* NumericArgs(s, t = a => a) {\n  for(let [m] of s.matchAll(/(\\s+|[-+.0-9]+|[^-+.0-9\\s]+)[a-z]*/g)) if(m.trim() != '') yield t(m);\n}\n\nconst deref = p => obj => p.reduce((o, k) => o[k], obj);\n\nfunction* ParentPaths(p) {\n  let plen = p.length;\n  for(let i = 2; i <= plen; i += 2) yield p.slice(0, i);\n}\n\nfunction* CumulativePaths(p) {\n  let plen = p.length;\n  for(let i = 2; i <= plen; i += 2) yield p.slice(i - 2, i);\n}\n\nfunction* AllParents(elem) {\n  let obj = Node.document(elem);\n  for(let p of CumulativePaths(Node.path(elem))) {\n    if(obj.tagName[0] != '?') yield obj;\n    obj = deref(p)(obj);\n  }\n}\n\nfunction AllTransforms(elem, getter = getTransformationMatrix) {\n  let t = [];\n  for(let e of AllParents(elem)) if(e.hasAttribute('transform')) t.push(getter(e));\n  if(elem.hasAttribute('transform')) t.push(getter(elem));\n  return t;\n}\n\nfunction ElementTransformList(elem) {\n  return new TransformationList().concat(...AllTransforms(e, getTransformationList));\n}\n\nfunction ElementTransformMatrix(elem) {\n  return Matrix.multiply(...AllTransforms(elem, getTransformationMatrix));\n}\n\nfunction GetXY(elem) {\n  return new Point(+elem.getAttribute('x'), +elem.getAttribute('y'));\n}\n\nfunction GetPoints(elem) {\n  let t = [];\n\n  if(elem.tagName == 'symbol') return GetPoints(elem.firstElementChild);\n\n  if(elem.hasAttribute('xlink:href')) {\n    let e, points, xy, m, id;\n    id = elem.getAttribute('xlink:href');\n    xy = GetXY(elem);\n    m = new Matrix().translate(...xy);\n\n    if((e = Node.document(elem).querySelector(id))) return GetPoints(e).map(p => p.transform(m));\n  }\n\n  if(elem.hasAttribute('d')) {\n    try {\n      let pp = pathToPoints(elem.getAttribute('d'));\n      return pp;\n      /*      let pa = Object.setPrototypeOf(pp, PointList.prototype);\n\n      pa.points = pp;\n\n      return pa;*/\n    } catch(e) {\n      console.log('ERROR', e.message + '\\n' + e.stack);\n      return null;\n    }\n\n    let svgP = parseSVGPath(elem.getAttribute('d'));\n    return new PointList(\n      svgP.commands\n        .map(c => c.args)\n        .filter(a => a.length >= 2 && (!isNaN(+a[0]) || !isNaN(+a[1])))\n        .map(([x, y]) => new Point(x, y))\n    );\n  }\n  if(elem.hasAttribute('x') && elem.hasAttribute('y')) return new PointList([GetXY(elem)]);\n\n  throw new Error(`Failed getting point data for element ${XML2String(elem)}`);\n}\n\nfunction GetTransformedPoints(elem) {\n  let matrix = ElementTransformMatrix(elem);\n  let points = new PointList(GetPoints(elem));\n\n  return points.clone().transform(matrix);\n}\n\nfunction GetMatrix(elem) {\n  return Matrix.multiply(...AllTransforms(elem));\n}\n\nfunction IsClipPath(elem) {\n  let p = [...AllParents(elem)];\n  console.log(\n    'IsClipPath',\n    p.map(e => e.tagName)\n  );\n\n  return p.some(e => e.tagName == 'clipPath');\n}\n\nfunction HasClipPath(elem) {\n  let p = [...AllParents(elem), elem];\n\n  return p.some(e => e.hasAttribute('clip-path'));\n}\n\nfunction* PositionedElements(svgElem = svg, skip) {\n  skip ??= (() => {\n    let defs = svgElem.querySelector('defs');\n    let defsPath = Node.path(defs).slice(Node.path(svgElem).length);\n    return (v, p) => p.slice(0, defsPath.length).equal(defsPath);\n  })();\n\n  for(let [value, path] of deep.iterate(Node.raw(svgElem), e => ['d', 'x', 'y'].some(n => n in e.attributes))) {\n    if(skip(value, path)) continue;\n    let elem = deref(path)(svgElem);\n\n    /* skip them for now */\n    if(HasClipPath(elem)) {\n      //console.log('PositionedElements skipping', elem);\n      continue;\n    }\n    yield elem;\n  }\n}\n\nfunction HasParent(elem, other) {\n  let e = Node.path(elem);\n  let o = Node.path(other);\n\n  for(let i = 0; i < o.length; i++) {\n    if(o[i] != e[i]) return false;\n  }\n  return true;\n}\n\nlet positioned = (globalThis.positioned = new Set());\nlet positionedProps = (globalThis.positionedProps = mapWrapper(new WeakMap()));\n\nfunction GetBounds(svgElem = svg) {\n  let bb = new BBox();\n\n  for(let element of PositionedElements(svgElem)) {\n    /*let matrix = GetMatrix(element);\n    let points = GetPoints(element);\n\n    positioned.add(element);\n    positionedProps.set(element, { matrix, points });\n\n    for(let point of points.clone().transform(matrix))*/\n    for(let point of GetTransformedPoints(element)) bb.update(point, 0, element);\n  }\n\n  return bb;\n}\n\nfunction* ProcessPath(d) {\n  let c,\n    i = 0,\n    a = [];\n  for(let [m] of d.matchAll(/(\\s+|[-+.0-9]+|[^-+.0-9\\s]+)/g)) {\n    if(m.trim() == '') continue;\n    const n = +m;\n    if(isNaN(n)) {\n      c = m;\n      i = 0;\n      a = [];\n      continue;\n    }\n    if(c.toLowerCase() == 'v') i = 1;\n    i &= 1;\n    a[i] = n;\n    if(++i >= 2 || 'VvHh'.indexOf(c) != -1) yield a;\n  }\n}\n\nfunction unitConvToMM(value) {\n  if(/pt\\s*$/i.test(value)) return (+value.replace(/\\s*pt\\s*$/gi, '') * 3) / 8.5;\n  if(/pc\\s*$/i.test(value)) return +value.replace(/\\s*pc\\s*$/gi, '') * 4.23333;\n  if(/in\\s*$/i.test(value)) return +value.replace(/\\s*in\\s*$/gi, '') * 25.4;\n  if(/mil\\s*$/i.test(value)) return +value.replace(/\\s*mil\\s*$/gi, '') * 0.0254;\n  if(/cm\\s*$/i.test(value)) return +value.replace(/\\s*cm\\s*$/gi, '') * 10;\n  if(/mm\\s*$/i.test(value)) return +value.replace(/\\s*mm\\s*$/gi, '');\n  if(/px\\s*$/i.test(value) || !isNaN(+value)) return +(value + '').replace(/\\s*px\\s*$/gi, '') / 3.77952755953127906261;\n}\n\nconst MillimeterTo = {\n  pc: mm => mm * 0.23622,\n  px: mm => mm * 3.77952755953127906261,\n  pt: mm => (mm * 8.5) / 3,\n  in: mm => mm / 25.4,\n  mil: mm => mm / 0.0254,\n  cm: mm => mm * 1e-1,\n  mm: mm => mm,\n  m: mm => mm * 1e-3\n};\n\nfunction unitConv(unit) {\n  return value => MillimeterTo[unit](unitConvToMM(value));\n}\n\nfunction unitConvTo(value, unit) {\n  let mm = unitConvToMM(value);\n  return MillimeterTo[unit](mm) + unit;\n}\n\nfunction getViewBox(svgElem = svg) {\n  if(svgElem.hasAttribute('viewBox')) {\n    let viewBox = svgElem.getAttribute('viewBox');\n    return BBox.fromSVG(viewBox + '');\n  }\n\n  //return new BBox(0, 0, ...getWidthHeight(svgElem));\n}\n\nfunction XML2String(elem) {\n  return new Serializer().serializeToString(elem);\n}\n\nfunction getWidthHeight(svgElem = svg, t = a => a) {\n  if(svgElem.hasAttribute('width') && svgElem.hasAttribute('height')) {\n    let width = svgElem.getAttribute('width');\n    let height = svgElem.getAttribute('height');\n\n    return new Size(t(width), t(height));\n  }\n\n  return new Size(...getViewBox(svgElem).size);\n}\n\nfunction getTransformationList(e) {\n  if(e.hasAttribute('transform')) return new TransformationList(e.getAttribute('transform'));\n}\n\nfunction getTransformationMatrix(e) {\n  let tl;\n\n  if((tl = getTransformationList(e))) return tl.toMatrix();\n}\n\nfunction main(...args) {\n  let debug = 0;\n  let unit = 'mm';\n  let precision = 1e-3;\n  let size = 0;\n  let padding = 0;\n\n  Object.assign(globalThis, {\n    NumericArgs,\n    ProcessPath,\n    unitConvToMM,\n    unitConvTo,\n    MillimeterTo,\n    getViewBox,\n    getWidthHeight,\n    getTransformationMatrix,\n    Transformation,\n    Rotation,\n    Translation,\n    Scaling,\n    MatrixTransformation,\n    TransformationList,\n    deref\n  });\n\n  //  globalThis.console = new Console(std.err, { depth: 2, customInspect: false, compact: false, protoChain: true });\n\n  let opts;\n  let params = (globalThis.params = getOpt(\n    (opts = {\n      help: [false, (_x, _y, opts) => showHelp(opts), 'h'],\n      debug: [false, () => ++debug, 'x'],\n      unit: [true, a => (unit = a), 'u'],\n      precision: [true, a => (precision = +a), 'a'],\n      'print-size': [false, null, 'P'],\n      bounds: [false, null, 'b'],\n      size: [true, a => (size = unitConvToMM(a)), 's'],\n      interactive: [false, null, 'y'],\n      padding: [true, null, 'p'],\n      '@': 'files'\n    }),\n    args\n  ));\n  let files = params['@'];\n  let parser = (globalThis.parser = new Parser());\n  let serializer = (globalThis.serializer = new Serializer());\n  let print = (file, ...args) => std.puts(args.join(' ') + '\\n');\n\n  if(files.length == 0) showHelp(opts, 1);\n  if(files.length > 1) print = (file, ...args) => std.puts(file + ': ' + args.join(' ') + '\\n');\n\n  for(let file of files) {\n    if(params.debug >= 1) console.log('Processing:', file);\n\n    let xml, svg;\n\n    try {\n      xml = globalThis.document = parser.parseFromFile((globalThis.file = file), 'utf-8');\n\n      // console.log('xml', console.config({ customInspect: false }), xml);\n      svg = globalThis.svg = xml.querySelector('svg');\n    } catch(e) {\n      console.log(`ERROR loading '${file}'`, e.message + '\\n' + e.stack);\n    }\n    let sizeUnit = (globalThis.size = getWidthHeight(svg));\n    let size = (globalThis.size = getWidthHeight(svg, unitConvToMM).round(precision));\n    let writeUnits = (globalThis.writeUnits = [sizeUnit.units.width, sizeUnit.units.height]);\n\n    let viewBoxOld = (globalThis.viewBoxOld = getViewBox(svg) ?? new BBox(size));\n    //console.log('viewBox', { viewBoxOld });\n    // console.log('size', { size }, size.units);\n    let xfactor = (globalThis.xfactor = viewBoxOld.width / sizeUnit.width);\n    let yfactor = (globalThis.yfactor = viewBoxOld.height / sizeUnit.height);\n\n    if(params['print-size']) {\n      size.units = ['', ''];\n      print(file, size.toString({ separator: ' x ', unit: 'mm' }));\n    }\n\n    if(params['bounds']) {\n      let bb = (globalThis.bb = GetBounds(svg));\n      print(\n        file,\n        bb.round(n => roundTo(n, precision)).toSVG()\n      );\n    }\n\n    let newViewBox,\n      viewBox = (globalThis.viewBox = viewBoxOld.inset(0));\n\n    if(params.padding) {\n      let conv = writeUnits.map(u => unitConv(u));\n\n      let pad = (globalThis.pad = [...NumericArgs(params.padding)]).map((a, i) => {\n        let f = i & 1 ? xfactor : yfactor;\n        let u = writeUnits[(i & 1) ^ 1];\n\n        let idx = (i & 1) ^ 1;\n\n        console.log('idx', idx, u, conv[idx]);\n\n        return conv[idx](a) * f;\n      });\n\n      console.log('pad', pad);\n\n      newViewBox = globalThis.newViewBox = viewBox.outset(...pad);\n    }\n\n    svg.setAttribute('viewBox', (newViewBox ??= viewBox).toSVG());\n\n    const { width, height } = newViewBox;\n    //console.log('viewBox', viewBox, viewBox.toSVG());\n    //console.log('newViewBox', newViewBox, newViewBox.toSVG());\n\n    let w = (globalThis.w = width / xfactor);\n    let h = (globalThis.h = height / yfactor);\n    //console.log('attributes', { w, h });\n\n    svg.setAttribute('width', w + writeUnits[0]);\n    svg.setAttribute('height', h + writeUnits[1]);\n\n    WriteFile(basename(file, '.svg') + '.out.svg', serializer.serializeToString(document));\n\n    if(params.interactive) kill(process.pid, SIGUSR1);\n  }\n}\n\ntry {\n  main(...scriptArgs.slice(1));\n} catch(e) {\n  console.log('ERROR', e.message + '\\n' + e.stack);\n  startInteractive();\n}\n",
			"file": "svg-crop-pad.js",
			"file_size": 15960,
			"file_write_time": 133254578060294139,
			"settings":
			{
				"buffer_size": 15965,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"insert",
					{
						"characters": "ushd"
					},
					"BAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAACAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAABAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAQAAAAAAAAABQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"OUTLIN",
				"Browse Mode: Outline (Right)"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/janos/Projects/plot-cv"
	],
	"file_history":
	[
	],
	"find":
	{
		"height": 0.0
	},
	"find_in_files":
	{
		"height": 0.0,
		"where_history":
		[
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			"\n      t = 'l';"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1210,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"current_file": "/home/janos/Projects/plot-cv/svg-crop-pad.js",
							"function_name_status_row": -1,
							"outline_rename_mode": false,
							"symkeys":
							[
								[
									1504,
									1528
								],
								[
									1748,
									1769
								],
								[
									1995,
									2011
								],
								[
									2565,
									2587
								],
								[
									2886,
									2916
								],
								[
									3076,
									3103
								],
								[
									3240,
									3254
								],
								[
									3360,
									3381
								],
								[
									3813,
									3817
								],
								[
									3977,
									4007
								],
								[
									4059,
									4073
								],
								[
									5097,
									5111
								],
								[
									5362,
									5398
								],
								[
									5509,
									5528
								],
								[
									5538,
									5547
								],
								[
									5561,
									5585
								],
								[
									5671,
									5699
								],
								[
									5789,
									5815
								],
								[
									5975,
									6037
								],
								[
									6212,
									6247
								],
								[
									6339,
									6376
								],
								[
									6457,
									6477
								],
								[
									6553,
									6577
								],
								[
									6919,
									6923
								],
								[
									7382,
									7386
								],
								[
									7411,
									7415
								],
								[
									7480,
									7491
								],
								[
									7696,
									7731
								],
								[
									7873,
									7897
								],
								[
									7953,
									7978
								],
								[
									8057,
									8061
								],
								[
									8095,
									8099
								],
								[
									8129,
									8155
								],
								[
									8214,
									8218
								],
								[
									8252,
									8301
								],
								[
									8316,
									8321
								],
								[
									8449,
									8459
								],
								[
									8572,
									8577
								],
								[
									8599,
									8603
								],
								[
									8860,
									8891
								],
								[
									9180,
									9213
								],
								[
									9613,
									9637
								],
								[
									9992,
									10020
								],
								[
									10636,
									10645
								],
								[
									10662,
									10671
								],
								[
									10703,
									10712
								],
								[
									10731,
									10740
								],
								[
									10754,
									10764
								],
								[
									10780,
									10789
								],
								[
									10803,
									10812
								],
								[
									10819,
									10827
								],
								[
									10842,
									10865
								],
								[
									10876,
									10885
								],
								[
									10930,
									10962
								],
								[
									11040,
									11074
								],
								[
									11270,
									11295
								],
								[
									11352,
									11402
								],
								[
									11672,
									11705
								],
								[
									11805,
									11840
								],
								[
									11917,
									11939
								],
								[
									12559,
									12577
								],
								[
									12620,
									12626
								],
								[
									12660,
									12665
								],
								[
									12707,
									12712
								],
								[
									12829,
									12834
								],
								[
									13129,
									13155
								],
								[
									13256,
									13282
								],
								[
									14588,
									14592
								],
								[
									14778,
									14782
								],
								[
									14870,
									14879
								]
							],
							"symlist":
							[
								"  parseSVGPath(s)",
								"  parseValues = args =>",
								"\t(_, c, args) =>",
								"  splitPath(ps)",
								"  pathToAbsolute(path)",
								"  pathToPoints(path)",
								"  isUpper = s =>",
								"MakePoint = (x, y) =>",
								"  n =>",
								"  pointsToAbsolute(it)",
								"  isUpper = s =>",
								"  save(filename)",
								"NumericArgs(s, t = a => a)",
								"  deref = p => obj =>",
								"(o, k) =>",
								"ParentPaths(p)",
								"CumulativePaths(p)",
								"AllParents(elem)",
								"AllTransforms(elem, getter = getTransformationMatrix)",
								"ElementTransformList(elem)",
								"ElementTransformMatrix(elem)",
								"GetXY(elem)",
								"GetPoints(elem)",
								"  p =>",
								"  c =>",
								"  a =>",
								"([x, y]) =>",
								"GetTransformedPoints(elem)",
								"GetMatrix(elem)",
								"IsClipPath(elem)",
								"  e =>",
								"  e =>",
								"HasClipPath(elem)",
								"  e =>",
								"PositionedElements(svgElem = svg, skip)",
								"() =>",
								"\t(v, p) =>",
								"\te =>",
								"  n =>",
								"HasParent(elem, other)",
								"GetBounds(svgElem = svg)",
								"ProcessPath(d)",
								"  unitConvToMM(value)",
								"  pc: mm =>",
								"  px: mm =>",
								"  pt: mm =>",
								"  in: mm =>",
								"  mil: mm =>",
								"  cm: mm =>",
								"  mm: mm =>",
								"  m: mm =>",
								"  unitConv(unit)",
								"\tvalue =>",
								"  unitConvTo(value, unit)",
								"  getViewBox(svgElem = svg)",
								"XML2String(elem)",
								"  getWidthHeight(svgElem = svg, t = a => a)",
								"  getTransformationList(e)",
								"  getTransformationMatrix(e)",
								"  main(...args)",
								"\t(_x, _y, opts) =>",
								"\t() =>",
								"\ta =>",
								"\ta =>",
								"\ta =>",
								"  print = (file, ...args) =>",
								"  print = (file, ...args) =>",
								"  n =>",
								"  u =>",
								"(a, i) =>"
							],
							"syntax": "Packages/Outline/outline.hidden-tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680983511.5,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
=======
					168,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/main.js",
						"symkeys":
						[
							[
								9310,
								9315
							],
							[
								9497,
								9503
							],
							[
								9556,
								9561
							],
							[
								9614,
								9618
							],
							[
								9692,
								9696
							],
							[
								9718,
								9727
							],
							[
								10386,
								10405
							],
							[
								10504,
								10508
							],
							[
								10680,
								10687
							],
							[
								10718,
								10728
							],
							[
								10985,
								11009
							],
							[
								11050,
								11071
							],
							[
								11073,
								11078
							],
							[
								11086,
								11091
							],
							[
								11113,
								11148
							],
							[
								11262,
								11280
							],
							[
								11362,
								11367
							],
							[
								11554,
								11575
							],
							[
								11708,
								11726
							],
							[
								12405,
								12430
							],
							[
								12476,
								12494
							],
							[
								13471,
								13498
							],
							[
								13853,
								13878
							],
							[
								14217,
								14251
							],
							[
								14767,
								14799
							],
							[
								14974,
								14984
							],
							[
								15117,
								15127
							],
							[
								15246,
								15256
							],
							[
								15423,
								15447
							],
							[
								15506,
								15555
							],
							[
								15796,
								15818
							],
							[
								15825,
								15849
							],
							[
								15857,
								15886
							],
							[
								16693,
								16745
							],
							[
								17198,
								17202
							],
							[
								17229,
								17234
							],
							[
								17669,
								17755
							],
							[
								17953,
								17975
							],
							[
								18488,
								18520
							],
							[
								18848,
								18882
							],
							[
								18997,
								19002
							],
							[
								19027,
								19063
							],
							[
								19252,
								19277
							],
							[
								19468,
								19493
							],
							[
								19548,
								19552
							],
							[
								19607,
								19611
							],
							[
								20053,
								20070
							],
							[
								20259,
								20274
							],
							[
								20397,
								20414
							],
							[
								20466,
								20470
							],
							[
								20515,
								20519
							],
							[
								20550,
								20554
							],
							[
								20592,
								20597
							],
							[
								20684,
								20703
							],
							[
								20876,
								20911
							],
							[
								20949,
								20957
							],
							[
								21026,
								21030
							],
							[
								21593,
								21597
							],
							[
								21656,
								21660
							],
							[
								22229,
								22235
							],
							[
								22410,
								22414
							],
							[
								22435,
								22439
							],
							[
								22474,
								22478
							],
							[
								22738,
								22751
							],
							[
								22874,
								22878
							],
							[
								23072,
								23088
							],
							[
								23354,
								23359
							],
							[
								23472,
								23481
							],
							[
								23553,
								23562
							],
							[
								23639,
								23648
							],
							[
								24288,
								24310
							],
							[
								24487,
								24547
							],
							[
								24796,
								24816
							],
							[
								24827,
								24836
							],
							[
								24891,
								24903
							],
							[
								24948,
								24955
							],
							[
								25041,
								25072
							],
							[
								25394,
								25427
							],
							[
								26466,
								26519
							],
							[
								26569,
								26578
							],
							[
								26653,
								26696
							],
							[
								26775,
								26779
							],
							[
								26908,
								26915
							],
							[
								26942,
								26949
							],
							[
								27027,
								27048
							],
							[
								27303,
								27345
							],
							[
								27468,
								27489
							],
							[
								27724,
								27769
							],
							[
								27914,
								27921
							],
							[
								27963,
								28033
							],
							[
								28470,
								28495
							],
							[
								28518,
								28522
							],
							[
								28542,
								28555
							],
							[
								28671,
								28743
							],
							[
								28962,
								28969
							],
							[
								29052,
								29061
							],
							[
								29493,
								29558
							],
							[
								29645,
								29671
							],
							[
								29884,
								29909
							],
							[
								29932,
								29936
							],
							[
								29956,
								29969
							],
							[
								30023,
								30074
							],
							[
								30076,
								30082
							],
							[
								30091,
								30093
							],
							[
								30118,
								30125
							],
							[
								30149,
								30238
							],
							[
								30245,
								30268
							],
							[
								30331,
								30358
							],
							[
								30367,
								30387
							],
							[
								30522,
								30526
							],
							[
								30696,
								30715
							],
							[
								30799,
								30818
							],
							[
								30911,
								30926
							],
							[
								31786,
								31801
							],
							[
								31887,
								31902
							],
							[
								32559,
								32600
							],
							[
								32800,
								32804
							],
							[
								32834,
								32845
							],
							[
								32928,
								32948
							],
							[
								33153,
								33177
							],
							[
								33235,
								33275
							],
							[
								33647,
								33666
							],
							[
								33717,
								33736
							],
							[
								34598,
								34626
							],
							[
								34826,
								34838
							],
							[
								34869,
								34881
							],
							[
								35392,
								35440
							],
							[
								35665,
								35671
							],
							[
								35816,
								35821
							],
							[
								35847,
								35854
							],
							[
								35912,
								35917
							],
							[
								35945,
								35952
							],
							[
								36575,
								36591
							],
							[
								36714,
								36718
							],
							[
								37226,
								37234
							],
							[
								37677,
								37685
							],
							[
								37738,
								37743
							],
							[
								37784,
								37792
							],
							[
								37932,
								37937
							],
							[
								38024,
								38040
							],
							[
								39711,
								39716
							],
							[
								40349,
								40400
							],
							[
								40803,
								40808
							],
							[
								40827,
								40832
							],
							[
								41140,
								41157
							],
							[
								41317,
								41323
							],
							[
								41452,
								41472
							],
							[
								41549,
								41579
							],
							[
								41755,
								41763
							],
							[
								41862,
								41873
							],
							[
								41989,
								41993
							],
							[
								42720,
								42761
							],
							[
								43384,
								43407
							],
							[
								43996,
								44000
							],
							[
								44144,
								44148
							],
							[
								44660,
								44664
							],
							[
								44679,
								44709
							],
							[
								44757,
								44761
							],
							[
								44775,
								44805
							],
							[
								44859,
								44863
							],
							[
								44882,
								44906
							],
							[
								44971,
								44975
							],
							[
								45015,
								45039
							],
							[
								45157,
								45161
							],
							[
								45187,
								45191
							],
							[
								45261,
								45265
							],
							[
								45291,
								45295
							],
							[
								45388,
								45392
							],
							[
								45750,
								45785
							],
							[
								45896,
								45909
							],
							[
								46350,
								46390
							],
							[
								46436,
								46445
							],
							[
								46461,
								46472
							],
							[
								46564,
								46575
							],
							[
								46621,
								46677
							],
							[
								46684,
								46690
							],
							[
								46772,
								46792
							],
							[
								46839,
								46897
							],
							[
								46904,
								46910
							],
							[
								46953,
								46960
							],
							[
								46977,
								46998
							],
							[
								47060,
								47071
							],
							[
								47301,
								47319
							],
							[
								47359,
								47365
							],
							[
								47398,
								47426
							],
							[
								47464,
								47486
							],
							[
								47571,
								47595
							],
							[
								47596,
								47610
							],
							[
								48730,
								48763
							],
							[
								48772,
								48773
							],
							[
								48825,
								48849
							],
							[
								48890,
								48921
							],
							[
								48930,
								48931
							],
							[
								49175,
								49218
							],
							[
								49532,
								49559
							],
							[
								49852,
								49863
							],
							[
								50069,
								50085
							],
							[
								50399,
								50419
							],
							[
								51304,
								51351
							],
							[
								51734,
								51749
							],
							[
								51966,
								51979
							],
							[
								52256,
								52269
							],
							[
								52475,
								52488
							],
							[
								52707,
								52713
							],
							[
								52763,
								52784
							],
							[
								56768,
								56779
							],
							[
								57615,
								57619
							],
							[
								58033,
								58038
							],
							[
								58187,
								58201
							],
							[
								58219,
								58224
							],
							[
								58337,
								58358
							],
							[
								58416,
								58421
							],
							[
								58529,
								58550
							],
							[
								58775,
								58788
							],
							[
								58789,
								58816
							],
							[
								58933,
								58956
							],
							[
								59238,
								59253
							],
							[
								59278,
								59295
							],
							[
								59362,
								59370
							],
							[
								59443,
								59448
							],
							[
								59554,
								59578
							],
							[
								60339,
								60346
							],
							[
								60376,
								60383
							],
							[
								60705,
								60732
							],
							[
								60828,
								60832
							],
							[
								61197,
								61233
							],
							[
								61366,
								61375
							],
							[
								61410,
								61421
							],
							[
								61473,
								61487
							],
							[
								62067,
								62071
							],
							[
								62746,
								62754
							],
							[
								62870,
								62878
							],
							[
								62998,
								63006
							],
							[
								63121,
								63129
							],
							[
								63186,
								63194
							],
							[
								63666,
								63674
							],
							[
								63859,
								63906
							],
							[
								64052,
								64065
							],
							[
								64228,
								64246
							],
							[
								64414,
								64418
							],
							[
								64490,
								64497
							],
							[
								64745,
								64764
							],
							[
								64796,
								64814
							],
							[
								65340,
								65360
							],
							[
								65610,
								65627
							],
							[
								65835,
								65853
							],
							[
								66130,
								66153
							],
							[
								66604,
								66621
							],
							[
								66713,
								66721
							],
							[
								66940,
								66954
							],
							[
								67092,
								67132
							],
							[
								67197,
								67211
							],
							[
								67786,
								67802
							],
							[
								67840,
								67915
							],
							[
								68150,
								68171
							],
							[
								68275,
								68279
							],
							[
								68758,
								68772
							],
							[
								69062,
								69066
							],
							[
								69133,
								69137
							],
							[
								69414,
								69431
							],
							[
								69599,
								69607
							],
							[
								69800,
								69804
							],
							[
								69900,
								69915
							],
							[
								70161,
								70165
							],
							[
								70372,
								70389
							],
							[
								70481,
								70496
							],
							[
								71289,
								71301
							],
							[
								71308,
								71321
							],
							[
								71359,
								71374
							],
							[
								71478,
								71498
							],
							[
								71678,
								71705
							],
							[
								71759,
								71771
							],
							[
								71889,
								71897
							],
							[
								72346,
								72354
							],
							[
								73176,
								73185
							],
							[
								73420,
								73427
							],
							[
								73526,
								73546
							],
							[
								73733,
								73753
							],
							[
								74114,
								74124
							],
							[
								74927,
								74931
							],
							[
								75006,
								75010
							],
							[
								75024,
								75038
							],
							[
								75295,
								75302
							],
							[
								77645,
								77677
							],
							[
								78074,
								78078
							],
							[
								78284,
								78288
							],
							[
								78356,
								78360
							],
							[
								78444,
								78451
							],
							[
								78530,
								78534
							],
							[
								79593,
								79639
							],
							[
								80069,
								80078
							],
							[
								81180,
								81195
							],
							[
								81409,
								81425
							],
							[
								81586,
								81602
							],
							[
								81777,
								81793
							],
							[
								82816,
								82834
							],
							[
								83032,
								83055
							],
							[
								83097,
								83112
							],
							[
								83468,
								83483
							],
							[
								83896,
								83916
							],
							[
								84369,
								84387
							],
							[
								85103,
								85112
							],
							[
								85155,
								85159
							],
							[
								85371,
								85409
							],
							[
								85584,
								85607
							],
							[
								85741,
								85746
							],
							[
								85785,
								85795
							],
							[
								85954,
								85958
							],
							[
								86095,
								86099
							],
							[
								86138,
								86143
							],
							[
								86548,
								86552
							],
							[
								86586,
								86600
							],
							[
								86604,
								86618
							],
							[
								86625,
								86629
							],
							[
								86650,
								86665
							],
							[
								86696,
								86710
							],
							[
								86817,
								86828
							],
							[
								86873,
								86878
							],
							[
								86933,
								86938
							],
							[
								87388,
								87398
							],
							[
								87489,
								87499
							],
							[
								87512,
								87516
							],
							[
								87690,
								87694
							],
							[
								87855,
								87876
							],
							[
								88946,
								88950
							],
							[
								89057,
								89061
							],
							[
								89350,
								89378
							],
							[
								89829,
								89833
							],
							[
								90289,
								90298
							],
							[
								90382,
								90391
							],
							[
								90495,
								90503
							],
							[
								91009,
								91018
							],
							[
								91167,
								91171
							],
							[
								91236,
								91262
							],
							[
								91902,
								91907
							],
							[
								92182,
								92204
							],
							[
								93210,
								93231
							],
							[
								93436,
								93464
							],
							[
								93831,
								93874
							],
							[
								95199,
								95208
							],
							[
								95988,
								95992
							],
							[
								96727,
								96754
							],
							[
								96877,
								96890
							]
						],
						"symlist":
						[
							"() =>",
							"res =>",
							"() =>",
							"r =>",
							"r =>",
							"entries()",
							"GetProject = arg =>",
							"p =>",
							" () =>",
							" value =>",
							"add = (arr, ...items) =>",
							"useSlot = (arr, i) =>",
							"() =>",
							" v =>",
							"trklGetSet = (get, set) => value =>",
							"MouseEvents = h =>",
							"() =>",
							"(parent, delegate) =>",
							"append_to(elem, p)",
							"function DrawSVG(...args)",
							"append_to(elem, p)",
							" function adjustViewBox(e)",
							"function calcViewBox(box)",
							"function setViewBox(svgOwner, box)",
							"ElementToXML = (e, predicate) =>",
							" (v, k) =>",
							" (v, k) =>",
							" (v, k) =>",
							"async readFile(filename)",
							"async writeFile(filename, data, overwrite = true)",
							"async exists(filename)",
							"async realpath(filename)",
							"async function LoadFile(file)",
							"async function SaveFile(filename, data, contentType)",
							"s =>",
							"() =>",
							"async function SaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])",
							"predicate = element =>",
							"async function LoadSVG(filename)",
							"async function LoadImage(filename)",
							"() =>",
							" function RenderComponent(component)",
							"ModifyColors = fn => e =>",
							"FindLayer = name_or_id =>",
							"n =>",
							"l =>",
							"(id = '#geom') =>",
							"(props = {}) =>",
							"maxZIndex = () =>",
							"e =>",
							"z =>",
							"z =>",
							"() =>",
							"randomColor = () =>",
							"function DrawArc(start, end, angle)",
							"props =>",
							"p =>",
							"a =>",
							"m =>",
							"hex =>",
							"p =>",
							"p =>",
							"p =>",
							"({ x, y }) =>",
							"a =>",
							"({ x, y }, i) =>",
							" e =>",
							"(l, i) =>",
							"(p, i) =>",
							"(p, i) =>",
							"add = (level, item) =>",
							" function RecurseBinaryNode(node, parent = null, depth = 0)",
							"(nodes, i, level) =>",
							"fx = j =>",
							"(node, j) =>",
							"item =>",
							" function DrawNode(x, y, node)",
							" function DrawEdge(item, parent)",
							"function GetPaths(query, parent = project.svgElement)",
							"(a, e) =>",
							"function PathToPolylines(path, step = 0.01)",
							"p =>",
							"poly =>",
							"poly =>",
							" (p, d, set, stop) =>",
							"function PathToPolyline(path, step = 0.01)",
							" (p, d, set, stop) =>",
							"function PathsToPolylines(paths, step = 0.01)",
							"path =>",
							"function OutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function OutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)",
							"path =>",
							"(a, p) =>",
							"function ClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)",
							"add = (p, clip = false) =>",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function saveItemStates(itemList, get = item => is.",
							"(item.",
							"))",
							"item =>",
							"function restoreItemStates(itemStates, /* prettier-ignore */ set = (item, value) => item.",
							"(value ? 'yes' : 'no'))",
							"function EagleMaps(project)",
							"transformPath = p =>",
							"e =>",
							"dom2eagle = node =>",
							"eagle2dom = elem =>",
							"path2dom = p =>",
							"(key, value) =>",
							"(key, value) =>",
							"function* PackageNames(doc = project.doc)",
							"e =>",
							"([e, b]) =>",
							"([e, w, h, m, v]) =>",
							"({ index, ...match }) =>",
							" ({ s, v, indexes }, match, i) =>",
							"([token, index]) =>",
							"([token, index]) =>",
							"function NextDocument(n = 1)",
							" (idx, i) =>",
							" (idx, i) =>",
							"async function LoadDocument(project, parentElem)",
							"err =>",
							"() =>",
							" ent =>",
							"() =>",
							" ent =>",
							"renamePackages()",
							"a =>",
							"value =>",
							"layer =>",
							"() =>",
							"layer =>",
							"() =>",
							"fn = function(v)",
							"() =>",
							".makeGroup = function({ transform, ...props } = {})",
							"id =>",
							"() =>",
							" function xx()",
							" () =>",
							"function (transform)",
							" (tag, attr, children = []) =>",
							"value =>",
							"async () =>",
							"Rect",
							"async function ChooseDocument(project, i)",
							"GenerateVoronoi = () =>",
							"Rect",
							"p =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ va, vb, ...edge }) =>",
							"v =>",
							"add = (arr, ...items) =>",
							"l =>",
							"t =>",
							"l =>",
							"t =>",
							"p =>",
							" (acc, { site, halfedges }) =>",
							"({ site }) =>",
							"function PackageChildren(element, layer)",
							"(c, i) =>",
							"([i, p]) =>",
							"([i, e]) =>",
							"function ElementChildren(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							"([name, element]) =>",
							"function ElementGeometries(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							" ent =>",
							"([name, children]) =>",
							"([i, e]) =>",
							"([name, lines]) =>",
							"pts =>",
							"([name, lines, polygons]) =>",
							"function NewPath(path)",
							"MakeFitAction = index =>",
							"async event =>",
							"function ZoomFactor(val = config.",
							")",
							"function ZoomLog(factor)",
							"function AdjustZoom(l = config.",
							")",
							"CreateGrblSocket = async (port = 'tnt1') =>",
							"function HandleMessage(msg)",
							"pointStr =>",
							"socketFn = () =>",
							".send = (...args) =>",
							"AuthorizationDialog = ({ onAuth, ...props }) =>",
							"onSubmit: () =>",
							"onInput: e =>",
							"onInput: e =>",
							"onClick: e =>",
							"arg =>",
							".onload = async () =>",
							"response =>",
							"e =>",
							" v =>",
							"TestArc: () =>",
							"() =>",
							"async (push, stop) =>",
							"() =>",
							"async (push, stop) =>",
							" target =>",
							" (key, modifiers = 0) =>",
							".focusSearch = state =>",
							"children: () =>",
							"geometries: () =>",
							"value =>",
							"() =>",
							"testComponent = props =>",
							"resp =>",
							"json =>",
							" function File(obj, i)",
							"File",
							"File.prototype.toString = function()",
							"(a, b) =>",
							"(obj, i) =>",
							"(acc, file) =>",
							"i =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"updateIfChanged = (trkl, newValue, callback) =>",
							" (elem, i) =>",
							"changeInput = e =>",
							"p =>",
							" arg =>",
							"Consumer = props =>",
							"async function* ()",
							"log(type, time, msg)",
							"Logger = props =>",
							"async function* ()",
							"([type, d, t, m], i) =>",
							"Dumper = props =>",
							"value =>",
							"([k, v], i) =>",
							"Commander = ({ onCommand, ...props }) =>",
							"handler = e =>",
							"toggle = trkl =>",
							"Layer = ({ title, name, label, i, color, element, className, ...props }) =>",
							"setVisible = value =>",
							"e =>",
							" e =>",
							"l =>",
							"l =>",
							" (item, value) =>",
							" item =>",
							"l =>",
							"([l, state]) =>",
							"e =>",
							"onMouseMove: e =>",
							"onMouseUp: e =>",
							"DocumentList",
							"constructor()",
							"(push, stop) =>",
							"add(name, component)",
							"addEntry([name, component])",
							"remove(name)",
							"update()",
							"fn: e =>",
							"fn: () =>",
							"open =>",
							" props =>",
							" props =>",
							"async e =>",
							"i =>",
							"i =>",
							"({ coord }) =>",
							"side =>",
							"create: (project, props = {}) =>",
							"a =>",
							"e =>",
							"e =>",
							"name =>",
							"e =>",
							" function makeLayerName(name, side)",
							"fn: () =>",
							"onChange(event)",
							" props =>",
							" props =>",
							" props =>",
							"async (e, p, i) =>",
							"makeSortCompare: key =>",
							" function(a, b)",
							" function(a, b)",
							"onCommand: cmdStr =>",
							"handleChange: e =>",
							" event =>",
							"e =>",
							" function MoveEvent(event, prevEvent)",
							" function* WalkUp(e)",
							" e =>",
							" z =>",
							"p =>",
							"e =>",
							" e =>",
							"e =>",
							" v =>",
							" l =>",
							"e =>",
							" () =>",
							" (e, depth) =>",
							" classes =>",
							" e =>",
							" e =>",
							" (a, b) =>",
							" (a, b) =>",
							"Node",
							"e =>",
							" (p, d, set, stop) =>",
							"e =>",
							"e =>",
							" function TouchEvent(event)",
							"e =>",
							"(p, i) =>",
							"(a, b) =>",
							" size =>",
							"border =>",
							"r =>",
							" function mod(n, m)",
							"() =>",
							" (pos, last, first) =>",
							" function cancel()",
							".oncontextmenu = function(e)",
							".processEvents = async function eventLoop()",
							" event =>",
							"e =>",
							"onRuntimeInitialized: () =>",
							"print: txt =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAADFgAAKCkgPT4KICByZXMgPT4KKCkgPT4KICByID0+CiAgciA9PgogIGVudHJpZXMoKQpHZXRQcm9qZWN0ID0gYXJnID0+CiAgcCA9PgogICgpID0+CiAgdmFsdWUgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICB1c2VTbG90ID0gKGFyciwgaSkgPT4KKCkgPT4KICB2ID0+CiAgdHJrbEdldFNldCA9IChnZXQsIHNldCkgPT4gdmFsdWUgPT4KTW91c2VFdmVudHMgPSBoID0+CigpID0+CihwYXJlbnQsIGRlbGVnYXRlKSA9PgogIGFwcGVuZF90byhlbGVtLCBwKQpEcmF3U1ZHKC4uLmFyZ3MpCiAgYXBwZW5kX3RvKGVsZW0sIHApCiAgYWRqdXN0Vmlld0JveChlKQogIGNhbGNWaWV3Qm94KGJveCkKICBzZXRWaWV3Qm94KHN2Z093bmVyLCBib3gpCkVsZW1lbnRUb1hNTCA9IChlLCBwcmVkaWNhdGUpID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgcmVhZEZpbGUoZmlsZW5hbWUpCiAgd3JpdGVGaWxlKGZpbGVuYW1lLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKQogIGV4aXN0cyhmaWxlbmFtZSkKICByZWFscGF0aChmaWxlbmFtZSkKTG9hZEZpbGUoZmlsZSkKU2F2ZUZpbGUoZmlsZW5hbWUsIGRhdGEsIGNvbnRlbnRUeXBlKQogIHMgPT4KKCkgPT4KU2F2ZVNWRyhmaWxlbmFtZSwgbGF5ZXJzID0gWzEsIDE2LCAyMCwgMjEsIDIyLCAyMywgMjUsIDI3LCA0NywgNDgsIDUxXSkKICBwcmVkaWNhdGUgPSBlbGVtZW50ID0+CkxvYWRTVkcoZmlsZW5hbWUpCkxvYWRJbWFnZShmaWxlbmFtZSkKKCkgPT4KUmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCkKTW9kaWZ5Q29sb3JzID0gZm4gPT4gZSA9PgpGaW5kTGF5ZXIgPSBuYW1lX29yX2lkID0+CiAgbiA9PgogIGwgPT4KKGlkID0gJyNnZW9tJykgPT4KKHByb3BzID0ge30pID0+CiAgbWF4WkluZGV4ID0gKCkgPT4KICBlID0+CiAgeiA9PgogIHogPT4KKCkgPT4KICByYW5kb21Db2xvciA9ICgpID0+CkRyYXdBcmMoc3RhcnQsIGVuZCwgYW5nbGUpCiAgcHJvcHMgPT4KICBwID0+CiAgYSA9PgogIG0gPT4KICBoZXggPT4KICBwID0+CiAgcCA9PgogIHAgPT4KKHsgeCwgeSB9KSA9PgogIGEgPT4KKHsgeCwgeSB9LCBpKSA9PgogIGUgPT4KKGwsIGkpID0+CihwLCBpKSA9PgoocCwgaSkgPT4KICBhZGQgPSAobGV2ZWwsIGl0ZW0pID0+ClJlY3Vyc2VCaW5hcnlOb2RlKG5vZGUsIHBhcmVudCA9IG51bGwsIGRlcHRoID0gMCkKKG5vZGVzLCBpLCBsZXZlbCkgPT4KICBmeCA9IGogPT4KKG5vZGUsIGopID0+CiAgaXRlbSA9PgpEcmF3Tm9kZSh4LCB5LCBub2RlKQpEcmF3RWRnZShpdGVtLCBwYXJlbnQpCkdldFBhdGhzKHF1ZXJ5LCBwYXJlbnQgPSBwcm9qZWN0LnN2Z0VsZW1lbnQpCihhLCBlKSA9PgpQYXRoVG9Qb2x5bGluZXMocGF0aCwgc3RlcCA9IDAuMDEpCiAgcCA9PgogIHBvbHkgPT4KICBwb2x5ID0+CiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aFRvUG9seWxpbmUocGF0aCwgc3RlcCA9IDAuMDEpCiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aHNUb1BvbHlsaW5lcyhwYXRocywgc3RlcCA9IDAuMDEpCiAgcGF0aCA9PgpPdXRzZXRQYXRoKHBhdGgsIG9mZnNldCwgbWl0ZXJMaW1pdCA9IDIsIGFyY1RvbGVyYW5jZSA9IDAuMDEpCiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgpPdXRzZXRQYXRocyhwYXRocywgb2Zmc2V0LCBtaXRlckxpbWl0ID0gMiwgYXJjVG9sZXJhbmNlID0gMC4yNSkKICBwYXRoID0+CihhLCBwKSA9PgpDbGlwUGF0aChwYXRoLCBjbGlwLCBtb2RlID0gQ2xpcHBlckxpYi5DbGlwVHlwZS5jdFVuaW9uKQogIGFkZCA9IChwLCBjbGlwID0gZmFsc2UpID0+CiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgogIHNhdmVJdGVtU3RhdGVzKGl0ZW1MaXN0LCBnZXQgPSBpdGVtID0+IGlzLgooaXRlbS4KKSkKICBpdGVtID0+CiAgcmVzdG9yZUl0ZW1TdGF0ZXMoaXRlbVN0YXRlcywgLypwcmV0dGllci1pZ25vcmUgKi8gc2V0ID0gKGl0ZW0sIHZhbHVlKSA9PiBpdGVtLgoodmFsdWUgPyAneWVzJyA6ICdubycpKQpFYWdsZU1hcHMocHJvamVjdCkKICB0cmFuc2Zvcm1QYXRoID0gcCA9PgogIGUgPT4KICBkb20yZWFnbGUgPSBub2RlID0+CiAgZWFnbGUyZG9tID0gZWxlbSA9PgogIHBhdGgyZG9tID0gcCA9Pgooa2V5LCB2YWx1ZSkgPT4KKGtleSwgdmFsdWUpID0+ClBhY2thZ2VOYW1lcyhkb2MgPSBwcm9qZWN0LmRvYykKICBlID0+CihbZSwgYl0pID0+CihbZSwgdywgaCwgbSwgdl0pID0+Cih7IGluZGV4LCAuLi5tYXRjaCB9KSA9PgogICh7IHMsIHYsIGluZGV4ZXMgfSwgbWF0Y2gsIGkpID0+CihbdG9rZW4sIGluZGV4XSkgPT4KKFt0b2tlbiwgaW5kZXhdKSA9PgpOZXh0RG9jdW1lbnQobiA9IDEpCiAgKGlkeCwgaSkgPT4KICAoaWR4LCBpKSA9PgpMb2FkRG9jdW1lbnQocHJvamVjdCwgcGFyZW50RWxlbSkKICBlcnIgPT4KKCkgPT4KICBlbnQgPT4KKCkgPT4KICBlbnQgPT4KICByZW5hbWVQYWNrYWdlcygpCiAgYSA9PgogIHZhbHVlID0+CiAgbGF5ZXIgPT4KKCkgPT4KICBsYXllciA9PgooKSA9PgogIGZuID0gZnVuY3Rpb24odikKKCkgPT4KICAubWFrZUdyb3VwID0gZnVuY3Rpb24oeyB0cmFuc2Zvcm0sIC4uLnByb3BzIH0gPSB7fSkKICBpZCA9PgooKSA9PgogIHh4KCkKICAoKSA9PgoodHJhbnNmb3JtKQogICh0YWcsIGF0dHIsIGNoaWxkcmVuID0gW10pID0+CiAgdmFsdWUgPT4KKCkgPT4KUmVjdApDaG9vc2VEb2N1bWVudChwcm9qZWN0LCBpKQpHZW5lcmF0ZVZvcm9ub2kgPSAoKSA9PgpSZWN0CiAgcCA9PgogIGUgPT4KKHsgbFNpdGUsIHJTaXRlLCAuLi5lZGdlIH0pID0+CiAgZSA9PgooeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4KICBlID0+Cih7IHZhLCB2YiwgLi4uZWRnZSB9KSA9PgogIHYgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICBsID0+CiAgdCA9PgogIGwgPT4KICB0ID0+CiAgcCA9PgogIChhY2MsIHsgc2l0ZSwgaGFsZmVkZ2VzIH0pID0+Cih7IHNpdGUgfSkgPT4KUGFja2FnZUNoaWxkcmVuKGVsZW1lbnQsIGxheWVyKQooYywgaSkgPT4KKFtpLCBwXSkgPT4KKFtpLCBlXSkgPT4KRWxlbWVudENoaWxkcmVuKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCihbbmFtZSwgZWxlbWVudF0pID0+CkVsZW1lbnRHZW9tZXRyaWVzKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCiAgZW50ID0+CihbbmFtZSwgY2hpbGRyZW5dKSA9PgooW2ksIGVdKSA9PgooW25hbWUsIGxpbmVzXSkgPT4KICBwdHMgPT4KKFtuYW1lLCBsaW5lcywgcG9seWdvbnNdKSA9PgpOZXdQYXRoKHBhdGgpCk1ha2VGaXRBY3Rpb24gPSBpbmRleCA9PgogIGV2ZW50ID0+Clpvb21GYWN0b3IodmFsID0gY29uZmlnLgopClpvb21Mb2coZmFjdG9yKQpBZGp1c3Rab29tKGwgPSBjb25maWcuCikKQ3JlYXRlR3JibFNvY2tldCA9IChwb3J0ID0gJ3RudDEnKSA9PgpIYW5kbGVNZXNzYWdlKG1zZykKICBwb2ludFN0ciA9PgogIHNvY2tldEZuID0gKCkgPT4KICAuc2VuZCA9ICguLi5hcmdzKSA9PgpBdXRob3JpemF0aW9uRGlhbG9nID0gKHsgb25BdXRoLCAuLi5wcm9wcyB9KSA9PgogIG9uU3VibWl0OiAoKSA9PgogIG9uSW5wdXQ6IGUgPT4KICBvbklucHV0OiBlID0+CiAgb25DbGljazogZSA9PgogIGFyZyA9PgogIC5vbmxvYWQgPSAoKSA9PgogIHJlc3BvbnNlID0+CiAgZSA9PgogIHYgPT4KVGVzdEFyYzogKCkgPT4KKCkgPT4KKHB1c2gsIHN0b3ApID0+CigpID0+CihwdXNoLCBzdG9wKSA9PgogIHRhcmdldCA9PgogIChrZXksIG1vZGlmaWVycyA9IDApID0+CiAgLmZvY3VzU2VhcmNoID0gc3RhdGUgPT4KICBjaGlsZHJlbjogKCkgPT4KICBnZW9tZXRyaWVzOiAoKSA9PgogIHZhbHVlID0+CigpID0+CiAgdGVzdENvbXBvbmVudCA9IHByb3BzID0+CiAgcmVzcCA9PgogIGpzb24gPT4KRmlsZShvYmosIGkpCkZpbGUKRmlsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpCihhLCBiKSA9Pgoob2JqLCBpKSA9PgooYWNjLCBmaWxlKSA9PgogIGkgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB1cGRhdGVJZkNoYW5nZWQgPSAodHJrbCwgbmV3VmFsdWUsIGNhbGxiYWNrKSA9PgogIChlbGVtLCBpKSA9PgogIGNoYW5nZUlucHV0ID0gZSA9PgogIHAgPT4KICBhcmcgPT4KQ29uc3VtZXIgPSBwcm9wcyA9PgooKQogIGxvZyh0eXBlLCB0aW1lLCBtc2cpCkxvZ2dlciA9IHByb3BzID0+CigpCihbdHlwZSwgZCwgdCwgbV0sIGkpID0+CkR1bXBlciA9IHByb3BzID0+CiAgdmFsdWUgPT4KKFtrLCB2XSwgaSkgPT4KQ29tbWFuZGVyID0gKHsgb25Db21tYW5kLCAuLi5wcm9wcyB9KSA9PgogIGhhbmRsZXIgPSBlID0+CiAgdG9nZ2xlID0gdHJrbCA9PgpMYXllciA9ICh7IHRpdGxlLCBuYW1lLCBsYWJlbCwgaSwgY29sb3IsIGVsZW1lbnQsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4KICBzZXRWaXNpYmxlID0gdmFsdWUgPT4KICBlID0+CiAgZSA9PgogIGwgPT4KICBsID0+CiAgKGl0ZW0sIHZhbHVlKSA9PgogIGl0ZW0gPT4KICBsID0+CihbbCwgc3RhdGVdKSA9PgogIGUgPT4KICBvbk1vdXNlTW92ZTogZSA9PgogIG9uTW91c2VVcDogZSA9PgpEb2N1bWVudExpc3QKICBjb25zdHJ1Y3RvcigpCihwdXNoLCBzdG9wKSA9PgogIGFkZChuYW1lLCBjb21wb25lbnQpCiAgYWRkRW50cnkoW25hbWUsIGNvbXBvbmVudF0pCiAgcmVtb3ZlKG5hbWUpCiAgdXBkYXRlKCkKICBmbjogZSA9PgogIGZuOiAoKSA9PgogIG9wZW4gPT4KICBwcm9wcyA9PgogIHByb3BzID0+CiAgZSA9PgogIGkgPT4KICBpID0+Cih7IGNvb3JkIH0pID0+CiAgc2lkZSA9PgogIGNyZWF0ZTogKHByb2plY3QsIHByb3BzID0ge30pID0+CiAgYSA9PgogIGUgPT4KICBlID0+CiAgbmFtZSA9PgogIGUgPT4KICBtYWtlTGF5ZXJOYW1lKG5hbWUsIHNpZGUpCiAgZm46ICgpID0+CiAgb25DaGFuZ2UoZXZlbnQpCiAgcHJvcHMgPT4KICBwcm9wcyA9PgogIHByb3BzID0+CihlLCBwLCBpKSA9PgogIG1ha2VTb3J0Q29tcGFyZToga2V5ID0+CiAgZnVuY3Rpb24oYSwgYikKICBmdW5jdGlvbihhLCBiKQogIG9uQ29tbWFuZDogY21kU3RyID0+CiAgaGFuZGxlQ2hhbmdlOiBlID0+CiAgZXZlbnQgPT4KICBlID0+Ck1vdmVFdmVudChldmVudCwgcHJldkV2ZW50KQpXYWxrVXAoZSkKICBlID0+CiAgeiA9PgogIHAgPT4KICBlID0+CiAgZSA9PgogIGUgPT4KICB2ID0+CiAgbCA9PgogIGUgPT4KICAoKSA9PgogIChlLCBkZXB0aCkgPT4KICBjbGFzc2VzID0+CiAgZSA9PgogIGUgPT4KICAoYSwgYikgPT4KICAoYSwgYikgPT4KTm9kZQogIGUgPT4KICAocCwgZCwgc2V0LCBzdG9wKSA9PgogIGUgPT4KICBlID0+ClRvdWNoRXZlbnQoZXZlbnQpCiAgZSA9PgoocCwgaSkgPT4KKGEsIGIpID0+CiAgc2l6ZSA9PgogIGJvcmRlciA9PgogIHIgPT4KICBtb2QobiwgbSkKKCkgPT4KICAocG9zLCBsYXN0LCBmaXJzdCkgPT4KICBjYW5jZWwoKQogIC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZSkKICAucHJvY2Vzc0V2ZW50cyA9IGZ1bmN0aW9uIGV2ZW50TG9vcCgpCiAgZXZlbnQgPT4KICBlID0+CiAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6ICgpID0+CiAgcHJpbnQ6IHR4dCA9PgAAAAAAAAAAAxYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					169,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAADFgAAKCkgPT4KICByZXMgPT4KKCkgPT4KICByID0+CiAgciA9PgogIGVudHJpZXMoKQpHZXRQcm9qZWN0ID0gYXJnID0+CiAgcCA9PgogICgpID0+CiAgdmFsdWUgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICB1c2VTbG90ID0gKGFyciwgaSkgPT4KKCkgPT4KICB2ID0+CiAgdHJrbEdldFNldCA9IChnZXQsIHNldCkgPT4gdmFsdWUgPT4KTW91c2VFdmVudHMgPSBoID0+CigpID0+CihwYXJlbnQsIGRlbGVnYXRlKSA9PgogIGFwcGVuZF90byhlbGVtLCBwKQpEcmF3U1ZHKC4uLmFyZ3MpCiAgYXBwZW5kX3RvKGVsZW0sIHApCiAgYWRqdXN0Vmlld0JveChlKQogIGNhbGNWaWV3Qm94KGJveCkKICBzZXRWaWV3Qm94KHN2Z093bmVyLCBib3gpCkVsZW1lbnRUb1hNTCA9IChlLCBwcmVkaWNhdGUpID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgcmVhZEZpbGUoZmlsZW5hbWUpCiAgd3JpdGVGaWxlKGZpbGVuYW1lLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKQogIGV4aXN0cyhmaWxlbmFtZSkKICByZWFscGF0aChmaWxlbmFtZSkKTG9hZEZpbGUoZmlsZSkKU2F2ZUZpbGUoZmlsZW5hbWUsIGRhdGEsIGNvbnRlbnRUeXBlKQogIHMgPT4KKCkgPT4KU2F2ZVNWRyhmaWxlbmFtZSwgbGF5ZXJzID0gWzEsIDE2LCAyMCwgMjEsIDIyLCAyMywgMjUsIDI3LCA0NywgNDgsIDUxXSkKICBwcmVkaWNhdGUgPSBlbGVtZW50ID0+CkxvYWRTVkcoZmlsZW5hbWUpCkxvYWRJbWFnZShmaWxlbmFtZSkKKCkgPT4KUmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCkKTW9kaWZ5Q29sb3JzID0gZm4gPT4gZSA9PgpGaW5kTGF5ZXIgPSBuYW1lX29yX2lkID0+CiAgbiA9PgogIGwgPT4KKGlkID0gJyNnZW9tJykgPT4KKHByb3BzID0ge30pID0+CiAgbWF4WkluZGV4ID0gKCkgPT4KICBlID0+CiAgeiA9PgogIHogPT4KKCkgPT4KICByYW5kb21Db2xvciA9ICgpID0+CkRyYXdBcmMoc3RhcnQsIGVuZCwgYW5nbGUpCiAgcHJvcHMgPT4KICBwID0+CiAgYSA9PgogIG0gPT4KICBoZXggPT4KICBwID0+CiAgcCA9PgogIHAgPT4KKHsgeCwgeSB9KSA9PgogIGEgPT4KKHsgeCwgeSB9LCBpKSA9PgogIGUgPT4KKGwsIGkpID0+CihwLCBpKSA9PgoocCwgaSkgPT4KICBhZGQgPSAobGV2ZWwsIGl0ZW0pID0+ClJlY3Vyc2VCaW5hcnlOb2RlKG5vZGUsIHBhcmVudCA9IG51bGwsIGRlcHRoID0gMCkKKG5vZGVzLCBpLCBsZXZlbCkgPT4KICBmeCA9IGogPT4KKG5vZGUsIGopID0+CiAgaXRlbSA9PgpEcmF3Tm9kZSh4LCB5LCBub2RlKQpEcmF3RWRnZShpdGVtLCBwYXJlbnQpCkdldFBhdGhzKHF1ZXJ5LCBwYXJlbnQgPSBwcm9qZWN0LnN2Z0VsZW1lbnQpCihhLCBlKSA9PgpQYXRoVG9Qb2x5bGluZXMocGF0aCwgc3RlcCA9IDAuMDEpCiAgcCA9PgogIHBvbHkgPT4KICBwb2x5ID0+CiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aFRvUG9seWxpbmUocGF0aCwgc3RlcCA9IDAuMDEpCiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aHNUb1BvbHlsaW5lcyhwYXRocywgc3RlcCA9IDAuMDEpCiAgcGF0aCA9PgpPdXRzZXRQYXRoKHBhdGgsIG9mZnNldCwgbWl0ZXJMaW1pdCA9IDIsIGFyY1RvbGVyYW5jZSA9IDAuMDEpCiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgpPdXRzZXRQYXRocyhwYXRocywgb2Zmc2V0LCBtaXRlckxpbWl0ID0gMiwgYXJjVG9sZXJhbmNlID0gMC4yNSkKICBwYXRoID0+CihhLCBwKSA9PgpDbGlwUGF0aChwYXRoLCBjbGlwLCBtb2RlID0gQ2xpcHBlckxpYi5DbGlwVHlwZS5jdFVuaW9uKQogIGFkZCA9IChwLCBjbGlwID0gZmFsc2UpID0+CiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgogIHNhdmVJdGVtU3RhdGVzKGl0ZW1MaXN0LCBnZXQgPSBpdGVtID0+IGlzLgooaXRlbS4KKSkKICBpdGVtID0+CiAgcmVzdG9yZUl0ZW1TdGF0ZXMoaXRlbVN0YXRlcywgLypwcmV0dGllci1pZ25vcmUgKi8gc2V0ID0gKGl0ZW0sIHZhbHVlKSA9PiBpdGVtLgoodmFsdWUgPyAneWVzJyA6ICdubycpKQpFYWdsZU1hcHMocHJvamVjdCkKICB0cmFuc2Zvcm1QYXRoID0gcCA9PgogIGUgPT4KICBkb20yZWFnbGUgPSBub2RlID0+CiAgZWFnbGUyZG9tID0gZWxlbSA9PgogIHBhdGgyZG9tID0gcCA9Pgooa2V5LCB2YWx1ZSkgPT4KKGtleSwgdmFsdWUpID0+ClBhY2thZ2VOYW1lcyhkb2MgPSBwcm9qZWN0LmRvYykKICBlID0+CihbZSwgYl0pID0+CihbZSwgdywgaCwgbSwgdl0pID0+Cih7IGluZGV4LCAuLi5tYXRjaCB9KSA9PgogICh7IHMsIHYsIGluZGV4ZXMgfSwgbWF0Y2gsIGkpID0+CihbdG9rZW4sIGluZGV4XSkgPT4KKFt0b2tlbiwgaW5kZXhdKSA9PgpOZXh0RG9jdW1lbnQobiA9IDEpCiAgKGlkeCwgaSkgPT4KICAoaWR4LCBpKSA9PgpMb2FkRG9jdW1lbnQocHJvamVjdCwgcGFyZW50RWxlbSkKICBlcnIgPT4KKCkgPT4KICBlbnQgPT4KKCkgPT4KICBlbnQgPT4KICByZW5hbWVQYWNrYWdlcygpCiAgYSA9PgogIHZhbHVlID0+CiAgbGF5ZXIgPT4KKCkgPT4KICBsYXllciA9PgooKSA9PgogIGZuID0gZnVuY3Rpb24odikKKCkgPT4KICAubWFrZUdyb3VwID0gZnVuY3Rpb24oeyB0cmFuc2Zvcm0sIC4uLnByb3BzIH0gPSB7fSkKICBpZCA9PgooKSA9PgogIHh4KCkKICAoKSA9PgoodHJhbnNmb3JtKQogICh0YWcsIGF0dHIsIGNoaWxkcmVuID0gW10pID0+CiAgdmFsdWUgPT4KKCkgPT4KUmVjdApDaG9vc2VEb2N1bWVudChwcm9qZWN0LCBpKQpHZW5lcmF0ZVZvcm9ub2kgPSAoKSA9PgpSZWN0CiAgcCA9PgogIGUgPT4KKHsgbFNpdGUsIHJTaXRlLCAuLi5lZGdlIH0pID0+CiAgZSA9PgooeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4KICBlID0+Cih7IHZhLCB2YiwgLi4uZWRnZSB9KSA9PgogIHYgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICBsID0+CiAgdCA9PgogIGwgPT4KICB0ID0+CiAgcCA9PgogIChhY2MsIHsgc2l0ZSwgaGFsZmVkZ2VzIH0pID0+Cih7IHNpdGUgfSkgPT4KUGFja2FnZUNoaWxkcmVuKGVsZW1lbnQsIGxheWVyKQooYywgaSkgPT4KKFtpLCBwXSkgPT4KKFtpLCBlXSkgPT4KRWxlbWVudENoaWxkcmVuKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCihbbmFtZSwgZWxlbWVudF0pID0+CkVsZW1lbnRHZW9tZXRyaWVzKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCiAgZW50ID0+CihbbmFtZSwgY2hpbGRyZW5dKSA9PgooW2ksIGVdKSA9PgooW25hbWUsIGxpbmVzXSkgPT4KICBwdHMgPT4KKFtuYW1lLCBsaW5lcywgcG9seWdvbnNdKSA9PgpOZXdQYXRoKHBhdGgpCk1ha2VGaXRBY3Rpb24gPSBpbmRleCA9PgogIGV2ZW50ID0+Clpvb21GYWN0b3IodmFsID0gY29uZmlnLgopClpvb21Mb2coZmFjdG9yKQpBZGp1c3Rab29tKGwgPSBjb25maWcuCikKQ3JlYXRlR3JibFNvY2tldCA9IChwb3J0ID0gJ3RudDEnKSA9PgpIYW5kbGVNZXNzYWdlKG1zZykKICBwb2ludFN0ciA9PgogIHNvY2tldEZuID0gKCkgPT4KICAuc2VuZCA9ICguLi5hcmdzKSA9PgpBdXRob3JpemF0aW9uRGlhbG9nID0gKHsgb25BdXRoLCAuLi5wcm9wcyB9KSA9PgogIG9uU3VibWl0OiAoKSA9PgogIG9uSW5wdXQ6IGUgPT4KICBvbklucHV0OiBlID0+CiAgb25DbGljazogZSA9PgogIGFyZyA9PgogIC5vbmxvYWQgPSAoKSA9PgogIHJlc3BvbnNlID0+CiAgZSA9PgogIHYgPT4KVGVzdEFyYzogKCkgPT4KKCkgPT4KKHB1c2gsIHN0b3ApID0+CigpID0+CihwdXNoLCBzdG9wKSA9PgogIHRhcmdldCA9PgogIChrZXksIG1vZGlmaWVycyA9IDApID0+CiAgLmZvY3VzU2VhcmNoID0gc3RhdGUgPT4KICBjaGlsZHJlbjogKCkgPT4KICBnZW9tZXRyaWVzOiAoKSA9PgogIHZhbHVlID0+CigpID0+CiAgdGVzdENvbXBvbmVudCA9IHByb3BzID0+CiAgcmVzcCA9PgogIGpzb24gPT4KRmlsZShvYmosIGkpCkZpbGUKRmlsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpCihhLCBiKSA9Pgoob2JqLCBpKSA9PgooYWNjLCBmaWxlKSA9PgogIGkgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB1cGRhdGVJZkNoYW5nZWQgPSAodHJrbCwgbmV3VmFsdWUsIGNhbGxiYWNrKSA9PgogIChlbGVtLCBpKSA9PgogIGNoYW5nZUlucHV0ID0gZSA9PgogIHAgPT4KICBhcmcgPT4KQ29uc3VtZXIgPSBwcm9wcyA9PgooKQogIGxvZyh0eXBlLCB0aW1lLCBtc2cpCkxvZ2dlciA9IHByb3BzID0+CigpCihbdHlwZSwgZCwgdCwgbV0sIGkpID0+CkR1bXBlciA9IHByb3BzID0+CiAgdmFsdWUgPT4KKFtrLCB2XSwgaSkgPT4KQ29tbWFuZGVyID0gKHsgb25Db21tYW5kLCAuLi5wcm9wcyB9KSA9PgogIGhhbmRsZXIgPSBlID0+CiAgdG9nZ2xlID0gdHJrbCA9PgpMYXllciA9ICh7IHRpdGxlLCBuYW1lLCBsYWJlbCwgaSwgY29sb3IsIGVsZW1lbnQsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4KICBzZXRWaXNpYmxlID0gdmFsdWUgPT4KICBlID0+CiAgZSA9PgogIGwgPT4KICBsID0+CiAgKGl0ZW0sIHZhbHVlKSA9PgogIGl0ZW0gPT4KICBsID0+CihbbCwgc3RhdGVdKSA9PgogIGUgPT4KICBvbk1vdXNlTW92ZTogZSA9PgogIG9uTW91c2VVcDogZSA9PgpEb2N1bWVudExpc3QKICBjb25zdHJ1Y3RvcigpCihwdXNoLCBzdG9wKSA9PgogIGFkZChuYW1lLCBjb21wb25lbnQpCiAgYWRkRW50cnkoW25hbWUsIGNvbXBvbmVudF0pCiAgcmVtb3ZlKG5hbWUpCiAgdXBkYXRlKCkKICBmbjogZSA9PgogIGZuOiAoKSA9PgogIG9wZW4gPT4KICBwcm9wcyA9PgogIHByb3BzID0+CiAgZSA9PgogIGkgPT4KICBpID0+Cih7IGNvb3JkIH0pID0+CiAgc2lkZSA9PgogIGNyZWF0ZTogKHByb2plY3QsIHByb3BzID0ge30pID0+CiAgYSA9PgogIGUgPT4KICBlID0+CiAgbmFtZSA9PgogIGUgPT4KICBtYWtlTGF5ZXJOYW1lKG5hbWUsIHNpZGUpCiAgZm46ICgpID0+CiAgb25DaGFuZ2UoZXZlbnQpCiAgcHJvcHMgPT4KICBwcm9wcyA9PgogIHByb3BzID0+CihlLCBwLCBpKSA9PgogIG1ha2VTb3J0Q29tcGFyZToga2V5ID0+CiAgZnVuY3Rpb24oYSwgYikKICBmdW5jdGlvbihhLCBiKQogIG9uQ29tbWFuZDogY21kU3RyID0+CiAgaGFuZGxlQ2hhbmdlOiBlID0+CiAgZXZlbnQgPT4KICBlID0+Ck1vdmVFdmVudChldmVudCwgcHJldkV2ZW50KQpXYWxrVXAoZSkKICBlID0+CiAgeiA9PgogIHAgPT4KICBlID0+CiAgZSA9PgogIGUgPT4KICB2ID0+CiAgbCA9PgogIGUgPT4KICAoKSA9PgogIChlLCBkZXB0aCkgPT4KICBjbGFzc2VzID0+CiAgZSA9PgogIGUgPT4KICAoYSwgYikgPT4KICAoYSwgYikgPT4KTm9kZQogIGUgPT4KICAocCwgZCwgc2V0LCBzdG9wKSA9PgogIGUgPT4KICBlID0+ClRvdWNoRXZlbnQoZXZlbnQpCiAgZSA9PgoocCwgaSkgPT4KKGEsIGIpID0+CiAgc2l6ZSA9PgogIGJvcmRlciA9PgogIHIgPT4KICBtb2QobiwgbSkKKCkgPT4KICAocG9zLCBsYXN0LCBmaXJzdCkgPT4KICBjYW5jZWwoKQogIC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZSkKICAucHJvY2Vzc0V2ZW50cyA9IGZ1bmN0aW9uIGV2ZW50TG9vcCgpCiAgZXZlbnQgPT4KICBlID0+CiAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6ICgpID0+CiAgcHJpbnQ6IHR4dCA9PgAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					170,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/main.js",
						"symkeys":
						[
							[
								9310,
								9315
							],
							[
								9497,
								9503
							],
							[
								9556,
								9561
							],
							[
								9614,
								9618
							],
							[
								9692,
								9696
							],
							[
								9718,
								9727
							],
							[
								10386,
								10405
							],
							[
								10504,
								10508
							],
							[
								10680,
								10687
							],
							[
								10718,
								10728
							],
							[
								10985,
								11009
							],
							[
								11050,
								11071
							],
							[
								11073,
								11078
							],
							[
								11086,
								11091
							],
							[
								11113,
								11148
							],
							[
								11262,
								11280
							],
							[
								11362,
								11367
							],
							[
								11554,
								11575
							],
							[
								11708,
								11726
							],
							[
								12405,
								12430
							],
							[
								12476,
								12494
							],
							[
								13471,
								13498
							],
							[
								13853,
								13878
							],
							[
								14217,
								14251
							],
							[
								14767,
								14799
							],
							[
								14974,
								14984
							],
							[
								15117,
								15127
							],
							[
								15246,
								15256
							],
							[
								15423,
								15447
							],
							[
								15506,
								15555
							],
							[
								15796,
								15818
							],
							[
								15825,
								15849
							],
							[
								15857,
								15886
							],
							[
								16693,
								16745
							],
							[
								17198,
								17202
							],
							[
								17229,
								17234
							],
							[
								17669,
								17755
							],
							[
								17953,
								17975
							],
							[
								18488,
								18520
							],
							[
								18848,
								18882
							],
							[
								18997,
								19002
							],
							[
								19027,
								19063
							],
							[
								19252,
								19277
							],
							[
								19468,
								19493
							],
							[
								19548,
								19552
							],
							[
								19607,
								19611
							],
							[
								20053,
								20070
							],
							[
								20259,
								20274
							],
							[
								20397,
								20414
							],
							[
								20466,
								20470
							],
							[
								20515,
								20519
							],
							[
								20550,
								20554
							],
							[
								20592,
								20597
							],
							[
								20684,
								20703
							],
							[
								20876,
								20911
							],
							[
								20949,
								20957
							],
							[
								21026,
								21030
							],
							[
								21593,
								21597
							],
							[
								21656,
								21660
							],
							[
								22229,
								22235
							],
							[
								22410,
								22414
							],
							[
								22435,
								22439
							],
							[
								22474,
								22478
							],
							[
								22738,
								22751
							],
							[
								22874,
								22878
							],
							[
								23072,
								23088
							],
							[
								23354,
								23359
							],
							[
								23472,
								23481
							],
							[
								23553,
								23562
							],
							[
								23639,
								23648
							],
							[
								24288,
								24310
							],
							[
								24487,
								24547
							],
							[
								24796,
								24816
							],
							[
								24827,
								24836
							],
							[
								24891,
								24903
							],
							[
								24948,
								24955
							],
							[
								25041,
								25072
							],
							[
								25394,
								25427
							],
							[
								26466,
								26519
							],
							[
								26569,
								26578
							],
							[
								26653,
								26696
							],
							[
								26775,
								26779
							],
							[
								26908,
								26915
							],
							[
								26942,
								26949
							],
							[
								27027,
								27048
							],
							[
								27303,
								27345
							],
							[
								27468,
								27489
							],
							[
								27724,
								27769
							],
							[
								27914,
								27921
							],
							[
								27963,
								28033
							],
							[
								28470,
								28495
							],
							[
								28518,
								28522
							],
							[
								28542,
								28555
							],
							[
								28671,
								28743
							],
							[
								28962,
								28969
							],
							[
								29052,
								29061
							],
							[
								29493,
								29558
							],
							[
								29645,
								29671
							],
							[
								29884,
								29909
							],
							[
								29932,
								29936
							],
							[
								29956,
								29969
							],
							[
								30023,
								30074
							],
							[
								30076,
								30082
							],
							[
								30091,
								30093
							],
							[
								30118,
								30125
							],
							[
								30149,
								30238
							],
							[
								30245,
								30268
							],
							[
								30331,
								30358
							],
							[
								30367,
								30387
							],
							[
								30522,
								30526
							],
							[
								30696,
								30715
							],
							[
								30799,
								30818
							],
							[
								30911,
								30926
							],
							[
								31786,
								31801
							],
							[
								31887,
								31902
							],
							[
								32559,
								32600
							],
							[
								32800,
								32804
							],
							[
								32834,
								32845
							],
							[
								32928,
								32948
							],
							[
								33153,
								33177
							],
							[
								33235,
								33275
							],
							[
								33647,
								33666
							],
							[
								33717,
								33736
							],
							[
								34598,
								34626
							],
							[
								34826,
								34838
							],
							[
								34869,
								34881
							],
							[
								35392,
								35440
							],
							[
								35665,
								35671
							],
							[
								35816,
								35821
							],
							[
								35847,
								35854
							],
							[
								35912,
								35917
							],
							[
								35945,
								35952
							],
							[
								36575,
								36591
							],
							[
								36714,
								36718
							],
							[
								37226,
								37234
							],
							[
								37677,
								37685
							],
							[
								37738,
								37743
							],
							[
								37784,
								37792
							],
							[
								37932,
								37937
							],
							[
								38024,
								38040
							],
							[
								39711,
								39716
							],
							[
								40349,
								40400
							],
							[
								40803,
								40808
							],
							[
								40827,
								40832
							],
							[
								41140,
								41157
							],
							[
								41317,
								41323
							],
							[
								41452,
								41472
							],
							[
								41549,
								41579
							],
							[
								41755,
								41763
							],
							[
								41862,
								41873
							],
							[
								41989,
								41993
							],
							[
								42720,
								42761
							],
							[
								43384,
								43407
							],
							[
								43996,
								44000
							],
							[
								44144,
								44148
							],
							[
								44660,
								44664
							],
							[
								44679,
								44709
							],
							[
								44757,
								44761
							],
							[
								44775,
								44805
							],
							[
								44859,
								44863
							],
							[
								44882,
								44906
							],
							[
								44971,
								44975
							],
							[
								45015,
								45039
							],
							[
								45157,
								45161
							],
							[
								45187,
								45191
							],
							[
								45261,
								45265
							],
							[
								45291,
								45295
							],
							[
								45388,
								45392
							],
							[
								45750,
								45785
							],
							[
								45896,
								45909
							],
							[
								46350,
								46390
							],
							[
								46436,
								46445
							],
							[
								46461,
								46472
							],
							[
								46564,
								46575
							],
							[
								46621,
								46677
							],
							[
								46684,
								46690
							],
							[
								46772,
								46792
							],
							[
								46839,
								46897
							],
							[
								46904,
								46910
							],
							[
								46953,
								46960
							],
							[
								46977,
								46998
							],
							[
								47060,
								47071
							],
							[
								47301,
								47319
							],
							[
								47359,
								47365
							],
							[
								47398,
								47426
							],
							[
								47464,
								47486
							],
							[
								47571,
								47595
							],
							[
								47596,
								47610
							],
							[
								48730,
								48763
							],
							[
								48772,
								48773
							],
							[
								48825,
								48849
							],
							[
								48890,
								48921
							],
							[
								48930,
								48931
							],
							[
								49175,
								49218
							],
							[
								49532,
								49559
							],
							[
								49852,
								49863
							],
							[
								50069,
								50085
							],
							[
								50399,
								50419
							],
							[
								51304,
								51351
							],
							[
								51734,
								51749
							],
							[
								51966,
								51979
							],
							[
								52256,
								52269
							],
							[
								52475,
								52488
							],
							[
								52707,
								52713
							],
							[
								52763,
								52784
							],
							[
								56768,
								56779
							],
							[
								57615,
								57619
							],
							[
								58033,
								58038
							],
							[
								58187,
								58201
							],
							[
								58219,
								58224
							],
							[
								58337,
								58358
							],
							[
								58416,
								58421
							],
							[
								58529,
								58550
							],
							[
								58775,
								58788
							],
							[
								58789,
								58816
							],
							[
								58933,
								58956
							],
							[
								59238,
								59253
							],
							[
								59278,
								59295
							],
							[
								59362,
								59370
							],
							[
								59443,
								59448
							],
							[
								59554,
								59578
							],
							[
								60339,
								60346
							],
							[
								60376,
								60383
							],
							[
								60705,
								60732
							],
							[
								60828,
								60832
							],
							[
								61197,
								61233
							],
							[
								61366,
								61375
							],
							[
								61410,
								61421
							],
							[
								61473,
								61487
							],
							[
								62067,
								62071
							],
							[
								62746,
								62754
							],
							[
								62870,
								62878
							],
							[
								62998,
								63006
							],
							[
								63121,
								63129
							],
							[
								63186,
								63194
							],
							[
								63666,
								63674
							],
							[
								63859,
								63906
							],
							[
								64052,
								64065
							],
							[
								64228,
								64246
							],
							[
								64414,
								64418
							],
							[
								64490,
								64497
							],
							[
								64745,
								64764
							],
							[
								64796,
								64814
							],
							[
								65340,
								65360
							],
							[
								65610,
								65627
							],
							[
								65835,
								65853
							],
							[
								66130,
								66153
							],
							[
								66604,
								66621
							],
							[
								66713,
								66721
							],
							[
								66940,
								66954
							],
							[
								67092,
								67132
							],
							[
								67197,
								67211
							],
							[
								67786,
								67802
							],
							[
								67840,
								67915
							],
							[
								68150,
								68171
							],
							[
								68275,
								68279
							],
							[
								68758,
								68772
							],
							[
								69062,
								69066
							],
							[
								69133,
								69137
							],
							[
								69414,
								69431
							],
							[
								69599,
								69607
							],
							[
								69800,
								69804
							],
							[
								69900,
								69915
							],
							[
								70161,
								70165
							],
							[
								70372,
								70389
							],
							[
								70481,
								70496
							],
							[
								71289,
								71301
							],
							[
								71308,
								71321
							],
							[
								71359,
								71374
							],
							[
								71478,
								71498
							],
							[
								71678,
								71705
							],
							[
								71759,
								71771
							],
							[
								71889,
								71897
							],
							[
								72346,
								72354
							],
							[
								73176,
								73185
							],
							[
								73420,
								73427
							],
							[
								73526,
								73546
							],
							[
								73733,
								73753
							],
							[
								74114,
								74124
							],
							[
								74927,
								74931
							],
							[
								75006,
								75010
							],
							[
								75024,
								75038
							],
							[
								75295,
								75302
							],
							[
								77645,
								77677
							],
							[
								78074,
								78078
							],
							[
								78284,
								78288
							],
							[
								78356,
								78360
							],
							[
								78444,
								78451
							],
							[
								78530,
								78534
							],
							[
								79593,
								79639
							],
							[
								80069,
								80078
							],
							[
								81180,
								81195
							],
							[
								81409,
								81425
							],
							[
								81586,
								81602
							],
							[
								81777,
								81793
							],
							[
								82816,
								82834
							],
							[
								83032,
								83055
							],
							[
								83097,
								83112
							],
							[
								83468,
								83483
							],
							[
								83896,
								83916
							],
							[
								84369,
								84387
							],
							[
								85103,
								85112
							],
							[
								85155,
								85159
							],
							[
								85371,
								85409
							],
							[
								85584,
								85607
							],
							[
								85741,
								85746
							],
							[
								85785,
								85795
							],
							[
								85954,
								85958
							],
							[
								86095,
								86099
							],
							[
								86138,
								86143
							],
							[
								86548,
								86552
							],
							[
								86586,
								86600
							],
							[
								86604,
								86618
							],
							[
								86625,
								86629
							],
							[
								86650,
								86665
							],
							[
								86696,
								86710
							],
							[
								86817,
								86828
							],
							[
								86873,
								86878
							],
							[
								86933,
								86938
							],
							[
								87388,
								87398
							],
							[
								87489,
								87499
							],
							[
								87512,
								87516
							],
							[
								87690,
								87694
							],
							[
								87855,
								87876
							],
							[
								88946,
								88950
							],
							[
								89057,
								89061
							],
							[
								89350,
								89378
							],
							[
								89829,
								89833
							],
							[
								90289,
								90298
							],
							[
								90382,
								90391
							],
							[
								90495,
								90503
							],
							[
								91009,
								91018
							],
							[
								91167,
								91171
							],
							[
								91236,
								91262
							],
							[
								91902,
								91907
							],
							[
								92182,
								92204
							],
							[
								93210,
								93231
							],
							[
								93436,
								93464
							],
							[
								93831,
								93874
							],
							[
								95199,
								95208
							],
							[
								95988,
								95992
							],
							[
								96727,
								96754
							],
							[
								96877,
								96890
							]
						],
						"symlist":
						[
							"() =>",
							"res =>",
							"() =>",
							"r =>",
							"r =>",
							"entries()",
							"GetProject = arg =>",
							"p =>",
							" () =>",
							" value =>",
							"add = (arr, ...items) =>",
							"useSlot = (arr, i) =>",
							"() =>",
							" v =>",
							"trklGetSet = (get, set) => value =>",
							"MouseEvents = h =>",
							"() =>",
							"(parent, delegate) =>",
							"append_to(elem, p)",
							"function DrawSVG(...args)",
							"append_to(elem, p)",
							" function adjustViewBox(e)",
							"function calcViewBox(box)",
							"function setViewBox(svgOwner, box)",
							"ElementToXML = (e, predicate) =>",
							" (v, k) =>",
							" (v, k) =>",
							" (v, k) =>",
							"async readFile(filename)",
							"async writeFile(filename, data, overwrite = true)",
							"async exists(filename)",
							"async realpath(filename)",
							"async function LoadFile(file)",
							"async function SaveFile(filename, data, contentType)",
							"s =>",
							"() =>",
							"async function SaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])",
							"predicate = element =>",
							"async function LoadSVG(filename)",
							"async function LoadImage(filename)",
							"() =>",
							" function RenderComponent(component)",
							"ModifyColors = fn => e =>",
							"FindLayer = name_or_id =>",
							"n =>",
							"l =>",
							"(id = '#geom') =>",
							"(props = {}) =>",
							"maxZIndex = () =>",
							"e =>",
							"z =>",
							"z =>",
							"() =>",
							"randomColor = () =>",
							"function DrawArc(start, end, angle)",
							"props =>",
							"p =>",
							"a =>",
							"m =>",
							"hex =>",
							"p =>",
							"p =>",
							"p =>",
							"({ x, y }) =>",
							"a =>",
							"({ x, y }, i) =>",
							" e =>",
							"(l, i) =>",
							"(p, i) =>",
							"(p, i) =>",
							"add = (level, item) =>",
							" function RecurseBinaryNode(node, parent = null, depth = 0)",
							"(nodes, i, level) =>",
							"fx = j =>",
							"(node, j) =>",
							"item =>",
							" function DrawNode(x, y, node)",
							" function DrawEdge(item, parent)",
							"function GetPaths(query, parent = project.svgElement)",
							"(a, e) =>",
							"function PathToPolylines(path, step = 0.01)",
							"p =>",
							"poly =>",
							"poly =>",
							" (p, d, set, stop) =>",
							"function PathToPolyline(path, step = 0.01)",
							" (p, d, set, stop) =>",
							"function PathsToPolylines(paths, step = 0.01)",
							"path =>",
							"function OutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function OutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)",
							"path =>",
							"(a, p) =>",
							"function ClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)",
							"add = (p, clip = false) =>",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function saveItemStates(itemList, get = item => is.",
							"(item.",
							"))",
							"item =>",
							"function restoreItemStates(itemStates, /* prettier-ignore */ set = (item, value) => item.",
							"(value ? 'yes' : 'no'))",
							"function EagleMaps(project)",
							"transformPath = p =>",
							"e =>",
							"dom2eagle = node =>",
							"eagle2dom = elem =>",
							"path2dom = p =>",
							"(key, value) =>",
							"(key, value) =>",
							"function* PackageNames(doc = project.doc)",
							"e =>",
							"([e, b]) =>",
							"([e, w, h, m, v]) =>",
							"({ index, ...match }) =>",
							" ({ s, v, indexes }, match, i) =>",
							"([token, index]) =>",
							"([token, index]) =>",
							"function NextDocument(n = 1)",
							" (idx, i) =>",
							" (idx, i) =>",
							"async function LoadDocument(project, parentElem)",
							"err =>",
							"() =>",
							" ent =>",
							"() =>",
							" ent =>",
							"renamePackages()",
							"a =>",
							"value =>",
							"layer =>",
							"() =>",
							"layer =>",
							"() =>",
							"fn = function(v)",
							"() =>",
							".makeGroup = function({ transform, ...props } = {})",
							"id =>",
							"() =>",
							" function xx()",
							" () =>",
							"function (transform)",
							" (tag, attr, children = []) =>",
							"value =>",
							"async () =>",
							"Rect",
							"async function ChooseDocument(project, i)",
							"GenerateVoronoi = () =>",
							"Rect",
							"p =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ va, vb, ...edge }) =>",
							"v =>",
							"add = (arr, ...items) =>",
							"l =>",
							"t =>",
							"l =>",
							"t =>",
							"p =>",
							" (acc, { site, halfedges }) =>",
							"({ site }) =>",
							"function PackageChildren(element, layer)",
							"(c, i) =>",
							"([i, p]) =>",
							"([i, e]) =>",
							"function ElementChildren(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							"([name, element]) =>",
							"function ElementGeometries(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							" ent =>",
							"([name, children]) =>",
							"([i, e]) =>",
							"([name, lines]) =>",
							"pts =>",
							"([name, lines, polygons]) =>",
							"function NewPath(path)",
							"MakeFitAction = index =>",
							"async event =>",
							"function ZoomFactor(val = config.",
							")",
							"function ZoomLog(factor)",
							"function AdjustZoom(l = config.",
							")",
							"CreateGrblSocket = async (port = 'tnt1') =>",
							"function HandleMessage(msg)",
							"pointStr =>",
							"socketFn = () =>",
							".send = (...args) =>",
							"AuthorizationDialog = ({ onAuth, ...props }) =>",
							"onSubmit: () =>",
							"onInput: e =>",
							"onInput: e =>",
							"onClick: e =>",
							"arg =>",
							".onload = async () =>",
							"response =>",
							"e =>",
							" v =>",
							"TestArc: () =>",
							"() =>",
							"async (push, stop) =>",
							"() =>",
							"async (push, stop) =>",
							" target =>",
							" (key, modifiers = 0) =>",
							".focusSearch = state =>",
							"children: () =>",
							"geometries: () =>",
							"value =>",
							"() =>",
							"testComponent = props =>",
							"resp =>",
							"json =>",
							" function File(obj, i)",
							"File",
							"File.prototype.toString = function()",
							"(a, b) =>",
							"(obj, i) =>",
							"(acc, file) =>",
							"i =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"updateIfChanged = (trkl, newValue, callback) =>",
							" (elem, i) =>",
							"changeInput = e =>",
							"p =>",
							" arg =>",
							"Consumer = props =>",
							"async function* ()",
							"log(type, time, msg)",
							"Logger = props =>",
							"async function* ()",
							"([type, d, t, m], i) =>",
							"Dumper = props =>",
							"value =>",
							"([k, v], i) =>",
							"Commander = ({ onCommand, ...props }) =>",
							"handler = e =>",
							"toggle = trkl =>",
							"Layer = ({ title, name, label, i, color, element, className, ...props }) =>",
							"setVisible = value =>",
							"e =>",
							" e =>",
							"l =>",
							"l =>",
							" (item, value) =>",
							" item =>",
							"l =>",
							"([l, state]) =>",
							"e =>",
							"onMouseMove: e =>",
							"onMouseUp: e =>",
							"DocumentList",
							"constructor()",
							"(push, stop) =>",
							"add(name, component)",
							"addEntry([name, component])",
							"remove(name)",
							"update()",
							"fn: e =>",
							"fn: () =>",
							"open =>",
							" props =>",
							" props =>",
							"async e =>",
							"i =>",
							"i =>",
							"({ coord }) =>",
							"side =>",
							"create: (project, props = {}) =>",
							"a =>",
							"e =>",
							"e =>",
							"name =>",
							"e =>",
							" function makeLayerName(name, side)",
							"fn: () =>",
							"onChange(event)",
							" props =>",
							" props =>",
							" props =>",
							"async (e, p, i) =>",
							"makeSortCompare: key =>",
							" function(a, b)",
							" function(a, b)",
							"onCommand: cmdStr =>",
							"handleChange: e =>",
							" event =>",
							"e =>",
							" function MoveEvent(event, prevEvent)",
							" function* WalkUp(e)",
							" e =>",
							" z =>",
							"p =>",
							"e =>",
							" e =>",
							"e =>",
							" v =>",
							" l =>",
							"e =>",
							" () =>",
							" (e, depth) =>",
							" classes =>",
							" e =>",
							" e =>",
							" (a, b) =>",
							" (a, b) =>",
							"Node",
							"e =>",
							" (p, d, set, stop) =>",
							"e =>",
							"e =>",
							" function TouchEvent(event)",
							"e =>",
							"(p, i) =>",
							"(a, b) =>",
							" size =>",
							"border =>",
							"r =>",
							" function mod(n, m)",
							"() =>",
							" (pos, last, first) =>",
							" function cancel()",
							".oncontextmenu = function(e)",
							".processEvents = async function eventLoop()",
							" event =>",
							"e =>",
							"onRuntimeInitialized: () =>",
							"print: txt =>"
						]
					},
					"AQAAAAAAAAAAAAAAAxYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					171,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/main.js",
						"symkeys":
						[
							[
								9322,
								9327
							],
							[
								9509,
								9515
							],
							[
								9568,
								9573
							],
							[
								9626,
								9630
							],
							[
								9704,
								9708
							],
							[
								9730,
								9739
							],
							[
								10398,
								10417
							],
							[
								10516,
								10520
							],
							[
								10692,
								10699
							],
							[
								10730,
								10740
							],
							[
								10997,
								11021
							],
							[
								11062,
								11083
							],
							[
								11085,
								11090
							],
							[
								11098,
								11103
							],
							[
								11125,
								11160
							],
							[
								11274,
								11292
							],
							[
								11374,
								11379
							],
							[
								11566,
								11587
							],
							[
								11720,
								11738
							],
							[
								12417,
								12442
							],
							[
								12488,
								12506
							],
							[
								13483,
								13510
							],
							[
								13865,
								13890
							],
							[
								14229,
								14263
							],
							[
								14779,
								14811
							],
							[
								14986,
								14996
							],
							[
								15129,
								15139
							],
							[
								15258,
								15268
							],
							[
								15435,
								15459
							],
							[
								15518,
								15567
							],
							[
								15808,
								15830
							],
							[
								15837,
								15861
							],
							[
								15869,
								15898
							],
							[
								16705,
								16757
							],
							[
								17210,
								17214
							],
							[
								17241,
								17246
							],
							[
								17681,
								17767
							],
							[
								17965,
								17987
							],
							[
								18500,
								18532
							],
							[
								18860,
								18894
							],
							[
								19009,
								19014
							],
							[
								19039,
								19075
							],
							[
								19264,
								19289
							],
							[
								19480,
								19505
							],
							[
								19560,
								19564
							],
							[
								19619,
								19623
							],
							[
								20065,
								20082
							],
							[
								20271,
								20286
							],
							[
								20409,
								20426
							],
							[
								20478,
								20482
							],
							[
								20527,
								20531
							],
							[
								20562,
								20566
							],
							[
								20604,
								20609
							],
							[
								20696,
								20715
							],
							[
								20888,
								20923
							],
							[
								20961,
								20969
							],
							[
								21038,
								21042
							],
							[
								21605,
								21609
							],
							[
								21668,
								21672
							],
							[
								22241,
								22247
							],
							[
								22422,
								22426
							],
							[
								22447,
								22451
							],
							[
								22486,
								22490
							],
							[
								22750,
								22763
							],
							[
								22886,
								22890
							],
							[
								23084,
								23100
							],
							[
								23366,
								23371
							],
							[
								23484,
								23493
							],
							[
								23565,
								23574
							],
							[
								23651,
								23660
							],
							[
								24300,
								24322
							],
							[
								24499,
								24559
							],
							[
								24808,
								24828
							],
							[
								24839,
								24848
							],
							[
								24903,
								24915
							],
							[
								24960,
								24967
							],
							[
								25053,
								25084
							],
							[
								25406,
								25439
							],
							[
								26478,
								26531
							],
							[
								26581,
								26590
							],
							[
								26665,
								26708
							],
							[
								26787,
								26791
							],
							[
								26920,
								26927
							],
							[
								26954,
								26961
							],
							[
								27039,
								27060
							],
							[
								27315,
								27357
							],
							[
								27480,
								27501
							],
							[
								27736,
								27781
							],
							[
								27926,
								27933
							],
							[
								27975,
								28045
							],
							[
								28482,
								28507
							],
							[
								28530,
								28534
							],
							[
								28554,
								28567
							],
							[
								28683,
								28755
							],
							[
								28974,
								28981
							],
							[
								29064,
								29073
							],
							[
								29505,
								29570
							],
							[
								29657,
								29683
							],
							[
								29896,
								29921
							],
							[
								29944,
								29948
							],
							[
								29968,
								29981
							],
							[
								30035,
								30086
							],
							[
								30088,
								30094
							],
							[
								30103,
								30105
							],
							[
								30130,
								30137
							],
							[
								30161,
								30250
							],
							[
								30257,
								30280
							],
							[
								30343,
								30370
							],
							[
								30379,
								30399
							],
							[
								30534,
								30538
							],
							[
								30708,
								30727
							],
							[
								30811,
								30830
							],
							[
								30923,
								30938
							],
							[
								31798,
								31813
							],
							[
								31899,
								31914
							],
							[
								32571,
								32612
							],
							[
								32812,
								32816
							],
							[
								32846,
								32857
							],
							[
								32940,
								32960
							],
							[
								33165,
								33189
							],
							[
								33247,
								33287
							],
							[
								33659,
								33678
							],
							[
								33729,
								33748
							],
							[
								34610,
								34638
							],
							[
								34838,
								34850
							],
							[
								34881,
								34893
							],
							[
								35404,
								35452
							],
							[
								35677,
								35683
							],
							[
								35828,
								35833
							],
							[
								35859,
								35866
							],
							[
								35924,
								35929
							],
							[
								35957,
								35964
							],
							[
								36587,
								36603
							],
							[
								36726,
								36730
							],
							[
								37238,
								37246
							],
							[
								37689,
								37697
							],
							[
								37750,
								37755
							],
							[
								37796,
								37804
							],
							[
								37944,
								37949
							],
							[
								38036,
								38052
							],
							[
								39723,
								39728
							],
							[
								40361,
								40412
							],
							[
								40815,
								40820
							],
							[
								40839,
								40844
							],
							[
								41152,
								41169
							],
							[
								41329,
								41335
							],
							[
								41464,
								41484
							],
							[
								41561,
								41591
							],
							[
								41767,
								41775
							],
							[
								41874,
								41885
							],
							[
								42001,
								42005
							],
							[
								42732,
								42773
							],
							[
								43396,
								43419
							],
							[
								44008,
								44012
							],
							[
								44156,
								44160
							],
							[
								44672,
								44676
							],
							[
								44691,
								44721
							],
							[
								44769,
								44773
							],
							[
								44787,
								44817
							],
							[
								44871,
								44875
							],
							[
								44894,
								44918
							],
							[
								44983,
								44987
							],
							[
								45027,
								45051
							],
							[
								45169,
								45173
							],
							[
								45199,
								45203
							],
							[
								45273,
								45277
							],
							[
								45303,
								45307
							],
							[
								45400,
								45404
							],
							[
								45762,
								45797
							],
							[
								45908,
								45921
							],
							[
								46362,
								46402
							],
							[
								46448,
								46457
							],
							[
								46473,
								46484
							],
							[
								46576,
								46587
							],
							[
								46633,
								46689
							],
							[
								46696,
								46702
							],
							[
								46784,
								46804
							],
							[
								46851,
								46909
							],
							[
								46916,
								46922
							],
							[
								46965,
								46972
							],
							[
								46989,
								47010
							],
							[
								47072,
								47083
							],
							[
								47313,
								47331
							],
							[
								47371,
								47377
							],
							[
								47410,
								47438
							],
							[
								47476,
								47498
							],
							[
								47583,
								47607
							],
							[
								47608,
								47622
							],
							[
								48742,
								48775
							],
							[
								48784,
								48785
							],
							[
								48837,
								48861
							],
							[
								48902,
								48933
							],
							[
								48942,
								48943
							],
							[
								49187,
								49230
							],
							[
								49544,
								49571
							],
							[
								49864,
								49875
							],
							[
								50081,
								50097
							],
							[
								50411,
								50431
							],
							[
								51316,
								51363
							],
							[
								51746,
								51761
							],
							[
								51978,
								51991
							],
							[
								52268,
								52281
							],
							[
								52487,
								52500
							],
							[
								52719,
								52725
							],
							[
								52775,
								52796
							],
							[
								56780,
								56791
							],
							[
								57627,
								57631
							],
							[
								58045,
								58050
							],
							[
								58199,
								58213
							],
							[
								58231,
								58236
							],
							[
								58349,
								58370
							],
							[
								58428,
								58433
							],
							[
								58541,
								58562
							],
							[
								58787,
								58800
							],
							[
								58801,
								58828
							],
							[
								58945,
								58968
							],
							[
								59250,
								59265
							],
							[
								59290,
								59307
							],
							[
								59374,
								59382
							],
							[
								59455,
								59460
							],
							[
								59566,
								59590
							],
							[
								60351,
								60358
							],
							[
								60388,
								60395
							],
							[
								60717,
								60744
							],
							[
								60840,
								60844
							],
							[
								61209,
								61245
							],
							[
								61378,
								61387
							],
							[
								61422,
								61433
							],
							[
								61485,
								61499
							],
							[
								62079,
								62083
							],
							[
								62758,
								62766
							],
							[
								62882,
								62890
							],
							[
								63010,
								63018
							],
							[
								63133,
								63141
							],
							[
								63198,
								63206
							],
							[
								63678,
								63686
							],
							[
								63871,
								63918
							],
							[
								64064,
								64077
							],
							[
								64240,
								64258
							],
							[
								64426,
								64430
							],
							[
								64502,
								64509
							],
							[
								64757,
								64776
							],
							[
								64808,
								64826
							],
							[
								65352,
								65372
							],
							[
								65622,
								65639
							],
							[
								65847,
								65865
							],
							[
								66142,
								66165
							],
							[
								66616,
								66633
							],
							[
								66725,
								66733
							],
							[
								66952,
								66966
							],
							[
								67104,
								67144
							],
							[
								67209,
								67223
							],
							[
								67798,
								67814
							],
							[
								67852,
								67927
							],
							[
								68162,
								68183
							],
							[
								68287,
								68291
							],
							[
								68770,
								68784
							],
							[
								69074,
								69078
							],
							[
								69145,
								69149
							],
							[
								69426,
								69443
							],
							[
								69611,
								69619
							],
							[
								69812,
								69816
							],
							[
								69912,
								69927
							],
							[
								70173,
								70177
							],
							[
								70384,
								70401
							],
							[
								70493,
								70508
							],
							[
								71301,
								71313
							],
							[
								71320,
								71333
							],
							[
								71371,
								71386
							],
							[
								71490,
								71510
							],
							[
								71690,
								71717
							],
							[
								71771,
								71783
							],
							[
								71901,
								71909
							],
							[
								72358,
								72366
							],
							[
								73188,
								73197
							],
							[
								73432,
								73439
							],
							[
								73538,
								73558
							],
							[
								73745,
								73765
							],
							[
								74126,
								74136
							],
							[
								74939,
								74943
							],
							[
								75018,
								75022
							],
							[
								75036,
								75050
							],
							[
								75307,
								75314
							],
							[
								77657,
								77689
							],
							[
								78086,
								78090
							],
							[
								78296,
								78300
							],
							[
								78368,
								78372
							],
							[
								78456,
								78463
							],
							[
								78542,
								78546
							],
							[
								79605,
								79651
							],
							[
								80081,
								80090
							],
							[
								81192,
								81207
							],
							[
								81421,
								81437
							],
							[
								81598,
								81614
							],
							[
								81789,
								81805
							],
							[
								82828,
								82846
							],
							[
								83044,
								83067
							],
							[
								83109,
								83124
							],
							[
								83480,
								83495
							],
							[
								83908,
								83928
							],
							[
								84381,
								84399
							],
							[
								85115,
								85124
							],
							[
								85167,
								85171
							],
							[
								85383,
								85421
							],
							[
								85596,
								85619
							],
							[
								85753,
								85758
							],
							[
								85797,
								85807
							],
							[
								85966,
								85970
							],
							[
								86107,
								86111
							],
							[
								86150,
								86155
							],
							[
								86560,
								86564
							],
							[
								86598,
								86612
							],
							[
								86616,
								86630
							],
							[
								86637,
								86641
							],
							[
								86662,
								86677
							],
							[
								86708,
								86722
							],
							[
								86829,
								86840
							],
							[
								86885,
								86890
							],
							[
								86945,
								86950
							],
							[
								87400,
								87410
							],
							[
								87501,
								87511
							],
							[
								87524,
								87528
							],
							[
								87702,
								87706
							],
							[
								87867,
								87888
							],
							[
								88958,
								88962
							],
							[
								89069,
								89073
							],
							[
								89362,
								89390
							],
							[
								89841,
								89845
							],
							[
								90301,
								90310
							],
							[
								90394,
								90403
							],
							[
								90507,
								90515
							],
							[
								91021,
								91030
							],
							[
								91179,
								91183
							],
							[
								91248,
								91274
							],
							[
								91914,
								91919
							],
							[
								92194,
								92216
							],
							[
								93222,
								93243
							],
							[
								93448,
								93476
							],
							[
								93843,
								93886
							],
							[
								95211,
								95220
							],
							[
								96000,
								96004
							],
							[
								96739,
								96766
							],
							[
								96889,
								96902
							]
						],
						"symlist":
						[
							"() =>",
							"res =>",
							"() =>",
							"r =>",
							"r =>",
							"entries()",
							"GetProject = arg =>",
							"p =>",
							" () =>",
							" value =>",
							"add = (arr, ...items) =>",
							"useSlot = (arr, i) =>",
							"() =>",
							" v =>",
							"trklGetSet = (get, set) => value =>",
							"MouseEvents = h =>",
							"() =>",
							"(parent, delegate) =>",
							"append_to(elem, p)",
							"function DrawSVG(...args)",
							"append_to(elem, p)",
							" function adjustViewBox(e)",
							"function calcViewBox(box)",
							"function setViewBox(svgOwner, box)",
							"ElementToXML = (e, predicate) =>",
							" (v, k) =>",
							" (v, k) =>",
							" (v, k) =>",
							"async readFile(filename)",
							"async writeFile(filename, data, overwrite = true)",
							"async exists(filename)",
							"async realpath(filename)",
							"async function LoadFile(file)",
							"async function SaveFile(filename, data, contentType)",
							"s =>",
							"() =>",
							"async function SaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])",
							"predicate = element =>",
							"async function LoadSVG(filename)",
							"async function LoadImage(filename)",
							"() =>",
							" function RenderComponent(component)",
							"ModifyColors = fn => e =>",
							"FindLayer = name_or_id =>",
							"n =>",
							"l =>",
							"(id = '#geom') =>",
							"(props = {}) =>",
							"maxZIndex = () =>",
							"e =>",
							"z =>",
							"z =>",
							"() =>",
							"randomColor = () =>",
							"function DrawArc(start, end, angle)",
							"props =>",
							"p =>",
							"a =>",
							"m =>",
							"hex =>",
							"p =>",
							"p =>",
							"p =>",
							"({ x, y }) =>",
							"a =>",
							"({ x, y }, i) =>",
							" e =>",
							"(l, i) =>",
							"(p, i) =>",
							"(p, i) =>",
							"add = (level, item) =>",
							" function RecurseBinaryNode(node, parent = null, depth = 0)",
							"(nodes, i, level) =>",
							"fx = j =>",
							"(node, j) =>",
							"item =>",
							" function DrawNode(x, y, node)",
							" function DrawEdge(item, parent)",
							"function GetPaths(query, parent = project.svgElement)",
							"(a, e) =>",
							"function PathToPolylines(path, step = 0.01)",
							"p =>",
							"poly =>",
							"poly =>",
							" (p, d, set, stop) =>",
							"function PathToPolyline(path, step = 0.01)",
							" (p, d, set, stop) =>",
							"function PathsToPolylines(paths, step = 0.01)",
							"path =>",
							"function OutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function OutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)",
							"path =>",
							"(a, p) =>",
							"function ClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)",
							"add = (p, clip = false) =>",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function saveItemStates(itemList, get = item => is.",
							"(item.",
							"))",
							"item =>",
							"function restoreItemStates(itemStates, /* prettier-ignore */ set = (item, value) => item.",
							"(value ? 'yes' : 'no'))",
							"function EagleMaps(project)",
							"transformPath = p =>",
							"e =>",
							"dom2eagle = node =>",
							"eagle2dom = elem =>",
							"path2dom = p =>",
							"(key, value) =>",
							"(key, value) =>",
							"function* PackageNames(doc = project.doc)",
							"e =>",
							"([e, b]) =>",
							"([e, w, h, m, v]) =>",
							"({ index, ...match }) =>",
							" ({ s, v, indexes }, match, i) =>",
							"([token, index]) =>",
							"([token, index]) =>",
							"function NextDocument(n = 1)",
							" (idx, i) =>",
							" (idx, i) =>",
							"async function LoadDocument(project, parentElem)",
							"err =>",
							"() =>",
							" ent =>",
							"() =>",
							" ent =>",
							"renamePackages()",
							"a =>",
							"value =>",
							"layer =>",
							"() =>",
							"layer =>",
							"() =>",
							"fn = function(v)",
							"() =>",
							".makeGroup = function({ transform, ...props } = {})",
							"id =>",
							"() =>",
							" function xx()",
							" () =>",
							"function (transform)",
							" (tag, attr, children = []) =>",
							"value =>",
							"async () =>",
							"Rect",
							"async function ChooseDocument(project, i)",
							"GenerateVoronoi = () =>",
							"Rect",
							"p =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ va, vb, ...edge }) =>",
							"v =>",
							"add = (arr, ...items) =>",
							"l =>",
							"t =>",
							"l =>",
							"t =>",
							"p =>",
							" (acc, { site, halfedges }) =>",
							"({ site }) =>",
							"function PackageChildren(element, layer)",
							"(c, i) =>",
							"([i, p]) =>",
							"([i, e]) =>",
							"function ElementChildren(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							"([name, element]) =>",
							"function ElementGeometries(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							" ent =>",
							"([name, children]) =>",
							"([i, e]) =>",
							"([name, lines]) =>",
							"pts =>",
							"([name, lines, polygons]) =>",
							"function NewPath(path)",
							"MakeFitAction = index =>",
							"async event =>",
							"function ZoomFactor(val = config.",
							")",
							"function ZoomLog(factor)",
							"function AdjustZoom(l = config.",
							")",
							"CreateGrblSocket = async (port = 'tnt1') =>",
							"function HandleMessage(msg)",
							"pointStr =>",
							"socketFn = () =>",
							".send = (...args) =>",
							"AuthorizationDialog = ({ onAuth, ...props }) =>",
							"onSubmit: () =>",
							"onInput: e =>",
							"onInput: e =>",
							"onClick: e =>",
							"arg =>",
							".onload = async () =>",
							"response =>",
							"e =>",
							" v =>",
							"TestArc: () =>",
							"() =>",
							"async (push, stop) =>",
							"() =>",
							"async (push, stop) =>",
							" target =>",
							" (key, modifiers = 0) =>",
							".focusSearch = state =>",
							"children: () =>",
							"geometries: () =>",
							"value =>",
							"() =>",
							"testComponent = props =>",
							"resp =>",
							"json =>",
							" function File(obj, i)",
							"File",
							"File.prototype.toString = function()",
							"(a, b) =>",
							"(obj, i) =>",
							"(acc, file) =>",
							"i =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"updateIfChanged = (trkl, newValue, callback) =>",
							" (elem, i) =>",
							"changeInput = e =>",
							"p =>",
							" arg =>",
							"Consumer = props =>",
							"async function* ()",
							"log(type, time, msg)",
							"Logger = props =>",
							"async function* ()",
							"([type, d, t, m], i) =>",
							"Dumper = props =>",
							"value =>",
							"([k, v], i) =>",
							"Commander = ({ onCommand, ...props }) =>",
							"handler = e =>",
							"toggle = trkl =>",
							"Layer = ({ title, name, label, i, color, element, className, ...props }) =>",
							"setVisible = value =>",
							"e =>",
							" e =>",
							"l =>",
							"l =>",
							" (item, value) =>",
							" item =>",
							"l =>",
							"([l, state]) =>",
							"e =>",
							"onMouseMove: e =>",
							"onMouseUp: e =>",
							"DocumentList",
							"constructor()",
							"(push, stop) =>",
							"add(name, component)",
							"addEntry([name, component])",
							"remove(name)",
							"update()",
							"fn: e =>",
							"fn: () =>",
							"open =>",
							" props =>",
							" props =>",
							"async e =>",
							"i =>",
							"i =>",
							"({ coord }) =>",
							"side =>",
							"create: (project, props = {}) =>",
							"a =>",
							"e =>",
							"e =>",
							"name =>",
							"e =>",
							" function makeLayerName(name, side)",
							"fn: () =>",
							"onChange(event)",
							" props =>",
							" props =>",
							" props =>",
							"async (e, p, i) =>",
							"makeSortCompare: key =>",
							" function(a, b)",
							" function(a, b)",
							"onCommand: cmdStr =>",
							"handleChange: e =>",
							" event =>",
							"e =>",
							" function MoveEvent(event, prevEvent)",
							" function* WalkUp(e)",
							" e =>",
							" z =>",
							"p =>",
							"e =>",
							" e =>",
							"e =>",
							" v =>",
							" l =>",
							"e =>",
							" () =>",
							" (e, depth) =>",
							" classes =>",
							" e =>",
							" e =>",
							" (a, b) =>",
							" (a, b) =>",
							"Node",
							"e =>",
							" (p, d, set, stop) =>",
							"e =>",
							"e =>",
							" function TouchEvent(event)",
							"e =>",
							"(p, i) =>",
							"(a, b) =>",
							" size =>",
							"border =>",
							"r =>",
							" function mod(n, m)",
							"() =>",
							" (pos, last, first) =>",
							" function cancel()",
							".oncontextmenu = function(e)",
							".processEvents = async function eventLoop()",
							" event =>",
							"e =>",
							"onRuntimeInitialized: () =>",
							"print: txt =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAADFgAAKCkgPT4KICByZXMgPT4KKCkgPT4KICByID0+CiAgciA9PgogIGVudHJpZXMoKQpHZXRQcm9qZWN0ID0gYXJnID0+CiAgcCA9PgogICgpID0+CiAgdmFsdWUgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICB1c2VTbG90ID0gKGFyciwgaSkgPT4KKCkgPT4KICB2ID0+CiAgdHJrbEdldFNldCA9IChnZXQsIHNldCkgPT4gdmFsdWUgPT4KTW91c2VFdmVudHMgPSBoID0+CigpID0+CihwYXJlbnQsIGRlbGVnYXRlKSA9PgogIGFwcGVuZF90byhlbGVtLCBwKQpEcmF3U1ZHKC4uLmFyZ3MpCiAgYXBwZW5kX3RvKGVsZW0sIHApCiAgYWRqdXN0Vmlld0JveChlKQogIGNhbGNWaWV3Qm94KGJveCkKICBzZXRWaWV3Qm94KHN2Z093bmVyLCBib3gpCkVsZW1lbnRUb1hNTCA9IChlLCBwcmVkaWNhdGUpID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgcmVhZEZpbGUoZmlsZW5hbWUpCiAgd3JpdGVGaWxlKGZpbGVuYW1lLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKQogIGV4aXN0cyhmaWxlbmFtZSkKICByZWFscGF0aChmaWxlbmFtZSkKTG9hZEZpbGUoZmlsZSkKU2F2ZUZpbGUoZmlsZW5hbWUsIGRhdGEsIGNvbnRlbnRUeXBlKQogIHMgPT4KKCkgPT4KU2F2ZVNWRyhmaWxlbmFtZSwgbGF5ZXJzID0gWzEsIDE2LCAyMCwgMjEsIDIyLCAyMywgMjUsIDI3LCA0NywgNDgsIDUxXSkKICBwcmVkaWNhdGUgPSBlbGVtZW50ID0+CkxvYWRTVkcoZmlsZW5hbWUpCkxvYWRJbWFnZShmaWxlbmFtZSkKKCkgPT4KUmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCkKTW9kaWZ5Q29sb3JzID0gZm4gPT4gZSA9PgpGaW5kTGF5ZXIgPSBuYW1lX29yX2lkID0+CiAgbiA9PgogIGwgPT4KKGlkID0gJyNnZW9tJykgPT4KKHByb3BzID0ge30pID0+CiAgbWF4WkluZGV4ID0gKCkgPT4KICBlID0+CiAgeiA9PgogIHogPT4KKCkgPT4KICByYW5kb21Db2xvciA9ICgpID0+CkRyYXdBcmMoc3RhcnQsIGVuZCwgYW5nbGUpCiAgcHJvcHMgPT4KICBwID0+CiAgYSA9PgogIG0gPT4KICBoZXggPT4KICBwID0+CiAgcCA9PgogIHAgPT4KKHsgeCwgeSB9KSA9PgogIGEgPT4KKHsgeCwgeSB9LCBpKSA9PgogIGUgPT4KKGwsIGkpID0+CihwLCBpKSA9PgoocCwgaSkgPT4KICBhZGQgPSAobGV2ZWwsIGl0ZW0pID0+ClJlY3Vyc2VCaW5hcnlOb2RlKG5vZGUsIHBhcmVudCA9IG51bGwsIGRlcHRoID0gMCkKKG5vZGVzLCBpLCBsZXZlbCkgPT4KICBmeCA9IGogPT4KKG5vZGUsIGopID0+CiAgaXRlbSA9PgpEcmF3Tm9kZSh4LCB5LCBub2RlKQpEcmF3RWRnZShpdGVtLCBwYXJlbnQpCkdldFBhdGhzKHF1ZXJ5LCBwYXJlbnQgPSBwcm9qZWN0LnN2Z0VsZW1lbnQpCihhLCBlKSA9PgpQYXRoVG9Qb2x5bGluZXMocGF0aCwgc3RlcCA9IDAuMDEpCiAgcCA9PgogIHBvbHkgPT4KICBwb2x5ID0+CiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aFRvUG9seWxpbmUocGF0aCwgc3RlcCA9IDAuMDEpCiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aHNUb1BvbHlsaW5lcyhwYXRocywgc3RlcCA9IDAuMDEpCiAgcGF0aCA9PgpPdXRzZXRQYXRoKHBhdGgsIG9mZnNldCwgbWl0ZXJMaW1pdCA9IDIsIGFyY1RvbGVyYW5jZSA9IDAuMDEpCiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgpPdXRzZXRQYXRocyhwYXRocywgb2Zmc2V0LCBtaXRlckxpbWl0ID0gMiwgYXJjVG9sZXJhbmNlID0gMC4yNSkKICBwYXRoID0+CihhLCBwKSA9PgpDbGlwUGF0aChwYXRoLCBjbGlwLCBtb2RlID0gQ2xpcHBlckxpYi5DbGlwVHlwZS5jdFVuaW9uKQogIGFkZCA9IChwLCBjbGlwID0gZmFsc2UpID0+CiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgogIHNhdmVJdGVtU3RhdGVzKGl0ZW1MaXN0LCBnZXQgPSBpdGVtID0+IGlzLgooaXRlbS4KKSkKICBpdGVtID0+CiAgcmVzdG9yZUl0ZW1TdGF0ZXMoaXRlbVN0YXRlcywgLypwcmV0dGllci1pZ25vcmUgKi8gc2V0ID0gKGl0ZW0sIHZhbHVlKSA9PiBpdGVtLgoodmFsdWUgPyAneWVzJyA6ICdubycpKQpFYWdsZU1hcHMocHJvamVjdCkKICB0cmFuc2Zvcm1QYXRoID0gcCA9PgogIGUgPT4KICBkb20yZWFnbGUgPSBub2RlID0+CiAgZWFnbGUyZG9tID0gZWxlbSA9PgogIHBhdGgyZG9tID0gcCA9Pgooa2V5LCB2YWx1ZSkgPT4KKGtleSwgdmFsdWUpID0+ClBhY2thZ2VOYW1lcyhkb2MgPSBwcm9qZWN0LmRvYykKICBlID0+CihbZSwgYl0pID0+CihbZSwgdywgaCwgbSwgdl0pID0+Cih7IGluZGV4LCAuLi5tYXRjaCB9KSA9PgogICh7IHMsIHYsIGluZGV4ZXMgfSwgbWF0Y2gsIGkpID0+CihbdG9rZW4sIGluZGV4XSkgPT4KKFt0b2tlbiwgaW5kZXhdKSA9PgpOZXh0RG9jdW1lbnQobiA9IDEpCiAgKGlkeCwgaSkgPT4KICAoaWR4LCBpKSA9PgpMb2FkRG9jdW1lbnQocHJvamVjdCwgcGFyZW50RWxlbSkKICBlcnIgPT4KKCkgPT4KICBlbnQgPT4KKCkgPT4KICBlbnQgPT4KICByZW5hbWVQYWNrYWdlcygpCiAgYSA9PgogIHZhbHVlID0+CiAgbGF5ZXIgPT4KKCkgPT4KICBsYXllciA9PgooKSA9PgogIGZuID0gZnVuY3Rpb24odikKKCkgPT4KICAubWFrZUdyb3VwID0gZnVuY3Rpb24oeyB0cmFuc2Zvcm0sIC4uLnByb3BzIH0gPSB7fSkKICBpZCA9PgooKSA9PgogIHh4KCkKICAoKSA9PgoodHJhbnNmb3JtKQogICh0YWcsIGF0dHIsIGNoaWxkcmVuID0gW10pID0+CiAgdmFsdWUgPT4KKCkgPT4KUmVjdApDaG9vc2VEb2N1bWVudChwcm9qZWN0LCBpKQpHZW5lcmF0ZVZvcm9ub2kgPSAoKSA9PgpSZWN0CiAgcCA9PgogIGUgPT4KKHsgbFNpdGUsIHJTaXRlLCAuLi5lZGdlIH0pID0+CiAgZSA9PgooeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4KICBlID0+Cih7IHZhLCB2YiwgLi4uZWRnZSB9KSA9PgogIHYgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICBsID0+CiAgdCA9PgogIGwgPT4KICB0ID0+CiAgcCA9PgogIChhY2MsIHsgc2l0ZSwgaGFsZmVkZ2VzIH0pID0+Cih7IHNpdGUgfSkgPT4KUGFja2FnZUNoaWxkcmVuKGVsZW1lbnQsIGxheWVyKQooYywgaSkgPT4KKFtpLCBwXSkgPT4KKFtpLCBlXSkgPT4KRWxlbWVudENoaWxkcmVuKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCihbbmFtZSwgZWxlbWVudF0pID0+CkVsZW1lbnRHZW9tZXRyaWVzKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCiAgZW50ID0+CihbbmFtZSwgY2hpbGRyZW5dKSA9PgooW2ksIGVdKSA9PgooW25hbWUsIGxpbmVzXSkgPT4KICBwdHMgPT4KKFtuYW1lLCBsaW5lcywgcG9seWdvbnNdKSA9PgpOZXdQYXRoKHBhdGgpCk1ha2VGaXRBY3Rpb24gPSBpbmRleCA9PgogIGV2ZW50ID0+Clpvb21GYWN0b3IodmFsID0gY29uZmlnLgopClpvb21Mb2coZmFjdG9yKQpBZGp1c3Rab29tKGwgPSBjb25maWcuCikKQ3JlYXRlR3JibFNvY2tldCA9IChwb3J0ID0gJ3RudDEnKSA9PgpIYW5kbGVNZXNzYWdlKG1zZykKICBwb2ludFN0ciA9PgogIHNvY2tldEZuID0gKCkgPT4KICAuc2VuZCA9ICguLi5hcmdzKSA9PgpBdXRob3JpemF0aW9uRGlhbG9nID0gKHsgb25BdXRoLCAuLi5wcm9wcyB9KSA9PgogIG9uU3VibWl0OiAoKSA9PgogIG9uSW5wdXQ6IGUgPT4KICBvbklucHV0OiBlID0+CiAgb25DbGljazogZSA9PgogIGFyZyA9PgogIC5vbmxvYWQgPSAoKSA9PgogIHJlc3BvbnNlID0+CiAgZSA9PgogIHYgPT4KVGVzdEFyYzogKCkgPT4KKCkgPT4KKHB1c2gsIHN0b3ApID0+CigpID0+CihwdXNoLCBzdG9wKSA9PgogIHRhcmdldCA9PgogIChrZXksIG1vZGlmaWVycyA9IDApID0+CiAgLmZvY3VzU2VhcmNoID0gc3RhdGUgPT4KICBjaGlsZHJlbjogKCkgPT4KICBnZW9tZXRyaWVzOiAoKSA9PgogIHZhbHVlID0+CigpID0+CiAgdGVzdENvbXBvbmVudCA9IHByb3BzID0+CiAgcmVzcCA9PgogIGpzb24gPT4KRmlsZShvYmosIGkpCkZpbGUKRmlsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpCihhLCBiKSA9Pgoob2JqLCBpKSA9PgooYWNjLCBmaWxlKSA9PgogIGkgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB1cGRhdGVJZkNoYW5nZWQgPSAodHJrbCwgbmV3VmFsdWUsIGNhbGxiYWNrKSA9PgogIChlbGVtLCBpKSA9PgogIGNoYW5nZUlucHV0ID0gZSA9PgogIHAgPT4KICBhcmcgPT4KQ29uc3VtZXIgPSBwcm9wcyA9PgooKQogIGxvZyh0eXBlLCB0aW1lLCBtc2cpCkxvZ2dlciA9IHByb3BzID0+CigpCihbdHlwZSwgZCwgdCwgbV0sIGkpID0+CkR1bXBlciA9IHByb3BzID0+CiAgdmFsdWUgPT4KKFtrLCB2XSwgaSkgPT4KQ29tbWFuZGVyID0gKHsgb25Db21tYW5kLCAuLi5wcm9wcyB9KSA9PgogIGhhbmRsZXIgPSBlID0+CiAgdG9nZ2xlID0gdHJrbCA9PgpMYXllciA9ICh7IHRpdGxlLCBuYW1lLCBsYWJlbCwgaSwgY29sb3IsIGVsZW1lbnQsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4KICBzZXRWaXNpYmxlID0gdmFsdWUgPT4KICBlID0+CiAgZSA9PgogIGwgPT4KICBsID0+CiAgKGl0ZW0sIHZhbHVlKSA9PgogIGl0ZW0gPT4KICBsID0+CihbbCwgc3RhdGVdKSA9PgogIGUgPT4KICBvbk1vdXNlTW92ZTogZSA9PgogIG9uTW91c2VVcDogZSA9PgpEb2N1bWVudExpc3QKICBjb25zdHJ1Y3RvcigpCihwdXNoLCBzdG9wKSA9PgogIGFkZChuYW1lLCBjb21wb25lbnQpCiAgYWRkRW50cnkoW25hbWUsIGNvbXBvbmVudF0pCiAgcmVtb3ZlKG5hbWUpCiAgdXBkYXRlKCkKICBmbjogZSA9PgogIGZuOiAoKSA9PgogIG9wZW4gPT4KICBwcm9wcyA9PgogIHByb3BzID0+CiAgZSA9PgogIGkgPT4KICBpID0+Cih7IGNvb3JkIH0pID0+CiAgc2lkZSA9PgogIGNyZWF0ZTogKHByb2plY3QsIHByb3BzID0ge30pID0+CiAgYSA9PgogIGUgPT4KICBlID0+CiAgbmFtZSA9PgogIGUgPT4KICBtYWtlTGF5ZXJOYW1lKG5hbWUsIHNpZGUpCiAgZm46ICgpID0+CiAgb25DaGFuZ2UoZXZlbnQpCiAgcHJvcHMgPT4KICBwcm9wcyA9PgogIHByb3BzID0+CihlLCBwLCBpKSA9PgogIG1ha2VTb3J0Q29tcGFyZToga2V5ID0+CiAgZnVuY3Rpb24oYSwgYikKICBmdW5jdGlvbihhLCBiKQogIG9uQ29tbWFuZDogY21kU3RyID0+CiAgaGFuZGxlQ2hhbmdlOiBlID0+CiAgZXZlbnQgPT4KICBlID0+Ck1vdmVFdmVudChldmVudCwgcHJldkV2ZW50KQpXYWxrVXAoZSkKICBlID0+CiAgeiA9PgogIHAgPT4KICBlID0+CiAgZSA9PgogIGUgPT4KICB2ID0+CiAgbCA9PgogIGUgPT4KICAoKSA9PgogIChlLCBkZXB0aCkgPT4KICBjbGFzc2VzID0+CiAgZSA9PgogIGUgPT4KICAoYSwgYikgPT4KICAoYSwgYikgPT4KTm9kZQogIGUgPT4KICAocCwgZCwgc2V0LCBzdG9wKSA9PgogIGUgPT4KICBlID0+ClRvdWNoRXZlbnQoZXZlbnQpCiAgZSA9PgoocCwgaSkgPT4KKGEsIGIpID0+CiAgc2l6ZSA9PgogIGJvcmRlciA9PgogIHIgPT4KICBtb2QobiwgbSkKKCkgPT4KICAocG9zLCBsYXN0LCBmaXJzdCkgPT4KICBjYW5jZWwoKQogIC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZSkKICAucHJvY2Vzc0V2ZW50cyA9IGZ1bmN0aW9uIGV2ZW50TG9vcCgpCiAgZXZlbnQgPT4KICBlID0+CiAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6ICgpID0+CiAgcHJpbnQ6IHR4dCA9PgAAAAAAAAAAAxYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					172,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/main.js",
						"symkeys":
						[
							[
								9322,
								9327
							],
							[
								9509,
								9515
							],
							[
								9568,
								9573
							],
							[
								9626,
								9630
							],
							[
								9704,
								9708
							],
							[
								9730,
								9739
							],
							[
								10398,
								10417
							],
							[
								10516,
								10520
							],
							[
								10692,
								10699
							],
							[
								10730,
								10740
							],
							[
								10997,
								11021
							],
							[
								11062,
								11083
							],
							[
								11085,
								11090
							],
							[
								11098,
								11103
							],
							[
								11125,
								11160
							],
							[
								11274,
								11292
							],
							[
								11374,
								11379
							],
							[
								11566,
								11587
							],
							[
								11720,
								11738
							],
							[
								12417,
								12442
							],
							[
								12488,
								12506
							],
							[
								13483,
								13510
							],
							[
								13865,
								13890
							],
							[
								14229,
								14263
							],
							[
								14779,
								14811
							],
							[
								14986,
								14996
							],
							[
								15129,
								15139
							],
							[
								15258,
								15268
							],
							[
								15435,
								15459
							],
							[
								15518,
								15567
							],
							[
								15808,
								15830
							],
							[
								15837,
								15861
							],
							[
								15869,
								15898
							],
							[
								16705,
								16757
							],
							[
								17210,
								17214
							],
							[
								17241,
								17246
							],
							[
								17681,
								17767
							],
							[
								17965,
								17987
							],
							[
								18500,
								18532
							],
							[
								18860,
								18894
							],
							[
								19009,
								19014
							],
							[
								19039,
								19075
							],
							[
								19264,
								19289
							],
							[
								19480,
								19505
							],
							[
								19560,
								19564
							],
							[
								19619,
								19623
							],
							[
								20065,
								20082
							],
							[
								20271,
								20286
							],
							[
								20409,
								20426
							],
							[
								20478,
								20482
							],
							[
								20527,
								20531
							],
							[
								20562,
								20566
							],
							[
								20604,
								20609
							],
							[
								20696,
								20715
							],
							[
								20888,
								20923
							],
							[
								20961,
								20969
							],
							[
								21038,
								21042
							],
							[
								21605,
								21609
							],
							[
								21668,
								21672
							],
							[
								22241,
								22247
							],
							[
								22422,
								22426
							],
							[
								22447,
								22451
							],
							[
								22486,
								22490
							],
							[
								22750,
								22763
							],
							[
								22886,
								22890
							],
							[
								23084,
								23100
							],
							[
								23366,
								23371
							],
							[
								23484,
								23493
							],
							[
								23565,
								23574
							],
							[
								23651,
								23660
							],
							[
								24300,
								24322
							],
							[
								24499,
								24559
							],
							[
								24808,
								24828
							],
							[
								24839,
								24848
							],
							[
								24903,
								24915
							],
							[
								24960,
								24967
							],
							[
								25053,
								25084
							],
							[
								25406,
								25439
							],
							[
								26478,
								26531
							],
							[
								26581,
								26590
							],
							[
								26665,
								26708
							],
							[
								26787,
								26791
							],
							[
								26920,
								26927
							],
							[
								26954,
								26961
							],
							[
								27039,
								27060
							],
							[
								27315,
								27357
							],
							[
								27480,
								27501
							],
							[
								27736,
								27781
							],
							[
								27926,
								27933
							],
							[
								27975,
								28045
							],
							[
								28482,
								28507
							],
							[
								28530,
								28534
							],
							[
								28554,
								28567
							],
							[
								28683,
								28755
							],
							[
								28974,
								28981
							],
							[
								29064,
								29073
							],
							[
								29505,
								29570
							],
							[
								29657,
								29683
							],
							[
								29896,
								29921
							],
							[
								29944,
								29948
							],
							[
								29968,
								29981
							],
							[
								30035,
								30086
							],
							[
								30088,
								30094
							],
							[
								30103,
								30105
							],
							[
								30130,
								30137
							],
							[
								30161,
								30250
							],
							[
								30257,
								30280
							],
							[
								30343,
								30370
							],
							[
								30379,
								30399
							],
							[
								30534,
								30538
							],
							[
								30708,
								30727
							],
							[
								30811,
								30830
							],
							[
								30923,
								30938
							],
							[
								31798,
								31813
							],
							[
								31899,
								31914
							],
							[
								32571,
								32612
							],
							[
								32812,
								32816
							],
							[
								32846,
								32857
							],
							[
								32940,
								32960
							],
							[
								33165,
								33189
							],
							[
								33247,
								33287
							],
							[
								33659,
								33678
							],
							[
								33729,
								33748
							],
							[
								34610,
								34638
							],
							[
								34838,
								34850
							],
							[
								34881,
								34893
							],
							[
								35404,
								35452
							],
							[
								35677,
								35683
							],
							[
								35828,
								35833
							],
							[
								35859,
								35866
							],
							[
								35924,
								35929
							],
							[
								35957,
								35964
							],
							[
								36587,
								36603
							],
							[
								36726,
								36730
							],
							[
								37238,
								37246
							],
							[
								37689,
								37697
							],
							[
								37750,
								37755
							],
							[
								37796,
								37804
							],
							[
								37944,
								37949
							],
							[
								38036,
								38052
							],
							[
								39723,
								39728
							],
							[
								40361,
								40412
							],
							[
								40815,
								40820
							],
							[
								40839,
								40844
							],
							[
								41152,
								41169
							],
							[
								41329,
								41335
							],
							[
								41464,
								41484
							],
							[
								41561,
								41591
							],
							[
								41767,
								41775
							],
							[
								41874,
								41885
							],
							[
								42001,
								42005
							],
							[
								42732,
								42773
							],
							[
								43396,
								43419
							],
							[
								44008,
								44012
							],
							[
								44156,
								44160
							],
							[
								44672,
								44676
							],
							[
								44691,
								44721
							],
							[
								44769,
								44773
							],
							[
								44787,
								44817
							],
							[
								44871,
								44875
							],
							[
								44894,
								44918
							],
							[
								44983,
								44987
							],
							[
								45027,
								45051
							],
							[
								45169,
								45173
							],
							[
								45199,
								45203
							],
							[
								45273,
								45277
							],
							[
								45303,
								45307
							],
							[
								45400,
								45404
							],
							[
								45762,
								45797
							],
							[
								45908,
								45921
							],
							[
								46362,
								46402
							],
							[
								46448,
								46457
							],
							[
								46473,
								46484
							],
							[
								46576,
								46587
							],
							[
								46633,
								46689
							],
							[
								46696,
								46702
							],
							[
								46784,
								46804
							],
							[
								46851,
								46909
							],
							[
								46916,
								46922
							],
							[
								46965,
								46972
							],
							[
								46989,
								47010
							],
							[
								47072,
								47083
							],
							[
								47313,
								47331
							],
							[
								47371,
								47377
							],
							[
								47410,
								47438
							],
							[
								47476,
								47498
							],
							[
								47583,
								47607
							],
							[
								47608,
								47622
							],
							[
								48742,
								48775
							],
							[
								48784,
								48785
							],
							[
								48837,
								48861
							],
							[
								48902,
								48933
							],
							[
								48942,
								48943
							],
							[
								49187,
								49230
							],
							[
								49544,
								49571
							],
							[
								49864,
								49875
							],
							[
								50081,
								50097
							],
							[
								50411,
								50431
							],
							[
								51316,
								51363
							],
							[
								51746,
								51761
							],
							[
								51978,
								51991
							],
							[
								52268,
								52281
							],
							[
								52487,
								52500
							],
							[
								52719,
								52725
							],
							[
								52775,
								52796
							],
							[
								56780,
								56791
							],
							[
								57627,
								57631
							],
							[
								58045,
								58050
							],
							[
								58199,
								58213
							],
							[
								58231,
								58236
							],
							[
								58349,
								58370
							],
							[
								58428,
								58433
							],
							[
								58541,
								58562
							],
							[
								58787,
								58800
							],
							[
								58801,
								58828
							],
							[
								58945,
								58968
							],
							[
								59250,
								59265
							],
							[
								59290,
								59307
							],
							[
								59374,
								59382
							],
							[
								59455,
								59460
							],
							[
								59566,
								59590
							],
							[
								60351,
								60358
							],
							[
								60388,
								60395
							],
							[
								60717,
								60744
							],
							[
								60840,
								60844
							],
							[
								61209,
								61245
							],
							[
								61378,
								61387
							],
							[
								61422,
								61433
							],
							[
								61485,
								61499
							],
							[
								62079,
								62083
							],
							[
								62758,
								62766
							],
							[
								62882,
								62890
							],
							[
								63010,
								63018
							],
							[
								63133,
								63141
							],
							[
								63198,
								63206
							],
							[
								63678,
								63686
							],
							[
								63871,
								63918
							],
							[
								64064,
								64077
							],
							[
								64240,
								64258
							],
							[
								64426,
								64430
							],
							[
								64502,
								64509
							],
							[
								64757,
								64776
							],
							[
								64808,
								64826
							],
							[
								65352,
								65372
							],
							[
								65622,
								65639
							],
							[
								65847,
								65865
							],
							[
								66142,
								66165
							],
							[
								66616,
								66633
							],
							[
								66725,
								66733
							],
							[
								66952,
								66966
							],
							[
								67104,
								67144
							],
							[
								67209,
								67223
							],
							[
								67798,
								67814
							],
							[
								67852,
								67927
							],
							[
								68162,
								68183
							],
							[
								68287,
								68291
							],
							[
								68770,
								68784
							],
							[
								69074,
								69078
							],
							[
								69145,
								69149
							],
							[
								69426,
								69443
							],
							[
								69611,
								69619
							],
							[
								69812,
								69816
							],
							[
								69912,
								69927
							],
							[
								70173,
								70177
							],
							[
								70384,
								70401
							],
							[
								70493,
								70508
							],
							[
								71301,
								71313
							],
							[
								71320,
								71333
							],
							[
								71371,
								71386
							],
							[
								71490,
								71510
							],
							[
								71690,
								71717
							],
							[
								71771,
								71783
							],
							[
								71901,
								71909
							],
							[
								72358,
								72366
							],
							[
								73188,
								73197
							],
							[
								73432,
								73439
							],
							[
								73538,
								73558
							],
							[
								73745,
								73765
							],
							[
								74126,
								74136
							],
							[
								74939,
								74943
							],
							[
								75018,
								75022
							],
							[
								75036,
								75050
							],
							[
								75307,
								75314
							],
							[
								77657,
								77689
							],
							[
								78086,
								78090
							],
							[
								78296,
								78300
							],
							[
								78368,
								78372
							],
							[
								78456,
								78463
							],
							[
								78542,
								78546
							],
							[
								79605,
								79651
							],
							[
								80081,
								80090
							],
							[
								81192,
								81207
							],
							[
								81421,
								81437
							],
							[
								81598,
								81614
							],
							[
								81789,
								81805
							],
							[
								82828,
								82846
							],
							[
								83044,
								83067
							],
							[
								83109,
								83124
							],
							[
								83480,
								83495
							],
							[
								83908,
								83928
							],
							[
								84381,
								84399
							],
							[
								85115,
								85124
							],
							[
								85167,
								85171
							],
							[
								85383,
								85421
							],
							[
								85596,
								85619
							],
							[
								85753,
								85758
							],
							[
								85797,
								85807
							],
							[
								85966,
								85970
							],
							[
								86107,
								86111
							],
							[
								86150,
								86155
							],
							[
								86560,
								86564
							],
							[
								86598,
								86612
							],
							[
								86616,
								86630
							],
							[
								86637,
								86641
							],
							[
								86662,
								86677
							],
							[
								86708,
								86722
							],
							[
								86829,
								86840
							],
							[
								86885,
								86890
							],
							[
								86945,
								86950
							],
							[
								87400,
								87410
							],
							[
								87501,
								87511
							],
							[
								87524,
								87528
							],
							[
								87702,
								87706
							],
							[
								87867,
								87888
							],
							[
								88958,
								88962
							],
							[
								89069,
								89073
							],
							[
								89362,
								89390
							],
							[
								89841,
								89845
							],
							[
								90301,
								90310
							],
							[
								90394,
								90403
							],
							[
								90507,
								90515
							],
							[
								91021,
								91030
							],
							[
								91179,
								91183
							],
							[
								91248,
								91274
							],
							[
								91914,
								91919
							],
							[
								92194,
								92216
							],
							[
								93222,
								93243
							],
							[
								93448,
								93476
							],
							[
								93843,
								93886
							],
							[
								95211,
								95220
							],
							[
								96000,
								96004
							],
							[
								96739,
								96766
							],
							[
								96889,
								96902
							]
						],
						"symlist":
						[
							"() =>",
							"res =>",
							"() =>",
							"r =>",
							"r =>",
							"entries()",
							"GetProject = arg =>",
							"p =>",
							" () =>",
							" value =>",
							"add = (arr, ...items) =>",
							"useSlot = (arr, i) =>",
							"() =>",
							" v =>",
							"trklGetSet = (get, set) => value =>",
							"MouseEvents = h =>",
							"() =>",
							"(parent, delegate) =>",
							"append_to(elem, p)",
							"function DrawSVG(...args)",
							"append_to(elem, p)",
							" function adjustViewBox(e)",
							"function calcViewBox(box)",
							"function setViewBox(svgOwner, box)",
							"ElementToXML = (e, predicate) =>",
							" (v, k) =>",
							" (v, k) =>",
							" (v, k) =>",
							"async readFile(filename)",
							"async writeFile(filename, data, overwrite = true)",
							"async exists(filename)",
							"async realpath(filename)",
							"async function LoadFile(file)",
							"async function SaveFile(filename, data, contentType)",
							"s =>",
							"() =>",
							"async function SaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])",
							"predicate = element =>",
							"async function LoadSVG(filename)",
							"async function LoadImage(filename)",
							"() =>",
							" function RenderComponent(component)",
							"ModifyColors = fn => e =>",
							"FindLayer = name_or_id =>",
							"n =>",
							"l =>",
							"(id = '#geom') =>",
							"(props = {}) =>",
							"maxZIndex = () =>",
							"e =>",
							"z =>",
							"z =>",
							"() =>",
							"randomColor = () =>",
							"function DrawArc(start, end, angle)",
							"props =>",
							"p =>",
							"a =>",
							"m =>",
							"hex =>",
							"p =>",
							"p =>",
							"p =>",
							"({ x, y }) =>",
							"a =>",
							"({ x, y }, i) =>",
							" e =>",
							"(l, i) =>",
							"(p, i) =>",
							"(p, i) =>",
							"add = (level, item) =>",
							" function RecurseBinaryNode(node, parent = null, depth = 0)",
							"(nodes, i, level) =>",
							"fx = j =>",
							"(node, j) =>",
							"item =>",
							" function DrawNode(x, y, node)",
							" function DrawEdge(item, parent)",
							"function GetPaths(query, parent = project.svgElement)",
							"(a, e) =>",
							"function PathToPolylines(path, step = 0.01)",
							"p =>",
							"poly =>",
							"poly =>",
							" (p, d, set, stop) =>",
							"function PathToPolyline(path, step = 0.01)",
							" (p, d, set, stop) =>",
							"function PathsToPolylines(paths, step = 0.01)",
							"path =>",
							"function OutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function OutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)",
							"path =>",
							"(a, p) =>",
							"function ClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)",
							"add = (p, clip = false) =>",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function saveItemStates(itemList, get = item => is.",
							"(item.",
							"))",
							"item =>",
							"function restoreItemStates(itemStates, /* prettier-ignore */ set = (item, value) => item.",
							"(value ? 'yes' : 'no'))",
							"function EagleMaps(project)",
							"transformPath = p =>",
							"e =>",
							"dom2eagle = node =>",
							"eagle2dom = elem =>",
							"path2dom = p =>",
							"(key, value) =>",
							"(key, value) =>",
							"function* PackageNames(doc = project.doc)",
							"e =>",
							"([e, b]) =>",
							"([e, w, h, m, v]) =>",
							"({ index, ...match }) =>",
							" ({ s, v, indexes }, match, i) =>",
							"([token, index]) =>",
							"([token, index]) =>",
							"function NextDocument(n = 1)",
							" (idx, i) =>",
							" (idx, i) =>",
							"async function LoadDocument(project, parentElem)",
							"err =>",
							"() =>",
							" ent =>",
							"() =>",
							" ent =>",
							"renamePackages()",
							"a =>",
							"value =>",
							"layer =>",
							"() =>",
							"layer =>",
							"() =>",
							"fn = function(v)",
							"() =>",
							".makeGroup = function({ transform, ...props } = {})",
							"id =>",
							"() =>",
							" function xx()",
							" () =>",
							"function (transform)",
							" (tag, attr, children = []) =>",
							"value =>",
							"async () =>",
							"Rect",
							"async function ChooseDocument(project, i)",
							"GenerateVoronoi = () =>",
							"Rect",
							"p =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ va, vb, ...edge }) =>",
							"v =>",
							"add = (arr, ...items) =>",
							"l =>",
							"t =>",
							"l =>",
							"t =>",
							"p =>",
							" (acc, { site, halfedges }) =>",
							"({ site }) =>",
							"function PackageChildren(element, layer)",
							"(c, i) =>",
							"([i, p]) =>",
							"([i, e]) =>",
							"function ElementChildren(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							"([name, element]) =>",
							"function ElementGeometries(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							" ent =>",
							"([name, children]) =>",
							"([i, e]) =>",
							"([name, lines]) =>",
							"pts =>",
							"([name, lines, polygons]) =>",
							"function NewPath(path)",
							"MakeFitAction = index =>",
							"async event =>",
							"function ZoomFactor(val = config.",
							")",
							"function ZoomLog(factor)",
							"function AdjustZoom(l = config.",
							")",
							"CreateGrblSocket = async (port = 'tnt1') =>",
							"function HandleMessage(msg)",
							"pointStr =>",
							"socketFn = () =>",
							".send = (...args) =>",
							"AuthorizationDialog = ({ onAuth, ...props }) =>",
							"onSubmit: () =>",
							"onInput: e =>",
							"onInput: e =>",
							"onClick: e =>",
							"arg =>",
							".onload = async () =>",
							"response =>",
							"e =>",
							" v =>",
							"TestArc: () =>",
							"() =>",
							"async (push, stop) =>",
							"() =>",
							"async (push, stop) =>",
							" target =>",
							" (key, modifiers = 0) =>",
							".focusSearch = state =>",
							"children: () =>",
							"geometries: () =>",
							"value =>",
							"() =>",
							"testComponent = props =>",
							"resp =>",
							"json =>",
							" function File(obj, i)",
							"File",
							"File.prototype.toString = function()",
							"(a, b) =>",
							"(obj, i) =>",
							"(acc, file) =>",
							"i =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"updateIfChanged = (trkl, newValue, callback) =>",
							" (elem, i) =>",
							"changeInput = e =>",
							"p =>",
							" arg =>",
							"Consumer = props =>",
							"async function* ()",
							"log(type, time, msg)",
							"Logger = props =>",
							"async function* ()",
							"([type, d, t, m], i) =>",
							"Dumper = props =>",
							"value =>",
							"([k, v], i) =>",
							"Commander = ({ onCommand, ...props }) =>",
							"handler = e =>",
							"toggle = trkl =>",
							"Layer = ({ title, name, label, i, color, element, className, ...props }) =>",
							"setVisible = value =>",
							"e =>",
							" e =>",
							"l =>",
							"l =>",
							" (item, value) =>",
							" item =>",
							"l =>",
							"([l, state]) =>",
							"e =>",
							"onMouseMove: e =>",
							"onMouseUp: e =>",
							"DocumentList",
							"constructor()",
							"(push, stop) =>",
							"add(name, component)",
							"addEntry([name, component])",
							"remove(name)",
							"update()",
							"fn: e =>",
							"fn: () =>",
							"open =>",
							" props =>",
							" props =>",
							"async e =>",
							"i =>",
							"i =>",
							"({ coord }) =>",
							"side =>",
							"create: (project, props = {}) =>",
							"a =>",
							"e =>",
							"e =>",
							"name =>",
							"e =>",
							" function makeLayerName(name, side)",
							"fn: () =>",
							"onChange(event)",
							" props =>",
							" props =>",
							" props =>",
							"async (e, p, i) =>",
							"makeSortCompare: key =>",
							" function(a, b)",
							" function(a, b)",
							"onCommand: cmdStr =>",
							"handleChange: e =>",
							" event =>",
							"e =>",
							" function MoveEvent(event, prevEvent)",
							" function* WalkUp(e)",
							" e =>",
							" z =>",
							"p =>",
							"e =>",
							" e =>",
							"e =>",
							" v =>",
							" l =>",
							"e =>",
							" () =>",
							" (e, depth) =>",
							" classes =>",
							" e =>",
							" e =>",
							" (a, b) =>",
							" (a, b) =>",
							"Node",
							"e =>",
							" (p, d, set, stop) =>",
							"e =>",
							"e =>",
							" function TouchEvent(event)",
							"e =>",
							"(p, i) =>",
							"(a, b) =>",
							" size =>",
							"border =>",
							"r =>",
							" function mod(n, m)",
							"() =>",
							" (pos, last, first) =>",
							" function cancel()",
							".oncontextmenu = function(e)",
							".processEvents = async function eventLoop()",
							" event =>",
							"e =>",
							"onRuntimeInitialized: () =>",
							"print: txt =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAADFgAAKCkgPT4KICByZXMgPT4KKCkgPT4KICByID0+CiAgciA9PgogIGVudHJpZXMoKQpHZXRQcm9qZWN0ID0gYXJnID0+CiAgcCA9PgogICgpID0+CiAgdmFsdWUgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICB1c2VTbG90ID0gKGFyciwgaSkgPT4KKCkgPT4KICB2ID0+CiAgdHJrbEdldFNldCA9IChnZXQsIHNldCkgPT4gdmFsdWUgPT4KTW91c2VFdmVudHMgPSBoID0+CigpID0+CihwYXJlbnQsIGRlbGVnYXRlKSA9PgogIGFwcGVuZF90byhlbGVtLCBwKQpEcmF3U1ZHKC4uLmFyZ3MpCiAgYXBwZW5kX3RvKGVsZW0sIHApCiAgYWRqdXN0Vmlld0JveChlKQogIGNhbGNWaWV3Qm94KGJveCkKICBzZXRWaWV3Qm94KHN2Z093bmVyLCBib3gpCkVsZW1lbnRUb1hNTCA9IChlLCBwcmVkaWNhdGUpID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgcmVhZEZpbGUoZmlsZW5hbWUpCiAgd3JpdGVGaWxlKGZpbGVuYW1lLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKQogIGV4aXN0cyhmaWxlbmFtZSkKICByZWFscGF0aChmaWxlbmFtZSkKTG9hZEZpbGUoZmlsZSkKU2F2ZUZpbGUoZmlsZW5hbWUsIGRhdGEsIGNvbnRlbnRUeXBlKQogIHMgPT4KKCkgPT4KU2F2ZVNWRyhmaWxlbmFtZSwgbGF5ZXJzID0gWzEsIDE2LCAyMCwgMjEsIDIyLCAyMywgMjUsIDI3LCA0NywgNDgsIDUxXSkKICBwcmVkaWNhdGUgPSBlbGVtZW50ID0+CkxvYWRTVkcoZmlsZW5hbWUpCkxvYWRJbWFnZShmaWxlbmFtZSkKKCkgPT4KUmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCkKTW9kaWZ5Q29sb3JzID0gZm4gPT4gZSA9PgpGaW5kTGF5ZXIgPSBuYW1lX29yX2lkID0+CiAgbiA9PgogIGwgPT4KKGlkID0gJyNnZW9tJykgPT4KKHByb3BzID0ge30pID0+CiAgbWF4WkluZGV4ID0gKCkgPT4KICBlID0+CiAgeiA9PgogIHogPT4KKCkgPT4KICByYW5kb21Db2xvciA9ICgpID0+CkRyYXdBcmMoc3RhcnQsIGVuZCwgYW5nbGUpCiAgcHJvcHMgPT4KICBwID0+CiAgYSA9PgogIG0gPT4KICBoZXggPT4KICBwID0+CiAgcCA9PgogIHAgPT4KKHsgeCwgeSB9KSA9PgogIGEgPT4KKHsgeCwgeSB9LCBpKSA9PgogIGUgPT4KKGwsIGkpID0+CihwLCBpKSA9PgoocCwgaSkgPT4KICBhZGQgPSAobGV2ZWwsIGl0ZW0pID0+ClJlY3Vyc2VCaW5hcnlOb2RlKG5vZGUsIHBhcmVudCA9IG51bGwsIGRlcHRoID0gMCkKKG5vZGVzLCBpLCBsZXZlbCkgPT4KICBmeCA9IGogPT4KKG5vZGUsIGopID0+CiAgaXRlbSA9PgpEcmF3Tm9kZSh4LCB5LCBub2RlKQpEcmF3RWRnZShpdGVtLCBwYXJlbnQpCkdldFBhdGhzKHF1ZXJ5LCBwYXJlbnQgPSBwcm9qZWN0LnN2Z0VsZW1lbnQpCihhLCBlKSA9PgpQYXRoVG9Qb2x5bGluZXMocGF0aCwgc3RlcCA9IDAuMDEpCiAgcCA9PgogIHBvbHkgPT4KICBwb2x5ID0+CiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aFRvUG9seWxpbmUocGF0aCwgc3RlcCA9IDAuMDEpCiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aHNUb1BvbHlsaW5lcyhwYXRocywgc3RlcCA9IDAuMDEpCiAgcGF0aCA9PgpPdXRzZXRQYXRoKHBhdGgsIG9mZnNldCwgbWl0ZXJMaW1pdCA9IDIsIGFyY1RvbGVyYW5jZSA9IDAuMDEpCiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgpPdXRzZXRQYXRocyhwYXRocywgb2Zmc2V0LCBtaXRlckxpbWl0ID0gMiwgYXJjVG9sZXJhbmNlID0gMC4yNSkKICBwYXRoID0+CihhLCBwKSA9PgpDbGlwUGF0aChwYXRoLCBjbGlwLCBtb2RlID0gQ2xpcHBlckxpYi5DbGlwVHlwZS5jdFVuaW9uKQogIGFkZCA9IChwLCBjbGlwID0gZmFsc2UpID0+CiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgogIHNhdmVJdGVtU3RhdGVzKGl0ZW1MaXN0LCBnZXQgPSBpdGVtID0+IGlzLgooaXRlbS4KKSkKICBpdGVtID0+CiAgcmVzdG9yZUl0ZW1TdGF0ZXMoaXRlbVN0YXRlcywgLypwcmV0dGllci1pZ25vcmUgKi8gc2V0ID0gKGl0ZW0sIHZhbHVlKSA9PiBpdGVtLgoodmFsdWUgPyAneWVzJyA6ICdubycpKQpFYWdsZU1hcHMocHJvamVjdCkKICB0cmFuc2Zvcm1QYXRoID0gcCA9PgogIGUgPT4KICBkb20yZWFnbGUgPSBub2RlID0+CiAgZWFnbGUyZG9tID0gZWxlbSA9PgogIHBhdGgyZG9tID0gcCA9Pgooa2V5LCB2YWx1ZSkgPT4KKGtleSwgdmFsdWUpID0+ClBhY2thZ2VOYW1lcyhkb2MgPSBwcm9qZWN0LmRvYykKICBlID0+CihbZSwgYl0pID0+CihbZSwgdywgaCwgbSwgdl0pID0+Cih7IGluZGV4LCAuLi5tYXRjaCB9KSA9PgogICh7IHMsIHYsIGluZGV4ZXMgfSwgbWF0Y2gsIGkpID0+CihbdG9rZW4sIGluZGV4XSkgPT4KKFt0b2tlbiwgaW5kZXhdKSA9PgpOZXh0RG9jdW1lbnQobiA9IDEpCiAgKGlkeCwgaSkgPT4KICAoaWR4LCBpKSA9PgpMb2FkRG9jdW1lbnQocHJvamVjdCwgcGFyZW50RWxlbSkKICBlcnIgPT4KKCkgPT4KICBlbnQgPT4KKCkgPT4KICBlbnQgPT4KICByZW5hbWVQYWNrYWdlcygpCiAgYSA9PgogIHZhbHVlID0+CiAgbGF5ZXIgPT4KKCkgPT4KICBsYXllciA9PgooKSA9PgogIGZuID0gZnVuY3Rpb24odikKKCkgPT4KICAubWFrZUdyb3VwID0gZnVuY3Rpb24oeyB0cmFuc2Zvcm0sIC4uLnByb3BzIH0gPSB7fSkKICBpZCA9PgooKSA9PgogIHh4KCkKICAoKSA9PgoodHJhbnNmb3JtKQogICh0YWcsIGF0dHIsIGNoaWxkcmVuID0gW10pID0+CiAgdmFsdWUgPT4KKCkgPT4KUmVjdApDaG9vc2VEb2N1bWVudChwcm9qZWN0LCBpKQpHZW5lcmF0ZVZvcm9ub2kgPSAoKSA9PgpSZWN0CiAgcCA9PgogIGUgPT4KKHsgbFNpdGUsIHJTaXRlLCAuLi5lZGdlIH0pID0+CiAgZSA9PgooeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4KICBlID0+Cih7IHZhLCB2YiwgLi4uZWRnZSB9KSA9PgogIHYgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICBsID0+CiAgdCA9PgogIGwgPT4KICB0ID0+CiAgcCA9PgogIChhY2MsIHsgc2l0ZSwgaGFsZmVkZ2VzIH0pID0+Cih7IHNpdGUgfSkgPT4KUGFja2FnZUNoaWxkcmVuKGVsZW1lbnQsIGxheWVyKQooYywgaSkgPT4KKFtpLCBwXSkgPT4KKFtpLCBlXSkgPT4KRWxlbWVudENoaWxkcmVuKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCihbbmFtZSwgZWxlbWVudF0pID0+CkVsZW1lbnRHZW9tZXRyaWVzKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCiAgZW50ID0+CihbbmFtZSwgY2hpbGRyZW5dKSA9PgooW2ksIGVdKSA9PgooW25hbWUsIGxpbmVzXSkgPT4KICBwdHMgPT4KKFtuYW1lLCBsaW5lcywgcG9seWdvbnNdKSA9PgpOZXdQYXRoKHBhdGgpCk1ha2VGaXRBY3Rpb24gPSBpbmRleCA9PgogIGV2ZW50ID0+Clpvb21GYWN0b3IodmFsID0gY29uZmlnLgopClpvb21Mb2coZmFjdG9yKQpBZGp1c3Rab29tKGwgPSBjb25maWcuCikKQ3JlYXRlR3JibFNvY2tldCA9IChwb3J0ID0gJ3RudDEnKSA9PgpIYW5kbGVNZXNzYWdlKG1zZykKICBwb2ludFN0ciA9PgogIHNvY2tldEZuID0gKCkgPT4KICAuc2VuZCA9ICguLi5hcmdzKSA9PgpBdXRob3JpemF0aW9uRGlhbG9nID0gKHsgb25BdXRoLCAuLi5wcm9wcyB9KSA9PgogIG9uU3VibWl0OiAoKSA9PgogIG9uSW5wdXQ6IGUgPT4KICBvbklucHV0OiBlID0+CiAgb25DbGljazogZSA9PgogIGFyZyA9PgogIC5vbmxvYWQgPSAoKSA9PgogIHJlc3BvbnNlID0+CiAgZSA9PgogIHYgPT4KVGVzdEFyYzogKCkgPT4KKCkgPT4KKHB1c2gsIHN0b3ApID0+CigpID0+CihwdXNoLCBzdG9wKSA9PgogIHRhcmdldCA9PgogIChrZXksIG1vZGlmaWVycyA9IDApID0+CiAgLmZvY3VzU2VhcmNoID0gc3RhdGUgPT4KICBjaGlsZHJlbjogKCkgPT4KICBnZW9tZXRyaWVzOiAoKSA9PgogIHZhbHVlID0+CigpID0+CiAgdGVzdENvbXBvbmVudCA9IHByb3BzID0+CiAgcmVzcCA9PgogIGpzb24gPT4KRmlsZShvYmosIGkpCkZpbGUKRmlsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpCihhLCBiKSA9Pgoob2JqLCBpKSA9PgooYWNjLCBmaWxlKSA9PgogIGkgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB1cGRhdGVJZkNoYW5nZWQgPSAodHJrbCwgbmV3VmFsdWUsIGNhbGxiYWNrKSA9PgogIChlbGVtLCBpKSA9PgogIGNoYW5nZUlucHV0ID0gZSA9PgogIHAgPT4KICBhcmcgPT4KQ29uc3VtZXIgPSBwcm9wcyA9PgooKQogIGxvZyh0eXBlLCB0aW1lLCBtc2cpCkxvZ2dlciA9IHByb3BzID0+CigpCihbdHlwZSwgZCwgdCwgbV0sIGkpID0+CkR1bXBlciA9IHByb3BzID0+CiAgdmFsdWUgPT4KKFtrLCB2XSwgaSkgPT4KQ29tbWFuZGVyID0gKHsgb25Db21tYW5kLCAuLi5wcm9wcyB9KSA9PgogIGhhbmRsZXIgPSBlID0+CiAgdG9nZ2xlID0gdHJrbCA9PgpMYXllciA9ICh7IHRpdGxlLCBuYW1lLCBsYWJlbCwgaSwgY29sb3IsIGVsZW1lbnQsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4KICBzZXRWaXNpYmxlID0gdmFsdWUgPT4KICBlID0+CiAgZSA9PgogIGwgPT4KICBsID0+CiAgKGl0ZW0sIHZhbHVlKSA9PgogIGl0ZW0gPT4KICBsID0+CihbbCwgc3RhdGVdKSA9PgogIGUgPT4KICBvbk1vdXNlTW92ZTogZSA9PgogIG9uTW91c2VVcDogZSA9PgpEb2N1bWVudExpc3QKICBjb25zdHJ1Y3RvcigpCihwdXNoLCBzdG9wKSA9PgogIGFkZChuYW1lLCBjb21wb25lbnQpCiAgYWRkRW50cnkoW25hbWUsIGNvbXBvbmVudF0pCiAgcmVtb3ZlKG5hbWUpCiAgdXBkYXRlKCkKICBmbjogZSA9PgogIGZuOiAoKSA9PgogIG9wZW4gPT4KICBwcm9wcyA9PgogIHByb3BzID0+CiAgZSA9PgogIGkgPT4KICBpID0+Cih7IGNvb3JkIH0pID0+CiAgc2lkZSA9PgogIGNyZWF0ZTogKHByb2plY3QsIHByb3BzID0ge30pID0+CiAgYSA9PgogIGUgPT4KICBlID0+CiAgbmFtZSA9PgogIGUgPT4KICBtYWtlTGF5ZXJOYW1lKG5hbWUsIHNpZGUpCiAgZm46ICgpID0+CiAgb25DaGFuZ2UoZXZlbnQpCiAgcHJvcHMgPT4KICBwcm9wcyA9PgogIHByb3BzID0+CihlLCBwLCBpKSA9PgogIG1ha2VTb3J0Q29tcGFyZToga2V5ID0+CiAgZnVuY3Rpb24oYSwgYikKICBmdW5jdGlvbihhLCBiKQogIG9uQ29tbWFuZDogY21kU3RyID0+CiAgaGFuZGxlQ2hhbmdlOiBlID0+CiAgZXZlbnQgPT4KICBlID0+Ck1vdmVFdmVudChldmVudCwgcHJldkV2ZW50KQpXYWxrVXAoZSkKICBlID0+CiAgeiA9PgogIHAgPT4KICBlID0+CiAgZSA9PgogIGUgPT4KICB2ID0+CiAgbCA9PgogIGUgPT4KICAoKSA9PgogIChlLCBkZXB0aCkgPT4KICBjbGFzc2VzID0+CiAgZSA9PgogIGUgPT4KICAoYSwgYikgPT4KICAoYSwgYikgPT4KTm9kZQogIGUgPT4KICAocCwgZCwgc2V0LCBzdG9wKSA9PgogIGUgPT4KICBlID0+ClRvdWNoRXZlbnQoZXZlbnQpCiAgZSA9PgoocCwgaSkgPT4KKGEsIGIpID0+CiAgc2l6ZSA9PgogIGJvcmRlciA9PgogIHIgPT4KICBtb2QobiwgbSkKKCkgPT4KICAocG9zLCBsYXN0LCBmaXJzdCkgPT4KICBjYW5jZWwoKQogIC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZSkKICAucHJvY2Vzc0V2ZW50cyA9IGZ1bmN0aW9uIGV2ZW50TG9vcCgpCiAgZXZlbnQgPT4KICBlID0+CiAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6ICgpID0+CiAgcHJpbnQ6IHR4dCA9PgAAAAAAAAAAAxYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					173,
					2,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AwAAAAAAAAAAAAAAAAAAAAAAAAADFgAAKCkgPT4KICByZXMgPT4KKCkgPT4KICByID0+CiAgciA9PgogIGVudHJpZXMoKQpHZXRQcm9qZWN0ID0gYXJnID0+CiAgcCA9PgogICgpID0+CiAgdmFsdWUgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICB1c2VTbG90ID0gKGFyciwgaSkgPT4KKCkgPT4KICB2ID0+CiAgdHJrbEdldFNldCA9IChnZXQsIHNldCkgPT4gdmFsdWUgPT4KTW91c2VFdmVudHMgPSBoID0+CigpID0+CihwYXJlbnQsIGRlbGVnYXRlKSA9PgogIGFwcGVuZF90byhlbGVtLCBwKQpEcmF3U1ZHKC4uLmFyZ3MpCiAgYXBwZW5kX3RvKGVsZW0sIHApCiAgYWRqdXN0Vmlld0JveChlKQogIGNhbGNWaWV3Qm94KGJveCkKICBzZXRWaWV3Qm94KHN2Z093bmVyLCBib3gpCkVsZW1lbnRUb1hNTCA9IChlLCBwcmVkaWNhdGUpID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgcmVhZEZpbGUoZmlsZW5hbWUpCiAgd3JpdGVGaWxlKGZpbGVuYW1lLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKQogIGV4aXN0cyhmaWxlbmFtZSkKICByZWFscGF0aChmaWxlbmFtZSkKTG9hZEZpbGUoZmlsZSkKU2F2ZUZpbGUoZmlsZW5hbWUsIGRhdGEsIGNvbnRlbnRUeXBlKQogIHMgPT4KKCkgPT4KU2F2ZVNWRyhmaWxlbmFtZSwgbGF5ZXJzID0gWzEsIDE2LCAyMCwgMjEsIDIyLCAyMywgMjUsIDI3LCA0NywgNDgsIDUxXSkKICBwcmVkaWNhdGUgPSBlbGVtZW50ID0+CkxvYWRTVkcoZmlsZW5hbWUpCkxvYWRJbWFnZShmaWxlbmFtZSkKKCkgPT4KUmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCkKTW9kaWZ5Q29sb3JzID0gZm4gPT4gZSA9PgpGaW5kTGF5ZXIgPSBuYW1lX29yX2lkID0+CiAgbiA9PgogIGwgPT4KKGlkID0gJyNnZW9tJykgPT4KKHByb3BzID0ge30pID0+CiAgbWF4WkluZGV4ID0gKCkgPT4KICBlID0+CiAgeiA9PgogIHogPT4KKCkgPT4KICByYW5kb21Db2xvciA9ICgpID0+CkRyYXdBcmMoc3RhcnQsIGVuZCwgYW5nbGUpCiAgcHJvcHMgPT4KICBwID0+CiAgYSA9PgogIG0gPT4KICBoZXggPT4KICBwID0+CiAgcCA9PgogIHAgPT4KKHsgeCwgeSB9KSA9PgogIGEgPT4KKHsgeCwgeSB9LCBpKSA9PgogIGUgPT4KKGwsIGkpID0+CihwLCBpKSA9PgoocCwgaSkgPT4KICBhZGQgPSAobGV2ZWwsIGl0ZW0pID0+ClJlY3Vyc2VCaW5hcnlOb2RlKG5vZGUsIHBhcmVudCA9IG51bGwsIGRlcHRoID0gMCkKKG5vZGVzLCBpLCBsZXZlbCkgPT4KICBmeCA9IGogPT4KKG5vZGUsIGopID0+CiAgaXRlbSA9PgpEcmF3Tm9kZSh4LCB5LCBub2RlKQpEcmF3RWRnZShpdGVtLCBwYXJlbnQpCkdldFBhdGhzKHF1ZXJ5LCBwYXJlbnQgPSBwcm9qZWN0LnN2Z0VsZW1lbnQpCihhLCBlKSA9PgpQYXRoVG9Qb2x5bGluZXMocGF0aCwgc3RlcCA9IDAuMDEpCiAgcCA9PgogIHBvbHkgPT4KICBwb2x5ID0+CiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aFRvUG9seWxpbmUocGF0aCwgc3RlcCA9IDAuMDEpCiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aHNUb1BvbHlsaW5lcyhwYXRocywgc3RlcCA9IDAuMDEpCiAgcGF0aCA9PgpPdXRzZXRQYXRoKHBhdGgsIG9mZnNldCwgbWl0ZXJMaW1pdCA9IDIsIGFyY1RvbGVyYW5jZSA9IDAuMDEpCiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgpPdXRzZXRQYXRocyhwYXRocywgb2Zmc2V0LCBtaXRlckxpbWl0ID0gMiwgYXJjVG9sZXJhbmNlID0gMC4yNSkKICBwYXRoID0+CihhLCBwKSA9PgpDbGlwUGF0aChwYXRoLCBjbGlwLCBtb2RlID0gQ2xpcHBlckxpYi5DbGlwVHlwZS5jdFVuaW9uKQogIGFkZCA9IChwLCBjbGlwID0gZmFsc2UpID0+CiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgogIHNhdmVJdGVtU3RhdGVzKGl0ZW1MaXN0LCBnZXQgPSBpdGVtID0+IGlzLgooaXRlbS4KKSkKICBpdGVtID0+CiAgcmVzdG9yZUl0ZW1TdGF0ZXMoaXRlbVN0YXRlcywgLypwcmV0dGllci1pZ25vcmUgKi8gc2V0ID0gKGl0ZW0sIHZhbHVlKSA9PiBpdGVtLgoodmFsdWUgPyAneWVzJyA6ICdubycpKQpFYWdsZU1hcHMocHJvamVjdCkKICB0cmFuc2Zvcm1QYXRoID0gcCA9PgogIGUgPT4KICBkb20yZWFnbGUgPSBub2RlID0+CiAgZWFnbGUyZG9tID0gZWxlbSA9PgogIHBhdGgyZG9tID0gcCA9Pgooa2V5LCB2YWx1ZSkgPT4KKGtleSwgdmFsdWUpID0+ClBhY2thZ2VOYW1lcyhkb2MgPSBwcm9qZWN0LmRvYykKICBlID0+CihbZSwgYl0pID0+CihbZSwgdywgaCwgbSwgdl0pID0+Cih7IGluZGV4LCAuLi5tYXRjaCB9KSA9PgogICh7IHMsIHYsIGluZGV4ZXMgfSwgbWF0Y2gsIGkpID0+CihbdG9rZW4sIGluZGV4XSkgPT4KKFt0b2tlbiwgaW5kZXhdKSA9PgpOZXh0RG9jdW1lbnQobiA9IDEpCiAgKGlkeCwgaSkgPT4KICAoaWR4LCBpKSA9PgpMb2FkRG9jdW1lbnQocHJvamVjdCwgcGFyZW50RWxlbSkKICBlcnIgPT4KKCkgPT4KICBlbnQgPT4KKCkgPT4KICBlbnQgPT4KICByZW5hbWVQYWNrYWdlcygpCiAgYSA9PgogIHZhbHVlID0+CiAgbGF5ZXIgPT4KKCkgPT4KICBsYXllciA9PgooKSA9PgogIGZuID0gZnVuY3Rpb24odikKKCkgPT4KICAubWFrZUdyb3VwID0gZnVuY3Rpb24oeyB0cmFuc2Zvcm0sIC4uLnByb3BzIH0gPSB7fSkKICBpZCA9PgooKSA9PgogIHh4KCkKICAoKSA9PgoodHJhbnNmb3JtKQogICh0YWcsIGF0dHIsIGNoaWxkcmVuID0gW10pID0+CiAgdmFsdWUgPT4KKCkgPT4KUmVjdApDaG9vc2VEb2N1bWVudChwcm9qZWN0LCBpKQpHZW5lcmF0ZVZvcm9ub2kgPSAoKSA9PgpSZWN0CiAgcCA9PgogIGUgPT4KKHsgbFNpdGUsIHJTaXRlLCAuLi5lZGdlIH0pID0+CiAgZSA9PgooeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4KICBlID0+Cih7IHZhLCB2YiwgLi4uZWRnZSB9KSA9PgogIHYgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICBsID0+CiAgdCA9PgogIGwgPT4KICB0ID0+CiAgcCA9PgogIChhY2MsIHsgc2l0ZSwgaGFsZmVkZ2VzIH0pID0+Cih7IHNpdGUgfSkgPT4KUGFja2FnZUNoaWxkcmVuKGVsZW1lbnQsIGxheWVyKQooYywgaSkgPT4KKFtpLCBwXSkgPT4KKFtpLCBlXSkgPT4KRWxlbWVudENoaWxkcmVuKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCihbbmFtZSwgZWxlbWVudF0pID0+CkVsZW1lbnRHZW9tZXRyaWVzKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCiAgZW50ID0+CihbbmFtZSwgY2hpbGRyZW5dKSA9PgooW2ksIGVdKSA9PgooW25hbWUsIGxpbmVzXSkgPT4KICBwdHMgPT4KKFtuYW1lLCBsaW5lcywgcG9seWdvbnNdKSA9PgpOZXdQYXRoKHBhdGgpCk1ha2VGaXRBY3Rpb24gPSBpbmRleCA9PgogIGV2ZW50ID0+Clpvb21GYWN0b3IodmFsID0gY29uZmlnLgopClpvb21Mb2coZmFjdG9yKQpBZGp1c3Rab29tKGwgPSBjb25maWcuCikKQ3JlYXRlR3JibFNvY2tldCA9IChwb3J0ID0gJ3RudDEnKSA9PgpIYW5kbGVNZXNzYWdlKG1zZykKICBwb2ludFN0ciA9PgogIHNvY2tldEZuID0gKCkgPT4KICAuc2VuZCA9ICguLi5hcmdzKSA9PgpBdXRob3JpemF0aW9uRGlhbG9nID0gKHsgb25BdXRoLCAuLi5wcm9wcyB9KSA9PgogIG9uU3VibWl0OiAoKSA9PgogIG9uSW5wdXQ6IGUgPT4KICBvbklucHV0OiBlID0+CiAgb25DbGljazogZSA9PgogIGFyZyA9PgogIC5vbmxvYWQgPSAoKSA9PgogIHJlc3BvbnNlID0+CiAgZSA9PgogIHYgPT4KVGVzdEFyYzogKCkgPT4KKCkgPT4KKHB1c2gsIHN0b3ApID0+CigpID0+CihwdXNoLCBzdG9wKSA9PgogIHRhcmdldCA9PgogIChrZXksIG1vZGlmaWVycyA9IDApID0+CiAgLmZvY3VzU2VhcmNoID0gc3RhdGUgPT4KICBjaGlsZHJlbjogKCkgPT4KICBnZW9tZXRyaWVzOiAoKSA9PgogIHZhbHVlID0+CigpID0+CiAgdGVzdENvbXBvbmVudCA9IHByb3BzID0+CiAgcmVzcCA9PgogIGpzb24gPT4KRmlsZShvYmosIGkpCkZpbGUKRmlsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpCihhLCBiKSA9Pgoob2JqLCBpKSA9PgooYWNjLCBmaWxlKSA9PgogIGkgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB1cGRhdGVJZkNoYW5nZWQgPSAodHJrbCwgbmV3VmFsdWUsIGNhbGxiYWNrKSA9PgogIChlbGVtLCBpKSA9PgogIGNoYW5nZUlucHV0ID0gZSA9PgogIHAgPT4KICBhcmcgPT4KQ29uc3VtZXIgPSBwcm9wcyA9PgooKQogIGxvZyh0eXBlLCB0aW1lLCBtc2cpCkxvZ2dlciA9IHByb3BzID0+CigpCihbdHlwZSwgZCwgdCwgbV0sIGkpID0+CkR1bXBlciA9IHByb3BzID0+CiAgdmFsdWUgPT4KKFtrLCB2XSwgaSkgPT4KQ29tbWFuZGVyID0gKHsgb25Db21tYW5kLCAuLi5wcm9wcyB9KSA9PgogIGhhbmRsZXIgPSBlID0+CiAgdG9nZ2xlID0gdHJrbCA9PgpMYXllciA9ICh7IHRpdGxlLCBuYW1lLCBsYWJlbCwgaSwgY29sb3IsIGVsZW1lbnQsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4KICBzZXRWaXNpYmxlID0gdmFsdWUgPT4KICBlID0+CiAgZSA9PgogIGwgPT4KICBsID0+CiAgKGl0ZW0sIHZhbHVlKSA9PgogIGl0ZW0gPT4KICBsID0+CihbbCwgc3RhdGVdKSA9PgogIGUgPT4KICBvbk1vdXNlTW92ZTogZSA9PgogIG9uTW91c2VVcDogZSA9PgpEb2N1bWVudExpc3QKICBjb25zdHJ1Y3RvcigpCihwdXNoLCBzdG9wKSA9PgogIGFkZChuYW1lLCBjb21wb25lbnQpCiAgYWRkRW50cnkoW25hbWUsIGNvbXBvbmVudF0pCiAgcmVtb3ZlKG5hbWUpCiAgdXBkYXRlKCkKICBmbjogZSA9PgogIGZuOiAoKSA9PgogIG9wZW4gPT4KICBwcm9wcyA9PgogIHByb3BzID0+CiAgZSA9PgogIGkgPT4KICBpID0+Cih7IGNvb3JkIH0pID0+CiAgc2lkZSA9PgogIGNyZWF0ZTogKHByb2plY3QsIHByb3BzID0ge30pID0+CiAgYSA9PgogIGUgPT4KICBlID0+CiAgbmFtZSA9PgogIGUgPT4KICBtYWtlTGF5ZXJOYW1lKG5hbWUsIHNpZGUpCiAgZm46ICgpID0+CiAgb25DaGFuZ2UoZXZlbnQpCiAgcHJvcHMgPT4KICBwcm9wcyA9PgogIHByb3BzID0+CihlLCBwLCBpKSA9PgogIG1ha2VTb3J0Q29tcGFyZToga2V5ID0+CiAgZnVuY3Rpb24oYSwgYikKICBmdW5jdGlvbihhLCBiKQogIG9uQ29tbWFuZDogY21kU3RyID0+CiAgaGFuZGxlQ2hhbmdlOiBlID0+CiAgZXZlbnQgPT4KICBlID0+Ck1vdmVFdmVudChldmVudCwgcHJldkV2ZW50KQpXYWxrVXAoZSkKICBlID0+CiAgeiA9PgogIHAgPT4KICBlID0+CiAgZSA9PgogIGUgPT4KICB2ID0+CiAgbCA9PgogIGUgPT4KICAoKSA9PgogIChlLCBkZXB0aCkgPT4KICBjbGFzc2VzID0+CiAgZSA9PgogIGUgPT4KICAoYSwgYikgPT4KICAoYSwgYikgPT4KTm9kZQogIGUgPT4KICAocCwgZCwgc2V0LCBzdG9wKSA9PgogIGUgPT4KICBlID0+ClRvdWNoRXZlbnQoZXZlbnQpCiAgZSA9PgoocCwgaSkgPT4KKGEsIGIpID0+CiAgc2l6ZSA9PgogIGJvcmRlciA9PgogIHIgPT4KICBtb2QobiwgbSkKKCkgPT4KICAocG9zLCBsYXN0LCBmaXJzdCkgPT4KICBjYW5jZWwoKQogIC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZSkKICAucHJvY2Vzc0V2ZW50cyA9IGZ1bmN0aW9uIGV2ZW50TG9vcCgpCiAgZXZlbnQgPT4KICBlID0+CiAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6ICgpID0+CiAgcHJpbnQ6IHR4dCA9PgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					174,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/main.js",
						"symkeys":
						[
							[
								9322,
								9327
							],
							[
								9509,
								9515
							],
							[
								9568,
								9573
							],
							[
								9626,
								9630
							],
							[
								9704,
								9708
							],
							[
								9730,
								9739
							],
							[
								10398,
								10417
							],
							[
								10516,
								10520
							],
							[
								10692,
								10699
							],
							[
								10730,
								10740
							],
							[
								10997,
								11021
							],
							[
								11062,
								11083
							],
							[
								11085,
								11090
							],
							[
								11098,
								11103
							],
							[
								11125,
								11160
							],
							[
								11274,
								11292
							],
							[
								11374,
								11379
							],
							[
								11566,
								11587
							],
							[
								11720,
								11738
							],
							[
								12417,
								12442
							],
							[
								12488,
								12506
							],
							[
								13483,
								13510
							],
							[
								13865,
								13890
							],
							[
								14229,
								14263
							],
							[
								14779,
								14811
							],
							[
								14986,
								14996
							],
							[
								15129,
								15139
							],
							[
								15258,
								15268
							],
							[
								15435,
								15459
							],
							[
								15518,
								15567
							],
							[
								15808,
								15830
							],
							[
								15837,
								15861
							],
							[
								15869,
								15898
							],
							[
								16705,
								16757
							],
							[
								17210,
								17214
							],
							[
								17241,
								17246
							],
							[
								17681,
								17767
							],
							[
								17965,
								17987
							],
							[
								18500,
								18532
							],
							[
								18860,
								18894
							],
							[
								19009,
								19014
							],
							[
								19039,
								19075
							],
							[
								19264,
								19289
							],
							[
								19480,
								19505
							],
							[
								19560,
								19564
							],
							[
								19619,
								19623
							],
							[
								20065,
								20082
							],
							[
								20271,
								20286
							],
							[
								20409,
								20426
							],
							[
								20478,
								20482
							],
							[
								20527,
								20531
							],
							[
								20562,
								20566
							],
							[
								20604,
								20609
							],
							[
								20696,
								20715
							],
							[
								20888,
								20923
							],
							[
								20961,
								20969
							],
							[
								21038,
								21042
							],
							[
								21605,
								21609
							],
							[
								21668,
								21672
							],
							[
								22241,
								22247
							],
							[
								22422,
								22426
							],
							[
								22447,
								22451
							],
							[
								22486,
								22490
							],
							[
								22750,
								22763
							],
							[
								22886,
								22890
							],
							[
								23084,
								23100
							],
							[
								23366,
								23371
							],
							[
								23484,
								23493
							],
							[
								23565,
								23574
							],
							[
								23651,
								23660
							],
							[
								24300,
								24322
							],
							[
								24499,
								24559
							],
							[
								24808,
								24828
							],
							[
								24839,
								24848
							],
							[
								24903,
								24915
							],
							[
								24960,
								24967
							],
							[
								25053,
								25084
							],
							[
								25406,
								25439
							],
							[
								26478,
								26531
							],
							[
								26581,
								26590
							],
							[
								26665,
								26708
							],
							[
								26787,
								26791
							],
							[
								26920,
								26927
							],
							[
								26954,
								26961
							],
							[
								27039,
								27060
							],
							[
								27315,
								27357
							],
							[
								27480,
								27501
							],
							[
								27736,
								27781
							],
							[
								27926,
								27933
							],
							[
								27975,
								28045
							],
							[
								28482,
								28507
							],
							[
								28530,
								28534
							],
							[
								28554,
								28567
							],
							[
								28683,
								28755
							],
							[
								28974,
								28981
							],
							[
								29064,
								29073
							],
							[
								29505,
								29570
							],
							[
								29657,
								29683
							],
							[
								29896,
								29921
							],
							[
								29944,
								29948
							],
							[
								29968,
								29981
							],
							[
								30035,
								30086
							],
							[
								30088,
								30094
							],
							[
								30103,
								30105
							],
							[
								30130,
								30137
							],
							[
								30161,
								30250
							],
							[
								30257,
								30280
							],
							[
								30343,
								30370
							],
							[
								30379,
								30399
							],
							[
								30534,
								30538
							],
							[
								30708,
								30727
							],
							[
								30811,
								30830
							],
							[
								30923,
								30938
							],
							[
								31798,
								31813
							],
							[
								31899,
								31914
							],
							[
								32571,
								32612
							],
							[
								32812,
								32816
							],
							[
								32846,
								32857
							],
							[
								32940,
								32960
							],
							[
								33165,
								33189
							],
							[
								33247,
								33287
							],
							[
								33659,
								33678
							],
							[
								33729,
								33748
							],
							[
								34610,
								34638
							],
							[
								34838,
								34850
							],
							[
								34881,
								34893
							],
							[
								35404,
								35452
							],
							[
								35677,
								35683
							],
							[
								35828,
								35833
							],
							[
								35859,
								35866
							],
							[
								35924,
								35929
							],
							[
								35957,
								35964
							],
							[
								36587,
								36603
							],
							[
								36726,
								36730
							],
							[
								37238,
								37246
							],
							[
								37689,
								37697
							],
							[
								37750,
								37755
							],
							[
								37796,
								37804
							],
							[
								37944,
								37949
							],
							[
								38036,
								38052
							],
							[
								39723,
								39728
							],
							[
								40361,
								40412
							],
							[
								40815,
								40820
							],
							[
								40839,
								40844
							],
							[
								41152,
								41169
							],
							[
								41329,
								41335
							],
							[
								41464,
								41484
							],
							[
								41561,
								41591
							],
							[
								41767,
								41775
							],
							[
								41874,
								41885
							],
							[
								42001,
								42005
							],
							[
								42732,
								42773
							],
							[
								43396,
								43419
							],
							[
								44008,
								44012
							],
							[
								44156,
								44160
							],
							[
								44672,
								44676
							],
							[
								44691,
								44721
							],
							[
								44769,
								44773
							],
							[
								44787,
								44817
							],
							[
								44871,
								44875
							],
							[
								44894,
								44918
							],
							[
								44983,
								44987
							],
							[
								45027,
								45051
							],
							[
								45169,
								45173
							],
							[
								45199,
								45203
							],
							[
								45273,
								45277
							],
							[
								45303,
								45307
							],
							[
								45400,
								45404
							],
							[
								45762,
								45797
							],
							[
								45908,
								45921
							],
							[
								46362,
								46402
							],
							[
								46448,
								46457
							],
							[
								46473,
								46484
							],
							[
								46576,
								46587
							],
							[
								46633,
								46689
							],
							[
								46696,
								46702
							],
							[
								46784,
								46804
							],
							[
								46851,
								46909
							],
							[
								46916,
								46922
							],
							[
								46965,
								46972
							],
							[
								46989,
								47010
							],
							[
								47072,
								47083
							],
							[
								47313,
								47331
							],
							[
								47371,
								47377
							],
							[
								47410,
								47438
							],
							[
								47476,
								47498
							],
							[
								47583,
								47607
							],
							[
								47608,
								47622
							],
							[
								48742,
								48775
							],
							[
								48784,
								48785
							],
							[
								48837,
								48861
							],
							[
								48902,
								48933
							],
							[
								48942,
								48943
							],
							[
								49187,
								49230
							],
							[
								49544,
								49571
							],
							[
								49864,
								49875
							],
							[
								50081,
								50097
							],
							[
								50411,
								50431
							],
							[
								51316,
								51363
							],
							[
								51746,
								51761
							],
							[
								51978,
								51991
							],
							[
								52268,
								52281
							],
							[
								52487,
								52500
							],
							[
								52719,
								52725
							],
							[
								52775,
								52796
							],
							[
								56780,
								56791
							],
							[
								57627,
								57631
							],
							[
								58045,
								58050
							],
							[
								58199,
								58213
							],
							[
								58231,
								58236
							],
							[
								58349,
								58370
							],
							[
								58428,
								58433
							],
							[
								58541,
								58562
							],
							[
								58787,
								58800
							],
							[
								58801,
								58828
							],
							[
								58945,
								58968
							],
							[
								59250,
								59265
							],
							[
								59290,
								59307
							],
							[
								59374,
								59382
							],
							[
								59455,
								59460
							],
							[
								59566,
								59590
							],
							[
								60351,
								60358
							],
							[
								60388,
								60395
							],
							[
								60717,
								60744
							],
							[
								60840,
								60844
							],
							[
								61209,
								61245
							],
							[
								61378,
								61387
							],
							[
								61422,
								61433
							],
							[
								61485,
								61499
							],
							[
								62079,
								62083
							],
							[
								62758,
								62766
							],
							[
								62882,
								62890
							],
							[
								63010,
								63018
							],
							[
								63133,
								63141
							],
							[
								63198,
								63206
							],
							[
								63678,
								63686
							],
							[
								63871,
								63918
							],
							[
								64064,
								64077
							],
							[
								64240,
								64258
							],
							[
								64426,
								64430
							],
							[
								64502,
								64509
							],
							[
								64757,
								64776
							],
							[
								64808,
								64826
							],
							[
								65352,
								65372
							],
							[
								65622,
								65639
							],
							[
								65847,
								65865
							],
							[
								66142,
								66165
							],
							[
								66616,
								66633
							],
							[
								66725,
								66733
							],
							[
								66952,
								66966
							],
							[
								67104,
								67144
							],
							[
								67209,
								67223
							],
							[
								67798,
								67814
							],
							[
								67852,
								67927
							],
							[
								68162,
								68183
							],
							[
								68287,
								68291
							],
							[
								68770,
								68784
							],
							[
								69074,
								69078
							],
							[
								69145,
								69149
							],
							[
								69426,
								69443
							],
							[
								69611,
								69619
							],
							[
								69812,
								69816
							],
							[
								69912,
								69927
							],
							[
								70173,
								70177
							],
							[
								70384,
								70401
							],
							[
								70493,
								70508
							],
							[
								71301,
								71313
							],
							[
								71320,
								71333
							],
							[
								71371,
								71386
							],
							[
								71490,
								71510
							],
							[
								71690,
								71717
							],
							[
								71771,
								71783
							],
							[
								71901,
								71909
							],
							[
								72358,
								72366
							],
							[
								73188,
								73197
							],
							[
								73432,
								73439
							],
							[
								73538,
								73558
							],
							[
								73745,
								73765
							],
							[
								74126,
								74136
							],
							[
								74939,
								74943
							],
							[
								75018,
								75022
							],
							[
								75036,
								75050
							],
							[
								75307,
								75314
							],
							[
								77657,
								77689
							],
							[
								78086,
								78090
							],
							[
								78296,
								78300
							],
							[
								78368,
								78372
							],
							[
								78456,
								78463
							],
							[
								78542,
								78546
							],
							[
								79605,
								79651
							],
							[
								80081,
								80090
							],
							[
								81192,
								81207
							],
							[
								81421,
								81437
							],
							[
								81598,
								81614
							],
							[
								81789,
								81805
							],
							[
								82828,
								82846
							],
							[
								83044,
								83067
							],
							[
								83109,
								83124
							],
							[
								83480,
								83495
							],
							[
								83908,
								83928
							],
							[
								84381,
								84399
							],
							[
								85115,
								85124
							],
							[
								85167,
								85171
							],
							[
								85383,
								85421
							],
							[
								85596,
								85619
							],
							[
								85753,
								85758
							],
							[
								85797,
								85807
							],
							[
								85966,
								85970
							],
							[
								86107,
								86111
							],
							[
								86150,
								86155
							],
							[
								86560,
								86564
							],
							[
								86598,
								86612
							],
							[
								86616,
								86630
							],
							[
								86637,
								86641
							],
							[
								86662,
								86677
							],
							[
								86708,
								86722
							],
							[
								86829,
								86840
							],
							[
								86885,
								86890
							],
							[
								86945,
								86950
							],
							[
								87400,
								87410
							],
							[
								87501,
								87511
							],
							[
								87524,
								87528
							],
							[
								87702,
								87706
							],
							[
								87867,
								87888
							],
							[
								88958,
								88962
							],
							[
								89069,
								89073
							],
							[
								89362,
								89390
							],
							[
								89841,
								89845
							],
							[
								90301,
								90310
							],
							[
								90394,
								90403
							],
							[
								90507,
								90515
							],
							[
								91021,
								91030
							],
							[
								91179,
								91183
							],
							[
								91248,
								91274
							],
							[
								91914,
								91919
							],
							[
								92194,
								92216
							],
							[
								93222,
								93243
							],
							[
								93448,
								93476
							],
							[
								93843,
								93886
							],
							[
								95211,
								95220
							],
							[
								96000,
								96004
							],
							[
								96739,
								96766
							],
							[
								96889,
								96902
							]
						],
						"symlist":
						[
							"() =>",
							"res =>",
							"() =>",
							"r =>",
							"r =>",
							"entries()",
							"GetProject = arg =>",
							"p =>",
							" () =>",
							" value =>",
							"add = (arr, ...items) =>",
							"useSlot = (arr, i) =>",
							"() =>",
							" v =>",
							"trklGetSet = (get, set) => value =>",
							"MouseEvents = h =>",
							"() =>",
							"(parent, delegate) =>",
							"append_to(elem, p)",
							"function DrawSVG(...args)",
							"append_to(elem, p)",
							" function adjustViewBox(e)",
							"function calcViewBox(box)",
							"function setViewBox(svgOwner, box)",
							"ElementToXML = (e, predicate) =>",
							" (v, k) =>",
							" (v, k) =>",
							" (v, k) =>",
							"async readFile(filename)",
							"async writeFile(filename, data, overwrite = true)",
							"async exists(filename)",
							"async realpath(filename)",
							"async function LoadFile(file)",
							"async function SaveFile(filename, data, contentType)",
							"s =>",
							"() =>",
							"async function SaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])",
							"predicate = element =>",
							"async function LoadSVG(filename)",
							"async function LoadImage(filename)",
							"() =>",
							" function RenderComponent(component)",
							"ModifyColors = fn => e =>",
							"FindLayer = name_or_id =>",
							"n =>",
							"l =>",
							"(id = '#geom') =>",
							"(props = {}) =>",
							"maxZIndex = () =>",
							"e =>",
							"z =>",
							"z =>",
							"() =>",
							"randomColor = () =>",
							"function DrawArc(start, end, angle)",
							"props =>",
							"p =>",
							"a =>",
							"m =>",
							"hex =>",
							"p =>",
							"p =>",
							"p =>",
							"({ x, y }) =>",
							"a =>",
							"({ x, y }, i) =>",
							" e =>",
							"(l, i) =>",
							"(p, i) =>",
							"(p, i) =>",
							"add = (level, item) =>",
							" function RecurseBinaryNode(node, parent = null, depth = 0)",
							"(nodes, i, level) =>",
							"fx = j =>",
							"(node, j) =>",
							"item =>",
							" function DrawNode(x, y, node)",
							" function DrawEdge(item, parent)",
							"function GetPaths(query, parent = project.svgElement)",
							"(a, e) =>",
							"function PathToPolylines(path, step = 0.01)",
							"p =>",
							"poly =>",
							"poly =>",
							" (p, d, set, stop) =>",
							"function PathToPolyline(path, step = 0.01)",
							" (p, d, set, stop) =>",
							"function PathsToPolylines(paths, step = 0.01)",
							"path =>",
							"function OutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function OutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)",
							"path =>",
							"(a, p) =>",
							"function ClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)",
							"add = (p, clip = false) =>",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function saveItemStates(itemList, get = item => is.",
							"(item.",
							"))",
							"item =>",
							"function restoreItemStates(itemStates, /* prettier-ignore */ set = (item, value) => item.",
							"(value ? 'yes' : 'no'))",
							"function EagleMaps(project)",
							"transformPath = p =>",
							"e =>",
							"dom2eagle = node =>",
							"eagle2dom = elem =>",
							"path2dom = p =>",
							"(key, value) =>",
							"(key, value) =>",
							"function* PackageNames(doc = project.doc)",
							"e =>",
							"([e, b]) =>",
							"([e, w, h, m, v]) =>",
							"({ index, ...match }) =>",
							" ({ s, v, indexes }, match, i) =>",
							"([token, index]) =>",
							"([token, index]) =>",
							"function NextDocument(n = 1)",
							" (idx, i) =>",
							" (idx, i) =>",
							"async function LoadDocument(project, parentElem)",
							"err =>",
							"() =>",
							" ent =>",
							"() =>",
							" ent =>",
							"renamePackages()",
							"a =>",
							"value =>",
							"layer =>",
							"() =>",
							"layer =>",
							"() =>",
							"fn = function(v)",
							"() =>",
							".makeGroup = function({ transform, ...props } = {})",
							"id =>",
							"() =>",
							" function xx()",
							" () =>",
							"function (transform)",
							" (tag, attr, children = []) =>",
							"value =>",
							"async () =>",
							"Rect",
							"async function ChooseDocument(project, i)",
							"GenerateVoronoi = () =>",
							"Rect",
							"p =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ va, vb, ...edge }) =>",
							"v =>",
							"add = (arr, ...items) =>",
							"l =>",
							"t =>",
							"l =>",
							"t =>",
							"p =>",
							" (acc, { site, halfedges }) =>",
							"({ site }) =>",
							"function PackageChildren(element, layer)",
							"(c, i) =>",
							"([i, p]) =>",
							"([i, e]) =>",
							"function ElementChildren(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							"([name, element]) =>",
							"function ElementGeometries(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							" ent =>",
							"([name, children]) =>",
							"([i, e]) =>",
							"([name, lines]) =>",
							"pts =>",
							"([name, lines, polygons]) =>",
							"function NewPath(path)",
							"MakeFitAction = index =>",
							"async event =>",
							"function ZoomFactor(val = config.",
							")",
							"function ZoomLog(factor)",
							"function AdjustZoom(l = config.",
							")",
							"CreateGrblSocket = async (port = 'tnt1') =>",
							"function HandleMessage(msg)",
							"pointStr =>",
							"socketFn = () =>",
							".send = (...args) =>",
							"AuthorizationDialog = ({ onAuth, ...props }) =>",
							"onSubmit: () =>",
							"onInput: e =>",
							"onInput: e =>",
							"onClick: e =>",
							"arg =>",
							".onload = async () =>",
							"response =>",
							"e =>",
							" v =>",
							"TestArc: () =>",
							"() =>",
							"async (push, stop) =>",
							"() =>",
							"async (push, stop) =>",
							" target =>",
							" (key, modifiers = 0) =>",
							".focusSearch = state =>",
							"children: () =>",
							"geometries: () =>",
							"value =>",
							"() =>",
							"testComponent = props =>",
							"resp =>",
							"json =>",
							" function File(obj, i)",
							"File",
							"File.prototype.toString = function()",
							"(a, b) =>",
							"(obj, i) =>",
							"(acc, file) =>",
							"i =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"updateIfChanged = (trkl, newValue, callback) =>",
							" (elem, i) =>",
							"changeInput = e =>",
							"p =>",
							" arg =>",
							"Consumer = props =>",
							"async function* ()",
							"log(type, time, msg)",
							"Logger = props =>",
							"async function* ()",
							"([type, d, t, m], i) =>",
							"Dumper = props =>",
							"value =>",
							"([k, v], i) =>",
							"Commander = ({ onCommand, ...props }) =>",
							"handler = e =>",
							"toggle = trkl =>",
							"Layer = ({ title, name, label, i, color, element, className, ...props }) =>",
							"setVisible = value =>",
							"e =>",
							" e =>",
							"l =>",
							"l =>",
							" (item, value) =>",
							" item =>",
							"l =>",
							"([l, state]) =>",
							"e =>",
							"onMouseMove: e =>",
							"onMouseUp: e =>",
							"DocumentList",
							"constructor()",
							"(push, stop) =>",
							"add(name, component)",
							"addEntry([name, component])",
							"remove(name)",
							"update()",
							"fn: e =>",
							"fn: () =>",
							"open =>",
							" props =>",
							" props =>",
							"async e =>",
							"i =>",
							"i =>",
							"({ coord }) =>",
							"side =>",
							"create: (project, props = {}) =>",
							"a =>",
							"e =>",
							"e =>",
							"name =>",
							"e =>",
							" function makeLayerName(name, side)",
							"fn: () =>",
							"onChange(event)",
							" props =>",
							" props =>",
							" props =>",
							"async (e, p, i) =>",
							"makeSortCompare: key =>",
							" function(a, b)",
							" function(a, b)",
							"onCommand: cmdStr =>",
							"handleChange: e =>",
							" event =>",
							"e =>",
							" function MoveEvent(event, prevEvent)",
							" function* WalkUp(e)",
							" e =>",
							" z =>",
							"p =>",
							"e =>",
							" e =>",
							"e =>",
							" v =>",
							" l =>",
							"e =>",
							" () =>",
							" (e, depth) =>",
							" classes =>",
							" e =>",
							" e =>",
							" (a, b) =>",
							" (a, b) =>",
							"Node",
							"e =>",
							" (p, d, set, stop) =>",
							"e =>",
							"e =>",
							" function TouchEvent(event)",
							"e =>",
							"(p, i) =>",
							"(a, b) =>",
							" size =>",
							"border =>",
							"r =>",
							" function mod(n, m)",
							"() =>",
							" (pos, last, first) =>",
							" function cancel()",
							".oncontextmenu = function(e)",
							".processEvents = async function eventLoop()",
							" event =>",
							"e =>",
							"onRuntimeInitialized: () =>",
							"print: txt =>"
						]
					},
					"AQAAAAAAAAAAAAAAAxYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					175,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/main.js",
						"symkeys":
						[
							[
								9322,
								9327
							],
							[
								9509,
								9515
							],
							[
								9568,
								9573
							],
							[
								9626,
								9630
							],
							[
								9704,
								9708
							],
							[
								9730,
								9739
							],
							[
								10398,
								10417
							],
							[
								10516,
								10520
							],
							[
								10692,
								10699
							],
							[
								10730,
								10740
							],
							[
								10997,
								11021
							],
							[
								11062,
								11083
							],
							[
								11085,
								11090
							],
							[
								11098,
								11103
							],
							[
								11125,
								11160
							],
							[
								11274,
								11292
							],
							[
								11374,
								11379
							],
							[
								11566,
								11587
							],
							[
								11720,
								11738
							],
							[
								12417,
								12442
							],
							[
								12488,
								12506
							],
							[
								13483,
								13510
							],
							[
								13865,
								13890
							],
							[
								14229,
								14263
							],
							[
								14779,
								14811
							],
							[
								14986,
								14996
							],
							[
								15129,
								15139
							],
							[
								15258,
								15268
							],
							[
								15435,
								15459
							],
							[
								15518,
								15567
							],
							[
								15808,
								15830
							],
							[
								15837,
								15861
							],
							[
								15869,
								15898
							],
							[
								16705,
								16757
							],
							[
								17210,
								17214
							],
							[
								17241,
								17246
							],
							[
								17681,
								17767
							],
							[
								17965,
								17987
							],
							[
								18500,
								18532
							],
							[
								18860,
								18894
							],
							[
								19009,
								19014
							],
							[
								19039,
								19075
							],
							[
								19264,
								19289
							],
							[
								19480,
								19505
							],
							[
								19560,
								19564
							],
							[
								19619,
								19623
							],
							[
								20065,
								20082
							],
							[
								20271,
								20286
							],
							[
								20409,
								20426
							],
							[
								20478,
								20482
							],
							[
								20527,
								20531
							],
							[
								20562,
								20566
							],
							[
								20604,
								20609
							],
							[
								20696,
								20715
							],
							[
								20888,
								20923
							],
							[
								20961,
								20969
							],
							[
								21038,
								21042
							],
							[
								21605,
								21609
							],
							[
								21668,
								21672
							],
							[
								22241,
								22247
							],
							[
								22422,
								22426
							],
							[
								22447,
								22451
							],
							[
								22486,
								22490
							],
							[
								22750,
								22763
							],
							[
								22886,
								22890
							],
							[
								23084,
								23100
							],
							[
								23366,
								23371
							],
							[
								23484,
								23493
							],
							[
								23565,
								23574
							],
							[
								23651,
								23660
							],
							[
								24300,
								24322
							],
							[
								24499,
								24559
							],
							[
								24808,
								24828
							],
							[
								24839,
								24848
							],
							[
								24903,
								24915
							],
							[
								24960,
								24967
							],
							[
								25053,
								25084
							],
							[
								25406,
								25439
							],
							[
								26478,
								26531
							],
							[
								26581,
								26590
							],
							[
								26665,
								26708
							],
							[
								26787,
								26791
							],
							[
								26920,
								26927
							],
							[
								26954,
								26961
							],
							[
								27039,
								27060
							],
							[
								27315,
								27357
							],
							[
								27480,
								27501
							],
							[
								27736,
								27781
							],
							[
								27926,
								27933
							],
							[
								27975,
								28045
							],
							[
								28482,
								28507
							],
							[
								28530,
								28534
							],
							[
								28554,
								28567
							],
							[
								28683,
								28755
							],
							[
								28974,
								28981
							],
							[
								29064,
								29073
							],
							[
								29505,
								29570
							],
							[
								29657,
								29683
							],
							[
								29896,
								29921
							],
							[
								29944,
								29948
							],
							[
								29968,
								29981
							],
							[
								30035,
								30086
							],
							[
								30088,
								30094
							],
							[
								30103,
								30105
							],
							[
								30130,
								30137
							],
							[
								30161,
								30250
							],
							[
								30257,
								30280
							],
							[
								30343,
								30370
							],
							[
								30379,
								30399
							],
							[
								30534,
								30538
							],
							[
								30708,
								30727
							],
							[
								30811,
								30830
							],
							[
								30923,
								30938
							],
							[
								31798,
								31813
							],
							[
								31899,
								31914
							],
							[
								32571,
								32612
							],
							[
								32812,
								32816
							],
							[
								32846,
								32857
							],
							[
								32940,
								32960
							],
							[
								33165,
								33189
							],
							[
								33247,
								33287
							],
							[
								33659,
								33678
							],
							[
								33729,
								33748
							],
							[
								34610,
								34638
							],
							[
								34838,
								34850
							],
							[
								34881,
								34893
							],
							[
								35404,
								35452
							],
							[
								35677,
								35683
							],
							[
								35828,
								35833
							],
							[
								35859,
								35866
							],
							[
								35924,
								35929
							],
							[
								35957,
								35964
							],
							[
								36587,
								36603
							],
							[
								36726,
								36730
							],
							[
								37238,
								37246
							],
							[
								37689,
								37697
							],
							[
								37750,
								37755
							],
							[
								37796,
								37804
							],
							[
								37944,
								37949
							],
							[
								38036,
								38052
							],
							[
								39723,
								39728
							],
							[
								40361,
								40412
							],
							[
								40815,
								40820
							],
							[
								40839,
								40844
							],
							[
								41152,
								41169
							],
							[
								41329,
								41335
							],
							[
								41464,
								41484
							],
							[
								41561,
								41591
							],
							[
								41767,
								41775
							],
							[
								41874,
								41885
							],
							[
								42001,
								42005
							],
							[
								42732,
								42773
							],
							[
								43396,
								43419
							],
							[
								44008,
								44012
							],
							[
								44156,
								44160
							],
							[
								44672,
								44676
							],
							[
								44691,
								44721
							],
							[
								44769,
								44773
							],
							[
								44787,
								44817
							],
							[
								44871,
								44875
							],
							[
								44894,
								44918
							],
							[
								44983,
								44987
							],
							[
								45027,
								45051
							],
							[
								45169,
								45173
							],
							[
								45199,
								45203
							],
							[
								45273,
								45277
							],
							[
								45303,
								45307
							],
							[
								45400,
								45404
							],
							[
								45762,
								45797
							],
							[
								45908,
								45921
							],
							[
								46362,
								46402
							],
							[
								46448,
								46457
							],
							[
								46473,
								46484
							],
							[
								46576,
								46587
							],
							[
								46633,
								46689
							],
							[
								46696,
								46702
							],
							[
								46784,
								46804
							],
							[
								46851,
								46909
							],
							[
								46916,
								46922
							],
							[
								46965,
								46972
							],
							[
								46989,
								47010
							],
							[
								47072,
								47083
							],
							[
								47313,
								47331
							],
							[
								47371,
								47377
							],
							[
								47410,
								47438
							],
							[
								47476,
								47498
							],
							[
								47583,
								47607
							],
							[
								47608,
								47622
							],
							[
								48742,
								48775
							],
							[
								48784,
								48785
							],
							[
								48837,
								48861
							],
							[
								48902,
								48933
							],
							[
								48942,
								48943
							],
							[
								49187,
								49230
							],
							[
								49544,
								49571
							],
							[
								49864,
								49875
							],
							[
								50081,
								50097
							],
							[
								50411,
								50431
							],
							[
								51316,
								51363
							],
							[
								51746,
								51761
							],
							[
								51978,
								51991
							],
							[
								52268,
								52281
							],
							[
								52487,
								52500
							],
							[
								52719,
								52725
							],
							[
								52775,
								52796
							],
							[
								56792,
								56803
							],
							[
								57639,
								57643
							],
							[
								58057,
								58062
							],
							[
								58211,
								58225
							],
							[
								58243,
								58248
							],
							[
								58361,
								58382
							],
							[
								58440,
								58445
							],
							[
								58553,
								58574
							],
							[
								58799,
								58812
							],
							[
								58813,
								58840
							],
							[
								58957,
								58980
							],
							[
								59262,
								59277
							],
							[
								59302,
								59319
							],
							[
								59386,
								59394
							],
							[
								59467,
								59472
							],
							[
								59578,
								59602
							],
							[
								60363,
								60370
							],
							[
								60400,
								60407
							],
							[
								60729,
								60756
							],
							[
								60852,
								60856
							],
							[
								61221,
								61257
							],
							[
								61390,
								61399
							],
							[
								61434,
								61445
							],
							[
								61497,
								61511
							],
							[
								62091,
								62095
							],
							[
								62770,
								62778
							],
							[
								62894,
								62902
							],
							[
								63022,
								63030
							],
							[
								63145,
								63153
							],
							[
								63210,
								63218
							],
							[
								63690,
								63698
							],
							[
								63883,
								63930
							],
							[
								64076,
								64089
							],
							[
								64252,
								64270
							],
							[
								64438,
								64442
							],
							[
								64514,
								64521
							],
							[
								64769,
								64788
							],
							[
								64820,
								64838
							],
							[
								65364,
								65384
							],
							[
								65634,
								65651
							],
							[
								65859,
								65877
							],
							[
								66154,
								66177
							],
							[
								66628,
								66645
							],
							[
								66737,
								66745
							],
							[
								66964,
								66978
							],
							[
								67116,
								67156
							],
							[
								67221,
								67235
							],
							[
								67810,
								67826
							],
							[
								67864,
								67939
							],
							[
								68174,
								68195
							],
							[
								68299,
								68303
							],
							[
								68782,
								68796
							],
							[
								69086,
								69090
							],
							[
								69157,
								69161
							],
							[
								69438,
								69455
							],
							[
								69623,
								69631
							],
							[
								69824,
								69828
							],
							[
								69924,
								69939
							],
							[
								70185,
								70189
							],
							[
								70396,
								70413
							],
							[
								70505,
								70520
							],
							[
								71313,
								71325
							],
							[
								71332,
								71345
							],
							[
								71383,
								71398
							],
							[
								71502,
								71522
							],
							[
								71702,
								71729
							],
							[
								71783,
								71795
							],
							[
								71913,
								71921
							],
							[
								72370,
								72378
							],
							[
								73200,
								73209
							],
							[
								73444,
								73451
							],
							[
								73550,
								73570
							],
							[
								73757,
								73777
							],
							[
								74138,
								74148
							],
							[
								74951,
								74955
							],
							[
								75030,
								75034
							],
							[
								75048,
								75062
							],
							[
								75319,
								75326
							],
							[
								77669,
								77701
							],
							[
								78098,
								78102
							],
							[
								78308,
								78312
							],
							[
								78380,
								78384
							],
							[
								78468,
								78475
							],
							[
								78554,
								78558
							],
							[
								79617,
								79663
							],
							[
								80093,
								80102
							],
							[
								81204,
								81219
							],
							[
								81433,
								81449
							],
							[
								81610,
								81626
							],
							[
								81801,
								81817
							],
							[
								82840,
								82858
							],
							[
								83056,
								83079
							],
							[
								83121,
								83136
							],
							[
								83492,
								83507
							],
							[
								83920,
								83940
							],
							[
								84393,
								84411
							],
							[
								85127,
								85136
							],
							[
								85179,
								85183
							],
							[
								85395,
								85433
							],
							[
								85608,
								85631
							],
							[
								85765,
								85770
							],
							[
								85809,
								85819
							],
							[
								85978,
								85982
							],
							[
								86119,
								86123
							],
							[
								86162,
								86167
							],
							[
								86572,
								86576
							],
							[
								86610,
								86624
							],
							[
								86628,
								86642
							],
							[
								86649,
								86653
							],
							[
								86674,
								86689
							],
							[
								86720,
								86734
							],
							[
								86841,
								86852
							],
							[
								86897,
								86902
							],
							[
								86957,
								86962
							],
							[
								87412,
								87422
							],
							[
								87513,
								87523
							],
							[
								87536,
								87540
							],
							[
								87714,
								87718
							],
							[
								87879,
								87900
							],
							[
								88970,
								88974
							],
							[
								89081,
								89085
							],
							[
								89374,
								89402
							],
							[
								89853,
								89857
							],
							[
								90313,
								90322
							],
							[
								90406,
								90415
							],
							[
								90519,
								90527
							],
							[
								91033,
								91042
							],
							[
								91191,
								91195
							],
							[
								91260,
								91286
							],
							[
								91926,
								91931
							],
							[
								92206,
								92228
							],
							[
								93234,
								93255
							],
							[
								93460,
								93488
							],
							[
								93855,
								93898
							],
							[
								95223,
								95232
							],
							[
								96012,
								96016
							],
							[
								96751,
								96778
							],
							[
								96901,
								96914
							]
						],
						"symlist":
						[
							"() =>",
							"res =>",
							"() =>",
							"r =>",
							"r =>",
							"entries()",
							"GetProject = arg =>",
							"p =>",
							" () =>",
							" value =>",
							"add = (arr, ...items) =>",
							"useSlot = (arr, i) =>",
							"() =>",
							" v =>",
							"trklGetSet = (get, set) => value =>",
							"MouseEvents = h =>",
							"() =>",
							"(parent, delegate) =>",
							"append_to(elem, p)",
							"function DrawSVG(...args)",
							"append_to(elem, p)",
							" function adjustViewBox(e)",
							"function calcViewBox(box)",
							"function setViewBox(svgOwner, box)",
							"ElementToXML = (e, predicate) =>",
							" (v, k) =>",
							" (v, k) =>",
							" (v, k) =>",
							"async readFile(filename)",
							"async writeFile(filename, data, overwrite = true)",
							"async exists(filename)",
							"async realpath(filename)",
							"async function LoadFile(file)",
							"async function SaveFile(filename, data, contentType)",
							"s =>",
							"() =>",
							"async function SaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])",
							"predicate = element =>",
							"async function LoadSVG(filename)",
							"async function LoadImage(filename)",
							"() =>",
							" function RenderComponent(component)",
							"ModifyColors = fn => e =>",
							"FindLayer = name_or_id =>",
							"n =>",
							"l =>",
							"(id = '#geom') =>",
							"(props = {}) =>",
							"maxZIndex = () =>",
							"e =>",
							"z =>",
							"z =>",
							"() =>",
							"randomColor = () =>",
							"function DrawArc(start, end, angle)",
							"props =>",
							"p =>",
							"a =>",
							"m =>",
							"hex =>",
							"p =>",
							"p =>",
							"p =>",
							"({ x, y }) =>",
							"a =>",
							"({ x, y }, i) =>",
							" e =>",
							"(l, i) =>",
							"(p, i) =>",
							"(p, i) =>",
							"add = (level, item) =>",
							" function RecurseBinaryNode(node, parent = null, depth = 0)",
							"(nodes, i, level) =>",
							"fx = j =>",
							"(node, j) =>",
							"item =>",
							" function DrawNode(x, y, node)",
							" function DrawEdge(item, parent)",
							"function GetPaths(query, parent = project.svgElement)",
							"(a, e) =>",
							"function PathToPolylines(path, step = 0.01)",
							"p =>",
							"poly =>",
							"poly =>",
							" (p, d, set, stop) =>",
							"function PathToPolyline(path, step = 0.01)",
							" (p, d, set, stop) =>",
							"function PathsToPolylines(paths, step = 0.01)",
							"path =>",
							"function OutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function OutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)",
							"path =>",
							"(a, p) =>",
							"function ClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)",
							"add = (p, clip = false) =>",
							".toPolylines = function()",
							"p =>",
							"({ X, Y }) =>",
							"function saveItemStates(itemList, get = item => is.",
							"(item.",
							"))",
							"item =>",
							"function restoreItemStates(itemStates, /* prettier-ignore */ set = (item, value) => item.",
							"(value ? 'yes' : 'no'))",
							"function EagleMaps(project)",
							"transformPath = p =>",
							"e =>",
							"dom2eagle = node =>",
							"eagle2dom = elem =>",
							"path2dom = p =>",
							"(key, value) =>",
							"(key, value) =>",
							"function* PackageNames(doc = project.doc)",
							"e =>",
							"([e, b]) =>",
							"([e, w, h, m, v]) =>",
							"({ index, ...match }) =>",
							" ({ s, v, indexes }, match, i) =>",
							"([token, index]) =>",
							"([token, index]) =>",
							"function NextDocument(n = 1)",
							" (idx, i) =>",
							" (idx, i) =>",
							"async function LoadDocument(project, parentElem)",
							"err =>",
							"() =>",
							" ent =>",
							"() =>",
							" ent =>",
							"renamePackages()",
							"a =>",
							"value =>",
							"layer =>",
							"() =>",
							"layer =>",
							"() =>",
							"fn = function(v)",
							"() =>",
							".makeGroup = function({ transform, ...props } = {})",
							"id =>",
							"() =>",
							" function xx()",
							" () =>",
							"function (transform)",
							" (tag, attr, children = []) =>",
							"value =>",
							"async () =>",
							"Rect",
							"async function ChooseDocument(project, i)",
							"GenerateVoronoi = () =>",
							"Rect",
							"p =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ lSite, rSite, ...edge }) =>",
							"e =>",
							"({ va, vb, ...edge }) =>",
							"v =>",
							"add = (arr, ...items) =>",
							"l =>",
							"t =>",
							"l =>",
							"t =>",
							"p =>",
							" (acc, { site, halfedges }) =>",
							"({ site }) =>",
							"function PackageChildren(element, layer)",
							"(c, i) =>",
							"([i, p]) =>",
							"([i, e]) =>",
							"function ElementChildren(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							"([name, element]) =>",
							"function ElementGeometries(layer = 'tPlace', rfn = ent => ",
							"(ent))",
							" ent =>",
							"([name, children]) =>",
							"([i, e]) =>",
							"([name, lines]) =>",
							"pts =>",
							"([name, lines, polygons]) =>",
							"function NewPath(path)",
							"MakeFitAction = index =>",
							"async event =>",
							"function ZoomFactor(val = config.",
							")",
							"function ZoomLog(factor)",
							"function AdjustZoom(l = config.",
							")",
							"CreateGrblSocket = async (port = 'tnt1') =>",
							"function HandleMessage(msg)",
							"pointStr =>",
							"socketFn = () =>",
							".send = (...args) =>",
							"AuthorizationDialog = ({ onAuth, ...props }) =>",
							"onSubmit: () =>",
							"onInput: e =>",
							"onInput: e =>",
							"onClick: e =>",
							"arg =>",
							".onload = async () =>",
							"response =>",
							"e =>",
							" v =>",
							"TestArc: () =>",
							"() =>",
							"async (push, stop) =>",
							"() =>",
							"async (push, stop) =>",
							" target =>",
							" (key, modifiers = 0) =>",
							".focusSearch = state =>",
							"children: () =>",
							"geometries: () =>",
							"value =>",
							"() =>",
							"testComponent = props =>",
							"resp =>",
							"json =>",
							" function File(obj, i)",
							"File",
							"File.prototype.toString = function()",
							"(a, b) =>",
							"(obj, i) =>",
							"(acc, file) =>",
							"i =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"value =>",
							"updateIfChanged = (trkl, newValue, callback) =>",
							" (elem, i) =>",
							"changeInput = e =>",
							"p =>",
							" arg =>",
							"Consumer = props =>",
							"async function* ()",
							"log(type, time, msg)",
							"Logger = props =>",
							"async function* ()",
							"([type, d, t, m], i) =>",
							"Dumper = props =>",
							"value =>",
							"([k, v], i) =>",
							"Commander = ({ onCommand, ...props }) =>",
							"handler = e =>",
							"toggle = trkl =>",
							"Layer = ({ title, name, label, i, color, element, className, ...props }) =>",
							"setVisible = value =>",
							"e =>",
							" e =>",
							"l =>",
							"l =>",
							" (item, value) =>",
							" item =>",
							"l =>",
							"([l, state]) =>",
							"e =>",
							"onMouseMove: e =>",
							"onMouseUp: e =>",
							"DocumentList",
							"constructor()",
							"(push, stop) =>",
							"add(name, component)",
							"addEntry([name, component])",
							"remove(name)",
							"update()",
							"fn: e =>",
							"fn: () =>",
							"open =>",
							" props =>",
							" props =>",
							"async e =>",
							"i =>",
							"i =>",
							"({ coord }) =>",
							"side =>",
							"create: (project, props = {}) =>",
							"a =>",
							"e =>",
							"e =>",
							"name =>",
							"e =>",
							" function makeLayerName(name, side)",
							"fn: () =>",
							"onChange(event)",
							" props =>",
							" props =>",
							" props =>",
							"async (e, p, i) =>",
							"makeSortCompare: key =>",
							" function(a, b)",
							" function(a, b)",
							"onCommand: cmdStr =>",
							"handleChange: e =>",
							" event =>",
							"e =>",
							" function MoveEvent(event, prevEvent)",
							" function* WalkUp(e)",
							" e =>",
							" z =>",
							"p =>",
							"e =>",
							" e =>",
							"e =>",
							" v =>",
							" l =>",
							"e =>",
							" () =>",
							" (e, depth) =>",
							" classes =>",
							" e =>",
							" e =>",
							" (a, b) =>",
							" (a, b) =>",
							"Node",
							"e =>",
							" (p, d, set, stop) =>",
							"e =>",
							"e =>",
							" function TouchEvent(event)",
							"e =>",
							"(p, i) =>",
							"(a, b) =>",
							" size =>",
							"border =>",
							"r =>",
							" function mod(n, m)",
							"() =>",
							" (pos, last, first) =>",
							" function cancel()",
							".oncontextmenu = function(e)",
							".processEvents = async function eventLoop()",
							" event =>",
							"e =>",
							"onRuntimeInitialized: () =>",
							"print: txt =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAADFgAAKCkgPT4KICByZXMgPT4KKCkgPT4KICByID0+CiAgciA9PgogIGVudHJpZXMoKQpHZXRQcm9qZWN0ID0gYXJnID0+CiAgcCA9PgogICgpID0+CiAgdmFsdWUgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICB1c2VTbG90ID0gKGFyciwgaSkgPT4KKCkgPT4KICB2ID0+CiAgdHJrbEdldFNldCA9IChnZXQsIHNldCkgPT4gdmFsdWUgPT4KTW91c2VFdmVudHMgPSBoID0+CigpID0+CihwYXJlbnQsIGRlbGVnYXRlKSA9PgogIGFwcGVuZF90byhlbGVtLCBwKQpEcmF3U1ZHKC4uLmFyZ3MpCiAgYXBwZW5kX3RvKGVsZW0sIHApCiAgYWRqdXN0Vmlld0JveChlKQogIGNhbGNWaWV3Qm94KGJveCkKICBzZXRWaWV3Qm94KHN2Z093bmVyLCBib3gpCkVsZW1lbnRUb1hNTCA9IChlLCBwcmVkaWNhdGUpID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgKHYsIGspID0+CiAgcmVhZEZpbGUoZmlsZW5hbWUpCiAgd3JpdGVGaWxlKGZpbGVuYW1lLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKQogIGV4aXN0cyhmaWxlbmFtZSkKICByZWFscGF0aChmaWxlbmFtZSkKTG9hZEZpbGUoZmlsZSkKU2F2ZUZpbGUoZmlsZW5hbWUsIGRhdGEsIGNvbnRlbnRUeXBlKQogIHMgPT4KKCkgPT4KU2F2ZVNWRyhmaWxlbmFtZSwgbGF5ZXJzID0gWzEsIDE2LCAyMCwgMjEsIDIyLCAyMywgMjUsIDI3LCA0NywgNDgsIDUxXSkKICBwcmVkaWNhdGUgPSBlbGVtZW50ID0+CkxvYWRTVkcoZmlsZW5hbWUpCkxvYWRJbWFnZShmaWxlbmFtZSkKKCkgPT4KUmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCkKTW9kaWZ5Q29sb3JzID0gZm4gPT4gZSA9PgpGaW5kTGF5ZXIgPSBuYW1lX29yX2lkID0+CiAgbiA9PgogIGwgPT4KKGlkID0gJyNnZW9tJykgPT4KKHByb3BzID0ge30pID0+CiAgbWF4WkluZGV4ID0gKCkgPT4KICBlID0+CiAgeiA9PgogIHogPT4KKCkgPT4KICByYW5kb21Db2xvciA9ICgpID0+CkRyYXdBcmMoc3RhcnQsIGVuZCwgYW5nbGUpCiAgcHJvcHMgPT4KICBwID0+CiAgYSA9PgogIG0gPT4KICBoZXggPT4KICBwID0+CiAgcCA9PgogIHAgPT4KKHsgeCwgeSB9KSA9PgogIGEgPT4KKHsgeCwgeSB9LCBpKSA9PgogIGUgPT4KKGwsIGkpID0+CihwLCBpKSA9PgoocCwgaSkgPT4KICBhZGQgPSAobGV2ZWwsIGl0ZW0pID0+ClJlY3Vyc2VCaW5hcnlOb2RlKG5vZGUsIHBhcmVudCA9IG51bGwsIGRlcHRoID0gMCkKKG5vZGVzLCBpLCBsZXZlbCkgPT4KICBmeCA9IGogPT4KKG5vZGUsIGopID0+CiAgaXRlbSA9PgpEcmF3Tm9kZSh4LCB5LCBub2RlKQpEcmF3RWRnZShpdGVtLCBwYXJlbnQpCkdldFBhdGhzKHF1ZXJ5LCBwYXJlbnQgPSBwcm9qZWN0LnN2Z0VsZW1lbnQpCihhLCBlKSA9PgpQYXRoVG9Qb2x5bGluZXMocGF0aCwgc3RlcCA9IDAuMDEpCiAgcCA9PgogIHBvbHkgPT4KICBwb2x5ID0+CiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aFRvUG9seWxpbmUocGF0aCwgc3RlcCA9IDAuMDEpCiAgKHAsIGQsIHNldCwgc3RvcCkgPT4KUGF0aHNUb1BvbHlsaW5lcyhwYXRocywgc3RlcCA9IDAuMDEpCiAgcGF0aCA9PgpPdXRzZXRQYXRoKHBhdGgsIG9mZnNldCwgbWl0ZXJMaW1pdCA9IDIsIGFyY1RvbGVyYW5jZSA9IDAuMDEpCiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgpPdXRzZXRQYXRocyhwYXRocywgb2Zmc2V0LCBtaXRlckxpbWl0ID0gMiwgYXJjVG9sZXJhbmNlID0gMC4yNSkKICBwYXRoID0+CihhLCBwKSA9PgpDbGlwUGF0aChwYXRoLCBjbGlwLCBtb2RlID0gQ2xpcHBlckxpYi5DbGlwVHlwZS5jdFVuaW9uKQogIGFkZCA9IChwLCBjbGlwID0gZmFsc2UpID0+CiAgLnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKQogIHAgPT4KKHsgWCwgWSB9KSA9PgogIHNhdmVJdGVtU3RhdGVzKGl0ZW1MaXN0LCBnZXQgPSBpdGVtID0+IGlzLgooaXRlbS4KKSkKICBpdGVtID0+CiAgcmVzdG9yZUl0ZW1TdGF0ZXMoaXRlbVN0YXRlcywgLypwcmV0dGllci1pZ25vcmUgKi8gc2V0ID0gKGl0ZW0sIHZhbHVlKSA9PiBpdGVtLgoodmFsdWUgPyAneWVzJyA6ICdubycpKQpFYWdsZU1hcHMocHJvamVjdCkKICB0cmFuc2Zvcm1QYXRoID0gcCA9PgogIGUgPT4KICBkb20yZWFnbGUgPSBub2RlID0+CiAgZWFnbGUyZG9tID0gZWxlbSA9PgogIHBhdGgyZG9tID0gcCA9Pgooa2V5LCB2YWx1ZSkgPT4KKGtleSwgdmFsdWUpID0+ClBhY2thZ2VOYW1lcyhkb2MgPSBwcm9qZWN0LmRvYykKICBlID0+CihbZSwgYl0pID0+CihbZSwgdywgaCwgbSwgdl0pID0+Cih7IGluZGV4LCAuLi5tYXRjaCB9KSA9PgogICh7IHMsIHYsIGluZGV4ZXMgfSwgbWF0Y2gsIGkpID0+CihbdG9rZW4sIGluZGV4XSkgPT4KKFt0b2tlbiwgaW5kZXhdKSA9PgpOZXh0RG9jdW1lbnQobiA9IDEpCiAgKGlkeCwgaSkgPT4KICAoaWR4LCBpKSA9PgpMb2FkRG9jdW1lbnQocHJvamVjdCwgcGFyZW50RWxlbSkKICBlcnIgPT4KKCkgPT4KICBlbnQgPT4KKCkgPT4KICBlbnQgPT4KICByZW5hbWVQYWNrYWdlcygpCiAgYSA9PgogIHZhbHVlID0+CiAgbGF5ZXIgPT4KKCkgPT4KICBsYXllciA9PgooKSA9PgogIGZuID0gZnVuY3Rpb24odikKKCkgPT4KICAubWFrZUdyb3VwID0gZnVuY3Rpb24oeyB0cmFuc2Zvcm0sIC4uLnByb3BzIH0gPSB7fSkKICBpZCA9PgooKSA9PgogIHh4KCkKICAoKSA9PgoodHJhbnNmb3JtKQogICh0YWcsIGF0dHIsIGNoaWxkcmVuID0gW10pID0+CiAgdmFsdWUgPT4KKCkgPT4KUmVjdApDaG9vc2VEb2N1bWVudChwcm9qZWN0LCBpKQpHZW5lcmF0ZVZvcm9ub2kgPSAoKSA9PgpSZWN0CiAgcCA9PgogIGUgPT4KKHsgbFNpdGUsIHJTaXRlLCAuLi5lZGdlIH0pID0+CiAgZSA9PgooeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4KICBlID0+Cih7IHZhLCB2YiwgLi4uZWRnZSB9KSA9PgogIHYgPT4KICBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4KICBsID0+CiAgdCA9PgogIGwgPT4KICB0ID0+CiAgcCA9PgogIChhY2MsIHsgc2l0ZSwgaGFsZmVkZ2VzIH0pID0+Cih7IHNpdGUgfSkgPT4KUGFja2FnZUNoaWxkcmVuKGVsZW1lbnQsIGxheWVyKQooYywgaSkgPT4KKFtpLCBwXSkgPT4KKFtpLCBlXSkgPT4KRWxlbWVudENoaWxkcmVuKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCihbbmFtZSwgZWxlbWVudF0pID0+CkVsZW1lbnRHZW9tZXRyaWVzKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiAKKGVudCkpCiAgZW50ID0+CihbbmFtZSwgY2hpbGRyZW5dKSA9PgooW2ksIGVdKSA9PgooW25hbWUsIGxpbmVzXSkgPT4KICBwdHMgPT4KKFtuYW1lLCBsaW5lcywgcG9seWdvbnNdKSA9PgpOZXdQYXRoKHBhdGgpCk1ha2VGaXRBY3Rpb24gPSBpbmRleCA9PgogIGV2ZW50ID0+Clpvb21GYWN0b3IodmFsID0gY29uZmlnLgopClpvb21Mb2coZmFjdG9yKQpBZGp1c3Rab29tKGwgPSBjb25maWcuCikKQ3JlYXRlR3JibFNvY2tldCA9IChwb3J0ID0gJ3RudDEnKSA9PgpIYW5kbGVNZXNzYWdlKG1zZykKICBwb2ludFN0ciA9PgogIHNvY2tldEZuID0gKCkgPT4KICAuc2VuZCA9ICguLi5hcmdzKSA9PgpBdXRob3JpemF0aW9uRGlhbG9nID0gKHsgb25BdXRoLCAuLi5wcm9wcyB9KSA9PgogIG9uU3VibWl0OiAoKSA9PgogIG9uSW5wdXQ6IGUgPT4KICBvbklucHV0OiBlID0+CiAgb25DbGljazogZSA9PgogIGFyZyA9PgogIC5vbmxvYWQgPSAoKSA9PgogIHJlc3BvbnNlID0+CiAgZSA9PgogIHYgPT4KVGVzdEFyYzogKCkgPT4KKCkgPT4KKHB1c2gsIHN0b3ApID0+CigpID0+CihwdXNoLCBzdG9wKSA9PgogIHRhcmdldCA9PgogIChrZXksIG1vZGlmaWVycyA9IDApID0+CiAgLmZvY3VzU2VhcmNoID0gc3RhdGUgPT4KICBjaGlsZHJlbjogKCkgPT4KICBnZW9tZXRyaWVzOiAoKSA9PgogIHZhbHVlID0+CigpID0+CiAgdGVzdENvbXBvbmVudCA9IHByb3BzID0+CiAgcmVzcCA9PgogIGpzb24gPT4KRmlsZShvYmosIGkpCkZpbGUKRmlsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpCihhLCBiKSA9Pgoob2JqLCBpKSA9PgooYWNjLCBmaWxlKSA9PgogIGkgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB2YWx1ZSA9PgogIHZhbHVlID0+CiAgdmFsdWUgPT4KICB1cGRhdGVJZkNoYW5nZWQgPSAodHJrbCwgbmV3VmFsdWUsIGNhbGxiYWNrKSA9PgogIChlbGVtLCBpKSA9PgogIGNoYW5nZUlucHV0ID0gZSA9PgogIHAgPT4KICBhcmcgPT4KQ29uc3VtZXIgPSBwcm9wcyA9PgooKQogIGxvZyh0eXBlLCB0aW1lLCBtc2cpCkxvZ2dlciA9IHByb3BzID0+CigpCihbdHlwZSwgZCwgdCwgbV0sIGkpID0+CkR1bXBlciA9IHByb3BzID0+CiAgdmFsdWUgPT4KKFtrLCB2XSwgaSkgPT4KQ29tbWFuZGVyID0gKHsgb25Db21tYW5kLCAuLi5wcm9wcyB9KSA9PgogIGhhbmRsZXIgPSBlID0+CiAgdG9nZ2xlID0gdHJrbCA9PgpMYXllciA9ICh7IHRpdGxlLCBuYW1lLCBsYWJlbCwgaSwgY29sb3IsIGVsZW1lbnQsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfSkgPT4KICBzZXRWaXNpYmxlID0gdmFsdWUgPT4KICBlID0+CiAgZSA9PgogIGwgPT4KICBsID0+CiAgKGl0ZW0sIHZhbHVlKSA9PgogIGl0ZW0gPT4KICBsID0+CihbbCwgc3RhdGVdKSA9PgogIGUgPT4KICBvbk1vdXNlTW92ZTogZSA9PgogIG9uTW91c2VVcDogZSA9PgpEb2N1bWVudExpc3QKICBjb25zdHJ1Y3RvcigpCihwdXNoLCBzdG9wKSA9PgogIGFkZChuYW1lLCBjb21wb25lbnQpCiAgYWRkRW50cnkoW25hbWUsIGNvbXBvbmVudF0pCiAgcmVtb3ZlKG5hbWUpCiAgdXBkYXRlKCkKICBmbjogZSA9PgogIGZuOiAoKSA9PgogIG9wZW4gPT4KICBwcm9wcyA9PgogIHByb3BzID0+CiAgZSA9PgogIGkgPT4KICBpID0+Cih7IGNvb3JkIH0pID0+CiAgc2lkZSA9PgogIGNyZWF0ZTogKHByb2plY3QsIHByb3BzID0ge30pID0+CiAgYSA9PgogIGUgPT4KICBlID0+CiAgbmFtZSA9PgogIGUgPT4KICBtYWtlTGF5ZXJOYW1lKG5hbWUsIHNpZGUpCiAgZm46ICgpID0+CiAgb25DaGFuZ2UoZXZlbnQpCiAgcHJvcHMgPT4KICBwcm9wcyA9PgogIHByb3BzID0+CihlLCBwLCBpKSA9PgogIG1ha2VTb3J0Q29tcGFyZToga2V5ID0+CiAgZnVuY3Rpb24oYSwgYikKICBmdW5jdGlvbihhLCBiKQogIG9uQ29tbWFuZDogY21kU3RyID0+CiAgaGFuZGxlQ2hhbmdlOiBlID0+CiAgZXZlbnQgPT4KICBlID0+Ck1vdmVFdmVudChldmVudCwgcHJldkV2ZW50KQpXYWxrVXAoZSkKICBlID0+CiAgeiA9PgogIHAgPT4KICBlID0+CiAgZSA9PgogIGUgPT4KICB2ID0+CiAgbCA9PgogIGUgPT4KICAoKSA9PgogIChlLCBkZXB0aCkgPT4KICBjbGFzc2VzID0+CiAgZSA9PgogIGUgPT4KICAoYSwgYikgPT4KICAoYSwgYikgPT4KTm9kZQogIGUgPT4KICAocCwgZCwgc2V0LCBzdG9wKSA9PgogIGUgPT4KICBlID0+ClRvdWNoRXZlbnQoZXZlbnQpCiAgZSA9PgoocCwgaSkgPT4KKGEsIGIpID0+CiAgc2l6ZSA9PgogIGJvcmRlciA9PgogIHIgPT4KICBtb2QobiwgbSkKKCkgPT4KICAocG9zLCBsYXN0LCBmaXJzdCkgPT4KICBjYW5jZWwoKQogIC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZSkKICAucHJvY2Vzc0V2ZW50cyA9IGZ1bmN0aW9uIGV2ZW50TG9vcCgpCiAgZXZlbnQgPT4KICBlID0+CiAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6ICgpID0+CiAgcHJpbnQ6IHR4dCA9PgAAAAAAAAAAAxYAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				]
			]
		},
		{
			"file": "main.js",
			"settings":
			{
				"buffer_size": 96951,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					109,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACVegEALy8gcHJldHRpZXItaWdub3JlLXN0YXJ0CmltcG9ydCB7IFRyYW5zZm9ybWF0aW9uLCBSb3RhdGlvbiwgVHJhbnNsYXRpb24sIFNjYWxpbmcsIE1hdHJpeFRyYW5zZm9ybWF0aW9uLCBUcmFuc2Zvcm1hdGlvbkxpc3QgfSBmcm9tICcuL2xpYi9nZW9tL3RyYW5zZm9ybWF0aW9uLmpzJzsKaW1wb3J0IGRvbSBmcm9tICcuL2xpYi9kb20uanMnOwppbXBvcnQgeyBSZWFjdENvbXBvbmVudCwgRnJhZ21lbnQgfSBmcm9tICcuL2xpYi9kb20vcHJlYWN0Q29tcG9uZW50LmpzJzsKaW1wb3J0IHsgaXRlcmF0b3IsIGV2ZW50SXRlcmF0b3IgfSBmcm9tICcuL2xpYi9kb20vaXRlcmF0b3IuanMnOwppbXBvcnQga2V5c2ltIGZyb20gJy4vbGliL2RvbS9rZXlzaW0uanMnOwppbXBvcnQgZ2VvbSwgeyBpc0JCb3gsIEJCb3gsIFBvbHlnb24sIENpcmNsZSwgTGluZUxpc3QsIEFyYyB9IGZyb20gJy4vbGliL2dlb20uanMnOwppbXBvcnQgeyBub3JtYWxpemVQYXRoLCByZXZlcnNlTm9ybWFsaXplZFBhdGgsIHJldmVyc2VTdWJQYXRoLCByZXZlcnNlUGF0aCB9IGZyb20gJy4vbGliL3N2Zy9wYXRoUmV2ZXJzZS5qcyc7CmltcG9ydCB7IEZpeGVkTWVkaXVtIH0gZnJvbSAnLi9saWIvc3ZnL2ZpeGVkTWVkaXVtLmpzJzsKaW1wb3J0IHsgVG91Y2hMaXN0ZW5lciB9IGZyb20gJy4vbGliL3RvdWNoSGFuZGxlci5qcyc7CmltcG9ydCB7IHRya2wgfSBmcm9tICcuL2xpYi90cmtsLmpzJzsKaW1wb3J0IHsgQ29sb3JNYXAgfSBmcm9tICcuL2xpYi9kcmF3L2NvbG9yTWFwLmpzJzsKaW1wb3J0IHsgQ2xpcHBlckxpYiB9IGZyb20gJy4vbGliL2NsaXBwZXItbGliLmpzJzsKaW1wb3J0IFNoYXBlIGZyb20gJy4vbGliL2NsaXBwZXIuanMnOwppbXBvcnQgeyBkZXZ0b29scyB9IGZyb20gJy4vbGliL2RldnRvb2xzLmpzJzsKaW1wb3J0IHRsaXRlIGZyb20gJy4vbGliL3RsaXRlLmpzJzsKaW1wb3J0IGRlYm91bmNlIGZyb20gJy4vbGliL2FzeW5jL2RlYm91bmNlLmpzJzsKaW1wb3J0IHsgU3ZnUGF0aCB9IGZyb20gJy4vbGliL3N2Zy9wYXRoLmpzJzsKaW1wb3J0IG9iamVjdEluc3BlY3QgZnJvbSAnLi9saWIvb2JqZWN0SW5zcGVjdC5qcyc7CmltcG9ydCB0WG1sIGZyb20gJy4vbGliL3RYbWwuanMnOwppbXBvcnQgZGVlcCBmcm9tICcuL2xpYi9kZWVwLmpzJzsKaW1wb3J0IEFsZWEgZnJvbSAnLi9saWIvYWxlYS5qcyc7CmltcG9ydCBwYXRoIGZyb20gJy4vbGliL3BhdGguanMnOwppbXBvcnQgeyBUaW1lb3V0RXJyb3IgfSBmcm9tICcuL2xpYi9yZXBlYXRlci90aW1lcnMuanMnOwppbXBvcnQgKiBhcyBUaW1lcnMgZnJvbSAnLi9saWIvcmVwZWF0ZXIvdGltZXJzLmpzJzsKaW1wb3J0IGFzeW5jSGVscGVycyBmcm9tICcuL2xpYi9hc3luYy9oZWxwZXJzLmpzJzsKaW1wb3J0IHsgQ2FjaGUgfSBmcm9tICcuL2xpYi9kb20vY2FjaGUuanMnOwppbXBvcnQgeyBDYWNoZVN0b3JhZ2UgfSBmcm9tICcuL2xpYi9kb20vY2FjaGVTdG9yYWdlLmpzJzsKLyogcHJldHRpZXItaWdub3JlICovIGltcG9ydCB7IEludGVycHJldEdjb2RlLCBnY29kZXRvZ2VvbWV0cnksIEdjb2RlT2JqZWN0LCBnY29kZVRvT2JqZWN0LCBvYmplY3RUb0djb2RlLCBwYXJzZUdjb2RlLCBHY29kZVBhcnNlciwgR0NvZGVMaW5lU3RyZWFtLCBwYXJzZVN0cmVhbSwgcGFyc2VGaWxlLCBwYXJzZUZpbGVTeW5jLCBwYXJzZVN0cmluZywgcGFyc2VTdHJpbmdTeW5jLCBub29wLCBJbnRlcnByZXRlciB9IGZyb20gJy4vbGliL2djb2RlLmpzJzsKaW1wb3J0IHsgSXRlcmF0b3IgfSBmcm9tICcuL2xpYi9pdGVyYXRvci5qcyc7CmltcG9ydCB7IEZ1bmN0aW9uYWwgfSBmcm9tICcuL2xpYi9mdW5jdGlvbmFsLmpzJzsKaW1wb3J0IHsgbWFrZUxvY2FsU3RvcmFnZSB9IGZyb20gJy4vbGliL2F1dG9TdG9yZS5qcyc7CmltcG9ydCB7IFJlcGVhdGVyIH0gZnJvbSAnLi9saWIvcmVwZWF0ZXIvcmVwZWF0ZXIuanMnOwppbXBvcnQgeyB1c2VSZXN1bHQsIHVzZVZhbHVlIH0gZnJvbSAnLi9saWIvcmVwZWF0ZXIvcmVhY3QtaG9va3MuanMnOwppbXBvcnQgeyBQb3J0YWwgfSBmcm9tICcuL2xpYi9kb20vcHJlYWN0Q29tcG9uZW50LmpzJzsKaW1wb3J0IHJlbmRlclRvU3RyaW5nIGZyb20gJy4vbGliL3ByZWFjdC1yZW5kZXItdG8tc3RyaW5nLmpzJzsKaW1wb3J0IHsgQmluYXJ5VHJlZSB9IGZyb20gJy4vbGliL2NvbnRhaW5lci9iaW5hcnlUcmVlLmpzJzsKaW1wb3J0IExvZ0pTIGZyb20gJy4vbGliL2xvZy5qcyc7CmltcG9ydCBzZXJpYWwgZnJvbSAnLi9zZXJpYWwuanMnOwppbXBvcnQgeyB0b1hNTCwgSW1tdXRhYmxlUGF0aCwgTXV0YWJsZVBhdGgsIGFycmF5RGlmZiwgb2JqZWN0RGlmZiB9IGZyb20gJy4vbGliL2pzb24uanMnOwppbXBvcnQgeyBYbWxPYmplY3QsIFhtbEF0dHIgfSBmcm9tICcuL2xpYi94bWwuanMnOwppbXBvcnQgeyAgIEltbXV0YWJsZVhQYXRoLCAgTXV0YWJsZVhQYXRoLFhQYXRoIH0gZnJvbSAnLi9xdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi94cGF0aC5qcyc7CmltcG9ydCB7IFJHQkEsIGlzUkdCQSwgSW1tdXRhYmxlUkdCQSwgSFNMQSwgaXNIU0xBLCBJbW11dGFibGVIU0xBIH0gZnJvbSAnLi9saWIvY29sb3IuanMnOwppbXBvcnQgKiBhcyBSZWFjdCBmcm9tICcuL2xpYi9wcmVhY3QubWpzJzsKaW1wb3J0IHsgaCwgaHRtbCwgcmVuZGVyLCBDb21wb25lbnQsIHVzZVN0YXRlLCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiB9IGZyb20gJy4vbGliL3ByZWFjdC5tanMnOwppbXBvcnQgeyBDaG9vc2VyLCBEeW5hbWljTGFiZWwsIEJ1dHRvbiwgRmlsZUxpc3QsIFBhbmVsLCBTaXplZEFzcGVjdFJhdGlvQm94LCBUcmFuc2Zvcm1lZEVsZW1lbnQsIENhbnZhcywgQ29sb3JXaGVlbCwgU2xpZGVyLCBDcm9zc0hhaXIsIEZsb2F0aW5nUGFuZWwsIERyb3BEb3duLCBDb25kaXRpb25hbCwgRmVuY2UsIFpvb21hYmxlLCBEaXNwbGF5TGlzdCwgUnVsZXIsIFRvZ2dsZSwgQnV0dG9uR3JvdXAgfSBmcm9tICcuL2NvbXBvbmVudHMuanMnOwppbXBvcnQgKiBhcyBjb21wb25lbnRzIGZyb20gJy4vY29tcG9uZW50cy5qcyc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICcuL21lc3NhZ2UuanMnOwppbXBvcnQgeyBHZXRFbGVtZW50cywgR2V0SW5zdGFuY2VzLCBHZXRQb3NpdGlvbnMsIFVwZGF0ZU1lYXN1cmVzLCBBbGlnbkFsbCwgc2NpZW50aWZpYyB9IGZyb20gJy4vZWFnbGUtY29tbWFuZHMuanMnOwppbXBvcnQgeyBHZXRFeHBvbmVudCwgR2V0TWFudGlzc2EsIFZhbHVlVG9OdW1iZXIsIE51bWJlclRvVmFsdWUsIEdldE11bHRpcGxpZXJzLCBHZXRGYWN0b3IsIEdldENvbG9yQmFuZHMsIEJHLCBkaWdpdDJjb2xvciB9IGZyb20gJy4vbGliL2VkYS9jb2xvckNvZGluZy5qcyc7CgppbXBvcnQgeyB1c2VBY3RpdmUsIHVzZUNsaWNrb3V0LCB1c2VEaW1lbnNpb25zLCB1c2VEb3VibGVDbGljaywgdXNlRWxlbWVudCwgRXZlbnRUcmFja2VyLCB1c2VFdmVudCwgdXNlRm9jdXMsIHVzZVJlY29nbml6ZXJzLCB1c2VEcmFnLCB1c2VQaW5jaCwgdXNlV2hlZWwsIHVzZU1vdmUsIHVzZVNjcm9sbCwgdXNlR2VzdHVyZSwgdXNlSG92ZXIsIHVzZU1vdXNlUG9zaXRpb24sIHVzZVBhblpvb20sIHVzZVRvZ2dsZUJ1dHRvbkdyb3VwU3RhdGUgfSBmcm9tICcuL2xpYi9ob29rcy5qcyc7CgppbXBvcnQgeyBXZWJTb2NrZXRDbGllbnQgfSBmcm9tICcuL2xpYi9uZXQvd2Vic29ja2V0LWFzeW5jLmpzJzsKLyogcHJldHRpZXItaWdub3JlICovIGltcG9ydCAqIGFzIGVjbWFzY3JpcHQgZnJvbSAnLi9saWIvZWNtYXNjcmlwdC5qcyc7CmltcG9ydCB7IFBpcGVUbywgQXN5bmNSZWFkLCBBc3luY1dyaXRlLCBEZWJ1Z1RyYW5zZm9ybVN0cmVhbSwgVGV4dEVuY29kZVRyYW5zZm9ybWVyLCBUZXh0RW5jb2RlclN0cmVhbSwgVGV4dERlY29kZVRyYW5zZm9ybWVyLCBUZXh0RGVjb2RlclN0cmVhbSwgVHJhbnNmb3JtU3RyZWFtU2luaywgVHJhbnNmb3JtU3RyZWFtU291cmNlLCBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlciwgVHJhbnNmb3JtU3RyZWFtLCBBcnJheVdyaXRlciwgcmVhZFN0cmVhbSwgV3JpdGVUb1JlcGVhdGVyLCBMb2dTaW5rLCBSZXBlYXRlclNpbmssIFN0cmluZ1JlYWRlciwgTGluZVJlYWRlciwgQ2h1bmtSZWFkZXIsIEJ5dGVSZWFkZXIsIFBpcGVUb1JlcGVhdGVyLCBXcml0YWJsZVN0cmVhbSwgUmVhZEZyb21JdGVyYXRvciB9IGZyb20gJy4vbGliL3N0cmVhbS5qcz90cz08P1RTPz4nOwppbXBvcnQgeyBQcmltaXRpdmVDb21wb25lbnRzLCBFbGVtZW50TmFtZVRvQ29tcG9uZW50LCBFbGVtZW50VG9Db21wb25lbnQgfSBmcm9tICcuL2xpYi9lYWdsZS9jb21wb25lbnRzLmpzJzsKaW1wb3J0IHsgdXNlVHJrbCwgUkFEMkRFRywgREVHMlJBRCwgVkVSVElDQUwsIEhPUklaT05UQUwsIEhPUklaT05UQUxfVkVSVElDQUwsIERFQlVHLCBsb2csIHNldERlYnVnLCBQaW5TaXplcywgRXNjYXBlQ2xhc3NOYW1lLCBVbmVzY2FwZUNsYXNzTmFtZSwgTGF5ZXJUb0NsYXNzLCBFbGVtZW50VG9DbGFzcywgQ2xhbXBBbmdsZSwgQWxpZ25tZW50QW5nbGUsIE1ha2VSb3RhdGlvbiwgRWFnbGVBbGlnbm1lbnRzLCBBbGlnbm1lbnQsIFNWR0FsaWdubWVudHMsIEFsaWdubWVudEF0dHJzLCBSb3RhdGVUcmFuc2Zvcm1hdGlvbiwgTGF5ZXJBdHRyaWJ1dGVzLCBJbnZlcnRZLCBQb2xhclRvQ2FydGVzaWFuLCBDYXJ0ZXNpYW5Ub1BvbGFyLCBDYWxjdWxhdGVBcmNSYWRpdXMsIExpbmVzVG9QYXRoLCBNYWtlQ29vcmRUcmFuc2Zvcm1lciwgdXNlQXR0cmlidXRlcywgUmVuZGVyQXJjIH0gZnJvbSAnLi9saWIvZWFnbGUvcmVuZGVyVXRpbHMuanMnOwppbXBvcnQgeyBXaXJlIH0gZnJvbSAnLi9saWIvZWFnbGUvY29tcG9uZW50cy93aXJlLmpzJzsKaW1wb3J0IHsgSW5zdGFuY2UgfSBmcm9tICcuL2xpYi9lYWdsZS9jb21wb25lbnRzL2luc3RhbmNlLmpzJzsKaW1wb3J0IHsgU2NoZW1hdGljU3ltYm9sIH0gZnJvbSAnLi9saWIvZWFnbGUvY29tcG9uZW50cy9zeW1ib2wuanMnOwppbXBvcnQgeyBFbWl0dGVyLCBFdmVudEl0ZXJhdG9yLCBFdmVudEVtaXR0ZXIsIEV2ZW50VGFyZ2V0IH0gZnJvbSAnLi9ldmVudHMuanMnOwppbXBvcnQgeyBTbG90LCBTbG90UHJvdmlkZXIgfSBmcm9tICcuL3Nsb3RzLmpzJzsKaW1wb3J0IFZvcm9ub2kgZnJvbSAnLi9saWIvZ2VvbS92b3Jvbm9pLmpzJzsKaW1wb3J0IEdlcmJlclBhcnNlciBmcm9tICcuL2xpYi9nZXJiZXIvcGFyc2VyLmpzJzsKaW1wb3J0IHsgbGF6eUluaXRpYWxpemVyIH0gZnJvbSAnLi9saWIvbGF6eUluaXRpYWxpemVyLmpzJzsKaW1wb3J0IHsgRWFnbGVFbGVtZW50UHJveHksIEJvYXJkUmVuZGVyZXIsIERlcmVmZXJlbmNlRXJyb3IsIEVhZ2xlRG9jdW1lbnQsIEVhZ2xlRWxlbWVudCwgRWFnbGVOb2RlLCBFYWdsZU5vZGVMaXN0LCBFYWdsZU5vZGVNYXAsIEVhZ2xlUHJvamVjdCwgRWFnbGVSZWYsIEVhZ2xlUmVmZXJlbmNlLCBFYWdsZVNWR1JlbmRlcmVyLCBSZW5kZXJlciwgU2NoZW1hdGljUmVuZGVyZXIsIExpYnJhcnlSZW5kZXJlciwgbWFrZUVhZ2xlRWxlbWVudCwgbWFrZUVhZ2xlTm9kZSB9IGZyb20gJy4vbGliL2VhZ2xlLmpzJzsKaW1wb3J0IHsgYnJjYWNoZSwgbHNjYWNoZSwgQmFzZUNhY2hlLCBDYWNoZWRGZXRjaCB9IGZyb20gJy4vbGliL2xzY2FjaGUuanMnOyAvL2NvbnN0IFJlYWN0ID0ge0NvbXBvbmVudCwgRnJhZ21lbnQsIGNyZWF0ZTogaCwgaHRtbCwgcmVuZGVyLCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfTsKaW1wb3J0IGNvbW1hbmRzLCB7IExpc3RQcm9qZWN0cywgR2V0TGF5ZXIsIEFkZExheWVyLCBCb2FyZFRvR2VyYmVyLCBHZXJiZXJUb0djb2RlLCBHY29kZVRvUG9seWxpbmVzLCBDbGVhckNhY2hlIH0gZnJvbSAnLi9jb21tYW5kcy5qcyc7CmltcG9ydCB7IE5vcm1hbGl6ZVJlc3BvbnNlLCBSZXNwb25zZURhdGEsIEZldGNoVVJMLCBGZXRjaENhY2hlZCB9IGZyb20gJy4vbGliL2ZldGNoLmpzJzsKaW1wb3J0IGdpdGh1YiwgeyBHaXRodWJMaXN0RmlsZXMsIEdpdGh1Ykxpc3RSZXBvc2l0b3JpZXMsIEdpdGh1YlJlcG9zaXRvcmllcywgR2l0aHViTGlzdENvbnRlbnRzLCBMaXN0R2l0aHViUmVwb1NlcnZlciB9IGZyb20gJy4vbGliL2dpdGh1Yi5qcyc7Ci8vIHByZXR0aWVyLWlnbm9yZS1lbmQKCi8qIHByZXR0aWVyLWlnbm9yZSAqLyBjb25zdCB7IEFsaWduLCBBbGlnblRvU3RyaW5nLCBBbmNob3IsIENTUywgRXZlbnQsIENTU1RyYW5zZm9ybVNldHRlcnMsIEVsZW1lbnQsIEVsZW1lbnRQb3NQcm9wcywgRWxlbWVudFJlY3RQcm9wcywgRWxlbWVudFJlY3RQcm94eSwgRWxlbWVudFNpemVQcm9wcywgRWxlbWVudFRyYW5zZm9ybWF0aW9uLCBFbGVtZW50V0hQcm9wcywgRWxlbWVudFhZUHJvcHMsIGlzRWxlbWVudCwgaXNMaW5lLCBpc01hdHJpeCwgIGlzUG9pbnQsIGlzUmVjdCwgaXNTaXplLCBMaW5lLE1hdHJpeCwgIFBvaW50LCBQb2ludExpc3QsIFBvbHlsaW5lLCBSZWN0LCBTZWxlY3QsIFNpemUsIFNWRywgVHJhbnNpdGlvbiwgVHJhbnNpdGlvbkxpc3QsIFRSQkwsIFRyZWUgfSA9IHsgLi4uZG9tLCAuLi5nZW9tIH07CgppbXBvcnQgeyBjbGFzc05hbWVzIH0gZnJvbSAnLi9saWIvY2xhc3NOYW1lcy5qcyc7Ci8vaW1wb3J0IHJwYyBmcm9tICcuL3F1aWNranMvcWpzLW5ldC9qcy9ycGMuanMnOwppbXBvcnQgKiBhcyBycGMyIGZyb20gJy4vcXVpY2tqcy9xanMtbmV0L2pzL3JwYy5qcyc7CmltcG9ydCB7IGZubWF0Y2gsIFBBVEhfRk5NX01VTFRJIH0gZnJvbSAnLi9saWIvZm5tYXRjaC5qcyc7CmltcG9ydCB7IGVycm9ycywgdHlwZXMsIGlzT2JqZWN0LCB0b1N0cmluZywgYnRvYSwgYXRvYiwgYXNzZXJ0LCBlc2NhcGUsIHF1b3RlLCBtZW1vaXplLCBnZXRzZXQsIG1vZGlmaWVyLCBnZXR0ZXIsIHNldHRlciwgZ2V0dGVyc2V0dGVyLCBoYXNHZXRTZXQsIG1hcE9iamVjdCwgb25jZSwgYXRleGl0LCB3YWl0Rm9yLCBkZWZpbmUsIHdlYWtBc3NpZ24sIGdldENvbnN0cnVjdG9yQ2hhaW4sIGhhc1Byb3RvdHlwZSwgZmlsdGVyLCBjdXJyeSwgc3BsaXQsIHVuaXF1ZSwgZ2V0RnVuY3Rpb25Bcmd1bWVudHMsIHJhbmRJbnQsIHJhbmRGbG9hdCwgcmFuZFN0ciwgdG9CaWdJbnQsIGxhenlQcm9wZXJ0eSwgbGF6eVByb3BlcnRpZXMsIGdldE9wdCwgdG9Vbml4VGltZSwgdW5peFRpbWUsIGZyb21Vbml4VGltZSwgcmFuZ2UsIHJlcGVhdGVyLCByZXBlYXQsIGNodW5rQXJyYXksIGNhbWVsaXplLCBkZWNhbWVsaXplLCBMb2NhdGlvbiwgZm9ybWF0LCBmb3JtYXRXaXRoT3B0aW9ucywgaXNOdW1lcmljLCBmdW5jdGlvbk5hbWUsIGNsYXNzTmFtZSwgaXNBcnJvd0Z1bmN0aW9uLCBpbW11dGFibGVDbGFzcywgaXNBcnJheSwgQXJyYXlGYWNhZGUsIGFycmF5RmFjYWRlLCBiaXRzLCBkdXBBcnJheUJ1ZmZlciwgZ2V0VHlwZU5hbWUsIGlzQXJyYXlCdWZmZXIsIGlzQmlnRGVjaW1hbCwgaXNCaWdGbG9hdCwgaXNCaWdJbnQsIGlzQm9vbCwgaXNDRnVuY3Rpb24sIGlzQ29uc3RydWN0b3IsIGlzRW1wdHlTdHJpbmcsIGlzRXJyb3IsIGlzRXhjZXB0aW9uLCBpc0V4dGVuc2libGUsIGlzRnVuY3Rpb24sIGlzSFRNTEREQSwgaXNJbnN0YW5jZU9mLCBpc0ludGVnZXIsIGlzSm9iUGVuZGluZywgaXNMaXZlT2JqZWN0LCBpc051bGwsIGlzTnVtYmVyLCBpc1VuZGVmaW5lZCwgaXNTdHJpbmcsIGlzVW5pbml0aWFsaXplZCwgaXNTeW1ib2wsIGlzVW5jYXRjaGFibGVFcnJvciwgaXNSZWdpc3RlcmVkQ2xhc3MsIHJhbmQsIHJhbmRpLCByYW5kZiwgc3JhbmQsIHRvQXJyYXlCdWZmZXIsIGdldE1ldGhvZHMsIGlzb0RhdGUgfSBmcm9tICcuL2xpYi9taXNjLmpzJzsKCmNvbnN0IGVsZW1lbnREZWZhdWx0QXR0cmlidXRlcyA9IHsKICBzdHJva2U6ICdyZWQnLAogIGZpbGw6ICdub25lJywKICAnc3Ryb2tlLWxpbmVjYXAnOiAncm91bmQnLAogICdzdHJva2UtbGluZWpvaW4nOiAncm91bmQnLAogICdzdHJva2Utd2lkdGgnOiAwLjEKfTsKCi8qIHByZXR0aWVyLWlnbm9yZSAqLwovL2V4dGVuZCh3aW5kb3csIHsgUmVhY3QsIFJlYWN0Q29tcG9uZW50LCBXZWJTb2NrZXRDbGllbnQsIGh0bWwgfSwgeyBkb20sIGtleXNpbSB9LCBnZW9tLCB7IEl0ZXJhdG9yLCBGdW5jdGlvbmFsIH0sIHsgRWFnbGVOb2RlTGlzdCwgRWFnbGVOb2RlTWFwLCBFYWdsZURvY3VtZW50LCBFYWdsZVJlZmVyZW5jZSwgRWFnbGVOb2RlLCBFYWdsZUVsZW1lbnQgfSwgeyB0b1hNTCwgWG1sT2JqZWN0LCBYbWxBdHRyIH0sIHsgQ1RPUlMsIEVDTUFTY3JpcHRQYXJzZXIsIEVTTm9kZSwgZXN0cmVlLCBGYWN0b3J5LCBMZXhlciwgUGFyc2VyLCBQYXRoUmVwbGFjZXIsIFByaW50ZXIsIFN0YWNrLCBUb2tlbiwgUmVhY3RDb21wb25lbnQsIENsaXBwZXJMaWIsIFNoYXBlLCBpc1JHQkEsIFJHQkEsIEltbXV0YWJsZVJHQkEsIGlzSFNMQSwgSFNMQSwgSW1tdXRhYmxlSFNMQSwgQWxlYSwgTWVzc2FnZSB9LCB7IENob29zZXIsIHVzZVN0YXRlLCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiwgUG9seWdvbiwgQ2lyY2xlIH0gKTsKY29uc3QgVGltZXIgPSB7IC4uLlRpbWVycywgb25jZTogZG9tLlRpbWVyIH07CgpsZXQgY3VycmVudFByb2ogPSB0cmtsLnByb3BlcnR5KHdpbmRvdywgJ3Byb2plY3QnKTsKbGV0IGxheWVyTGlzdCA9IHRya2wucHJvcGVydHkod2luZG93LCAnbGF5ZXJzJywgeyB2YWx1ZTogW10gfSk7CmxldCBnY29kZSA9IHRya2wobnVsbCk7CmxldCB3YW50QXV0aG9yaXphdGlvbiA9IHRya2wobnVsbCk7CgpsZXQgb3BlbiA9IHRya2woKTsKbGV0IHNob3dTZWFyY2ggPSB0cmtsKHRydWUpOwpsZXQgZHVtcCA9IHRya2woe30pOwpsZXQgY2FjaGUgPSBuZXcgbHNjYWNoZSgpOwoKbGV0IHByb2plY3ROYW1lID0gJ0hlYWRwaG9uZS1BbXBsaWZpZXItQ2xhc3NBQi1hbHQzJzsKbGV0IHBhbGV0dGUgPSBudWxsOwpsZXQgc3ZnRWxlbWVudDsKbGV0IGJyZFhtbCwgc2NoWG1sLCBicmREb20sIHNjaERvbTsKbGV0IGJvYXJkLCBzY2hlbWF0aWM7CmxldCBsb2FkZWRQcm9qZWN0cyA9IFtdOwpsZXQgY29udGFpbmVyOwoKbGV0IHByb2plY3RGaWxlcyA9IFtdOwpsZXQgYWN0aXZlRmlsZTsKbGV0IHRyYW5zZm9ybSA9IHRya2wobmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpKTsKbGV0IHNpemVMaXN0ZW5lciA9IHRya2woe30pOwpsZXQgYXNwZWN0TGlzdGVuZXIgPSB0cmtsKDEpOwpjb25zdCBkb2N1bWVudFRpdGxlID0gdHJrbCgnJyk7CmNvbnN0IGRvY3VtZW50U2l6ZSA9IHRya2woJycpOwpjb25zdCBsb2FkaW5nID0gdHJrbChmYWxzZSk7CmNvbnN0IGZpbGVQYW5lbCA9IHRya2woZmFsc2UpOwoKY29uc3QgU2F2ZUNvbmZpZyA9IGRlYm91bmNlKCgpID0+IHsKICBsZXQgb2JqID0gc3RvcmUudG9PYmplY3QoKTsKCiAgcmV0dXJuIGZldGNoKCdjb25maWcnLCB7CiAgICBtZXRob2Q6ICdQT1NUJywKICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIH0sCiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvYmopCiAgfSkudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7Cn0sIDUgKiAxMDAwKTsKCmNvbnN0IExvYWRDb25maWcgPSBvbmNlKCgpID0+CiAgZmV0Y2goJ2NvbmZpZycpCiAgICAudGhlbihSZXNwb25zZURhdGEpCiAgICAudGhlbihyID0+IChjb25zb2xlLmxvZygnY29uZmlnOicsIHIpLCByKSkKICAgIC8vICAgIC50aGVuKHIgPT4gci5qc29uKCkpCiAgICAudGhlbihyID0+ICh7CiAgICAgIC4uLnIsCiAgICAgIGVudHJpZXMoKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHIpOwogICAgICB9CiAgICB9KSkKKTsKCmxldCBzdG9yZSA9ICh3aW5kb3cuc3RvcmUgPSBtYWtlTG9jYWxTdG9yYWdlKCkpOwoKbGV0IHByb2plY3RzID0gdHJrbChbXSk7CmxldCBzb2NrZXQgPSB0cmtsKCk7CmxldCBjb25maWcgPSB7CiAgbGlzdFVSTDogdHJrbChzdG9yZS5nZXQoJ3VybCcpIHx8IG51bGwpLAogIHNlYXJjaEZpbHRlcjogdHJrbChzdG9yZS5nZXQoJ2ZpbHRlcicpIHx8ICcqJyksCiAgem9vbUxvZzogdHJrbChzdG9yZS5nZXQoJ3pvb20nKSB8fCBudWxsKSwKICBsb2dTaXplOiB0cmtsKHN0b3JlLmdldCgnY29uc29sZScpIHx8IG51bGwpLAogIGRlYnVnRmxhZzogdHJrbChzdG9yZS5nZXQoJ2RlYnVnJykgfHwgZmFsc2UpLAogIGNyZWRlbnRpYWxzOiB0cmtsKHN0b3JlLmdldCgnYXV0aCcpIHx8IHt9KSwKICBzaG93R3JpZDogdHJrbChzdG9yZS5nZXQoJ2dyaWQnKSB8fCB0cnVlKSwKICBzb3J0T3JkZXI6IHRya2woc3RvcmUuZ2V0KCdzb3J0T3JkZXInKSB8fCAtMSksCiAgc29ydEtleTogdHJrbChzdG9yZS5nZXQoJ3NvcnRLZXknKSB8fCAnbmFtZScpLAogIGN1cnJlbnRQcm9qZWN0OiB0cmtsKHN0b3JlLmdldCgnY3VycmVudFByb2plY3QnKSB8fCBudWxsKQp9OwoKY29uc3QgR2V0UHJvamVjdCA9IGFyZyA9PiB7CiAgbGV0IHJldCA9IHR5cGVvZiBhcmcgPT0gJ251bWJlcicgPyBwcm9qZWN0cygpW2FyZ10gOiB0eXBlb2YgYXJnID09ICdzdHJpbmcnID8gcHJvamVjdHMoKS5maW5kKHAgPT4gcC5uYW1lID09IGFyZykgOiBhcmc7CiAgaWYodHlwZW9mIHJldCA9PSAnc3RyaW5nJykgcmV0ID0geyBuYW1lOiByZXQgfTsKICByZXR1cm4gcmV0Owp9OwpsZXQgZWxlbWVudENoaWxkcmVuID0gbnVsbDsKbGV0IGVsZW1lbnRHZW9tZXRyaWVzID0gbnVsbDsKbGV0IHpvb21WYWx1ZSA9IGdldHNldCgKICAoKSA9PiBab29tRmFjdG9yKGNvbmZpZy56b29tTG9nKCkpLAogIHZhbHVlID0+IGNvbmZpZy56b29tTG9nKFpvb21Mb2codmFsdWUpKQopOwovLwovKmxldCB6b29tVmFsdWU9IGdldHNldCgKICAoKSA9PiBab29tRmFjdG9yKGNvbmZpZy56b29tTG9nKCkpLAogIHYgPT4gY29uZmlnLnpvb21Mb2coWm9vbUxvZyh2KSkKICApOyovCi8vbGV0IHpvb21WYWx1ZSA9IGRlcml2ZUdldFNldChjb25maWcuem9vbUxvZywgWm9vbUZhY3RvciwgWm9vbUxvZyk7Cgpjb25maWcuem9vbUxvZy5zdWJzY3JpYmUoQWRqdXN0Wm9vbSk7Cgpjb25zdCBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4gWy4uLihhcnIgPyBhcnIgOiBbXSksIC4uLml0ZW1zXTsKCmNvbnN0IHVzZVNsb3QgPSAoYXJyLCBpKSA9PiBbKCkgPT4gYXJyW2ldLCB2ID0+IChhcnJbaV0gPSB2KV07CmNvbnN0IHRya2xHZXRTZXQgPSAoZ2V0LCBzZXQpID0+IHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQgPyBzZXQodmFsdWUpIDogZ2V0KCk7Ci8vY29uc3QgdXNlVHJrbCA9IHRya2wgPT4gWygpID0+IHRya2woKSwgdmFsdWUgPT4gdHJrbCh2YWx1ZSldOwoKY29uc3QgTW91c2VFdmVudHMgPSBoID0+ICh7CiAgb25Nb3VzZURvd246IGgsCiAgLyogIG9uQmx1cjogaCwqLyBvbk1vdXNlT3V0OiBoLAogIG9uTW91c2VVcDogaAp9KTsKCnRsaXRlKCgpID0+ICh7CiAgZ3JhdjogJ253JywKICBhdHRyaWI6IFsnZGF0YS10bGl0ZScsICdkYXRhLXRvb2x0aXAnLCAndGl0bGUnLCAnZGF0YS1maWxlbmFtZSddCn0pKTsKCmNvbnN0IHV0ZjhEZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpOwpsZXQgc3ZnT3duZXIsIHBhcmVudDsKCmNvbnN0IHN2Z0ZhY3RvcnkgPSBtZW1vaXplKChwYXJlbnQsIGRlbGVnYXRlKSA9PiB7CiAgcGFyZW50ID0gcGFyZW50ID8gRWxlbWVudC5maW5kKHBhcmVudCkgOiBwcm9qZWN0LnN2Z0VsZW1lbnQucGFyZW50RWxlbWVudDsKICBjb25zdCBmYWN0b3J5ID0gU1ZHLmZhY3RvcnkoewogICAgLi4uZGVsZWdhdGUsCiAgICBhcHBlbmRfdG8oZWxlbSwgcCkgewogICAgICBpZihkZWxlZ2F0ZS5hcHBlbmRfdG8pIGRlbGVnYXRlLmFwcGVuZF90byhlbGVtLCBwIHx8IHBhcmVudCk7CiAgICB9CiAgfSk7CiAgbGV0IHJlY3QgPSBjYWxjVmlld0JveChwYXJlbnQpOwogIGxldCB6SW5kZXggPSBtYXhaSW5kZXgoKSArIDE7CiAgY29uc3Qgc3ZnID0gWwogICAgJ3N2ZycsCiAgICB7CiAgICAgIHZpZXdCb3g6IHJlY3QudG9TdHJpbmcoKSwKICAgICAgc3R5bGU6IGBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDA7IHRvcDogMDsgei1pbmRleDogJHt6SW5kZXh9OyBzdHJva2U6ICMwMDAsIGZpbGw6IG5vbmU7YAogICAgfSwKICAgIFsKICAgICAgWydkZWZzJ10sCiAgICAgIFsKICAgICAgICAnZycsCiAgICAgICAgewogICAgICAgICAgdHJhbnNmb3JtOiBgIHNjYWxlKDEsLTEpIHRyYW5zbGF0ZSgwLDEuMjcpIHRyYW5zbGF0ZSgwLCR7LXJlY3QueTJ9KSBgCiAgICAgICAgfSwKICAgICAgICBbWydyZWN0JywgeyAuLi5yZWN0LnRvT2JqZWN0KCksIGZpbGw6ICdoc2xhKDAsMCUsNTAlLDAuMzMzMyknIH1dXQogICAgICBdCiAgICBdCiAgXTsKICBjb25zdCBlbGVtZW50ID0gKHN2Z093bmVyID0gZmFjdG9yeSguLi5zdmcpKTsKICBmYWN0b3J5LnJvb3QgPSBwYXJlbnQgPSBlbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQ7CiAgcmV0dXJuIGZhY3Rvcnk7Cn0pOwoKZnVuY3Rpb24gRHJhd1NWRyguLi5hcmdzKSB7CiAgY29uc3QgZmFjdG9yeSA9IHN2Z0ZhY3RvcnkoJ2JvZHknLCB7CiAgICBhcHBlbmRfdG8oZWxlbSwgcCkgewogICAgICAvL2NvbnNvbGUubG9nKCdhcHBlbmRfdG8nLCB0aGlzLCB7IGVsZW0sIHAgfSk7CiAgICAgIChwIHx8IHRoaXMucm9vdCkuYXBwZW5kQ2hpbGQoZWxlbSk7CiAgICAgIGFkanVzdFZpZXdCb3goZWxlbSk7CiAgICB9CiAgfSk7CiAgbGV0IGU7CiAgLypsZXQgcGFyZW50ID0gcHJvamVjdC5zdmcucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkOwogICAgY29uc3QgYXBwZW5kID0gZSA9PiBwYXJlbnQuYXBwZW5kQ2hpbGQoZSk7Ki8KICBsZXQgYyA9IFJHQkEucmFuZG9tKCk7CiAgbGV0IFt0YWcsIGF0dHJzLCBjaGlsZHJlbl0gPSBhcmdzOwogIGlmKHR5cGVvZiB0YWcgPT0gJ3N0cmluZycpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdkcmF3KCcsIC4uLmFyZ3MsICcpJyk7CiAgICBlID0gZmFjdG9yeSh0YWcsIHsgc3Ryb2tlOiBjLmhleCgpLCAnc3Ryb2tlLXdpZHRoJzogMC4xLCAuLi5hdHRycyB9LCBjaGlsZHJlbik7CiAgfSBlbHNlIGlmKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHsKICAgIGxldCBpdGVtcyA9IGFyZ3Muc2hpZnQoKTsKICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWluID4gZGl2ID4gZGl2ID4gZGl2ID4gc3ZnOm50aC1jaGlsZCgyKSA+IGcnKTsKICAgIC8vICAgc2V0Vmlld0JveChmYWN0b3J5LnJvb3Qub3duZXJTVkdFbGVtZW50fHxmYWN0b3J5LnJvb3QsIEJCb3guZnJvbShpdGVtcykpOwogICAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKSB7CiAgICAgIGxldCBsaW5lOwogICAgICBpZihpc0xpbmUoaXRlbSkpIGxpbmUgPSBuZXcgTGluZShpdGVtKTsKICAgICAgaWYobGluZSkgewogICAgICAgIGUgPSBmYWN0b3J5KCdsaW5lJywgewogICAgICAgICAgLi4ubGluZS50b09iamVjdCgpLAogICAgICAgICAgc3Ryb2tlOiBjLmhleCgpLAogICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IDAuMQogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuOwogIH0KCiAgZnVuY3Rpb24gYWRqdXN0Vmlld0JveChlKSB7CiAgICBsZXQgb3duZXJTVkc7CgogICAgaWYoIShvd25lclNWRyA9IGUub3duZXJTVkdFbGVtZW50KSkgcmV0dXJuOwogICAgbGV0IHJlY3QgPSBuZXcgUmVjdChvd25lclNWRy5nZXRCQm94KCkpOwogICAgLy9jb25zb2xlLmxvZygnb3duZXJTVkc6Jywgb3duZXJTVkcsICdyZWN0OicsIHJlY3QpOwogICAgb3duZXJTVkcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgcmVjdCArICcnKTsKICAgIGlmKCFvd25lclNWRy5zdHlsZS5tYXhIZWlnaHQpIEVsZW1lbnQuc2V0Q1NTKG93bmVyU1ZHLCB7IG1heFdpZHRoOiAnMTAwdncnLCBtYXhIZWlnaHQ6ICcxMDB2aCcgfSk7CiAgfQoKICByZXR1cm4gZSB8fCBmYWN0b3J5Owp9CgpmdW5jdGlvbiBjYWxjVmlld0JveChib3gpIHsKICBib3ggPSBib3ggfHwgKHByb2plY3QgJiYgcHJvamVjdC5kb2MgJiYgQkJveC5mcm9tKHByb2plY3QuZG9jLmdldE1lYXN1cmVzKHRydWUpIHx8IHByb2plY3QuZG9jLmdldEJvdW5kcygwKSkpOwogIGJveCA9IGJveCB8fCBFbGVtZW50LnJlY3QoJy5hc3BlY3QtcmF0aW8tYm94LWluc2lkZScpOwogIGNvbnN0IHsgd2lkdGgsIGhlaWdodCwgeCwgeSB9ID0gYm94OwogIGxldCB7IHgxLCB5MSwgeDIsIHkyIH0gPSBuZXcgUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTsKICBjb25zdCByZWN0ID0gbmV3IEJCb3goeDEsIHkxIC0geTIsIHgyIC0geDEsIHkyKTsKICByZXR1cm4gcmVjdDsKfQoKZnVuY3Rpb24gc2V0Vmlld0JveChzdmdPd25lciwgYm94KSB7CiAgc3ZnT3duZXIgPSBzdmdPd25lciB8fCBbLi4uRWxlbWVudC5maW5kQWxsKCdzdmcnLCBFbGVtZW50LmZpbmQoJyNtYWluJykpXS5yZXZlcnNlKClbMF07CiAgY29uc3QgcmVjdCA9IGJveDsgLy8gaW5zdGFuY2VvZiBCQm94ID8gYm94IDogRHJhd1NWRy5jYWxjVmlld0JveChib3gpOwogIHJlY3QueTEgLT0gcmVjdC55MjsKICByZWN0LngyIC09IHJlY3QueDE7CiAgLy9jb25zb2xlLmxvZygnc2V0Vmlld0JveCcsIHsgc3ZnT3duZXIsIHJlY3QsIGJveCB9KTsKICBzdmdPd25lci5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCByZWN0LnRvU3RyaW5nKCkpOwogIHN2Z093bmVyLmxhc3RFbGVtZW50Q2hpbGQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCBgc2NhbGUoMSwtMSkgIHRyYW5zbGF0ZSgwLCR7LXJlY3QuaGVpZ2h0fSlgKTsKICBFbGVtZW50LmF0dHIoc3ZnT3duZXIubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZCwgewogICAgLi4ucmVjdC50b1JlY3QoKQogIH0pOwp9CmNvbnN0IEVsZW1lbnRUb1hNTCA9IChlLCBwcmVkaWNhdGUpID0+IHsKICBpZihnbG9iYWxUaGlzLlhNTFNlcmlhbGl6ZXIpIHJldHVybiBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKGUpOwoKICBjb25zdCB4ID0gRWxlbWVudC50b09iamVjdChlLCB7IHByZWRpY2F0ZSB9KTsKCiAgZm9yKGxldCBbdmFsdWUsIHBhdGhdIG9mIGRlZXAuaXRlcmF0ZSh4LCAodiwgaykgPT4ga1trLmxlbmd0aCAtIDFdID09ICdkJykpIHsKICAgIGRlZXAuc2V0KHgsIHBhdGgsIHZhbHVlLnRyaW0oKS5yZXBsYWNlKC9ccysvZywgJyAnKSk7CiAgfQoKICBmb3IobGV0IFt2YWx1ZSwgcGF0aF0gb2YgZGVlcC5pdGVyYXRlKHgsICh2LCBrKSA9PiBrW2subGVuZ3RoIC0gMV0gPT0gJ2lkJyAmJiB2ID09ICdyZWN0cycpKSBkZWVwLnVuc2V0KHgsIHBhdGguc2xpY2UoMCwgLTEpKTsKICBmb3IobGV0IFt2YWx1ZSwgcGF0aF0gb2YgZGVlcC5pdGVyYXRlKHgsICh2LCBrKSA9PiAvKF5kYXRhLXxeY2xhc3MkKS8udGVzdChrW2subGVuZ3RoIC0gMV0pKSkgZGVlcC51bnNldCh4LCBwYXRoKTsKICAvL2NvbnNvbGUubG9nKCd4OicsIHgpOwogIHJldHVybiBFbGVtZW50LnRvU3RyaW5nKHgsIHsgbmV3bGluZTogJ1xuJyB9KTsKfTsKCmNvbnN0IGZpbGVzeXN0ZW0gPSB7CiAgYXN5bmMgcmVhZEZpbGUoZmlsZW5hbWUpIHsKICAgIHJldHVybiBhd2FpdCBGZXRjaFVSTChgc3RhdGljLyR7ZmlsZW5hbWV9YCk7CiAgfSwKICBhc3luYyB3cml0ZUZpbGUoZmlsZW5hbWUsIGRhdGEsIG92ZXJ3cml0ZSA9IHRydWUpIHsKICAgIHJldHVybiBhd2FpdCBmZXRjaCgnc2F2ZScsIHsKICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICAgJ0NvbnRlbnQtRGlzcG9zaXRpb24nOiBgYXR0YWNobWVudDsgZmlsZW5hbWU9IiR7ZmlsZW5hbWV9ImAKICAgICAgfSwKICAgICAgYm9keTogZGF0YSArICcnCiAgICB9KTsKICB9LAogIGFzeW5jIGV4aXN0cyhmaWxlbmFtZSkge30sCiAgYXN5bmMgcmVhbHBhdGgoZmlsZW5hbWUpIHt9Cn07Cgphc3luYyBmdW5jdGlvbiBMb2FkRmlsZShmaWxlKSB7CiAgbGV0IHsgdXJsLCBuYW1lIH0gPSB0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJyA/IHsgdXJsOiBmaWxlLCBuYW1lOiBmaWxlLnJlcGxhY2UoLy4qXC8vZywgJycpIH0gOiBHZXRQcm9qZWN0KGZpbGUpOwogIGNvbnNvbGUubG9nKGBMb2FkRmlsZSAke25hbWV9YCk7CiAgLy8gdXJsID0gLzpcL1wvLy50ZXN0KHVybCkgPyB1cmwgOiAvXih0bXB8ZGF0YXxzdGF0aWMpXC8vLnRlc3QodXJsKSA/ICcvJyArIHVybCA6IGAvZGF0YS8ke25hbWV9YDsKICB1cmwgPSBgL2ZpbGU/YWN0aW9uPWxvYWQmZmlsZT0ke2ZpbGV9YDsgLy8gLzpcL1wvLy50ZXN0KHVybCkgPyB1cmwgOiAvXih0bXB8ZGF0YXxzdGF0aWMpXC8vLnRlc3QodXJsKSA/ICcvJyArIHVybCA6IGAvZGF0YS8ke25hbWV9YDsKICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBGZXRjaFVSTCh1cmwpOwogIGxldCB4bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7CiAgY29uc29sZS5sb2coYExvYWRGaWxlICR7bmFtZX1gLCB7IHhtbCB9KTsKICBsZXQgZG9jID0gbmV3IEVhZ2xlRG9jdW1lbnQoeG1sLCBudWxsLCBuYW1lLCBudWxsLCBmaWxlc3lzdGVtKTsKICBjb25zb2xlLmxvZyhgTG9hZEZpbGUgJHtuYW1lfWAsIHsgZG9jLCB4bWwgfSk7CiAgaWYoL1wuYnJkJC8udGVzdChuYW1lKSkgd2luZG93LmJvYXJkID0gZG9jOwogIGlmKC9cLnNjaCQvLnRlc3QobmFtZSkpIHdpbmRvdy5zY2hlbWF0aWMgPSBkb2M7CiAgaWYoL1wubGJyJC8udGVzdChuYW1lKSkgd2luZG93LmxpYnJhcmllcyA9IGFkZCh3aW5kb3cubGlicmFyaWVzLCBkb2MpOwogIHJldHVybiBkb2M7Cn0KCmFzeW5jIGZ1bmN0aW9uIFNhdmVGaWxlKGZpbGVuYW1lLCBkYXRhLCBjb250ZW50VHlwZSkgewogIGlmKCFkYXRhLmVuZHNXaXRoKCdcbicpKSBkYXRhICs9ICdcbic7CiAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ3NhdmUnLCB7CiAgICBtZXRob2Q6ICdwb3N0JywKICAgIGhlYWRlcnM6IHsKICAgICAgJ0NvbnRlbnQtVHlwZSc6IGNvbnRlbnRUeXBlIHx8ICdhcHBsaWNhdGlvbi94bWwnLAogICAgICAnQ29udGVudC1EaXNwb3NpdGlvbic6IGBhdHRhY2htZW50OyBmaWxlbmFtZT0iJHtmaWxlbmFtZX0iYAogICAgfSwKICAgIGJvZHk6IGRhdGEKICB9KTsKICBsZXQgeyBzdGF0dXMsIHN0YXR1c1RleHQgfSA9IHJlc3BvbnNlOwogIC8vY29uc29sZS5sb2coJ1NhdmVGaWxlJywge2ZpbGVuYW1lLGRhdGEsIHJlc3BvbnNlfSk7CiAgZ2xvYmFsVGhpcy5zYXZlUmVzcG9uc2UgPSByZXNwb25zZTsKICBsZXQgYm9keSA9IGF3YWl0IHJlc3BvbnNlCiAgICAudGV4dCgpCiAgICAudGhlbihzID0+IEpTT04ucGFyc2UocykpCiAgICAuY2F0Y2goKCkgPT4gbnVsbCk7CiAgbGV0IGhlYWRlcnMgPSBbLi4uKGF3YWl0IHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKV07CiAgLy9jb25zb2xlLmxvZygnU2F2ZUZpbGUnLCB7IGJvZHksIGhlYWRlcnMgfSk7CiAgY29uc3QgcmVzdWx0ID0geyBzdGF0dXMsIHN0YXR1c1RleHQgfTsKICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoYC90bXAvJHtmaWxlbmFtZX1gKTsKICByZXNwb25zZSA9IG5ldyBSZXNwb25zZShkYXRhLCB7IHN0YXR1cywgc3RhdHVzVGV4dCB9KTsKICBsZXQgY2FjaGUgPSBhd2FpdCBjYWNoZXMub3BlbignZmV0Y2gnKTsKICBsZXQgciA9IGF3YWl0IGNhY2hlLnB1dChyZXF1ZXN0LCByZXNwb25zZSk7CiAgTG9nSlMuaW5mbyhgJHtmaWxlbmFtZX0gc2F2ZWQgJiBjYWNoZWQgKCR7Ym9keS5zaXplfSBieXRlcylgKTsKICByZXR1cm4gcmVzdWx0Owp9Cgphc3luYyBmdW5jdGlvbiBTYXZlU1ZHKGZpbGVuYW1lLCBsYXllcnMgPSBbMSwgMTYsIDIwLCAyMSwgMjIsIDIzLCAyNSwgMjcsIDQ3LCA0OCwgNTFdKSB7CiAgY29uc3QgeyBkb2MgfSA9IHByb2plY3Q7CiAgY29uc3QgeyBiYXNlbmFtZSwgdHlwZU5hbWUgfSA9IGRvYzsKICBpZighZmlsZW5hbWUpIGZpbGVuYW1lID0gYCR7ZG9jLmJhc2VuYW1lfS4ke2RvYy50eXBlTmFtZX0uc3ZnYDsKICAvL2NvbnNvbGUubG9nKCdTYXZlU1ZHKCcsIGZpbGVuYW1lLCAnLCAnLCBsYXllcnMsICcpJyk7CiAgbGV0IHByZWRpY2F0ZSA9IGVsZW1lbnQgPT4gewogICAgLyogIGlmKGVsZW1lbnQuaGFzQXR0cmlidXRlKSB7aWYoIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWxheWVyJykpIHJldHVybiB0cnVlOwogICAgY29uc3QgbGF5ZXIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1sYXllcicpOwogICAgbGV0IFtudW1iZXIsIG5hbWVdID0gbGF5ZXIuc3BsaXQoL1wgLyk7CiAgICBpZihudW1iZXIgIT09IHVuZGVmaW5lZCAmJiBuYW1lICE9PSB1bmRlZmluZWQpIHJldHVybiBsYXllcnMuaW5kZXhPZigrbnVtYmVyKSAhPSAtMSB8fCBsYXllcnMuaW5kZXhPZihuYW1lKSAhPSAtMTsKICB9Ki8KICAgIHJldHVybiB0cnVlOwogIH07CiAgbGV0IGRhdGEgPSBFbGVtZW50VG9YTUwocHJvamVjdC5zdmdFbGVtZW50LCBwcmVkaWNhdGUpOwogIC8vbGV0IGRhdGEgPSBFbGVtZW50VG9YTUwocHJvamVjdC5zdmdFbGVtZW50KTsKICByZXR1cm4gYXdhaXQgU2F2ZUZpbGUoZmlsZW5hbWUucmVwbGFjZSgvXC5zdmckL2ksICcuc3ZnJyksIGRhdGEpOwp9Cgphc3luYyBmdW5jdGlvbiBMb2FkU1ZHKGZpbGVuYW1lKSB7CiAgbGV0IGRhdGEgPSBhd2FpdCBGZXRjaFVSTChmaWxlbmFtZSkudGhlbihSZXNwb25zZURhdGEpOwogIGxldCB4bWwgPSB0WG1sKGRhdGEucmVwbGFjZSgvPFw/eG1sW14+XSo+LywgJycpKTsKICBsZXQgZWxlbWVudCA9IEVsZW1lbnQuY3JlYXRlKCdkaXYnLCB7IHN0eWxlOiB7IGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snIH0gfSwgJ2JvZHknKTsKICBsZXQgY29tcG9uZW50ID0gUmVhY3RDb21wb25lbnQuZnJvbU9iamVjdCh4bWxbMF0pOwogIFJlYWN0LnJlbmRlcihjb21wb25lbnQsIGVsZW1lbnQpOwogIHJldHVybiBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkOwp9Cgphc3luYyBmdW5jdGlvbiBMb2FkSW1hZ2UoZmlsZW5hbWUpIHsKICBsZXQgZWxlbWVudCA9IEVsZW1lbnQuY3JlYXRlKCdpbWcnLCB7IHNyYzogZmlsZW5hbWUgfSwgJ2JvZHknKTsKICByZXR1cm4gZWxlbWVudDsKfQoKY29uc3QgUmVuZGVyQ29tcG9uZW50ID0gKCgpID0+IHsKICBsZXQgaWQgPSAxOwogIHJldHVybiBmdW5jdGlvbiBSZW5kZXJDb21wb25lbnQoY29tcG9uZW50KSB7CiAgICBsZXQgZWxlbWVudCA9IEVsZW1lbnQuY3JlYXRlKCdkaXYnLCB7IGlkOiBgcmVhY3QtJHtpZCsrfWAsIHN0eWxlOiB7IGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snIH0gfSwgJ2JvZHknKTsKICAgIFJlYWN0LnJlbmRlcihjb21wb25lbnQsIGVsZW1lbnQpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfTsKfSkoKTsKCmNvbnN0IE1vZGlmeUNvbG9ycyA9IGZuID0+IGUgPT4gewogIGNvbnN0IHsgdHlwZSwgYnV0dG9ucyB9ID0gZTsKICBpZih0eXBlLmVuZHNXaXRoKCdkb3duJykpIHsKICAgIGlmKCF3aW5kb3cuYykgd2luZG93LmMgPSBTVkcuYWxsQ29sb3JzKHByb2plY3Quc3ZnRWxlbWVudCk7CiAgICBsZXQgeyBjIH0gPSB3aW5kb3c7CiAgICBjLmR1bXAoKTsKICAgIGZuKGMpOwogIH0KfTsKCmNvbnN0IEZpbmRMYXllciA9IG5hbWVfb3JfaWQgPT4gewogIGZvcihsZXQgaWQgb2YgKG5hbWVfb3JfaWQgKyAnJykuc3BsaXQoL1xzKy9nKS5tYXAobiA9PiAoaXNOYU4obikgPyBuIDogK24pKSkgewogICAgY29uc3QgbGF5ZXIgPSBsYXllcnMuZmluZChsID0+IGwuaSA9PSBpZCB8fCBsLm5hbWUgPT0gaWQpOwogICAgaWYobGF5ZXIpIHJldHVybiBsYXllcjsKICB9Cn07Cgpjb25zdCBHZXJiZXJMYXllcnMgPSB7CiAgR1RMOiAnVG9wIChjb3BwZXIpIExheWVyJywKICBHQkw6ICdCb3R0b20gKGNvcHBlcikgTGF5ZXIgJywKICBHVE86ICdUb3AgT3ZlcmxheScsCiAgR0JPOiAnQm90dG9tIE92ZXJsYXkgJywKICBHVFA6ICdUb3AgUGFzdGUgTWFzayAnLAogIEdCUDogJ0JvdHRvbSBQYXN0ZSBNYXNrICcsCiAgR1RTOiAnVG9wIFNvbGRlciBNYXNrICcsCiAgR0JTOiAnQm90dG9tIFNvbGRlciBNYXNrICcsCiAgR0tPOiAnS2VlcC1PdXQgTGF5ZXIgJywKICBHTUw6ICdNaWxsIGxheWVyJywKICBncGk6ICdQaG90b3Bsb3R0ZXIgaW5mbyBmaWxlJywKICBUWFQ6ICdEcmlsbCBmaWxlJwp9OwoKbGV0IHN2Z0RvY0ZhY3RvcnkgPSBtZW1vaXplKChpZCA9ICcjZ2VvbScpID0+CiAgU1ZHLmZhY3RvcnkoRWxlbWVudC5maW5kKGlkKSkuaW5pdGlhbGl6ZSgnc3ZnJywgewogICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLAogICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgLyosIHN0eWxlOiAicG9pbnRlci1ldmVudHM6IG5vbmU7IiovCiAgfSkKKTsKbGV0IHN2Z0dyb3VwRmFjdG9yeSA9IG1lbW9pemUoKHByb3BzID0ge30pID0+CiAgc3ZnRG9jRmFjdG9yeSgpLnNldFJvb3QoJ2cnLCB7CiAgICBzdHJva2U6ICcjZjAwJywKICAgICdzdHJva2Utd2lkdGgnOiAzLAogICAgZmlsbDogJ25vbmUnLAogICAgLi4ucHJvcHMKICB9KQopOwoKY29uc3QgbWF4WkluZGV4ID0gKCkgPT4KICBNYXRoLm1heCgKICAgIC4uLkVsZW1lbnQuZmluZEFsbCgnKicpCiAgICAgIC5tYXAoZSA9PiBFbGVtZW50LmdldENTUyhlLCAnei1pbmRleCcpKQogICAgICAuZmlsdGVyKHogPT4gIS8oYXV0bykvLnRlc3QoeikpCiAgICAgIC5tYXAoeiA9PiAreikKICApOwoKY29uc3QgZ3JvdXBQcm9wcyA9IG1lbW9pemUoKCkgPT4gewogIGxldCB0cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDMwMCwtNTApYDsKICBjb25zdCBwcm5nID0gbmV3IEFsZWEoMjM0MjM0ODAwKTsKICBjb25zdCByYW5kb21Db2xvciA9ICgpID0+IEhTTEEucmFuZG9tKFsyNDAsIC0xMjBdLCBbMTAwLCAxMDBdLCBbMzAsIDc1XSwgWzEsIDFdLCBwcm5nKS5oZXgoKTsKICByZXR1cm4gWwogICAgeyBzdHJva2U6IHJhbmRvbUNvbG9yKCksIHRyYW5zZm9ybSB9LAogICAgeyBzdHJva2U6IHJhbmRvbUNvbG9yKCksIHRyYW5zZm9ybSB9CiAgXTsKfSk7CgpmdW5jdGlvbiBEcmF3QXJjKHN0YXJ0LCBlbmQsIGFuZ2xlKSB7CiAgbGV0IFtyLCBnLCBiXSA9IGdyb3VwUHJvcHMoKS5tYXAocHJvcHMgPT4gc3ZnR3JvdXBGYWN0b3J5KHByb3BzKS5jbGVhcigpKTsKCiAgbGV0IFtwMSwgcDJdID0gW3N0YXJ0LCBlbmRdLm1hcChwID0+IG5ldyBQb2ludChwKSk7CgogIGxldCBsaW5lID0gbmV3IExpbmUocDEsIHAyKTsKICBsZXQgcmFkaXVzID0gQXJjLnJhZGl1cyhhbmdsZSwgcDEsIHAyKTsKICBsZXQgbGVuZ3RoID0gQXJjLmxlbmd0aChhbmdsZSwgcDEsIHAyKTsKICBsZXQgY2VudGVyID0gQXJjLmNlbnRlcihwMS54LCBwMS55LCBwMi54LCBwMi55LCByYWRpdXMpOwoKICBsZXQgcmVjdCA9IG5ldyBSZWN0KHsgeDogNTAsIHk6IDM1MCwgd2lkdGg6IDMwMCwgaGVpZ2h0OiAzMDAgfSk7CiAgbGV0IG1pZGRsZSA9IGxpbmUucG9pbnRBdCgwLjUpOwogIGxldCBwb2ludHMgPSBbCiAgICAuLi5saW5lLAogICAgbWlkZGxlLAogICAgY2VudGVyCiAgICAvLy4uLlswLjI1LCAwLjc1XS5tYXAoYSA9PiBsaW5lLnBvaW50QXQoYSkpCiAgXTsKICBsZXQgZGVnQSA9IChhbmdsZSAqIDE4MCkgLyBNYXRoLlBJOwogIGxldCBhX2IgPSAoMzYwIC0gZGVnQSkgLyAyOwogIGxldCBhbmdsZXMgPSBbOTAsIC1hX2IsIGFfYl07CiAgLy9jb25zb2xlLmxvZygnYW5nbGVzOicsIGFuZ2xlcyk7CiAgbGV0IG1hdHJpY2VzID0gYW5nbGVzLm1hcChhID0+IG5ldyBSb3RhdGlvbihhKS50b01hdHJpeCgpKTsKCiAgbGV0IHNsb3BlcyA9IG1hdHJpY2VzLm1hcChtID0+IG5ldyBQb2ludChtLnRyYW5zZm9ybVBvaW50KGxpbmUuc2xvcGUpKS5ub3JtYWwoKSk7CgogIHNsb3Blc1sxXS5tdWwoLTEpOwogIC8vY29uc29sZS5sb2coJ3Nsb3BlczonLCBzbG9wZXMpOwoKICAvLyByKCdyZWN0JywgcmVjdC50b09iamVjdCgpKTsKICBsZXQgcm90ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdChbbmV3IFRyYW5zbGF0aW9uKG1pZGRsZS54LCBtaWRkbGUueSksIG5ldyBSb3RhdGlvbig5MCksIG5ldyBUcmFuc2xhdGlvbigtbWlkZGxlLngsIC1taWRkbGUueSldKTsKICAvL2NvbnNvbGUubG9nKCdyb3Q6Jywgcm90ICsgJycpOwogIGxldCBwaXZvdHMgPSBbbWlkZGxlLCBsaW5lLmEsIGxpbmUuYl07CiAgbGV0IGNvbG9ycyA9IFsnI0VCMUYwMCcsICcjRjBDQzExJywgJyMzNERCMDUnLCAnIzAwNzhGMCcsICcjOEQxQUU2J107CiAgbGV0IGNvbXBvdW5kID0gWycjMkUxN0IzJywgJyM1NTREODUnLCAnIzM1NzhFNicsICcjRTlCNDcwJywgJyNCMzU5MTcnXTsKICBsZXQgcGFsZXR0ZSA9IFsnZmY1OTVlJywgJ2ZmY2EzYScsICc4YWM5MjYnLCAnMTk4MmM0JywgJzZhNGM5MyddLm1hcChoZXggPT4gYCMke2hleH1gKTsKICBsZXQgcmFpbmJvdyA9IFsnI0U2NDUzNScsICcjRTZBQTRDJywgJyNEMEU2MzQnLCAnIzFFRTY3QicsICcjMzM5NEU4J107CiAgbGV0IGxpbmVzMiA9IFtuZXcgTGluZShwMSwgY2VudGVyKSwgbmV3IExpbmUocDIsIGNlbnRlcildOwoKICBsZXQgbm9ybXMgPSBbcDEsIHAyXS5tYXAocCA9PiBwLmRpZmYoY2VudGVyKSkubWFwKHAgPT4gcC5ub3JtYWwoKSk7CiAgYW5nbGVzID0gbm9ybXMubWFwKHAgPT4gbW9kKHAudG9BbmdsZSh0cnVlKSwgMzYwKSk7CiAgLy9jb25zb2xlLmxvZygnYW5nbGVzOicsIGFuZ2xlcyk7CiAgLy9jb25zb2xlLmxvZygnYW5nbGVzIGFiczonLCBNYXRoLmFicyhhbmdsZXNbMF0gLSBhbmdsZXNbMV0pKTsKICAvL2NvbnNvbGUubG9nKCdhbmdsZSA6JywgYW5nbGUpOwogIC8vY29uc29sZS5sb2coJ25vcm1zOicsIG5vcm1zKTsKICAvL2NvbnNvbGUubG9nKCdjZW50ZXI6JywgY2VudGVyKTsKCiAgbGV0IHJhbmdlID0gbm9ybXMubWFwKCh7IHgsIHkgfSkgPT4gbmV3IFBvaW50KHggKiByYWRpdXMsIHkgKiByYWRpdXMpLnN1bShjZW50ZXIpKTsKICBsZXQgZGVnID0gKGFuZ2xlICogMTgwKSAvIE1hdGguUEk7CiAgbGV0IGFwcHJveCA9IHJhbmdlKDAsIGRlZywgMTApLm1hcChhID0+IFBvaW50LmZyb21BbmdsZSgoYSAqIE1hdGguUEkpIC8gMTgwIC0gYW5nbGUsIHJhZGl1cyAtIDMwKSk7CgogIC8vY29uc29sZS5sb2coJ3JhbmdlOicsIHJhbmdlKTsKICAvL2NvbnNvbGUubG9nKCdhcHByb3g6JywgYXBwcm94KTsKICAvL3JhbmdlID0gcmFuZ2UubWFwKHYgPT4gdi4gc3VtKGNlbnRlcikpOwoKICBwb2ludHMuZm9yRWFjaCgoeyB4LCB5IH0sIGkpID0+CiAgICBiKCdjaXJjbGUnLCB7CiAgICAgIGN4OiB4LAogICAgICBjeTogeSwKICAgICAgcjogMTAsCiAgICAgIGZpbGw6IHJhaW5ib3dbaV0sCiAgICAgICdzdHJva2Utd2lkdGgnOiAyLAogICAgICBzdHJva2U6ICdibGFjaycKICAgIH0pCiAgKTsKCiAgbGV0IHN2ZyA9IGcoJ2xpbmUnLCB7IC4uLmxpbmUudG9PYmplY3QoKSB9KS5vd25lclNWR0VsZW1lbnQ7CiAgLy9jb25zb2xlLmxvZygnc3ZnOicsIHN2Zyk7CiAgc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7CiAgICAvL2NvbnNvbGUubG9nKCdjbGlja2VkOicsIGUudGFyZ2V0KTsKICAgIHN2Zy5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJyk7CiAgfSk7CiAgbGluZXMyLmZvckVhY2goKGwsIGkpID0+IGcoJ2xpbmUnLCB7IC4uLmwudG9PYmplY3QoKSwgc3Ryb2tlOiBjb21wb3VuZFtpXSB9KSk7CgogIHJhbmdlLmZvckVhY2goKHAsIGkpID0+IGIoJ2NpcmNsZScsIHsgY3g6IHAueCwgY3k6IHAueSwgcjogMTUsIHN0cm9rZTogJyMwZmYnIH0pKTsKICBhcHByb3guZm9yRWFjaCgocCwgaSkgPT4KICAgIGIoJ2NpcmNsZScsIHsKICAgICAgY3g6IHAueCwKICAgICAgY3k6IHAueSwKICAgICAgcjogOSwKICAgICAgZmlsbDogJyNmZjAnLAogICAgICBzdHJva2U6ICcjMDAwJywKICAgICAgJ3N0cm9rZS13aWR0aCc6IDEuNSwKICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7Y2VudGVyfSlgCiAgICB9KQogICk7CgogIGIoJ3BvbHlsaW5lJywgewogICAgcG9pbnRzOiBuZXcgUG9pbnRMaXN0KGFwcHJveCksCiAgICBmaWxsOiAnbm9uZScsCiAgICBzdHJva2U6ICcjMDAwJywKICAgICdzdHJva2Utd2lkdGgnOiAxLjUsCiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtjZW50ZXJ9KWAKICB9KTsKCiAgcigncGF0aCcsIHsgZDogYE0gJHtwMX0gQSAke3JhZGl1c30gJHtyYWRpdXN9IDAgMCAxICR7cDJ9YCB9KTsKICByKCdwYXRoJywgewogICAgZDogYE0gJHtwMX0gQSAke3JhZGl1c30gJHtyYWRpdXN9IDAgMSAwICR7cDJ9YCwKICAgIHN0cm9rZTogJyMwMGRkMDA4MCcKICB9KTsKCiAgLy9nKCdsaW5lJywgeyAuLi5saW5lMi50b09iamVjdCgpLCBzdHJva2U6ICcjMGYwJyB9KTsKfQoKY29uc3QgRHJhd0JpbmFyeVRyZWUgPSAodHJlZSwgZHJhdyA9IERyYXdTVkcoKSkgPT4gewogIGxldCBhID0gW107CiAgY29uc3QgYWRkID0gKGxldmVsLCBpdGVtKSA9PiAoYVtsZXZlbF0gPyBhW2xldmVsXS5wdXNoKGl0ZW0pIDogKGFbbGV2ZWxdID0gW2l0ZW1dKSk7CgogIFJlY3Vyc2VCaW5hcnlOb2RlKHRyZWUucm9vdCk7CgogIGxldCBzdmcgPSBFbGVtZW50LmZpbmQoJ2JvZHkgPiBzdmcnKTsKICBbLi4uc3ZnLmNoaWxkcmVuXS5mb3JFYWNoKEVsZW1lbnQucmVtb3ZlKTsKCiAgZnVuY3Rpb24gUmVjdXJzZUJpbmFyeU5vZGUobm9kZSwgcGFyZW50ID0gbnVsbCwgZGVwdGggPSAwKSB7CiAgICBsZXQgaXRlbSA9IHsgbm9kZSwgcGFyZW50LCB5OiBkZXB0aCAqIDIwIH07CiAgICBhZGQoZGVwdGgsIGl0ZW0pOwoKICAgIGlmKG5vZGUubGVmdCkgUmVjdXJzZUJpbmFyeU5vZGUobm9kZS5sZWZ0LCBpdGVtLCBkZXB0aCArIDEpOwogICAgaWYobm9kZS5yaWdodCkgUmVjdXJzZUJpbmFyeU5vZGUobm9kZS5yaWdodCwgaXRlbSwgZGVwdGggKyAxKTsKICB9CgogIC8vY29uc29sZS5sb2coJ2E6JywgYSk7CiAgYS5mb3JFYWNoKChub2RlcywgaSwgbGV2ZWwpID0+IHsKICAgIGxldCBmeCA9IGogPT4gaiAqIDIwIC0gKChub2Rlcy5sZW5ndGggLSAxKSAqIDIwKSAvIDI7CiAgICBub2Rlcy5tYXAoKG5vZGUsIGopID0+IChub2RlLnggPSBmeChqKSkpOwogIH0pOwogIGEuZmxhdCgpLmZvckVhY2goaXRlbSA9PiAoRHJhd05vZGUoaXRlbS54LCBpdGVtLnksIGl0ZW0ubm9kZSksIGl0ZW0ucGFyZW50ICYmIERyYXdFZGdlKGl0ZW0sIGl0ZW0ucGFyZW50KSkpOwoKICBmdW5jdGlvbiBEcmF3Tm9kZSh4LCB5LCBub2RlKSB7CiAgICBkcmF3KCdjaXJjbGUnLCB7CiAgICAgIGN4OiB4LAogICAgICBjeTogeSwKICAgICAgcjogNSwKICAgICAgc3Ryb2tlOiAnIzAwMCcsCiAgICAgIGZpbGw6ICcjZmZmJywKICAgICAgJ3N0cm9rZS13aWR0aCc6IDAuNAogICAgfSk7CiAgICBkcmF3KAogICAgICAndGV4dCcsCiAgICAgIHsKICAgICAgICB4OiB4ICsgMC4yLAogICAgICAgIHk6IHkgKyAwLjUsCiAgICAgICAgLi4uQWxpZ25tZW50QXR0cnMoeyB4OiAwLCB5OiAwIH0pLAogICAgICAgICdmb250LXNpemUnOiAnNnB4JwogICAgICB9LAogICAgICBub2RlLnZhbHVlICsgJycKICAgICk7CiAgfQogIGZ1bmN0aW9uIERyYXdFZGdlKGl0ZW0sIHBhcmVudCkgewogICAgbGV0IHBvaW50cyA9IFtpdGVtLCBwYXJlbnRdLm1hcChQb2ludCk7CiAgICBsZXQgbGluZSA9IG5ldyBMaW5lKC4uLnBvaW50cyk7CiAgICBsZXQgc2xvcGUgPSBsaW5lLnNsb3BlLm5vcm1hbCgpLm11bCg1KTsKCiAgICBwb2ludHNbMF0uYWRkKHNsb3BlKTsKICAgIHBvaW50c1sxXS5zdWIoc2xvcGUpOwoKICAgIC8vY29uc29sZS5sb2coJ3BvaW50czonLCBwb2ludHMpOwogICAgZHJhdygnbGluZScsIHsKICAgICAgLi4uTGluZSguLi5wb2ludHMpLnJvdW5kKDAuMDAxKSwKICAgICAgc3Ryb2tlOiAnIzAwMCcsCiAgICAgICdzdHJva2Utd2lkdGgnOiAwLjQKICAgIH0pOwogIH0KfTsKRHJhd0JpbmFyeVRyZWUuYnQgPSBuZXcgQmluYXJ5VHJlZSgKICBuZXcgQmluYXJ5VHJlZS5Ob2RlKCdBJywgbmV3IEJpbmFyeVRyZWUuTm9kZSgnQicsIG5ldyBCaW5hcnlUcmVlLk5vZGUoJ0QnKSksIG5ldyBCaW5hcnlUcmVlLk5vZGUoJ0MnLCBuZXcgQmluYXJ5VHJlZS5Ob2RlKCdFJywgbnVsbCwgbmV3IEJpbmFyeVRyZWUuTm9kZSgnRycpKSwgbmV3IEJpbmFyeVRyZWUuTm9kZSgnRicpKSkKKTsKRHJhd0JpbmFyeVRyZWUuYnQgPSBuZXcgQmluYXJ5VHJlZSgKICBuZXcgQmluYXJ5VHJlZS5Ob2RlKAogICAgJ1YnLAogICAgbmV3IEJpbmFyeVRyZWUuTm9kZSgnSCcsIG5ldyBCaW5hcnlUcmVlLk5vZGUoMiksIG5ldyBCaW5hcnlUcmVlLk5vZGUoMSkpLAogICAgbmV3IEJpbmFyeVRyZWUuTm9kZSgKICAgICAgJ0gnLAogICAgICBuZXcgQmluYXJ5VHJlZS5Ob2RlKAogICAgICAgICdIJywKICAgICAgICBuZXcgQmluYXJ5VHJlZS5Ob2RlKCdWJywgbmV3IEJpbmFyeVRyZWUuTm9kZSg2KSwgbmV3IEJpbmFyeVRyZWUuTm9kZSg3KSksCiAgICAgICAgbmV3IEJpbmFyeVRyZWUuTm9kZSgnVicsIG5ldyBCaW5hcnlUcmVlLk5vZGUoNCksIG5ldyBCaW5hcnlUcmVlLk5vZGUoNSkpLAogICAgICAgIG5ldyBCaW5hcnlUcmVlLk5vZGUoJ1YnKQogICAgICApLAogICAgICBuZXcgQmluYXJ5VHJlZS5Ob2RlKDMpCiAgICApCiAgKQopOwoKZnVuY3Rpb24gR2V0UGF0aHMocXVlcnksIHBhcmVudCA9IHByb2plY3Quc3ZnRWxlbWVudCkgewogIHJldHVybiBFbGVtZW50LmZpbmRBbGwocXVlcnksIHBhcmVudCkucmVkdWNlKChhLCBlKSA9PiBhLmNvbmNhdChlLnRhZ05hbWUgIT0gJ3BhdGgnID8gRWxlbWVudC5maW5kQWxsKCdwYXRoJywgZSkgOiBbZV0pLCBbXSk7Cn0KCmZ1bmN0aW9uIFBhdGhUb1BvbHlsaW5lcyhwYXRoLCBzdGVwID0gMC4wMSkgewogIGxldCBwb2x5LAogICAgcG9seXMgPSBbXTsKICBbLi4uU1ZHLnBhdGhJdGVyYXRvcihwYXRoLCB7IHN0ZXAgfSldLmZvckVhY2gocCA9PiB7CiAgICBpZihwLm1vdmUgfHwgIXBvbHkpIHBvbHlzLnB1c2goKHBvbHkgPSBbXSkpOwoKICAgIHBvbHkucHVzaChuZXcgUG9pbnQocCkucm91bmQoMC4wMDEpKTsKICB9KTsKCiAgcmV0dXJuIHBvbHlzCiAgICAuZmlsdGVyKHBvbHkgPT4gcG9seS5sZW5ndGggPiAxKQogICAgLm1hcChwb2x5ID0+IHsKICAgICAgbGV0IHRyYW5zZm9ybXMgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KAogICAgICAgIEVsZW1lbnQud2Fsa1VwKHBhdGgsIChwLCBkLCBzZXQsIHN0b3ApID0+IChwLnBhcmVudEVsZW1lbnQudGFnTmFtZSA9PSAnc3ZnJyA/IHN0b3AoKSA6IHAuaGFzQXR0cmlidXRlKCd0cmFuc2Zvcm0nKSAmJiBzZXQocC5nZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpKSkpLnJldmVyc2UoKQogICAgICApLmNvbGxhcHNlKCk7CiAgICAgIC8vY29uc29sZS5sb2coJ3RyYW5zZm9ybXMnLCB0cmFuc2Zvcm1zKTsKICAgICAgcmV0dXJuIG5ldyBQb2x5bGluZShwb2x5KS50cmFuc2Zvcm0odHJhbnNmb3Jtcyk7CiAgICB9KTsKfQoKZnVuY3Rpb24gUGF0aFRvUG9seWxpbmUocGF0aCwgc3RlcCA9IDAuMDEpIHsKICBsZXQgcG9seSA9IFsuLi5TVkcucGF0aEl0ZXJhdG9yKHBhdGgsIHsgc3RlcCB9KV07CgogIGxldCB0cmFuc2Zvcm1zID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgKICAgIEVsZW1lbnQud2Fsa1VwKHBhdGgsIChwLCBkLCBzZXQsIHN0b3ApID0+IChwLnBhcmVudEVsZW1lbnQudGFnTmFtZSA9PSAnc3ZnJyA/IHN0b3AoKSA6IHAuaGFzQXR0cmlidXRlKCd0cmFuc2Zvcm0nKSAmJiBzZXQocC5nZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpKSkpLnJldmVyc2UoKQogICkuY29sbGFwc2UoKTsKICAvL2NvbnNvbGUubG9nKCd0cmFuc2Zvcm1zJywgdHJhbnNmb3Jtcyk7CiAgcmV0dXJuIG5ldyBQb2x5bGluZShwb2x5KS50cmFuc2Zvcm0odHJhbnNmb3Jtcyk7Cn0KCmZ1bmN0aW9uIFBhdGhzVG9Qb2x5bGluZXMocGF0aHMsIHN0ZXAgPSAwLjAxKSB7CiAgaWYodHlwZW9mIHBhdGhzID09ICdzdHJpbmcnKSBwYXRocyA9IEdldFBhdGhzKC4uLnBhdGhzLnNwbGl0KCcgJykpOwogIGlmKCFBcnJheS5pc0FycmF5KHBhdGhzKSkgcGF0aHMgPSBbcGF0aHNdOwogIHJldHVybiBuZXcgTWFwKHBhdGhzLm1hcChwYXRoID0+IFtwYXRoLCBQYXRoVG9Qb2x5bGluZShwYXRoLCBzdGVwKV0pKTsKfQoKZnVuY3Rpb24gT3V0c2V0UGF0aChwYXRoLCBvZmZzZXQsIG1pdGVyTGltaXQgPSAyLCBhcmNUb2xlcmFuY2UgPSAwLjAxKSB7CiAgbGV0IGNvID0gbmV3IENsaXBwZXJMaWIuQ2xpcHBlck9mZnNldChtaXRlckxpbWl0LCBhcmNUb2xlcmFuY2UpOwogIGxldCBvdXRwdXQgPSAod2luZG93Lm91dHB1dCA9IG5ldyBDbGlwcGVyTGliLlBhdGhzKCkpOwogIGNvLkFkZFBhdGgoCiAgICBwYXRoLmNsb3NlZCA/IHBhdGguc2xpY2UoMCwgLTEpIDogcGF0aCwKICAgIENsaXBwZXJMaWIuSm9pblR5cGVbcGF0aC5jbG9zZWQgPyAnanRSb3VuZCcgOiAnanRTcXVhcmUnXSwKICAgIENsaXBwZXJMaWIuRW5kVHlwZVtwYXRoLmNsb3NlZCA/ICdldENsb3NlZExpbmUnIC8qJ2V0Q2xvc2VkUG9seWdvbicgKi8gOiAnZXRPcGVuU3F1YXJlJyB8fCAnZXRPcGVuUm91bmQnXQogICk7CiAgY28uRXhlY3V0ZShvdXRwdXQsIG9mZnNldCk7CiAgLy9jb25zb2xlLmxvZygnb3V0cHV0OicsIG91dHB1dCk7CiAgb3V0cHV0LnRvUG9seWxpbmVzID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5tYXAocCA9PiBuZXcgUG9seWxpbmUocC5tYXAoKHsgWCwgWSB9KSA9PiBuZXcgUG9pbnQoWCwgWSkpKS5jbG9zZSgpKTsKICB9OwogIHJldHVybiBvdXRwdXQ7Cn0KCi8vCi8vICBPdXRzZXRQYXRocyhQYXRoc1RvUG9seWxpbmVzKCdwYXRoLnRvcCAuUjgnKSwgMC4xKTsKLy8KZnVuY3Rpb24gT3V0c2V0UGF0aHMocGF0aHMsIG9mZnNldCwgbWl0ZXJMaW1pdCA9IDIsIGFyY1RvbGVyYW5jZSA9IDAuMjUpIHsKICBsZXQgcmV0OwogIC8vIGlmKHR5cGVvZiBwYXRocyA9PSAnc3RyaW5nJykgcGF0aHMgPSBQYXRoc1RvUG9seWxpbmVzKHBhdGhzKTsKICBpZih0eXBlb2YgcGF0aHMudmFsdWVzID09ICdmdW5jdGlvbicpIHBhdGhzID0gWy4uLnBhdGhzLnZhbHVlcygpXTsKCiAgLy9jb25zb2xlLmxvZygnT3V0c2V0UGF0aHM6JywgeyBwYXRocywgcmV0IH0pOwoKICByZXQgPSBwYXRocy5tYXAocGF0aCA9PiBPdXRzZXRQYXRoKHBhdGgsIG9mZnNldCwgbWl0ZXJMaW1pdCwgYXJjVG9sZXJhbmNlKSk7CgogIHJldCA9IHJldC5zbGljZSgxKS5yZWR1Y2UoKGEsIHApID0+IENsaXBQYXRoKGEsIHApLCByZXRbMF0pOwoKICBsZXQgW291dGVyLCBjbGlwXSA9IHJldC50b1BvbHlsaW5lcygpOwoKICBsZXQgZiA9IHByb2plY3QubWFrZUZhY3RvcnkoKTsKICBsZXQgZCA9IFtvdXRlci50b1BhdGgoKSwgY2xpcC50b1BhdGgoKV0uam9pbignICcpOwoKICAvL2NvbnNvbGUubG9nKCdkOicsIGQpOwoKICAvKiBvdXRlci50b1NWRyhmLCB7ICdzdHJva2Utd2lkdGgnOiAwLjA1MDgsIHN0cm9rZTogJ2JsYWNrJywgZmlsbDogJ25vbmUnIH0pOwogIGNsaXAudG9TVkcoZiwgeyAnc3Ryb2tlLXdpZHRoJzogMC4wNTA4LCBzdHJva2U6ICdibGFjaycsIGZpbGw6ICdub25lJyB9KTsKKi8KICBmKCdwYXRoJywgeyBkLCAnc3Ryb2tlLXdpZHRoJzogMC4wNTA4LCBzdHJva2U6ICdub25lJywgZmlsbDogJ3JlZCcgfSk7CiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gQ2xpcFBhdGgocGF0aCwgY2xpcCwgbW9kZSA9IENsaXBwZXJMaWIuQ2xpcFR5cGUuY3RVbmlvbikgewogIGxldCBjbCA9IG5ldyBDbGlwcGVyTGliLkNsaXBwZXIoKTsKICBsZXQgb3V0cHV0ID0gbmV3IENsaXBwZXJMaWIuUGF0aHMoKTsKICBjb25zdCBhZGQgPSAocCwgY2xpcCA9IGZhbHNlKSA9PiAoQXJyYXkuaXNBcnJheShwWzBdKSA/IGNsLkFkZFBhdGhzIDogY2wuQWRkUGF0aCkuY2FsbChjbCwgcCwgY2xpcCA/IENsaXBwZXJMaWIuUG9seVR5cGUucHRDbGlwIDogQ2xpcHBlckxpYi5Qb2x5VHlwZS5wdFN1YmplY3QsIHRydWUpOwoKICBhZGQocGF0aCwgZmFsc2UpOwogIGFkZChjbGlwLCB0cnVlKTsKCiAgY2wuRXhlY3V0ZShtb2RlLCBvdXRwdXQpOwogIG91dHB1dC50b1BvbHlsaW5lcyA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubWFwKHAgPT4gbmV3IFBvbHlsaW5lKHAubWFwKCh7IFgsIFkgfSkgPT4gbmV3IFBvaW50KFgsIFkpKSkuY2xvc2UoKSk7CiAgfTsKICByZXR1cm4gb3V0cHV0Owp9CgpmdW5jdGlvbiBzYXZlSXRlbVN0YXRlcyhpdGVtTGlzdCwgZ2V0ID0gaXRlbSA9PiBpcy5vbihpdGVtLnZpc2libGUoKSkpIHsKICByZXR1cm4gaXRlbUxpc3QubWFwKGl0ZW0gPT4gW2l0ZW0sIGdldChpdGVtKV0pOwp9CgpmdW5jdGlvbiByZXN0b3JlSXRlbVN0YXRlcyhpdGVtU3RhdGVzLCAvKiBwcmV0dGllci1pZ25vcmUgKi8gc2V0ID0gKGl0ZW0sIHZhbHVlKSA9PiBpdGVtLnZpc2libGUodmFsdWUgPyAneWVzJyA6ICdubycpKSB7CiAgZm9yKGxldCBbaXRlbSwgc3RhdGVdIG9mIGl0ZW1TdGF0ZXMpIHNldChpdGVtLCBzdGF0ZSk7Cn0KCmZ1bmN0aW9uIEVhZ2xlTWFwcyhwcm9qZWN0KSB7CiAgbGV0IHRyYW5zZm9ybVBhdGggPSBwID0+IHAucmVwbGFjZSgvXHMq4p6fXHMqL2csICcvJykucmVwbGFjZSgvXC8oWzAtOV0rKS9nLCAnL1skMV0nKTsKICBsZXQgZG9tMnBhdGggPSBbLi4uRWxlbWVudC5maW5kQWxsKCcqW2RhdGEtcGF0aF0nLCBwcm9qZWN0Lm9iamVjdCldLm1hcChlID0+IFtlLCBuZXcgSW1tdXRhYmxlWFBhdGgodHJhbnNmb3JtUGF0aChlLmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJykpKV0pOwogIC8vIGNvbnNvbGUuZGVidWcoJ2RvbTJwYXRoOicsIGRvbTJwYXRoKTsKICBkb20ycGF0aCA9IG1hcEZ1bmN0aW9uKG5ldyBXZWFrTWFwKGRvbTJwYXRoKSk7CgogIGxldCBkb20yZWFnbGUgPSBub2RlID0+IHsKICAgIGxldCBwOwogICAgaWYoKHAgPSBkb20ycGF0aChub2RlKSkpIHJldHVybiBwcm9qZWN0LmRvYy5sb29rdXAocCk7CiAgfTsKICBsZXQgZWFnbGUyZG9tID0gZWxlbSA9PiBFbGVtZW50LmZpbmQoYFtkYXRhLXR5cGU9JHtlbGVtLnRhZ05hbWV9XVtkYXRhLW5hbWU9JHtlbGVtLm5hbWV9XWAsIHByb2plY3QuZWxlbWVudCk7CiAgbGV0IHBhdGgyZG9tID0gcCA9PiBFbGVtZW50LmZpbmQoYFtkYXRhLXBhdGg9JyR7Q1NTLmVzY2FwZShwKX0nXWAsIHByb2plY3QuZWxlbWVudCk7CgogIGxldCBtYXBFbGVtZW50cyA9IHsKICAgIC8qICAgIGVhZ2xlOiB1bmlxdWUoZWFnbGUyZG9tLm1hcCgoW2UsIGRdKSA9PiBlKSksCiAgICBkb206IHVuaXF1ZShlYWdsZTJkb20ubWFwKChbZSwgZF0pID0+IGQpLCAoYSwgYikgPT4gYS5pc1NhbWVOb2RlKGIpKSovCiAgfTsKICBsZXQgbWFwcyA9IHsgZG9tMnBhdGgsIGRvbTJlYWdsZSwgZWFnbGUyZG9tLCBwYXRoMmRvbSB9OwogIC8qICBtYXBzLmVhZ2xlMmRvbSA9IG1hcEZ1bmN0aW9uKG5ldyBXZWFrTWFwKG1hcEVsZW1lbnRzLmVhZ2xlLm1hcChlYWdsZSA9PiBbCiAgICAgICAgZWFnbGUsCiAgICAgICAgZWFnbGUyZG9tLmZpbHRlcigoW2UsIGRdKSA9PiBlID09PSBlYWdsZSkubWFwKChbZSwgZF0pID0+IGQpCiAgICAgIF0pCiAgICApCiAgKTsKICAvL2NvbnNvbGUuZGVidWcoJ21hcHMuZWFnbGUyZG9tOicsIG1hcHMuZWFnbGUyZG9tKTsqLwogIC8vKSBtYXBzLmRvbTJlYWdsZSA9IG1hcEZ1bmN0aW9uKG5ldyBXZWFrTWFwKGVhZ2xlMmRvbS5tYXAoKFtrLCB2XSkgPT4gW3YsIGtdKSkpOwogIGNvbnN0IFtwYXRoMmNvbXBvbmVudCwgY29tcG9uZW50MnBhdGhdID0gcHJvamVjdC5yZW5kZXJlci5tYXBzLm1hcChtYXBGdW5jdGlvbik7CiAgY29uc3QgeyAvKnBhdGgyb2JqLCBvYmoycGF0aCwgKi8gcGF0aDJlYWdsZSwgZWFnbGUycGF0aCAvKiwgZWFnbGUyb2JqLCBvYmoyZWFnbGUgKi8gfSA9IHByb2plY3QuZG9jLm1hcHM7CiAgY29uc3QgW2NvbXBvbmVudDJlYWdsZSwgZWFnbGUyY29tcG9uZW50XSA9IFsKICAgIG1hcEFkYXB0ZXIoKGtleSwgdmFsdWUpID0+ICh2YWx1ZSA9PT0gdW5kZWZpbmVkID8gcGF0aDJlYWdsZShjb21wb25lbnQycGF0aChrZXkpKSA6IHVuZGVmaW5lZCkpLAogICAgbWFwQWRhcHRlcigoa2V5LCB2YWx1ZSkgPT4gKHZhbHVlID09PSB1bmRlZmluZWQgPyBwYXRoMmNvbXBvbmVudChlYWdsZTJwYXRoKGtleSkgKyAnJykgOiB1bmRlZmluZWQpKQogIF07CiAgd2Vha0Fzc2lnbihtYXBzLCB7CiAgICBwYXRoMmVhZ2xlLAogICAgZWFnbGUycGF0aCwKICAgIHBhdGgyY29tcG9uZW50LAogICAgY29tcG9uZW50MnBhdGgKICB9KTsKCiAgLyogY29uc3QgW2NvbXBvbmVudDJkb20sIGRvbTJjb21wb25lbnRdID0gWwogICAgbWFwQWRhcHRlcigoa2V5LCB2YWx1ZSkgPT4KICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCA/IGVhZ2xlMmRvbShjb21wb25lbnQyZWFnbGUoa2V5KSkgOiB1bmRlZmluZWQKICAgICksCiAgICBtYXBBZGFwdGVyKChrZXksIHZhbHVlKSA9PgogICAgICB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gZWFnbGUyY29tcG9uZW50KGRvbTJlYWdsZShrZXkpKSA6IHVuZGVmaW5lZAogICAgKQogIF07ICovCiAgT2JqZWN0LmFzc2lnbihtYXBzLCB7CiAgICAvKmRvbTJjb21wb25lbnQsCiBjb21wb25lbnQyZG9tLCAqLwogICAgY29tcG9uZW50MmVhZ2xlLAogICAgY29tcG9uZW50MnBhdGgsCiAgICBlYWdsZTJjb21wb25lbnQsCiAgICBwYXRoMmNvbXBvbmVudAogIH0pOwogIE9iamVjdC5hc3NpZ24ocHJvamVjdCwgeyBtYXBzIH0pOwogIHJldHVybiBtYXBzOwp9CgpmdW5jdGlvbiogUGFja2FnZU5hbWVzKGRvYyA9IHByb2plY3QuZG9jKSB7CiAgY29uc3QgdG9rZW5pemUgPSBtYXRjaEFsbCgvKFtBLVphLXpdK3xbMC05LF0rfFteMC05QS1aYS16XSspL2cpOwogIGxldCBwYWNrYWdlcyA9IGRvYy5wYWNrYWdlcyAmJiBkb2MucGFja2FnZXMubGVuZ3RoID8gZG9jLnBhY2thZ2VzIDogWy4uLmRvYy5nZXRBbGwoJ3BhY2thZ2UnKV07CiAgbGV0IG5hbWVzID0gcGFja2FnZXMKICAgIC5tYXAoZSA9PiBbZSwgZS5nZXRCb3VuZHMoKV0pCiAgICAubWFwKChbZSwgYl0pID0+IFtlLCBiLndpZHRoLCBiLmhlaWdodCwgTWF0aC5tYXgoYi53aWR0aCwgYi5oZWlnaHQpLCBiLmhlaWdodCA+IGIud2lkdGhdKQogICAgLm1hcCgoW2UsIHcsIGgsIG0sIHZdKSA9PiBbZSwgZS5uYW1lLCBbLi4udG9rZW5pemUoZS5uYW1lKV0sIHJvdW5kVG8odywgMC4wMSksIHJvdW5kVG8oaCwgMC4wMSksIE1hdGguZmxvb3IobSksIHYgPyAnVicgOiAnJ10pOwoKICBmb3IobGV0IFtlbGVtZW50LCBuYW1lLCBtYXRjaGVzLCB3LCBoLCBzaXplLCBvcmllbnRhdGlvbl0gb2YgbmFtZXMpIHsKICAgIGxldCB0b2tlbnMgPSBtYXRjaGVzLm1hcCgoeyBpbmRleCwgLi4ubWF0Y2ggfSkgPT4gbWF0Y2hbMF0gKyAnJyk7CiAgICBsZXQgW2luZGV4XSA9IG1hdGNoZXMKICAgICAgLnJlZHVjZSgKICAgICAgICAoeyBzLCB2LCBpbmRleGVzIH0sIG1hdGNoLCBpKSA9PiB7CiAgICAgICAgICBpZihOdW1iZXIuaXNGaW5pdGUocykgJiYgaW5kZXhlcy5sZW5ndGgpIHJldHVybiB7IHMsIHYsIGluZGV4ZXMgfTsKICAgICAgICAgIGlmKG1hdGNoWzBdID09ICcvJyAmJiAhTnVtYmVyLmlzRmluaXRlKHMpKSBzID0gaTsKICAgICAgICAgIGlmKG1hdGNoWzBdID09ICdWJykgdiA9IGk7CiAgICAgICAgICBpZighaXNOYU4oKyhtYXRjaFswXSArICcnKSkpIGluZGV4ZXMucHVzaChpKTsKICAgICAgICAgIHJldHVybiB7IHMsIHYsIGluZGV4ZXMgfTsKICAgICAgICB9LAogICAgICAgIHsgaW5kZXhlczogW10gfQogICAgICApCiAgICAgIC5pbmRleGVzLnJldmVyc2UoKTsKICAgIGxldCBzSW5kZXggPSB0b2tlbnMuZmluZEluZGV4KChbdG9rZW4sIGluZGV4XSkgPT4gdG9rZW4gPT0gJy8nKTsKICAgIGxldCB2aEluZGV4ID0gdG9rZW5zLmZpbmRJbmRleCgoW3Rva2VuLCBpbmRleF0pID0+IHRva2VuID09ICdWJyB8fCB0b2tlbiA9PSAnSCcpOwogICAgbGV0IHRva0luZGV4ID0gdmhJbmRleCAhPSAtMSA/IHZoSW5kZXggLSAxIDogc0luZGV4ICsgMTsKCiAgICBpZih0b2tlbnNbdmhJbmRleF0pIHsKICAgICAgd2hpbGUodG9rSW5kZXggPj0gMCAmJiBpc05hTih0b2tlbnNbdG9rSW5kZXhdKSkgdG9rSW5kZXgtLTsKICAgIH0KICAgIGlmKGlzTmFOKCt0b2tlbnNbdG9rSW5kZXhdKSkgdG9rSW5kZXggPSBpbmRleDsKCiAgICBsZXQgdG9rZW4gPSB0b2tlbnNbdG9rSW5kZXhdOwogICAgbGV0IHZlcnRpY2FsID0gdG9rZW5zW3ZoSW5kZXhdID09ICdWJzsKICAgIGxldCBudW1iZXIgPSB0eXBlb2YgdG9rZW4gPT0gJ3N0cmluZycgPyArdG9rZW4ucmVwbGFjZSgvW14tLjAtOV0vZywgJycpIDogTmFOOwogICAgLy9jb25zb2xlLmxvZygnbmFtZXM6JywgeyBpbmRleCwgc0luZGV4LCB2aEluZGV4LCB0b2tlbiwgdmVydGljYWwsIG51bWJlciB9KTsKCiAgICAvKiAgaWYobnVtYmVyICE9IHNpemUgfHwgdmVydGljYWwgIT0gKG9yaWVudGF0aW9uID09ICdWJykpICovCgogICAgaWYodG9rZW4pIHsKICAgICAgbGV0IGZyb21UbyA9IFtgJHt0b2tlbn0ke3Rva2Vuc1t2aEluZGV4XSB8fCAnJ31gLCBgJHtzaXplfSR7dmVydGljYWwgPyAnVicgOiAnJ31gXTsKICAgICAgbGV0IG5ld05hbWUgPSBuYW1lLnJlcGxhY2UoLi4uZnJvbVRvKTsKCiAgICAgIHlpZWxkIE9iamVjdC5hc3NpZ24oW25hbWUsIG5ld05hbWUsIC4uLmZyb21Ub10sIHsKICAgICAgICB3LAogICAgICAgIGgsCiAgICAgICAgc2l6ZSwKICAgICAgICBvcmllbnRhdGlvbgogICAgICB9KTsKICAgIH0KICB9Cn0KCi8vbGV0IHByb2plY3RJbmRleDsKCmZ1bmN0aW9uIE5leHREb2N1bWVudChuID0gMSkgewogIGxldCBpOwogIGNvbnN0IHsgcHJvamVjdHMgfSA9IGdsb2JhbFRoaXM7CiAgaWYodHlwZW9mIGdsb2JhbFRoaXMucHJvamVjdEluZGV4ICE9ICdudW1iZXInKSBnbG9iYWxUaGlzLnByb2plY3RJbmRleCA9IHByb2plY3RzLmluZGV4T2YocHJvamVjdCk7CiAgY29uc3QgY29uZCA9IGlzT2JqZWN0KG4pICYmIG4gaW5zdGFuY2VvZiBSZWdFeHAgPyAoaWR4LCBpKSA9PiAhbi50ZXN0KHByb2plY3RzW2lkeF0/Lm5hbWUpIDogKGlkeCwgaSkgPT4gaSA8IG47CiAgbGV0IHN0YXJ0ID0gcHJvamVjdEluZGV4OwogIGZvcihpID0gMDsgY29uZCgrK3Byb2plY3RJbmRleCwgaSk7ICsraSkgewogICAgLy9Mb2dKUy52ZXJib3NlKGBOZXh0RG9jdW1lbnQgc2tpcCAke2l9IFske3Byb2plY3RJbmRleH1dICR7cHJvamVjdHNbcHJvamVjdEluZGV4XS5uYW1lfWApOwoKICAgIHByb2plY3RJbmRleCAlPSBwcm9qZWN0cy5sZW5ndGg7CiAgICBpZihwcm9qZWN0SW5kZXggPT0gc3RhcnQpIGJyZWFrOwogIH0KICBMb2dKUy52ZXJib3NlKGBOZXh0RG9jdW1lbnQgc2tpcHBlZCAke3Byb2plY3RJbmRleCAtIHN0YXJ0fWApOwoKICBsZXQgbmV4dCA9IHByb2plY3RzW3Byb2plY3RJbmRleF07CiAgY29uZmlnLmN1cnJlbnRQcm9qZWN0KG5leHQubmFtZSk7CgogIC8vY29uc29sZS5sb2coJ05leHREb2N1bWVudCcsIGBbJHtwcm9qZWN0SW5kZXh9XWAsIHByb2plY3RzW3Byb2plY3RJbmRleF0ubmFtZSk7CiAgcmV0dXJuIExvYWREb2N1bWVudChuZXh0KTsKfQoKYXN5bmMgZnVuY3Rpb24gTG9hZERvY3VtZW50KHByb2plY3QsIHBhcmVudEVsZW0pIHsKICBjb25zb2xlLmxvZygnTG9hZERvY3VtZW50JywgcHJvamVjdCk7CiAgb3BlbihmYWxzZSk7CiAgZ2NvZGUobnVsbCk7CgogIGlmKHR5cGVvZiBwcm9qZWN0ID09ICdzdHJpbmcnKSBwcm9qZWN0ID0gR2V0UHJvamVjdChwcm9qZWN0KTsKCiAgY29uZmlnLmN1cnJlbnRQcm9qZWN0KHByb2plY3QubmFtZSk7CgogIHByb2plY3QuZG9jID0gYXdhaXQgTG9hZEZpbGUocHJvamVjdCkuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7CgogIGN1cnJlbnRQcm9qKHByb2plY3QpOwogIExvZ0pTLmluZm8oYCR7cHJvamVjdC5uYW1lfSBsb2FkZWQuYCk7CiAgY29uc3QgdG9wUGxhY2UgPSAndFBsYWNlJzsKICBlbGVtZW50Q2hpbGRyZW4gPSBtZW1vaXplKCgpID0+IEVsZW1lbnRDaGlsZHJlbih0b3BQbGFjZSwgZW50ID0+IE9iamVjdC5mcm9tRW50cmllcyhlbnQpKSk7CiAgZWxlbWVudEdlb21ldHJpZXMgPSBtZW1vaXplKCgpID0+IEVsZW1lbnRHZW9tZXRyaWVzKHRvcFBsYWNlLCBlbnQgPT4gT2JqZWN0LmZyb21FbnRyaWVzKGVudCkpKTsKICAvL3BvbHlnb25HZW9tZXRyaWVzID0gbWVtb2l6ZSgoKSA9PiBPYmplY3QuZW50cmllcyhlbGVtZW50R2VvbWV0cmllcygpKS5tYXAoKFtuYW1lLCBsaW5lTGlzdF0pID0+IFtuYW1lLCBsaW5lTGlzdC50b1BvbHlnb24oKHB0cykgPT4gbmV3IFBvbHlsaW5lKHB0cykpXSkpOwoKICBkb2N1bWVudFRpdGxlKHByb2plY3QuZG9jLmZpbGUucmVwbGFjZSgvLipcLy9nLCAnJykpOwogIGxldCBzID0gcHJvamVjdC5kb2MudHlwZSAhPSAnbGJyJyAmJiBwcm9qZWN0LmRvYy5kaW1lbnNpb25zOwoKICBpZihzKSBkb2N1bWVudFNpemUocy5yb3VuZCgwLjAxKS50b1N0cmluZyh7IHVuaXQ6ICdtbScgfSkpOwoKICBjb25zdCB7IGRvYyB9ID0gcHJvamVjdDsKCiAgd2luZG93LmVhZ2xlID0gZG9jOwogIHdpbmRvdy5wcm9qZWN0ID0gcHJvamVjdDsKICBFbGVtZW50LnJlbW92ZSgnI2ZlbmNlJyk7CiAgbGV0IGRvY0VsZW0gPSBFbGVtZW50LmZpbmQoJyNkb2MnKTsKICBkb2NFbGVtLmlubmVySFRNTCA9ICcnOwogIC8vY29uc29sZS5sb2coJ2RvYy5iYXNlbmFtZScsIGRvYy5iYXNlbmFtZSk7CgogIG1lbW9pemVkUHJvcGVydGllcyh3aW5kb3csIHsKICAgIHJlbmFtZVBhY2thZ2VzKCkgewogICAgICBsZXQgbmFtZXMgPSBbLi4uUGFja2FnZU5hbWVzKGRvYyldOwogICAgICAvL2NvbnNvbGUubG9nKCdQYWNrYWdlIG5hbWVzJywgbmFtZXMpOwogICAgICBsZXQgY2hhbmdlcyA9IG5hbWVzLmZpbHRlcihhID0+IGFbMF0gIT0gYVsxXSk7CiAgICAgIC8vY29uc29sZS5sb2coJ0NvbW1hbmRzOlxuJyArIGNoYW5nZXMubWFwKChbb2xkTmFtZSwgbmV3TmFtZV0pID0+IGBSRU5BTUUgJHtvbGROYW1lfSAke25ld05hbWV9O2ApLmpvaW4oJ1xuJykpOwogICAgICAvL2NvbnNvbGUubG9nKCdFeHByZXNzaW9uczpcbicgKyBjaGFuZ2VzLm1hcCgoW29sZE5hbWUsIG5ld05hbWVdKSA9PiBgc3w9IiR7b2xkTmFtZX0ifD0iJHtuZXdOYW1lfSJ8ZztgKS5qb2luKCdcbicpKTsKICAgICAgcmV0dXJuIG5hbWVzOwogICAgfQogIH0pOwogIGxldCBDb21wb25lbnQ7CgogIGlmKC8qZG9jLnR5cGUgIT0gJ2xicicqLyB0cnVlKSB7CiAgICBwcm9qZWN0LnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKGRvYywgUmVhY3RDb21wb25lbnQuYXBwZW5kLCAvKiBmYWxzZSAmJiAqLyBjb25maWcuZGVidWdGbGFnKCkpOwoKICAgIGNvbmZpZy5zaG93R3JpZCA9IHRya2wodHJ1ZSk7CiAgICBjb25maWcuc2hvd0dyaWQuc3Vic2NyaWJlKHZhbHVlID0+IHsKICAgICAgbGV0IG9iaiA9IHsgLi4ucHJvamVjdC5yZW5kZXJlci5ncmlkLCB2aXNpYmxlOiB2YWx1ZSB9OwogICAgICAvL2NvbnNvbGUubG9nKCdjb25maWcuc2hvd0dyaWQ6Jywgb2JqKTsKICAgICAgcHJvamVjdC5yZW5kZXJlci5ncmlkID0gb2JqOwogICAgfSk7CgogICAgLy9jb25zb2xlLmxvZygncHJvamVjdC5yZW5kZXJlcicsIHByb2plY3QucmVuZGVyZXIpOwogICAgbGV0IHN0eWxlID0geyB3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICcxMDAlJywgcG9zaXRpb246ICdyZWxhdGl2ZScgfTsKICAgIENvbXBvbmVudCA9IHByb2plY3QucmVuZGVyZXIucmVuZGVyKGRvYywgbnVsbCwge30pOwoKICAgIC8vY29uc29sZS5sb2coJ3JlbmRlcmVyLnJlbmRlciA9JywgQ29tcG9uZW50KTsKCiAgICBsZXQgdXNlZExheWVycyA9IFsuLi5kb2MubGF5ZXJzLmxpc3RdLmZpbHRlcihsYXllciA9PiBsYXllci5lbGVtZW50cy5zaXplID4gMCk7CgogICAgVGltZXIub25jZSgyNTApLnRoZW4oKCkgPT4KICAgICAgbGF5ZXJMaXN0KAogICAgICAgIHVzZWRMYXllcnMubWFwKGxheWVyID0+ICh7CiAgICAgICAgICBpOiBsYXllci5udW1iZXIsCiAgICAgICAgICBuYW1lOiBsYXllci5uYW1lLAogICAgICAgICAgY29sb3I6IGxheWVyLmdldENvbG9yKCksCiAgICAgICAgICBlbGVtZW50OiBsYXllciwKICAgICAgICAgIHZpc2libGU6ICgoKSA9PiB7CiAgICAgICAgICAgIGxldCBmbjsKICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGxheWVyLmhhbmRsZXJzLnZpc2libGU7CiAgICAgICAgICAgIGZuID0gZnVuY3Rpb24odikgewogICAgICAgICAgICAgIGlmKHYgIT09IHVuZGVmaW5lZCkgaGFuZGxlcihpcy5vbih2KSA/ICd5ZXMnIDogJ25vJyk7CiAgICAgICAgICAgICAgZWxzZSByZXR1cm4gaGFuZGxlcigpOwogICAgICAgICAgICB9OwogICAgICAgICAgICBmbi5zdWJzY3JpYmUgPSBoYW5kbGVyLnN1YnNjcmliZTsKICAgICAgICAgICAgZm4udW5zdWJzY3JpYmUgPSBoYW5kbGVyLnVuc3Vic2NyaWJlOwogICAgICAgICAgICByZXR1cm4gZm47CiAgICAgICAgICB9KSgpCiAgICAgICAgfSkpCiAgICAgICkKICAgICk7CiAgICBMb2dKUy5pbmZvKGAke3Byb2plY3QubmFtZX0gcmVuZGVyZWQuYCk7CiAgICB3aW5kb3cuY29tcG9uZW50ID0gcHJvamVjdC5jb21wb25lbnQgPSBDb21wb25lbnQ7CiAgfQoKICBsZXQgZWxlbWVudCA9IEVsZW1lbnQuZmluZCgnI21haW4nKTsKCiAgaWYocHJvamVjdC5yZW5kZXJlcikgewogICAgLy9jb25zb2xlLmRlYnVnKCd0ZXN0UmVuZGVyOicsIENvbXBvbmVudCk7CiAgICAvLwogICAgbGV0IHIgPSBwcm9qZWN0LnJlbmRlcmVyLnJlY3QgfHwgcHJvamVjdC5yZW5kZXJlci5ib3VuZHM7CiAgICBsZXQgc2l6ZSA9IChwcm9qZWN0LmRpbWVuc2lvbnMgPSBwcm9qZWN0LnJlbmRlcmVyLnNpemUpOwogICAgLy9jb25zb2xlLmRlYnVnKCdwcm9qZWN0LnJlbmRlcmVyOicsIHByb2plY3QucmVuZGVyZXIpOwogICAgLy9jb25zb2xlLmRlYnVnKCdyOicsIHIpOwogICAgbGV0IGFzcGVjdFJhdGlvID0gMTsKICAgIGlmKHByb2plY3QuZG9jLnR5cGUgIT0gJ2xicicpIHsKICAgICAgaWYocikgewogICAgICAgIGFzcGVjdFJhdGlvID0gci53aWR0aCAvIHIuaGVpZ2h0OwogICAgICAgIHNpemVMaXN0ZW5lcihzaXplKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc2l6ZUxpc3RlbmVyKHt9KTsKICAgIH0KICAgIC8vY29uc29sZS4KICAgIGFzcGVjdExpc3RlbmVyKGFzcGVjdFJhdGlvKTsKICAgIC8vY29uc29sZS5kZWJ1ZygnYXNwZWN0UmF0aW86JywgYXNwZWN0UmF0aW8pOwogICAgQ29tcG9uZW50ID0KICAgICAgLy8gaChab29tYWJsZSwgeyAvKmNsYXNzTmFtZTogJ3pvb21hYmxlJywqLyBzdHlsZTogc2l6ZS50b0NTUygnbW0nKSB9LCBbQ29tcG9uZW50XSkgfHwKICAgICAgaCgKICAgICAgICBGZW5jZSwKICAgICAgICB7CiAgICAgICAgICBzdHlsZToge30sCiAgICAgICAgICBzaXplTGlzdGVuZXIsCiAgICAgICAgICBhc3BlY3RMaXN0ZW5lciwKICAgICAgICAgIGxpc3RlbmVyOiB0cmFuc2Zvcm0sCiAgICAgICAgICAnZGF0YS1uYW1lJzogcHJvamVjdC5uYW1lCiAgICAgICAgfSwKICAgICAgICBbQ29tcG9uZW50XQogICAgICApOwogIH0KCiAgbGV0IHN2Z0VsZW1lbnQ7CgogIGlmKHdpbmRvdy5jb21wb25lbnQpIHsKICAgIC8vWy4uLmVsZW1lbnQuY2hpbGRyZW5dLmZvckVhY2goRWxlbWVudC5yZW1vdmUpOwoKICAgIFJlYWN0LnJlbmRlcihDb21wb25lbnQsIGVsZW1lbnQpOwoKICAgIGxldCBvYmplY3QgPSBSZWFjdENvbXBvbmVudC50b09iamVjdChDb21wb25lbnQpOwogICAgcHJvamVjdC5vYmplY3QgPSBvYmplY3Q7CiAgICBsZXQgcmVuZGVyZWQgPSBvYmplY3QuY2hpbGRyZW5bMF07CiAgICAvL2NvbnNvbGUuZGVidWcoJ0xvYWREb2N1bWVudCByZW5kZXJlZDonLCByZW5kZXJlZCk7CgogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIFNhdmVTVkcoKTsKICAgIH0sIDUwMCk7CgogICAgLy9jb25zb2xlLmRlYnVnKCdMb2FkRG9jdW1lbnQgZWxlbWVudDonLCBlbGVtZW50KTsKICAgIC8vY29uc29sZS5kZWJ1ZygnTG9hZERvY3VtZW50ICBwcm9qZWN0OicsIHByb2plY3QpOwoKICAgIC8vcGF0aDJlYWdsZTogcGF0aDJvYmosIGVhZ2xlMnBhdGg6IG9iajJwYXRoCgogICAgcHJvamVjdC5tYXBzID0gewogICAgICAuLi5wcm9qZWN0LmRvYy5tYXBzLAogICAgICAuLi5FYWdsZU1hcHMocHJvamVjdCkKICAgIH07CgogICAgcHJvamVjdC5yZW5kZXJlZCA9IHJlbmRlcmVkOwogICAgd2luZG93LnByb2plY3QuZWxlbWVudCA9IGVsZW1lbnQ7CiAgICB3aW5kb3cucHJvamVjdC5zdmdFbGVtZW50ID0gc3ZnRWxlbWVudCA9IEVsZW1lbnQuZmluZCgnc3ZnJywgZWxlbWVudCk7CiAgICBwcm9qZWN0LmdyaWQgPSBFbGVtZW50LmZpbmQoJ2cuZ3JpZCcsIHByb2plY3QuZWxlbWVudCk7CiAgICBwcm9qZWN0LmJib3ggPSBTVkcuYmJveChwcm9qZWN0LmdyaWQpOwogICAgcHJvamVjdC5hc3BlY3RSYXRpbyA9IGFzcGVjdDsKICB9CiAgbGV0IHN2ZyA9IEVsZW1lbnQuZmluZCgnc3ZnJywgJyNtYWluJyk7CgogIGlmKHN2ZykgewogICAgcHJvamVjdC5tYWtlR3JvdXAgPSBmdW5jdGlvbih7IHRyYW5zZm9ybSwgLi4ucHJvcHMgfSA9IHt9KSB7CiAgICAgIGxldCBlOwogICAgICBpZihwcm9wcy5pZCAmJiAoZSA9IEVsZW1lbnQuZmluZChgIyR7cHJvcHMuaWR9YCkpKSByZXR1cm4gZTsKCiAgICAgIGxldCBncm91cEVsZW1lbnQgPSBFbGVtZW50LmZpbmQoJ2cuZWxlbWVudHMnLCBzdmcpIHx8IEVsZW1lbnQuZmluZCgnZy5pbnN0YW5jZXMnLCBzdmcpOwogICAgICB0cmFuc2Zvcm0gPSAoZ3JvdXBFbGVtZW50ID8gZ3JvdXBFbGVtZW50LmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJykgOiAnJykgKyAodHJhbnNmb3JtID8gJyAnICsgdHJhbnNmb3JtIDogJycpOwogICAgICByZXR1cm4gKGUgPSBTVkcuY3JlYXRlKCdnJywgeyAuLi5wcm9wcywgdHJhbnNmb3JtIH0sIHN2ZykpOwogICAgfTsKCiAgICBwcm9qZWN0Lm1ha2VGYWN0b3J5ID0gbWVtb2l6ZShpZCA9PgogICAgICBTVkcuZmFjdG9yeSgoKSA9PgogICAgICAgIHByb2plY3QubWFrZUdyb3VwKHsKICAgICAgICAgIC4uLigoaWQgIT09IHVuZGVmaW5lZCAmJiB7IGlkIH0pIHx8IHt9KSwKICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAwLjEyNyAvIDQKICAgICAgICB9KQogICAgICApCiAgICApOwoKICAgIHByb2plY3QubWFrZUZhY3RvcnkoKTsKCiAgICBsZXQgY2VudGVyID0gU1ZHLmJib3goc3ZnRWxlbWVudCkuY2VudGVyLnJvdW5kKCk7CiAgICBsZXQgZGVmYXVsdFRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtjZW50ZXIueH0sJHtjZW50ZXIueX0pIHNjYWxlKDIuNTQsMi41NClgOwoKICAgIGZ1bmN0aW9uIHh4KCkgewogICAgICBsZXQgZyA9IFNWRy5jcmVhdGUoJ2cnLCB7fSk7CgogICAgICBwcm9qZWN0LnN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoZyk7CiAgICAgIGxldCBsbCA9IGdlb21ldHJpZXMuUjQgJiYgZ2VvbWV0cmllcy5SNC5saW5lcy50b1NWRyhSZWFjdENvbXBvbmVudC5hcHBlbmQsICgpID0+IGgoJ2cnLCB7IC4uLmVsZW1lbnREZWZhdWx0QXR0cmlidXRlcywgZGVmYXVsdFRyYW5zZm9ybSB9KSk7CgogICAgICByZW5kZXIobGwsIGcpOwogICAgfQogICAgLyp4eCgpOyovCgogICAgd2luZG93LkFkZEVsZW1lbnQgPSAoZnVuY3Rpb24gKHRyYW5zZm9ybSkgewogICAgICBjb25zdCByb290ID0gcHJvamVjdC5zdmdFbGVtZW50OwoKICAgICAgbGV0IGxpc3QgPSBbXTsKCiAgICAgIHJldHVybiAodGFnLCBhdHRyLCBjaGlsZHJlbiA9IFtdKSA9PiB7CiAgICAgICAgbGV0IGUgPSBTVkcuY3JlYXRlKHRhZywgeyAuLi5lbGVtZW50RGVmYXVsdEF0dHJpYnV0ZXMsIHRyYW5zZm9ybSwgLi4uYXR0ciB9LCByb290KTsKICAgICAgICBsaXN0LnB1c2goZSk7CiAgICAgICAgbGV0IGQgPSB0cmtsLnByb3BlcnR5KGUsICdkJyk7CiAgICAgICAgZC5zdWJzY3JpYmUodmFsdWUgPT4gZS5zZXRBdHRyaWJ1dGUoJ2QnLCB2YWx1ZSkpOwogICAgICAgIHJldHVybiBlOwogICAgICB9OwogICAgfSkoZGVmYXVsdFRyYW5zZm9ybSk7CiAgfQoKICB0cnlDYXRjaChhc3luYyAoKSA9PiB7CiAgICBsZXQgeyBuYW1lLCBkYXRhLCBkb2MsIHN2ZywgYmJveCB9ID0gcHJvamVjdDsKICAgIGxldCBib3VuZHMgPSBkb2MuZ2V0Qm91bmRzKCk7CiAgICBsZXQgcmVjdCA9IGJvdW5kcy50b1JlY3QoUmVjdC5wcm90b3R5cGUpOwogICAgbGV0IHNpemUgPSBuZXcgU2l6ZShyKTsKICAgIC8vIGN1cnJlbnRQcm9qKHByb2plY3QpOwogICAgc2l6ZS5tdWwoZG9jLnR5cGUgPT0gJ2JyZCcgPyAyIDogMS41KTsKICAgIGxldCBzdmdyZWN0ID0gU1ZHLmJib3gocHJvamVjdC5zdmdFbGVtZW50KTsKICAgIGxldCBtZWFzdXJlcyA9IChkb2MubWVhc3VyZXMgfHwgZG9jLmdldEJvdW5kcygpKS5yZWN0OwogICAgLy9jb25zb2xlLmRlYnVnKCdtZWFzdXJlczonLCBtZWFzdXJlcyk7CiAgICBFbGVtZW50LmF0dHIocHJvamVjdC5zdmdFbGVtZW50LCB7CiAgICAgICdkYXRhLWZpbGVuYW1lJzogcHJvamVjdC5uYW1lLAogICAgICAnZGF0YS1hc3BlY3QnOiBwcm9qZWN0LmFzcGVjdFJhdGlvCiAgICB9KTsKICAgIC8vIGxldCBjc3MgPSBzaXplLmRpdigwLjI2NDU4MzMzMzMzNzE5KS50b0NTUyh7IHdpZHRoOiAncHgnLCBoZWlnaHQ6ICdweCcgfSk7CiAgICAvLyAgd2luZG93LnNpemUgPSBwcm9qZWN0LmRvYy50eXBlID09ICdsYnInID8ge30gOiBjc3M7CiAgICBBZGp1c3Rab29tKCk7CiAgICBwcm9qZWN0LnN0YXR1cyA9IFNhdmVTVkcoKTsKICB9LCBwdXRFcnJvcik7CgogIC8qIHNpemVMaXN0ZW5lci5zdWJzY3JpYmUodmFsdWUgPT4gewogICAgLy9jb25zb2xlLmxvZygnc2l6ZUxpc3RlbmVyJywgeyB2YWx1ZSB9LCBnZXRDYWxsZXJzKCkpOwogIH0pOwoqLwogIHJldHVybiBwcm9qZWN0Owp9Cgphc3luYyBmdW5jdGlvbiBDaG9vc2VEb2N1bWVudChwcm9qZWN0LCBpKSB7CiAgbGV0IHI7CiAgaWYoaSA9PSB1bmRlZmluZWQpIGkgPSBwcm9qZWN0LmkgfHwgcHJvamVjdEZpbGVzLmluZGV4T2YocHJvamVjdCk7CiAgY29uc3QgYm94ID0gRWxlbWVudC5maW5kQWxsKCcuZmlsZScpW2ldOwogIExvZ0pTLmluZm8oJ0Nob29zZURvY3VtZW50OicsIHsgcHJvamVjdCwgaSwgYm94IH0pOwogIExvZ0pTLmluZm8oYCR7cHJvamVjdC5uYW1lfSBzZWxlY3RlZC5gKTsKCiAgaWYoIXByb2plY3QubG9hZGVkKSB7CiAgICBsb2FkaW5nKHRydWUpOwogICAgbGV0IGRhdGEgPSBhd2FpdCBMb2FkRG9jdW1lbnQocHJvamVjdCwgYm94KTsKICAgIHByb2plY3QubG9hZGVkID0gdHJ1ZTsKICAgIC8vY29uc29sZS5sb2coJ2xvYWRlZDonLCBwcm9qZWN0KTsKICAgIGxvYWRpbmcoZmFsc2UpOwogIH0KICByZXR1cm4gcHJvamVjdC5sb2FkZWQ7Cn0KCi8qIGdlcmJlcj1hd2FpdCBCb2FyZFRvR2VyYmVyKHByb2plY3QubmFtZSk7IGdjPWF3YWl0IEdlcmJlclRvR2NvZGUoJ3RtcC83c2VnLTIuNTQuR0JMJyk7IGdlb209Z2NvZGV0b2dlb21ldHJ5KGdjLmRhdGEpO2xpbmVzID0gZ2VvbS5saW5lcy5tYXAoKHtzdGFydCxlbmR9KSA9PiBuZXcgTGluZShzdGFydCxlbmQpKSAqLwoKY29uc3QgR2VuZXJhdGVWb3Jvbm9pID0gKCkgPT4gewogIC8vY29uc29sZS5sb2coJ0xvYWRpbmcgZG9jdW1lbnQ6ICcgKyBmaWxlbmFtZSk7CiAgbGV0IHsgZG9jIH0gPSBwcm9qZWN0OwogIC8vY29uc29sZS5sb2coJ2RvYycsIGRvYyk7CiAgbGV0IHBvaW50cyA9IG5ldyBQb2ludExpc3QoKTsKICBmb3IobGV0IGVsZW1lbnQgb2YgZG9jLmVsZW1lbnRzLmxpc3QpIHsKICAgIGNvbnN0IHBrZyA9IGVsZW1lbnQucGFja2FnZTsKICAgIGxldCB7IHgsIHkgfSA9IGVsZW1lbnQ7CiAgICAvL2NvbnNvbGUubG9nKCdlbGVtZW50OicsIGVsZW1lbnQsIHsgeCwgeSB9KTsKICAgIGxldCBvcmlnaW4gPSBuZXcgUG9pbnQoeCwgeSk7CiAgICBmb3IobGV0IGl0ZW0gb2YgcGtnLmNoaWxkcmVuKSB7CiAgICAgIGlmKGl0ZW0uZHJpbGwgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGxldCBwb3MgPSBuZXcgUG9pbnQoK2l0ZW0ueCwgK2l0ZW0ueSkuYWRkKG9yaWdpbik7CiAgICAgICAgLy9jb25zb2xlLmxvZygncG9zOicsIHBvcyk7CiAgICAgICAgcG9pbnRzLnB1c2gocG9zKTsKICAgICAgfQogICAgfQogIH0KICBsZXQgYmIgPSBkb2MuZ2V0Qm91bmRzKCk7CiAgbGV0IHJlY3QgPSBiYi50b1JlY3QoUmVjdC5wcm90b3R5cGUpOwogIC8vY29uc29sZS5sb2coJ2JiOicsIGJiKTsKICAvL2NvbnNvbGUubG9nKCdyZWN0OicsIHJlY3QpOwogIHJlY3Qub3V0c2V0KDEuMjcpOwogIHdpbmRvdy50bXByZWN0ID0gcmVjdDsKICBsZXQgc2l0ZXMgPSBwb2ludHMubWFwKHAgPT4gcC50b09iamVjdCgpKTsKICBsZXQgYmJveCA9IHsgeGw6IGJiLngxLCB4cjogYmIueDIsIHl0OiBiYi55MSwgeWI6IGJiLnkyIH07CiAgbGV0IHZvcm9ub2kgPSBuZXcgVm9yb25vaSgpOwogIC8vcGFzcyBhbiBvYmplY3Qgd2hpY2ggZXhoaWJpdHMgeGwsIHhyLCB5dCwgeWIgcHJvcGVydGllcy4gVGhlIGJvdW5kaW5nCiAgLy9ib3ggd2lsbCBiZSB1c2VkIHRvIGNvbm5lY3QgdW5ib3VuZCBlZGdlcywgYW5kIHRvIGNsb3NlIG9wZW4gY2VsbHMKICBsZXQgcmVzdWx0ID0gdm9yb25vaS5jb21wdXRlKHNpdGVzLCBiYm94KTsKICAvL3JlbmRlciwgZnVydGhlciBhbmFseXplLCBldGMuCiAgLy9jb25zb2xlLmxvZygncmVzdWx0OicsIE9iamVjdC5rZXlzKHJlc3VsdCkuam9pbignLCAnKSk7CiAgbGV0IHsgc2l0ZSwgY2VsbHMsIGVkZ2VzLCB2ZXJ0aWNlcywgZXhlY1RpbWUgfSA9IHJlc3VsdDsKICAvL2NvbnNvbGUubG9nKCdjZWxsczonLCBjZWxscyk7CiAgbGV0IGhvbGVzID0gZWRnZXMuZmlsdGVyKGUgPT4gIWUuclNpdGUpLm1hcCgoeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4gbmV3IFBvaW50KGxTaXRlKSk7CiAgbGV0IHJsaW5lcyA9IGVkZ2VzLmZpbHRlcihlID0+IGUuclNpdGUpLm1hcCgoeyBsU2l0ZSwgclNpdGUsIC4uLmVkZ2UgfSkgPT4gbmV3IExpbmUobFNpdGUsIHJTaXRlKSk7CiAgbGV0IHZsaW5lcyA9IGVkZ2VzLmZpbHRlcihlID0+IGUudmEgJiYgZS52YikubWFwKCh7IHZhLCB2YiwgLi4uZWRnZSB9KSA9PiBuZXcgTGluZSh2YSwgdmIpLnJvdW5kKDAuMTI3LCA0KSk7CiAgbGV0IHBvaW50czIgPSB2ZXJ0aWNlcy5tYXAodiA9PiBuZXcgUG9pbnQodikucm91bmQoMC4xMjcsIDQpKTsKICBjb25zdCBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4gWy4uLihBcnJheS5pc0FycmF5KGFycikgPyBhcnIgOiBbXSksIC4uLml0ZW1zXTsKICBjb25zdCBmYWN0b3J5ID0gU1ZHLmZhY3RvcnkoKTsKICBjb25zdCBsaW5lcyA9IFsKICAgIC4uLnJsaW5lcy5tYXAobCA9PiBbJ2xpbmUnLCB7IC4uLmwudG9PYmplY3QodCA9PiB0ICsgJycpLCBzdHJva2U6ICcjMDAwJywgJ3N0cm9rZS13aWR0aCc6IDAuMDEgfV0pLAogICAgLi4udmxpbmVzLm1hcChsID0+IFsnbGluZScsIHsgLi4ubC50b09iamVjdCh0ID0+IHQgKyAnJyksIHN0cm9rZTogJyNmMDAnLCAnc3Ryb2tlLXdpZHRoJzogMC4wMSB9XSkKICBdOwogIGNvbnN0IGNpcmNsZXMgPSBbCiAgICAuLi5ob2xlcy5tYXAocCA9PiBbCiAgICAgICdjaXJjbGUnLAogICAgICB7CiAgICAgICAgY3g6IHAueCwKICAgICAgICBjeTogcC55LAogICAgICAgIHI6IDAuMjU0LAogICAgICAgIGZpbGw6ICdub25lJywKICAgICAgICBzdHJva2U6ICcjMDBmJywKICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMC4zCiAgICAgIH0KICAgIF0pIC8qIC4uLnBvaW50czIubWFwKHAgPT4gWyAnY2lyY2xlJywgeyBjeDogcC54LCBjeTogcC55LCByOiAwLjI1NCAqIDIsIGZpbGw6ICdub25lJywgc3Ryb2tlOiAncmdiYSgwLDI1NSwyNTUsMC43NSknLCAnc3Ryb2tlLXdpZHRoJzogMC4xIH0gXSkqLwogIF07CiAgY29uc3QgcG9seWxpbmVzID0gWwogICAgLi4uY2VsbHMucmVkdWNlKAogICAgICAoYWNjLCB7IHNpdGUsIGhhbGZlZGdlcyB9KSA9PiBbCiAgICAgICAgLi4uYWNjLAogICAgICAgIFsKICAgICAgICAgICdwb2x5bGluZScsCiAgICAgICAgICB7CiAgICAgICAgICAgIHBvaW50czogbmV3IFBvaW50TGlzdChoYWxmZWRnZXMubWFwKCh7IHNpdGUgfSkgPT4gc2l0ZSkpLnRvU3RyaW5nKCksCiAgICAgICAgICAgIHN0cm9rZTogJyNmMGYnLAogICAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMC4xCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdLAogICAgICBbXQogICAgKQogIF07CiAgLy9jb25zb2xlLmxvZygncG9seWxpbmVzOicsIHBvbHlsaW5lcyk7CiAgLy9jb25zb2xlLmxvZygnY2VsbHM6JywgY2VsbHMpOwogIHdpbmRvdy5jZWxscyA9IGNlbGxzOwogIEVsZW1lbnQuc2V0Q1NTKHN2Z0VsZW0sIHsKICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgbGVmdDogMCwKICAgIHRvcDogMCwKICAgIHdpZHRoOiAnMTAwJScsCiAgICBoZWlnaHQ6ICdhdXRvJwogIH0pOwogIC8vZmlsZXN5c3RlbS53cml0ZUZpbGUoJ291dHB1dC5zdmcnLCBzdmdGaWxlKTsKICAvL2NvbnNvbGUubG9nKCdzdmc6Jywgc3ZnRWxlbSk7Cn07CgpmdW5jdGlvbiBQYWNrYWdlQ2hpbGRyZW4oZWxlbWVudCwgbGF5ZXIpIHsKICBsZXQgY2hpbGRyZW4gPSBbLi4uZWxlbWVudC5jaGlsZHJlbl0ubWFwKChjLCBpKSA9PiBbaSwgY10pLmZpbHRlcigoW2ksIHBdKSA9PiBwLmxheWVyICYmIHAubGF5ZXIubmFtZSA9PSAndFBsYWNlJyAmJiBwLnRhZ05hbWUgPT0gJ3dpcmUnKTsKICBjaGlsZHJlbi54bWwgPSBjaGlsZHJlbi5tYXAoKFtpLCBlXSkgPT4gZS50b1hNTCgpKS5qb2luKCdcbicpOwogIHJldHVybiBjaGlsZHJlbjsKfQoKZnVuY3Rpb24gRWxlbWVudENoaWxkcmVuKGxheWVyID0gJ3RQbGFjZScsIHJmbiA9IGVudCA9PiBuZXcgTWFwKGVudCkpIHsKICBjb25zdCB7IGVsZW1lbnRzID0gW10gfSA9IHByb2plY3QuZG9jIHx8IHt9OwoKICByZXR1cm4gcmZuKFsuLi5lbGVtZW50c10ubWFwKChbbmFtZSwgZWxlbWVudF0pID0+IFtuYW1lLCBQYWNrYWdlQ2hpbGRyZW4oZWxlbWVudCwgbGF5ZXIpXSkpOwp9CgpmdW5jdGlvbiBFbGVtZW50R2VvbWV0cmllcyhsYXllciA9ICd0UGxhY2UnLCByZm4gPSBlbnQgPT4gbmV3IE1hcChlbnQpKSB7CiAgcmV0dXJuIHJmbigKICAgIEVsZW1lbnRDaGlsZHJlbihsYXllciwgZW50ID0+IGVudCkKICAgICAgLm1hcCgoW25hbWUsIGNoaWxkcmVuXSkgPT4gWwogICAgICAgIG5hbWUsCiAgICAgICAgbmV3IExpbmVMaXN0KAogICAgICAgICAgY2hpbGRyZW4ubWFwKChbaSwgZV0pID0+IHsKICAgICAgICAgICAgbGV0IGxpbmUgPSBlLmdlb21ldHJ5OwogICAgICAgICAgICBpZihlLmN1cnZlICE9PSB1bmRlZmluZWQpIGxpbmUuY3VydmUgPSBlLmN1cnZlOwogICAgICAgICAgICBsaW5lLmVsZW1lbnQgPSBlOwogICAgICAgICAgICBsaW5lLnhtbCA9IGUudG9YTUwoKTsKICAgICAgICAgICAgcmV0dXJuIGxpbmU7CiAgICAgICAgICB9KQogICAgICAgICkKICAgICAgXSkKICAgICAgLm1hcCgoW25hbWUsIGxpbmVzXSkgPT4gW25hbWUsIGxpbmVzLCBsaW5lcy5zbGljZSgpLnRvUG9seWdvbnMocHRzID0+IG5ldyBQb2x5bGluZShwdHMpKV0pCiAgICAgIC5tYXAoKFtuYW1lLCBsaW5lcywgcG9seWdvbnNdKSA9PiBbbmFtZSwgeyBsaW5lcywgcG9seWdvbnMgfV0pCiAgKTsKfQoKZnVuY3Rpb24gTmV3UGF0aChwYXRoKSB7CiAgbGV0IGVsZW0gPSBTVkcuY3JlYXRlKCdwYXRoJyk7CiAgcHJvamVjdC5zdmdFbGVtZW50LmFwcGVuZENoaWxkKGVsZW0pOwp9Cgpjb25zdCBNYWtlRml0QWN0aW9uID0gaW5kZXggPT4gYXN5bmMgZXZlbnQgPT4gewogIC8vIHdpbmRvdy50cmFuc2Zvcm09Jyc7CiAgY29uc3QgeyBidXR0b25zLCB0eXBlLCB0YXJnZXQgfSA9IGV2ZW50OwogIGlmKCF0eXBlLmVuZHNXaXRoKCdkb3duJykgfHwgYnV0dG9ucyA9PSAwKSByZXR1cm4gZmFsc2U7CiAgLy9jb25zb2xlLmRlYnVnKGBGaXRBY3QoJHtpbmRleH0pYCwgeyBidXR0b25zLCB0eXBlLCB0YXJnZXQgfSk7CiAgbGV0IG9sZFNpemUgPSBFbGVtZW50LnJlY3QoJyNmZW5jZScpOwogIGxldCBtYXRyaXggPSB0cmFuc2Zvcm0oKS5pbnZlcnQoKS50b01hdHJpeCgpOwogIG9sZFNpemUgPSBtYXRyaXgudHJhbnNmb3JtUmVjdChvbGRTaXplKTsKICBsZXQgdG9wQmFyID0gRWxlbWVudC5yZWN0KCcuYnV0dG9ucycpOwogIGxldCBjbGllbnRBcmVhID0gRWxlbWVudC5yZWN0KCcjbWFpbicpOwogIGxldCBmID0gb2xkU2l6ZS5maXQoY2xpZW50QXJlYSk7CiAgbGV0IGZhY3RvcnMgPSBuZXcgU2l6ZShvbGRTaXplKS5maXRGYWN0b3JzKG5ldyBTaXplKGNsaWVudEFyZWEpKTsKICBsZXQgdCA9IG5ldyBUcmFuc2Zvcm1hdGlvbkxpc3QoKS5zY2FsZShmYWN0b3JzW2luZGV4XSwgZmFjdG9yc1tpbmRleF0pOwogIG1hdHJpeCA9IHQudG9NYXRyaXgoKTsKICBsZXQgbmV3U2l6ZSA9IG1hdHJpeC50cmFuc2Zvcm1SZWN0KG5ldyBSZWN0KG9sZFNpemUpKTsKICBsZXQgYWxpZ24gPSAwOwogIGlmKG5ld1NpemUud2lkdGggPiBjbGllbnRBcmVhLndpZHRoKSBhbGlnbiB8PSBBbGlnbi5MRUZUOwogIGVsc2UgYWxpZ24gfD0gQWxpZ24uQ0VOVEVSOwogIGlmKG5ld1NpemUuaGVpZ2h0ID4gY2xpZW50QXJlYS5oZWlnaHQpIGFsaWduIHw9IEFsaWduLlRPUDsKICBlbHNlIGFsaWduIHw9IEFsaWduLk1JRERMRTsKICBuZXdTaXplLmFsaWduKGNsaWVudEFyZWEsIGFsaWduKTsKICBtYXRyaXggPSBNYXRyaXguZ2V0QWZmaW5lVHJhbnNmb3JtKG9sZFNpemUudG9Qb2ludHMoKSwgbmV3U2l6ZS50b1BvaW50cygpKTsKICAvL2NvbnNvbGUuZGVidWcoYEZpdEFjdGlvbigke2luZGV4fSlgLCB7IG9sZFNpemUsIG5ld1NpemUsIGNsaWVudEFyZWEgfSwgQWxpZ25Ub1N0cmluZyhhbGlnbiksIG1hdHJpeC5kZWNvbXBvc2UoKSk7CiAgdHJhbnNmb3JtKHQpOwp9OwoKZnVuY3Rpb24gWm9vbUZhY3Rvcih2YWwgPSBjb25maWcuem9vbUxvZygpKSB7CiAgcmV0dXJuICtNYXRoLnBvdygxMCwgdmFsIC8gMjAwKS50b0ZpeGVkKDUpOwp9CgpmdW5jdGlvbiBab29tTG9nKGZhY3RvcikgewogIHJldHVybiBNYXRoLmxvZzEwKGZhY3RvcikgKiAyMDA7Cn0KCmZ1bmN0aW9uIEFkanVzdFpvb20obCA9IGNvbmZpZy56b29tTG9nKCkpIHsKICBsZXQgem9vbUZhY3RvciA9IFpvb21GYWN0b3IobCk7CiAgbGV0IHQgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KHdpbmRvdy50cmFuc2Zvcm0pOwogIGlmKCF0LnNjYWxpbmcpIHQuc2NhbGUoem9vbUZhY3Rvciwgem9vbUZhY3Rvcik7CiAgZWxzZSB7CiAgICB0LnNjYWxpbmcueCA9IHpvb21GYWN0b3I7CiAgICB0LnNjYWxpbmcueSA9IHpvb21GYWN0b3I7CiAgfQogIHdpbmRvdy50cmFuc2Zvcm0gPSB0Owp9CmNvbnN0IENyZWF0ZUdyYmxTb2NrZXQgPSBhc3luYyAocG9ydCA9ICd0bnQxJykgPT4gewogIGxldCB1cmwgPSBtYWtlVVJMKHsKICAgIGxvY2F0aW9uOiAnL3NlcmlhbCcsCiAgICBwcm90b2NvbDogJ3dzJywKICAgIHF1ZXJ5OiB7IHBvcnQgfQogIH0pOwogIGxldCB3cyA9IG5ldyBXZWJTb2NrZXRDbGllbnQoKTsKICBhd2FpdCB3cy5jb25uZWN0KHVybCk7CiAgTG9nSlMuaW5mbygnR3JibCBDb25uZWN0ZWQ6Jywgd3MuY29ubmVjdGVkKTsKICBsZXQgb3V0cHV0ID0gYXdhaXQgQXN5bmNSZWFkKHdzKTsKICBmb3IgYXdhaXQobGV0IGRhdGEgb2Ygb3V0cHV0KSB7CiAgICAvL2NvbnNvbGUubG9nKCdkYXRhOicsIGRhdGEpOwogIH0KfTsKCmZ1bmN0aW9uIEhhbmRsZU1lc3NhZ2UobXNnKSB7CiAgY29uc3QgeyB0eXBlLCBvcmlnaW4sIHJlY2lwaWVudCwgYm9keSB9ID0gbXNnOwoKICBzd2l0Y2ggKHR5cGUpIHsKICAgIGNhc2UgJ0NPTlRPVVJTJzogewogICAgICBsZXQgeyBmcmFtZSwgd2lkdGgsIGhlaWdodCwgY29udG91cnMgfSA9IGJvZHk7CiAgICAgIC8vY29uc29sZS5sb2coJ0hhbmRsZU1lc3NhZ2UnLCB7IGNvbnRvdXJzIH0pOwoKICAgICAgbGV0IGxpc3RzID0gKHR5cGVvZiBjb250b3VycyA9PSAnc3RyaW5nJyA/IGNvbnRvdXJzLnNwbGl0KC9ccypcfFxzKi9nKSA6IGNvbnRvdXJzKS5tYXAocG9pbnRTdHIgPT4gbmV3IFBvbHlsaW5lKHBvaW50U3RyKSk7CgogICAgICB3aW5kb3cubGlzdHMgPSBsaXN0czsKICAgICAgLy9jb25zb2xlLmxvZygnSGFuZGxlTWVzc2FnZScsIHsgdHlwZSwgd2lkdGgsIGhlaWdodCwgZnJhbWUgfSwgbGlzdHMpOwoKICAgICAgYnJlYWs7CiAgICB9CiAgfQp9Cgpjb25zdCBDcmVhdGVXZWJTb2NrZXQgPSBhc3luYyAoc29ja2V0VVJMLCBsb2csIHNvY2tldEZuID0gKCkgPT4ge30pID0+IHsKICAvLyBsb2cgPSBsb2cgfHwgKCguLi5hcmdzKSA9PiBjb25zb2xlLmxvZyguLi5hcmdzKSk7CiAgc29ja2V0VVJMID0KICAgIHNvY2tldFVSTCB8fAogICAgbWFrZVVSTCh7CiAgICAgIGxvY2F0aW9uOiBwYXJzZVVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikubG9jYXRpb24gKyAnd3MnLAogICAgICBwcm90b2NvbDogd2luZG93LmxvY2F0aW9uLmhyZWYuc3RhcnRzV2l0aCgnaHR0cHMnKSA/ICd3c3MnIDogJ3dzJwogICAgfSk7CiAgbGV0IHdzID0gbmV3IFdlYlNvY2tldENsaWVudCgpOwogIGxldCBzZW5kID0gd3Muc2VuZDsKICB3cy5zZW5kID0gKC4uLmFyZ3MpID0+IHsKICAgIGxldCBbbXNnXSA9IGFyZ3M7CiAgICBpZighKG1zZyBpbnN0YW5jZW9mIE1lc3NhZ2UpKSBtc2cgPSBuZXcgTWVzc2FnZSguLi5hcmdzKTsKICAgIC8vY29uc29sZS5sb2coJ3NlbmQ6JywgbXNnLmRhdGEpOwogICAgcmV0dXJuIHNlbmQuY2FsbCh3cywgbXNnLmRhdGEpOwogIH07CiAgd2luZG93LnNvY2tldCA9IHdzOwogIExvZ0pTLmluZm8oJ05ldyBXZWJTb2NrZXQ6ICcgKyBzb2NrZXRVUkwpOwogIGF3YWl0IHdzLmNvbm5lY3Qoc29ja2V0VVJMKTsKICBMb2dKUy5pbmZvKCdXZWJTb2NrZXQgQ29ubmVjdGVkOicsIHdzLmNvbm5lY3RlZCk7CiAgc29ja2V0Rm4od3MpOwogIHdzLnNlbmQoJ1BJTkcgbWFpbi5qczpkYXRhIScpOwogIGxldCBkYXRhOwogIC8vY29uc29sZS5sb2coJ3dzJywgd3MpOwoKICBmb3IgYXdhaXQoZXZlbnQgb2Ygd3MpIHsKICAgIC8vY29uc29sZS5sb2coJ1dlYlNvY2tldCBldmVudDonLCBldmVudCk7CiAgICBpZihldmVudC50eXBlID09ICdtZXNzYWdlJykgewogICAgICBjb25zdCB7IGRhdGEgfSA9IGV2ZW50OwogICAgICAvLyAgIGNvbnNvbGUubG9nKCdkYXRhOicsIGFiYnJldmlhdGUoZGF0YSwgNDApKTsKICAgICAgbGV0IG1zZyA9IG5ldyBNZXNzYWdlKGRhdGEpOwogICAgICB3aW5kb3cubXNnID0gbXNnOwogICAgICAvLyBMb2dKUy5pbmZvKCdXZWJTb2NrZXQgcmVjdjogJyArIGluc3BlY3QobXNnKSk7CiAgICAgIEhhbmRsZU1lc3NhZ2UobXNnKTsKICAgICAgd3MuZGF0YUF2YWlsYWJsZSAhPT0gMDsKICAgIH0gZWxzZSB7CiAgICAgIC8vY29uc29sZS5sb2coYCR7ZXZlbnQudHlwZX06YCwgZXZlbnQpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgYXdhaXQgd3MuZGlzY29ubmVjdCgpOwp9OwoKY29uc3QgQXV0aG9yaXphdGlvbkRpYWxvZyA9ICh7IG9uQXV0aCwgLi4ucHJvcHMgfSkgPT4gewogIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gdXNlU3RhdGUocHJvcHMudXNlcm5hbWUgfHwgJycpOwogIGNvbnN0IFtwYXNzd29yZCwgc2V0UGFzc3dvcmRdID0gdXNlU3RhdGUocHJvcHMucGFzc3dvcmQgfHwgJycpOwoKICByZXR1cm4gaCgKICAgIFBvcnRhbCwKICAgIHsgaW50bzogJyNwb3J0YWwnIH0sCiAgICBoKAogICAgICAnZGl2JywKICAgICAgeyBjbGFzczogJ2F1dGgtcG9ydGFsJyB9LAogICAgICBoKCdkaXYnLCB7IGNsYXNzOiAnYXV0aC1kaWFsb2cnIH0sIFsKICAgICAgICBoKCdoMScsIHt9LCAnQXV0aG9yaXphdGlvbicpLAogICAgICAgIGgoCiAgICAgICAgICAnZm9ybScsCiAgICAgICAgICB7IGFjdGlvbjogJycsIG1ldGhvZDogJycsIG9uU3VibWl0OiAoKSA9PiBmYWxzZSB9LAogICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ2F1dGgtZm9ybScgfSwgWwogICAgICAgICAgICBoKCdpbnB1dCcsIHsKICAgICAgICAgICAgICBuYW1lOiAndXNlcm5hbWUnLAogICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnVXNlcm5hbWUnLAogICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICBzaXplOiAzMCwKICAgICAgICAgICAgICBvbklucHV0OiBlID0+IHsKICAgICAgICAgICAgICAgIHNldFVzZXJuYW1lKGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHZhbHVlOiB1c2VybmFtZQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgaCgnaW5wdXQnLCB7CiAgICAgICAgICAgICAgbmFtZTogJ3Bhc3N3b3JkJywKICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1Bhc3N3b3JkJywKICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLAogICAgICAgICAgICAgIHNpemU6IDMwLAogICAgICAgICAgICAgIG9uSW5wdXQ6IGUgPT4gewogICAgICAgICAgICAgICAgc2V0UGFzc3dvcmQoZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdmFsdWU6IHBhc3N3b3JkCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBoKCdpbnB1dCcsIHsKICAgICAgICAgICAgICBuYW1lOiAnT2snLAogICAgICAgICAgICAgIHR5cGU6ICdzdWJtaXQnLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGUgPT4gewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgb25BdXRoKHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pCiAgICAgICAgKQogICAgICBdKQogICAgKQogICk7Cn07Cgpjb25zdCBCaW5kR2xvYmFsID0gb25jZShhcmcgPT4gdHJrbC5iaW5kKHdpbmRvdywgYXJnKSk7Cgpjb25zdCBBcHBNYWluID0gKHdpbmRvdy5vbmxvYWQgPSBhc3luYyAoKSA9PiB7CiAgY29uc3QgeyBzb3J0T3JkZXIsIHNvcnRLZXkgfSA9IGNvbmZpZzsKICAvL3ByZXR0aWVyLWlnbm9yZQogIGNvbnN0IGltcG9ydHMgPSB7VHJhbnNmb3JtYXRpb24sIFJvdGF0aW9uLCBUcmFuc2xhdGlvbiwgU2NhbGluZywgTWF0cml4VHJhbnNmb3JtYXRpb24sIFRyYW5zZm9ybWF0aW9uTGlzdCwgZG9tLCBSZWFjdENvbXBvbmVudCwgaXRlcmF0b3IsIGV2ZW50SXRlcmF0b3IsIGtleXNpbSwgZ2VvbSwgaXNCQm94LCBCQm94LCBMaW5lTGlzdCwgUG9seWdvbiwgQ2lyY2xlLCBUb3VjaExpc3RlbmVyLCB0cmtsLCBDb2xvck1hcCwgQ2xpcHBlckxpYiwgU2hhcGUsIGRldnRvb2xzLCBVdGlsLCB0bGl0ZSwgZGVib3VuY2UsIHRYbWwsIGRlZXAsIEFsZWEsIHBhdGgsIFRpbWVvdXRFcnJvciwgVGltZXJzLCBhc3luY0hlbHBlcnMsIENhY2hlLCBDYWNoZVN0b3JhZ2UsIEludGVycHJldEdjb2RlLCBnY29kZXRvZ2VvbWV0cnksIEdjb2RlT2JqZWN0LCBnY29kZVRvT2JqZWN0LCBvYmplY3RUb0djb2RlLCBwYXJzZUdjb2RlLCBHY29kZVBhcnNlciwgR0NvZGVMaW5lU3RyZWFtLCBwYXJzZVN0cmVhbSwgcGFyc2VGaWxlLCBwYXJzZUZpbGVTeW5jLCBwYXJzZVN0cmluZywgcGFyc2VTdHJpbmdTeW5jLCBub29wLCBJbnRlcnByZXRlciwgSXRlcmF0b3IsIEZ1bmN0aW9uYWwsIG1ha2VMb2NhbFN0b3JhZ2UsIFJlcGVhdGVyLCB1c2VSZXN1bHQsIExvZ0pTLCB1c2VEaW1lbnNpb25zLCB0b1hNTCwgTXV0YWJsZVBhdGgsIEltbXV0YWJsZVBhdGgsIE11dGFibGVQYXRoLGFycmF5RGlmZiwgb2JqZWN0RGlmZiwgIFhtbE9iamVjdCwgWG1sQXR0ciwgTXV0YWJsZVhQYXRoLEltbXV0YWJsZVhQYXRoLCBSR0JBLCBpc1JHQkEsIEltbXV0YWJsZVJHQkEsIEhTTEEsIGlzSFNMQSwgSW1tdXRhYmxlSFNMQSwgUmVhY3QsIGgsIGh0bWwsIHJlbmRlciwgRnJhZ21lbnQsIENvbXBvbmVudCwgdXNlU3RhdGUsIHVzZUxheW91dEVmZmVjdCwgdXNlUmVmLCBjb21wb25lbnRzLCBDaG9vc2VyLCBEeW5hbWljTGFiZWwsIEJ1dHRvbiwgRmlsZUxpc3QsIFBhbmVsLCBTaXplZEFzcGVjdFJhdGlvQm94LCBUcmFuc2Zvcm1lZEVsZW1lbnQsIENhbnZhcywgQ29sb3JXaGVlbCwgU2xpZGVyLCBDcm9zc0hhaXIsIEZsb2F0aW5nUGFuZWwsIERyb3BEb3duLCBDb25kaXRpb25hbCwgTWVzc2FnZSwgV2ViU29ja2V0Q2xpZW50LCAgICBQaXBlVG8sIEFzeW5jUmVhZCwgQXN5bmNXcml0ZSwgICBEZWJ1Z1RyYW5zZm9ybVN0cmVhbSwgVGV4dEVuY29kZVRyYW5zZm9ybWVyLCBUZXh0RW5jb2RlclN0cmVhbSwgVGV4dERlY29kZVRyYW5zZm9ybWVyLCBUZXh0RGVjb2RlclN0cmVhbSwgVHJhbnNmb3JtU3RyZWFtU2luaywgVHJhbnNmb3JtU3RyZWFtU291cmNlLCBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlciwgVHJhbnNmb3JtU3RyZWFtLCBBcnJheVdyaXRlciwgcmVhZFN0cmVhbSwgV3JpdGVUb1JlcGVhdGVyLCBMb2dTaW5rLCBSZXBlYXRlclNpbmssIFN0cmluZ1JlYWRlciwgTGluZVJlYWRlciwgQ2h1bmtSZWFkZXIsIEJ5dGVSZWFkZXIsIFBpcGVUb1JlcGVhdGVyLFJlYWRGcm9tSXRlcmF0b3IsIFdyaXRhYmxlU3RyZWFtLCB1c2VUcmtsLCBSQUQyREVHLCBERUcyUkFELCBWRVJUSUNBTCwgSE9SSVpPTlRBTCwgSE9SSVpPTlRBTF9WRVJUSUNBTCwgREVCVUcsIGxvZywgc2V0RGVidWcsIFBpblNpemVzLCBFc2NhcGVDbGFzc05hbWUsIFVuZXNjYXBlQ2xhc3NOYW1lLCBMYXllclRvQ2xhc3MsIEVsZW1lbnRUb0NsYXNzLCBDbGFtcEFuZ2xlLCBBbGlnbm1lbnRBbmdsZSwgTWFrZVJvdGF0aW9uLCBFYWdsZUFsaWdubWVudHMsIEFsaWdubWVudCwgU1ZHQWxpZ25tZW50cywgQWxpZ25tZW50QXR0cnMsIFJvdGF0ZVRyYW5zZm9ybWF0aW9uLCBMYXllckF0dHJpYnV0ZXMsIEludmVydFksIFBvbGFyVG9DYXJ0ZXNpYW4sIENhcnRlc2lhblRvUG9sYXIsIFJlbmRlckFyYywKIENhbGN1bGF0ZUFyY1JhZGl1cywgTGluZXNUb1BhdGgsIE1ha2VDb29yZFRyYW5zZm9ybWVyLCB1c2VBdHRyaWJ1dGVzICwgV2lyZSwgSW5zdGFuY2UsIFNjaGVtYXRpY1N5bWJvbCwgRW1pdHRlciwgRXZlbnRJdGVyYXRvciwgU2xvdCwgU2xvdFByb3ZpZGVyLCBWb3Jvbm9pLCBHZXJiZXJQYXJzZXIsIGxhenlJbml0aWFsaXplciwgTGlicmFyeVJlbmRlcmVyLEVhZ2xlRWxlbWVudFByb3h5LCAgQm9hcmRSZW5kZXJlciwgRGVyZWZlcmVuY2VFcnJvciwgRWFnbGVEb2N1bWVudCwgRWFnbGVFbGVtZW50LCBFYWdsZU5vZGUsIEVhZ2xlTm9kZUxpc3QsIEVhZ2xlTm9kZU1hcCwgRWFnbGVQcm9qZWN0LCBFYWdsZVJlZiwgRWFnbGVSZWZlcmVuY2UsIEVhZ2xlU1ZHUmVuZGVyZXIsIFJlbmRlcmVyLCBTY2hlbWF0aWNSZW5kZXJlciwgbWFrZUVhZ2xlRWxlbWVudCwgbWFrZUVhZ2xlTm9kZSwgYnJjYWNoZSwgbHNjYWNoZSwgQmFzZUNhY2hlLCBDYWNoZWRGZXRjaCwgTm9ybWFsaXplUmVzcG9uc2UsIFJlc3BvbnNlRGF0YSwgRmV0Y2hVUkwsIEZldGNoQ2FjaGVkLCBHZXRQcm9qZWN0LCBMaXN0UHJvamVjdHMsIEdldExheWVyLCBBZGRMYXllciwgQm9hcmRUb0dlcmJlciwgR2VyYmVyVG9HY29kZSwgR2NvZGVUb1BvbHlsaW5lcywgCiAuLi5naXRodWIsIGNsYXNzTmFtZXMgLCBCaW5hcnlUcmVlLCBub3JtYWxpemVQYXRoLCByZXZlcnNlTm9ybWFsaXplZFBhdGgsIHJldmVyc2VTdWJQYXRoLCByZXZlcnNlUGF0aCwgLi4uY29tbWFuZHMsICBERUJVRywgb2JqZWN0SW5zcGVjdCwgU3ZnUGF0aCwgcmVuZGVyVG9TdHJpbmcgLCAuLi5lY21hc2NyaXB0IH07CgogIGNvbnN0IGxvY2FsRnVuY3Rpb25zID0gewogICAgUGFja2FnZUNoaWxkcmVuLAogICAgRWxlbWVudENoaWxkcmVuLAogICAgVGltZXIsCiAgICBNb3VzZUV2ZW50cywKICAgIERyYXdTVkcsCiAgICBFbGVtZW50VG9YTUwsCiAgICBmaWxlc3lzdGVtLAogICAgTG9hZEZpbGUsCiAgICBTYXZlRmlsZSwKICAgIFNhdmVTVkcsCiAgICBMb2FkU1ZHLAogICAgTG9hZEltYWdlLAogICAgUmVuZGVyQ29tcG9uZW50LAogICAgTW9kaWZ5Q29sb3JzLAogICAgR2VyYmVyTGF5ZXJzLAogICAgTG9hZERvY3VtZW50LAogICAgTmV4dERvY3VtZW50LAogICAgQ2hvb3NlRG9jdW1lbnQsCiAgICBHZW5lcmF0ZVZvcm9ub2ksCiAgICBNYWtlRml0QWN0aW9uLAogICAgQ3JlYXRlV2ViU29ja2V0LAogICAgQ3JlYXRlR3JibFNvY2tldCwKICAgIEJpbmRHbG9iYWwsCiAgICBBcHBNYWluLAogICAgc2VyaWFsLAogICAgRmluZExheWVyLAogICAgT3V0c2V0UGF0aCwKICAgIE91dHNldFBhdGhzLAogICAgQ2xpcFBhdGgsCiAgICBQYXRoVG9Qb2x5bGluZSwKICAgIFBhdGhzVG9Qb2x5bGluZXMsCiAgICBHZXRQYXRocywKICAgIERyYXdBcmMsCiAgICBtYXhaSW5kZXgsCiAgICBDbGVhckNhY2hlLAogICAgUGFja2FnZU5hbWVzLAogICAgRHJhd0JpbmFyeVRyZWUsCiAgICBFYWdsZU1hcHMsCiAgICBTYXZlQ29uZmlnLAogICAgTG9hZENvbmZpZywKICAgIEZpeGVkTWVkaXVtLAogICAgRXZlbnRUYXJnZXQsCiAgICBFdmVudEVtaXR0ZXIsCiAgICAuLi5ycGMyLAogICAgLi4uY29tcG9uZW50cywKICAgIC4uLmNvbW1hbmRzLAogICAgZm5tYXRjaCwKICAgIFBBVEhfRk5NX01VTFRJLAoKICAgIC4uLnsgR2V0Q29sb3JCYW5kcywgR2V0RWxlbWVudHMsIEdldEluc3RhbmNlcywgR2V0UG9zaXRpb25zLCBVcGRhdGVNZWFzdXJlcywgQWxpZ25BbGwsIHNjaWVudGlmaWMgfSwKICAgIC4uLnsKICAgICAgR2V0RXhwb25lbnQsCiAgICAgIEdldE1hbnRpc3NhLAogICAgICBWYWx1ZVRvTnVtYmVyLAogICAgICBOdW1iZXJUb1ZhbHVlLAogICAgICBHZXRNdWx0aXBsaWVycywKICAgICAgR2V0RmFjdG9yLAogICAgICBHZXRDb2xvckJhbmRzLAogICAgICBCRywKICAgICAgZGlnaXQyY29sb3IKICAgIH0KICB9OwoKICBpZihzdG9yZS5rZXlzKCkubGVuZ3RoID09IDApIHsKICAgIGF3YWl0IExvYWRDb25maWcoKQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgZm9yKGxldCBba2V5LCB2YWx1ZV0gb2YgcmVzcG9uc2UuZW50cmllcygpKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKGBJbml0aWFsaXppbmcgc3RvcmUgc2V0KCcke2tleX0nLGAsIHZhbHVlLCBgKWApOwogICAgICAgICAgc3RvcmUuc2V0KGtleSwgdmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgZm9yKGxldCBrZXkgb2Ygc3RvcmUua2V5cygpKSB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHN0b3JlLmdldChrZXkpOwogICAgICAgICAgc3dpdGNoIChrZXkpIHsKICAgICAgICAgICAgY2FzZSAndXJsJzoKICAgICAgICAgICAgICBjb25maWcubGlzdFVSTCh2YWx1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2ZpbHRlcic6CiAgICAgICAgICAgICAgY29uZmlnLnNlYXJjaEZpbHRlcih2YWx1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3pvb20nOgogICAgICAgICAgICAgIGNvbmZpZy56b29tTG9nKHZhbHVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnY29uc29sZSc6CiAgICAgICAgICAgICAgY29uZmlnLmxvZ1NpemUodmFsdWUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdkZWJ1Zyc6CiAgICAgICAgICAgICAgY29uZmlnLmRlYnVnRmxhZyh2YWx1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2F1dGgnOgogICAgICAgICAgICAgIGNvbmZpZy5jcmVkZW50aWFscyh2YWx1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgICAuY2F0Y2goZSA9PiB7fSk7CiAgfQogIGNvbnN0IGltcG9ydGVkTmFtZXMgPSBPYmplY3Qua2V5cyhpbXBvcnRzKTsKICAvL2NvbnNvbGUuZGVidWcoJ0R1cGVzOicsIGdldE1lbWJlck5hbWVzKHdpbmRvdykuZmlsdGVyKG0gPT4gaW1wb3J0ZWROYW1lcy5pbmRleE9mKG0pICE9IC0xKSk7CgogIC8vcHJldHRpZXItaWdub3JlCiAgd2Vha0Fzc2lnbih3aW5kb3csIHsgcnBjOnJwYzIgfSk7CiAgd2Vha0Fzc2lnbih3aW5kb3csIGltcG9ydHMpOwogIHdlYWtBc3NpZ24od2luZG93LkVsZW1lbnQsIGdldE1ldGhvZHMoZG9tLkVsZW1lbnQpKTsKICB3ZWFrQXNzaWduKHdpbmRvdywgZG9tLCBnZW9tLCBpbXBvcnRzLCBsb2NhbEZ1bmN0aW9ucyk7CiAgd2Vha0Fzc2lnbih3aW5kb3csIHsKICAgIGZ1bmN0aW9uczogZmlsdGVyKGxvY2FsRnVuY3Rpb25zLCB2ID0+IHR5cGVvZiB2ID09ICdmdW5jdGlvbicpLAogICAgZG9tLAogICAgZ2VvbSwKICAgIGNvbmZpZywKICAgIGxvYWRpbmcsCiAgICBmaWxlUGFuZWwKICB9KTsKICBFcnJvci5zdGFja1RyYWNlTGltaXQgPSAxMDA7CgogIHdlYWtBc3NpZ24od2luZG93LCB7CiAgICBUZXN0QXJjOiAoKSA9PiB0aW1lcigyMDAwKS50aGVuKCgpID0+IERyYXdBcmMoeyB4OiA1MCwgeTogMTUwIH0sIHsgeDogMzUwLCB5OiAzMDAgfSwgMTIwICogKE1hdGguUEkgLyAxODApKSkKICB9KTsKCiAgY29uc3QgdGltZXN0YW1wcyA9IG5ldyBSZXBlYXRlcihhc3luYyAocHVzaCwgc3RvcCkgPT4gewogICAgcHVzaChEYXRlLm5vdygpKTsKICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gcHVzaChEYXRlLm5vdygpKSwgMTAwMCk7CiAgICBhd2FpdCBzdG9wOwogICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgfSk7CgogIGNvbnN0IGxvZ2dlciA9IG5ldyBSZXBlYXRlcihhc3luYyAocHVzaCwgc3RvcCkgPT4gewogICAgcHVzaChbJ0RFQlVHJywgbnVsbCwgbnVsbCwgJ0xvYWQgcmVhZHkhJ10pOwogICAgd2luZG93LnB1c2hsb2cgPSBwdXNoOwogICAgYXdhaXQgc3RvcDsKICB9KTsKICBsb2dnZXIucHVzaCA9IHdpbmRvdy5wdXNobG9nOwoKICAvL3dpbmRvdy5mb2N1c1NlYXJjaCA9IHRya2woKTsKICB3aW5kb3cuY3VycmVudFNlYXJjaCA9IHRya2wobnVsbCk7CgogIHdpbmRvdy5rZXlzdHJva2UgPQogICAgdGFyZ2V0ID0+CiAgICAoa2V5LCBtb2RpZmllcnMgPSAwKSA9PgogICAgICBrZXlzaW0uS2V5Ym9hcmQuVVNfRU5HTElTSC5kaXNwYXRjaEV2ZW50c0ZvcktleXN0cm9rZShuZXcga2V5c2ltLktleXN0cm9rZShtb2RpZmllcnMsIGtleSksIHRhcmdldCk7CgogIHdpbmRvdy5mb2N1c1NlYXJjaCA9IHN0YXRlID0+IHsKICAgIGNvbnN0IGlucHV0ID0gY3VycmVudFNlYXJjaCgpOwogICAgLy9jb25zb2xlLmxvZygnZm9jdXNTZWFyY2gnLCBpbnB1dC50YWdOYW1lLCBzdGF0ZSk7CiAgICBpbnB1dFtzdGF0ZSA/ICdmb2N1cycgOiAnYmx1ciddKCk7CiAgfTsKCiAgLy8gcHJldHRpZXItaWdub3JlCiAgQmluZEdsb2JhbCh7IHByb2plY3RzLCBzb2NrZXQsIHRyYW5zZm9ybSwgc2l6ZTogc2l6ZUxpc3RlbmVyLCBhc3BlY3Q6IGFzcGVjdExpc3RlbmVyLCBzaG93U2VhcmNoLCAgIHdhdGNoZWQ6IGR1bXAsIAogICAgY2hpbGRyZW46ICgpID0+IGVsZW1lbnRDaGlsZHJlbigpLAogICAgIGdlb21ldHJpZXM6ICgpID0+IGVsZW1lbnRHZW9tZXRyaWVzKCksCiAgICAuLi5jb25maWcgfSk7CgogIGN1cnJlbnRTZWFyY2guc3Vic2NyaWJlKHZhbHVlID0+IHsKICAgIGlmKHZhbHVlKSB7CiAgICAgIGZvY3VzU2VhcmNoKGZhbHNlKTsKICAgICAgVGltZXIub25jZSgxMDAwKS50aGVuKCgpID0+IGZvY3VzU2VhcmNoKHRydWUpKTsKICAgIH0KICB9KTsKCiAgY29uc3QgaW5zcGVjdFN5bSA9IFN5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyk7CgogIGNvbnN0IHRlc3RDb21wb25lbnQgPSBwcm9wcyA9PiBodG1sYCA8ZGl2PlRoaXMgaXMgYSB0ZXN0PC9kaXY+IGA7CgogIGxldCBjID0gaCh0ZXN0Q29tcG9uZW50LCB7fSk7CiAgd2luZG93LnRlc3RDb21wb25lbnQgPSBjOwoKICBjb25zdCBVcGRhdGVQcm9qZWN0TGlzdCA9IGFzeW5jIChvcHRzID0gY29uZmlnLmxpc3RVUkwoKSA/IHsgdXJsOiBjb25maWcubGlzdFVSTCgpLCAuLi5jcmVkZW50aWFscyB9IDoge30pID0+IHsKICAgIGxldCBsaXN0ID0gW107CiAgICAvL2NvbnNvbGUubG9nKCdvcHRzOicsIG9wdHMpOwogICAgbGV0IHsgdXJsLCAuLi5yZXN0T2ZPcHRzIH0gPSBvcHRzOwogICAgbGV0IHVybHMgPSB1cmwgPyB1cmwuc3BsaXQoL1xuL2cpIDogW251bGxdOwogICAgZm9yKHVybCBvZiB1cmxzKSB7CiAgICAgIC8vY29uc29sZS5sb2coJ1VwZGF0ZVByb2plY3RMaXN0OicsIHsgLi4ub3B0cywgLi4uY3JlZGVudGlhbHMsIHVybCB9KTsKICAgICAgLy8gbGV0IGRhdGEgPSBhd2FpdCBMaXN0UHJvamVjdHMoeyAuLi5vcHRzLCAuLi5jcmVkZW50aWFscywgdXJsIH0pOwoKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgZmlsZXM6IGF3YWl0IGZldGNoKCdmaWxlcz9maWx0ZXI9LiouKGJyZHxzY2h8bGJyfEdCTHxHS098R1RMKSQmZmxhdD0xJywgewogICAgICAgICAgbWV0aG9kOiAnZ2V0JyAvKiwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZmlsdGVyOiAnLiouKGJyZHxzY2h8bGJyfEdCTHxHS098R1RMKSQnIH0pKi8KICAgICAgICB9KQogICAgICAgICAgLnRoZW4ocmVzcCA9PiByZXNwLnRleHQoKSkKICAgICAgICAgIC50aGVuKGpzb24gPT4gSlNPTi5wYXJzZShqc29uKSkKICAgICAgfTsKCiAgICAgIGlmKHR5cGVvZiBkYXRhID09ICdzdHJpbmcnKSBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTsKCiAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVQcm9qZWN0TGlzdCcsIGRhdGEpOwoKICAgICAgbGV0IGZpbGVzID0gKHR5cGVvZiBkYXRhID09ICdvYmplY3QnICYmIGRhdGEgIT0gbnVsbCAmJiBkYXRhLmZpbGVzKSB8fCBbXTsKCiAgICAgIGlmKGlzT2JqZWN0KGZpbGVzKSAmJiAnZmlsZXMnIGluIGZpbGVzKSBmaWxlcyA9IGZpbGVzLmZpbGVzOwoKICAgICAgY29uc29sZS5sb2coJ2ZpbGVzJywgZmlsZXMpOwoKICAgICAgZnVuY3Rpb24gRmlsZShvYmosIGkpIHsKICAgICAgICBjb25zdCB7IG5hbWUgfSA9IG9iajsKICAgICAgICBsZXQgZmlsZSA9IHRoaXMgaW5zdGFuY2VvZiBGaWxlID8gdGhpcyA6IE9iamVjdC5jcmVhdGUoRmlsZS5wcm90b3R5cGUpOwogICAgICAgIGxldCBkYXRhID0gdHJrbCh7IHBlcmNlbnQ6IE5hTiB9KTsKICAgICAgICBPYmplY3QuYXNzaWduKGZpbGUsIG9iaik7CiAgICAgICAgZmlsZS5uYW1lID0gbmFtZTsKICAgICAgICBmaWxlLmkgPSBpOwogICAgICAgIHRya2wuYmluZChmaWxlLCB7IGRhdGEgfSk7CiAgICAgICAgLy8gICAgICAgIGNvbnNvbGUuaW5mbyhgR290IGZpbGUgJyR7bmFtZS5yZXBsYWNlKC8uKjpcL1wvL2csICcnKS5yZXBsYWNlKC9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLywgJ2dpdGh1Yi5jb20nKSB8fCBuYW1lLnJlcGxhY2UoLy4qXC8vZywgJycpfSdgKTsKCiAgICAgICAgcmV0dXJuIGZpbGU7CiAgICAgIH0KICAgICAgRmlsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5uYW1lOwogICAgICB9OwogICAgICBpZihmaWxlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGBmaWxlc2AsZmlsZXMpOwogICAgICAgIGxpc3QgPSBsaXN0LmNvbmNhdChmaWxlcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKS5tYXAoKG9iaiwgaSkgPT4gbmV3IEZpbGUob2JqLCBpKSkpOwogICAgICAgIGxldCBzdmdzID0gbGlzdC5yZWR1Y2UoKGFjYywgZmlsZSkgPT4gewogICAgICAgICAgaWYoL1wubGJyJC9pLnRlc3QoZmlsZS5uYW1lKSkgcmV0dXJuIGFjYzsKICAgICAgICAgIGZpbGUuc3ZnID0gYCR7RWFnbGVEb2N1bWVudC5iYXNlT2YoZmlsZS5uYW1lKX0uJHtFYWdsZURvY3VtZW50LnR5cGVPZihmaWxlLm5hbWUpfS5zdmdgOwogICAgICAgICAgLy9jb25zb2xlLmxvZyhgZmlsZS5zdmcgPSAnJHtmaWxlLnN2Z30nYCk7CiAgICAgICAgICByZXR1cm4gWy4uLmFjYywgZmlsZS5zdmddOwogICAgICAgIH0sIFtdKTsKCiAgICAgICAgZGF0YSA9IGF3YWl0IExpc3RQcm9qZWN0cyh7IGRlc2NyaXB0aW9uczogZmFsc2UsIG5hbWVzOiBzdmdzIH0pOwogICAgICAgIGZpbGVzID0gZ2xvYmFsVGhpcy5maWxlcyA9IChkYXRhICYmIGRhdGEuZmlsZXMpIHx8IFtdOwogICAgICAgIC8vICAgICAgY29uc29sZS5sb2coJ2ZpbGVzRGF0YTonLCBmaWxlcyk7CgogICAgICAgIGZvcihsZXQgc3ZnRmlsZSBvZiBmaWxlcykgewogICAgICAgICAgaWYoaXNPYmplY3Qoc3ZnRmlsZSkgJiYgc3ZnRmlsZS5tdGltZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGNvbnN0IGYgPSBsaXN0LmZpbmQoaSA9PiBpLnN2ZyA9PT0gc3ZnRmlsZS5uYW1lKTsKICAgICAgICAgICAgaWYoaXNPYmplY3QoZikgJiYgZi5tdGltZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBzdmdGaWxlLm10aW1lIC0gZi5tdGltZTsKCiAgICAgICAgICAgICAgZi5tb2RpZmllZCA9IGRlbHRhIDwgMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIExvZ0pTLmluZm8oYHJldHJpZXZlZCBwcm9qZWN0IGxpc3QuIEdvdCAke2xpc3QubGVuZ3RofSBpdGVtcy5gKTsKCiAgICBwcm9qZWN0cyhsaXN0KTsKICB9OwoKICBVcGRhdGVQcm9qZWN0TGlzdCgpOwoKICAvKihhc3luYyBmdW5jdGlvbigpIHsKICAgIHdoaWxlKHRydWUpIHsKICAgICAgYXdhaXQgQ3JlYXRlV2ViU29ja2V0KG51bGwsIG51bGwsIHdzID0+ICh3aW5kb3cuc29ja2V0ID0gd3MpKS5jYXRjaChjb25zb2xlLmVycm9yKTsKICAgICAgYXdhaXQgd2FpdEZvcigxMDAwKTsKICAgIH0KICB9KSgpOyovCgogIGNvbnN0IGNyb3NzaGFpciA9IHsgc2hvdzogdHJrbChmYWxzZSksIHBvc2l0aW9uOiB0cmtsKHsgeDogMCwgeTogMCB9KSB9OwoKICB3aW5kb3cuY3Jvc3NoYWlyID0gdHJrbC5iaW5kKHt9LCBjcm9zc2hhaXIpOwoKICBjb25maWcuY3JlZGVudGlhbHMuc3Vic2NyaWJlKHZhbHVlID0+IHsKICAgIHN0b3JlLnNldCgnYXV0aCcsIHZhbHVlKTsKICAgIExvZ0pTLmluZm8oYGNvbmZpZy5jcmVkZW50aWFsc2AsIHZhbHVlKTsKICB9KTsKICBjb25maWcuc2VhcmNoRmlsdGVyLnN1YnNjcmliZSh2YWx1ZSA9PiB7CiAgICBzdG9yZS5zZXQoJ2ZpbHRlcicsIHZhbHVlKTsKICAgIExvZ0pTLmluZm8oYGNvbmZpZy5zZWFyY2hGaWx0ZXIgaXMgJHt2YWx1ZX1gKTsKICB9KTsKCiAgY29uZmlnLmxpc3RVUkwuc3Vic2NyaWJlKHZhbHVlID0+IHsKICAgIHN0b3JlLnNldCgndXJsJywgdmFsdWUpOwogICAgTG9nSlMuaW5mbyhgY29uZmlnLmxpc3RVUkwgaXMgJyR7dmFsdWV9J2ApOwogIH0pOwogIGNvbmZpZy5kZWJ1Z0ZsYWcuc3Vic2NyaWJlKHZhbHVlID0+IHN0b3JlLnNldCgnZGVidWcnLCB2YWx1ZSkpOwoKICBjb25maWcubG9nU2l6ZS5zdWJzY3JpYmUodmFsdWUgPT4gewogICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB2YWx1ZTsKCiAgICBpZih3aWR0aCA9PT0gdW5kZWZpbmVkIHx8IGhlaWdodCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uZmlnLmxvZ1NpemUgdW5kZWZpbmVkJyk7CiAgICB9CiAgICBzdG9yZS5zZXQoJ2NvbnNvbGUnLCB2YWx1ZSk7CiAgICAvL0xvZ0pTLmluZm8oYGNvbmZpZy5sb2dTaXplIGlzICR7dmFsdWUud2lkdGh9IHggJHt2YWx1ZS5oZWlnaHR9YCk7CiAgfSk7CgogIC8vdHJrbC5iaW5kKHdpbmRvdywgeyBjb25maWcuc2VhcmNoRmlsdGVyLCBjb25maWcubGlzdFVSTCB9KTsKICAvL3Rya2wuYmluZCh3aW5kb3csIHsgc3ZnRmFjdG9yeSB9KTsKCiAgLy90cmtsLmJpbmQod2luZG93LCB7IGNvbmZpZy56b29tTG9nLCB6b29tOiB6b29tVmFsdWUsIGNvbmZpZy5sb2dTaXplIH0pOwoKICBjb25maWcuem9vbUxvZy5zdWJzY3JpYmUodmFsdWUgPT4gewogICAgbGV0IGZhY3RvciA9IFpvb21GYWN0b3IodmFsdWUpOwogICAgLy9jb25zb2xlLmluZm8oJ3pvb21GYWN0b3IgY2hhbmdlZCcsIHZhbHVlLCBmYWN0b3IpOwogICAgc3RvcmUuc2V0KCd6b29tJywgdmFsdWUpOwogICAgaWYodmFsdWUgPT09IDEpIHRocm93IG5ldyBFcnJvcih2YWx1ZSk7CiAgfSk7CgogIGNvbnN0IHVwZGF0ZUlmQ2hhbmdlZCA9ICh0cmtsLCBuZXdWYWx1ZSwgY2FsbGJhY2spID0+IHsKICAgIGNvbnN0IG9sZFZhbHVlID0gdHJrbCgpIHx8IFtdOwogICAgLy9jb25zb2xlLmluZm8oJ3VwZGF0ZUlmQ2hhbmdlZCAnLCB7IG9sZFZhbHVlLCBuZXdWYWx1ZSB9KTsKICAgIGlmKCFBcnJheS5wcm90b3R5cGUuZXZlcnkuY2FsbChvbGRWYWx1ZSwgKGVsZW0sIGkpID0+IG5ld1ZhbHVlW2ldID09PSBlbGVtKSkgcmV0dXJuIGZhbHNlOwogICAgdHJrbChuZXdWYWx1ZSk7CiAgICBpZih0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykgY2FsbGJhY2sodHJrbCwgb2xkVmFsdWUsIG5ld1ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIGNvbnN0IGNoYW5nZUlucHV0ID0gZSA9PiB7CiAgICBjb25zdCB7IHRhcmdldCB9ID0gZTsKICAgIExvZ0pTLmluZm8oJ2NoYW5nZUlucHV0OicsIHRhcmdldC52YWx1ZSk7CiAgICBsZXQgeyB2YWx1ZSB9ID0gdGFyZ2V0OwogICAgbGV0IHBhcnRzID0gdmFsdWUuc3BsaXQoL1xzKy9nKTsKICAgIGxldCB1cmxzID0gcGFydHMuZmlsdGVyKHAgPT4gL1w6XC9cLy8udGVzdChwKSkuam9pbignXG4nKTsKICAgIHVwZGF0ZUlmQ2hhbmdlZChjb25maWcubGlzdFVSTCwgdXJscywgYXJnID0+IHsKICAgICAgLy9jb25zb2xlLmRlYnVnKCd1cGRhdGVJZkNoYW5nZWQ6JywgYXJnKTsKICAgIH0pOwogICAgY29uZmlnLmxpc3RVUkwodXJscyk7CiAgICAvLyAgICB2YWx1ZSA9IHBhcnRzLmZpbHRlcihwID0+ICEvXDpcL1wvLy50ZXN0KHApKS5qb2luKCcgJyk7CiAgICBjb25maWcuc2VhcmNoRmlsdGVyKHZhbHVlID09ICcnID8gJyonIDogdmFsdWUuc3BsaXQoL1xzKlx8XHMqL2cpLmpvaW4oJyB8ICcpKTsKICB9OwoKICBjb25zdCBDb25zdW1lciA9IHByb3BzID0+IHsKICAgIGNvbnN0IHJlc3VsdCA9IHVzZVJlc3VsdChhc3luYyBmdW5jdGlvbiogKCkgewogICAgICBmb3IgYXdhaXQobGV0IHRpbWUgb2YgdGltZXN0YW1wcykgewogICAgICAgIHlpZWxkIHRpbWU7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGgoCiAgICAgICdkaXYnLAogICAgICB7CiAgICAgICAgY2xhc3NOYW1lOiAndmNlbnRlciBmaXhlZCBncm93IG5vLXNlbGVjdCcsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGZsZXg6ICcxIDAgYXV0bycsCiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJywKICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgaGVpZ2h0OiAnNjBweCcsCiAgICAgICAgICB3aWR0aDogJzIwMHB4JywKICAgICAgICAgIHBhZGRpbmc6ICcwIDEwcHggMCAwJwogICAgICAgIH0KICAgICAgfSwKICAgICAgW3Jlc3VsdCAmJiBuZXcgRGF0ZShyZXN1bHQudmFsdWUpLnRvTG9jYWxlVGltZVN0cmluZygnZGUtQ0gnKV0KICAgICk7CiAgfTsKICBMb2dKUy5hZGRBcHBlbmRlcigKICAgIGNsYXNzIGV4dGVuZHMgTG9nSlMuQmFzZUFwcGVuZGVyIHsKICAgICAgbG9nKHR5cGUsIHRpbWUsIG1zZykgewogICAgICAgIGxldCBkID0gbmV3IERhdGUodGltZSk7CiAgICAgICAgaWYodHlwZW9mIHdpbmRvdy5wdXNobG9nID09ICdmdW5jdGlvbicpIHdpbmRvdy5wdXNobG9nKFt0eXBlLCBpc29EYXRlKGQpLnJlcGxhY2UoLy0vZywgJycpLCBkLnRvTG9jYWxlVGltZVN0cmluZyhuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgJ2RlJyksIG1zZ10pOwogICAgICB9CiAgICB9CiAgKTsKICBsZXQgbG9nZ2VyUmVjdCA9IG5ldyBSZWN0KCk7CiAgY29uc3QgTG9nZ2VyID0gcHJvcHMgPT4gewogICAgY29uc3QgW2xpbmVzLCBzZXRMaW5lc10gPSB1c2VTdGF0ZShbXSk7CiAgICBjb25zdCBbcmVmLCByZWN0XSA9IHVzZURpbWVuc2lvbnMoKTsKCiAgICBjb25zdCByID0gbmV3IFJlY3QocmVjdCk7CiAgICBpZighbG9nZ2VyUmVjdC5lcXVhbHMocikpIHsKICAgICAgbG9nZ2VyUmVjdCA9IHI7CiAgICB9CiAgICBjb25zdCByZXN1bHQgPSB1c2VSZXN1bHQoYXN5bmMgZnVuY3Rpb24qICgpIHsKICAgICAgZm9yIGF3YWl0KGxldCBtc2cgb2YgbG9nZ2VyKSB7CiAgICAgICAgLy8gIGNvbnNvbGUuZGVidWcoIm1zZzoiLCBtc2cpOwogICAgICAgIHlpZWxkIG1zZzsKICAgICAgfQogICAgfSk7CiAgICBpZihyZXN1bHQpIHsKICAgICAgbGluZXMucHVzaChyZXN1bHQudmFsdWUpOwogICAgfQogICAgcmV0dXJuIGgoCiAgICAgICd0YWJsZScsCiAgICAgIHsgY2xhc3NOYW1lOiAnbG9nZ2VyJywgcmVmIH0sCiAgICAgIGxpbmVzLnNsaWNlKC0xMDAsIGxpbmVzLmxlbmd0aCkubWFwKChbdHlwZSwgZCwgdCwgbV0sIGkpID0+CiAgICAgICAgaCgndHInLCB7fSwgWwogICAgICAgICAgaCgKICAgICAgICAgICAgJ3RkJywKICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdsb2cgc2lnbicgfSwKICAgICAgICAgICAgaCgnaW1nJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2xvZyBzaWduJywKICAgICAgICAgICAgICBzcmM6IGBzdGF0aWMvJHt0eXBlLnRvTG93ZXJDYXNlKCkgfHwgJ3dhcm4nfS5zdmdgLAogICAgICAgICAgICAgIHN0eWxlOiB7IGhlaWdodDogJzE0cHgnLCB3aWR0aDogJ2F1dG8nLCBtYXJnaW5Ub3A6ICctMXB4JyB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICApLAogICAgICAgICAgaCgndGQnLCB7IGNsYXNzTmFtZTogJ2xvZyBtZXNzYWdlJyB9LCBtICsgJycpCiAgICAgICAgXSkKICAgICAgKQogICAgKTsKICB9OwoKICBkdW1wKHsgLi4uZHVtcCgpLCB0ZXN0OiAxMjMgfSk7CgogIGNvbnN0IER1bXBlciA9IHByb3BzID0+IHsKICAgIGNvbnN0IFt2YWx1ZXMsIHNldFZhbHVlc10gPSB1c2VTdGF0ZShkdW1wKCkpOwogICAgbGV0IGxpbmVzID0gW107CiAgICBkdW1wLnN1YnNjcmliZSh2YWx1ZSA9PiBzZXRWYWx1ZXModmFsdWUpKTsKICAgIGZvcihsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlcykpIGxpbmVzLnB1c2goW2tleSwgdmFsdWVdKTsKICAgIHJldHVybiBoKAogICAgICAndGFibGUnLAogICAgICB7IGJvcmRlcjogJzAnLCBjZWxscGFkZGluZzogMywgY2VsbHNwYWNpbmc6IDAsIGNsYXNzTmFtZTogJ2R1bXBlcicgfSwKICAgICAgbGluZXMubWFwKChbaywgdl0sIGkpID0+IGgoJ3RyJywgeyBjbGFzc05hbWU6ICd3YXRjaCcgfSwgW2goJ3RkJywgeyBjbGFzc05hbWU6ICduYW1lJyB9LCBrICsgJycpLCBoKCd0ZCcsIHsgY2xhc3NOYW1lOiAndmFsdWUnIH0sIHYgKyAnJyldKSkKICAgICk7CiAgfTsKCiAgY29uc3QgQ29tbWFuZGVyID0gKHsgb25Db21tYW5kLCAuLi5wcm9wcyB9KSA9PiB7CiAgICBjb25zdCBbaW5wdXRUZXh0LCBzZXRJbnB1dFRleHRdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgaGFuZGxlciA9IGUgPT4gewogICAgICBjb25zdCB7IHRhcmdldCB9ID0gZTsKICAgICAgaWYoZS50eXBlLmVuZHNXaXRoKCdkb3duJykgJiYgZS5rZXlDb2RlID09IDEzKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0YXJnZXQudmFsdWUgfHwgaW5wdXRUZXh0OwogICAgICAgIGlmKHZhbHVlICE9ICcnKSB7CiAgICAgICAgICBpZih0eXBlb2Ygb25Db21tYW5kID09ICdmdW5jdGlvbicpIG9uQ29tbWFuZCh2YWx1ZSk7CiAgICAgICAgICBzZXRJbnB1dFRleHQoJycpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRJbnB1dFRleHQodGFyZ2V0LnZhbHVlKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiBoKAogICAgICAnaW5wdXQnLAogICAgICB7CiAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgIGNsYXNzTmFtZTogJ2NvbW1hbmRlcicsCiAgICAgICAgdmFsdWU6IGlucHV0VGV4dCwKICAgICAgICBvbktleURvd246IGhhbmRsZXIsCiAgICAgICAgYXV0b2ZvY3VzOiB0cnVlCiAgICAgIH0sCiAgICAgIFtdCiAgICApOwogIH07CgogIGNvbnN0IGxheWVyc0Ryb3BEb3duID0gdHJrbChmYWxzZSk7CgogIGNvbnN0IHRvZ2dsZSA9IHRya2wgPT4gdHJrbCghdHJrbCgpKTsKICBsZXQgc2V0VG87CgogIGNvbnN0IExheWVyID0gKHsgdGl0bGUsIG5hbWUsIGxhYmVsLCBpLCBjb2xvciwgZWxlbWVudCwgY2xhc3NOYW1lLCAuLi5wcm9wcyB9KSA9PiB7CiAgICBsZXQgc2V0VmlzaWJsZSA9IHByb3BzLnZpc2libGUgfHwgZWxlbWVudC5oYW5kbGVycy52aXNpYmxlLAogICAgICB2aXNpYmxlID0gdXNlVHJrbChzZXRWaXNpYmxlKTsKICAgIGNvbnN0IGlzVmlzaWJsZSA9IHZpc2libGUgPT09IHRydWUgfHwgKHZpc2libGUgIT09IGZhbHNlICYmIGlzLm9uKHZpc2libGUpKTsKICAgIGlmKGlzT2JqZWN0KGVsZW1lbnQpICYmICd2aXNpYmxlJyBpbiBlbGVtZW50KSBzZXRWaXNpYmxlID0gdmFsdWUgPT4gKGVsZW1lbnQudmlzaWJsZSA9IHZhbHVlKTsKICAgIGxldCBbc29sbywgc2V0U29sb10gPSB1c2VTdGF0ZShudWxsKTsKCiAgICBjb25zdCBvbk1vdXNlRG93biA9IGRlYm91bmNlKGUgPT4gewogICAgICAvL2NvbnNvbGUubG9nKCdvbk1vdXNlRG93bicsIGUpOwogICAgICAvKiBpZihlLmJ1dHRvbnMgJiAxKSovIHsKICAgICAgICBzZXRWaXNpYmxlKChzZXRUbyA9ICFpc1Zpc2libGUpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwgMjAwKTsKICAgIC8vIGNvbnNvbGUubG9nKGBMYXllciAjJHtpfSAke25hbWV9IGlzVmlzaWJsZT0ke2lzVmlzaWJsZX1gKTsKICAgIHJldHVybiBoKAogICAgICAnZGl2JywKICAgICAgewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjbGFzc05hbWUsICFpc1Zpc2libGUgJiYgJ2dyYXknKSwKICAgICAgICBpZDogYGxheWVyLSR7aX1gLAogICAgICAgICdkYXRhLWxheWVyJzogYCR7KGVsZW1lbnQgJiYgZWxlbWVudC5udW1iZXIpIHx8IGl9ICR7KGVsZW1lbnQgJiYgZWxlbWVudC5uYW1lKSB8fCBuYW1lfWAsCiAgICAgICAgb25DbGljazogdXNlRG91YmxlQ2xpY2soCiAgICAgICAgICBlID0+IHsKICAgICAgICAgICAgbGV0IHsgdGFyZ2V0IH0gPSBlOwoKICAgICAgICAgICAgd2hpbGUoIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2lkJykgJiYgdGFyZ2V0LnBhcmVudEVsZW1lbnQpIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdEb3VibGUgY2xpY2snLCB7IHNvbG8sIGksIHRhcmdldCB9KTsKICAgICAgICAgICAgbGV0IGxheWVycyA9IFsuLi5sYXllckxpc3QoKV07CiAgICAgICAgICAgIGxldCB2aXNpYmxlTGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihsID0+IGlzLm9uKGwudmlzaWJsZSgpKSk7CiAgICAgICAgICAgIGxldCBoaWRkZW5MYXllcnMgPSBsYXllcnMuZmlsdGVyKGwgPT4gIWlzLm9uKGwudmlzaWJsZSgpKSk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ0xheWVyLm9uQ2xpY2snLCB7IHZpc2libGVMYXllcnMsIGhpZGRlbkxheWVycywgc29sbyB9KTsKCiAgICAgICAgICAgIGlmKHNvbG8pIHsKICAgICAgICAgICAgICBvbk1vdXNlRG93bi5jbGVhcigpOwogICAgICAgICAgICAgIGxldCByZXN0b3JlRGF0YSA9IHNvbG87CgogICAgICAgICAgICAgIHNldFNvbG8obnVsbCk7CiAgICAgICAgICAgICAgcmVzdG9yZUl0ZW1TdGF0ZXMocmVzdG9yZURhdGEsIChpdGVtLCB2YWx1ZSkgPT4gaXRlbS52aXNpYmxlKHZhbHVlID8gJ3llcycgOiAnbm8nKSk7CgogICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZygncmVzdG9yZURhdGE6JywgcmVzdG9yZURhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGxldCBzYXZlZCA9IHNhdmVJdGVtU3RhdGVzKGxheWVycywgaXRlbSA9PiBpcy5vbihpdGVtLnZpc2libGUoKSkpOwogICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1Zygnc2F2ZWQ6Jywgc2F2ZWQpOwogICAgICAgICAgICAgIHNldFNvbG8oc2F2ZWQpOwogICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZygnbGF5ZXJzOicsIGxheWVycyk7CiAgICAgICAgICAgICAgY29uc3Qgc3RhdGVzID0gbGF5ZXJzLm1hcChsID0+IFtsLCBsLmkgPT0gaV0pOwogICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1Zygnc3RhdGVzOicsIHN0YXRlcyk7CiAgICAgICAgICAgICAgc3RhdGVzLmZvckVhY2goKFtsLCBzdGF0ZV0pID0+IGwudmlzaWJsZShzdGF0ZSA/ICd5ZXMnIDogJ25vJykpOwogICAgICAgICAgICAgIC8vICAgIGZvcihsZXQgbCBvZiBsYXllcnMpIGwudmlzaWJsZShsLm5hbWUgPT0gbmFtZSA/ICdubycgOiAneWVzJyk7CiAgICAgICAgICAgICAgc2V0VmlzaWJsZSh0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsYXllckxpc3QobGF5ZXJzKTsKICAgICAgICAgIH0sCiAgICAgICAgICBvbk1vdXNlRG93biB8fAogICAgICAgICAgICAoZSA9PiB7CiAgICAgICAgICAgICAgbGV0IGxheWVycyA9IFsuLi5sYXllckxpc3QoKV07CiAgICAgICAgICAgICAgaWYoc29sbykgewogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBsYXllckxpc3QobGF5ZXJzKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICB7IHRpbWVvdXQ6IDQwIH0KICAgICAgICApLAogICAgICAgIG9uTW91c2VNb3ZlOiBlID0+IHsKICAgICAgICAgIGlmKGUuYnV0dG9ucyAmIDEgJiYgc2V0VG8gIT09IHVuZGVmaW5lZCkgc2V0VmlzaWJsZShzZXRUbyk7CiAgICAgICAgfSwKICAgICAgICBvbk1vdXNlVXA6IGUgPT4gewogICAgICAgICAgc2V0VG8gPSBudWxsOwogICAgICAgIH0gLyosCiAgICAgICAgb25Nb3VzZURvd24qLwogICAgICB9LAogICAgICBbCiAgICAgICAgaCgKICAgICAgICAgICdzcGFuJywKICAgICAgICAgIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNsYXNzTmFtZSwgJ251bWJlcicpLAogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgIGJhY2tncm91bmQ6IGNvbG9yIHx8IChpc09iamVjdChlbGVtZW50KSAmJiBlbGVtZW50LmNvbG9yKQogICAgICAgICAgICB9LAogICAgICAgICAgICAuLi5wcm9wcwogICAgICAgICAgfSwKICAgICAgICAgIGAke2l9YAogICAgICAgICksCiAgICAgICAgaCgKICAgICAgICAgICdzcGFuJywKICAgICAgICAgIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNsYXNzTmFtZSwgJ25hbWUnLCAhaXNWaXNpYmxlICYmICdncmF5Jywgc29sbyAmJiAnYm9sZCcpLAogICAgICAgICAgICAuLi5wcm9wcwogICAgICAgICAgfSwKICAgICAgICAgIGAke25hbWV9YAogICAgICAgICksCiAgICAgICAgaCgnaW1nJywgewogICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNsYXNzTmFtZSwgJ3Zpc2libGUnKSwKICAgICAgICAgIC4uLnByb3BzLAogICAgICAgICAgc3R5bGU6IHsgaGVpZ2h0OiAnMWVtJywgd2lkdGg6ICdhdXRvJyB9LAogICAgICAgICAgc3JjOiBgc3RhdGljL3N2Zy8ke2lzVmlzaWJsZSA/ICdzaG93JyA6ICdoaWRlJ30uc3ZnYAogICAgICAgIH0pCiAgICAgIF0KICAgICk7CiAgfTsKCiAgY2xhc3MgRG9jdW1lbnRMaXN0IHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnJlcGVhdGVyID0gbmV3IFJlcGVhdGVyKChwdXNoLCBzdG9wKSA9PiB7CiAgICAgICAgdGhpcy5wdXNoID0gcHVzaDsKICAgICAgICB0aGlzLnN0b3AgPSBzdG9wOwogICAgICB9KTsKICAgICAgdGhpcy5tYXAgPSBuZXcgTWFwKCk7CiAgICB9CgogICAgYWRkKG5hbWUsIGNvbXBvbmVudCkgewogICAgICBjb25zdCB7IG1hcCB9ID0gdGhpczsKCiAgICAgIGlmKCFSZWFjdENvbXBvbmVudC5pc0NvbXBvbmVudChjb21wb25lbnQpKSBjb21wb25lbnQgPSBoKGNvbXBvbmVudCwge30sIFtdKTsKCiAgICAgIG1hcC5zZXQobmFtZSwgY29tcG9uZW50KTsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KCiAgICBhZGRFbnRyeShbbmFtZSwgY29tcG9uZW50XSkgewogICAgICByZXR1cm4gdGhpcy5hZGQobmFtZSwgY29tcG9uZW50KTsKICAgIH0KCiAgICByZW1vdmUobmFtZSkgewogICAgICBpZihtYXAuaGFzKG5hbWUpKSB7CiAgICAgICAgbWFwLmRlbGV0ZShuYW1lKTsKICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCB7IG1hcCB9ID0gdGhpczsKICAgICAgdGhpcy5wdXNoKFsuLi5tYXAudmFsdWVzKCldKTsKICAgIH0KICB9CiAgbGV0IGRhdGE7CgogIGNvbnNvbGUubG9nKCdEVU1NWScpOwoKICB3aW5kb3cuZG9jdW1lbnRMaXN0ID0gZGF0YSA9IG5ldyBEb2N1bWVudExpc3QoKTsKICBSZWFjdC5yZW5kZXIoaChEaXNwbGF5TGlzdCwgeyBkYXRhIH0pLCBFbGVtZW50LmZpbmQoJyNkaXNwbGF5JykpOwoKICBsZXQgcHJlYWN0Q29tcG9uZW50ID0gaChTbG90UHJvdmlkZXIsIHt9LCBbCiAgICBoKFBhbmVsLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcygnYnV0dG9ucycsICduby1zZWxlY3QnKSwgdGFnOiAnaGVhZGVyJyB9LCBbCiAgICAgIGgoQnV0dG9uLCB7CiAgICAgICAgaW1hZ2U6ICdzdGF0aWMvc3ZnL2Jyb3dzZS5zdmcnLAogICAgICAgIHN0YXRlOiBvcGVuLAogICAgICAgIGZuOiBlID0+IHsKICAgICAgICAgIGlmKGUudHlwZS5lbmRzV2l0aCgnZG93bicpKSB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2ZpbGUgbGlzdCBwdXNoJywgZSk7CiAgICAgICAgICAgIG9wZW4oIW9wZW4oKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KSwKCiAgICAgIC8qIGgoQnV0dG9uLCB7CiAgICAgICAgICBjYXB0aW9uOiAnUmFuZG9tJywKICAgICAgICAgIGZuOiBNb2RpZnlDb2xvcnMoYyA9PiBjLnJlcGxhY2VBbGwoYyA9PiBIU0xBLnJhbmRvbSgpKSkKICAgICAgICB9KSwKICAgICAgICBoKEJ1dHRvbiwgewogICAgICAgICAgY2FwdGlvbjogJ0ludmVydCcsCiAgICAgICAgICBmbjogTW9kaWZ5Q29sb3JzKGMgPT4gYy5yZXBsYWNlQWxsKGMgPT4gYy5pbnZlcnQoKSkpCiAgICAgICAgfSksKi8KICAgICAgaChEcm9wRG93biwge30sIFtdKSwKICAgICAgaChCdXR0b24sIHsKICAgICAgICAvLyAgY2FwdGlvbjogJ+KGlCcsCiAgICAgICAgZm46IE1ha2VGaXRBY3Rpb24oVkVSVElDQUwgJiAxKSwKICAgICAgICBpbWFnZTogJ3N0YXRpYy9zdmcvZml0LXZlcnRpY2FsLnN2ZycKICAgICAgfSksCiAgICAgIGgoQnV0dG9uLCB7CiAgICAgICAgLy8gIGNhcHRpb246ICfihpUnLAogICAgICAgIGZuOiBNYWtlRml0QWN0aW9uKEhPUklaT05UQUwgJiAxKSwKICAgICAgICBpbWFnZTogJ3N0YXRpYy9zdmcvZml0LWhvcml6b250YWwuc3ZnJwogICAgICB9KSwKICAgICAgaChDb25kaXRpb25hbCwgeyBzaWduYWw6IGN1cnJlbnRQcm9qIH0sIFsKICAgICAgICBoKEJ1dHRvbiwgewogICAgICAgICAgLy8gIGNhcHRpb246ICfihpUnLAogICAgICAgICAgZm46ICgpID0+IGNvbmZpZy5zaG93R3JpZCghY29uZmlnLnNob3dHcmlkKCkpLAogICAgICAgICAgc3RhdGU6IGNvbmZpZy5zaG93R3JpZCwKICAgICAgICAgIHRvZ2dsZTogdHJ1ZSwKICAgICAgICAgIGltYWdlOiAnc3RhdGljL3N2Zy9ncmlkLnN2ZycKICAgICAgICB9KSwKICAgICAgICBoKAogICAgICAgICAgRHJvcERvd24sCiAgICAgICAgICB7CiAgICAgICAgICAgIGlzT3BlbjogbGF5ZXJzRHJvcERvd24uc3Vic2NyaWJlKG9wZW4gPT4gY29uc29sZS5sb2coJ2xheWVycyBkcm9wZG93bicsIHsgb3BlbiB9KSkKICAgICAgICAgICAgLy8gaW50bzogJyNwb3J0YWwnCiAgICAgICAgICB9LAogICAgICAgICAgWwogICAgICAgICAgICBwcm9wcyA9PgogICAgICAgICAgICAgIGgoQnV0dG9uLCB7CiAgICAgICAgICAgICAgICAuLi5wcm9wcywKICAgICAgICAgICAgICAgIHRvZ2dsZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHN0YXRlOiBsYXllcnNEcm9wRG93biwKICAgICAgICAgICAgICAgIGltYWdlOiAnc3RhdGljL3N2Zy9sYXllcnMuc3ZnJwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBwcm9wcyA9PgogICAgICAgICAgICAgIGgoCiAgICAgICAgICAgICAgICBDaG9vc2VyLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAuLi5wcm9wcywKICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGF5ZXJzJywKICAgICAgICAgICAgICAgICAgaXRlbUNsYXNzOiAnbGF5ZXInLAogICAgICAgICAgICAgICAgICBpdGVtQ29tcG9uZW50OiBMYXllciwKICAgICAgICAgICAgICAgICAgaXRlbXM6IGxheWVyTGlzdAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFtdCiAgICAgICAgICAgICAgKQogICAgICAgICAgXQogICAgICAgICksCiAgICAgICAgaChCdXR0b24sIHsKICAgICAgICAgIGZuOiBkZWJvdW5jZShhc3luYyBlID0+IHsKICAgICAgICAgICAgLypjb25zb2xlLmxvZygiQ0FNIGJ1dHRvbiIse2V9KTsKICAgICAgICAgICAgICBpZihlLnR5cGUuZW5kc1dpdGgoJ3VwJykpIHJldHVybiBmYWxzZTsqLwogICAgICAgICAgICBsZXQgcjsKICAgICAgICAgICAgcHJvamVjdC5nZXJiZXIgPSB7fTsKICAgICAgICAgICAgcHJvamVjdC5nY29kZSA9IHt9OwogICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJ0NBTSBCdXR0b24nKTsKICAgICAgICAgICAgZm9yKGxldCBzaWRlIG9mIFsnYmFjaycsICdmcm9udCcsICdkcmlsbCcsICdvdXRsaW5lJ10pIHsKICAgICAgICAgICAgICBsZXQgZ2VyYmVyID0gYXdhaXQgQm9hcmRUb0dlcmJlcihwcm9qZWN0LCB7CiAgICAgICAgICAgICAgICBzaWRlLAogICAgICAgICAgICAgICAgW3NpZGVdOiB0cnVlLAogICAgICAgICAgICAgICAgZmV0Y2g6IFsnZHJpbGwnLCAnb3V0bGluZSddLmluZGV4T2Yoc2lkZSkgIT0gLTEKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYoZ2VyYmVyKSB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoYHByb2plY3QuZ2VyYmVyWycke3NpZGV9J10gPWAsIGdlcmJlcik7CiAgICAgICAgICAgICAgICBwcm9qZWN0LmdlcmJlcltzaWRlXSA9IGdlcmJlcjsKICAgICAgICAgICAgICAgIGlmKGdlcmJlciAmJiBnZXJiZXIuZGF0YSkgewogICAgICAgICAgICAgICAgICBnZXJiZXIuY21kcyA9IGF3YWl0IEdlcmJlclBhcnNlci5wYXJzZShnZXJiZXIuZGF0YSk7CiAgICAgICAgICAgICAgICAgIGdlcmJlci51bml0ID0gZ2VyYmVyLmNtZHMuZmluZChpID0+IGkucHJvcCA9PSAndW5pdHMnKTsKCiAgICAgICAgICAgICAgICAgIGdlcmJlci5wb2ludHMgPSBnZXJiZXIuY21kcy5maWx0ZXIoaSA9PiBpLmNvb3JkKS5tYXAoKHsgY29vcmQgfSkgPT4gbmV3IFBvaW50KGNvb3JkLngsIGNvb3JkLnkpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZygnQm9hcmRUb0dlcmJlciBzaWRlID0nLCBzaWRlLCAnIGZpbGUgPScsIGdlcmJlci5maWxlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3Qgc2lkZXMgPSAvKk9iamVjdC5mcm9tRW50cmllcyovIFsnYmFjaycsICdmcm9udCcsICdkcmlsbCcsICdvdXRsaW5lJ10ubWFwKHNpZGUgPT4gW3NpZGUsIHByb2plY3QuZ2VyYmVyW3NpZGVdLmZpbGVdKTsKICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKCcgIHNpZGVzID0gJywgc2lkZXMpOwogICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJyAgcHJvamVjdCA9ICcsIHByb2plY3QpOwogICAgICAgICAgICBsZXQgYWxsR2NvZGUgPSB7fTsKICAgICAgICAgICAgZm9yKGxldCBbc2lkZSwgZmlsZV0gb2Ygc2lkZXMpIHsKICAgICAgICAgICAgICBsZXQgZ2NvZGUgPSBhd2FpdCBHZXJiZXJUb0djb2RlKHByb2plY3QsIHsKICAgICAgICAgICAgICAgIHNpZGUsCiAgICAgICAgICAgICAgICBmaWxlLAogICAgICAgICAgICAgICAgbm9nNjQ6IHRydWUsCiAgICAgICAgICAgICAgICAnZmlsbC1vdXRsaW5lJzogdHJ1ZSwKICAgICAgICAgICAgICAgIHZvcm9ub2k6IHRydWUsCiAgICAgICAgICAgICAgICAvKid6ZXJvLXN0YXJ0JzogdHJ1ZSwqLyBub2c4MTogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGFsbEdjb2RlW3NpZGVdID0gZ2NvZGU7CiAgICAgICAgICAgICAgLy9wcm9qZWN0Lmdjb2RlW3NpZGVdID0gZ2NvZGUuZGF0YSAmJiBnY29kZS5kYXRhLmRhdGEgPyBnY29kZS5kYXRhLmRhdGEgOiBnY29kZS5kYXRhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZygnR2VyYmVyVG9HY29kZSBhbGxHY29kZSA9ICcsIGFsbEdjb2RlKTsKICAgICAgICAgICAgbGV0IGJib3g7CiAgICAgICAgICAgIGZvcihsZXQgc2lkZSBvZiBbJ291dGxpbmUnLCAnYmFjaycsICdmcm9udCcsICdkcmlsbCddKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCBnZXJiZXIgPSBwcm9qZWN0LmdlcmJlcltzaWRlXTsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gYWxsR2NvZGVbc2lkZV07CiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGdlcmJlci5maWxlIHx8IGFsbEdjb2RlLmRhdGEuZmlsZXNbc2lkZV07CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJ0dlcmJlclRvR2NvZGUgICcsIHsgZ2VyYmVyLCBkYXRhLCBmaWxlIH0pOwoKICAgICAgICAgICAgICAgIGlmKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgbGV0IGdjID0geyBkYXRhLCBmaWxlIH07CgogICAgICAgICAgICAgICAgICBpZihzaWRlICE9ICdkcmlsbCcpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2VkID0gZmlsZS5yZXBsYWNlKC9cLm5nYyQvLCAnLnN2ZycpOwogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5kZWJ1ZygncHJvY2Vzc2VkJywgcHJvY2Vzc2VkKTsKICAgICAgICAgICAgICAgICAgICBnYy5zdmcgPSBhd2FpdCBGZXRjaFVSTChwcm9jZXNzZWQpLnRoZW4oUmVzcG9uc2VEYXRhKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcG9zOwoKICAgICAgICAgICAgICAgICAgICBpZihnYy5zdmcpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmKChwb3MgPSBnYy5zdmcuaW5kZXhPZignPHN2ZyAnKSkgIT0gLTEpIGdjLnN2ZyA9IGdjLnN2Zy5zdWJzdHJpbmcocG9zKTsKCiAgICAgICAgICAgICAgICAgICAgICBpZihzaWRlID09ICdvdXRsaW5lJykgewogICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJ291dGxpbmUnLCBnYy5zdmcpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgeG1sRGF0YSA9IHRYbWwoZ2Muc3ZnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN2Z1BhdGggPSB0YWlsKHhtbERhdGFbMF0uY2hpbGRyZW4pLmNoaWxkcmVuWzBdOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9pbnRzID0gU1ZHLnBhdGhUb1BvaW50cyhzdmdQYXRoLmF0dHJpYnV0ZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJ3BvaW50czonLCBwb2ludHMpOwogICAgICAgICAgICAgICAgICAgICAgICBiYm94ID0gbmV3IFJlY3QobmV3IEJCb3goKS51cGRhdGUocG9pbnRzKSkucm91bmQoMC4wMDEpOwogICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJ2Jib3g6JywgYmJveCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIC8vICBjb25zb2xlLmRlYnVnKCdnYy5zdmcgJyxnYy5zdmcgKTsKICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXllciA9IEdldExheWVyKHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbWFrZUxheWVyTmFtZSgncHJvY2Vzc2VkJywgc2lkZSksCiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLWZpbGVuYW1lJzogcHJvY2Vzc2VkLAogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGU6IChwcm9qZWN0LCBwcm9wcyA9IHt9KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGcgPSBTVkcuY3JlYXRlKCdnJywgeyBpbm5lckhUTUw6IGdjLnN2ZywgLi4ucHJvcHMgfSwgcHJvamVjdC5zdmdFbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBnLmlubmVySFRNTCA9IGdjLnN2ZzsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZihnLmZpcnN0RWxlbWVudENoaWxkICYmIGcuZmlyc3RFbGVtZW50Q2hpbGQudGFnTmFtZSA9PSAnc3ZnJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN2ZyA9IGcuZmlyc3RFbGVtZW50Q2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ3dpZHRoJywgJ2hlaWdodCcsICd4bWxucycsICd4bWxuczp4bGluaycsICd2ZXJzaW9uJ10uZm9yRWFjaChhID0+IHN2Zy5yZW1vdmVBdHRyaWJ1dGUoYSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsIGJib3gpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50LmZpbmRBbGwoJ3BhdGgnLCBnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihlID0+IGUuc3R5bGVbJ2ZpbGwtb3BhY2l0eSddID09IDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChlID0+IChlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgWydmaWxsJywgJ3N0cm9rZSddLmZvckVhY2gobmFtZSA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudC5maW5kQWxsKGBbc3R5bGUqPSIke25hbWV9OiJdYCwgZykuZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlLnN0eWxlW25hbWVdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSAhPSAncmdiKDAsIDAsIDApJyAmJiB2YWx1ZSAhPSAnbm9uZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuc3VibGF5ZXJzID0gaGlzdG9ncmFtKEVsZW1lbnQud2FsayhsYXllci5kb20sIChlLCBhY2MpID0+IChlLnRhZ05hbWUuZW5kc1dpdGgoJ2cnKSA/IGFjYyA6IFsuLi5hY2MsIGVdKSwgW10pLAogICAgICAgICAgICAgICAgICAgICAgICBlID0+IGUuZ2V0QXR0cmlidXRlKCdzdHlsZScpLAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgTWFwKCksCiAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IG5ldyBTZXQoKQogICAgICAgICAgICAgICAgICAgICAgKTsqLwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKCdHZXJiZXJUb0djb2RlIHNpZGUgPScsIHNpZGUsICcgZ2MgPScsIGdjLmZpbGUsICcgc3ZnID0nLCBhYmJyZXZpYXRlKGdjLnN2ZykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgcHV0RXJyb3IoZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGdjb2RlKHByb2plY3QuZ2NvZGUpOwoKICAgICAgICAgICAgZnVuY3Rpb24gbWFrZUxheWVyTmFtZShuYW1lLCBzaWRlKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gc2lkZSA9PSAnZnJvbnQnID8gJ3QtJyA6IHNpZGUgPT0gJ2JhY2snID8gJ2ItJyA6ICcnOwogICAgICAgICAgICAgIHJldHVybiBjYW1lbGl6ZShwcmVmaXggKyBwYXRoLmJhc2VuYW1lKG5hbWUsIC9cLlteLl0rJC8pLnJlcGxhY2UobmV3IFJlZ0V4cChgXyR7c2lkZX1gKSwgJycpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTAwKSwKICAgICAgICAgICdkYXRhLXRvb2x0aXAnOiAnR2VuZXJhdGUgR2VyYmVyIFJTMjc0LVggQ0FNIGRhdGEnLAogICAgICAgICAgaW1hZ2U6ICdzdGF0aWMvc3ZnL2NuYy1vYnJhYmVuaS5zdmcnCiAgICAgICAgfSkKICAgICAgXSksCgogICAgICBoKENvbmRpdGlvbmFsLCB7IHNpZ25hbDogZ2NvZGUgfSwgWwogICAgICAgIGgoQnV0dG9uLCB7CiAgICAgICAgICBmbjogKCkgPT4gewogICAgICAgICAgICBjb25zdCBjb2xvcnMgPSB7CiAgICAgICAgICAgICAgZnJvbnQ6ICdoc2woMzAwLDEwMCUsNzAlKScsCiAgICAgICAgICAgICAgYmFjazogJ2hzbCgyMzAsMTAwJSw3MCUpJwogICAgICAgICAgICB9OwogICAgICAgICAgICBmb3IobGV0IHNpZGUgb2YgWydiYWNrJywgJ2Zyb250J10pIHsKICAgICAgICAgICAgICBsZXQgZ2MgPSBwcm9qZWN0Lmdjb2RlW3NpZGVdOwogICAgICAgICAgICAgIGlmKGdjKSB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoYCR7c2lkZX0gZ2NvZGUgZ2MgPWAsIGdjKTsKICAgICAgICAgICAgICAgIEdjb2RlVG9Qb2x5bGluZXMoZ2MuZGF0YSwgewogICAgICAgICAgICAgICAgICBmaWxsOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgY29sb3I6IGNvbG9yc1tzaWRlXSwKICAgICAgICAgICAgICAgICAgc2lkZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgJ2RhdGEtdG9vbHRpcCc6ICdDcmVhdGUgVm9yb25vaSBkaWFncmFtJywKICAgICAgICAgIGltYWdlOiAnc3RhdGljL3N2Zy92b3Jvbm9pLnN2ZycKICAgICAgICB9KQogICAgICBdKSwKICAgICAgaChUb2dnbGUsIHsKICAgICAgICBzdGF0ZTogc29ydE9yZGVyLAogICAgICAgIGltYWdlczogWydzdGF0aWMvc3ZnL3NvcnQtYXNjLnN2ZycsICdzdGF0aWMvc3ZnL3NvcnQtZGVzYy5zdmcnXSwKICAgICAgICAvL2Rpc2FibGU6IHRya2wodHJ1ZSksCiAgICAgICAgdmlzaWJsZTogb3BlbgogICAgICB9KSwKICAgICAgaChEeW5hbWljTGFiZWwsIHsKICAgICAgICBjbGFzc05hbWU6ICd2Y2VudGVyIHBhZC1scicsCiAgICAgICAgY2FwdGlvbjogZG9jdW1lbnRUaXRsZQogICAgICB9KSwKICAgICAgaChEeW5hbWljTGFiZWwsIHsKICAgICAgICBjbGFzc05hbWU6ICd2Y2VudGVyIHBhZC1scicsCiAgICAgICAgY2FwdGlvbjogZG9jdW1lbnRTaXplCiAgICAgIH0pLAogICAgICBoKENvbnN1bWVyLCB7fSkKICAgIF0pLAogICAgaCgKICAgICAgQnV0dG9uR3JvdXAsCiAgICAgIHsKICAgICAgICBjbGFzc05hbWU6ICdzbWFsbCcsCiAgICAgICAgb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIGxldCB7IGN1cnJlbnRUYXJnZXQsIHRhcmdldCB9ID0gZXZlbnQ7CiAgICAgICAgICBsZXQga2V5ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTsKCiAgICAgICAgICBjb25zb2xlLmxvZygnU29ydCBvcmRlciBjaGFuZ2VkJywga2V5KTsKICAgICAgICAgIGNvbmZpZy5zb3J0S2V5KGtleSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBbCiAgICAgICAgcHJvcHMgPT4KICAgICAgICAgIGgoJ2ltZycsIHsKICAgICAgICAgICAgc3JjOiAnc3RhdGljL3N2Zy9zb3J0LW5hbWUtMi5zdmcnLAogICAgICAgICAgICBhbHQ6ICdOYW1lJywKICAgICAgICAgICAgJ2RhdGEta2V5JzogJ25hbWUnLAogICAgICAgICAgICAuLi5wcm9wcwogICAgICAgICAgfSksCiAgICAgICAgcHJvcHMgPT4KICAgICAgICAgIGgoJ2ltZycsIHsKICAgICAgICAgICAgc3JjOiAnc3RhdGljL3N2Zy9zb3J0LXRpbWUtMi5zdmcnLAogICAgICAgICAgICBhbHQ6ICdNb2RpZmljYXRpb24gdGltZScsCiAgICAgICAgICAgICdkYXRhLWtleSc6ICdtdGltZScsCiAgICAgICAgICAgIC4uLnByb3BzCiAgICAgICAgICB9KSwKICAgICAgICBwcm9wcyA9PgogICAgICAgICAgaCgnaW1nJywgewogICAgICAgICAgICBzcmM6ICdzdGF0aWMvc3ZnL3NvcnQtc2l6ZS0yLnN2ZycsCiAgICAgICAgICAgIGFsdDogJ1NpemUnLAogICAgICAgICAgICAnZGF0YS1rZXknOiAnc2l6ZScsCiAgICAgICAgICAgIC4uLnByb3BzCiAgICAgICAgICB9KQogICAgICBdCiAgICApLAogICAgLyogIGgoJ2RpdicsIHsgc3R5bGU6IHsgZGlzcGxheTogJ2lubGluZS1mbGV4JywgZmxleEZsb3c6ICdyb3cnLCBhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsIGhlaWdodDogJzEwMHB4JywgcGFkZGluZzogJzEwcHgnIH0gfSwgWwogICAgICAgIGgoQ29sb3JXaGVlbCwge30pLAogICAgICAgIGgoU2xpZGVyLCB7CiAgICAgICAgICBtaW46IDAsCiAgICAgICAgICBtYXg6IDEwMCwKICAgICAgICAgIHZhbHVlOiAxMDAsCiAgICAgICAgICBvcmllbnQ6ICd2ZXJ0aWNhbCcsCiAgICAgICAgICBuYW1lOiAnUycsCiAgICAgICAgICBsZW5ndGg6ICcxMHB4JywKICAgICAgICAgIHN0eWxlOiB7IGZsZXg6ICcwIDEgYXV0bycgfSwKICAgICAgICAgIG9uQ2hhbmdlOiB2YWx1ZSA9PiB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3ZhbHVlOicsIHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBoKFNsaWRlciwgewogICAgICAgICAgbWluOiAwLAogICAgICAgICAgbWF4OiAxMDAsCiAgICAgICAgICBvcmllbnQ6ICd2ZXJ0aWNhbCcsCiAgICAgICAgICBuYW1lOiAnTCcsCiAgICAgICAgICBsZW5ndGg6ICcxMHB4JywKICAgICAgICAgIHN0eWxlOiB7IGZsZXg6ICcwIDEgYXV0bycgfSwKICAgICAgICAgIG9uQ2hhbmdlOiB2YWx1ZSA9PiB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3ZhbHVlOicsIHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICBdKSwqLwogICAgaChGaWxlTGlzdCwgewogICAgICBsaXN0VGFnOiAnbmF2JywKICAgICAgZmlsZXM6IHByb2plY3RzLAogICAgICBvbkFjdGl2ZTogb3BlbiwKICAgICAgb25DaGFuZ2U6IGRlYm91bmNlKGFzeW5jIChlLCBwLCBpKSA9PiBhd2FpdCBDaG9vc2VEb2N1bWVudChwLCBpKSwgNTAwMCwgewogICAgICAgIGxlYWRpbmc6IHRydWUKICAgICAgfSksCiAgICAgIGZpbHRlcjogY29uZmlnLnNlYXJjaEZpbHRlciwKICAgICAgc2hvd1NlYXJjaCwKICAgICAgY2hhbmdlSW5wdXQsCiAgICAgIGZvY3VzU2VhcmNoLAogICAgICBzb3J0S2V5LAogICAgICBzb3J0T3JkZXIsCiAgICAgIG1ha2VTb3J0Q29tcGFyZToga2V5ID0+CiAgICAgICAga2V5ID09ICduYW1lJyB8fCAha2V5CiAgICAgICAgICA/IGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgICAgICBsZXQgbmFtZUEgPSBhLm5hbWUsCiAgICAgICAgICAgICAgICBuYW1lQiA9IGIubmFtZTsKICAgICAgICAgICAgICBsZXQgZXh0QSA9IHBhdGguZXh0bmFtZShuYW1lQSksCiAgICAgICAgICAgICAgICBleHRCID0gcGF0aC5leHRuYW1lKG5hbWVCKTsKICAgICAgICAgICAgICBpZihleHRBID09ICcubGJyJyAmJiBleHRCICE9ICcubGJyJykgcmV0dXJuIC0xOwogICAgICAgICAgICAgIGlmKGV4dEEgIT0gJy5sYnInICYmIGV4dEIgPT0gJy5sYnInKSByZXR1cm4gMTsKICAgICAgICAgICAgICByZXR1cm4gbmFtZUEubG9jYWxlQ29tcGFyZShuYW1lQik7CiAgICAgICAgICAgIH0KICAgICAgICAgIDogZnVuY3Rpb24oYSwgYikgewogICAgICAgICAgICAgIGxldCB2YWx1ZUEgPSBhW2tleV0sCiAgICAgICAgICAgICAgICB2YWx1ZUIgPSBiW2tleV07CiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlQSA8IHZhbHVlQiA/IC0xIDogdmFsdWVBID4gdmFsdWVCID8gMSA6IDA7CiAgICAgICAgICAgIH0sCiAgICAgIGN1cnJlbnRJbnB1dDogY3VycmVudFNlYXJjaAogICAgfSksCgogICAgaChDcm9zc0hhaXIsIHsgLi4uY3Jvc3NoYWlyIH0pLAogICAgaChGbG9hdGluZ1BhbmVsLCB7IG9uU2l6ZTogY29uZmlnLmxvZ1NpemUsIGNsYXNzTmFtZTogJ25vLXNlbGVjdCcsIGlkOiAnY29uc29sZScgfSwgWwogICAgICAvKmgoZGl2LCB7fSwgWyAqLyBoKExvZ2dlciwge30pLAogICAgICBoKER1bXBlciwge30pLAogICAgICBoKENvbW1hbmRlciwgewogICAgICAgIG9uQ29tbWFuZDogY21kU3RyID0+IHsKICAgICAgICAgIGxldCBmbiA9IG5ldyBGdW5jdGlvbihgcmV0dXJuICR7Y21kU3RyfTtgKTsKCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdDb21tYW5kOicsIGNtZFN0cik7CiAgICAgICAgICBMb2dKUy5pbmZvKGA+ICR7Y21kU3RyfWApOwogICAgICAgICAgbGV0IHJlc3VsdCA9IGZuKCk7CiAgICAgICAgICBMb2dKUy5pbmZvKGA9ICR7dG9Tb3VyY2UocmVzdWx0KX1gKTsKICAgICAgICB9CiAgICAgIH0pIC8qXSkqLwogICAgXSksCiAgICBoKFNsb3QsIHsgbmFtZTogJ2xheWVycycgfSksCiAgICBoKENvbmRpdGlvbmFsLCB7IHNpZ25hbDogd2FudEF1dGhvcml6YXRpb24gfSwgaChBdXRob3JpemF0aW9uRGlhbG9nLCB7IG9uQXV0aDogY29uZmlnLmNyZWRlbnRpYWxzIH0pKSwKICAgIGgoUnVsZXIsIHsKICAgICAgY2xhc3M6ICdydWxlci1jb250YWluZXIgdmVydGljYWwgJywKICAgICAgaGFuZGxlQ2hhbmdlOiBlID0+IHsKICAgICAgICAvL2NvbnNvbGUubG9nKCdSdWxlciBjaGFuZ2VkOicsIGUpOwogICAgICB9LAogICAgICBzdHlsZTogewogICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICAgIHJpZ2h0OiAwCiAgICAgIH0KICAgIH0pCiAgXSk7CiAgY29uc29sZS5sb2coJ0RVTU1ZJywgKHdpbmRvdy5wcmVhY3RDb21wb25lbnQgPSBwcmVhY3RDb21wb25lbnQpKTsKICBSZWFjdC5yZW5kZXIocHJlYWN0Q29tcG9uZW50LCBFbGVtZW50LmZpbmQoJyNwcmVhY3QnKSk7CgogIGxldCBtb3ZlLCByZXNpemU7CiAgbGV0IGJveDsKICBjb250YWluZXIgPSBFbGVtZW50LmZpbmQoJyNtYWluJyk7CgogIGxldCB0b3VjaEhhbmRsZXIgPSB0cmtsKCk7CiAgbGV0IG1vdmVIYW5kbGVyID0gdHJrbCgpOwoKICAvL0VsZW1lbnQuZmluZCgnLnRyYW5zZm9ybWVkLWVsZW1lbnQtc2l6ZScpLnNldEF0dHJpYnV0ZSgnaWQnLCAndHJhbnNmb3JtZWQtZWxlbWVudCcpOwoKICBUb3VjaExpc3RlbmVyKHRvdWNoSGFuZGxlciwgeyBlbGVtZW50OiB3aW5kb3cgfSk7CgogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG1vdmVIYW5kbGVyKTsKCiAgbGV0IHJlY3RzID0gKHdpbmRvdy5yZWN0cyA9IG5ldyBNYXAoKSk7CiAgbGV0IGVsZW1zID0gKHdpbmRvdy5lbGVtcyA9IG5ldyBTZXQoKSk7CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgZXZlbnQgPT4gewogICAgd2luZG93LmVsZW1lbnRzID0gWy4uLmVsZW1zXS5maWx0ZXIoZSA9PiBlLnRhZ05hbWUgPT0gJ3BhdGgnKTsKICB9KTsKICBsZXQgY3NzID0gewogICAgY3Vyc29yOiB1bmRlZmluZWQsCiAgICAncG9pbnRlci1ldmVudHMnOiB1bmRlZmluZWQsCiAgICAndXNlci1zZWxlY3QnOiB1bmRlZmluZWQKICB9OwoKICAvL21vdmVIYW5kbGVyLnN1YnNjcmliZShNb3ZlRXZlbnQpOwoKICB0b3VjaEhhbmRsZXIuc3Vic2NyaWJlKFRvdWNoRXZlbnQpOwoKICBmdW5jdGlvbiBNb3ZlRXZlbnQoZXZlbnQsIHByZXZFdmVudCkgewogICAgY29uc3QgeyB4LCB5LCBjbGllbnRYLCBjbGllbnRZLCBpbmRleCwgYnV0dG9ucywgc3RhcnQsIHR5cGUsIHRhcmdldCB9ID0gZXZlbnQ7CiAgICB3aW5kb3cubGFzdE1vdmVFdmVudCA9IGV2ZW50OwogICAgZXZlbnQuZWxlbWVudHMgPSBkb2N1bWVudC5lbGVtZW50c0Zyb21Qb2ludCh4LCB5KTsKICAgIGZ1bmN0aW9uKiBXYWxrVXAoZSkgewogICAgICB3aGlsZShlKSB7CiAgICAgICAgeWllbGQgZTsKICAgICAgICBlID0gZS5wYXJlbnRFbGVtZW50OwogICAgICB9CiAgICB9CiAgICBsZXQgekluZGV4ID0gZmluZCgKICAgICAgbWFwKFdhbGtVcChldmVudC50YXJnZXQpLCBlID0+IGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpKSwKICAgICAgeiA9PiAvXlswLTldLy50ZXN0KHopCiAgICApOwogICAgaWYoekluZGV4ID4gMCkgY2xlYXIoZXZlbnQuZWxlbWVudHMpOwogICAgZm9yKGxldCBlIG9mIGV2ZW50LmVsZW1lbnRzKQogICAgICBFbGVtZW50LndhbGtVcChlKQogICAgICAgIC5zbGljZSgxKQogICAgICAgIC5mb3JFYWNoKHAgPT4gcmVtb3ZlKGV2ZW50LmVsZW1lbnRzLCBwKSk7CiAgICByZW1vdmUoZXZlbnQuZWxlbWVudHMsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CgogICAgZXZlbnQubGF5ZXJzID0gbmV3IE1hcCgKICAgICAgZXZlbnQuZWxlbWVudHMubWFwKGUgPT4gWwogICAgICAgIGUsCiAgICAgICAgRWxlbWVudC53YWxrVXAoZSwgZSA9PiB7CiAgICAgICAgICBpZihlLmhhc0F0dHJpYnV0ZSgnZGF0YS1sYXllcicpKSB0aHJvdyBlLmdldEF0dHJpYnV0ZSgnZGF0YS1sYXllcicpOwogICAgICAgIH0pCiAgICAgIF0pCiAgICApOwogICAgZXZlbnQuY29sb3JzID0gbmV3IE1hcCgpOwogICAgZm9yKGxldCBbZSwgbGF5ZXJdIG9mIGV2ZW50LmxheWVycykgewogICAgICBpZighbGF5ZXIgfHwgLyhNZWFzdXJlfERpbWVuc2lvbikvLnRlc3QobGF5ZXIpKSBjb250aW51ZTsKICAgICAgbGV0IGwgPSBGaW5kTGF5ZXIobGF5ZXIpOwogICAgICBpZihsKSBldmVudC5jb2xvcnMuc2V0KGUsIGwuY29sb3Iuc2V0T3BhY2l0eSgwLjgpIHx8ICcjMDAwJyk7CiAgICB9CiAgICBldmVudC5jbGFzc2VzID0gbmV3IE1hcCgKICAgICAgZXZlbnQuZWxlbWVudHMubWFwKGUgPT4gWwogICAgICAgIGUsCiAgICAgICAgaWZUaGVuRWxzZSgKICAgICAgICAgIHYgPT4gdiwKICAgICAgICAgIGwgPT4gbC5tYXAoZSA9PiBlLmNsYXNzTGlzdC52YWx1ZSksCiAgICAgICAgICAoKSA9PiAnJwogICAgICAgICkoRWxlbWVudC53YWxrVXAoZSwgKGUsIGRlcHRoKSA9PiAhZS5jbGFzc0xpc3QudmFsdWUuc3RhcnRzV2l0aCgnYXNwZWN0JykgJiYgZS5jbGFzc0xpc3QudmFsdWUpKQogICAgICBdKQogICAgKTsKICAgIHJlbW92ZUlmKGV2ZW50LmNsYXNzZXMsIGNsYXNzZXMgPT4gY2xhc3NlcyA9PSAnJyk7CiAgICByZW1vdmVJZihldmVudC5lbGVtZW50cywgZSA9PiBlLnRhZ05hbWUgPT0gJ3BvbHlsaW5lJyk7CiAgICByZW1vdmVJZihldmVudC5lbGVtZW50cywgZSA9PiAhKGV2ZW50LmNsYXNzZXMuaGFzKGUpIHx8IGV2ZW50LmNvbG9ycy5oYXMoZSkpKTsKICAgIGNvbnN0IGdyb3VwID0KICAgICAgcHJvamVjdCAmJgogICAgICBwcm9qZWN0Lm1ha2VHcm91cCAmJgogICAgICBwcm9qZWN0Lm1ha2VHcm91cCh7CiAgICAgICAgaWQ6ICdyZWN0cycsCiAgICAgICAgc3Ryb2tlOiAnI2ZmNmYwMCcsCiAgICAgICAgJ3N0cm9rZS13aWR0aCc6IDAuMTI3LAogICAgICAgIGZpbGw6ICdub25lJywKICAgICAgICAnc3Ryb2tlLWxpbmVjYXAnOiAnc3F1YXJlJywKICAgICAgICAndmVjdG9yLWVmZmVjdCc6ICdub24tc2NhbGluZy1zdHJva2UnLAogICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdub25lJwogICAgICB9KTsKCiAgICBpZihwcmV2RXZlbnQgJiYgZ3JvdXApIHsKICAgICAgbGV0IHUgPSB1bmlvbihwcmV2RXZlbnQuZWxlbWVudHMsIGV2ZW50LmVsZW1lbnRzLCAoYSwgYikgPT4gYS5pc1NhbWVOb2RlKGIpKTsKICAgICAgbGV0IFtyZW1vdmUsIGFkZF0gPSBkaWZmZXJlbmNlKHByZXZFdmVudC5lbGVtZW50cywgZXZlbnQuZWxlbWVudHMsIChhLCBiKSA9PiBhLmZpbmRJbmRleChOb2RlLnByb3RvdHlwZS5pc1NhbWVOb2RlLCBiKSAhPSAtMSk7CgogICAgICAvLyAgY29uc29sZS5sb2coJ2RpZmZlcmVuY2U6JywgW3JlbW92ZSxhZGRdLCAndW5pb246JywgdSk7CiAgICAgIC8vICBjb25zb2xlLmxvZygnYWRkOicsIGFkZCk7CgogICAgICBjb25zdCBiYm94ZXMgPSBuZXcgTWFwKGFkZC5tYXAoZSA9PiBbZSwgbmV3IFJlY3QoZS5nZXRCQm94ID8gZS5nZXRCQm94KCkgOiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKV0pKTsKCiAgICAgIGZvcihsZXQgW2UsIHJlY3RdIG9mIGJib3hlcykgewogICAgICAgIGxldCB0cmFuc2Zvcm1zID0KICAgICAgICAgIEVsZW1lbnQud2Fsa1VwKGUsIChwLCBkLCBzZXQsIHN0b3ApID0+CiAgICAgICAgICAgIHAucGFyZW50RWxlbWVudCA9PSBudWxsIHx8IHAucGFyZW50RWxlbWVudC5pc1NhbWVOb2RlKHAub3duZXJTVkdFbGVtZW50KSA/IHN0b3AoKSA6IHAuaGFzQXR0cmlidXRlKCd0cmFuc2Zvcm0nKSAmJiBzZXQocC5nZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpKQogICAgICAgICAgKSB8fCBbXTsKICAgICAgICB0cmFuc2Zvcm1zID0gdHJhbnNmb3Jtcy5yZXZlcnNlKCk7CiAgICAgICAgZWxlbXMuYWRkKGUpOwogICAgICAgIGxldCBwcm9wcyA9IHsKICAgICAgICAgIC4uLnJlY3Qucm91bmQoMC4wMDEpLnRvT2JqZWN0KCksCiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybXMuam9pbignICcpCiAgICAgICAgfTsKICAgICAgICByZWN0cy5zZXQoZSwgWwogICAgICAgICAgLy8gU1ZHLmNyZWF0ZSgncmVjdCcsIHsgLi4ucHJvcHMsIHN0cm9rZTogJyMwMDAnLCAnc3Ryb2tlLXdpZHRoJzogMC4xMjcgKiAyIH0sIGdyb3VwKSwKICAgICAgICAgIFNWRy5jcmVhdGUoJ3JlY3QnLCB7IC4uLnByb3BzLCAnc3Ryb2tlLWRhc2hhcnJheSc6ICcwLjUwOCAwLjUwOCcsIHN0cm9rZTogJyMwMDAnIH0sIGdyb3VwKSwKICAgICAgICAgIFNWRy5jcmVhdGUoCiAgICAgICAgICAgICdyZWN0JywKICAgICAgICAgICAgewogICAgICAgICAgICAgIC4uLnByb3BzLAogICAgICAgICAgICAgICdzdHJva2UtZGFzaGFycmF5JzogJzAuNTA4IDAuNTA4JywKICAgICAgICAgICAgICAnc3Ryb2tlLWRhc2hvZmZzZXQnOiAwLjUwOCwKICAgICAgICAgICAgICBzdHJva2U6ICcjZmYwJwogICAgICAgICAgICB9LAogICAgICAgICAgICBncm91cAogICAgICAgICAgKQogICAgICAgIF0pOwogICAgICB9CiAgICAgIC8qCiAgICAgIGFkZC5mb3JFYWNoKGUgPT4gewogICAgICAgIGVsZW1zLmFkZChlKTsKICAgICAgICByZWN0cy5zZXQoZSwgZGV2dG9vbHMucmVjdChuZXcgUmVjdChlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSwgZXZlbnQuY29sb3JzLmdldChlKSB8fCAnIzAwMDAwMDAwJywgZXZlbnQuY29sb3JzLmdldChlKSkpOwogICAgICB9KTsqLwogICAgICByZW1vdmUuZm9yRWFjaChlID0+IHsKICAgICAgICBsZXQgcmVjdCA9IHJlY3RzLmdldChlKTsKICAgICAgICByZWN0cy5kZWxldGUoZSk7CgogICAgICAgIGlmKEFycmF5LmlzQXJyYXkocmVjdCkpIHJlY3QuZm9yRWFjaChlID0+IEVsZW1lbnQucmVtb3ZlKGUpKTsKICAgICAgfSk7CgogICAgICBpZihiYm94ZXMuc2l6ZSkgewogICAgICAgIC8qIGNvbnNvbGUubG9nKCdldmVudC5lbGVtZW50czonLCBldmVudC5lbGVtZW50cyk7CiAgICAgICAgLy9jb25zb2xlLmxvZygnZXZlbnQuY2xhc3NlczonLCBldmVudC5jbGFzc2VzKTsKICAgICAgICAvL2NvbnNvbGUubG9nKCdldmVudC50YXJnZXQ6JywgekluZGV4KTsqLwogICAgICAgIC8vICBjb25zb2xlLmxvZygncmVjdHM6JywgY2xvbmUoYmJveGVzKSk7CiAgICAgIH0KICAgIH0KICB9CiAgZnVuY3Rpb24gVG91Y2hFdmVudChldmVudCkgewogICAgY29uc3QgeyB4LCB5LCBpbmRleCwgYnV0dG9ucywgc3RhcnQsIHR5cGUsIHRhcmdldCB9ID0gZXZlbnQ7CiAgICAvLyAgY29uc29sZS5sb2coJ3RvdWNoSGFuZGxlcicsIGV2ZW50KTsKICAgIGlmKHR5cGUuZW5kc1dpdGgoJ2VuZCcpIHx8IHR5cGUuZW5kc1dpdGgoJ3VwJykpIHJldHVybiBjYW5jZWwoKTsKICAgIGlmKGV2ZW50LmJ1dHRvbnMgPT09IDAgJiYgdHlwZS5lbmRzV2l0aCgnbW92ZScpKSByZXR1cm4gY2FuY2VsKCk7CiAgICAvLyBpZihldmVudC5pbmRleCA+IDApIGNvbnNvbGUubG9nKCd0b3VjaCcsIHsgeCwgeSwgaW5kZXgsIGJ1dHRvbnMsIHR5cGUsIHRhcmdldCB9LCBjb250YWluZXIpOwogICAgaWYoIW1vdmUgJiYgIXJlc2l6ZSkgewogICAgICBsZXQgZWxlbUlkOwogICAgICAvLyAgY29uc29sZS5sb2coJ3RhcmdldDonLCB0YXJnZXQpOwogICAgICBib3ggPSAoZSA9PiB7CiAgICAgICAgZG8gewogICAgICAgICAgZWxlbUlkID0gZS5nZXRBdHRyaWJ1dGUoJ2lkJyk7CiAgICAgICAgICBpZihbJ2ZlbmNlJywgJ2NvbnNvbGUnXS5pbmRleE9mKGVsZW1JZCkgIT0gLTEpIHJldHVybiBlOwogICAgICAgIH0gd2hpbGUoKGUgPSBlLnBhcmVudEVsZW1lbnQpKTsKICAgICAgfSkodGFyZ2V0KTsKICAgICAgLy9jb25zb2xlLmxvZygnYm94OicsIGJveCk7CiAgICAgIGlmKGV2ZW50LmJ1dHRvbnMgJiYgZXZlbnQuYnV0dG9ucyAhPSAxKSB7CiAgICAgICAgaWYoJ3ByZXZlbnREZWZhdWx0JyBpbiBldmVudCkgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBpZighcmVzaXplICYmIGJveCkgewogICAgICAgICAgbGV0IGVkZ2VzID0gRWxlbWVudC5yZWN0KGJveCkudG9Qb2ludHMoKTsKICAgICAgICAgIGxldCBjb3JuZXJzID0gW2VkZ2VzWzBdLCBlZGdlc1syXV0ubWFwKChwLCBpKSA9PiBbaSwgcC5kaXN0YW5jZShuZXcgUG9pbnQoc3RhcnQpLnN1bSh4LCB5KSksIHBdKTsKICAgICAgICAgIGxldCBlZGdlID0gY29ybmVycy5zb3J0KChhLCBiKSA9PiBhWzFdIC0gYlsxXSlbMF07CiAgICAgICAgICB3aW5kb3cucmVzaXplID0gcmVzaXplID0gRWxlbWVudC5yZXNpemVSZWxhdGl2ZShib3gsIG51bGwsIGVkZ2VbMF0gPyAtMSA6IDEsIHNpemUgPT4gewogICAgICAgICAgICAvLyAgICBjb25zb2xlLmxvZygncmVzaXplUmVsYXRpdmU6JywgeyBlbGVtSWQsIHNpemUgfSk7CiAgICAgICAgICAgIGlmKGVsZW1JZCA9PSAnY29uc29sZScpIGNvbmZpZy5sb2dTaXplKHNpemUpOwogICAgICAgICAgfSk7CiAgICAgICAgICBib3guc3R5bGUuY3Vyc29yID0gYG53c2UtcmVzaXplYDsKICAgICAgICAgIC8vY29uc29sZS5sb2coJ1JFU0laRTonLCB7IHJlc2l6ZSwgYm94LCBjb3JuZXJzLCBlZGdlIH0pOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjYW5jZWwoKTsKICAgICAgfQoKICAgICAgLy8gICAgICAgIGxldCBib3ggPSBFbGVtZW50LmZpbmQoJyNtYWluJykuZmlyc3RFbGVtZW50Q2hpbGQ7CiAgICAgIGNvbnN0IGlkID0gYm94ICYmIGJveC5nZXRBdHRyaWJ1dGUoJ2lkJyk7CgogICAgICBpZihpZCA9PSAnY29uc29sZScpIHsKICAgICAgICBjb25zdCByZWN0cyA9IFt0cnVlLCBmYWxzZV0ubWFwKGJvcmRlciA9PiBFbGVtZW50LnJlY3QoYm94LCB7IGJvcmRlciB9KSk7CiAgICAgICAgbGV0IHAgPSBuZXcgUG9pbnQoc3RhcnQueCArIHgsIHN0YXJ0LnkgKyB5KTsKICAgICAgICAvL2NvbnNvbGUubG9nKCcnLCBwKTsKICAgICAgICBjb25zdCBpbnNpZGUgPSByZWN0cy5tYXAociA9PiByLmluc2lkZShwKSk7CiAgICAgICAgY29uc3QgaW5Cb3JkZXIgPSBpbnNpZGVbMF0gJiYgIWluc2lkZVsxXTsKICAgICAgICBmdW5jdGlvbiBtb2QobiwgbSkgewogICAgICAgICAgcmV0dXJuICgobiAlIG0pICsgbSkgJSBtOwogICAgICAgIH0KICAgICAgICBsZXQgcmFkID0gcC5kaWZmKHJlY3RzWzBdLmNlbnRlcikudG9BbmdsZSgpOwogICAgICAgIGxldCBkZWcgPSBNYXRoLnJvdW5kKChyYWQgKiAxODApIC8gTWF0aC5QSSk7CiAgICAgICAgbGV0IHNlY3RvciA9IG1vZChNYXRoLmZsb29yKCgoMTgwIC0gZGVnKSAqIDgpIC8gMzYwKSwgOCk7CiAgICAgICAgbGV0IGRpcmVjdGlvbnMgPSBbJ24nLCAnbmUnLCAnZScsICdzZScsICdzJywgJ3N3JywgJ3cnLCAnbncnXTsKICAgICAgICBsZXQgbm9ybSA9IFBvaW50LmZyb21BbmdsZShyYWQsIDEpOwogICAgICAgIC8vY29uc29sZS5sb2coJ2JveDogJywgaWQsIC4uLmluc2lkZSwgaW5Cb3JkZXIsIHAsIHsgc2VjdG9yLCBkZWcgfSk7CiAgICAgICAgbGV0IGNvbXBhc3MgPSBkaXJlY3Rpb25zW3NlY3Rvcl07CiAgICAgIH0KICAgICAgaWYoYm94KSB7CiAgICAgICAgbGV0IHRyYW5zbGF0aW9uID0gbmV3IFRyYW5zbGF0aW9uKCk7CiAgICAgICAgbGV0IHRyYW5zZm9ybUxpc3QgPSBuZXcgVHJhbnNmb3JtYXRpb25MaXN0KFt0cmFuc2xhdGlvbl0pLmNvbmNhdCh0cmFuc2Zvcm0oKSk7CgogICAgICAgIGxldCBzZXRTdHlsZSA9IG9uY2UoKCkgPT4KICAgICAgICAgIEVsZW1lbnQuc2V0Q1NTKGJveCwgewogICAgICAgICAgICBjdXJzb3I6ICdtb3ZlJywKICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLAogICAgICAgICAgICAndXNlci1zZWxlY3QnOiAnbm9uZScKICAgICAgICAgIH0pCiAgICAgICAgKTsKCiAgICAgICAgd2luZG93Lm1vdmUgPSBtb3ZlID0gRWxlbWVudC5tb3ZlUmVsYXRpdmUoYm94LCBudWxsLCBpZCA9PSAnY29uc29sZScgPyBbJ3JpZ2h0JywgJ2JvdHRvbSddIDogWydsZWZ0JywgJ3RvcCddLCAocG9zLCBsYXN0LCBmaXJzdCkgPT4gewogICAgICAgICAgaWYocG9zICYmIGZpcnN0KSB7CiAgICAgICAgICAgIGxldCByZWwgPSBQb2ludC5kaWZmKHBvcywgZmlyc3QpOwogICAgICAgICAgICBpZihyZWwuZGlzdGFuY2VTcXVhcmVkKCkgPiAwKSB7CiAgICAgICAgICAgICAgc2V0U3R5bGUoKTsKCiAgICAgICAgICAgICAgdHJhbnNsYXRpb24ueCA9IHJlbC54OwogICAgICAgICAgICAgIHRyYW5zbGF0aW9uLnkgPSByZWwueTsKICAgICAgICAgICAgICB0cmFuc2Zvcm0odHJhbnNmb3JtTGlzdC5jb2xsYXBzZSgpKTsKICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdUb3VjaEhhbmRsZXIgdHJhbnNmb3JtOicsIHRyYW5zZm9ybSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYoKG1vdmUgfHwgcmVzaXplKSAmJiBldmVudC5idXR0b25zID09IDApIHsKICAgICAgcmV0dXJuIGNhbmNlbCgpOwogICAgfQoKICAgIGlmKGV2ZW50LmluZGV4ID4gMCkgewogICAgICBsZXQgcmVsID0gbmV3IFBvaW50KGV2ZW50KS5zdWIoZXZlbnQuc3RhcnQpOwogICAgICBsZXQgYWJzb2x1dGUgPSBuZXcgUG9pbnQoc3RhcnQpLmFkZChyZWwpOwoKICAgICAgaWYocmVzaXplKSB7CiAgICAgICAgaWYoZXZlbnQuYnV0dG9ucyA+IDApIHJlc2l6ZSgtcmVsLngsIC1yZWwueSk7CiAgICAgICAgZWxzZSByZXNpemUgPSByZXNpemUuanVtcCgpOwogICAgICB9IGVsc2UgaWYobW92ZSkgewogICAgICAgIC8qICB3aW5kb3cuY3Jvc3NoYWlyLnNob3cgPSB0cnVlOwogICAgICAgICAgd2luZG93LmNyb3NzaGFpci5wb3NpdGlvbiA9IGFic29sdXRlOyovCgogICAgICAgIC8vICAgICAgICAgIGNvbnNvbGUubG9nKCdtb3ZlJywgeyByZWwsIGFic29sdXRlIH0pOwogICAgICAgIGlmKGV2ZW50LmJ1dHRvbnMgPiAwKSBtb3ZlKHJlbC54LCByZWwueSk7CiAgICAgICAgZWxzZSBtb3ZlID0gbW92ZS5qdW1wKCk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgbW92ZSA9IG51bGw7CiAgICAgIHJlc2l6ZSA9IG51bGw7CiAgICAgIHdpbmRvdy5jcm9zc2hhaXIuc2hvdyA9IGZhbHNlOwoKICAgICAgaWYoYm94ICYmIGJveC5zdHlsZSkgRWxlbWVudC5zZXRDU1MoYm94LCBjc3MpOwogICAgICAvKnJldHVybiovIGV2ZW50LmNhbmNlbCgpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZSkgewogICAgY29uc3QgeyB4LCB5LCBpbmRleCwgYnV0dG9ucywgc3RhcnQsIHR5cGUsIHRhcmdldCB9ID0gZXZlbnQ7CiAgICBsZXQgcmVjdCA9IEVsZW1lbnQucmVjdCgnLnRyYW5zZm9ybWVkLWVsZW1lbnQtc2l6ZScpOwogICAgbGV0IGNvbnMgPSBFbGVtZW50LnJlY3QoJyNjb25zb2xlJyk7CiAgICBpZihyZWN0ICYmIGNvbnMpIGlmIChyZWN0Lmluc2lkZShldmVudCkgJiYgIWNvbnMuaW5zaWRlKGV2ZW50KSkgcmV0dXJuIHRydWU7CiAgICBpZihlLnNoaWZ0S2V5ICYmIGUuYWx0S2V5KSByZXR1cm4gdHJ1ZTsKICAgIC8vY29uc29sZS5sb2coJ29uY29udGV4dG1lbnUnLCAgZXZlbnQpOwogICAgcmV0dXJuIGZhbHNlOwogIH07CiAgd2luZG93LnByb2Nlc3NFdmVudHMgPSBhc3luYyBmdW5jdGlvbiBldmVudExvb3AoKSB7CiAgICBmb3IgYXdhaXQobGV0IGUgb2YgbmV3IEV2ZW50SXRlcmF0b3IoJ3RvdWNoJykpIHsKICAgICAgY29uc3QgewogICAgICAgIGFsdEtleSwKICAgICAgICBidWJibGVzLAogICAgICAgIGJ1dHRvbiwKICAgICAgICBidXR0b25zLAogICAgICAgIGNhbmNlbEJ1YmJsZSwKICAgICAgICBjYW5jZWxhYmxlLAogICAgICAgIGNsaWVudFgsCiAgICAgICAgY2xpZW50WSwKICAgICAgICBjb21wb3NlZCwKICAgICAgICBjdHJsS2V5LAogICAgICAgIGRldGFpbCwKICAgICAgICBldmVudFBoYXNlLAogICAgICAgIGZyb21FbGVtZW50LAogICAgICAgIGlzVHJ1c3RlZCwKICAgICAgICBsYXllclgsCiAgICAgICAgbGF5ZXJZLAogICAgICAgIG1ldGFLZXksCiAgICAgICAgbW92ZW1lbnRYLAogICAgICAgIG1vdmVtZW50WSwKICAgICAgICBvZmZzZXRYLAogICAgICAgIG9mZnNldFksCiAgICAgICAgcGFnZVgsCiAgICAgICAgcGFnZVksCiAgICAgICAgcGF0aCwKICAgICAgICByZWdpb24sCiAgICAgICAgcmVsYXRlZFRhcmdldCwKICAgICAgICByZXR1cm5WYWx1ZSwKICAgICAgICBzY3JlZW5YLAogICAgICAgIHNjcmVlblksCiAgICAgICAgc2hpZnRLZXksCiAgICAgICAgc3JjRWxlbWVudCwKICAgICAgICB0YXJnZXQsCiAgICAgICAgdGltZVN0YW1wLAogICAgICAgIHRvRWxlbWVudCwKICAgICAgICB0eXBlLAogICAgICAgIHZpZXcsCiAgICAgICAgd2hpY2gsCiAgICAgICAgeCwKICAgICAgICB5LAogICAgICAgIC4uLmV2ZW50CiAgICAgIH0gPSBlOwogICAgICAvLyBMb2dKUy5pbmZvKGAke3R5cGV9IGAgKyAvKiB0b1NvdXJjZShlKSsgKi8gYCAke3h9LCR7eX0g4oaSICR7RWxlbWVudC54cGF0aCh0YXJnZXQpfWApOwogICAgfQogIH07CiAgcHJvY2Vzc0V2ZW50cygpOwoKICAvLyAgZXZlbnRMb29wKCk7CgogIHdpbmRvdy5zdHlsZXMgPSBDU1MuY3JlYXRlKCdoZWFkJyk7CgogIC8qIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7CiAgICBjb25zdCB7IGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXkgfSA9IGV2ZW50OwoKICAgIGlmKHRydWUgfHwgY3RybEtleSB8fCBzaGlmdEtleSB8fCBhbHRLZXkgfHwgbWV0YUtleSkgewogICAgICBjb25zdCB7IGtleSwgY29kZSwga2V5Q29kZSB9ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHsgdGFyZ2V0LCBjdXJyZW50VGFyZ2V0IH0gPSBldmVudDsKICAgICAgLy9jb25zb2xlLmxvZygna2V5ZG93bjogJywgKHdpbmRvdy5rZXlFdmVudCA9IGV2ZW50KSk7CiAgICB9CiAgfSk7Ki8KCiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXZlbnQgPT4gewogICAgY29uc3QgeyB3aGVlbERlbHRhLCBkZWx0YU1vZGUsIGRlbHRhWCwgZGVsdGFZLCBzY3JlZW5YLCBzY3JlZW5ZLCBjbGllbnRYLCBjbGllbnRZLCBwYWdlWCwgcGFnZVksIHgsIHksIG9mZnNldFgsIG9mZnNldFksIGxheWVyWCwgbGF5ZXJZIH0gPSBldmVudDsKCiAgICB3aW5kb3cud2hlZWxFdmVudCA9IGV2ZW50OwoKICAgIGNvbnN0IGNsaWVudEFyZWEgPSBFbGVtZW50LnJlY3QoJ2JvZHkgPiBkaXYnKTsKICAgIGNvbnN0IHNpZGVCYXIgPSBFbGVtZW50LnJlY3QoJy5zaWRlYmFyJyk7CgogICAgaWYoc2lkZUJhci54MiA+IGNsaWVudEFyZWEueDEpIHsKICAgICAgY2xpZW50QXJlYS53aWR0aCAtPSBzaWRlQmFyLngyOwogICAgICBjbGllbnRBcmVhLnggPSBzaWRlQmFyLngyOwogICAgICBjbGllbnRBcmVhLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggLSBjbGllbnRBcmVhLng7CiAgICB9CiAgICBjbGllbnRBcmVhLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgIGNsaWVudEFyZWEueCArPSBjb250YWluZXIucGFyZW50RWxlbWVudC5zY3JvbGxMZWZ0OwoKICAgIGNvbnN0IGNsaWVudENlbnRlciA9IGNsaWVudEFyZWEuY2VudGVyOwogICAgY29uc3QgeyB0YXJnZXQsIGN1cnJlbnRUYXJnZXQsIGJ1dHRvbnMsIGFsdEtleSwgY3RybEtleSwgc2hpZnRLZXkgfSA9IGV2ZW50OwogICAgY29uc3QgcG9zID0gbmV3IFBvaW50KGNsaWVudFgsIGNsaWVudFkpOwoKICAgIGlmKAogICAgICBFbGVtZW50LndhbGtVcCh0YXJnZXQpCiAgICAgICAgLm1hcChlID0+IFsuLi5lLmNsYXNzTGlzdF0pCiAgICAgICAgLmZsYXQoKQogICAgICAgIC5pbmRleE9mKCdydWxlci1jb250YWluZXInKSAhPSAtMQogICAgKQogICAgICByZXR1cm47CgogICAgLy9jb25zb2xlLmxvZygnd2hlZWw6JywgeyBkZWx0YVksIGRlbHRhTW9kZSwgd2hlZWxEZWx0YSwgdGFyZ2V0IH0pOwoKICAgIGlmKCFwb3MuaW5zaWRlKGNsaWVudEFyZWEpKSByZXR1cm47CgogICAgY29uc3QgZHkgPSBNYXRoLnNpZ24oZXZlbnQuZGVsdGFZKSAqIDUzOwoKICAgIGNvbnN0IHdoZWVsUG9zID0gLWR5LnRvRml4ZWQoMik7CiAgICBsZXQgem9vbVZhbCA9IGNvbmZpZy56b29tTG9nKCk7CgogICAgem9vbVZhbCA9IGFsdEtleSB8fCBjdHJsS2V5IHx8IHNoaWZ0S2V5ID8gMCA6IGNsYW1wKC0xMDAsIDMwMCwgem9vbVZhbCArIHdoZWVsUG9zICogMC4xKTsKICAgIGNvbmZpZy56b29tTG9nKHpvb21WYWwpOwogICAgQWRqdXN0Wm9vbSgpOwogIH0pOwoKICAvL2NvbnNvbGUuZXJyb3IoJ0FwcE1haW4gZG9uZScpOwoKICAvL2NvbnNvbGUubG9nKGdsb2JhbFRoaXMpOwoKICAvKiAgZm9yKGxldCBwYXRoIG9mIFsuLi5FbGVtZW50LmZpbmRBbGwoJ3BhdGgnKV0pIHsKICAgIGxldCBwb2ludHMgPSBuZXcgUG9pbnRMaXN0KFsuLi5TVkcucGF0aEl0ZXJhdG9yKHBhdGgsIDMwLCBwID0+IHAudG9GaXhlZCgzKSldKTsKICB9Ki8KfSk7CmNvbnN0IE1vZHVsZSA9IHsKICBub0luaXRpYWxSdW46IHRydWUsCiAgb25SdW50aW1lSW5pdGlhbGl6ZWQ6ICgpID0+IHsKICAgIC8vY29uc29sZS5sb2coJ2luaXRpYWxpemVkJyk7CiAgICBsZXQgbXlTdHJpbmcgPSBwcm9tcHQoJ0VudGVyIGEgc3RyaW5nOicpOwogICAgTW9kdWxlLmNhbGxNYWluKFtteVN0cmluZ10pOwogIH0sCiAgcHJpbnQ6IHR4dCA9PiBhbGVydChgVGhlIE1ENSBoYXNoIGlzOiAke3R4dH1gKQp9OwoAAAAAAAAAAIl6AQAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuwkAAAAAAAC7CQAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAJEJAAAAAAAAkgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkQkAAAAAAACRCQAAAAAAAAAAAAAAAPC/"
				],
				[
					114,
					1,
					"",
					null,
					"AQAAAJIJAAAAAAAAnQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkgkAAAAAAACSCQAAAAAAAAAAAAAAAPC/"
				],
				[
					115,
					1,
					"left_delete",
					null,
					"AQAAAJwJAAAAAAAAnAkAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAnQkAAAAAAACdCQAAAAAAAAAAAAAAAPC/"
				],
				[
					129,
					1,
					"",
					null,
					"AQAAAA7RAAAAAAAAGdEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADtEAAAAAAAAO0QAAAAAAAAAAAAAAAPC/"
				],
				[
					130,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAABnRAAAAAAAAGtEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGdEAAAAAAAAZ0QAAAAAAAAAAAAAAAPC/"
				],
				[
					131,
					1,
					"left_delete",
					null,
					"AQAAABnRAAAAAAAAGdEAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAGtEAAAAAAAAa0QAAAAAAAAAAAAAAAPC/"
				],
				[
					145,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAJwJAAAAAAAAnQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnAkAAAAAAACcCQAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJ0JAAAAAAAAngkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnQkAAAAAAACdCQAAAAAAAAAAAAAAAPC/"
				],
				[
					147,
					1,
					"paste",
					null,
					"AQAAAJ4JAAAAAAAAqAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAngkAAAAAAACeCQAAAAAAAAAAAAAAAPC/"
				],
				[
					160,
					1,
					"insert",
					{
						"characters": "build"
					},
					"BQAAABrRAAAAAAAAG9EAAAAAAAAAAAAAG9EAAAAAAAAc0QAAAAAAAAAAAAAc0QAAAAAAAB3RAAAAAAAAAAAAAB3RAAAAAAAAHtEAAAAAAAAAAAAAHtEAAAAAAAAf0QAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGtEAAAAAAAAa0QAAAAAAAAAAAAAAAPC/"
				],
				[
					161,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAB/RAAAAAAAAINEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAH9EAAAAAAAAf0QAAAAAAAAAAAAAAAPC/"
				],
				[
					163,
					1,
					"insert",
					{
						"characters": "XPath,"
					},
					"BgAAAB/RAAAAAAAAINEAAAAAAAAAAAAAINEAAAAAAAAh0QAAAAAAAAAAAAAh0QAAAAAAACLRAAAAAAAAAAAAACLRAAAAAAAAI9EAAAAAAAAAAAAAI9EAAAAAAAAk0QAAAAAAAAAAAAAk0QAAAAAAACXRAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAH9EAAAAAAAAf0QAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "eagle-shell.js",
			"settings":
			{
				"buffer_size": 39474,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					17,
					2,
					"right_delete",
					null,
					"AgAAAAwDAAAAAAAADAMAAAAAAAAIAAAAY2FsbE1haW4MAwAAAAAAAAwDAAAAAAAAAQAAACw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAMAwAAAAAAABQDAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					2,
					"right_delete",
					null,
					"AgAAAHp3AAAAAAAAencAAAAAAAAGAAAAZXF1YWxzencAAAAAAAB6dwAAAAAAAAEAAAAo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB6dwAAAAAAAIB3AAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					1,
					"left_delete",
					null,
					"AQAAAIN3AAAAAAAAg3cAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACEdwAAAAAAAIR3AAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAAIN3AAAAAAAAhHcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACDdwAAAAAAAIN3AAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"left_delete",
					null,
					"AQAAAIN3AAAAAAAAg3cAAAAAAAABAAAAPQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACEdwAAAAAAAIR3AAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": " ==="
					},
					"BAAAAIN3AAAAAAAAhHcAAAAAAAAAAAAAhHcAAAAAAACFdwAAAAAAAAAAAACFdwAAAAAAAIZ3AAAAAAAAAAAAAIZ3AAAAAAAAh3cAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACDdwAAAAAAAIN3AAAAAAAAAAAAAAAA8L8"
				],
				[
					43,
					1,
					"right_delete",
					null,
					"AQAAAJJ3AAAAAAAAkncAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSdwAAAAAAAJJ3AAAAAAAAAAAAAAAA8L8"
				],
				[
					51,
					2,
					"right_delete",
					null,
					"AgAAAA0DAAAAAAAADQMAAAAAAAAGAAAAZXF1YWxzDQMAAAAAAAANAwAAAAAAAAEAAAAs",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAANAwAAAAAAABMDAAAAAAAAAAAAAAAA8L8"
				],
				[
					54,
					6,
					"right_delete",
					null,
					"BgAAAA0DAAAAAAAADQMAAAAAAAABAAAAIA0DAAAAAAAADQMAAAAAAAABAAAAZQ0DAAAAAAAADQMAAAAAAAABAAAAeA0DAAAAAAAADQMAAAAAAAABAAAAaQ0DAAAAAAAADQMAAAAAAAABAAAAdA0DAAAAAAAADQMAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAANAwAAAAAAAA0DAAAAAAAAAAAAAAAA8L8"
				],
				[
					63,
					1,
					"insert",
					{
						"characters": "process."
					},
					"CAAAAFozAAAAAAAAWzMAAAAAAAAAAAAAWzMAAAAAAABcMwAAAAAAAAAAAABcMwAAAAAAAF0zAAAAAAAAAAAAAF0zAAAAAAAAXjMAAAAAAAAAAAAAXjMAAAAAAABfMwAAAAAAAAAAAABfMwAAAAAAAGAzAAAAAAAAAAAAAGAzAAAAAAAAYTMAAAAAAAAAAAAAYTMAAAAAAABiMwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABaMwAAAAAAAFozAAAAAAAAAAAAAAAA8L8"
				],
				[
					77,
					2,
					"right_delete",
					null,
					"AgAAAA4DAAAAAAAADgMAAAAAAAAHAAAAZ2V0QXJncw4DAAAAAAAADgMAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAOAwAAAAAAABUDAAAAAAAAAAAAAAAA8L8"
				],
				[
					84,
					1,
					"right_delete",
					null,
					"AQAAABYoAAAAAAAAFigAAAAAAAAKAAAAICAgIHV0aWwsCg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAWKAAAAAAAACAoAAAAAAAAAAAAAAAAAAA"
				],
				[
					100,
					1,
					"insert",
					{
						"characters": "process."
					},
					"CAAAACWaAAAAAAAAJpoAAAAAAAAAAAAAJpoAAAAAAAAnmgAAAAAAAAAAAAAnmgAAAAAAACiaAAAAAAAAAAAAACiaAAAAAAAAKZoAAAAAAAAAAAAAKZoAAAAAAAAqmgAAAAAAAAAAAAAqmgAAAAAAACuaAAAAAAAAAAAAACuaAAAAAAAALJoAAAAAAAAAAAAALJoAAAAAAAAtmgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAlmgAAAAAAACWaAAAAAAAAAAAAAAAA8L8"
				],
				[
					153,
					1,
					"insert",
					{
						"characters": ",."
					},
					"AgAAAOwgAAAAAAAA7SAAAAAAAAAAAAAA7SAAAAAAAADuIAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADsIAAAAAAAAOwgAAAAAAAAAAAAAAAA8L8"
				],
				[
					154,
					1,
					"left_delete",
					null,
					"AQAAAO0gAAAAAAAA7SAAAAAAAAABAAAALg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuIAAAAAAAAO4gAAAAAAAAAAAAAAAA8L8"
				],
				[
					155,
					1,
					"insert",
					{
						"characters": "className"
					},
					"CQAAAO0gAAAAAAAA7iAAAAAAAAAAAAAA7iAAAAAAAADvIAAAAAAAAAAAAADvIAAAAAAAAPAgAAAAAAAAAAAAAPAgAAAAAAAA8SAAAAAAAAAAAAAA8SAAAAAAAADyIAAAAAAAAAAAAADyIAAAAAAAAPMgAAAAAAAAAAAAAPMgAAAAAAAA9CAAAAAAAAAAAAAA9CAAAAAAAAD1IAAAAAAAAAAAAAD1IAAAAAAAAPYgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtIAAAAAAAAO0gAAAAAAAAAAAAAAAA8L8"
				],
				[
					158,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABCmgAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgeyBFYWdsZVNWR1JlbmRlcmVyLCBTY2hlbWF0aWNSZW5kZXJlciwgQm9hcmRSZW5kZXJlciwgTGlicmFyeVJlbmRlcmVyLCBFYWdsZU5vZGVMaXN0LCB1c2VUcmtsLCBSQUQyREVHLCBERUcyUkFELCBWRVJUSUNBTCwgSE9SSVpPTlRBTCwgSE9SSVpPTlRBTF9WRVJUSUNBTCwgREVCVUcsIGxvZywgc2V0RGVidWcsIFBpblNpemVzLCBFc2NhcGVDbGFzc05hbWUsIFVuZXNjYXBlQ2xhc3NOYW1lLCBMYXllclRvQ2xhc3MsIEVsZW1lbnRUb0NsYXNzLCBDbGFtcEFuZ2xlLCBBbGlnbm1lbnRBbmdsZSwgTWFrZVJvdGF0aW9uLCBFYWdsZUFsaWdubWVudHMsIEFsaWdubWVudCwgU1ZHQWxpZ25tZW50cywgQWxpZ25tZW50QXR0cnMsIFJvdGF0ZVRyYW5zZm9ybWF0aW9uLCBMYXllckF0dHJpYnV0ZXMsIEludmVydFksIFBvbGFyVG9DYXJ0ZXNpYW4sIENhcnRlc2lhblRvUG9sYXIsIFJlbmRlckFyYywgQ2FsY3VsYXRlQXJjUmFkaXVzLCBMaW5lc1RvUGF0aCwgTWFrZUNvb3JkVHJhbnNmb3JtZXIsIHVzZUF0dHJpYnV0ZXMsIEVhZ2xlRG9jdW1lbnQsIEVhZ2xlUmVmZXJlbmNlLCBFYWdsZVJlZiwgbWFrZUVhZ2xlTm9kZSwgRWFnbGVOb2RlLCBSZW5kZXJlciwgRWFnbGVQcm9qZWN0LCBFYWdsZUVsZW1lbnQsIG1ha2VFYWdsZUVsZW1lbnQsIEVhZ2xlRWxlbWVudFByb3h5LCBFYWdsZU5vZGVNYXAsIEltbXV0YWJsZVBhdGgsIERlcmVmZXJlbmNlRXJyb3IgfSBmcm9tICcuL2xpYi9lYWdsZS5qcyc7CmltcG9ydCB7YWJicmV2aWF0ZSwgICAgZ2V0TWV0aG9kcywgbWFwIH1mcm9tICcuL2xpYi9taXNjLmpzJzsKaW1wb3J0ICogYXMgZGVlcCBmcm9tICcuL2xpYi9kZWVwLmpzJzsKaW1wb3J0ICogYXMgcGF0aCBmcm9tICcuL2xpYi9wYXRoLmpzJzsKaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBFdmVudFRhcmdldCwgZXZlbnRpZnkgfSBmcm9tICcuL2xpYi9ldmVudHMuanMnOwppbXBvcnQgcmVxdWlyZSBmcm9tICdyZXF1aXJlJzsKaW1wb3J0IHsgTGluZUxpc3QsIFBvaW50LCBDaXJjbGUsIFJlY3QsIFNpemUsIExpbmUsIFRyYW5zZm9ybWF0aW9uTGlzdCwgUm90YXRpb24sIFRyYW5zbGF0aW9uLCBTY2FsaW5nLCBNYXRyaXgsIEJCb3ggfSBmcm9tICcuL2xpYi9nZW9tLmpzJzsKaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gJ2NvbnNvbGUnOwppbXBvcnQgUkVQTCBmcm9tICcuL3F1aWNranMvcWpzLW1vZHVsZXMvbGliL3JlcGwuanMnOwppbXBvcnQgeyBCaW5hcnlUcmVlLCBCdWNrZXRTdG9yZSwgQnVja2V0TWFwLCBDb21wb25lbnRNYXAsIENvbXBvc2l0ZU1hcCwgRGVxdWUsIEVudW0sIEhhc2hMaXN0LCBNdWx0aW1hcCwgU2hhc2gsIFNvcnRlZE1hcCwgSGFzaE11bHRpbWFwLCBNdWx0aUJpTWFwLCBNdWx0aUtleU1hcCwgRGVuc2VTcGF0aWFsSGFzaDJELCBTcGF0aWFsSGFzaDJELCBIYXNoTWFwLCBTcGF0aWFsSCwgU3BhdGlhbEhhc2gsIFNwYXRpYWxIYXNoTWFwLCBCb3hIYXNoIH0gZnJvbSAnLi9saWIvY29udGFpbmVyLmpzJzsKaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnOwppbXBvcnQgeyBQb2ludGVyIH0gZnJvbSAnLi9saWIvcG9pbnRlci5qcyc7CmltcG9ydCB7IHJlYWQgYXMgZnJvbVhNTCwgd3JpdGUgYXMgd3JpdGVYTUwgfSBmcm9tICd4bWwnOwppbXBvcnQgaW5zcGVjdCBmcm9tICcuL2xpYi9vYmplY3RJbnNwZWN0LmpzJzsKaW1wb3J0IHsgSWZEZWJ1ZywgTG9nSWZEZWJ1ZywgUmVhZEZkLCBSZWFkRmlsZSwgTG9hZEhpc3RvcnksIFJlYWRKU09OLCBSZWFkWE1MLCBNYXBGaWxlLCBXcml0ZUZpbGUsIFdyaXRlSlNPTiwgV3JpdGVYTUwsIFJlYWRCSlNPTiwgV3JpdGVCSlNPTiwgRGlySXRlcmF0b3IsIFJlY3Vyc2l2ZURpckl0ZXJhdG9yLCBSZWFkRGlyUmVjdXJzaXZlLCBGaWx0ZXIsIEZpbHRlckltYWdlcywgU29ydEZpbGVzLCBTdGF0RmlsZXMsIEZkUmVhZGVyLCBDb3B5VG9DbGlwYm9hcmQsIFJlYWRDYWxsYmFjaywgTG9nQ2FsbCwgU3Bhd24sIEZldGNoVVJMIH0gZnJvbSAnLi9pby1oZWxwZXJzLmpzJzsKaW1wb3J0IHsgR2V0RXhwb25lbnQsIEdldE1hbnRpc3NhLCBWYWx1ZVRvTnVtYmVyLCBOdW1iZXJUb1ZhbHVlIH0gZnJvbSAnLi9saWIvZWRhL3ZhbHVlcy5qcyc7CmltcG9ydCB7IEdldE11bHRpcGxpZXJzLCBHZXRGYWN0b3IsIEdldENvbG9yQmFuZHMsIFBhcnRTY2FsZXMsIGRpZ2l0MmNvbG9yIH0gZnJvbSAnLi9saWIvZWRhL2NvbG9yQ29kaW5nLmpzJzsKaW1wb3J0IHsgVW5pdEZvck5hbWUgfSBmcm9tICcuL2xpYi9lZGEvdW5pdHMuanMnOwppbXBvcnQgQ2lyY3VpdEpTIGZyb20gJy4vbGliL2VkYS9jaXJjdWl0anMuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZXh0ZW5kQXJyYXksIGdldE9wdCwgZ2xvYiwgR0xPQl9CUkFDRSwgaW50ZXJzZWN0LCBpc09iamVjdCwgbWVtb2l6ZSwgcmFuZ2UsIHVuaXF1ZSwgbGF6eVByb3BlcnRpZXMsIGVudHJpZXMsIGlzSlNGdW5jdGlvbiwgd2Vha0Fzc2lnbiB9IGZyb20gJ3V0aWwnOwppbXBvcnQgeyBIU0xBLCBpc0hTTEEsIEltbXV0YWJsZUhTTEEsIFJHQkEsIGlzUkdCQSwgSW1tdXRhYmxlUkdCQSwgQ29sb3JlZFRleHQgfSBmcm9tICcuL2xpYi9jb2xvci5qcyc7CmltcG9ydCB7IHNjaWVudGlmaWMsIG51bTJjb2xvciwgR2V0UGFydHMsIEdldEluc3RhbmNlcywgR2V0UG9zaXRpb25zLCBHZXRFbGVtZW50cyB9IGZyb20gJy4vZWFnbGUtY29tbWFuZHMuanMnOwppbXBvcnQgeyBFZGdlLCBHcmFwaCwgTm9kZSB9IGZyb20gJy4vbGliL2dlb20vZ3JhcGguanMnOwppbXBvcnQgeyBNdXRhYmxlWFBhdGggYXMgWFBhdGgsIHBhcnNlWFBhdGgsIEltbXV0YWJsZVhQYXRoIH0gZnJvbSAnLi9xdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi94cGF0aC5qcyc7CmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJ3ByZWRpY2F0ZSc7CmltcG9ydCBjaGlsZF9wcm9jZXNzIGZyb20gJ2NoaWxkX3Byb2Nlc3MnOwppbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7CmltcG9ydCB7IFJlYWN0Q29tcG9uZW50LCBGcmFnbWVudCwgcmVuZGVyLCBoLCBmb3J3YXJkUmVmLCBSZWFjdCwgdG9DaGlsZEFycmF5IH0gZnJvbSAnLi9saWIvZG9tL3ByZWFjdENvbXBvbmVudC5qcyc7CmltcG9ydCB7IFRhYmxlIH0gZnJvbSAnLi9jbGktaGVscGVycy5qcyc7CmltcG9ydCByZW5kZXJUb1N0cmluZyBmcm9tICcuL2xpYi9wcmVhY3QtcmVuZGVyLXRvLXN0cmluZy5qcyc7CmltcG9ydCB7IFByaW1pdGl2ZUNvbXBvbmVudHMsIEVsZW1lbnROYW1lVG9Db21wb25lbnQsIEVsZW1lbnRUb0NvbXBvbmVudCB9IGZyb20gJy4vbGliL2VhZ2xlL2NvbXBvbmVudHMuanMnOwppbXBvcnQgeyBFYWdsZVRvR2VyYmVyLCBHZXJiZXJUb0djb2RlIH0gZnJvbSAnLi9wY2ItY29udmVyc2lvbi5qcyc7CmltcG9ydCB7IEV4ZWNUb29sIH0gZnJvbSAnLi9vcy1oZWxwZXJzLmpzJzsKaW1wb3J0ICogYXMgY29tcG9uZW50cyBmcm9tICcuL2xpYi9lYWdsZS9jb21wb25lbnRzLmpzJzsKCmxldCBjbWRoaXN0OwoKZXh0ZW5kQXJyYXkoKTsKCmZ1bmN0aW9uIEdldEdsb2JhbEZ1bmN0aW9ucygpIHsKICByZXR1cm4gZW50cmllcyhnbG9iYWxUaGlzKQogICAgLmZpbHRlcigoW2ssIHZdKSA9PiBpc0pTRnVuY3Rpb24odikpCiAgICAubWFwKChba10pID0+IGspOwp9CgpmdW5jdGlvbiB0b1hNTChvYmopIHsKICBkZWVwLmZvckVhY2gob2JqLCBhID0+IEFycmF5LmlzQXJyYXkoYS5jaGlsZHJlbikgJiYgYS5jaGlsZHJlbi5sZW5ndGggPT0gMCAmJiBkZWxldGUgYS5jaGlsZHJlbik7CiAgcmV0dXJuIHdyaXRlWE1MKG9iaik7Cn0KCmZ1bmN0aW9uIHJlbmRlclRvWE1MKGNvbXBvbmVudCkgewogIHJldHVybiBmcm9tWE1MKHJlbmRlclRvU3RyaW5nKGNvbXBvbmVudCkpOwp9CgpmdW5jdGlvbiBHZXRGaWxldGltZShmaWxlLCBmaWVsZCA9ICdtdGltZScpIHsKICBpZihBcnJheS5pc0FycmF5KGZpbGUpKSByZXR1cm4gZmlsZS5tYXAoZmlsZSA9PiBbZmlsZSwgR2V0RmlsZXRpbWUoZmlsZSwgZmllbGQpXSk7CiAgbGV0IG1zID0gZnMuc3RhdFN5bmMoZmlsZSk/LltmaWVsZF07CiAgcmV0dXJuIG5ldyBEYXRlKG1zKTsKfQoKZnVuY3Rpb24gRmluZFByb2plY3RzKGRpclB0biA9ICcuLi8qL2VhZ2xlJywgc29ydERpcmVjdGlvbiA9IC0xLCBzb3J0RmllbGQgPSAnbXRpbWUnKSB7CiAgbGV0IGZpbGVzID0gZ2xvYihkaXJQdG4gKyAnLyoue3NjaCxicmR9JywgR0xPQl9CUkFDRSk7CiAgbGV0IGVudHJpZXMgPSBTb3J0RmlsZXMoZmlsZXMsIHNvcnREaXJlY3Rpb24sIHNvcnRGaWVsZCk7CgogIGxldCBuYW1lcyA9IHVuaXF1ZShmaWxlcy5tYXAoZm4gPT4gZm4ucmVwbGFjZSgvXC4oc2NofGJyZCkkL2ksICcnKSkpOwoKICBjb25zdCBtaW5JbmRleCA9IG5hbWUgPT4KICAgIE1hdGgubWluKAogICAgICBlbnRyaWVzLmZpbmRJbmRleChmaWxlID0+IGZpbGUgPT0gbmFtZSArICcuc2NoJyksCiAgICAgIGVudHJpZXMuZmluZEluZGV4KGZpbGUgPT4gZmlsZSA9PSBuYW1lICsgJy5icmQnKQogICAgKTsKICBjb25zdCBoYXNCb3RoID0gbmFtZSA9PiBtaW5JbmRleChuYW1lKSA+PSAwOwoKICByZXR1cm4gbmFtZXMKICAgIC5tYXAobmFtZSA9PiBbbmFtZSwgbWluSW5kZXgobmFtZSldKQogICAgLmZpbHRlcigoW25hbWUsIGluZGV4XSkgPT4gaW5kZXggPj0gMCkKICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSkKICAgIC5tYXAoKFtuYW1lLCBpbmRleF0pID0+IG5hbWUpOwp9CgpmdW5jdGlvbiBTb3J0RmlsZXMoZmlsZXMsIGRpcmVjdGlvbiA9IDEsIHN0YXRGaWVsZCA9ICdtdGltZScpIHsKICBpZih0eXBlb2YgZGlyZWN0aW9uID09ICdib29sZWFuJykgZGlyZWN0aW9uID0gZGlyZWN0aW9uID8gMSA6IC0xOwogIHJldHVybiBHZXRGaWxldGltZShmaWxlcywgc3RhdEZpZWxkKQogICAgLnNvcnQoKGEsIGIpID0+IGRpcmVjdGlvbiAqIChhWzFdIC0gYlsxXSkpCiAgICAubWFwKChbZmlsZV0pID0+IGZpbGUpOwp9CgpmdW5jdGlvbiBwaWNrKGl0LCBuID0gMSkgewogIGxldCByZXQgPSBuZXcgQXJyYXkoKTsKCiAgaWYodHlwZW9mIG4gIT0gJ2Z1bmN0aW9uJykgewogICAgbGV0IG51bSA9IG47CiAgICBuID0gaSA9PiBpIDwgbnVtOwogIH0KICBsZXQgaSA9IDA7CiAgZm9yKGkgPSAwOyA7IGkrKykgewogICAgbGV0IHsgZG9uZSwgdmFsdWUgfSA9IGl0Lm5leHQoKTsKICAgIGlmKGRvbmUpIGJyZWFrOwogICAgaWYobihpKSkgewogICAgICByZXQucHVzaCh2YWx1ZSk7CiAgICB9IGVsc2UgYnJlYWs7CiAgfQogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGFwcGVuZCh0YWcsIGF0dHJzLCBjaGlsZHJlbiwgcGFyZW50LCBlbGVtZW50KSB7CiAgY29uc29sZS5sb2coJ2FwcGVuZCcsIHsKICAgIHRhZywKICAgIGF0dHJzLAogICAgY2hpbGRyZW4sCiAgICBwYXJlbnQsCiAgICBlbGVtZW50CiAgfSk7CgogIGxldCBvYmo7CiAgb2JqID0geyB0YWdOYW1lOiB0YWcsIGF0dHJpYnV0ZXM6IGF0dHJzLCBjaGlsZHJlbiB9OwoKICBpZihwYXJlbnQpIHBhcmVudC5jaGlsZHJlbi5wdXNoKG9iaik7CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIHJlbmRlcihkb2MsIGZpbGVuYW1lKSB7CiAgaWYoZG9jIGluc3RhbmNlb2YgRWFnbGVQcm9qZWN0KSB7CiAgICByZW5kZXIoZG9jLnNjaGVtYXRpYyk7CiAgICByZW5kZXIoZG9jLmJvYXJkKTsKICAgIHJldHVybjsKICB9CiAgbGV0IHJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKGRvYywgUmVhY3RDb21wb25lbnQuYXBwZW5kKTsKICBsZXQgc3RyOwogIGxldCBzdmcgPSByZW5kZXJlci5yZW5kZXIoZG9jKTsKICB0cnkgewogICAgc3RyID0gcmVuZGVyVG9TdHJpbmcoc3ZnKTsKICB9IGNhdGNoKGUpIHsKICAgIGNvbnNvbGUubG9nKCdFUlJPUjonLCBlKTsKICB9CiAgY29uc29sZS5sb2coJ3JlbmRlcicsIHsgc3RyIH0pOwoKICBsZXQgeG1sID0gZnJvbVhNTChzdHIpOwoKICBmaWxlbmFtZSA/Pz0gcGF0aC5iYXNlbmFtZShkb2MuZmlsZW5hbWUsICcuJyArIGRvYy50eXBlKSArICctJyArIHsgc2NoOiAnc2NoZW1hdGljJywgYnJkOiAnYm9hcmQnLCBsYnI6ICdsaWJyYXJ5JyB9W2RvYy50eXBlXSArICcuc3ZnJzsKCiAgaWYoZmlsZW5hbWUpIHsKICAgIGxldCByZXQ7CiAgICByZXQgPSBXcml0ZUZpbGUoZmlsZW5hbWUsIChzdHIgPSB0b1hNTCh4bWwpKSk7CiAgICBjb25zb2xlLmxvZyhgU2F2aW5nIHRvICcke2ZpbGVuYW1lfScuLi5gLCByZXQpOwogIH0KICByZXR1cm4gc3RyOwp9CgpmdW5jdGlvbiBDb2xsZWN0UGFydHMoZG9jID0gcHJvamVjdC5zY2hlbWF0aWMpIHsKICByZXR1cm4gWy4uLmRvYy5wYXJ0c10KICAgIC5tYXAoZSA9PiBlLnJhdy5hdHRyaWJ1dGVzKQogICAgLmZpbHRlcihhdHRyID0+ICEoYXR0ci52YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGF0dHIuZGV2aWNlID09PSAnJykgfHwgL15JQy8udGVzdChhdHRyLm5hbWUpKQogICAgLm1hcCgoeyBuYW1lLCBkZXZpY2VzZXQsIGRldmljZSwgdmFsdWUgfSkgPT4gKHsKICAgICAgbmFtZSwKICAgICAgZGV2aWNlc2V0LAogICAgICBkZXZpY2UsCiAgICAgIHZhbHVlOiB2YWx1ZSA/PyAnLScKICAgIH0pKTsKfQoKZnVuY3Rpb24gQ29sbGVjdEVsZW1lbnRzKGRvYyA9IHByb2plY3QuYm9hcmQpIHsKICByZXR1cm4gZG9jLmVsZW1lbnRzCiAgICAubWFwKGUgPT4gZS5yYXcuYXR0cmlidXRlcykKICAgIC5tYXAoKHsgbmFtZSwgbGlicmFyeSwgcGFja2FnZTogcGtnLCB2YWx1ZSB9KSA9PiAoewogICAgICBuYW1lLAogICAgICBsaWJyYXJ5LAogICAgICBbJ3BhY2thZ2UnXTogcGtnLAogICAgICB2YWx1ZQogICAgfSkpOwp9CgpmdW5jdGlvbiBDb2xsZWN0UGFydHNFbGVtZW50cyhwcm9qID0gcHJvamVjdCkgewogIHJldHVybiBwcm9qZWN0LmJvYXJkLmVsZW1lbnRzCiAgICAubWFwKGUgPT4gW2UsIHByb2plY3Quc2NoZW1hdGljLnBhcnRzW2UubmFtZV1dKQogICAgLm1hcChhID0+IGEubWFwKGUgPT4gZS5yYXcuYXR0cmlidXRlcykpCiAgICAubWFwKChbeyB4LCB5LCAuLi5lbGVtZW50IH0sIHBhcnRdKSA9PiB3ZWFrQXNzaWduKGVsZW1lbnQsIHBhcnQpKTsKfQoKZnVuY3Rpb24gTGlzdFBhcnRzKGRvYyA9IHByb2plY3Quc2NoZW1hdGljKSB7CiAgbGV0IHBhcnRzID0gQ29sbGVjdFBhcnRzKGRvYyk7CiAgbGV0IHZhbHVlTGVuID0gTWF0aC5tYXgoLi4ucGFydHMubWFwKHAgPT4gcC52YWx1ZS5sZW5ndGgpKTsKCiAgcmV0dXJuIHBhcnRzLm1hcCgoeyBuYW1lLCBkZXZpY2VzZXQsIGRldmljZSwgdmFsdWUgfSkgPT4gdmFsdWUucGFkU3RhcnQodmFsdWVMZW4pICsgJyAnICsgZGV2aWNlKTsKfQoKZnVuY3Rpb24gU2hvd1BhcnRzKGRvYyA9IHByb2plY3Quc2NoZW1hdGljKSB7CiAgcmV0dXJuIFRhYmxlKAogICAgQ29sbGVjdFBhcnRzKGRvYykubWFwKCh7IG5hbWUsIGRldmljZXNldCwgZGV2aWNlLCB2YWx1ZSB9KSA9PiBbbmFtZSwgZGV2aWNlc2V0LCBkZXZpY2UsIHZhbHVlID8/ICctJ10pLAogICAgWyduYW1lJywgJ2RldmljZXNldCcsICdkZXZpY2UnLCAndmFsdWUnXQogICk7Cn0KCmZ1bmN0aW9uIEVhZ2xlUHJpbnQoZmlsZSwgb3V0cHV0KSB7CiAgb3V0cHV0ID8/PSBNb2RpZnlQYXRoKGZpbGUsIChkaXIsIGJhc2UsIGV4dCkgPT4gW2RpciwgYmFzZSwgZXh0ICsgJy5wZGYnXSk7CiAgbGV0IGFyZ3YgPSBbJy9vcHQvZWFnbGUtNy4yLjAvYmluL2VhZ2xlJywgJy1OLScsICctQycsIGBQUklOVCBsYW5kc2NhcGUgMC44IC0xIC0wIC1jYXB0aW9uIEZJTEUgJyR7b3V0cHV0fScgc2hlZXRzIGFsbCBwYXBlciBhNDsgUVVJVGAsIGZpbGVdOwoKICByZXR1cm4gY2hpbGRfcHJvY2Vzcy5zcGF3bihhcmd2WzBdLCBhcmd2LCB7CiAgICBibG9jazogZmFsc2UKICB9KTsKfQoKZnVuY3Rpb24gbWFpbiguLi5hcmdzKSB7CiAgZ2xvYmFsVGhpcy5jb25zb2xlID0gbmV3IENvbnNvbGUoewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgbWF4QXJyYXlMZW5ndGg6IDEwMCwKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBkZXB0aDogMTAsCiAgICAgIGNvbXBhY3Q6IDAsCiAgICAgIGN1c3RvbUluc3BlY3Q6IHRydWUKICAgIH0KICB9KTsKCiAgbGV0IGRlYnVnTG9nID0gZnMub3BlblN5bmMoJ2RlYnVnLmxvZycsICdhJyk7CgogIGNvbnN0IGJhc2UgPSBwYXRoLmJhc2VuYW1lKF9fZmlsZW5hbWUsIHBhdGguZXh0bmFtZShfX2ZpbGVuYW1lKSk7CiAgY29uc3QgaGlzdGZpbGUgPSBgLiR7YmFzZX0taGlzdG9yeWA7CgogIGxldCBwYXJhbXMgPSBnZXRPcHQoCiAgICB7CiAgICAgIGRlYnVnOiBbZmFsc2UsIG51bGwsICd4J10sCiAgICAgICdvdXRwdXQtZGlyJzogW3RydWUsIG51bGwsICdkJ10sCiAgICAgICdAJzogJ2lucHV0JwogICAgfSwKICAgIGFyZ3MKICApOwoKICBPYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsgY29tcG9uZW50cywgQ29uc29sZSwgR2V0R2xvYmFsRnVuY3Rpb25zICxjbGFzc05hbWV9KTsKCiAgT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7CiAgICBjaGlsZF9wcm9jZXNzLAogICAgU2F2ZUxpYnJhcmllcywKICAgIEVhZ2xlU1ZHUmVuZGVyZXIsCiAgICBTY2hlbWF0aWNSZW5kZXJlciwKICAgIEJvYXJkUmVuZGVyZXIsCiAgICBMaWJyYXJ5UmVuZGVyZXIsCiAgICBFYWdsZU5vZGVMaXN0LAogICAgdXNlVHJrbCwKICAgIFJBRDJERUcsCiAgICBERUcyUkFELAogICAgVkVSVElDQUwsCiAgICBIT1JJWk9OVEFMLAogICAgSE9SSVpPTlRBTF9WRVJUSUNBTCwKICAgIERFQlVHLAogICAgc2V0RGVidWcsCiAgICBQaW5TaXplcywKICAgIEVzY2FwZUNsYXNzTmFtZSwKICAgIFVuZXNjYXBlQ2xhc3NOYW1lLAogICAgTGF5ZXJUb0NsYXNzLAogICAgRWxlbWVudFRvQ2xhc3MsCiAgICBDbGFtcEFuZ2xlLAogICAgQWxpZ25tZW50QW5nbGUsCiAgICBNYWtlUm90YXRpb24sCiAgICBFYWdsZUFsaWdubWVudHMsCiAgICBBbGlnbm1lbnQsCiAgICBTVkdBbGlnbm1lbnRzLAogICAgQWxpZ25tZW50QXR0cnMsCiAgICBSb3RhdGVUcmFuc2Zvcm1hdGlvbiwKICAgIExheWVyQXR0cmlidXRlcywKICAgIEludmVydFksCiAgICBQb2xhclRvQ2FydGVzaWFuLAogICAgQ2FydGVzaWFuVG9Qb2xhciwKICAgIFJlbmRlckFyYywKICAgIENhbGN1bGF0ZUFyY1JhZGl1cywKICAgIExpbmVzVG9QYXRoLAogICAgTWFrZUNvb3JkVHJhbnNmb3JtZXIsCiAgICB1c2VBdHRyaWJ1dGVzLAogICAgRWFnbGVEb2N1bWVudCwKICAgIEVhZ2xlUmVmZXJlbmNlLAogICAgRWFnbGVSZWYsCiAgICBtYWtlRWFnbGVOb2RlLAogICAgRWFnbGVOb2RlLAogICAgUmVuZGVyZXIsCiAgICBFYWdsZVByb2plY3QsCiAgICBFYWdsZUVsZW1lbnQsCiAgICBtYWtlRWFnbGVFbGVtZW50LAogICAgRWFnbGVFbGVtZW50UHJveHksCiAgICBFYWdsZU5vZGVNYXAsCiAgICBJbW11dGFibGVQYXRoLAogICAgRGVyZWZlcmVuY2VFcnJvciwKICAgIEdldE5hbWVzLAogICAgR2V0QnlOYW1lLAogICAgQ29ycmVsYXRlU2NoZW1hdGljQW5kQm9hcmQsCiAgICBMb2FkSGlzdG9yeSwKICAgIElmRGVidWcsCiAgICBMb2dJZkRlYnVnLAogICAgUmVhZEZkLAogICAgUmVhZEZpbGUsCiAgICBMb2FkSGlzdG9yeSwKICAgIFJlYWRKU09OLAogICAgUmVhZFhNTCwKICAgIE1hcEZpbGUsCiAgICBXcml0ZUZpbGUsCiAgICBXcml0ZUpTT04sCiAgICBXcml0ZVhNTCwKICAgIFJlYWRCSlNPTiwKICAgIFdyaXRlQkpTT04sCiAgICBEaXJJdGVyYXRvciwKICAgIFJlY3Vyc2l2ZURpckl0ZXJhdG9yLAogICAgUmVhZERpclJlY3Vyc2l2ZSwKICAgIEZpbHRlciwKICAgIEZpbHRlckltYWdlcywKICAgIFNvcnRGaWxlcywKICAgIFN0YXRGaWxlcywKICAgIEZkUmVhZGVyLAogICAgQ29weVRvQ2xpcGJvYXJkLAogICAgUmVhZENhbGxiYWNrLAogICAgTG9nQ2FsbCwKICAgIFNwYXduLAogICAgRmV0Y2hVUkwsCiAgICBDb3B5VG9DbGlwYm9hcmQsCiAgICBDaXJjdWl0SlMsCiAgICBQdXRSb3dzQ29sdW1ucywKICAgIEdldExpYnJhcnksCiAgICBFbGVtZW50TmFtZSwKICAgIEdldFVzZWRQYWNrYWdlcywKICAgIEdldFBhY2thZ2VQaXRjaCwKICAgIFBhY2thZ2UyQ2lyY3VpdCwKICAgIEdldFJvdGF0aW9uLAogICAgRWFnbGUyQ2lyY3VpdCwKICAgIEVhZ2xlMkNpcmN1aXRKUywKICAgIE1vZGlmeVBhdGgsCiAgICBBcHBlbmRUb0ZpbGVuYW1lLAogICAgU2V0U1ZHQmFja2dyb3VuZCwKICAgIFNWR0ZpbGVTZXRCYWNrZ3JvdW5kLAogICAgU1ZHUmVzYXZlLAogICAgRmlsZUZ1bmN0aW9uLAogICAgdG9OdW1iZXIobikgewogICAgICByZXR1cm4gaXNOYU4oK24pID8gbiA6ICtuOwogICAgfSwKICAgIHBhdGgsCiAgICBFdmVudEVtaXR0ZXIsCiAgICBFdmVudFRhcmdldCwKICAgIGV2ZW50aWZ5LAogICAgR3JhcGgsCiAgICBFZGdlLAogICAgTm9kZSwKICAgIHhtbCwKICAgIFhQYXRoLAogICAgSW1tdXRhYmxlWFBhdGgsCiAgICBwYXJzZVhQYXRoLAogICAgUHJlZGljYXRlLAogICAgcmVuZGVyLAogICAgcGljaywKICAgIGZyb21YTUwsCiAgICB0b1hNTCwKICAgIHdyaXRlWE1MCiAgfSk7CiAgT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7CiAgICBHZXRFeHBvbmVudCwKICAgIEdldE1hbnRpc3NhLAogICAgVmFsdWVUb051bWJlciwKICAgIE51bWJlclRvVmFsdWUsCiAgICBHZXRNdWx0aXBsaWVycywKICAgIEdldEZhY3RvciwKICAgIEdldENvbG9yQmFuZHMsCiAgICBVcGRhdGVNZWFzdXJlcywKICAgIEFsaWduSXRlbSwKICAgIEFsaWduQWxsLAogICAgc2NpZW50aWZpYywKICAgIG51bTJjb2xvciwKICAgIEdldFBhcnRzLAogICAgR2V0SW5zdGFuY2VzLAogICAgR2V0UG9zaXRpb25zLAogICAgR2V0RWxlbWVudHMsCiAgICBHZXRTaGVldHMKICB9KTsKICBPYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsKICAgIGRlZmluZSwKICAgIGlzT2JqZWN0LAogICAgbWVtb2l6ZSwKICAgIHVuaXF1ZSwKICAgIEZpbmRQcm9qZWN0cywKICAgIFRhYmxlLAogICAgQ29sbGVjdFBhcnRzLAogICAgTGlzdFBhcnRzLAogICAgU2hvd1BhcnRzLAogICAgQ29sbGVjdEVsZW1lbnRzLAogICAgQ29sbGVjdFBhcnRzRWxlbWVudHMsCiAgICBFYWdsZVByaW50LAogICAgc2V0RGVidWcKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7CiAgICBoLAogICAgZm9yd2FyZFJlZiwKICAgIEZyYWdtZW50LAogICAgUmVhY3QsCiAgICBSZWFjdENvbXBvbmVudCwKICAgIHRvQ2hpbGRBcnJheSwKICAgIEdldEZpbGV0aW1lLAogICAgVGVybWluYXRlLAogICAgQ29udGFjdHJlZjJDaXJjdWl0LAogICAgU2lnbmFsMkNpcmN1aXQsCiAgICBFbGVtZW50MkNpcmN1aXQsCiAgICBTb3J0RmlsZXMKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7CiAgICBsb2FkKGZpbGVuYW1lLCBwcm9qZWN0ID0gZ2xvYmFsVGhpcy5wcm9qZWN0KSB7CiAgICAgIGdsb2JhbFRoaXMuZG9jdW1lbnQgPSBuZXcgRWFnbGVEb2N1bWVudChmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGYtOCcpLCBwcm9qZWN0LCBmaWxlbmFtZSwgbnVsbCwgZnMpOwogICAgfSwKICAgIG5ld1Byb2plY3QoZmlsZW5hbWUpIHsKICAgICAgaWYoZ2xvYmFsVGhpcy5wcm9qZWN0KSB7CiAgICAgICAgZ2xvYmFsVGhpcy5wcm9qZWN0LmNsb3NlQWxsKCk7CiAgICAgICAgZGVsZXRlIGdsb2JhbFRoaXMucHJvamVjdDsKICAgICAgICBkZWxldGUgZ2xvYmFsVGhpcy5zY2g7CiAgICAgICAgZGVsZXRlIGdsb2JhbFRoaXMuYnJkOwogICAgICB9CgogICAgICBnbG9iYWxUaGlzLnByb2plY3QgPSBuZXcgRWFnbGVQcm9qZWN0KGZpbGVuYW1lKTsKCiAgICAgIC8vcHJvamVjdC5sYXp5T3BlbihmaWxlbmFtZSk7CgogICAgICBsYXp5UHJvcGVydGllcyhnbG9iYWxUaGlzLCB7CiAgICAgICAgc2NoOiAoKSA9PiBwcm9qZWN0LnNjaGVtYXRpYywKICAgICAgICBicmQ6ICgpID0+IHByb2plY3QuYm9hcmQKICAgICAgfSk7CiAgICB9LAogICAgbmV4dFByb2plY3QoKSB7CiAgICAgIGlmKGdsb2JhbFRoaXMucHJvamVjdE5hbWVzLmxlbmd0aCA+IGdsb2JhbFRoaXMucHJvamVjdEluZGV4ICsgMSkgewogICAgICAgIGdsb2JhbFRoaXMubmV3UHJvamVjdChnbG9iYWxUaGlzLnByb2plY3ROYW1lc1srK2dsb2JhbFRoaXMucHJvamVjdEluZGV4XSk7CiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXMucHJvamVjdDsKICAgICAgfQogICAgfQogIH0pOwoKICBsYXp5UHJvcGVydGllcyhnbG9iYWxUaGlzLCB7CiAgICBwcm9qZWN0TmFtZXMoKSB7CiAgICAgIHRoaXMucHJvamVjdEluZGV4ID0gLTE7CiAgICAgIHJldHVybiBGaW5kUHJvamVjdHModW5kZWZpbmVkLCAxKTsKICAgIH0KICB9KTsKICAvLyBnbG9iYWxUaGlzLmRvY3MgPSBhcmdzLm1hcChhcmcgPT4gKGdsb2JhbFRoaXMuZG9jID0gbG9hZChhcmcpKSk7CgogIE9iamVjdC5hc3NpZ24oZ2xvYmFsVGhpcywgewogICAgVXBkYXRlTWVhc3VyZXMsCiAgICBBbGlnbkl0ZW0sCiAgICBBbGlnbkFsbCwKICAgIGZpeFZhbHVlLAogICAgZml4VmFsdWVzLAogICAgY29vcmRNYXAsCiAgICBVdGlsLAogICAgTGluZUxpc3QsCiAgICBQb2ludCwKICAgIENpcmNsZSwKICAgIFJlY3QsCiAgICBTaXplLAogICAgTGluZSwKICAgIFRyYW5zZm9ybWF0aW9uTGlzdCwKICAgIFJvdGF0aW9uLAogICAgVHJhbnNsYXRpb24sCiAgICBTY2FsaW5nLAogICAgTWF0cml4LAogICAgQkJveCwKICAgIGZzLAogICAgUG9pbnRlciwKICAgIGRlZXAKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7CiAgICBCaW5hcnlUcmVlLAogICAgQnVja2V0U3RvcmUsCiAgICBCdWNrZXRNYXAsCiAgICBDb21wb25lbnRNYXAsCiAgICBDb21wb3NpdGVNYXAsCiAgICBEZXF1ZSwKICAgIEVudW0sCiAgICBIYXNoTGlzdCwKICAgIE11bHRpbWFwLAogICAgU2hhc2gsCiAgICBTb3J0ZWRNYXAsCiAgICBIYXNoTXVsdGltYXAsCiAgICBNdWx0aUJpTWFwLAogICAgTXVsdGlLZXlNYXAsCiAgICBEZW5zZVNwYXRpYWxIYXNoMkQsCiAgICBTcGF0aWFsSGFzaDJELAogICAgSGFzaE1hcCwKICAgIFNwYXRpYWxILAogICAgU3BhdGlhbEhhc2gsCiAgICBTcGF0aWFsSGFzaE1hcCwKICAgIEJveEhhc2gsCiAgICBHZXRQb2x5Z29ucywKICAgIEZpbmRQb2x5Z29ucywKICAgIFJlbW92ZVBvbHlnb25zLAogICAgcXVpdChhcmcpIHsKICAgICAgcmVwbC5jbGVhbnVwKCk7CiAgICAgIHByb2Nlc3MuZXhpdChhcmcgPz8gMCk7CiAgICB9CiAgfSk7CgogIE9iamVjdC5hc3NpZ24oZ2xvYmFsVGhpcywgewogICAgUHJpbWl0aXZlQ29tcG9uZW50cywKICAgIEVsZW1lbnROYW1lVG9Db21wb25lbnQsCiAgICBFbGVtZW50VG9Db21wb25lbnQsCiAgICBFYWdsZVRvR2VyYmVyLAogICAgR2VyYmVyVG9HY29kZSwKICAgIEV4ZWNUb29sCiAgfSk7CiAgT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7CiAgICByZW5kZXJUb1N0cmluZyhhcmcpIHsKICAgICAgLy8gIHJldHVybiByZW5kZXJUb1N0cmluZyhhcmcpOwogICAgICByZXR1cm4gd3JpdGVYTUwoZnJvbVhNTChyZW5kZXJUb1N0cmluZyhhcmcpKSk7CiAgICB9LAogICAgcmVuZGVyVG9YTUwKICB9KTsKCiAgY21kaGlzdCA9IGAuJHtiYXNlfS1jbWRoaXN0b3J5YDsKCiAgbGV0IG5hbWUgPSAocHJvY2Vzcy5lbnZbJ05BTUUnXSA/PyBiYXNlKQogICAgLnJlcGxhY2UoLy4qXC8vLCAnJykKICAgIC5yZXBsYWNlKC8tL2csICcgJykKICAgIC5yZXBsYWNlKC9cLlteXC8uXSokLywgJycpOwogIGxldCBbcHJlZml4LCBzdWZmaXhdID0gbmFtZS5zcGxpdCgnICcpOwoKICBsZXQgcmVwbCA9IChnbG9iYWxUaGlzLnJlcGwgPSBuZXcgUkVQTChgXHgxYlszODs1OzE2NW0ke3ByZWZpeH0gXHgxYlszODs1OzM5bSR7c3VmZml4fVx4MWJbMG1gLCBmYWxzZSkpOwoKICBmb3IobGV0IGZpbGUgb2YgcGFyYW1zWydAJ10pIHsKICAgIHJlcGwucHJpbnRTdGF0dXMoYExvYWRpbmcgJyR7ZmlsZX0nLi4uYCk7CiAgICBuZXdQcm9qZWN0KGZpbGUpOwogIH0KCiAgcmVwbC5oaXN0b3J5ID0gTG9hZEhpc3RvcnkoY21kaGlzdCk7CiAgcmVwbC5sb2FkU2F2ZU9wdGlvbnMoKTsKICByZXBsLnByaW50U3RhdHVzKGBMb2FkZWQgJHtyZXBsLmhpc3RvcnkubGVuZ3RofSBoaXN0b3J5IGVudHJpZXMpYCk7CgogIGxldCBsb2cgPSBjb25zb2xlLmxvZzsKCiAgY29uc29sZS5sb2cgPSAoLi4uYXJncykgPT4gcmVwbC5wcmludFN0YXR1cygoKSA9PiBsb2coLi4uYXJncykpOwoKICAvL2NvbnNvbGUubG9nKGByZXBsYCwgcmVwbCk7CiAgLy9jb25zb2xlLmxvZyhgZGVidWdMb2dgLCBnZXRNZXRob2RzKGRlYnVnTG9nLCBJbmZpbml0eSwgMCkpOwogIC8vcmVwbC5oaXN0b3J5TG9hZChudWxsLCBmYWxzZSk7CiAgcmVwbC5kaXJlY3RpdmVzLmkgPSBbCiAgICAobW9kdWxlLCAuLi5hcmdzKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdhcmdzJywgYXJncyk7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUobW9kdWxlKTsKICAgICAgfSBjYXRjaChlKSB7fQogICAgICBpbXBvcnQobW9kdWxlKS50aGVuKG0gPT4gKGdsb2JhbFRoaXNbbW9kdWxlXSA9IG0pKTsKICAgIH0sCiAgICAnaW1wb3J0IG1vZHVsZScKICBdOwoKICByZXBsLmRlYnVnTG9nID0gZGVidWdMb2c7CiAgcmVwbC5leGl0ID0gKCkgPT4gewogICAgcmVwbC5jbGVhbnVwKCk7CiAgICBUZXJtaW5hdGUoKTsKICB9OwogIHJlcGwuaW1wb3J0TW9kdWxlID0gaW1wb3J0TW9kdWxlOwogIHJlcGwuZGVidWcgPSAoLi4uYXJncykgPT4gewogICAgbGV0IHMgPSAnJzsKICAgIGZvcihsZXQgYXJnIG9mIGFyZ3MpIHsKICAgICAgaWYocykgcyArPSAnICc7CiAgICAgIGlmKHR5cGVvZiBhcmcgIT0gJ3N0cmluZycgfHwgYXJnLmluZGV4T2YoJ1x4MWInKSA9PSAtMSkKICAgICAgICBzICs9IGluc3BlY3QoYXJnLCB7CiAgICAgICAgICBkZXB0aDogSW5maW5pdHksCiAgICAgICAgICBkZXB0aDogNiwKICAgICAgICAgIGNvbXBhY3Q6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIGVsc2UgcyArPSBhcmc7CiAgICB9CiAgICBmcy53cml0ZVN5bmMoZGVidWdMb2csIGZzLmJ1ZmZlckZyb20ocyArICdcbicpKTsKCiAgICAvLyAgICBkZWJ1Z0xvZy5wdXRzKHMgKyAnXG4nKTsKICAgIGZzLmZsdXNoU3luYyhkZWJ1Z0xvZyk7CiAgfTsKICByZXBsLnNob3cgPSB2YWx1ZSA9PiB7CiAgICBpZihpc09iamVjdCh2YWx1ZSkgJiYgdmFsdWUgaW5zdGFuY2VvZiBFYWdsZU5vZGUpIHsKICAgICAgY29uc29sZS5sb2codmFsdWUuaW5zcGVjdCgpKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTsKICAgIH0KICB9OwoKICAvLyByZXBsLmhpc3RvcnlTZXQoSlNPTi5wYXJzZShzdGQubG9hZEZpbGUoaGlzdGZpbGUpIHx8ICdbXScpKTsKCiAgcmVwbC5hZGRDbGVhbnVwSGFuZGxlcigoKSA9PiB7CiAgICBsZXQgaGlzdCA9IHJlcGwuaGlzdG9yeS5maWx0ZXIoKGl0ZW0sIGksIGEpID0+IGEubGFzdEluZGV4T2YoaXRlbSkgPT0gaSk7CgogICAgLy8gICAgZnMud3JpdGVGaWxlU3luYyhjbWRoaXN0LCBKU09OLnN0cmluZ2lmeShoaXN0LCBudWxsLCAyKSk7CiAgICBmcy53cml0ZUZpbGVTeW5jKAogICAgICBjbWRoaXN0LAogICAgICBoaXN0CiAgICAgICAgLmZpbHRlcihlbnRyeSA9PiAoZW50cnkgKyAnJykudHJpbSgpICE9ICcnKQogICAgICAgIC5tYXAoZW50cnkgPT4gZW50cnkucmVwbGFjZSgvXG4vZywgJ1xcXFxuJykgKyAnXG4nKQogICAgICAgIC5qb2luKCcnKQogICAgKTsKCiAgICBjb25zb2xlLmxvZyhgRVhJVCAod3JvdGUgJHtoaXN0Lmxlbmd0aH0gaGlzdG9yeSBlbnRyaWVzKWApOwogICAgVGVybWluYXRlKDApOwogIH0pOwoKICByZXBsLnJ1blN5bmMoKTsKfQoKZnVuY3Rpb24gVGVybWluYXRlKGV4aXRDb2RlKSB7CiAgY29uc29sZS5sb2coJ1Rlcm1pbmF0ZScsIGV4aXRDb2RlKTsKCiAgc3RkLmV4aXQoZXhpdENvZGUpOwp9CgpmdW5jdGlvbiB4bWwoc3RyaW5ncywgZXhwcmVzc2lvbnMpIHsKICBsZXQgW3RhZ10gPSBzdHJpbmdzOwogIHJldHVybiBlID0+IGUudGFnTmFtZSA9PSB0YWc7Cn0KCi8qZnVuY3Rpb24gTG9hZEhpc3RvcnkoZmlsZW5hbWUpIHsKICBsZXQgY29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGYtOCcpOwogIGxldCBkYXRhOwoKICBjb25zdCBwYXJzZSA9ICgpID0+IHsKICAgIHRyeSB7CiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnRzKTsKICAgIH0gY2F0Y2goZSkge30KICAgIGlmKGRhdGEpIHJldHVybiBkYXRhOwogICAgdHJ5IHsKICAgICAgZGF0YSA9IGNvbnRlbnRzLnNwbGl0KC9cbi9nKTsKICAgIH0gY2F0Y2goZSkge30KICAgIGlmKGRhdGEpIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiAocGFyc2UoKSA/PyBbXSkuZmlsdGVyKGVudHJ5ID0+IChlbnRyeSArICcnKS50cmltKCkgIT0gJycpLm1hcChlbnRyeSA9PiBlbnRyeS5yZXBsYWNlKC9cXG4vZywgJ1xuJykpOwp9CgpmdW5jdGlvbiBSZWFkSlNPTihmaWxlbmFtZSkgewogIGxldCBkYXRhID0gc3RkLmxvYWRGaWxlKGZpbGVuYW1lKTsKCiAgaWYoZGF0YSkgY29uc29sZS5sb2coYFJlYWRKU09OKCcke2ZpbGVuYW1lfScpICR7ZGF0YS5sZW5ndGh9IGJ5dGVzIHJlYWRgKTsKICByZXR1cm4gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiBudWxsOwp9Ki8KCmFzeW5jIGZ1bmN0aW9uIGltcG9ydE1vZHVsZShtb2R1bGVOYW1lLCAuLi5hcmdzKSB7CiAgLy9jb25zb2xlLmxvZygnaW1wb3J0TW9kdWxlJywgbW9kdWxlTmFtZSwgYXJncyk7CiAgbGV0IGRvbmUgPSBmYWxzZTsKICByZXR1cm4gYXdhaXQgaW1wb3J0KG1vZHVsZU5hbWUpCiAgICAudGhlbihtb2R1bGUgPT4gewogICAgICAvL2NvbnNvbGUubG9nKCdpbXBvcnQnLCB7IG1vZHVsZSB9KTsKICAgICAgZG9uZSA9IHRydWU7CiAgICAgIE9iamVjdC5hc3NpZ24oZ2xvYmFsVGhpcywgeyBbbW9kdWxlTmFtZV06IG1vZHVsZSB9KTsKICAgICAgcmV0dXJuIG1vZHVsZTsKICAgIH0pCiAgICAuY2F0Y2goZSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IobW9kdWxlTmFtZSArICc6JywgZSk7CiAgICAgIGRvbmUgPSB0cnVlOwogICAgfSk7CiAgLy8gd2hpbGUoIWRvbmUpIHN0ZC5zbGVlcCg1MCk7Cn0KCmZ1bmN0aW9uIFVwZGF0ZU1lYXN1cmVzKGJvYXJkKSB7CiAgaWYoIWJvYXJkKSByZXR1cm4gZmFsc2U7CiAgbGV0IGJvdW5kcyA9IGJvYXJkLmdldEJvdW5kcygpOwogIGxldCBtZWFzdXJlcyA9IGJvYXJkLmdldE1lYXN1cmVzKCk7CgogIGlmKG1lYXN1cmVzKSB7CiAgICBjb25zb2xlLmxvZygnZ290IG1lYXN1cmVzOicsIG1lYXN1cmVzKTsKICB9IGVsc2UgewogICAgbGV0IHJlY3QgPSBuZXcgUmVjdChib3VuZHMucmVjdCk7CiAgICBsZXQgbGluZXMgPSByZWN0LnRvTGluZXMobGluZXMgPT4gbmV3IExpbmVMaXN0KGxpbmVzKSk7CiAgICBsZXQgeyBwbGFpbiB9ID0gYm9hcmQ7CiAgICBwbGFpbi5yZW1vdmUoZSA9PiBlLnRhZ05hbWUgPT0gJ3dpcmUnICYmIGUuYXR0cmlidXRlcy5sYXllciA9PSAnNDcnKTsKICAgIHBsYWluLmFwcGVuZCgKICAgICAgLi4ubGluZXMubWFwKGxpbmUgPT4gKHsKICAgICAgICB0YWdOYW1lOiAnd2lyZScsCiAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgLi4ubGluZS50b09iamVjdCgpLAogICAgICAgICAgbGF5ZXI6IDQ3LAogICAgICAgICAgd2lkdGg6IDAKICAgICAgICB9CiAgICAgIH0pKQogICAgKTsKICAgIC8vY29uc29sZS5sb2coJ25vIG1lYXN1cmVzOicsIHsgYm91bmRzLCBsaW5lcyB9LCBbLi4ucGxhaW5dKTsKICAgIC8vcGxhaW4ucmVtb3ZlKGUgPT4gZS5hdHRyaWJ1dGVzLmxheWVyID09ICc1MScpOwogIH0KICAvL2NvbnNvbGUubG9nKCdib2FyZC5wbGFpbjonLCBib2FyZC5wbGFpbik7CiAgcmV0dXJuICFtZWFzdXJlczsKfQoKZnVuY3Rpb24gQWxpZ25JdGVtKGl0ZW0pIHsKICBsZXQgY2hhbmdlZDsKICAvLyBjb25zb2xlLmxvZygnQWxpZ25JdGVtJywgeyBpdGVtIH0pOwogIGxldCBvZmZzZXRQb3MgPSBuZXcgUG9pbnQoMCwgMCk7CiAgbGV0IGdlb21ldHJ5ID0gaXRlbS5nZW9tZXRyeTsKICBpZihpdGVtLnRhZ05hbWUgPT0gJ2VsZW1lbnQnKSB7CiAgICBsZXQgcGtnID0gaXRlbVsncGFja2FnZSddOwogICAgbGV0IHRyYW5zZm9ybWF0aW9uID0gaXRlbS50cmFuc2Zvcm1hdGlvbigpLmZpbHRlcih0ciA9PiB0ci50eXBlICE9ICd0cmFuc2xhdGUnKTsKICAgIGxldCBtYXRyaXggPSB0cmFuc2Zvcm1hdGlvbi50b01hdHJpeCgpOwogICAgLy9jb25zb2xlLmxvZygnQWxpZ25JdGVtOicsIHsgdHJhbnNmb3JtYXRpb24sIG1hdHJpeCB9KTsKICAgIG9mZnNldFBvcyA9IG5ldyBQb2ludChwa2cucGFkc1swXSkudHJhbnNmb3JtKG1hdHJpeCk7CiAgICBsZXQgaW5jaFBvcyA9IG9mZnNldFBvcy5xdW90KDIuNTQpOwogICAgLy8gY29uc29sZS5sb2coJ0FsaWduSXRlbTonLCB7IG9mZnNldFBvcywgaW5jaFBvcyB9KTsKICAgIGxldCBvbGRQb3MgPSBuZXcgUG9pbnQoaXRlbSk7CiAgICBpbmNoUG9zID0gb2xkUG9zLnF1b3QoMi41NCk7CiAgICAvLyBjb25zb2xlLmxvZygnQWxpZ25JdGVtOicsIHsgb2xkUG9zLCBpbmNoUG9zIH0pOwogICAgbGV0IHBhZFBvcyA9IG9sZFBvcy5zdW0ob2Zmc2V0UG9zKTsKICAgIGluY2hQb3MgPSBwYWRQb3MucXVvdCgyLjU0KTsKICAgIC8vIGNvbnNvbGUubG9nKCdBbGlnbkl0ZW06JywgeyBwYWRQb3MsIGluY2hQb3MgfSk7CiAgICBsZXQgbmV3UG9zID0gcGFkUG9zLnJvdW5kKDIuNTQpLmRpZmYob2Zmc2V0UG9zKS5yb3VuZCgwLjAwMDEsIDQpOwogICAgbGV0IGRpZmYgPSBuZXdQb3MuZGlmZihvbGRQb3MpOwogICAgbGV0IGJlZm9yZSA9IGl0ZW0ucGFyZW50Tm9kZS50b1hNTCgpOwogICAgLy9jb25zb2xlLmxvZygnZ2VvbWV0cnk6JywgT2JqZWN0LmVudHJpZXMoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoZ2VvbWV0cnkpKS5tYXAoKFtuYW1lLCB7IHZhbHVlIH1dKSA9PiBbbmFtZSwgdmFsdWUgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModmFsdWUpXSksIGdlb21ldHJ5LngxKTsKICAgIGluY2hQb3MgPSBuZXdQb3MucXVvdCgyLjU0KTsKICAgIC8vY29uc29sZS5sb2coJ0FsaWduSXRlbTonLCB7IG5ld1BvcywgZGlmZiwgaW5jaFBvcyB9KTsKICAgIGdlb21ldHJ5LmFkZChkaWZmKTsKICAgIGNoYW5nZWQgPSAhZGlmZi5pc051bGwoKTsKICB9CiAgaWYoaXRlbS50YWdOYW1lID09ICd3aXJlJykgewogICAgbGV0IG9sZENvb3JkID0gZ2VvbWV0cnkuY2xvbmUoKTsKICAgIGxldCBpbmNoQ29vcmQgPSBvbGRDb29yZC5xdW90KDIuNTQpOwogICAgLy9jb25zb2xlLmxvZygnQWxpZ25JdGVtOicsIHsgb2xkQ29vcmQsIGluY2hDb29yZCB9KTsKICAgIGxldCBuZXdDb29yZCA9IG9sZENvb3JkLmNsb25lKCkucm91bmQoMi41NCk7CiAgICBpbmNoQ29vcmQgPSBuZXdDb29yZC5xdW90KDIuNTQpOwogICAgLy9jb25zb2xlLmxvZygnQWxpZ25JdGVtOicsIHsgbmV3Q29vcmQsIGluY2hDb29yZCB9KTsKICAgIGxldCBkaWZmID0gbmV3Q29vcmQuZGlmZihvbGRDb29yZCk7CiAgICAvL2NvbnNvbGUubG9nKCdBbGlnbkl0ZW06JywgeyBkaWZmIH0pOwogICAgY2hhbmdlZCA9ICFkaWZmLmlzTnVsbCgpOwogICAgZ2VvbWV0cnkuYWRkKGRpZmYpOwogIH0KICBpZihjaGFuZ2VkKSB7CiAgICBjb25zb2xlLmxvZyhpdGVtKTsKICAgIC8qICAgIGNvbnNvbGUubG9nKCdhZnRlcjonLCBhYmJyZXZpYXRlKGl0ZW0ucGFyZW50Tm9kZS50b1hNTCgpKSk7CiAgICAgY29uc29sZS5sb2coJ2FsaWduXG4nLCBpdGVtLnhwYXRoKCksICdcbiBuZXdQb3M6JywgbmV3UG9zLCAnXG4gZGlmZjonLCBkaWZmLCAnXG4gYXR0cjonLCBpdGVtLnJhdy5hdHRyaWJ1dGVzKTsqLwogIH0KICByZXR1cm4gY2hhbmdlZDsKfQoKZnVuY3Rpb24gQWxpZ25BbGwoZG9jID0gZ2xvYmFsVGhpcy5kb2N1bWVudCkgewogIGlmKCFkb2MpIHJldHVybiBmYWxzZTsKCiAgbGV0IGl0ZW1zID0gZG9jLmdldEFsbChkb2MudHlwZSA9PSAnYnJkJyA/ICdlbGVtZW50JyA6ICdpbnN0YW5jZScpOwogIGxldCBjaGFuZ2VkID0gZmFsc2U7CiAgaXRlbXMgPSBbLi4uaXRlbXNdOwogIGNvbnNvbGUubG9nKCdpdGVtczonLCBpdGVtcyk7CiAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKSBjaGFuZ2VkIHw9IEFsaWduSXRlbShpdGVtKTsKICBsZXQgc2lnbmFsc19uZXRzID0gZG9jLmdldEFsbCgvKHNpZ25hbHN8bmV0cykvKTsKICAvL2NvbnNvbGUubG9nKCdzaWduYWxzX25ldHM6Jywgc2lnbmFsc19uZXRzKTsKICBmb3IobGV0IG5ldCBvZiBzaWduYWxzX25ldHMpIGZvciAobGV0IGl0ZW0gb2YgbmV0LmdldEFsbCgnd2lyZScpKSBjaGFuZ2VkIHw9IEFsaWduSXRlbShpdGVtKTsKICByZXR1cm4gISFjaGFuZ2VkOwp9CgpmdW5jdGlvbiBmaXhWYWx1ZShlbGVtZW50KSB7CiAgbGV0IHZhbHVlID0gZWxlbWVudC52YWx1ZTsKICBsZXQgbmV3VmFsdWU7CgogIHN3aXRjaCAoZWxlbWVudC5uYW1lWzBdKSB7CiAgICBjYXNlICdSJzogewogICAgICBuZXdWYWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14oWzAtOS5dKykoW21rTV0/KSg/Olx4RUZceEJGXHhCRHxceEMyXHhBOXxceDI2XHhDMipceEE5K3xcdTIxMjY/W1x4ODAtXHhGRl0rKShbXHgwMC1ceDdGXSopLywgJyQxJDJcdTIxMjYkMycpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgJ0wnOiB7CiAgICAgIG5ld1ZhbHVlID0gdmFsdWUucmVwbGFjZSgvXihbMC05Ll0rKSg/OltceDdGLVx4RkZdKlx4QjV8XHhFRlx4QkZceEJEKShILiopLywgJyQxXHUwMEI1JDInKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlICdDJzogewogICAgICBuZXdWYWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14oWzAtOS5dKykoPzpbXHg3Ri1ceEZGXSpceEI1fFx4RUZceEJGXHhCRCkoRi4qKS8sICckMVx1MDBCNSQyJyk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBpZihuZXdWYWx1ZSAmJiBuZXdWYWx1ZSAhPSB2YWx1ZSkgewogICAgY29uc29sZS5sb2coYGVsZW1lbnQgJHtlbGVtZW50fSB2YWx1ZSBjaGFuZ2VkIGZyb20gJyR7dmFsdWV9JyB0byAnJHtuZXdWYWx1ZX0nYCk7CiAgICBlbGVtZW50LmF0dHJpYnV0ZXNbJ3ZhbHVlJ10gPSBuZXdWYWx1ZTsKICB9Cn0KCmZ1bmN0aW9uIGZpeFZhbHVlcyhkb2MpIHsKICBpZihkb2MudHlwZSA9PSAnYnJkJykgZG9jLmVsZW1lbnRzLmZvckVhY2goZml4VmFsdWUpOwogIGVsc2UgaWYoZG9jLnR5cGUgPT0gJ3NjaCcpIGRvYy5wYXJ0cy5mb3JFYWNoKGZpeFZhbHVlKTsKfQoKZnVuY3Rpb24gY29vcmRNYXAoZG9jKSB7CiAgbGV0IG1hcCA9IG5ldyBNdWx0aW1hcCgpOwoKICBpZihkb2MudHlwZSA9PSAnYnJkJykgewogICAgZm9yKGxldCBbLCBzaWduYWxdIG9mIGRvYy5zaWduYWxzKSB7CiAgICAgIGZvcihsZXQgd2lyZSBvZiBzaWduYWwud2lyZXMpIHsKICAgICAgICBsZXQgbGluZSA9IG5ldyBMaW5lKHdpcmUuZ2VvbWV0cnkpOwogICAgICAgIGxldCBwb2ludHMgPSBsaW5lLnRvUG9pbnRzKCk7CiAgICAgICAgbGV0IFthLCBiXSA9IHBvaW50cy5tYXAocCA9PiBuZXcgUG9pbnQocCkpOwoKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGBzaWduYWwgJyR7c2lnbmFsLm5hbWV9JyB3aXJlICMke3NpZ25hbC53aXJlcy5pbmRleE9mKHdpcmUpfTpgLCBwb2ludHMpOwogICAgICAgIGNvbnNvbGUubG9nKGBzaWduYWwgJyR7c2lnbmFsLm5hbWV9JyB3aXJlICMke3NpZ25hbC53aXJlcy5pbmRleE9mKHdpcmUpfTpgLCB7IGEsIGIgfSk7CgogICAgICAgIG1hcC5zZXQoYS50b1N0cmluZygpLCBbc2lnbmFsLm5hbWUsIHdpcmUsIGJdKTsKICAgICAgICBtYXAuc2V0KGIudG9TdHJpbmcoKSwgW3NpZ25hbC5uYW1lLCB3aXJlLCBhXSk7CiAgICAgIH0KICAgIH0KICAgIGZvcihsZXQgZWxlbWVudCBvZiBkb2MuYm9hcmQuZWxlbWVudHMuY2hpbGRyZW4pIHsKICAgICAgbGV0IHBvcyA9IG5ldyBQb2ludChlbGVtZW50Lmdlb21ldHJ5KTsKICAgICAgbGV0IHRyYW5zZm9ybSA9IGVsZW1lbnQudHJhbnNmb3JtYXRpb24oKS5maWx0ZXIodCA9PiB0LnR5cGUgIT0gJ3RyYW5zbGF0ZScpOwogICAgICBjb25zb2xlLmxvZyhgZWxlbWVudCAnJHtlbGVtZW50Lm5hbWV9JzpgLCBwb3MsIHRyYW5zZm9ybSk7CiAgICAgIGxldCBpID0gMDsKICAgICAgbGV0IHsgY29udGFjdHJlZnMgfSA9IGVsZW1lbnQ7CiAgICAgIGNvbnNvbGUubG9nKGBjb250YWN0cmVmcyBgLCBjb250YWN0cmVmcyk7CiAgICAgIGZvcihsZXQgcGFkIG9mIGVsZW1lbnQucGFkcy5saXN0KSB7CiAgICAgICAgbGV0IHsgZ2VvbWV0cnkgfSA9IHBhZDsKICAgICAgICBjb25zb2xlLmxvZyhgcGFkICcke2VsZW1lbnQubmFtZX0uJHtwYWQubmFtZX0nOmAsIGdlb21ldHJ5KTsKICAgICAgICBsZXQgcGFkUG9zID0gbmV3IFBvaW50KGdlb21ldHJ5KTsKICAgICAgICBsZXQgY3JlZiA9IGNvbnRhY3RyZWZzW3BhZC5uYW1lXTsKICAgICAgICBtYXAuc2V0KHBhZFBvcy50b1N0cmluZygpLCBbY3JlZj8ucGFyZW50Tm9kZSA/PyBudWxsLCBlbGVtZW50LCBwYWQgLyosIGNyZWYqL10pOwogICAgICB9CiAgICB9CiAgfQogIGdsb2JhbFRoaXMubWFwQ29vcmRzID0gbWFwOwogIC8vICBjb25zb2xlLmxvZygnY29vcmRNYXAnLCB7IG1hcCB9KTsKICAvLyAgcmV0dXJuIG1hcDsKfQoKZnVuY3Rpb24gR2V0UG9seWdvbnMoZCA9IGRvYykgewogIHJldHVybiBbLi4uZC5nZXRBbGwoZSA9PiBlLnRhZ05hbWUgPT0gJ3BvbHlnb24nICYmIFsxLCAxNl0uaW5kZXhPZigrZS5hdHRyaWJ1dGVzLmxheWVyKSAhPSAtMSldOwp9CgpmdW5jdGlvbiBGaW5kUG9seWdvbnMoKSB7CiAgcmV0dXJuIChnbG9iYWxUaGlzLnBvbHlnb25zID0gZG9jcy5tYXAoZG9jID0+IFtkb2MsIEdldFBvbHlnb25zKGRvYykubWFwKGUgPT4gZS5wYXRoKV0pKTsKfQoKZnVuY3Rpb24gUmVtb3ZlUG9seWdvbnMocCA9IHBvbHlnb25zKSB7CiAgcG9seWdvbnMuZm9yRWFjaCgoW2RvYywgbGlzdF0pID0+IHsKICAgIGxpc3QuZm9yRWFjaChwYXRoID0+IGRlZXAudW5zZXQoZG9jLnJhdywgcGF0aCkpOwoKICAgIGRvYy5zYXZlVG8oKTsKICB9KTsKfQoKZnVuY3Rpb24gR2V0TmFtZXMoZG9jLCBwcmVkKSB7CiAgbGV0IGxpc3QsIG5hbWVzOwogIGlmKHR5cGVvZiBwcmVkICE9ICdmdW5jdGlvbicpIHByZWQgPSBlID0+ICEhZS5wYWNrYWdlOwoKICBzd2l0Y2ggKGRvYy50eXBlKSB7CiAgICBjYXNlICdzY2gnOiB7CiAgICAgIGxpc3QgPSBkb2Muc2hlZXRzLm1hcChzaGVldCA9PiBbLi4uc2hlZXQuaW5zdGFuY2VzLmxpc3RdKS5mbGF0KCk7CiAgICAgIGxpc3QgPSBbLi4ubGlzdF0uZmlsdGVyKHByZWQpOwogICAgICBuYW1lcyA9IGxpc3QubWFwKGUgPT4gZS5hdHRyaWJ1dGVzLnBhcnQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgJ2JyZCc6IHsKICAgICAgbGlzdCA9IGRvYy5lbGVtZW50cy5saXN0OwogICAgICBsaXN0ID0gWy4uLmxpc3RdLmZpbHRlcihwcmVkKTsKICAgICAgbmFtZXMgPSBsaXN0Lm1hcChlID0+IGUuYXR0cmlidXRlcy5uYW1lKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBkZWZhdWx0OiB7CiAgICAgIG5hbWVzID0gZGVlcAogICAgICAgIC5zZWxlY3QoZG9jLnJhdywgZSA9PiBlLmF0dHJpYnV0ZXMubmFtZSwgZGVlcC5SRVRVUk5fVkFMVUVfUEFUSCkKICAgICAgICAuZmlsdGVyKChbdiwgcF0pID0+IFsnc3ltYm9sJywgJ2RldmljZScsICdwYWNrYWdlJ10uaW5kZXhPZih2LnRhZ05hbWUpICE9IC0xKQogICAgICAgIC5tYXAoKFt2LCBwXSkgPT4gdi5hdHRyaWJ1dGVzLm5hbWUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHVuaXF1ZShuYW1lcyk7Cn0KCmxldCBuYW1lTWFwcyA9ICgoKSA9PiB7CiAgbGV0IGFzc29jID0gbmV3IFdlYWtNYXAoKTsKCiAgcmV0dXJuIG1lbW9pemUoZG9jID0+IHsKICAgIGxldCBtYXA7CiAgICBzd2l0Y2ggKGRvYy50eXBlKSB7CiAgICAgIGNhc2UgJ3NjaCc6IHsKICAgICAgICBtYXAgPSBuZXcgTWFwKGRvYy5zaGVldHMubWFwKHNoZWV0ID0+IFsuLi5zaGVldC5pbnN0YW5jZXNdKS5mbGF0KCkpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ2JyZCc6IHsKICAgICAgICBtYXAgPSBuZXcgTWFwKFsuLi5kb2MuZWxlbWVudHNdKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG1hcDsKICB9KTsKfSkoKTsKCmZ1bmN0aW9uIEdldEJ5TmFtZShkb2MsIG5hbWUpIHsKICBsZXQgbWFwID0gbmFtZU1hcHMoZG9jKTsKCiAgLy9jb25zb2xlLmxvZygiR2V0QnlOYW1lIiwgbWFwKTsKICByZXR1cm4gbWFwLmdldChuYW1lKTsKfQoKZnVuY3Rpb24gQ29ycmVsYXRlU2NoZW1hdGljQW5kQm9hcmQoc2NoZW1hdGljLCBib2FyZCkgewogIGlmKCFzY2hlbWF0aWMpIHNjaGVtYXRpYyA9IHByb2plY3Quc2NoZW1hdGljOwogIGlmKCFib2FyZCkgYm9hcmQgPSBwcm9qZWN0LmJvYXJkOwogIGxldCBkb2N1bWVudHMgPSBbc2NoZW1hdGljLCBib2FyZF07CiAgbGV0IG5hbWVzID0gZG9jdW1lbnRzLm1hcChkID0+IEdldE5hbWVzKGQpKTsKICBsZXQgYWxsTmFtZXMgPSBNYXRoLm1heCguLi5uYW1lcy5tYXAobiA9PiBuLmxlbmd0aCkpOwogIGxldCBpbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3QoLi4ubmFtZXMpOwoKICBpZihhbGxOYW1lcy5sZW5ndGggPiBpbnRlcnNlY3Rpb24ubGVuZ3RoKSBjb25zb2xlLndhcm4oYFdBUk5JTkc6IE9ubHkgJHtpbnRlcnNlY3Rpb24ubGVuZ3RofSBuYW1lcyBvZiAke2FsbE5hbWVzLmxlbmd0aH0gY29ycmVsYXRlYCk7CiAgY29uc29sZS5sb2coYGludGVyc2VjdGlvbmAsIGludGVyc2VjdGlvbik7CgogIHJldHVybiAvKm5ldyBNYXAqLyBpbnRlcnNlY3Rpb24ubWFwKG5hbWUgPT4gW25hbWUsIGRvY3VtZW50cy5tYXAoZG9jID0+IEdldEJ5TmFtZShkb2MsIG5hbWUpKV0pOwp9CgpmdW5jdGlvbiBHZXRTaGVldHMoZG9jX29yX3Byb2opIHsKICBpZighKGRvY19vcl9wcm9qIGluc3RhbmNlb2YgRWFnbGVEb2N1bWVudCkpIGRvY19vcl9wcm9qID0gZG9jX29yX3Byb2ouc2NoZW1hdGljOwoKICByZXR1cm4gWy4uLmRvY19vcl9wcm9qLnNjaGVtYXRpYy5zaGVldHNdOwp9CgpmdW5jdGlvbiBTYXZlTGlicmFyaWVzKCkgewogIGNvbnN0IHsgc2NoZW1hdGljLCBib2FyZCB9ID0gcHJvamVjdDsKICBjb25zdCBsYXllck1hcCA9IC8qT2JqZWN0LnZhbHVlcyovIFsuLi5zY2hlbWF0aWMubGF5ZXJzLCAuLi5ib2FyZC5sYXllcnNdLmZpbHRlcigoW24sIGVdKSA9PiBlLmFjdGl2ZSkucmVkdWNlKChhY2MsIFtuLCBlXSkgPT4gKHsgLi4uYWNjLCBbZS5udW1iZXJdOiBlLnJhdyB9KSwge30pOwogIGNvbnN0IGVudGl0aWVzID0gWydzeW1ib2xzJywgJ3BhY2thZ2VzJywgJ2RldmljZXNldHMnXTsKCiAgbGV0IGxheWVySWRzID0gZGVlcAogICAgLnNlbGVjdChbc2NoZW1hdGljLnJhdywgYm9hcmQucmF3XSwgZSA9PiBlICYmIGUubGF5ZXIpCiAgICAubWFwKGUgPT4gK2UubGF5ZXIpCiAgICAuY29uY2F0KHJhbmdlKDE3LCA0OSkpCiAgICAuc29ydCgoYSwgYikgPT4gYSAtIGIpOwogIGxheWVySWRzID0gdW5pcXVlKGxheWVySWRzKTsKICBsZXQgbGF5ZXJzID0gbGF5ZXJJZHMubWFwKGlkID0+IGxheWVyTWFwW2lkXSk7CgogIC8vICBjb25zb2xlLmxvZygnbGF5ZXJzJywgbGF5ZXJzKTsKICBjb25zb2xlLmxvZygKICAgICdsYXllcklkcycsCiAgICBjb25zb2xlLmNvbmZpZyh7IGNvbXBhY3Q6IDIgfSksCiAgICBsYXllcklkcy5tYXAoaWQgPT4gW2lkLCBsYXllck1hcFtpZF0uYXR0cmlidXRlcy5uYW1lXSkKICApOwoKICBjb25zdCBsaWJyYXJ5TmFtZXMgPSB1bmlxdWUoWy4uLnNjaGVtYXRpYy5saWJyYXJpZXMsIC4uLmJvYXJkLmxpYnJhcmllc10ubWFwKChbbiwgZV0pID0+IG4pKTsKICBjb25zb2xlLmxvZygnbGlicmFyeU5hbWVzJywgbGlicmFyeU5hbWVzKTsKCiAgY29uc3QgbGlicmFyaWVzID0gbGlicmFyeU5hbWVzLm1hcChuYW1lID0+IFtuYW1lLCBzY2hlbWF0aWMuZ2V0TGlicmFyeShuYW1lKSwgYm9hcmQuZ2V0TGlicmFyeShuYW1lKV0pOwogIGZvcihsZXQgW25hbWUsIC4uLmxpYnNdIG9mIGxpYnJhcmllcykgewogICAgbGV0IG9iaiA9IHsgc3ltYm9sczogW10sIHBhY2thZ2VzOiBbXSwgZGV2aWNlc2V0czogW10gfTsKCiAgICBsZXQgeG1sID0gewogICAgICB0YWdOYW1lOiAnbGlicmFyeScsCiAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgewogICAgICAgICAgdGFnTmFtZTogJ2Rlc2NyaXB0aW9uJywKICAgICAgICAgIGF0dHJpYnV0ZXM6IHt9LAogICAgICAgICAgY2hpbGRyZW46IFtgJHtuYW1lfS5sYnIgbGlicmFyeWBdCiAgICAgICAgfQogICAgICBdLAogICAgICBhdHRyaWJ1dGVzOiB7IG5hbWUgfQogICAgfTsKCiAgICBmb3IobGV0IGxpYiBvZiBsaWJzKSB7CiAgICAgIGlmKGxpYikgewogICAgICAgIGZvcihsZXQgZW50aXR5IG9mIGVudGl0aWVzKSB7CiAgICAgICAgICBpZihsaWJbZW50aXR5XSkgb2JqW2VudGl0eV0gPSBbLi4ub2JqW2VudGl0eV0sIC4uLmxpYltlbnRpdHldXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGZvcihsZXQgZW50aXR5IG9mIGVudGl0aWVzKSB7CiAgICAgIG9ialtlbnRpdHldID0gb2JqW2VudGl0eV0ucmVkdWNlKChhY2MsIFtuLCBlXSkgPT4gKHsgLi4uYWNjLCBbbl06IGUucmF3IH0pLCB7fSk7CiAgICB9CgogICAgZm9yKGxldCBlbnRpdHkgb2YgZW50aXRpZXMpIHsKICAgICAgb2JqW2VudGl0eV0gPSBPYmplY3QudmFsdWVzKG9ialtlbnRpdHldKTsKCiAgICAgIHhtbC5jaGlsZHJlbi5wdXNoKHsKICAgICAgICB0YWdOYW1lOiBlbnRpdHksCiAgICAgICAgY2hpbGRyZW46IG9ialtlbnRpdHldCiAgICAgIH0pOwogICAgfQoKICAgIC8vIGNvbnNvbGUubG9nKCcnLCBjb25zb2xlLmNvbmZpZyh7IGNvbXBhY3Q6IDMsIGRlcHRoOiA0IH0pLCB4bWwpOwoKICAgIHhtbCA9IHsKICAgICAgdGFnTmFtZTogJz94bWwnLAogICAgICBhdHRyaWJ1dGVzOiB7IHZlcnNpb246ICcxLjAnLCBlbmNvZGluZzogJ3V0Zi04JyB9LAogICAgICBjaGlsZHJlbjogWwogICAgICAgIHsKICAgICAgICAgIHRhZ05hbWU6ICchRE9DVFlQRSBlYWdsZSBTWVNURU0gImVhZ2xlLmR0ZCInLAogICAgICAgICAgYXR0cmlidXRlczoge30sCiAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRhZ05hbWU6ICdlYWdsZScsCiAgICAgICAgICBhdHRyaWJ1dGVzOiB7IHZlcnNpb246ICc2LjQuMScgfSwKICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0YWdOYW1lOiAnZHJhd2luZycsCiAgICAgICAgICAgICAgYXR0cmlidXRlczoge30sCiAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdGFnTmFtZTogJ3NldHRpbmdzJywKICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge30sCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZTogJ3NldHRpbmcnLAogICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogeyBhbHdheXN2ZWN0b3Jmb250OiAnbm8nIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWU6ICdzZXR0aW5nJywKICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHsgdmVydGljYWx0ZXh0OiAndXAnIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRhZ05hbWU6ICdncmlkJywKICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiAnMC4zMTc1JywKICAgICAgICAgICAgICAgICAgICB1bml0ZGlzdDogJ21tJywKICAgICAgICAgICAgICAgICAgICB1bml0OiAnbW0nLAogICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnbGluZXMnLAogICAgICAgICAgICAgICAgICAgIG11bHRpcGxlOiAnMScsCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ3llcycsCiAgICAgICAgICAgICAgICAgICAgYWx0ZGlzdGFuY2U6ICcwLjAyNScsCiAgICAgICAgICAgICAgICAgICAgYWx0dW5pdGRpc3Q6ICdtbScsCiAgICAgICAgICAgICAgICAgICAgYWx0dW5pdDogJ21tJwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB0YWdOYW1lOiAnbGF5ZXJzJywKICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge30sCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBsYXllcnMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB4bWwKICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CiAgICAgIF0KICAgIH07CgogICAgLy8gICAgY29uc29sZS5sb2coJ3htbCcsIGNvbnNvbGUuY29uZmlnKHsgY29tcGFjdDogMywgZGVwdGg6IDkgfSksIHhtbCk7CiAgICBXcml0ZUZpbGUoYCR7bmFtZX0ubGJyYCwgdG9YTUwoeG1sKSk7CiAgfQoKICByZXR1cm4geG1sOwogIC8vY29uc29sZS5sb2coJ2xpYnJhcmllcycsIGxpYnJhcmllcyk7Cn0KCmFzeW5jIGZ1bmN0aW9uIHRlc3RFYWdsZShmaWxlbmFtZSkgewogIGNvbnNvbGUubG9nKCd0ZXN0RWFnbGU6ICcsIGZpbGVuYW1lKTsKICBsZXQgcHJvaiA9IG5ldyBFYWdsZVByb2plY3QoZmlsZW5hbWUsIGZzKTsKICBjb25zb2xlLmxvZygnUHJvamVjdCBsb2FkZWQ6ICcsICFwcm9qLmZhaWxlZCk7CiAgY29uc29sZS5sb2coJ1Byb2plY3Q6ICcsIHByb2opOwogIGNvbnNvbGUubG9nKCdwcm9qLmRvY3VtZW50cycsIHByb2ouZG9jdW1lbnRzKTsKICBsZXQgeyBib2FyZCwgc2NoZW1hdGljIH0gPSBwcm9qOwogIGNvbnN0IHBhY2thZ2VzID0gewogICAgYm9hcmQ6IChib2FyZCAmJiBib2FyZC5lbGVtZW50cyAmJiBbLi4uYm9hcmQuZWxlbWVudHNdLm1hcCgoW25hbWUsIGVdKSA9PiBlLnBhY2thZ2UpKSB8fCBbXSwKICAgIHNjaGVtYXRpYzogKHNjaGVtYXRpYyAmJiBzY2hlbWF0aWMuc2hlZXRzICYmIFsuLi5zY2hlbWF0aWMuc2hlZXRzXS5tYXAoZSA9PiBbLi4uZS5pbnN0YW5jZXNdLm1hcCgoW25hbWUsIGldKSA9PiBpLnBhcnQuZGV2aWNlLnBhY2thZ2UpLmZpbHRlcihwID0+IHAgIT09IHVuZGVmaW5lZCkpLmZsYXQoKSkgfHwgW10KICB9OwogIGxldCBwYXJ0cyA9IChzY2hlbWF0aWMgJiYgc2NoZW1hdGljLnBhcnRzKSB8fCBbXTsKICBsZXQgc2hlZXRzID0gKHNjaGVtYXRpYyAmJiBzY2hlbWF0aWMuc2hlZXRzKSB8fCBbXTsKICBsZXQgbGlicmFyaWVzID0gKGJvYXJkICYmIGJvYXJkLmxpYnJhcmllcykgfHwgW107CiAgbGV0IGVsZW1lbnRzID0gKGJvYXJkICYmIGJvYXJkLmVsZW1lbnRzKSB8fCBbXTsKICBmb3IobGV0IFtsaWJOYW1lLCBsaWJdIG9mIGxpYnJhcmllcykgewogICAgZm9yKGxldCBbcGtnTmFtZSwgcGtnXSBvZiBsaWIucGFja2FnZXMpCiAgICAgIGZvcihsZXQgcGFkIG9mIHBrZy5jaGlsZHJlbikgewogICAgICAgIGlmKHBhZC50YWdOYW1lICE9PSAncGFkJykgY29udGludWU7CiAgICAgICAgcGFkLnNldEF0dHJpYnV0ZSgnZHJpbGwnLCAnMC43Jyk7CiAgICAgICAgcGFkLnNldEF0dHJpYnV0ZSgnZGlhbWV0ZXInLCAnMS43NzgnKTsKICAgICAgICBwYWQucmVtb3ZlQXR0cmlidXRlKCdzdG9wJyk7CiAgICAgICAgcGFkLnJlbW92ZUF0dHJpYnV0ZSgncm90Jyk7CiAgICAgICAgcGFkLnJlbW92ZUF0dHJpYnV0ZSgnc2hhcGUnKTsKICAgICAgfQogIH0KICBsZXQgY21kcyA9IFtdOwogIGZvcihsZXQgW25hbWUsIGVsZW1dIG9mIGVsZW1lbnRzKSB7CiAgICBjbWRzLnB1c2goYE1PVkUgJHtlbGVtLm5hbWV9ICR7ZWxlbS5wb3N9O2ApOwogICAgaWYoZWxlbS5yb3QpIGNtZHMucHVzaChgUk9UQVRFICR7ZWxlbS5yb3R9ICR7ZWxlbS5uYW1lfTtgKTsKICB9CiAgY29uc29sZS5sb2coJ3Byb2ouYm9hcmQnLCBwcm9qLmJvYXJkKTsKICBpZihwcm9qLmJvYXJkKSBVcGRhdGVNZWFzdXJlcyhwcm9qLmJvYXJkKTsKICBpZihBbGlnbkFsbChib2FyZCkgfHwgQWxpZ25BbGwoc2NoZW1hdGljKSkgY29uc29sZS5sb2coJ1NhdmVkOicsIGF3YWl0IHByb2ouc2F2ZVRvKCd0bXAnLCB0cnVlKSk7CiAgY29uc29sZS5sb2coJ2RvY3VtZW50cycsIHByb2ouZG9jdW1lbnRzKTsKICBjb25zb2xlLmxvZygnc2F2ZWQ6JywgYXdhaXQgcHJvai5zYXZlVG8oJ3RtcCcsIHRydWUpKTsKICBmb3IobGV0IGRvYyBvZiBwcm9qLmRvY3VtZW50cykgewogICAgbGV0IGNoYW5nZWQgPSBmYWxzZTsKICAgIGNvbnNvbGUubG9nKCdlYWdsZTonLCBjbGFzc05hbWUoZG9jLmZpbmQoJ2VhZ2xlJykpKTsKICAgIGZvcihsZXQgcGtnIG9mIGRvYy5maW5kKCdlYWdsZScpLmdldEFsbCgncGFja2FnZScpKSB7CiAgICAgIGxldCBpbmRleGVzID0gWy4uLnBrZy5jaGlsZHJlbl0ubWFwKChjaGlsZCwgaSwgYSkgPT4KICAgICAgICBhCiAgICAgICAgICAuc2xpY2UoaSArIDEpCiAgICAgICAgICAubWFwKChjaGlsZDIsIGkyKSA9PiBbaTIgKyBpICsgMSwgY2hpbGQucmF3ID09PSBjaGlsZDIucmF3XSkKICAgICAgICAgIC5maWx0ZXIoKFtpbmRleCwgZXF1YWxdKSA9PiBlcXVhbCkKICAgICAgICAgIC5tYXAoKFtpbmRleF0pID0+IGluZGV4KQogICAgICApOwogICAgICBpbmRleGVzID0gaW5kZXhlcy5mbGF0KCkucmV2ZXJzZSgpOwogICAgICBsZXQgcGF0aHMgPSBpbmRleGVzLm1hcChpID0+IHBrZy5wYXRoLmRvd24oJ2NoaWxkcmVuJywgaSkpOwogICAgICBjb25zb2xlLmxvZygnaW5kZXhlcycsIHBrZy5uYW1lLCBwYXRocyk7CiAgICAgIHBhdGhzLmZvckVhY2goaSA9PiBkZWVwLnVuc2V0KGRvYy5yYXcsIFsuLi5pXSkpOwogICAgICBjaGFuZ2VkID0gY2hhbmdlZCB8fCBpbmRleGVzLmxlbmd0aCA+IDA7CiAgICB9CiAgICBpZihjaGFuZ2VkKSB7CiAgICAgIGRvYy5zYXZlVG8oZG9jLmZpbGVuYW1lKTsKICAgICAgY29uc29sZS5sb2coJ1NhdmVkOicsIGRvYy5maWxlbmFtZSk7CiAgICB9CiAgfQogIGxldCBkZXNjID0gcHJvai5kb2N1bWVudHMubWFwKGRvYyA9PiBbZG9jLmZpbGVuYW1lLCBkb2MuZmluZCgnZGVzY3JpcHRpb24nKV0pOwogIGNvbnNvbGUubG9nKCdkZXNjJywgZGVzYyk7CiAgZGVzYyA9IGRlc2MubWFwKChbZmlsZSwgZV0pID0+IFtmaWxlLCBlICYmIGUueHBhdGgoKV0pLm1hcCgoW2ZpbGUsIHhwYXRoXSkgPT4gW2ZpbGUsIHhwYXRoICYmIHhwYXRoLnRvQ29kZSgnJywgeyBzcGFjaW5nOiAnJywgZnVuY3Rpb246IHRydWUgfSldKTsKICBkZXNjID0gbmV3IE1hcChkZXNjKTsKICBjb25zb2xlLmxvZygnZGVzY3JpcHRpb25zJywgWy4uLm1hcChkZXNjLCAoW2ssIHZdKSA9PiBbaywgdl0pXSk7CiAgcmV0dXJuIHByb2o7Cn0KCmZ1bmN0aW9uIE1vZGlmeVBhdGgocCwgZm4gPSAoZGlyLCBiYXNlLCBleHQpID0+IFtkaXIsIGJhc2UsIGV4dF0pIHsKICBsZXQgW2RpciwgYmFzZSwgZXh0XSA9ICgoKSA9PiB7CiAgICBsZXQgeyBkaXIsIGJhc2UsIGV4dCB9ID0gcGF0aC50b09iamVjdChwKTsKICAgIHJldHVybiBmbihkaXIsIGJhc2UsIGV4dCk7CiAgfSkoKTsKCiAgcmV0dXJuIHBhdGguZnJvbU9iamVjdCh7IGRpciwgYmFzZSwgZXh0IH0pOwp9CgpmdW5jdGlvbiBBcHBlbmRUb0ZpbGVuYW1lKHAsIHN0ciA9ICcnKSB7CiAgcmV0dXJuIE1vZGlmeVBhdGgocCwgKGRpciwgYmFzZSwgZXh0KSA9PiBbZGlyLCBiYXNlICsgc3RyLCBleHRdKTsKfQoKZnVuY3Rpb24gU2V0U1ZHQmFja2dyb3VuZCh4bWwsIGNvbG9yID0gJyNmZmZmZmYnKSB7CiAgbGV0IHN2Z05vZGU7CiAgbGV0IGJnUmVjdCA9IGRlZXAuZmluZCh4bWwsIChlLCBuKSA9PiBlLnRhZ05hbWUgPT0gJ3JlY3QnICYmIGUuYXR0cmlidXRlcy5pZCA9PSAnYmFja2dyb3VuZC1yZWN0JywgZGVlcC5SRVRVUk5fUEFUSCk7CgogIGlmKGJnUmVjdCkgdGhyb3cgbmV3IEVycm9yKCdiYWNrZ3JvdW5kLXJlY3QgYWxyZWF5IHNldCcpOwoKICBpZigoc3ZnTm9kZSA9IGRlZXAuZmluZCh4bWwsIChlLCBuKSA9PiBlLnRhZ05hbWUgPT0gJ3N2ZycsIGRlZXAuUkVUVVJOX1ZBTFVFKSkpIHsKICAgIGxldCBkZWZzID0gZGVlcC5maW5kKHhtbCwgKGUsIG4pID0+IGUudGFnTmFtZSA9PSAnZGVmcycsIGRlZXAuUkVUVVJOX1BBVEgpOwogICAgbGV0IGdwYXRoID0gZGVlcC5maW5kKHhtbCwgKGUsIG4pID0+IGUudGFnTmFtZSA9PSAnZycsIGRlZXAuUkVUVVJOX1BBVEgpOwogICAgbGV0IGNoaWxkcmVuID0gZGVlcC5nZXQoeG1sLCBkZWZzLnNsaWNlKDAsIC0xKSk7CgogICAgLy9jb25zb2xlLmxvZygnU2V0U1ZHQmFja2dyb3VuZCcse2dwYXRofSk7CgogICAgbGV0IHsgdmlld0JveCB9ID0gc3ZnTm9kZS5hdHRyaWJ1dGVzOwogICAgbGV0IHJlY3QgPSBSZWN0LmZyb21TdHJpbmcodmlld0JveCk7CiAgICBsZXQgcG9zID0gZGVmc1tkZWZzLmxlbmd0aCAtIDFdID8/IDA7CiAgICAvL2NvbnNvbGUubG9nKCdTZXRTVkdCYWNrZ3JvdW5kJyx7dmlld0JveCxyZWN0LHBvc30pOwoKICAgIGNoaWxkcmVuLnNwbGljZShwb3MgKyAxLCAwLCB7CiAgICAgIHRhZ05hbWU6ICdyZWN0JywKICAgICAgYXR0cmlidXRlczogewogICAgICAgIGlkOiAnYmFja2dyb3VuZC1yZWN0JywKICAgICAgICBmaWxsOiAnI2ZmZicsCiAgICAgICAgLi4ucmVjdC50b09iamVjdCgpCiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB4bWw7CiAgfQp9Cgpjb25zdCBGaWxlRnVuY3Rpb24gPSAoZm4sIHJmbiA9IFJlYWRGaWxlLCB3Zm4gPSBXcml0ZUZpbGUsIG5hbWVmbiA9IG4gPT4gbiwgLi4uYXJncykgPT4gewogIHJldHVybiAoZmlsZW5hbWUsIC4uLmFyZ3MpID0+IHsKICAgIGxldCBkYXRhID0gcmZuKGZpbGVuYW1lLCAuLi5hcmdzKTsKCiAgICBsZXQgb3V0cHV0ID0gZm4oZGF0YSwgLi4uYXJncyk7CgogICAgcmV0dXJuIHdmbihuYW1lZm4oZmlsZW5hbWUpLCBvdXRwdXQsIC4uLmFyZ3MpOwogIH07Cn07Cgpjb25zdCBTVkdGaWxlU2V0QmFja2dyb3VuZCA9IEZpbGVGdW5jdGlvbihTZXRTVkdCYWNrZ3JvdW5kLCBSZWFkWE1MLCBXcml0ZVhNTCwgbiA9PiBBcHBlbmRUb0ZpbGVuYW1lKG4sICcud2l0aC1iYWNrZ3JvdW5kJyksIGZhbHNlKTsKY29uc3QgU1ZHUmVzYXZlID0gRmlsZUZ1bmN0aW9uKAogIGRhdGEgPT4gZGF0YSwKICBSZWFkWE1MLAogIFdyaXRlWE1MLAogIG4gPT4gbiwKICBmYWxzZQopOwoKZnVuY3Rpb24gUHV0Um93c0NvbHVtbnMocm93cykgewogIGxldCBjb2x1bW5MZW5ndGggPSByb3dzLnJlZHVjZSgoYWNjLCByb3cpID0+IHsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCByb3cubGVuZ3RoOyBpKyspIGFjY1tpXSA9IE1hdGgubWF4KGFjY1tpXSB8IDAsIChyb3dbaV0gKyAnJykubGVuZ3RoKTsKICAgIHJldHVybiBhY2M7CiAgfSwgW10pOwogIGNvbnNvbGUubG9nKCdjb2x1bW5MZW5ndGgnLCBjb2x1bW5MZW5ndGgpOwogIGNvbHVtbkxlbmd0aFtjb2x1bW5MZW5ndGgubGVuZ3RoIC0gMV0gPSAwOwoKICByZXR1cm4gcm93cy5tYXAocm93ID0+IHJvdy5tYXAoKGNvbCwgaSkgPT4gKGNvbCArICcnKS5wYWRFbmQoY29sdW1uTGVuZ3RoW2ldLCAnICcpKS5qb2luKCcgJykpLmpvaW4oJ1xuJyk7Cn0KCmZ1bmN0aW9uIEdldExpYnJhcnkoZSkgewogIGxldCBkZXB0aCA9IDA7CiAgd2hpbGUoKGUgPSBlLnBhcmVudE5vZGUpKSB7CiAgICBjb25zdCB7IHRhZ05hbWUgfSA9IGU7CiAgICBpZih0YWdOYW1lID09ICdsaWJyYXJ5JykgcmV0dXJuIGU7CiAgICBpZih0YWdOYW1lID09ICdlYWdsZScpIGJyZWFrOwogICAgLy9jb25zb2xlLmxvZygnR2V0TGlicmFyeScsIHsgZSwgZGVwdGggfSk7CiAgICBkZXB0aCsrOwogIH0KfQoKZnVuY3Rpb24gRWxlbWVudE5hbWUoZSkgewogIGxldCBuID0gZS5uYW1lOwogIG4gPSBuLnJlcGxhY2UoL1teQS1aYS16MC05X10vZywgJ18nKTsKCiAgaWYoIS9eW0EtWmEtel0vaS50ZXN0KG4pKSB7CiAgICBpZihlLnRhZ05hbWUgPT0gJ3BhY2thZ2UnKSBuID0gbi5yZXBsYWNlKC9eWzAtOV0rXy9nLCAnJyk7CiAgICBsZXQgbGliID0gR2V0TGlicmFyeShlKTsKICAgIGlmKGxpYiAmJiBsaWIubmFtZSkgbiA9IGxpYi5uYW1lICsgbjsKICB9CiAgbiA9IG4ucmVwbGFjZSgvKFswLTldKV8oW0EtWmEtel0pL2csICckMSQyJyk7CgogIGlmKGUudGFnTmFtZSA9PSAncGFja2FnZScpIG4gPSBuLnRvTG93ZXJDYXNlKCk7CiAgaWYoZS50YWdOYW1lID09ICdwYWNrYWdlJykgbiA9IG4ucmVwbGFjZSgvX1swLTldK3hbMC05XSskL2csICcnKTsKICByZXR1cm4gbjsKfQoKZnVuY3Rpb24gR2V0Um90YXRpb24oZWxlbWVudCkgewogIGxldCB7IHJvdCB9ID0gZWxlbWVudDsKICBsZXQgbWlycm9yID0gZmFsc2U7CiAgbGV0IGFuZ2xlID0gMDsKCiAgaWYodHlwZW9mIHJvdCA9PSAnc3RyaW5nJyAmJiByb3QuaW5kZXhPZignTScpICE9IC0xKSB7CiAgICBtaXJyb3IgPSB0cnVlOwogICAgcm90ID0gcm90LnJlcGxhY2UoL00vZywgJycpOwogIH0KICBpZih0eXBlb2Ygcm90ID09ICdzdHJpbmcnICYmIHJvdC5pbmRleE9mKCdSJykgIT0gLTEpIHsKICAgIHJvdCA9IHJvdC5yZXBsYWNlKC9SL2csICcnKTsKICAgIGFuZ2xlID0gK3JvdDsKICB9CiAgcmV0dXJuIFttaXJyb3IsIGFuZ2xlXTsKfQoKZnVuY3Rpb24gUGFja2FnZTJDaXJjdWl0KHApIHsKICBsZXQgcG9pbnRzID0gcC5wYWRzCiAgICAubWFwKCh7IHgsIHkgfSkgPT4gbmV3IFBvaW50KHgsIHkpKQogICAgLm1hcChwdCA9PiBwdC5kaXYoMi41NCkpCiAgICAubWFwKHB0ID0+IHB0LnRvRml4ZWQoMSkpOwoKICBsZXQgeHBvaW50cyA9IHBvaW50cy5tYXAoKHsgeCB9KSA9PiB4KSwKICAgIHlwb2ludHMgPSBwb2ludHMubWFwKCh7IHkgfSkgPT4geSk7CgogIGlmKHVuaXF1ZSh5cG9pbnRzKS5sZW5ndGggPiB1bmlxdWUoeHBvaW50cykubGVuZ3RoKSB7CiAgICBwb2ludHMgPSBwb2ludHMubWFwKHB0ID0+IHB0LnJvdGF0ZShNYXRoLlBJIC8gMikudG9GaXhlZCgxKSk7CiAgICBjb25zb2xlLmxvZygnUGFja2FnZTJDaXJjdWl0KDEpJywgeyBwb2ludHMgfSk7CiAgfQoKICBsZXQgaGFsZiA9IHBvaW50cy5maWx0ZXIocHQgPT4gWy4uLnB0XS5zb21lKGNvb3JkID0+IGNvb3JkICE9IDAgJiYgTWF0aC5hYnMoY29vcmQpIDwgMSkpOwoKICBpZihoYWxmLmxlbmd0aCkgewogICAgbGV0IHQgPSBuZXcgVHJhbnNsYXRpb24oLi4uaGFsZlswXSkuaW52ZXJ0KCk7CiAgICAvLyBjb25zb2xlLmxvZygndCcsIHQpOyAgICBwb2ludHMgPSBwb2ludHMubWFwKHB0ID0+IHB0LnRyYW5zZm9ybSh0KSk7CiAgfQoKICBsZXQgeG9mZnMgPSB1bmlxdWUoeHBvaW50cy5tYXAoeCA9PiBNYXRoLmFicyh4ICUgMSkpKTsKICBsZXQgeW9mZnMgPSB1bmlxdWUoeXBvaW50cy5tYXAoeSA9PiBNYXRoLmFicyh5ICUgMSkpKTsKCiAgaWYoeG9mZnMubGVuZ3RoID09IDEgJiYgeG9mZnNbMF0gIT0gMCkgewogICAgcG9pbnRzID0gcG9pbnRzLm1hcCgoeyB4LCB5IH0pID0+IG5ldyBQb2ludCh4IC0geG9mZnNbMF0sIHkpKTsKICB9CiAgaWYoeW9mZnMubGVuZ3RoID09IDEgJiYgeW9mZnNbMF0gIT0gMCkgewogICAgcG9pbnRzID0gcG9pbnRzLm1hcCgoeyB4LCB5IH0pID0+IG5ldyBQb2ludCh4LCB5IC0geW9mZnNbMF0pKTsKICB9CgogIGlmKHhvZmZzLmxlbmd0aCA+IDEgfHwgeW9mZnMubGVuZ3RoID4gMSAvKiB8fCBwLm5hbWUuc3RhcnRzV2l0aCgnRElMMjgnKSovKSBjb25zb2xlLmxvZygnUGFja2FnZTJDaXJjdWl0KDIpJywgeyBwb2ludHMsIHhwb2ludHM6IHVuaXF1ZSh4cG9pbnRzKSwgeXBvaW50czogdW5pcXVlKHlwb2ludHMpIH0pOwoKICByZXR1cm4gW0VsZW1lbnROYW1lKHApLCBwb2ludHMuam9pbignICcpXTsKfQoKZnVuY3Rpb24gQ29udGFjdHJlZjJDaXJjdWl0KGNyZWYpIHsKICBsZXQgcGFkSW5kZXggPSBjcmVmLmVsZW1lbnQucGFkcy5saXN0LnJhdy5maWx0ZXIoZSA9PiBlLnRhZ05hbWUgPT0gJ3BhZCcpLmluZGV4T2YoY3JlZi5wYWQucmF3KTsKICBsZXQgeyBuYW1lIH0gPSBjcmVmLmVsZW1lbnQ7CiAgcmV0dXJuIGAke25hbWV9LiR7cGFkSW5kZXggKyAxfWA7Cn0KCmZ1bmN0aW9uIFNpZ25hbDJDaXJjdWl0KHMpIHsKICBsZXQgeyBuYW1lLCBjb250YWN0cmVmcyB9ID0gczsKCiAgbGV0IGNvbnRhY3RzID0gJyc7CiAgbGV0IFtmaXJzdENvbnRhY3QsIC4uLnJlc3RPZkNvbnRhY3RzXSA9IGNvbnRhY3RyZWZzOwoKICBpZihyZXN0T2ZDb250YWN0cy5sZW5ndGggPT0gMCkgcmV0dXJuICcnOwoKICBmb3IobGV0IGNvbnRhY3Qgb2YgcmVzdE9mQ29udGFjdHMpIHsKICAgIGNvbnRhY3RzICs9IGAke0NvbnRhY3RyZWYyQ2lyY3VpdChmaXJzdENvbnRhY3QpfVx0JHtDb250YWN0cmVmMkNpcmN1aXQoY29udGFjdCl9XG5gOwogIH0KICByZXR1cm4gYCMgU2lnbmFsICR7bmFtZX1cbmAgKyBjb250YWN0cyArICdcbic7Cn0KCmZ1bmN0aW9uIEVsZW1lbnQyQ2lyY3VpdChlbGVtZW50KSB7CiAgbGV0IFtwYWNrYWdlTmFtZV0gPSBQYWNrYWdlMkNpcmN1aXQoZWxlbWVudC5wYWNrYWdlKTsKICBsZXQgbmFtZSA9IEVsZW1lbnROYW1lKGVsZW1lbnQpOwogIGxldCB7IHgsIHkgfSA9IGVsZW1lbnQ7CgogIHJldHVybiBgJHtuYW1lLnBhZEVuZCg4KX0gJHtwYWNrYWdlTmFtZS5wYWRFbmQoMTYpfSR7KHggLyAyLjU0KS50b0ZpeGVkKDApfSwkeyh5IC8gMi41NCkudG9GaXhlZCgwKX1cbmA7CgogIC8vIHJldHVybiBbRWxlbWVudE5hbWUoZWxlbWVudCksIFsuLi5lbGVtZW50LnBhZHMubGlzdF0ubWFwKCh7IHgsIHkgfSkgPT4gYCR7eCAvIDIuNTR9LCR7eSAvIDIuNTR9YCkuam9pbignICcpXTsKfQoKZnVuY3Rpb24gR2V0VXNlZFBhY2thZ2VzKGRvYyA9IHByb2plY3QuYm9hcmQpIHsKICByZXR1cm4gdW5pcXVlKGRvYy5lbGVtZW50cy5saXN0Lm1hcChlID0+IGUucGFja2FnZSkpOwp9CgpmdW5jdGlvbiBHZXRQYWNrYWdlUGl0Y2gocGtnKSB7CiAgbGV0IHBvaW50cyA9IHBrZy5wYWRzLmxpc3QubWFwKHBhZCA9PiBuZXcgUG9pbnQocGFkKSk7CgogIGlmKHBvaW50cy5sZW5ndGggPT0gMikgcmV0dXJuIFBvaW50LmRpc3RhbmNlKC4uLnBvaW50cyk7CgogIGxldCBzbWFsbGVzdCA9IEluZmluaXR5OwoKICBmb3IobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICBmb3IobGV0IGogPSAwOyBqIDwgcG9pbnRzLmxlbmd0aDsgaisrKSB7CiAgICAgIGlmKGkgPT0gaikgY29udGludWU7CgogICAgICBsZXQgZGlzdCA9IFBvaW50LmRpc3RhbmNlKHBvaW50c1tpXSwgcG9pbnRzW2pdKTsKICAgICAgaWYoc21hbGxlc3QgPiBkaXN0KSBzbWFsbGVzdCA9IGRpc3Q7CiAgICB9CiAgfQoKICBpZihOdW1iZXIuaXNGaW5pdGUoc21hbGxlc3QpKSByZXR1cm4gc21hbGxlc3Q7Cn0KCmZ1bmN0aW9uIEVhZ2xlMkNpcmN1aXQoZG9jID0gcHJvamVjdC5ib2FyZCwgd2lkdGggPSAxMDAsIGhlaWdodCA9IDEwMCkgewogIGxldCBvID0gJyc7CgogIG8gKz0gYCMgU3RyaXBib2FyZAojIGJvYXJkIDx3aWR0aD4sPGhlaWdodD4KCmJvYXJkICR7d2lkdGh9LCR7aGVpZ2h0fQoKYDsKCiAgbyArPSBgIyBQYWNrYWdlcwojIDxwYWNrYWdlIG5hbWU+IDxwaW4gY29vcmRpbmF0ZXMgcmVsYXRpdmUgdG8gcGluIDA+CgpgOwoKICBvICs9IFB1dFJvd3NDb2x1bW5zKEdldFVzZWRQYWNrYWdlcyhkb2MpLm1hcChQYWNrYWdlMkNpcmN1aXQpKTsKICBvICs9ICdcblxuJzsKCiAgbyArPSBgIyBDb21wb25lbnRzCiMgPGNvbXBvbmVudCBuYW1lPiA8cGFja2FnZSBuYW1lPiA8YWJzb2x1dGUgcG9zaXRpb24gb2YgY29tcG9uZW50IHBpbiAwPgpgOwogIGZvcihsZXQgZWxlbWVudCBvZiBkb2MuZWxlbWVudHMubGlzdCkgbyArPSBFbGVtZW50MkNpcmN1aXQoZWxlbWVudCk7CgogIG8gKz0gYAojIENvbm5lY3Rpb25zCiMgPGZyb20gY29tcG9uZW50IG5hbWU+LjxwaW4gaW5kZXg+IDx0byBjb21wb25lbnQgbmFtZT4uPHBpbiBpbmRleD4KYDsKICBmb3IobGV0IHNpZ25hbCBvZiBkb2Muc2lnbmFscy5saXN0KSBvICs9IFNpZ25hbDJDaXJjdWl0KHNpZ25hbCk7CgogIHJldHVybiBvOwp9CgpmdW5jdGlvbiBFYWdsZTJDaXJjdWl0SlMoZG9jID0gcHJvamVjdC5zY2hlbWF0aWMsIHNjYWxlID0gNTAsIHNoZWV0ID0gMCkgewogIGxldCBjaXJjID0gbmV3IENpcmN1aXRKUygpOwogIGxldCBzaGVldHMgPSBHZXRTaGVldHMoZG9jKTsKICBjb25zb2xlLmxvZygnc2hlZXRzJywgc2hlZXRzKTsKICBsZXQgc2ggPSAoZ2xvYmFsVGhpcy5zaGVldCA9IHNoZWV0c1tzaGVldF0pOwogIGNvbnNvbGUubG9nKCdzaCcsIHNoKTsKICBsZXQgdHJlZSA9IHNoLnJhdzsKCiAgZm9yKGxldCBbZWxtLCBwdHJdIG9mIGRlZXAuaXRlcmF0ZSh0cmVlLCBuID0+ICd4MScgaW4gbi5hdHRyaWJ1dGVzICYmIG4uYXR0cmlidXRlcy5sYXllciA9PSA5MSkpIHsKICAgIGxldCBsbiA9IG5ldyBMaW5lKGVsbS5hdHRyaWJ1dGVzKS5tdWwoc2NhbGUgLyAyLjU0KS5yb3VuZCgpOwoKICAgIHB0ciA9IHB0ci5zbGljZSgwLCAtMik7CiAgICBsZXQgc2VnbWVudEluZGV4ID0gcHRyW3B0ci5sZW5ndGggLSAxXTsKICAgIGxldCBzZWdtZW50ID0gZGVlcC5nZXQodHJlZSwgcHRyKTsKICAgIGxldCBuZXQgPSBkZWVwLmdldCh0cmVlLCBwdHIuc2xpY2UoMCwgLTIpKTsKCiAgICAvL2NvbnNvbGUubG9nKCdsbicsbG4sZWxtLmF0dHJpYnV0ZXMubGF5ZXIpOwogICAgY29uc29sZS5sb2coJ3NlZ21lbnQvbmV0JywgewogICAgICBzZWdtZW50OiBzZWdtZW50SW5kZXgsCiAgICAgIG5ldDogbmV0LmF0dHJpYnV0ZXMubmFtZQogICAgfSk7CgogICAgY2lyYy5hZGQoJ3cnLCAuLi5sbiwgMCk7CiAgfQoKICAvKmZvcihsZXQgW2VsbSwgcHRyXSBvZiBkZWVwLml0ZXJhdGUodHJlZSwgbiA9PiAneCcgaW4gbi5hdHRyaWJ1dGVzKSkgewogICAgbGV0IHB0ID0gbmV3IFBvaW50KGVsbS5hdHRyaWJ1dGVzKS5tdWwoc2NhbGUgLyAyLjU0KS5yb3VuZCgpOwogICAgY29uc29sZS5sb2coZWxtLnRhZ05hbWUsIGVsbS5hdHRyaWJ1dGVzKTsKCiAgICBjaXJjLmFkZCgncicsIC4uLnB0LCAwKTsKICB9Ki8KICBsZXQgaW5zdGFuY2VzID0gc2guY2hpbGRyZW4uZmluZChlID0+IGUudGFnTmFtZSA9PSAnaW5zdGFuY2VzJykuY2hpbGRyZW47CgogIGNvbnNvbGUubG9nKCdpbnN0YW5jZXMnLCBpbnN0YW5jZXMpOwogIGZvcihsZXQgW25hbWUsIGluc3RhbmNlXSBvZiBpbnN0YW5jZXMpIHsKICAgIGNvbnNvbGUubG9nKGBpbnN0YW5jZSAnJHtuYW1lfSdgLCBjb25zb2xlLmNvbmZpZyh7IGRlcHRoOiAwIH0pLCBpbnN0YW5jZSk7CiAgfQogIHJldHVybiBjaXJjOwp9CgovL2NhbGxNYWluKG1haW4sIHRydWUpOwoKdHJ5IHsKICBtYWluKC4uLnNjcmlwdEFyZ3Muc2xpY2UoMSkpOwp9IGNhdGNoKGVycm9yKSB7CiAgY29uc29sZS5sb2coYEZBSUw6ICR7ZXJyb3IubWVzc2FnZX1cbiR7ZXJyb3Iuc3RhY2t9YCk7CiAgcHJvY2Vzcy5leGl0KDEpOwp9CgAAAAAAAAAAQpoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2IAAAAAAAAPYgAAAAAAAAAAAAAAAA8L8"
				],
				[
					227,
					1,
					"left_delete",
					null,
					"AQAAABoLAAAAAAAAGgsAAAAAAAAUAAAAcXVpY2tqcy9xanMtbW9kdWxlcy8",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAaCwAAAAAAAC4LAAAAAAAAAAAAAAAA8L8"
				],
				[
					233,
					1,
					"insert",
					{
						"characters": "xml/"
					},
					"BAAAAB4LAAAAAAAAHwsAAAAAAAAAAAAAHwsAAAAAAAAgCwAAAAAAAAAAAAAgCwAAAAAAACELAAAAAAAAAAAAACELAAAAAAAAIgsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAeCwAAAAAAAB4LAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/xml/xpath.js",
			"settings":
			{
				"buffer_size": 12291,
				"line_ending": "Unix"
			}
		},
		{
			"file": "lib/json/path.js",
			"settings":
			{
				"buffer_size": 18767,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					95,
					1,
					"insert",
					{
						"characters": "this"
					},
					"BQAAAG0jAAAAAAAAbiMAAAAAAAAAAAAAbiMAAAAAAABuIwAAAAAAAAEAAABhbiMAAAAAAABvIwAAAAAAAAAAAABvIwAAAAAAAHAjAAAAAAAAAAAAAHAjAAAAAAAAcSMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtIwAAAAAAAG4jAAAAAAAAAAAAAAAA8L8"
				],
				[
					99,
					1,
					"cut",
					null,
					"AQAAANoiAAAAAAAA2iIAAAAAAAAOAAAAbGV0IGEgPSB0aGlzOwo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaIgAAAAAAAOgiAAAAAAAAAAAAAAAAQEA"
				],
				[
					102,
					1,
					"insert",
					{
						"characters": "let"
					},
					"AwAAANoiAAAAAAAA2yIAAAAAAAAAAAAA2yIAAAAAAADcIgAAAAAAAAAAAADcIgAAAAAAAN0iAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaIgAAAAAAANoiAAAAAAAAAAAAAAAAQEA"
				],
				[
					103,
					1,
					"insert",
					{
						"characters": " a;"
					},
					"AwAAAN0iAAAAAAAA3iIAAAAAAAAAAAAA3iIAAAAAAADfIgAAAAAAAAAAAADfIgAAAAAAAOAiAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADdIgAAAAAAAN0iAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABZSQAAaW1wb3J0IHsgZGVmaW5lLGRlZmluZUdldHRlcixpbW11dGFibGVDbGFzcyB9IGZyb20gJy4uL21pc2MuanMnOwppbXBvcnQgeyB0b1hNTCB9IGZyb20gJy4vdXRpbC5qcyc7CgpleHBvcnQgZnVuY3Rpb24gRGVyZWZlcmVuY2VFcnJvcihvYmplY3QsIG1lbWJlciwgcG9zLCBwcmV2LCBsb2NhdG9yKSB7CiAgbGV0IGVycm9yID0gdGhpcyBpbnN0YW5jZW9mIERlcmVmZXJlbmNlRXJyb3IgPyB0aGlzIDogbmV3IERlcmVmZXJlbmNlRXJyb3Iob2JqZWN0LmluZGV4KTsKICBsZXQgc3RhY2sgPSBnZXRDYWxsZXJTdGFjaygpCiAgICAuZmlsdGVyKGZyYW1lID0+IG51bGwgIT09IGZyYW1lLmZpbGVOYW1lKQogICAgLm1hcChmcmFtZSA9PiB7CiAgICAgIGxldCBtZXRob2QgPSBmcmFtZS5tZXRob2ROYW1lOwogICAgICBpZihtZXRob2QpIG1ldGhvZCA9IChmcmFtZS50eXBlTmFtZSB8fCBjbGFzc05hbWUoZnJhbWUudGhpc09iaikpICsgJy4nICsgbWV0aG9kOwogICAgICBlbHNlIG1ldGhvZCA9IGZyYW1lLmdldEZ1bmN0aW9uTmFtZSgpOwoKICAgICAgcmV0dXJuICgnJyArIGZyYW1lLmdldEZpbGVOYW1lKCkpLnJlcGxhY2UoLy4qcGxvdC1jdlwvLywgJycpICsgJzonICsgZnJhbWUuZ2V0TGluZU51bWJlcigpICsgJzonICsgZnJhbWUuZ2V0Q29sdW1uTnVtYmVyKCkgKyAnICcgKyBtZXRob2Q7CiAgICB9KTsKICAvL2NvbnNvbGUubG9nKCdtZW1iZXI6JywgbWVtYmVyKTsKICByZXR1cm4gT2JqZWN0LmFzc2lnbigKICAgIGVycm9yLAogICAgeyBvYmplY3QsIG1lbWJlciwgcG9zLCBsb2NhdG9yIH0sCiAgICB7CiAgICAgIG1lc3NhZ2U6CiAgICAgICAgYEVycm9yIGRlcmVmZXJlbmNpbmcgJHtjbGFzc05hbWUob2JqZWN0KX0gQCAke011dGFibGVQYXRoLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGxvY2F0b3IsICcvJywgTXV0YWJsZVBhdGgucGFydFRvU3RyaW5nLCAnY2hpbGRyZW4nKX0KeG1sOiAke2FiYnJldmlhdGUodG9YTUwobG9jYXRvci5yb290IHx8IG9iamVjdCkpfQpubyBtZW1iZXIgJyR7aW5zcGVjdChtZW1iZXIsIHsgY29sb3JzOiBmYWxzZSB9KX0nIGluICR7aW5zcGVjdChwcmV2LCB7CiAgICAgICAgICBkZXB0aDogMiwKICAgICAgICAgIG11bHRpbGluZTogdHJ1ZSwKICAgICAgICAgIGluZGVudDogJyAgJywKICAgICAgICAgIGNvbG9yczogZmFsc2UKICAgICAgICB9KX0gXG5gICsgc3RhY2suam9pbignXG4nKSwKICAgICAgc3RhY2sKICAgIH0KICApOwp9CgpEZXJlZmVyZW5jZUVycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IHsgbWVzc2FnZSwgb2JqZWN0LCBtZW1iZXIsIHBvcywgbG9jYXRvciwgc3RhY2sgfSA9IHRoaXM7CiAgcmV0dXJuIGAke21lc3NhZ2V9XG4ke2luc3BlY3QoeyBvYmplY3QsIG1lbWJlciwgcG9zLCBsb2NhdG9yLCBzdGFjayB9LCB7IGRlcHRoOiAyLCBjb2xvcnM6IGZhbHNlIH0pfWA7Cn07CgpleHBvcnQgY29uc3QgSXNDaGlsZHJlbiA9IGEgPT4gYSA9PT0gTXV0YWJsZVBhdGguQ0hJTERSRU5fR0xZUEggfHwgYSA9PT0gTXV0YWJsZVBhdGguQ0hJTERSRU5fU1RSIHx8IGEgPT09IE11dGFibGVQYXRoLkNISUxEUkVOX1NZTTsKCmNvbnN0IENISUxEUkVOX1NQQUNFID0gJyc7CgpleHBvcnQgY2xhc3MgTXV0YWJsZVBhdGggZXh0ZW5kcyBBcnJheSB7CiAgLy8nXHUyYjIxJywgJ1x1Mjc0YScsICdcdTIyOWInLCAnXHUyNzNkJywgJ1x1MjBmMCcsICdcdTIwZjAnLCAnXHUyNzJhJywgJ1x1MjYyYScsICAnXHUyMWY5JywgJ1x1MjliZicsJ1x1MjVjNycsICdcdTJiMjAnLCAnXHUyNjdkJywgJ1x1MjY3YycsICdcdTI2N2InLCAnXHUyNjkzJywnXHUwZmQ2JywgJ1x1MGZkNScsICdcdTI2MjAnLCAnXHUwZTFlJwogIHN0YXRpYyBDSElMRFJFTl9HTFlQSCAvKiAqLyA9ICfinp8nIC8qICfilrsnKi8gLyon4oiNJyovIC8qJ+KsoScqLyAvKifiipsnKi8gLyon4pa4JyovOwogIC8vJ1x1MDBiYicKICBzdGF0aWMgQ0hJTERSRU5fRk4gPSBhcmdzID0+IHsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSBhcmdzW2ldID0gKGFyZ3NbaV0gKyAnJykucmVwbGFjZSgvY2hpbGRyZW4vZywgdGhpcy5DSElMRFJFTl9HTFlQSCk7CiAgICByZXR1cm4gJyc7CiAgfTsKICBzdGF0aWMgQ0hJTERSRU5fU1lNID0gU3ltYm9sLmZvcignY2hpbGRyZW4nKTsKICBzdGF0aWMgQ0hJTERSRU5fU1RSID0gJ2NoaWxkcmVuJzsKCiAgc3RhdGljIFJFRFVDRVIgPSAoYSwgcCkgPT4gYVtwXTsKCiAgc3RhdGljIGVxdWFscyhhLCBiKSB7CiAgICByZXR1cm4gTXV0YWJsZVBhdGgucHJvdG90eXBlLmVxdWFscy5jYWxsKGEsIGIpOwogIH0KCiAgc3RhdGljIGlzQ2hpbGRyZW4oYXJnKSB7CiAgICByZXR1cm4gSXNDaGlsZHJlbihhcmcpOwogIH0KCiAgc3RhdGljIFtTeW1ib2wuaGFzSW5zdGFuY2VdKGluc3RhbmNlKSB7CiAgICBjb25zdCBuYW1lID0gY2xhc3NOYW1lKGluc3RhbmNlKTsKICAgIHJldHVybiBbJ011dGFibGVQYXRoJywgJ0ltbXV0YWJsZVBhdGgnLCAnUGF0aCddLmluZGV4T2YobmFtZSkgIT0gLTE7CiAgfQoKICBjb25zdHJ1Y3RvcihwID0gW10sIG9wdHMgPSB7fSkgewogICAgY29uc3QgeyBhYnNvbHV0ZSA9IGZhbHNlLCB0YWdGaWVsZCwgc2VwYXJhdG9yID0gJy4nLCBzcGVjaWFsRmllbGRzID0gW10gfSA9IG9wdHM7CiAgICBzdXBlcih0eXBlb2YgcCA9PSAnbnVtYmVyJyA/IHAgOiAwKTsKCiAgICAvKgogICAgaWYodGFnRmllbGQpIHRoaXMudGFnRmllbGQgPSB0YWdGaWVsZDsKICAgIHRoaXMuc3BlY2lhbEZpZWxkcyA9IHNwZWNpYWxGaWVsZHM7Ki8KCiAgICBkZWZpbmUodGhpcywgdGFnRmllbGQgPyB7IHRhZ0ZpZWxkIH0gOiB7fSk7CiAgICBpZihzcGVjaWFsRmllbGRzLmxlbmd0aCA+IDApIGRlZmluZSh0aGlzLCAnc3BlY2lhbEZpZWxkcycsIHNwZWNpYWxGaWVsZHMpOwoKICAgIE11dGFibGVQYXRoLnBhcnNlKHAsIHRoaXMsIHNlcGFyYXRvcik7CiAgICAvL2NvbnNvbGUubG9nKCd0aGlzOicsdGhpcyk7CgogICAgLy9jb25zb2xlLmxvZyhgXG5uZXcgUGF0aCgke1suLi5hcmd1bWVudHNdLmxlbmd0aH0pOiAgbGVuZ3RoOmAsICBsZW5ndGgsIiIsIChmaXJzdCA/ICJmaXJzdDoiIDogJycpLCBmaXJzdHx8JycsKGxhc3QgPyAiICBsYXN0OiIgOiAnJyksIGxhc3QgfHwgJycsImFycmF5OiIsYSk7CiAgfQoKICBzdGF0aWMgbWF0Y2hPYmoodGFnTmFtZSwgYXR0cl9vcl9pbmRleCwgdGFnRmllbGQgPSAndGFnTmFtZScpIHsKICAgIGlmKHR5cGVvZiBhdHRyX29yX2luZGV4ID09ICdudW1iZXInKSByZXR1cm4gW2F0dHJfb3JfaW5kZXgsIHRhZ05hbWVdOwogICAgaWYoaXNPYmplY3QoYXR0cl9vcl9pbmRleCkpIHJldHVybiB7IHRhZ05hbWUsIGF0dHJpYnV0ZXM6IGF0dHJfb3JfaW5kZXggfTsKICAgIGxldCBjbWQgPSBgZSA9PiBlLiR7dGFnRmllbGR9ID09PSAnJHt0YWdOYW1lfSdgOwogICAgY29uc29sZS5sb2coJ3R5cGVvZih0YWdOYW1lKTonLCB0eXBlb2YgdGFnTmFtZSk7CiAgICBsZXQgcmV0ID0gZXZhbChjbWQpOwogICAgY29uc29sZS5sb2coJ21hdGNoT2JqOicsIGNtZCwgcmV0KTsKICAgIHJldHVybiByZXQ7CiAgfQoKICBzdGF0aWMgcGFydE1hdGNoZXIob2JqLCB0YWdGaWVsZCA9ICd0YWdOYW1lJykgewogICAgLy8gICAgY29uc29sZS5sb2coIm9iajoiLCBvYmopOwogICAgbGV0IGZuID0gSW1tdXRhYmxlUGF0aC5tYXRjaE9iaihvYmpbdGFnRmllbGRdLCBudWxsLCB0YWdGaWVsZCk7CiAgICBmbi5vYmplY3QgPSBvYmo7CiAgICByZXR1cm4gZm47CiAgfQoKICBzdGF0aWMgaXNNZW1iZXJOYW1lKG5hbWUsIG91dCA9IHt9KSB7CiAgICAvLyAgcmV0dXJuIG5hbWUgPT0gJ2NoaWxkcmVuJyB8fCBpc051bWVyaWMobmFtZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHN0YXRpYyBwYXJzZShwYXRoLCBvdXQsIHNlcGFyYXRvciA9ICcuJykgewogICAgY29uc3QgbGVuID0gcGF0aC5sZW5ndGg7CiAgICBpZih0eXBlb2YgcGF0aCAhPSAnbnVtYmVyJykgewogICAgICBpZih0eXBlb2YgcGF0aCA9PSAnc3RyaW5nJykgewogICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UobmV3IFJlZ0V4cCgnWy4vXVxcWycsICdnJyksICdbJyk7CiAgICAgICAgcGF0aCA9IHBhdGguc3BsaXQoL1suLyBdL2cpOwogICAgICB9CiAgICAgIGNvbnN0IGxlbiA9IHBhdGgubGVuZ3RoOwogICAgICBwYXRoID0gWy4uLnBhdGhdOwoKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgbGV0IHBhcnQgPSBwYXRoW2ldOwoKICAgICAgICBpZih0eXBlb2YgcGFydCA9PSAnc3RyaW5nJyAmJiAoKHBhcnQgJiYgcGFydC5jb2RlUG9pbnRBdCAmJiBwYXJ0LmNvZGVQb2ludEF0KDApID49IDI1NikgfHwgcGFydCA9PSAnY2hpbGRyZW4nKSkgewogICAgICAgICAgcGFydCA9ICdjaGlsZHJlbic7CiAgICAgICAgfSBlbHNlIGlmKHR5cGVvZiBwYXJ0ID09ICdudW1iZXInIHx8ICh0eXBlb2YgcGFydCA9PSAnc3RyaW5nJyAmJiAhaXNOYU4ocGFydCkpKSB7CiAgICAgICAgICBwYXJ0ID0gK3BhcnQ7CiAgICAgICAgfSBlbHNlIGlmKHR5cGVvZiBwYXJ0ID09ICdzdHJpbmcnKSB7CiAgICAgICAgICBpZigvXlxbLipcXSQvLnRlc3QocGFydCArICcnKSkgewogICAgICAgICAgICBwYXJ0ID0gcGFydC5zdWJzdHJpbmcoMSwgcGFydC5sZW5ndGggLSAxKTsKICAgICAgICAgIH0gZWxzZSBpZigvXltBLVphLXpdLy50ZXN0KHBhcnQpKSB7CiAgICAgICAgICAgIGlmKCFvdXQuY29uc3RydWN0b3IuaXNNZW1iZXJOYW1lKHBhcnQsIG91dCkpIHBhcnQgPSAob3V0LmNvbnN0cnVjdG9yLnBhcnRNYXRjaGVyIHx8IE11dGFibGVQYXRoLnBhcnRNYXRjaGVyKSh7IFtvdXQudGFnRmllbGQgfHwgJ3RhZ05hbWUnXTogcGFydCB9LCBvdXQudGFnRmllbGQgfHwgJ3RhZ05hbWUnKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vaWYob3V0W291dC5sZW5ndGggLSAxXSAhPT0gcGFydCkKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKG91dCwgcGFydCk7CiAgICAgIH0KICAgIH0KICB9CgogIHN0YXRpYyBwYXJ0VG9TdHJpbmcoYSwgc2VwID0gJy8nLCBjaGlsZHJlblN0ciwgYyA9ICh0ZXh0LCBjID0gMzMsIGIgPSAwKSA9PiBgXHgxYlske2J9OyR7Y31tJHt0ZXh0fVx4MWJbMG1gKSB7CiAgICBpZihhLmxlbmd0aCA9PSAwKSByZXR1cm4gbnVsbDsKICAgIGxldCBzID0gJyc7CiAgICBsZXQgcGFydCA9IGEuc2hpZnQoKTsKICAgIGlmKHR5cGVvZiBwYXJ0ID09ICdmdW5jdGlvbicgJiYgcGFydC5vYmplY3QgIT09IHVuZGVmaW5lZCkgcGFydCA9IHBhcnQub2JqZWN0OwoKICAgIGlmKGlzT2JqZWN0KHBhcnQpKSB7CiAgICAgIGxldCB7IHRhZ05hbWUsIC4uLnBhcnRPYmogfSA9IHBhcnQ7CiAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMocGFydE9iaik7CiAgICAgIGlmKGtleXMubGVuZ3RoID09IDApIHBhcnQgPSB0YWdOYW1lOwogICAgfQogICAgbGV0IHR5cGUgPSB0eXBlb2YgcGFydDsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdzeW1ib2wnOgogICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgIGlmKElzQ2hpbGRyZW4ocGFydCkpIHsKICAgICAgICAgIGxldCBzeW0gPSBjaGlsZHJlblN0cjsKICAgICAgICAgIHMgKz0gYyhzeW0sIDMzLCAxKTsKICAgICAgICAgIHMgKz0gYygnJywgMSwgMzQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmKGlzTnVtZXJpYyhwYXJ0KSkgcGFydCA9ICtwYXJ0OwogICAgICAgICAgZWxzZSBzICs9IGAke3BhcnR9YDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnb2JqZWN0JzogewogICAgICAgIHMgKz0gYFtAYDsKICAgICAgICBsZXQgYXR0cnMgPSBPYmplY3QuZW50cmllcyhwYXJ0LmF0dHJpYnV0ZXMgfHwge30pLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gYCR7bmFtZX09JyR7dmFsdWV9J2ApOwogICAgICAgIHMgKz0gYXR0cnMuam9pbignLCcpOwogICAgICAgIHMgKz0gJ10nOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgJ251bWJlcic6IHsKICAgICAgICBzICs9IGAke3BhcnR9YDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgcmV0dXJuIFtzXTsKICB9CgogIHN0YXRpYyBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiB0aGlzOwogIH0KICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yOwogIH0KCiAgY2xvbmUoKSB7CiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CiAgICByZXR1cm4gbmV3IGN0b3IodGhpcywgdGhpcy5hYnNvbHV0ZSk7CiAgfQoKICBnZXQgc2l6ZSgpIHsKICAgIHJldHVybiB0aGlzLmxlbmd0aDsKICB9CgogIC8qKgogICAqIEBicmllZiBSZXR1cm4gbmV3IGxvY2F0b3IgYWR2YW5jZWQgdG8gcmlnaHQKICAgKgogICAqIEBwYXJhbSAgICAgIHtudW1iZXJ9ICBbbj0xXSAgIE51bWJlciBvZiBzdGVwcyB0byByaWdodAogICAqIEByZXR1cm4gICAgIHtQYXRofQogICAqLwogIHJpZ2h0KG4gPSAxKSB7CiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CiAgICByZXR1cm4gbmV3IGN0b3IodGhpcy5zcGxpY2UoLTEsIDEsIHRoaXMubGFzdCArIG4pKTsKICB9CgogIC8qKgogICAqIEBicmllZiBSZXR1cm4gbmV3IGxvY2F0b3IgYWR2YW5jZWQgdG8gbGVmdAogICAqCiAgICogQHBhcmFtICAgICAge251bWJlcn0gIFtuPTFdICAgTnVtYmVyIG9mIHN0ZXBzIHRvIGxlZnQKICAgKiBAcmV0dXJuICAgICB7UGF0aH0KICAgKi8KICBsZWZ0KG4gPSAxKSB7CiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CiAgICByZXR1cm4gbmV3IGN0b3IodGhpcy5zcGxpY2UoLTEsIDEsIHRoaXMubGFzdCAtIG4pKTsKICB9CgogIC8qKgogICAqIEBicmllZiBSZXR1cm4gbmV3IGxvY2F0b3IgYWR2YW5jZWQgdXB3YXJkcwogICAqCiAgICogQHBhcmFtICAgICAge251bWJlcn0gIFtuPTFdICAgTnVtYmVyIG9mIHN0ZXBzIHVwCiAgICogQHJldHVybiAgICAge1BhdGh9CiAgICovCiAgdXAobiA9IDEpIHsKICAgIGlmKHRoaXMubGVuZ3RoID49IG4pIHJldHVybiB0aGlzLnNsaWNlKDAsIC1uKTsKICB9CgogIGRvd24oLi4uYXJncykgewogICAgcmV0dXJuIHRoaXMuY29uY2F0KGFyZ3MpOwogIH0KCiAgYm90dG9tKG9iaiwgbm9UaHJvdyA9IGZhbHNlKSB7CiAgICBsZXQgciA9IFt0aGlzLnVwKDEpLCB0aGlzLmxhc3RdOwogICAgaWYob2JqKSByWzBdID0gclswXS5hcHBseShvYmosIG5vVGhyb3cpOwogICAgcmV0dXJuIHI7CiAgfQoKICAvKioKICAgKiBAYnJpZWYgUmV0dXJuIG5ldyBsb2NhdG9yIGZvciBuLXRoIGNoaWxkCiAgICoKICAgKiBAcGFyYW0gICAgICB7bnVtYmVyfSAgW2ldICAgSW5kZXggb2YgY2hpbGQKICAgKiBAcmV0dXJuICAgICB7UGF0aH0KICAgKi8KICBudGhDaGlsZChpKSB7CiAgICByZXR1cm4gdGhpcy5kb3duKE11dGFibGVQYXRoLkNISUxEUkVOX1NZTSwgaSk7CiAgfQoKICBkaWZmKG90aGVyKSB7CiAgICBsZXQgaTsKICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKICAgIGZvcihpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYodGhpc1tpXSAhPSBvdGhlcltpXSkgcmV0dXJuIG51bGw7CiAgICB9CiAgICByZXR1cm4gbmV3IGN0b3Iob3RoZXIuc2xpY2UoaSwgb3RoZXIubGVuZ3RoIC0gaSksIHRoaXMuYWJzb2x1dGUpOwogIH0KCiAgZ2V0IGxhc3RJZCgpIHsKICAgIHJldHVybiB0aGlzLmxlbmd0aCAtIDE7CiAgfQogIGdldCBsYXN0KCkgewogICAgcmV0dXJuIHRoaXNbdGhpcy5sZW5ndGggLSAxXTsKICB9CiAgZ2V0IGZpcnN0KCkgewogICAgcmV0dXJuIHRoaXNbMF07CiAgfQoKICBnZXQgbmV4dFNpYmxpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5yaWdodCgpOwogIH0KICBnZXQgcHJldlNpYmxpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5sZWZ0KCk7CiAgfQogIGdldCBwYXJlbnQoKSB7CiAgICByZXR1cm4gdGhpcy51cCgxKTsKICB9CiAgZ2V0IHBhcmVudE5vZGUoKSB7CiAgICByZXR1cm4gdGhpcy51cCgyKTsKICB9CiAgZ2V0IGZpcnN0Q2hpbGQoKSB7CiAgICByZXR1cm4gdGhpcy5udGhDaGlsZCgwKTsKICB9CiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIHJldHVybiB0aGlzLm50aENoaWxkKC0xKTsKICB9CiAgZ2V0IGRlcHRoKCkgewogICAgcmV0dXJuIHRoaXMubGVuZ3RoOwogIH0KCiAgc3RhdGljIGNvbXBhcmVPYmoob2JqLCBvdGhlcikgewogICAgLy9jb25zb2xlLmxvZygiTXV0YWJsZVBhdGguY29tcGFyZU9iaiIse29iaixvdGhlcn0pOwogICAgbGV0IHJldCA9IHRydWU7CiAgICBmb3IobGV0IHByb3AgaW4gb3RoZXIpIHsKICAgICAgY29uc3QgdmFsdWUgPSBvdGhlcltwcm9wXTsKICAgICAgaWYoaXNPYmplY3QodmFsdWUpKSB7CiAgICAgICAgaWYoIXRoaXMuY29tcGFyZU9iaihvYmpbcHJvcF0sIHZhbHVlKSkgewogICAgICAgICAgcmV0ID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZih2YWx1ZSAhPSBvYmpbcHJvcF0pIHsKICAgICAgICByZXQgPSBmYWxzZTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJldDsKICB9CgogIGFwcGx5KG9iaiwgbm9UaHJvdykgewogICAgLy8gaWYoJ3JhdycgaW4gb2JqKSBvYmogPSBvYmoucmF3OwoKICAgIGxldCBvID0gb2JqOwogICAgaWYobyA9PT0gdW5kZWZpbmVkICYmICFub1Rocm93KSB7CiAgICAgIGxldCBzdGFjayA9IGdldENhbGxlcnMoMSwgMTApOwogICAgICB0aHJvdyBuZXcgRXJyb3IoYE9iamVjdCAke299YCArIHN0YWNrLmpvaW4oJ1xuJykpOwogICAgfQogICAgbGV0IGE7CiAgICAvLyBjb25zb2xlLmxvZygiTXV0YWJsZVBhdGguYXBwbHkiLC4uLlsuLi50aGlzXSwge28sYX0pOwoKICAgIC8vICAgd2hpbGUoYS5sZW5ndGggPj0gMSAmJiBhWzBdID09PSAnJykgYSA9IGEuc2xpY2UoMSk7CgogICAgYSA9IHRoaXMucmVkdWNlKAogICAgICAoYSwgaSkgPT4gewogICAgICAgIGlmKGEubykgewogICAgICAgICAgbGV0IHI7CiAgICAgICAgICBsZXQgdCA9IHR5cGVvZiBpOwoKICAgICAgICAgIC8vY29uc29sZS5sb2coYE11dGFibGVQYXRoLmFwcGx5W2AsYS5uLGBdYCxBcnJheS5pc0FycmF5KGEubyksYS5vLGkpOwogICAgICAgICAgaWYodCAhPSAnc3RyaW5nJykgewogICAgICAgICAgICBpZihhLm8ubGVuZ3RoICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBpZih0ID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHByZWQgPSBpOwogICAgICAgICAgICAgICAgaSA9IGEuby5maW5kSW5kZXgoKGUsIGksIGEpID0+IHByZWQoZSwgaSwgYSkpOwogICAgICAgICAgICAgIH0gZWxzZSBpZih0ID09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGBNdXRhYmxlUGF0aC5hcHBseSBmaW5kSW5kZXhgLGEubyxpKTsKCiAgICAgICAgICAgICAgICBpID0gYS5vLmZpbmRJbmRleChjaGlsZCA9PiBNdXRhYmxlUGF0aC5jb21wYXJlT2JqKGNoaWxkLCBpKSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHQgPT0gJ251bWJlcicgJiYgaSA8IDApIHsKICAgICAgICAgICAgICAgIGkgPSBhLm8ubGVuZ3RoICsgaTsKICAgICAgICAgICAgICB9IGVsc2UgaSA9ICtpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByID0gYS5vW2ldOwoKICAgICAgICAgIGEucCA9IGEubzsKICAgICAgICAgIGEubyA9IHI7CiAgICAgICAgICBhLmkgPSBpOwogICAgICAgICAgYS5uKys7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhOwogICAgICB9LAogICAgICB7IG8sIG46IDAgfQogICAgKTsKICAgIGlmKGEubyA9PSBudWxsICYmICFub1Rocm93KSB0aHJvdyBuZXcgRGVyZWZlcmVuY2VFcnJvcihvYmosIGEuaSwgYS5uLCBhLnAsIHRoaXMpOwogICAgcmV0dXJuIGEubzsKICB9CgogIHRvU291cmNlKG9wdHMgPSB7fSkgewogICAgY29uc3QgeyBzZXAgPSAnLCcsIGZpbHRlckNoaWxkcmVuID0gZmFsc2UgfSA9IG9wdHM7CiAgICBsZXQgciA9IHRoaXMudG9BcnJheSgpOwogICAgaWYoZmlsdGVyQ2hpbGRyZW4pIHIgPSByLmZpbHRlcihpdGVtID0+ICFNdXRhYmxlUGF0aC5pc0NoaWxkcmVuKGl0ZW0pKTsKICAgIHJldHVybiBgWyR7ci5tYXAocCA9PiAodHlwZW9mIHAgPT0gJ251bWJlcicgPyBwIDogdHlwZW9mIHAgPT0gJ3N0cmluZycgPyBgJyR7cH0nYCA6IHApKS5qb2luKHNlcCl9XWA7CiAgfQogIHRvQ29kZShuYW1lKSB7CiAgICByZXR1cm4gdGhpcy5yZWR1Y2UoKGFjYywgcGFydCkgPT4gYWNjICsgKGlzTnVtZXJpYyhwYXJ0KSA/IGBbJHtwYXJ0fV1gIDogYC4ke3BhcnR9YCksIG5hbWUgfHwgJycpOwogIH0KICB0b1JlZHVjZShuYW1lID0gJycpIHsKICAgIHJldHVybiB0aGlzLnRvU291cmNlKCkgKyBgLnJlZHVjZSgoYSxwKT0+YVtwXSwke25hbWV9KWA7CiAgfQoKICBnZXQgYWJzb2x1dGUoKSB7CiAgICByZXR1cm4gdGhpc1swXSA9PT0gJyc7CiAgfQoKICBtYWtlQWJzb2x1dGUocGFyZW50KSB7CiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CiAgICBpZih0aGlzLmFic29sdXRlKSByZXR1cm4gdGhpczsKICAgIGxldCByID0gWy4uLnBhcmVudCwgLi4udGhpc107CiAgICBpZihyWzBdICE9PSAnJykgci51bnNoaWZ0KCcnKTsKICAgIHJldHVybiBuZXcgY3RvcihyLCBwYXJlbnQuYWJzb2x1dGUpOwogIH0KCiAgW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldKCkgewogICAgY29uc3Qgc2VwID0gdGhpcy5pbmRleE9mKCdjaGlsZHJlbicpICE9IC0xID8gJyAnIDogJy4nLAogICAgICBjaGlsZHJlblN0ciA9ICdcdTIyMGEnICsgQ0hJTERSRU5fU1BBQ0UsCiAgICAgIGNvbG9yID0gdHJ1ZTsKICAgIC8vY29uc29sZS5sb2coInNlcDoiLHNlcCwgWy4uLnRoaXNdKTsKICAgIGxldCBwID0gTXV0YWJsZVBhdGgucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcywgc2VwIC8qIHx8ICdcdTI1NzEnIHx8ICdcdTI5ZjgnLCBjaGlsZHJlblN0ciwgdGV4dCA9PiB0ZXh0Ki8pOwogICAgbGV0IG4gPSBjbGFzc05hbWUodGhpcyk7CiAgICBsZXQgYyA9IG4uc3RhcnRzV2l0aCgnTXV0YWJsZScpID8gMzEgOiAzMjsKICAgIGxldCB0ID0gY29sb3IgPyAodGV4dCwgLi4uYXJncykgPT4gYFx1MDAxYlske2FyZ3Muam9pbignOycpfW1gICsgdGV4dCA6IHRleHQgPT4gdGV4dDsKICAgIGxldCBtYXggPSAxMDA7CgogICAgaWYoc3RyaXBBbnNpKHApLmxlbmd0aCA+IG1heCkgewogICAgICBsZXQgcG9zID0gcC5sZW5ndGggLSBtYXg7CiAgICAgIGlmKHAuc3Vic3RyaW5nKHBvcykuaW5kZXhPZihzZXApICE9IC0xKSBwb3MgKz0gcC5zdWJzdHJpbmcocG9zKS5pbmRleE9mKHNlcCkgKyAxOwogICAgICBjb25zdCBudW0gPSBwLnN1YnN0cmluZygwLCBwb3MgLSAxKS5zcGxpdChzZXApLmxlbmd0aDsKICAgICAgcCA9IHQoYC4uLiAke251bX0gY29tcG9uZW50cyAuLi5gLCAxLCAzNikgKyAnIHwgJyArIHAuc3Vic3RyaW5nKHBvcywgcC5sZW5ndGgpOwogICAgfQoKICAgIHJldHVybiBjb2xvciA/IGBceDFiWzE7JHtjfW0ke24ucmVwbGFjZSgvXkltbXV0YWJsZS8sICcnKX1ceDFiWzE7MzBtICR7cH1ceDFiWzBtYCA6IHA7CiAgfQoKICB0b1N0cmluZyhzZXAgPSAnICcsIHBhcnRUb1N0ciA9IE11dGFibGVQYXRoLnBhcnRUb1N0cmluZywgY2hpbGRyZW5TdHIgPSBNdXRhYmxlUGF0aC5DSElMRFJFTl9HTFlQSCArIENISUxEUkVOX1NQQUNFKSB7CiAgICAvLyBjb25zb2xlLmxvZygiTXV0YWJsZVBhdGgudG9TdHJpbmciLHtzZXAscGFydFRvU3RyLCBjaGlsZHJlblN0cn0pOwogICAgY29uc3QgY29sb3IgPSB0cnVlIHx8IGlzQnJvd3NlcigpID8gdGV4dCA9PiB0ZXh0IDogKHRleHQsIC4uLmMpID0+IGBceDFiWyR7Yy5qb2luKCc7JykgfHwgMH1tJHt0ZXh0fWA7CiAgICBsZXQgYSA9IFsuLi50aGlzXTsKICAgIC8vICAgaWYodGhpc1swXSA9PSAnY2hpbGRyZW4nKSBzZXAgPSAnICc7CiAgICB3aGlsZShhLmxlbmd0aCA+IDAgJiYgYVswXSA9PT0gJycpIGEuc2hpZnQoKTsKICAgIGxldCBuID0gYS5sZW5ndGg7CiAgICBsZXQgciA9IFtdOwogICAgZm9yKGxldCBpID0gMDsgOyBpKyspIHsKICAgICAgbGV0IHAgPSBwYXJ0VG9TdHIoYSwgJy8nLCBjaGlsZHJlblN0ciwgY29sb3IpOwogICAgICBpZighcCkgYnJlYWs7CiAgICAgIHIgPSByLmNvbmNhdChwKTsKICAgIH0KICAgIGNvbnN0IHBhZCA9IChzLCBuID0gMSkgPT4gJyAnLnJlcGVhdChuKSArIHMgKyAnICcucmVwZWF0KG4pOwogICAgciA9IHIuam9pbihjb2xvcihzZXAsIDEsIDM2KSArIGNvbG9yKCcnLCAxLCAzMCkpOyAvLy5yZXBsYWNlKC9bL1wuXVxbL2csICdbJyk7CiAgICByID0gKHRoaXMuYWJzb2x1dGUgJiYgciAhPSAnJyAmJiBzZXAgPT0gJy8nID8gc2VwIDogJycpICsgcjsKICAgIHJldHVybiByLnJlcGxhY2UoL1wvL2csIHNlcCk7CiAgfQoKICBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHsKICAgIHJldHVybiBNdXRhYmxlUGF0aC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCgnLicsICdcdTIyMGEnICsgQ0hJTERSRU5fU1BBQ0UpOwogIH0KCiAgZXhpc3RzSW4ocm9vdCkgewogICAgbGV0IGksCiAgICAgIG9iaiA9IHJvb3Q7CiAgICBmb3IoaSA9IDA7IGkgKyAxIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICBjb25zdCBrZXkgPSB0aGlzLmF0KGkpOwogICAgICBpZighKGtleSBpbiBvYmopKSB0aHJvdyBuZXcgRXJyb3IoYE5vIHBhdGggJHt0aGlzLmpvaW4oJywnKX0gaW4gJHt0eXBlb2Ygcm9vdH1gKTsKICAgICAgb2JqID0gb2JqW2tleV07CiAgICB9CiAgICByZXR1cm4gdGhpcy5hdChpKSBpbiBvYmo7CiAgfQoKICBzcGxpdChwcmVkKSB7CiAgICBsZXQgaSA9IDAsCiAgICAgIGEgPSBbXSwKICAgICAgYiA9IFtdLAogICAgICBuOwogICAgaWYodHlwZW9mIHByZWQgPT0gJ251bWJlcicpIHsKICAgICAgbiA9IHByZWQgPCAwID8gdGhpcy5sZW5ndGggKyBwcmVkIDogcHJlZDsKICAgICAgcHJlZCA9IChwYXJ0LCBpbmRleCkgPT4gaW5kZXggPT09IG47CiAgICB9CiAgICB3aGlsZShpIDwgdGhpcy5sZW5ndGggJiYgIXByZWQodGhpc1swXSwgaSwgdGhpcykpIGEucHVzaCh0aGlzW2krK10pOwogICAgd2hpbGUoaSA8IHRoaXMubGVuZ3RoKSBiLnB1c2godGhpc1tpKytdKTsKICAgIHJldHVybiBbYSwgYl07CiAgfQoKICByZWxhdGl2ZVRvKG90aGVyID0gW10pIHsKICAgIGlmKFsuLi5vdGhlcl0uZXZlcnkoKHBhcnQsIGkpID0+IHRoaXNbaV0gPT0gcGFydCkpIHJldHVybiB0aGlzLnNsaWNlKG90aGVyLmxlbmd0aCwgdGhpcy5sZW5ndGgpOwogICAgcmV0dXJuIG51bGw7CiAgfQoKICAvKioKICAgKiB7IGZ1bmN0aW9uX2Rlc2NyaXB0aW9uIH0KICAgKgogICAqIEBwYXJhbSAgICAgIHtudW1iZXJ9ICBbc3RhcnQ9MF0gICAgICAgICAgVGhlIHN0YXJ0CiAgICogQHBhcmFtICAgICAge251bWJlcn0gIFtlbmQ9dGhpcy5sZW5ndGhdICBUaGUgZW5kCiAgICogQHJldHVybiAgICAge1BhdGh9ICAgIHsgZGVzY3JpcHRpb25fb2ZfdGhlX3JldHVybl92YWx1ZSB9CiAgICovCiAgc2xpY2Uoc3RhcnQgPSAwLCBlbmQgPSB0aGlzLmxlbmd0aCkgewogICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdIHx8IHRoaXMuY29uc3RydWN0b3I7CiAgICBsZXQgciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKE11dGFibGVQYXRoLnByb3RvdHlwZS50b0FycmF5LmNhbGwodGhpcyksIHN0YXJ0LCBlbmQpOwogICAgciA9IE9iamVjdC5zZXRQcm90b3R5cGVPZihyLCBjdG9yLnByb3RvdHlwZSk7CiAgICBpZihjdG9yID09IEltbXV0YWJsZVBhdGgpIHIgPSBPYmplY3QuZnJlZXplKHIpOwogICAgcmV0dXJuIHI7CiAgfQoKICAvKiAgc2xpY2Uoc3RhcnQgPSAwLCBlbmQgPSB0aGlzLmxlbmd0aCkgewogICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdOwogICAgbGV0IGEgPSB0aGlzLnRvQXJyYXkoKTsKICAgIGlmKHN0YXJ0IDwgMCkgc3RhcnQgPSBhLmxlbmd0aCArIHN0YXJ0OwogICAgaWYoZW5kIDwgMCkgZW5kID0gYS5sZW5ndGggKyBlbmQ7CiAgICBhID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwgc3RhcnQsIGVuZCk7CiAgICByZXR1cm4gbmV3IGN0b3IoYSwgYVswXSA9PT0gJycpOwogIH0qLwoKICBzcGxpY2Uoc3RhcnQgPSAwLCByZW1vdmUgPSB0aGlzLmxlbmd0aCwgLi4uaW5zZXJ0KSB7CiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CiAgICBsZXQgYSA9IHRoaXMudG9BcnJheSgpOwogICAgaWYoc3RhcnQgPCAwKSBzdGFydCA9IGEubGVuZ3RoICsgc3RhcnQ7CiAgICBpZihyZW1vdmUgPCAwKSByZW1vdmUgPSBhLmxlbmd0aCAtICgtcmVtb3ZlIC0gMSk7CgogICAgcmVtb3ZlID0gTWF0aC5taW4odGhpcy5sZW5ndGggLSBzdGFydCwgcmVtb3ZlKTsKCiAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYSwgc3RhcnQsIHJlbW92ZSwgLi4uaW5zZXJ0KTsKICAgIHJldHVybiBuZXcgY3RvcihhLCBhWzBdID09PSAnJyk7CiAgfQoKICBwdXNoKC4uLmFyZ3MpIHsKICAgIGNvbnN0IHNwZWNpZXMgPSB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKICAgIGxldCBhcnIgPSB0aGlzLnRvQXJyYXkoKTsKICAgIGxldCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjsKICAgIHJldHVybiBuZXcgc3BlY2llcyhhcnIsIHRoaXMuYWJzb2x1dGUpOwogIH0KCiAgcG9wKG4gPSAxKSB7CiAgICByZXR1cm4gdGhpcy5zbGljZSgwLCB0aGlzLmxlbmd0aCAtIG4pOwogIH0KCiAgdW5zaGlmdCguLi5hcmdzKSB7CiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc107CiAgICByZXR1cm4gbmV3IGN0b3IoYXJncy5jb25jYXQodGhpcy50b0FycmF5KCkpLCBhcmdzWzBdID09PSAnJyk7CiAgfQoKICBzaGlmdChuID0gMSkgewogICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdOwoKICAgIHJldHVybiBuZXcgY3Rvcih0aGlzLnRvQXJyYXkoKS5zbGljZShuKSwgdGhpcy5hYnNvbHV0ZSAmJiBuIDwgMSk7CiAgfQoKICBjb25jYXQoYSkgewogICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdIHx8IHRoaXMuY29uc3RydWN0b3I7CgogICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihbLi4udGhpc10uY29uY2F0KGEpLCBjdG9yLnByb3RvdHlwZSk7CiAgfQoKICAvKiByZWR1Y2UoZm4sIGFjYykgewogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgYWNjID0gZm4oYWNjLCB0aGlzW2ldLCBpLCB0aGlzKTsKICAgICAgcmV0dXJuIGFjYzsKICAgIH0qLwogIG1hcChmbikgewogICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdIHx8IHRoaXMuY29uc3RydWN0b3I7CgogICAgbGV0IHJldCA9IFtdOwogICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgbGV0IHIgPSBmbih0aGlzLmF0KGkpLCBpLCB0aGlzKTsKICAgICAgcmV0LnB1c2gocik7CiAgICB9CiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgY3Rvci5wcm90b3R5cGUpOwogIH0KCiAgZmlsdGVyKGZuKSB7CiAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10gfHwgdGhpcy5jb25zdHJ1Y3RvcjsKCiAgICBsZXQgcmV0ID0gW107CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgaWYoZm4odGhpcy5hdChpKSwgaSwgdGhpcykpIHJldC5wdXNoKHRoaXNbaV0pOwogICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihyZXQsIGN0b3IucHJvdG90eXBlKTsKICB9CgogIGF0KGkpIHsKICAgIGNvbnN0IHBhcnQgPSB0aGlzW2ldOwogICAgcmV0dXJuIE11dGFibGVQYXRoLmlzQ2hpbGRyZW4ocGFydCkgPyAnY2hpbGRyZW4nIDogcGFydDsKICB9CgogIG9mZnNldChwcmVkaWNhdGUgPSAocCwgaSkgPT4gcCA9PT0gJycgfHwgcCA9PT0gJy8nKSB7CiAgICBsZXQgaSA9IDA7CiAgICBmb3IoOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICBjb25zdCBwYXJ0ID0gTXV0YWJsZVBhdGgucHJvdG90eXBlLmF0LmNhbGwodGhpcywgaSk7CiAgICAgIGlmKCFwcmVkaWNhdGUocGFydCwgaSwgdGhpcykpIGJyZWFrOwogICAgfQogICAgcmV0dXJuIGk7CiAgfQoKICB0b0FycmF5KHNraXAgPSB0cnVlLCBuID0gMSkgewogICAgbGV0IHJldCA9IFtdOwogICAgbGV0IGkgPSBNdXRhYmxlUGF0aC5wcm90b3R5cGUub2Zmc2V0LmNhbGwodGhpcyk7CiAgICBmb3IoOyBpIDwgdGhpcy5sZW5ndGg7IGkgKz0gbikgewogICAgICBpZihuID4gMSkgcmV0ID0gcmV0LmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChbLi4udGhpc10sIGksIGkgKyAyKSk7CiAgICAgIGVsc2UgcmV0LnB1c2godGhpc1tpXSk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KCiAgZXF1YWxzKG90aGVyID0gW10pIHsKICAgIGNvbnN0IHRoaXNQYXRoID0gdGhpczsKICAgIC8qY29uc29sZS5sb2coJ2VxdWFsJywgeyB0aGlzUGF0aCwgb3RoZXIgfSk7CiAgICAvL2NvbnNvbGUubG9nKCd0aGlzUGF0aCcsIHRoaXNQYXRoLmxlbmd0aCwgLi4uWy4uLnRoaXNQYXRoXSk7CiAgICAvL2NvbnNvbGUubG9nKCdvdGhlcicsIG90aGVyLmxlbmd0aCwgLi4uWy4uLm90aGVyXSk7Ki8KICAgIGlmKC8qb3RoZXIuYWJzb2x1dGUgJiYqLyBvdGhlci5sZW5ndGggIT0gdGhpcy5sZW5ndGgpIHJldHVybiBmYWxzZTsKICAgIGlmKCFvdGhlci5hYnNvbHV0ZSAmJiBvdGhlci5sZW5ndGggPCB0aGlzLmxlbmd0aCkgewogICAgICBsZXQgcHJlcGVuZCA9IHRoaXMuc2xpY2UoMCwgdGhpcy5sZW5ndGggLSBvdGhlci5sZW5ndGgpOwogICAgICBvdGhlciA9IHByZXBlbmQuY29uY2F0KG90aGVyKTsKICAgIH0KICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvdGhlci5sZW5ndGg7IGkrKykgewogICAgICBpZih0eXBlb2YgdGhpc1tpXSAhPSAnb2JqZWN0JykgewogICAgICAgIGlmKHRoaXNbaV0gIT0gb3RoZXJbaV0pIHJldHVybiBmYWxzZTsKICAgICAgICBlbHNlIGlmKCFlcXVhbHModGhpc1tpXSwgb3RoZXJbaV0pKSByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyogIHN0YXJ0c1dpdGgob3RoZXIgPSBbXSkgewogICAgbGV0IGEgPSB0aGlzLnNsaWNlKDAsIG90aGVyLmxlbmd0aCk7CiAgICByZXR1cm4gTXV0YWJsZVBhdGgucHJvdG90eXBlLmVxdWFscy5jYWxsKHRoaXMsIGEpOwogIH0KCiAgZW5kc1dpdGgob3RoZXIgPSBbXSkgewogICAgbGV0IG4gPSB0aGlzLmxlbmd0aDsKICAgIGxldCBhID0gdGhpcy5zbGljZShuIC0gb3RoZXIubGVuZ3RoLCBuKTsKICAgIHJldHVybiBNdXRhYmxlUGF0aC5wcm90b3R5cGUuZXF1YWxzLmNhbGwodGhpcywgYSk7CiAgfSovCgogIGdldCBwYXJlbnQoKSB7CiAgICBsZXQgciA9IHRoaXMuc2xpY2UoMCwgdGhpcy5sZW5ndGggLSAxKTsKICAgIHJldHVybiByOwogIH0KCiAgKndhbGsodCA9IHAgPT4gcC51cCgxKSkgewogICAgbGV0IHAgPSB0aGlzOwogICAgbGV0IHJ1biA9IHRydWU7CiAgICBsZXQgc2tpcDsKICAgIGxldCBuZXh0OwogICAgY29uc3QgYWJvcnQgPSAoKSA9PiAocnVuID0gZmFsc2UpOwogICAgY29uc3Qgc2V0ID0gdiA9PiAocCA9IHYpOwogICAgY29uc3QgaWdub3JlID0gKCkgPT4gKHNraXAgPSB0cnVlKTsKICAgIGZvcihsZXQgcCA9IHRoaXMsIGkgPSAwOyBwOyBwID0gbmV4dCkgewogICAgICBuZXh0ID0gdChwLCBpKyssIGFib3J0LCBpZ25vcmUpOwogICAgICBpZighc2tpcCkgeWllbGQgcDsKICAgICAgaWYoIXJ1bikgYnJlYWs7CiAgICAgIHNraXAgPSBmYWxzZTsKICAgIH0KICB9CgogIHN0YXRpYyBjb21wYXJlKGEsIGIpIHsKICAgIGlmKGEubGVuZ3RoICE9IGIubGVuZ3RoKSByZXR1cm4gYS5sZW5ndGggLSBiLmxlbmd0aDsKICAgIGZvcihsZXQgaSA9IDAsIGxlbiA9IGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgaWYoYVtpXSA8IGJbaV0pIHJldHVybiAtMTsKICAgICAgaWYoYVtpXSA+IGJbaV0pIHJldHVybiAxOwogICAgfQogICAgcmV0dXJuIDA7CiAgfQoKICBzdGF0aWMgZXF1YWwgPSAoYSwgYikgPT4gdGhpcy5jb21wYXJlKGEsIGIpID09PSAwOwoKICBbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXS5jYWxsKHRoaXMpOwogIH0KfQovL2RlZmluZShNdXRhYmxlUGF0aC5wcm90b3R5cGUsc3BlY2lhbEZpZWxkcycsIFtdKTsKCmRlZmluZShNdXRhYmxlUGF0aC5wcm90b3R5cGUsIHsgZGVyZWY6IE11dGFibGVQYXRoLnByb3RvdHlwZS5hcHBseSB9KTsKCmRlZmluZUdldHRlcihNdXRhYmxlUGF0aCwgU3ltYm9sLnNwZWNpZXMsICgpID0+IE11dGFibGVQYXRoKTsKCmV4cG9ydCBjb25zdCBQYXRoID0gaW1tdXRhYmxlQ2xhc3MoTXV0YWJsZVBhdGgpOwoKZXhwb3J0IGNvbnN0IEltbXV0YWJsZVBhdGggPSBQYXRoOwoKZGVmaW5lR2V0dGVyKFBhdGgsIFN5bWJvbC5zcGVjaWVzLCAoKSA9PiBJbW11dGFibGVQYXRoKTsKAAAAAAAAAABPSQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqyUAAAAAAACrJQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/eagle/ref.js",
			"settings":
			{
				"buffer_size": 3417,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					10,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAdDQAAaW1wb3J0IHsgdG9YTUwgfSBmcm9tICcuLi9qc29uLmpzJzsKaW1wb3J0IHsgdGV4dCwgY29uY2F0IH0gZnJvbSAnLi9jb21tb24uanMnOwppbXBvcnQgeyBQb2ludGVyIGFzIEltbXV0YWJsZVBhdGggfSBmcm9tICcuLi9wb2ludGVyLmpzJzsKaW1wb3J0IHsgSW1tdXRhYmxlWFBhdGggfSBmcm9tICcuLi94bWwveHBhdGguanMnOwoKZXhwb3J0IGNvbnN0IENoaWxkcmVuU3ltID0gU3ltYm9sKCfiirMnKTsKCmV4cG9ydCBjbGFzcyBFYWdsZVJlZmVyZW5jZSB7CiAgY29uc3RydWN0b3Iocm9vdCwgcGF0aCwgY2hlY2sgPSB0cnVlKSB7CiAgICBpZihwYXRoIGluc3RhbmNlb2YgSW1tdXRhYmxlWFBhdGgpIHBhdGggPSBbLi4ucGF0aC50b1BvaW50ZXIocm9vdCldOwoKICAgIGlmKCEocGF0aCBpbnN0YW5jZW9mIEltbXV0YWJsZVBhdGgpKSBwYXRoID0gbmV3IEltbXV0YWJsZVBhdGgocGF0aCk7CiAgICB0aGlzLnBhdGggPSBwYXRoOwogICAgdGhpcy5yb290ID0gcm9vdDsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlUmVmZXJlbmNlJywgeyByb290OiBhYmJyZXZpYXRlKHRvWE1MKHJvb3QpLCAxMCksIHBhdGggfSk7CiAgICBpZihjaGVjayAmJiAhdGhpcy5kZXJlZmVyZW5jZSh0cnVlKSkgewogICAgICAvL2NvbnNvbGUubG9nKCdkZXJlZmVyZW5jZTonLCB7IHBhdGgsIHJvb3Q6IGFiYnJldmlhdGUodG9YTUwocm9vdCksIDEwKSB9KTsKICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMucm9vdC50YWdOYW1lICsgJyAnICsgdGhpcy5wYXRoKTsKICAgIH0KICB9CgogIGdldCB0eXBlKCkgewogICAgcmV0dXJuIHR5cGVvZiB0aGlzLnBhdGgubGFzdCA9PSAnbnVtYmVyJyA/IEFycmF5IDogT2JqZWN0OwogIH0KCiAgZ2V0UGF0aChyb290KSB7CiAgICBsZXQgcGF0aCA9IG5ldyBJbW11dGFibGVQYXRoKCk7CiAgICBsZXQgcmVmID0gdGhpczsKICAgIGRvIHsKICAgICAgcGF0aCA9IHJlZi5wYXRoLmNvbmNhdChwYXRoKTsKICAgICAgaWYocm9vdCA9PT0gdW5kZWZpbmVkIHx8IHJvb3QgPT0gcmVmKSBicmVhazsKICAgIH0gd2hpbGUodHJ1ZSk7CiAgICByZXR1cm4gcGF0aDsKICB9CgogIGRlcmVmZXJlbmNlKG5vVGhyb3cpIHsKICAgIGNvbnN0IHsgcGF0aCwgcm9vdCB9ID0gdGhpczsKICAgIGxldCByOwogICAgdHJ5IHsKICAgICAgciA9IChpc09iamVjdChyb290KSAmJiAnb3duZXInIGluIHJvb3QgJiYgcGF0aC5kZXJlZihyb290Lm93bmVyLCB0cnVlKSkgfHwgcGF0aC5kZXJlZihyb290KTsKICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgIGlmKCFub1Rocm93KSB0aHJvdyBlcnI7CiAgICAgIC8vY29uc29sZS5sb2coJ2VycjonLCBlcnIubWVzc2FnZSwgZXJyLnN0YWNrKTsKICAgIH0KICAgIHJldHVybiByOwogIH0KCiAgcmVwbGFjZSh2YWx1ZSkgewogICAgY29uc3Qgb2JqID0gdGhpcy5wYXRoLnVwKCkuYXBwbHkodGhpcy5yb290KTsKICAgIHJldHVybiAob2JqW3RoaXMucGF0aC5sYXN0XSA9IHZhbHVlKTsKICB9CgogIGVudHJ5KCkgewogICAgaWYodGhpcy5wYXRoLnNpemUgPiAwKSB7CiAgICAgIGxldCBrZXkgPSB0aGlzLnBhdGgubGFzdDsKICAgICAgbGV0IG9iaiA9IHRoaXMucGF0aC51cCgpLmFwcGx5KHRoaXMucm9vdCk7CiAgICAgIHJldHVybiBbb2JqW2tleV0sIGtleSwgb2JqXTsKICAgIH0KICAgIHJldHVybiBbdGhpcy5yb290XTsKICB9CgogIGdldCBwYXJlbnQoKSB7CiAgICByZXR1cm4gRWFnbGVSZWYodGhpcy5yb290LCB0aGlzLnBhdGguc2xpY2UoMCwgLTEpKTsKICB9CgogIGdldCBwcmV2U2libGluZygpIHsKICAgIHJldHVybiBFYWdsZVJlZih0aGlzLnJvb3QsIHRoaXMucGF0aC5wcmV2U2libGluZyk7CiAgfQogIGdldCBuZXh0U2libGluZygpIHsKICAgIHJldHVybiBFYWdsZVJlZih0aGlzLnJvb3QsIHRoaXMucGF0aC5uZXh0U2libGluZyk7CiAgfQoKICBnZXQgZmlyc3RDaGlsZCgpIHsKICAgIHJldHVybiBFYWdsZVJlZih0aGlzLnJvb3QsIHRoaXMucGF0aC5maXJzdENoaWxkKTsKICB9CiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIHJldHVybiBFYWdsZVJlZih0aGlzLnJvb3QsIHRoaXMucGF0aC5sYXN0Q2hpbGQpOwogIH0KCiAgZG93biguLi5hcmdzKSB7CiAgICAvLyByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5jYWxsKHRoaXMsIGFyZ3MpOwogICAgcmV0dXJuIG5ldyBFYWdsZVJlZmVyZW5jZSh0aGlzLnJvb3QsIHRoaXMucGF0aC5jb25jYXQoYXJncyksIGZhbHNlKTsKICB9CiAgdXAobiA9IDEpIHsKICAgIHJldHVybiBuZXcgRWFnbGVSZWZlcmVuY2UodGhpcy5yb290LCB0aGlzLnBhdGgudXAobiksIGZhbHNlKTsKICB9CiAgbGVmdChuKSB7CiAgICByZXR1cm4gbmV3IEVhZ2xlUmVmZXJlbmNlKHRoaXMucm9vdCwgdGhpcy5wYXRoLmxlZnQobiksIGZhbHNlKTsKICB9CiAgcmlnaHQobikgewogICAgcmV0dXJuIG5ldyBFYWdsZVJlZmVyZW5jZSh0aGlzLnJvb3QsIHRoaXMucGF0aC5yaWdodChuKSwgZmFsc2UpOwogIH0KCiAgc2hpZnQobiA9IDEpIHsKICAgIGxldCByb290ID0gdGhpcy5yb290OwogICAgaWYobiA8IDApIG4gPSB0aGlzLnBhdGgubGVuZ3RoICsgbjsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgbGV0IGsgPSB0aGlzLnBhdGhbaV07CiAgICAgIHJvb3QgPSByb290W2tdOwogICAgfQogICAgcmV0dXJuIG5ldyBFYWdsZVJlZmVyZW5jZShyb290LCB0aGlzLnBhdGguc2xpY2UobikpOwogIH0KCiAgW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldKCkgewogICAgcmV0dXJuIHRleHQoY2xhc3NOYW1lKHRoaXMpLCAzOCwgNSwgMjE5KSArICcgeyAnICsgdGhpcy5wYXRoW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldKCkgKyBgICwgcm9vdDoke2FiYnJldmlhdGUodG9YTUwodGhpcy5yb290LCAwKSwgNDApfSAgfWA7CiAgfQogIGluc3BlY3QoKSB7CiAgICByZXR1cm4gdGhpc1tTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSguLi5hcmd1bWVudHMpOwogIH0KfQoKZXhwb3J0IGNvbnN0IEVhZ2xlUmVmID0gZnVuY3Rpb24gRWFnbGVSZWYocm9vdCwgcGF0aCkgewogIGlmKGlzT2JqZWN0KHJvb3QpICYmIGlzT2JqZWN0KHJvb3Qucm9vdCkpIHJvb3QgPSByb290LnJvb3Q7CiAgLy9jb25zb2xlLmxvZygnRWFnbGVSZWYnLCB7IHJvb3QsIHBhdGggfSk7CiAgbGV0IG9iaiA9IG5ldyBFYWdsZVJlZmVyZW5jZShyb290LCBwYXRoKTsKICByZXR1cm4gT2JqZWN0LmZyZWV6ZShvYmopOwp9OwoKT2JqZWN0LmFzc2lnbihFYWdsZVJlZmVyZW5jZS5wcm90b3R5cGUsIHsgZGVyZWY6IEVhZ2xlUmVmZXJlbmNlLnByb3RvdHlwZS5kZXJlZmVyZW5jZSB9KTsKAAAAAAAAAABZDQAAAAAAAAAAAAAAAAAAAAAAAFkNAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABAAAAAAAAAAIAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/dom/element.js",
			"settings":
			{
				"buffer_size": 35545,
				"line_ending": "Unix"
			}
		},
		{
			"file": "lib/eagle/element.js",
			"settings":
			{
				"buffer_size": 33278,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					35,
					1,
					"cut",
					null,
					"AQAAABQAAAAAAAAAFAAAAAAAAAASAAAAZGVjb2RlSFRNTEVudGl0aWVz",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAUAAAAAAAAACYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					1,
					"paste",
					null,
					"AQAAABQAAAAAAAAAJgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAA8L8"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAMYDAAAAAAAAxwMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADGAwAAAAAAAMYDAAAAAAAAAAAAAAAA8L8"
				],
				[
					54,
					1,
					"paste",
					null,
					"AQAAAMYDAAAAAAAArgQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADGAwAAAAAAAMYDAAAAAAAAAAAAAAAAAAA"
				],
				[
					57,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAMYDAAAAAAAAxwMAAAAAAAAAAAAAxwMAAAAAAADIAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADGAwAAAAAAAMYDAAAAAAAAAAAAAAAAAAA"
				],
				[
					59,
					1,
					"insert",
					{
						"characters": "const"
					},
					"BQAAAMcDAAAAAAAAyAMAAAAAAAAAAAAAyAMAAAAAAADJAwAAAAAAAAAAAADJAwAAAAAAAMoDAAAAAAAAAAAAAMoDAAAAAAAAywMAAAAAAAAAAAAAywMAAAAAAADMAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADHAwAAAAAAAMcDAAAAAAAAAAAAAAAAAAA"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": " decode"
					},
					"BwAAAMwDAAAAAAAAzQMAAAAAAAAAAAAAzQMAAAAAAADOAwAAAAAAAAAAAADOAwAAAAAAAM8DAAAAAAAAAAAAAM8DAAAAAAAA0AMAAAAAAAAAAAAA0AMAAAAAAADRAwAAAAAAAAAAAADRAwAAAAAAANIDAAAAAAAAAAAAANIDAAAAAAAA0wMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMAwAAAAAAAMwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					61,
					1,
					"insert_completion",
					{
						"completion": "decodeHTMLEntities",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "decodeHTMLEntities"
					},
					"AgAAAM0DAAAAAAAAzQMAAAAAAAAGAAAAZGVjb2RlzQMAAAAAAADfAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADTAwAAAAAAANMDAAAAAAAAAAAAAAAA8L8"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": "=s=>s"
					},
					"BQAAAN8DAAAAAAAA4AMAAAAAAAAAAAAA4AMAAAAAAADhAwAAAAAAAAAAAADhAwAAAAAAAOIDAAAAAAAAAAAAAOIDAAAAAAAA4wMAAAAAAAAAAAAA4wMAAAAAAADkAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfAwAAAAAAAN8DAAAAAAAAAAAAAAAA8L8"
				],
				[
					63,
					2,
					"right_delete",
					null,
					"AgAAAOQDAAAAAAAA5AMAAAAAAAABAAAACuQDAAAAAAAA5AMAAAAAAAABAAAALg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkAwAAAAAAAOQDAAAAAAAAAAAAAAAA8L8"
				],
				[
					64,
					1,
					"insert",
					{
						"characters": "."
					},
					"AQAAAOQDAAAAAAAA5QMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADkAwAAAAAAAOQDAAAAAAAAAAAAAAAA8L8"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAMwEAAAAAAAAzQQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMBAAAAAAAAMwEAAAAAAAAAAAAAAAAbkA"
				],
				[
					73,
					2,
					"right_delete",
					null,
					"AgAAABQAAAAAAAAAFAAAAAAAAAASAAAAZGVjb2RlSFRNTEVudGl0aWVzFAAAAAAAAAAUAAAAAAAAAAEAAAAs",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAUAAAAAAAAACYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					83,
					1,
					"insert",
					{
						"characters": "("
					},
					"AQAAAAwEAAAAAAAADQQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAMBAAAAAAAAAwEAAAAAAAAAAAAAAAA8L8"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAALoEAAAAAAAAuwQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC6BAAAAAAAALoEAAAAAAAAAAAAAAAA8L8"
				],
				[
					130,
					1,
					"insert",
					{
						"characters": " v=>"
					},
					"BAAAAEAYAAAAAAAAQRgAAAAAAAAAAAAAQRgAAAAAAABCGAAAAAAAAAAAAABCGAAAAAAAAEMYAAAAAAAAAAAAAEMYAAAAAAAARBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABAGAAAAAAAAEAYAAAAAAAAAAAAAAAA8L8"
				],
				[
					131,
					1,
					"insert",
					{
						"characters": " v!=="
					},
					"BQAAAEQYAAAAAAAARRgAAAAAAAAAAAAARRgAAAAAAABGGAAAAAAAAAAAAABGGAAAAAAAAEcYAAAAAAAAAAAAAEcYAAAAAAAASBgAAAAAAAAAAAAASBgAAAAAAABJGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABEGAAAAAAAAEQYAAAAAAAAAAAAAAAA8L8"
				],
				[
					132,
					1,
					"insert",
					{
						"characters": " undefined"
					},
					"CgAAAEkYAAAAAAAAShgAAAAAAAAAAAAAShgAAAAAAABLGAAAAAAAAAAAAABLGAAAAAAAAEwYAAAAAAAAAAAAAEwYAAAAAAAATRgAAAAAAAAAAAAATRgAAAAAAABOGAAAAAAAAAAAAABOGAAAAAAAAE8YAAAAAAAAAAAAAE8YAAAAAAAAUBgAAAAAAAAAAAAAUBgAAAAAAABRGAAAAAAAAAAAAABRGAAAAAAAAFIYAAAAAAAAAAAAAFIYAAAAAAAAUxgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABJGAAAAAAAAEkYAAAAAAAAAAAAAAAA8L8"
				],
				[
					133,
					1,
					"insert",
					{
						"characters": " ?"
					},
					"AgAAAFMYAAAAAAAAVBgAAAAAAAAAAAAAVBgAAAAAAABVGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABTGAAAAAAAAFMYAAAAAAAAAAAAAAAA8L8"
				],
				[
					134,
					1,
					"insert",
					{
						"characters": "  "
					},
					"AgAAAFUYAAAAAAAAVhgAAAAAAAAAAAAAVhgAAAAAAABXGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABVGAAAAAAAAFUYAAAAAAAAAAAAAAAA8L8"
				],
				[
					137,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAFcYAAAAAAAAWBgAAAAAAAAAAAAAWBgAAAAAAABYGAAAAAAAAD4AAABpZlRoZW5FbHNlKAogICAgICAgICAgICB2ID0+IHYgIT09IHVuZGVmaW5lZCwKICAgICAgICAgICAgdiA9Pg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABXGAAAAAAAAJUYAAAAAAAAAAAAAAAA8L8"
				],
				[
					140,
					1,
					"left_delete",
					null,
					"AQAAAHEYAAAAAAAAcRgAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByGAAAAAAAAHIYAAAAAAAAAAAAAAAA8L8"
				],
				[
					141,
					1,
					"insert",
					{
						"characters": " :"
					},
					"AgAAAHEYAAAAAAAAchgAAAAAAAAAAAAAchgAAAAAAABzGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxGAAAAAAAAHEYAAAAAAAAAAAAAAAA8L8"
				],
				[
					142,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHMYAAAAAAAAdBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABzGAAAAAAAAHMYAAAAAAAAAAAAAAAA8L8"
				],
				[
					143,
					18,
					"right_delete",
					null,
					"EgAAAHQYAAAAAAAAdBgAAAAAAAABAAAACnQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAKHQYAAAAAAAAdBgAAAAAAAABAAAAKXQYAAAAAAAAdBgAAAAAAAABAAAAIHQYAAAAAAAAdBgAAAAAAAABAAAAPXQYAAAAAAAAdBgAAAAAAAABAAAAPg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB0GAAAAAAAAHQYAAAAAAAAAAAAAAAA8L8"
				],
				[
					145,
					1,
					"left_delete",
					null,
					"AQAAAIcYAAAAAAAAhxgAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACIGAAAAAAAAIgYAAAAAAAA////////738"
				],
				[
					146,
					1,
					"insert",
					{
						"characters": ");"
					},
					"AgAAAIcYAAAAAAAAiBgAAAAAAAAAAAAAiBgAAAAAAACJGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHGAAAAAAAAIcYAAAAAAAAAAAAAAAA8L8"
				],
				[
					149,
					1,
					"left_delete",
					null,
					"AQAAAIoYAAAAAAAAihgAAAAAAAANAAAAICAgICAgICAgICk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACKGAAAAAAAAJcYAAAAAAAAAAAAAAAAAAA"
				],
				[
					155,
					1,
					"cut",
					null,
					"AQAAAK0YAAAAAAAArRgAAAAAAAALAAAAaWZUaGVuRWxzZSg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtGAAAAAAAALgYAAAAAAAA////////738"
				],
				[
					158,
					1,
					"left_delete",
					null,
					"AQAAAM4YAAAAAAAAzhgAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADPGAAAAAAAAM8YAAAAAAAA////////738"
				],
				[
					159,
					1,
					"insert",
					{
						"characters": " ?"
					},
					"AgAAAM4YAAAAAAAAzxgAAAAAAAAAAAAAzxgAAAAAAADQGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADOGAAAAAAAAM4YAAAAAAAAAAAAAAAA8L8"
				],
				[
					160,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAANAYAAAAAAAA0RgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADQGAAAAAAAANAYAAAAAAAAAAAAAAAA8L8"
				],
				[
					161,
					16,
					"right_delete",
					null,
					"EAAAANEYAAAAAAAA0RgAAAAAAAABAAAACtEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAdtEYAAAAAAAA0RgAAAAAAAABAAAAINEYAAAAAAAA0RgAAAAAAAABAAAAPQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADRGAAAAAAAANEYAAAAAAAAAAAAAAAA8L8"
				],
				[
					162,
					1,
					"right_delete",
					null,
					"AQAAANEYAAAAAAAA0RgAAAAAAAABAAAAPg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADRGAAAAAAAANEYAAAAAAAAAAAAAAAA8L8"
				],
				[
					164,
					1,
					"left_delete",
					null,
					"AQAAAN4YAAAAAAAA3hgAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfGAAAAAAAAN8YAAAAAAAA////////738"
				],
				[
					165,
					1,
					"insert",
					{
						"characters": " :"
					},
					"AgAAAN4YAAAAAAAA3xgAAAAAAAAAAAAA3xgAAAAAAADgGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADeGAAAAAAAAN4YAAAAAAAAAAAAAAAA8L8"
				],
				[
					166,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOAYAAAAAAAA4RgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADgGAAAAAAAAOAYAAAAAAAAAAAAAAAA8L8"
				],
				[
					167,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AQAAAOEYAAAAAAAA4hgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhGAAAAAAAAOEYAAAAAAAAAAAAAAAA8L8"
				],
				[
					168,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOIYAAAAAAAA5BgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiGAAAAAAAAOIYAAAAAAAAAAAAAAAA8L8"
				],
				[
					169,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAOIYAAAAAAAA4hgAAAAAAAABAAAAKOIYAAAAAAAA4hgAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADjGAAAAAAAAOMYAAAAAAAAAAAAAAAA8L8"
				],
				[
					170,
					1,
					"left_delete",
					null,
					"AQAAAOEYAAAAAAAA4RgAAAAAAAABAAAALw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiGAAAAAAAAOIYAAAAAAAAAAAAAAAA8L8"
				],
				[
					171,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOEYAAAAAAAA4xgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhGAAAAAAAAOEYAAAAAAAAAAAAAAAA8L8"
				],
				[
					172,
					1,
					"right_delete",
					null,
					"AQAAAOIYAAAAAAAA4hgAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiGAAAAAAAAOIYAAAAAAAAAAAAAAAA8L8"
				],
				[
					174,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAH0ZAAAAAAAAfhkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9GQAAAAAAAH0ZAAAAAAAAAAAAAAAAekA"
				],
				[
					175,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAH4ZAAAAAAAAgBkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB+GQAAAAAAAH4ZAAAAAAAAAAAAAAAA8L8"
				],
				[
					177,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAIAZAAAAAAAAgRkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACAGQAAAAAAAIAZAAAAAAAAAAAAAAAA8L8"
				],
				[
					201,
					1,
					"left_delete",
					null,
					"AQAAAIIZAAAAAAAAghkAAAAAAAANAAAAICAgICAgICAgICk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCGQAAAAAAAI8ZAAAAAAAAAAAAAAAAAAA"
				],
				[
					208,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADhgQAAaW1wb3J0IHsgY2xhc3NOYW1lLCAgZGVmaW5lLCBnZXRPckNyZWF0ZSwgaW5zZXJ0ZXIsIGlzTnVtZXJpYywgaXNPYmplY3QsIHJvdW5kVG8sIHRyeUZ1bmN0aW9uLCB1Y2ZpcnN0IH0gZnJvbSAnLi4vbWlzYy5qcyc7CmltcG9ydCB0cmtsIGZyb20gJy4uL3Rya2wuanMnOwppbXBvcnQgVXRpbCBmcm9tICcuLi91dGlsLmpzJzsKaW1wb3J0IHsgRWFnbGVOb2RlIH0gZnJvbSAnLi9ub2RlLmpzJzsKaW1wb3J0IHsgRWFnbGVOb2RlTGlzdCB9IGZyb20gJy4vbm9kZUxpc3QuanMnOwppbXBvcnQgeyBFYWdsZUVsZW1lbnRQcm94eSB9IGZyb20gJy4vZWxlbWVudFByb3h5LmpzJzsKaW1wb3J0IHsgRWFnbGVSZWZlcmVuY2UgfSBmcm9tICcuL3JlZi5qcyc7CmltcG9ydCB7IFJHQkEgfSBmcm9tICcuLi9jb2xvci5qcyc7CmltcG9ydCB7IEltbXV0YWJsZVhQYXRoIH0gZnJvbSAnLi4veG1sL3hwYXRoLmpzJzsKaW1wb3J0IHsgUG9pbnRlciBhcyBJbW11dGFibGVQYXRoIH0gZnJvbSAnLi4vcG9pbnRlci5qcyc7CmltcG9ydCB7IE1ha2VSb3RhdGlvbiwgQWxpZ25tZW50LCBQaW5TaXplcyB9IGZyb20gJy4vcmVuZGVyVXRpbHMuanMnOwppbXBvcnQgeyBsYXp5UHJvcGVydHkgfSBmcm9tICcuLi9sYXp5SW5pdGlhbGl6ZXIuanMnOwppbXBvcnQgeyBCQm94LCBQb2ludCwgQ2lyY2xlLCBMaW5lLCBpc0xpbmUsIFJlY3QsIFRyYW5zZm9ybWF0aW9uTGlzdCwgVHJhbnNmb3JtYXRpb24sIFBvaW50TGlzdCwgVHJhbnNsYXRpb24sIFBvbHlnb24sIE1ha2VQb2x5Z29uIH0gZnJvbSAnLi4vZ2VvbS5qcyc7CmltcG9ydCB7IFJlcGVhdGVyIH0gZnJvbSAnLi4vcmVwZWF0ZXIvcmVwZWF0ZXIuanMnOwppbXBvcnQgeyBFYWdsZU5vZGVNYXAgfSBmcm9tICcuL25vZGVNYXAuanMnOwoKY29uc3QgYWRkID0gKGFyciwgLi4uaXRlbXMpID0+IFsuLi4oYXJyIHx8IFtdKSwgLi4uaXRlbXNdOwoKY29uc3QgZGVjb2RlSFRNTEVudGl0aWVzPXM9PnMucmVwbGFjZShuZXcgUmVnRXhwKCcmKFteO10rKTsnLCAnZ20nKSwgKG1hdGNoLCBlbnRpdHkpID0+ICh7CiAgICBhbXA6ICcmJywKICAgIGFwb3M6ICInIiwKICAgICcjeDI3JzogIiciLAogICAgJyN4MkYnOiAnLycsCiAgICAnIzM5JzogIiciLAogICAgJyM0Nyc6ICcvJywKICAgIGx0OiAnPCcsCiAgICBndDogJz4nLAogICAgbmJzcDogJyAnLAogICAgcXVvdDogJyInCiAgfVtlbnRpdHldIHx8IG1hdGNoKSk7Cgpjb25zdCBUTGlzdCA9IChjaGlsZCwgZWxlbSkgPT4gewogIGxldCB0cmFuc2Zvcm1hdGlvbiA9IGVsZW0udHJhbnNmb3JtYXRpb24oKTsKICBsZXQgaW5zdGFuY2UgPSB7IGNoaWxkLCBlbGVtIH07CiAgbGV0IHJvdW5kID0gbiA9PiByb3VuZFRvKG4sIDAuMDAwMSwgNCk7CiAgcmV0dXJuIG5ldyBQcm94eShpbnN0YW5jZS5jaGlsZCwgewogICAgZ2V0KHRhcmdldCwgcHJvcCkgewogICAgICBsZXQgdiA9IFJlZmxlY3QuZ2V0KGluc3RhbmNlLmNoaWxkLCBwcm9wKTsKICAgICAgaWYoWyd4JywgJ3knXS5pbmRleE9mKHByb3ApICE9IC0xKSB7CiAgICAgICAgdiA9IGluc3RhbmNlLmVsZW1bcHJvcF0gKyB0YXJnZXRbcHJvcF07CiAgICAgICAgdiA9IHJvdW5kKHYpOwogICAgICB9IGVsc2UgaWYocHJvcCA9PSBlbGVtLnRhZ05hbWUpIHsKICAgICAgICB2ID0gZWxlbTsKICAgICAgfSBlbHNlIGlmKHByb3AgPT0gJ2dlb21ldHJ5JykgewogICAgICAgIHYgPSB0YXJnZXRbcHJvcF07CiAgICAgICAgdiA9IHYuY2xvbmUoKTsKICAgICAgICAvL2NvbnNvbGUubG9nKGBUTGlzdCBnZXQoJHtwcm9wfSlgLCB7IGVsZW0sIHRyYW5zZm9ybWF0aW9uLCB0YXJnZXQgfSk7CiAgICAgICAgdHJhbnNmb3JtYXRpb24uYXBwbHkodik7CiAgICAgIH0KICAgICAgcmV0dXJuIHY7CiAgICB9CiAgfSk7Cn07CgpleHBvcnQgY2xhc3MgRWFnbGVFbGVtZW50IGV4dGVuZHMgRWFnbGVOb2RlIHsKICBzdGF0aWMgbGlzdCA9IFtdOwogIHN0YXRpYyBjdXJyZW50RWxlbWVudCA9IG51bGw7CgogIHN0YXRpYyBtYWtlVHJhbnNwYXJlbnQgPSBuZXcgUkdCQSgyNTUsIDI1NSwgMjU1KS50b0FscGhhKCk7CgogIHN0YXRpYyBnZXQob3duZXIsIHJlZiwgcmF3KSB7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZUVsZW1lbnQuZ2V0Jywge293bmVyOiBvd25lci5yYXcscmVmLHJhd30pOwogICAgaWYocmVmLmxlbmd0aCA9PT0gMCB8fCByYXcgPT09IHVuZGVmaW5lZCkgewogICAgICBsZXQgcm9vdCA9ICdyb290JyBpbiByZWYgPyByZWYucm9vdCA6IG51bGw7CiAgICAgIGxldCBwYXRoID0gJ3BhdGgnIGluIHJlZiA/IHJlZi5wYXRoIDogcmVmOwogICAgICBnbG9iYWxUaGlzLnRtcCA9IHsgb3duZXIsIHJvb3QsIHBhdGgsIHJhdywgcmVmIH07CiAgICAgIC8vaWYob3duZXIgaW5zdGFuY2VvZiBFYWdsZURvY3VtZW50ICYmIHJvb3QgPT0gbnVsbCAmJiBwYXRoLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdFYWdsZUVsZW1lbnQuZ2V0Jyk7CiAgICB9CiAgICBsZXQgcm9vdCA9IHJlZi5yb290IHx8IG93bmVyLnJhdyA/IG93bmVyLnJhdyA6IG93bmVyOwogICAgbGV0IGRvYyA9IG93bmVyLmRvY3VtZW50OwogICAgY29uc3QgeyBwYXRoTWFwcGVyLCByYXcyZWxlbWVudCB9ID0gZG9jOwogICAgbGV0IGluc2VydCA9IGluc2VydGVyKHBhdGhNYXBwZXIpOwogICAgLy9jb25zb2xlLmxvZygnRWFnbGVFbGVtZW50LmdldCgxKScsIHtyb290LHJlZn0pOwogICAgaWYodHlwZW9mIHJlZiA9PSAnc3RyaW5nJykgcmVmID0gbmV3IEltbXV0YWJsZVBhdGgocmVmLCB7IHNlcGFyYXRvcjogJyAnIH0pOwogICAgLy9jb25zb2xlLmxvZygnRWFnbGVFbGVtZW50LmdldCgyKScsIHtyb290LHJlZn0pOwogICAgLy8KICAgIGlmKGlzT2JqZWN0KHJlZikgJiYgQXJyYXkuaXNBcnJheShyZWYpICYmICEocmVmIGluc3RhbmNlb2YgRWFnbGVSZWZlcmVuY2UpKSB7CiAgICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5nZXQoMiknLCB7cm9vdCxyZWZ9KTsKCiAgICAgIHRyeSB7CiAgICAgICAgcmVmID0gbmV3IEVhZ2xlUmVmZXJlbmNlKG93bmVyLCByZWYpOwogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmVmID0gbmV3IEVhZ2xlUmVmZXJlbmNlKG93bmVyLnJhdywgcmVmKTsKICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgIHJlZiA9IG5ldyBFYWdsZVJlZmVyZW5jZShyb290LCByZWYpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYoIWlzT2JqZWN0KHJlZikgfHwgISgnZGVyZWZlcmVuY2UnIGluIHJlZikgfHwgIShyZWYgaW5zdGFuY2VvZiBFYWdsZVJlZmVyZW5jZSkpIHsKICAgICAgcmVmID0gbmV3IEVhZ2xlUmVmZXJlbmNlKHJvb3QsIHJlZik7CiAgICB9CiAgICBpZighcmF3ICYmIGlzT2JqZWN0KHJlZi5wYXRoKSkgcmF3ID0gcmVmLnBhdGguZGVyZWYocm9vdCwgdHJ1ZSk7CiAgICBpZighcmF3KSByYXcgPSByZWYuZGVyZWZlcmVuY2UoKTsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5nZXQoMiknLCB7cm9vdCxyZWYscmF3fSk7CiAgICBsZXQgaW5zdCA9IGRvYy5yYXcyZWxlbWVudChyYXcsIG93bmVyLCByZWYpOwogICAgaW5zZXJ0KGluc3QsIHJlZi5wYXRoKTsKICAgIEVhZ2xlRWxlbWVudC5jdXJyZW50RWxlbWVudCA9IGluc3Q7CiAgICByZXR1cm4gaW5zdDsKICB9CgogIHN0YXRpYyBjcmVhdGUodGFnTmFtZSwgYXR0cmlidXRlcyA9IHt9LCBjaGlsZHJlbiA9IFtdKSB7CiAgICBmb3IobGV0IG5hbWUgaW4gYXR0cmlidXRlcykgewogICAgICBhdHRyaWJ1dGVzW25hbWVdID0gYXR0cmlidXRlc1tuYW1lXSArICcnOwogICAgfQogICAgcmV0dXJuIHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4gfTsKICB9CiAgc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkgewogICAgcmV0dXJuIEVhZ2xlRWxlbWVudDsKICB9CgogIGNvbnN0cnVjdG9yKG93bmVyLCByZWYsIHJhdykgewogICAgLy9jb25zb2xlLmxvZygnRWFnbGVFbGVtZW50LmNvbnN0cnVjdG9yJywge293bmVyOiBvd25lci5yYXcscmVmLHJhd30pOwogICAgaWYoY2xhc3NOYW1lKG93bmVyKSA9PSAnT2JqZWN0JykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7aW5zcGVjdChvd25lciwgMCl9ICR7aW5zcGVjdChyZWYsIDEpfWApOwogICAgfQogICAgc3VwZXIob3duZXIsIHJlZiwgcmF3KTsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5jb25zdHJ1Y3RvcigyKScsIHtvd25lcjogdGhpcy5vd25lciwgcmVmOiB0aGlzLnJlZixyYXc6IHRoaXMucmF3fSk7CgogICAgRWFnbGVFbGVtZW50Lmxpc3QucHVzaCh0aGlzKTsKICAgIGRlZmluZSh0aGlzLCB7IGhhbmRsZXJzOiB7fSB9KTsKICAgIGxldCBwYXRoID0gdGhpcy5yZWYucGF0aDsKICAgIGlmKG93bmVyID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ293bmVyID09IG51bGwnKTsKICAgIGlmKHJhdyA9PT0gdW5kZWZpbmVkIHx8IChyYXcudGFnTmFtZSA9PT0gdW5kZWZpbmVkICYmIHJhdy5hdHRyaWJ1dGVzID09PSB1bmRlZmluZWQgJiYgcmF3LmNoaWxkcmVuID09PSB1bmRlZmluZWQpKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmF3ID0gdGhpcy5yZWYuZGVyZWZlcmVuY2UoKTsKICAgICAgfSBjYXRjaChlcnJvcikge30KICAgIH0KICAgIGlmKHJhdyA9PT0gbnVsbCB8fCB0eXBlb2YgcmF3ICE9ICdvYmplY3QnKSB0aHJvdyBuZXcgRXJyb3IoJ3JlZjogJyArIHRoaXMucmVmLmluc3BlY3QoKSArICcgZW50aXR5OiAnICsgRWFnbGVOb2RlLnByb3RvdHlwZS5pbnNwZWN0LmNhbGwodGhpcykpOwogICAgbGV0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4gPSBbXSB9ID0gcmF3OwogICAgLy90aGlzLnRhZ05hbWUgPSB0YWdOYW1lOwogICAgZGVmaW5lKHRoaXMsIHsgYXR0ck1hcDoge30gfSk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3RhZ05hbWUnLCB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5yYXcudGFnTmFtZTsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZQogICAgfSk7CiAgICBsZXQgZG9jID0gdGhpcy5nZXREb2N1bWVudCgpOwogICAgbGV0IGVsZW0gPSB0aGlzOwogICAgY29uc3QgYXR0cmlidXRlTGlzdCA9IEVhZ2xlRWxlbWVudC5hdHRyaWJ1dGVMaXN0c1t0YWdOYW1lXSB8fCBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzIHx8IHt9KTsKICAgIGlmKHRhZ05hbWUgPT0gJ2NvbnRhY3RyZWYnKSB7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAnZWxlbWVudCcsICgpID0+IHsKICAgICAgICBjb25zdCB7IGVsZW1lbnQsIHBhZCB9ID0gYXR0cmlidXRlczsKICAgICAgICByZXR1cm4gZG9jLmVsZW1lbnRzW2VsZW1lbnRdOwogICAgICB9KTsKICAgICAgbGF6eVByb3BlcnR5KHRoaXMsICdwYWQnLCAoKSA9PiB7CiAgICAgICAgY29uc3QgeyBlbGVtZW50LCBwYWQgfSA9IGF0dHJpYnV0ZXM7CiAgICAgICAgcmV0dXJuIGRvYy5lbGVtZW50c1tlbGVtZW50XS5wYWRzW3BhZF07CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgbmFtZXMgPSB0aGlzLm5hbWVzKCk7CiAgICAgIGZvcihsZXQga2V5IG9mIGF0dHJpYnV0ZUxpc3QpIHsKICAgICAgICBsZXQgcHJvcCA9IHRya2wucHJvcGVydHkodGhpcy5hdHRyTWFwLCBrZXkpOwogICAgICAgIGxldCBoYW5kbGVyOwogICAgICAgIGlmKFsndmlzaWJsZScsICdhY3RpdmUnXS5pbmRleE9mKGtleSkgIT0gLTEpCiAgICAgICAgICBoYW5kbGVyID0gaWZUaGVuRWxzZSgKICAgICAgICAgICAgdiA9PiB2ICE9PSB1bmRlZmluZWQsCiAgICAgICAgICAgIHYgPT4gcHJvcCh2ID09PSB0cnVlID8gJ3llcycgOiB2ID09PSBmYWxzZSA/ICdubycgOiB2KSwKICAgICAgICAgICAgKCkgPT4gewogICAgICAgICAgICAgIGxldCB2ID0gcHJvcCgpOwogICAgICAgICAgICAgIGlmKHYgPT0gJ3llcycpIHYgPSB0cnVlOwogICAgICAgICAgICAgIGVsc2UgaWYodiA9PSAnbm8nKSB2ID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgZWxzZSBpZihrZXkgPT0gJ2RpYW1ldGVyJykgewogICAgICAgICAgY29uc3QgZ2V0RGlhbWV0ZXIgPSBpZlRoZW5FbHNlKAogICAgICAgICAgICB2ID0+IGlzTmFOKCt2KSwKICAgICAgICAgICAgKCkgPT4gJ2F1dG8nLAogICAgICAgICAgICB2ID0+ICt2CiAgICAgICAgICApOwogICAgICAgICAgaGFuZGxlciA9ICB2PT4gdiE9PSB1bmRlZmluZWQgPyAgICBwcm9wKGlzTmFOKCt2KSA/IHYgOiArdikgOiAgZ2V0RGlhbWV0ZXIocHJvcCgpKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgIGhhbmRsZXIgPSAKICAgICAgICAgICAgdiA9PiB2ICE9PSB1bmRlZmluZWQgPyAgcHJvcCh2ICsgJycpIDogKAogICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgbGV0IHYgPSBwcm9wKCk7CiAgICAgICAgICAgICAgaWYoaXNOdW1lcmljKHYpICYmIGtleSAhPSAnbmFtZScpIHYgPSBwYXJzZUZsb2F0KHYpOwogICAgICAgICAgICAgIHJldHVybiB2OwogICAgICAgICAgICB9KSgpOwoKICAgICAgICBwcm9wKGF0dHJpYnV0ZXNba2V5XSk7CiAgICAgICAgcHJvcC5zdWJzY3JpYmUodmFsdWUgPT4gKHZhbHVlICE9PSB1bmRlZmluZWQgPyAocmF3LmF0dHJpYnV0ZXNba2V5XSA9ICcnICsgdmFsdWUpIDogZGVsZXRlIHJhdy5hdHRyaWJ1dGVzW2tleV0pKTsKICAgICAgICBwcm9wLnN1YnNjcmliZSh2YWx1ZSA9PiAoZWxlbS5wdXNoRXZlbnQgPyBlbGVtLnB1c2hFdmVudChlbGVtLCBrZXksIHZhbHVlKSA6IHZvaWQgMCkpOwogICAgICAgIHRoaXMuaGFuZGxlcnNba2V5XSA9IHByb3A7CgogICAgICAgIGlmKE9iamVjdC5rZXlzKG5hbWVzKS5pbmRleE9mKGtleSkgIT0gLTEgJiYgIShbJ2luc3RhbmNlJywgJ3BhcnQnLCAnZWxlbWVudCddLmluZGV4T2YodGFnTmFtZSkgIT0gLTEgJiYgWyduYW1lJywgJ3ZhbHVlJ10uaW5kZXhPZihrZXkpICE9IC0xKSkgewogICAgICAgICAgbXNnYGtleT0ke2tleX0gbmFtZXM9JHtuYW1lc31gOwogICAgICAgICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiAodiA/IHYubmFtZXMuZm9yRWFjaChuYW1lID0+IHRoaXMuaGFuZGxlcnNbbmFtZV0odi5uYW1lc1tuYW1lXSkpIDogdGhpcy5saWJyYXJ5W2tleSArICdzJ11bdGhpcy5hdHRyTWFwW2tleV1dKSk7CiAgICAgICAgfSBlbHNlIGlmKGtleSA9PSAnZGV2aWNlJykgewogICAgICAgICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiB7CiAgICAgICAgICAgIGlmKHYpIHsKICAgICAgICAgICAgICBjb25zdCB7IG5hbWVzIH0gPSB2OwogICAgICAgICAgICAgIGlmKG5hbWVzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMubGlicmFyeShuYW1lcy5saWJyYXJ5KTsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuZGV2aWNlc2V0KG5hbWVzLmRldmljZXNldCk7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmRldmljZShuYW1lcy5kZXZpY2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBsaWJyYXJ5ID0gZG9jLmdldExpYnJhcnkoYXR0cmlidXRlcy5saWJyYXJ5KTsKICAgICAgICAgICAgICBjb25zdCBkZXZpY2VzZXQgPSBsaWJyYXJ5LmRldmljZXNldHNbYXR0cmlidXRlcy5kZXZpY2VzZXRdOwogICAgICAgICAgICAgIGNvbnN0IGRldmljZSA9IGRldmljZXNldC5kZXZpY2VzW2F0dHJpYnV0ZXMuZGV2aWNlXTsKICAgICAgICAgICAgICByZXR1cm4gZGV2aWNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYodGFnTmFtZSA9PSAnbGF5ZXInICYmIGtleSA9PSAnY29sb3InKSB7CiAgICAgICAgICBkZWZpbmUodGhpcywgewogICAgICAgICAgICBnZXQgY29sb3IoKSB7CiAgICAgICAgICAgICAgbGV0IGNvbG9ySW5kZXggPSBhdHRyaWJ1dGVzLmNvbG9yID09IHVuZGVmaW5lZCA/IDE1IDogYXR0cmlidXRlcy5jb2xvcjsKICAgICAgICAgICAgICBsZXQgY29sb3IgPSBkb2MucGFsZXR0ZVtjb2xvckluZGV4XSB8fCBkb2MucGFsZXR0ZVswYjAxMTBdOwogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbG9ySW5kZXgnLCBjb2xvckluZGV4LCBjb2xvcik7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYoRWFnbGVFbGVtZW50LmlzUmVsYXRpb24oa2V5KSB8fCBbJ3BhY2thZ2UnLCAnbGlicmFyeScsICdsYXllciddLmluZGV4T2Yoa2V5KSAhPSAtMSkgewogICAgICAgICAgbGV0IGhmbjsKICAgICAgICAgIGlmKGtleSA9PSAncGFja2FnZScpIHsKICAgICAgICAgICAgaGZuID0gdmFsdWUgPT4gewogICAgICAgICAgICAgIGNvbnN0IGxpYk5hbWUgPSBlbGVtLmF0dHJpYnV0ZXMubGlicmFyeTsKICAgICAgICAgICAgICBjb25zdCBwa2dOYW1lID0gZWxlbS5oYW5kbGVycy5wYWNrYWdlKCk7CiAgICAgICAgICAgICAgY29uc3QgbGlicmFyeSA9IHRoaXMuZG9jdW1lbnQuZ2V0TGlicmFyeShsaWJOYW1lKTsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRhZ05hbWUsIHsgbGliTmFtZSwgcGtnTmFtZSwgbGlicmFyeSwga2V5IH0pOwoKICAgICAgICAgICAgICByZXR1cm4gbGlicmFyeS5wYWNrYWdlc1twa2dOYW1lXTsgLy8oeyB0YWdOYW1lOiAncGFja2FnZScsIG5hbWU6IHBrZ05hbWUgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYodGFnTmFtZSA9PSAncGFydCcpIHsKICAgICAgICAgICAgc3dpdGNoIChrZXkpIHsKICAgICAgICAgICAgICBjYXNlICduYW1lJzoKICAgICAgICAgICAgICAgIGhmbiA9ICgpID0+IGF0dHJpYnV0ZXMubmFtZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ2xpYnJhcnknOgogICAgICAgICAgICAgICAgaGZuID0gKCkgPT4gZG9jLmdldExpYnJhcnkoYXR0cmlidXRlcy5saWJyYXJ5KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ2RldmljZXNldCc6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiB0aGlzLmxpYnJhcnkuZGV2aWNlc2V0c1thdHRyaWJ1dGVzLmRldmljZXNldF07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICd2YWx1ZSc6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiBhdHRyaWJ1dGVzLnZhbHVlIHx8IGF0dHJpYnV0ZXMuZGV2aWNlc2V0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAnZGV2aWNlJzoKICAgICAgICAgICAgICAgIGhmbiA9ICgpID0+IHRoaXMuZGV2aWNlc2V0LmRldmljZXNbYXR0cmlidXRlcy5kZXZpY2VdOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZih0YWdOYW1lID09ICdpbnN0YW5jZScgfHwgdGFnTmFtZSA9PSAncGlucmVmJykgewogICAgICAgICAgICBjb25zdCBtb2R1bGUgPSBlbGVtLmNoYWluLm1vZHVsZSB8fCBkb2M7CgogICAgICAgICAgICAvKiAgICAgICAgaWYodGhpcy5saWJyYXJ5ID09PSB1bmRlZmluZWQpIHRya2wuYmluZCh0aGlzLCAnbGlicmFyeScsICgpID0+IHRoaXMucGFydC5saWJyYXJ5IHx8IHRoaXMuZG9jdW1lbnQuZ2V0TGlicmFyeSh0aGlzLnBhcnQuYXR0cmlidXRlcy5saWJyYXJ5KSk7CiAgICAgICAgICAgICAgaWYodGhpcy5kZXZpY2VzZXQgPT09IHVuZGVmaW5lZCkgdHJrbC5iaW5kKHRoaXMsICdkZXZpY2VzZXQnLCAoKSA9PiB0aGlzLnBhcnQuZGV2aWNlc2V0IHx8IHRoaXMubGlicmFyeS5kZXZpY2VzZXRzW3RoaXMucGFydC5hdHRyaWJ1dGVzLmRldmljZXNldF0pOwogICAgICAgICAgICAgIGlmKHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCkgdHJrbC5iaW5kKHRoaXMsICd2YWx1ZScsICgpID0+IHRoaXMucGFydC52YWx1ZSB8fCB0aGlzLmRldmljZXNldC5uYW1lKTsKKi8KICAgICAgICAgICAgc3dpdGNoIChrZXkpIHsKICAgICAgICAgICAgICBjYXNlICdwYXJ0JzoKICAgICAgICAgICAgICAgIGhmbiA9ICgpID0+IHRoaXMuZG9jdW1lbnQuZ2V0KGUgPT4gZS50YWdOYW1lID09ICdwYXJ0JyAmJiBlLmF0dHJpYnV0ZXMubmFtZSA9PSBhdHRyaWJ1dGVzLnBhcnQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAnZ2F0ZSc6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiB0aGlzLnBhcnQuZGV2aWNlc2V0LmdhdGVzW2F0dHJpYnV0ZXMuZ2F0ZV07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICdzeW1ib2wnOgogICAgICAgICAgICAgICAgaGZuID0gKCkgPT4gdGhpcy5nYXRlLnN5bWJvbDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ3Bpbic6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiB0aGlzLmdhdGUuc3ltYm9sLnBpbnNbYXR0cmlidXRlcy5waW5dOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZihrZXkgPT0gJ2xheWVyJykgewogICAgICAgICAgICBkZWZpbmUodGhpcywgewogICAgICAgICAgICAgIGdldCBsYXllcigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExheWVyKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZihrZXkgKyAncycgaW4gZG9jKSB7CiAgICAgICAgICAgIGhmbiA9ICgpID0+IGRvY1trZXkgKyAncyddW2VsZW0uYXR0ck1hcFtrZXldICsgJyddOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IGlkID0ga2V5ID09ICdsYXllcicgPyAnbnVtYmVyJyA6ICduYW1lJzsKICAgICAgICAgICAgaGZuID0gKCkgPT4gewogICAgICAgICAgICAgIGxldCByLAogICAgICAgICAgICAgICAgdmFsdWUgPSBlbGVtLmF0dHJNYXBba2V5XTsKICAgICAgICAgICAgICBsZXQgbGlzdCA9IGtleSA9PSAnbGlicmFyeScgPyAnbGlicmFyaWVzJyA6IGtleSArICdzJzsKICAgICAgICAgICAgICByID0gbGlzdCBpbiBkb2MgPyBkb2NbbGlzdF1bdmFsdWVdIDogZG9jLmdldCh7IHRhZ05hbWU6IGtleSwgW2lkXTogdmFsdWUgfSk7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgcmVsYXRpb24gZ2V0KCR7a2V5fSwgJHthdHRyaWJ1dGVzW2lkXX0pID0gYCwgcik7CiAgICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmKHRoaXNba2V5XSA9PSB1bmRlZmluZWQpIHRoaXMuaW5pdFJlbGF0aW9uKGtleSwgdGhpcy5oYW5kbGVyc1trZXldLCBoZm4pOwogICAgICAgICAgfQogICAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ2hmbicsIHtoZm46aGZuKycnLHRhZ05hbWUsa2V5fSk7CiAgICAgICAgICAvKiAgbGV0IG5mbiA9ICguLi5hcmdzKSA9PiB7CiAgICAgICAgICAgIGxldCByZXQ7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0ID0gaGZuKC4uLmFyZ3MpOwogICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICByZXQgPSBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICB9OwoqLwogICAgICAgICAgaWYodGhpc1trZXldID09IHVuZGVmaW5lZCkgdHJrbC5iaW5kKHRoaXMsIGtleSwgaGZuKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgaGFuZGxlcik7CiAgICAgICAgfQogICAgICAgIC8vIHByb3Auc3Vic2NyaWJlKHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ldmVudChrZXksIHZhbHVlKSk7CgogICAgICAgIC8vY29uc29sZS5sb2coInByb3A6IixrZXkscHJvcC5zdWJzY3JpYmUpOwogICAgICB9CiAgICB9CiAgICBsZXQgY2hpbGRMaXN0ID0gbnVsbDsKCiAgICBpZih0YWdOYW1lID09ICdlbGVtZW50JykgbGF6eVByb3BlcnR5KHRoaXMsICdjaGlsZHJlbicsICgpID0+IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMucGFja2FnZSwgdGhpcy5wYWNrYWdlLnBhdGguZG93bignY2hpbGRyZW4nKSwgbnVsbCkpOwogICAgZWxzZSBpZignY2hpbGRyZW4nIGluIHJhdykgbGF6eVByb3BlcnR5KHRoaXMsICdjaGlsZHJlbicsICgpID0+IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMsIHRoaXMucGF0aC5kb3duKCdjaGlsZHJlbicpLCBudWxsKSk7CgogICAgaWYodGFnTmFtZSA9PSAnZHJhd2luZycgfHwgdGFnTmFtZSA9PSAnc2NoZW1hdGljJyB8fCB0YWdOYW1lID09ICdib2FyZCcpIHsKICAgICAgZm9yKGxldCBjaGlsZCBvZiByYXcuY2hpbGRyZW4pIGxhenlQcm9wZXJ0eSh0aGlzLCBjaGlsZC50YWdOYW1lLCAoKSA9PiB0aGlzLmdldChlID0+IGUudGFnTmFtZSA9PSBjaGlsZC50YWdOYW1lKSk7CiAgICB9CgogICAgaWYodGFnTmFtZSA9PSAncGFkJykgewogICAgICB0cmtsLmJpbmQodGhpcywgJ2xheWVyJywgKCkgPT4gZG9jLmxheWVyc1snUGFkcyddKTsKICAgIH0gZWxzZSBpZih0YWdOYW1lID09ICd2aWEnKSB7CiAgICAgIHRya2wuYmluZCh0aGlzLCAnbGF5ZXInLCAoKSA9PiBkb2MubGF5ZXJzWydWaWFzJ10pOwogICAgfSBlbHNlIGlmKHRhZ05hbWUgPT0gJ2hvbGUnKSB7CiAgICAgIHRya2wuYmluZCh0aGlzLCAnbGF5ZXInLCAoKSA9PiBkb2MubGF5ZXJzWydIb2xlcyddKTsKICAgIH0KICAgIGlmKHRhZ05hbWUgPT0gJ3BhcnQnKSBsYXp5UHJvcGVydHkodGhpcywgJ3BhY2thZ2UnLCAoKSA9PiB0aGlzLmRldmljZS5wYWNrYWdlKTsKCiAgICBpZih0YWdOYW1lID09ICdpbnN0YW5jZScpIGxhenlQcm9wZXJ0eSh0aGlzLCAncGFja2FnZScsICgpID0+IHRoaXMucGFydC5kZXZpY2UucGFja2FnZSk7CgogICAgaWYodGFnTmFtZSA9PSAnZ2F0ZScpIHsKICAgICAgdHJrbC5iaW5kKHRoaXMsICdzeW1ib2wnLCAoKSA9PiB7CiAgICAgICAgbGV0IHsgbGlicmFyeSB9ID0gdGhpcy5zY29wZTIoLyoobywgcCwgdikgPT4gW3YudGFnTmFtZSwgRWFnbGVFbGVtZW50LmdldChvLCBwLCB2KV0qLyk7CiAgICAgICAgcmV0dXJuIGxpYnJhcnkuc3ltYm9sc1thdHRyaWJ1dGVzLnN5bWJvbF07CiAgICAgIH0pOwoKICAgICAgdHJrbC5iaW5kKHRoaXMsICdwaW5zJywgKCkgPT4gdGhpcy5zeW1ib2wucGlucyk7CiAgICB9IGVsc2UgaWYodGFnTmFtZSA9PSAnaW5zdGFuY2UnKSB7CiAgICAgIHRya2wuYmluZCh0aGlzLCAncGlucycsICgpID0+IHRoaXMuc3ltYm9sLnBpbnMpOwoKICAgICAgdHJrbC5iaW5kKHRoaXMsICdzeW1ib2wnLCAoKSA9PiB0aGlzLmdhdGUuc3ltYm9sKTsKICAgIH0gZWxzZSBpZih0YWdOYW1lID09ICdkZXZpY2UnKSB7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAncGFja2FnZScsICgpID0+IHsKICAgICAgICBjb25zdCBsaWJyYXJ5ID0gdGhpcy5jaGFpbi5saWJyYXJ5OwoKICAgICAgICBpZighbGlicmFyeS5wYWNrYWdlcykgY29uc29sZS5sb2coJycsIHsgdGFnTmFtZSB9LCB0aGlzLmNoYWluKTsKICAgICAgICBsZXQgcGtnID0gbGlicmFyeS5wYWNrYWdlc1thdHRyaWJ1dGVzLnBhY2thZ2VdOwogICAgICAgIHJldHVybiBwa2c7CiAgICAgIH0pOwogICAgfQoKICAgIGlmKFsnYXR0cmlidXRlJywgJ2VsZW1lbnQnLCAnaW5zdGFuY2UnLCAnbGFiZWwnLCAnbW9kdWxlaW5zdCcsICdwYWQnLCAncGluJywgJ3Byb2JlJywgJ3JlY3RhbmdsZScsICdzbWQnLCAndGV4dCddLmluZGV4T2YodGFnTmFtZSkgIT0gLTEpIHsKICAgIH0KICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5pbml0Q2FjaGUnLCB0aGlzKTsKCiAgICB0aGlzLmluaXRDYWNoZShFYWdsZUVsZW1lbnQsIEVhZ2xlTm9kZUxpc3QuY3JlYXRlKTsKCiAgICBpZih0YWdOYW1lID09ICdzeW1ib2wnKSB7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAncGlucycsICgpID0+IHsKICAgICAgICBsZXQgbGlzdCA9IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMsIHRoaXMucGF0aC5kb3duKCdjaGlsZHJlbicpLCBlID0+IGUudGFnTmFtZSA9PSAncGluJyk7CiAgICAgICAgcmV0dXJuIEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdCwgJ25hbWUnKTsKICAgICAgfSk7CiAgICB9CiAgICBpZih0YWdOYW1lID09ICdlbGVtZW50JykgewogICAgICBpZih0aGlzLnBhY2thZ2UpIHsKICAgICAgICBmb3IobGV0IGtleSBvZiBbJ3BhZCcsICd3aXJlJywgJ2NpcmNsZScsICd0ZXh0JywgJ3JlY3RhbmdsZSddKQogICAgICAgICAgbGF6eVByb3BlcnR5KHRoaXMsIGtleSArICdzJywgKCkgPT4gewogICAgICAgICAgICBsZXQgbGlzdCA9IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKAogICAgICAgICAgICAgIHRoaXMsCiAgICAgICAgICAgICAgdGhpcy5wYWNrYWdlLnJlZi5kb3duKCdjaGlsZHJlbicpLAogICAgICAgICAgICAgIGUgPT4gZS50YWdOYW1lID09IGtleSwKICAgICAgICAgICAgICAobywgcCwgcikgPT4gVExpc3QoRWFnbGVFbGVtZW50LmdldChvLCBwLCByKSwgZWxlbSkKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGlmKGtleSAhPSAncGFkJykgcmV0dXJuIGxpc3Q7CiAgICAgICAgICAgIHJldHVybiBFYWdsZU5vZGVNYXAuY3JlYXRlKGxpc3QsICduYW1lJyk7CiAgICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdHJrbC5iaW5kKHRoaXMsICdjb250YWN0cycsICgpID0+CiAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKAogICAgICAgICAgWwogICAgICAgICAgICAuLi5kb2MuYm9hcmQuc2lnbmFscy5nZXRBbGwoewogICAgICAgICAgICAgIHRhZ05hbWU6ICdjb250YWN0cmVmJywKICAgICAgICAgICAgICBlbGVtZW50OiBhdHRyaWJ1dGVzLm5hbWUKICAgICAgICAgICAgfSkKICAgICAgICAgIF0ubWFwKGNyZWYgPT4gW2NyZWYucGFkLm5hbWUsIGNyZWYucGFyZW50Tm9kZV0pCiAgICAgICAgKQogICAgICApOwogICAgICB0cmtsLmJpbmQodGhpcywgJ2NvbnRhY3RyZWZzJywgKCkgPT4KICAgICAgICBPYmplY3QuZnJvbUVudHJpZXMoCiAgICAgICAgICBbCiAgICAgICAgICAgIC4uLmRvYy5ib2FyZC5zaWduYWxzLmdldEFsbCh7CiAgICAgICAgICAgICAgdGFnTmFtZTogJ2NvbnRhY3RyZWYnLAogICAgICAgICAgICAgIGVsZW1lbnQ6IGF0dHJpYnV0ZXMubmFtZQogICAgICAgICAgICB9KQogICAgICAgICAgXS5tYXAoY3JlZiA9PiBbY3JlZi5wYWQubmFtZSwgY3JlZl0pCiAgICAgICAgKQogICAgICApOwogICAgfQogICAgaWYodGFnTmFtZSA9PSAnc2lnbmFsJykgewogICAgICBmb3IobGV0IHByb3Agb2YgWyd2aWEnLCAnd2lyZScsICdjb250YWN0cmVmJ10pIHsKICAgICAgICBsYXp5UHJvcGVydHkodGhpcywgcHJvcCArICdzJywgKCkgPT4gRWFnbGVOb2RlTGlzdC5jcmVhdGUodGhpcywgdGhpcy5wYXRoLmRvd24oJ2NoaWxkcmVuJyksIGUgPT4gZS50YWdOYW1lID09IHByb3ApKTsKICAgICAgfQogICAgfQogICAgaWYodGFnTmFtZSA9PSAncGFja2FnZScpIHsKICAgICAgbGF6eVByb3BlcnR5KHRoaXMsICd2aWFzJywgKCkgPT4gRWFnbGVOb2RlTGlzdC5jcmVhdGUodGhpcywgdGhpcy5wYXRoLmRvd24oJ2NoaWxkcmVuJyksIGUgPT4gZS50YWdOYW1lID09ICd2aWEnKSk7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAncGFkcycsICgpID0+IHsKICAgICAgICBsZXQgbGlzdCA9IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMsIHRoaXMucGF0aC5kb3duKCdjaGlsZHJlbicpLCBlID0+IGUudGFnTmFtZSA9PSAncGFkJyk7CiAgICAgICAgcmV0dXJuIEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdCwgJ25hbWUnKTsKICAgICAgfSk7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAnd2lyZXMnLCAoKSA9PiBFYWdsZU5vZGVMaXN0LmNyZWF0ZSh0aGlzLCB0aGlzLnBhdGguZG93bignY2hpbGRyZW4nKSwgZSA9PiBlLnRhZ05hbWUgPT0gJ3dpcmUnKSk7CiAgICB9CgogICAgaWYodGFnTmFtZSA9PSAnbGF5ZXInKSB7CiAgICAgIHRoaXMuZ2V0Q29sb3IgPSBlbGVtZW50ID0+IHsKICAgICAgICBpZihlbGVtZW50KSB0aGlzLmVsZW1lbnRzLmFkZChlbGVtZW50KTsKICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjsKICAgICAgfTsKICAgICAgdGhpcy5pc1Zpc2libGUgPSBlbGVtZW50ID0+IHsKICAgICAgICBpZihlbGVtZW50KSB0aGlzLmVsZW1lbnRzLmFkZChlbGVtZW50KTsKICAgICAgICByZXR1cm4gdGhpcy52aXNpYmxlOwogICAgICB9OwogICAgICB0aGlzLnNldFZpc2libGUgPSB2YWx1ZSA9PiAodmFsdWUgPT09IHVuZGVmaW5lZCA/IHRoaXMuaGFuZGxlcnMudmlzaWJsZSgpID09ICd5ZXMnIDogdGhpcy5oYW5kbGVycy52aXNpYmxlKHZhbHVlID8gJ3llcycgOiAnbm8nKSk7CiAgICAgIHRoaXMuc2V0VmlzaWJsZS5zdWJzY3JpYmUgPSBmID0+IHRoaXMuaGFuZGxlcnMudmlzaWJsZS5zdWJzY3JpYmUodmFsdWUgPT4gZih2YWx1ZSA9PSAneWVzJykpOwogICAgfQogICAgLy8gICAgbGV0IGxheWVyICA9IHRoaXMudGFnTmFtZSA9PSAncGFkJyA/IHRoaXMuZG9jdW1lbnQubGF5ZXJzWydQYWRzJ10gOiAgdGhpcy5sYXllcjsKICAgIGlmKHRoaXMubGF5ZXIgfHwgdGhpcy50YWdOYW1lID09ICdwYWQnIHx8IHRoaXMudGFnTmFtZSA9PSAndmlhJykgewogICAgICB0aGlzLmdldENvbG9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgbGV0IGxheWVyID0gdGhpcy5sYXllciB8fCB0aGlzLmRvY3VtZW50LmxheWVyc1t1Y2ZpcnN0KHRoaXMudGFnTmFtZSkgKyAncyddOwogICAgICAgIGxheWVyLmVsZW1lbnRzLmFkZCh0aGlzKTsKICAgICAgICBsZXQgY29sb3IgPSBsYXllci5jb2xvcjsKICAgICAgICBpZihbJ3BhZCcsICd2aWEnXS5pbmRleE9mKHRoaXMudGFnTmFtZSkgIT0gLTEpIGNvbG9yID0gRWFnbGVFbGVtZW50Lm1ha2VUcmFuc3BhcmVudChjb2xvcik7CgogICAgICAgIHJldHVybiBjb2xvcjsKICAgICAgfTsKICAgIH0KCiAgICBpZih0YWdOYW1lID09ICdsYXllcicpIHRoaXMuZWxlbWVudHMgPSBuZXcgU2V0KCk7CgogICAgaWYodGFnTmFtZSA9PSAncGFkJykgewogICAgICB0cmtsLmJpbmQodGhpcywgJ3JhZGl1cycsIHZhbHVlID0+IHsKICAgICAgICBsZXQgcHJvcCA9IFsnZGlhbWV0ZXInLCAnZHJpbGwnXS5maW5kKG4gPT4gdHlwZW9mIHRoaXNbbl0gPT0gJ251bWJlcicpOwoKICAgICAgICBpZih2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBsZXQgbiA9IHRoaXNbcHJvcF07CiAgICAgICAgICBpZihwcm9wID09ICdkaWFtZXRlcicgJiYgaXNOdW1lcmljKG4pKSByZXR1cm4gK24gLyAyOwoKICAgICAgICAgIGxldCByYWRpdXMgPSBuIC8gMiArIDAuNDUgLyAyOwogICAgICAgICAgcmV0dXJuIHJhZGl1czsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kaWFtZXRlciA9IHZhbHVlICogMjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qCiAgICBpZih0aGlzLmxheWVyKQogICAgICB0aGlzLmxheWVyLmVsZW1lbnRzLmFkZCh0aGlzKTsqLwogICAgbGV0IHRtcCA9IHRoaXMucmVwZWF0ZXI7CiAgfQoKICBnZXQgcmVwZWF0ZXIoKSB7CiAgICBsZXQgcHVzaEZuOwogICAgaWYoIXRoaXMucikgewogICAgICB0aGlzLnIgPSBuZXcgUmVwZWF0ZXIoYXN5bmMgKHB1c2gsIHN0b3ApID0+IHsKICAgICAgICBwdXNoKHRoaXMpOwogICAgICAgIHB1c2hGbiA9IHB1c2g7CiAgICAgICAgcHVzaCh0aGlzKTsKICAgICAgICBhd2FpdCBzdG9wOwogICAgICB9KTsKICAgICAgdGhpcy5yLm5leHQoKS50aGVuKCh7IHZhbHVlLCBkb25lIH0pID0+IHsKICAgICAgICB2YWx1ZS5wdXNoID0gcHVzaEZuOwogICAgICAgIHZhbHVlLnB1c2hFdmVudCA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgICAgICAgIGNvbnN0IFtlID0gdGhpcywga10gPSBhcmdzOwogICAgICAgICAgY29uc3QgdiA9IGVba107CgogICAgICAgICAgLy8gY29uc29sZS5sb2coYHB1c2hFdmVudGAsIGUpOwogICAgICAgICAgLy9jb25zb2xlLmxvZyhgcHVzaEV2ZW50YCwge2Usayx2fSk7CiAgICAgICAgICBpZih0aGlzLnRhZ05hbWUgPT0gJ2xheWVyJykgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGVsZW0gPT4gZWxlbS5wdXNoRXZlbnQoLi4uYXJncykpOwogICAgICAgICAgcHVzaEZuKHRoaXMpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiB0aGlzLnI7CiAgfQoKICBldmVudChuYW1lKSB7CiAgICBjb25zdCB2YWx1ZSA9IHRoaXNbbmFtZV07CiAgICAvL2NvbnNvbGUubG9nKCdldmVudDonLCB0aGlzLCB7IG5hbWUsIHZhbHVlIH0pOwoKICAgIC8qICAgIGZvcihsZXQgc3Vic2NyaWJlciBvZiB0aGlzLnN1YnNjcmliZXJzKSB7CiAgICAgIHN1YnNjcmliZXIuY2FsbCh0aGlzLCBuYW1lLCB2YWx1ZSk7CiAgICB9CiovCiAgfQoKICBzdWJzY3JpYmUoaGFuZGxlcikgewogICAgdGhpcy5zdWJzY3JpYmVycyA9IGFkZCh0aGlzLnN1YnNjcmliZXJzLCBoYW5kbGVyKTsKICAgIHJldHVybiBoYW5kbGVyOwogIH0KCiAgdW5zdWJzY3JpYmUoaGFuZGxlcikgewogICAgdGhpcy5zdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyKGggPT4gaCAhPSBoYW5kbGVyKTsKICAgIHJldHVybiBoYW5kbGVyOwogIH0KCiAgZ2V0IHRleHQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSB0aGlzOwogICAgbGV0IHRleHQgPSAnJzsKICAgIGZvcihsZXQgY2hpbGQgb2YgY2hpbGRyZW4ucmF3KSB7CiAgICAgIGlmKHR5cGVvZiBjaGlsZCA9PSAnc3RyaW5nJykgdGV4dCArPSBjaGlsZDsKICAgIH0KCiAgICByZXR1cm4gZGVjb2RlSFRNTEVudGl0aWVzKHRleHQpOwogIH0KCiAgZ2V0IGF0dHJpYnV0ZXMoKSB7CiAgICByZXR1cm4gdGhpcy5hdHRyTWFwOwogIH0KCiAgZ2V0TGF5ZXIoKSB7CiAgICBpZih0aGlzLnJhdy5hdHRyaWJ1dGVzLmxheWVyKSByZXR1cm4gdGhpcy5kb2N1bWVudC5nZXRMYXllcih0aGlzLnJhdy5hdHRyaWJ1dGVzLmxheWVyKTsKICAgIGlmKHRoaXMucmF3LnRhZ05hbWUgPT0gJ3BhZCcpIHJldHVybiAnUGFkcyc7CiAgICBpZih0aGlzLnJhdy50YWdOYW1lID09ICdob2xlJykgcmV0dXJuICdIb2xlcyc7CiAgICBpZih0aGlzLnJhdy50YWdOYW1lID09ICdkZXNjcmlwdGlvbicpIHJldHVybiAnRG9jdW1lbnQnOwogIH0KCiAgbG9va3VwKHhwYXRoLCBjcmVhdGUpIHsKICAgIC8qIGlmKCEoeHBhdGggaW5zdGFuY2VvZiBJbW11dGFibGVYUGF0aCkpCiAgICB4cGF0aCA9IG5ldyBJbW11dGFibGVYUGF0aChbLi4ueHBhdGhdKTsqLwogICAgLy9jb25zb2xlLmxvZygnRWFnbGVFbGVtZW50Lmxvb2t1cCgnLCB4cGF0aCwgY3JlYXRlLCAnKScpOwogICAgbGV0IHIgPSBzdXBlci5sb29rdXAoeHBhdGgsIChvLCBwLCB2KSA9PiB7CiAgICAgIGlmKGNyZWF0ZSAmJiAhdikgewogICAgICAgIGNvbnN0IHsgdGFnTmFtZSB9ID0gcC5sYXN0OwogICAgICAgIG8ucmF3LmNoaWxkcmVuLnB1c2goewogICAgICAgICAgdGFnTmFtZSwKICAgICAgICAgIGF0dHJpYnV0ZXM6IHt9LAogICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYoIXYpIHYgPSBwLmFwcGx5KG8ucmF3LCB0cnVlKTsKICAgICAgcmV0dXJuIEVhZ2xlRWxlbWVudC5nZXQobywgcCwgdik7CiAgICB9KTsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5sb29rdXAgPSAnLCByKTsKICAgIHJldHVybiByOwogIH0KCiAgZ2V0Qm91bmRzKHByZWQsIG9wdHMgPSB7fSkgewogICAgbGV0IGJiID0gbmV3IEJCb3goKTsKCiAgICBpZighcHJlZCAmJiBbJ3NoZWV0JywgJ3NjaGVtYXRpYyddLmluZGV4T2YodGhpcy50YWdOYW1lKSAhPSAtMSkgcHJlZCA9IGUgPT4gWyd3aXJlJywgJ2luc3RhbmNlJ10uaW5kZXhPZihlLnRhZ05hbWUpICE9IC0xOwoKICAgIGlmKHByZWQpIHsKICAgICAgbGV0IG9rID0gMDsKICAgICAgZm9yKGxldCBlbGVtZW50IG9mIHRoaXMuZ2V0QWxsKHByZWQpKSB7CiAgICAgICAgb2sgfD0gYmIudXBkYXRlKGVsZW1lbnQpIHx8IHRydWU7CiAgICAgIH0KICAgICAgaWYob2spIHJldHVybiBiYjsKICAgIH0KICAgIGlmKHRoaXMudGFnTmFtZSA9PSAnc2NoZW1hdGljJykgewogICAgICBsZXQgaW5zdGFuY2VzID0gWy4uLnRoaXMuZ2V0QWxsKCdpbnN0YW5jZScpXTsKICAgICAgcmV0dXJuIEJCb3gub2YoLi4uaW5zdGFuY2VzKTsKICAgIH0KICAgIGlmKHRoaXMudGFnTmFtZSA9PSAnYm9hcmQnKSB7CiAgICAgIGNvbnN0IG1lYXN1cmVzID0gWy4uLnRoaXMucGxhaW5dLmZpbHRlcihlID0+IGUubGF5ZXIubmFtZSA9PSAnTWVhc3VyZXMnKTsKICAgICAgaWYobWVhc3VyZXMubGVuZ3RoID49IDQpIHsKICAgICAgICBiYi51cGRhdGUobWVhc3VyZXMpOwogICAgICAgIGNvbnNvbGUubG9nKCdiYicsIGJiKTsKICAgICAgICByZXR1cm4gYmI7CiAgICAgIH0KICAgIH0KICAgIGlmKHRoaXMudGFnTmFtZSA9PSAncGluJykgewogICAgICBjb25zdCB7IHJvdCwgbGVuZ3RoLCBmdW5jLCB4LCB5IH0gPSB0aGlzOwoKICAgICAgY29uc3QgYW5nbGUgPSArKHJvdCB8fCAnMCcpLnJlcGxhY2UoL1IvLCAnJyk7CiAgICAgIGxldCB2ZWNsZW4gPSBQaW5TaXplc1tsZW5ndGhdICogMi41NDsKICAgICAgaWYoZnVuYyA9PSAnZG90JykgdmVjbGVuIC09IDEuNTsKICAgICAgY29uc3QgZGlyID0gUG9pbnQuZnJvbUFuZ2xlKChhbmdsZSAqIE1hdGguUEkpIC8gMTgwKTsKICAgICAgY29uc3QgdmVjID0gZGlyLnByb2QodmVjbGVuKTsKICAgICAgY29uc3QgcGl2b3QgPSBuZXcgUG9pbnQoK3gsICt5KTsKICAgICAgY29uc3QgcHAgPSBkaXIucHJvZCh2ZWNsZW4gKyAwLjc1KS5hZGQocGl2b3QpOwogICAgICBjb25zdCBsID0gbmV3IExpbmUocGl2b3QsIHZlYy5hZGQocGl2b3QpKTsKICAgICAgLy9jb25zdCB0cCA9IHBpdm90LmRpZmYoZGlyLnByb2QoMi41NCkpOwogICAgICAvLwogICAgICBiYi51cGRhdGUobC50b1BvaW50cygpKTsKICAgIH0gZWxzZSBpZih0aGlzLnRhZ05hbWUgPT0gJ2VsZW1lbnQnKSB7CiAgICAgIGNvbnN0IHsgcmF3LCByZWYsIHBhdGgsIGF0dHJpYnV0ZXMsIG93bmVyLCBkb2N1bWVudCB9ID0gdGhpczsKICAgICAgY29uc3QgbGliTmFtZSA9IHJhdy5hdHRyaWJ1dGVzLmxpYnJhcnk7CiAgICAgIGxldCBsaWJyYXJ5ID0gZG9jdW1lbnQuZ2V0TGlicmFyeShsaWJOYW1lKTsKICAgICAgbGV0IHBrZyA9IGxpYnJhcnkucGFja2FnZXNbcmF3LmF0dHJpYnV0ZXMucGFja2FnZV07CiAgICAgIGJiID0gcGtnLmdldEJvdW5kcygpOwogICAgICBiYi5tb3ZlKHRoaXMueCwgdGhpcy55KTsKICAgIH0gZWxzZSBpZih0aGlzLnRhZ05hbWUgPT0gJ2luc3RhbmNlJykgewogICAgICBjb25zdCB7IHBhcnQsIGdhdGUsIHJvdCwgeCwgeSB9ID0gdGhpczsKICAgICAgY29uc3QgeyBzeW1ib2wgfSA9IGdhdGU7CiAgICAgIGxldCB0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwogICAgICB0ID0gdC5jb25jYXQoTWFrZVJvdGF0aW9uKHJvdCkpOwogICAgICBjb25zdCBuYW1lID0gcGFydC5uYW1lOwogICAgICBjb25zdCB2YWx1ZSA9IHBhcnQudmFsdWUgfHwgcGFydC5kZXZpY2VzZXQubmFtZTsKICAgICAgbGV0IGIgPSBzeW1ib2wuZ2V0Qm91bmRzKGUgPT4gdHJ1ZSwgeyBuYW1lLCB2YWx1ZSB9KTsKICAgICAgLy9iLm1vdmUoeCwgeSk7CiAgICAgIC8vICAgY29uc29sZS5sb2coJ3N5bWJvbC5nZXRCb3VuZHMoKTonLCBzeW1ib2wubmFtZSwgYik7CiAgICAgIGxldCBwID0gbmV3IFJlY3QoYi5yZWN0KS50b1BvaW50cygpOwogICAgICBsZXQgbSA9IHQudG9NYXRyaXgoKTsKICAgICAgcCA9IG5ldyBQb2ludExpc3QoWy4uLm0udHJhbnNmb3JtUG9pbnRzKHApXSk7CiAgICAgIGJiLnVwZGF0ZShwKTsKICAgICAgYmIubW92ZSh4LCB5KTsKICAgIH0gZWxzZSBpZih0aGlzLnRhZ05hbWUgPT0gJ3NoZWV0JyB8fCB0aGlzLnRhZ05hbWUgPT0gJ2JvYXJkJykgewogICAgICBjb25zdCBwbGFpbiA9IHRoaXMuZmluZCgncGxhaW4nKTsKCiAgICAgIGxldCBsaXN0ID0gWy4uLihwbGFpbj8uY2hpbGRyZW4gPz8gW10pXS5maWx0ZXIoZSA9PiBlLnRhZ05hbWUgPT0gJ3dpcmUnICYmIGUuYXR0cmlidXRlcy5sYXllciA9PSAnNDcnKTsKICAgICAgLyogICAgICBpZihsaXN0Lmxlbmd0aCA8PSAwKSovIGxpc3QgPSBsaXN0LmNvbmNhdChbLi4uKHRoaXMudGFnTmFtZSA9PSAnc2hlZXQnID8gdGhpcy5pbnN0YW5jZXMubGlzdCA6IHRoaXMuZWxlbWVudHMubGlzdCldKTsKCiAgICAgIGJiLnVwZGF0ZUxpc3QoCiAgICAgICAgbGlzdAogICAgICAgICAgLm1hcChlID0+IHsKICAgICAgICAgICAgbGV0IHJldDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXQgPSBlLmdldEJvdW5kcygpOwogICAgICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICB9KQogICAgICAgICAgLm1hcChiID0+IG5ldyBSZWN0KGIpKQogICAgICAgICAgLm1hcChyID0+IHIudG9Qb2ludHMoKSkKICAgICAgICAgIC5mbGF0KCkKICAgICAgKTsKICAgIH0gZWxzZSBpZihbJ3BhY2thZ2UnLCAnc2lnbmFsJywgJ3BvbHlnb24nLCAnc3ltYm9sJ10uaW5kZXhPZih0aGlzLnRhZ05hbWUpICE9IC0xKSB7CiAgICAgIGZvcihsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikgYmIudXBkYXRlKGNoaWxkLmdldEJvdW5kcyhlID0+IHRydWUsIG9wdHMpKTsKICAgIH0gZWxzZSBpZih0aGlzLmdlb21ldHJ5ICYmIHRoaXMuZ2VvbWV0cnkudG9Qb2ludHMgLypbJ3dpcmUnLCAncGFkJ10uaW5kZXhPZih0aGlzLnRhZ05hbWUpICE9IC0xKi8pIHsKICAgICAgbGV0IGdlb20gPSB0aGlzLmdlb21ldHJ5OwogICAgICBiYi51cGRhdGVMaXN0KGdlb20udG9Qb2ludHMoKSk7CiAgICB9IGVsc2UgaWYodGhpcy5nZW9tZXRyeSAmJiB0aGlzLmdlb21ldHJ5LmJib3ggLypbJ3dpcmUnLCAncGFkJ10uaW5kZXhPZih0aGlzLnRhZ05hbWUpICE9IC0xKi8pIHsKICAgICAgbGV0IGdlb20gPSB0aGlzLmdlb21ldHJ5OwogICAgICBiYi51cGRhdGUoZ2VvbS5iYm94KCkpOwogICAgfSBlbHNlIGlmKHRoaXMudGFnTmFtZSA9PSAnY2lyY2xlJykgewogICAgICBsZXQgY2lyY2xlID0gdGhpcy5nZW9tZXRyeTsKCiAgICAgIGJiLnVwZGF0ZShjaXJjbGUuYmJveCh0aGlzLndpZHRoKSk7CiAgICB9IGVsc2UgaWYoWydkZXNjcmlwdGlvbiddLmluZGV4T2YodGhpcy50YWdOYW1lKSAhPSAtMSkgewogICAgfSBlbHNlIHsKICAgICAgLyogICAgaWYoWyd3aXJlJywndGV4dCcsJ3JlY3RhbmdsZSddLmluZGV4T2YodGhpcy50YWdOYW1lKSA9PSAtMSkKICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBnZXRCb3VuZHMoKSBmb3IgJyR7dGhpcy50YWdOYW1lfSdgKTsqLwogICAgICBiYi51cGRhdGUoc3VwZXIuZ2V0Qm91bmRzKHByZWQpKTsKICAgICAgLy9jb25zb2xlLmxvZygiYmIiLCB0aGlzLCBiYik7CgogICAgICBpZihbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJ10uc29tZShuID0+IGJiW25dID09PSB1bmRlZmluZWQpKSB0aHJvdyBuZXcgRXJyb3IoYE5vIGdldEJvdW5kcygpIGZvciAnJHt0aGlzLnRhZ05hbWV9JzogJHtiYn1gKTsKICAgIH0KCiAgICBpZignd2lkdGgnIGluIHRoaXMuYXR0cmlidXRlcykgewogICAgICBsZXQgaGFsZiA9IHRoaXMuYXR0cmlidXRlcy53aWR0aCAqIDAuNTsKCiAgICAgIGJiLngxIC09IGhhbGY7CiAgICAgIGJiLngyICs9IGhhbGY7CiAgICAgIGJiLnkxIC09IGhhbGY7CiAgICAgIGJiLnkyICs9IGhhbGY7CiAgICB9CgogICAgcmV0dXJuIGJiOwogIH0KCiAgZ2V0IGJvdW5kcygpIHsKICAgIHJldHVybiB0aGlzLmdldEJvdW5kcygpOwogIH0KCiAgdHJhbnNmb3JtYXRpb24oKSB7CiAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwogICAgbGV0IHJvdCA9IHRoaXMucm90IHx8ICcnOwogICAgaWYoJ3gnIGluIHRoaXMgJiYgJ3knIGluIHRoaXMpIHJldC5wdXNoKG5ldyBUcmFuc2Zvcm1hdGlvbi50cmFuc2xhdGlvbih0aGlzLngsIHRoaXMueSkpOwogICAgaWYoL00vLnRlc3Qocm90KSkgcmV0LnB1c2gobmV3IFRyYW5zZm9ybWF0aW9uLnNjYWxpbmcoLTEsIDEpKTsKICAgIGxldCBhbmdsZSA9ICtyb3QucmVwbGFjZSgvW01SXS9nLCAnJyk7CiAgICBpZihhbmdsZSA+IDApIHJldC5wdXNoKG5ldyBUcmFuc2Zvcm1hdGlvbi5yb3RhdGlvbihhbmdsZSkpOwogICAgcmV0dXJuIHJldDsKICB9CgogIGdldCBnZW9tZXRyeSgpIHsKICAgIGNvbnN0IHsgcmF3IH0gPSB0aGlzOwogICAgLy8gY29uc29sZS5sb2coJ3Jhdy5hdHRyaWJ1dGVzJyxyYXcuYXR0cmlidXRlcyk7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocmF3LmF0dHJpYnV0ZXMgPz8ge30pOwogICAgY29uc3QgbWFrZUdldHRlclNldHRlciA9IGsgPT4gdiA9PiB2ID09PSB1bmRlZmluZWQgPyArcmF3LmF0dHJpYnV0ZXNba10gOiAocmF3LmF0dHJpYnV0ZXNba10gPSB2ICsgJycpOwoKICAgIGlmKHRoaXMuc2hhcGUgPT0gJ29jdGFnb24nKSB7CiAgICAgIGxldCB7IHJhZGl1cyA9IDEuMjcsIHggPSAwLCB5ID0gMCB9ID0gdGhpczsKICAgICAgbGV0IG9jdGFnb24gPSBNYWtlUG9seWdvbig4LCByYWRpdXMgKiAxLjA4MjM5MjIwMDI5MjM5NSwgMC41KS5tYXAocCA9PiBwLmFkZCh4LCB5KS5yb3VuZCgwLjAwMSkpOwogICAgICByZXR1cm4gb2N0YWdvbjsKICAgIH0gZWxzZSBpZihbJ3gnLCAneScsICdyYWRpdXMnXS5ldmVyeShwcm9wID0+IGlzTnVtZXJpYyh0aGlzW3Byb3BdKSkpIHsKICAgICAgcmV0dXJuIENpcmNsZS5iaW5kKHRoaXMsIG51bGwsIGsgPT4gdiA9PiB2ID09PSB1bmRlZmluZWQgPyArdGhpc1trXSA6ICh0aGlzW2tdID0gK3YpKTsKICAgICAgLyogIH0gZWxzZSBpZihbJ2RpYW1ldGVyJywgJ2RyaWxsJ10uZmluZChwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIHJldHVybiBDaXJjbGUuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsqLwogICAgfSBlbHNlIGlmKFsneDEnLCAneTEnLCAneDInLCAneTInXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIGxldCBsaW5lID0gTGluZS5iaW5kKHRoaXMsIG51bGwsIG1ha2VHZXR0ZXJTZXR0ZXIpOwogICAgICB0cmtsLmJpbmQobGluZSwgJ2N1cnZlJywgdGhpcy5oYW5kbGVyc1snY3VydmUnXSk7CiAgICAgIHRya2wuYmluZChsaW5lLCAnd2lkdGgnLCB0aGlzLmhhbmRsZXJzWyd3aWR0aCddKTsKICAgICAgcmV0dXJuIGxpbmU7CiAgICB9IGVsc2UgaWYoWyd4JywgJ3knXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gUG9pbnQodGhpcyk7CiAgICAgIGlmKGtleXMuaW5jbHVkZXMoJ3JhZGl1cycpKSByZXR1cm4gQ2lyY2xlLmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICAgIGlmKFsnd2lkdGgnLCAnaGVpZ2h0J10uZXZlcnkocHJvcCA9PiBrZXlzLmluY2x1ZGVzKHByb3ApKSkgcmV0dXJuIFJlY3QuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgICAgcmV0dXJuIFBvaW50LmJpbmQodGhpcywgWyd4JywgJ3knXSwgbWFrZUdldHRlclNldHRlcik7CiAgICB9CgogICAgaWYoWydwYWNrYWdlJywgJ3N5bWJvbCddLmluZGV4T2YodGhpcy50YWdOYW1lKSA9PSAtMSkgcmV0dXJuOwoKICAgIC8vICAgIGNvbnNvbGUubG9nKCdnZXQgZ2VvbWV0cnknLCB0aGlzLCB0aGlzLmNoaWxkcmVuKTsKCiAgICBpZih0aGlzLnJhdy5jaGlsZHJlbiAmJiB0aGlzLnJhdy5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgbGV0IHJldCA9IG5ldyBNYXAoKTsKICAgICAgbGV0IGVudHJ5ID0gZ2V0T3JDcmVhdGUocmV0LCAoKSA9PiBbXSk7CgogICAgICBmb3IobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICBsZXQgZ2VvbWV0cnkgPSBjaGlsZC5nZW9tZXRyeTsKICAgICAgICBpZihnZW9tZXRyeSAmJiBjaGlsZC5sYXllcikgewogICAgICAgICAgZW50cnkoY2hpbGQubGF5ZXIubmFtZSkucHVzaChnZW9tZXRyeSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IobGV0IFtsYXllciwgZ2VvbWV0cnldIG9mIHJldCkgewogICAgICAgIGlmKGdlb21ldHJ5LmV2ZXJ5KGcgPT4gaXNMaW5lKGcpKSkgcmV0LnNldChsYXllciwgbmV3IExpbmVMaXN0KGdlb21ldHJ5KSk7CiAgICAgIH0KICAgICAgaWYocmV0LnNpemUpIHJldHVybiByZXQ7CiAgICB9CiAgfQoKICBwb3NpdGlvbihvZmZzZXQgPSBudWxsKSB7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5hdHRyaWJ1dGVzKTsKICAgIGNvbnN0IG1ha2VHZXR0ZXJTZXR0ZXIgPSBrID0+IHYgPT4gdiA9PT0gdW5kZWZpbmVkID8gK3RoaXMuaGFuZGxlcnNba10oKSA6IHRoaXMuaGFuZGxlcnNba10oK3YpOwoKICAgIGlmKFsneCcsICd5J10uZXZlcnkocHJvcCA9PiBrZXlzLmluY2x1ZGVzKHByb3ApKSkgewogICAgICBsZXQgcG9zID0gb2Zmc2V0ID8gbmV3IFBvaW50KHRoaXMueCwgdGhpcy55KS5zdW0ob2Zmc2V0KSA6IFBvaW50LmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICAgIHJldHVybiBwb3M7CiAgICB9CiAgfQoKICBzdGF0aWMgaXNSZWxhdGlvbihuYW1lKSB7CiAgICBsZXQgcmVsYXRpb25OYW1lcyA9IFsnY2xhc3MnLCAnZWxlbWVudCcsICdnYXRlJywgJ2xheWVyJywgJ2xpYnJhcnknLCAncGFja2FnZScsICdwYWQnLCAncGFydCcsICdwaW4nLCAnc3ltYm9sJywgJ2RldmljZXNldCcsICdkZXZpY2UnXTsKICAgIHJldHVybiByZWxhdGlvbk5hbWVzLmluZGV4T2YobmFtZSkgIT0gLTE7CiAgfQoKICBzY29wZSh0ID0gKG8sIHAsIHYpID0+IFt2LnRhZ05hbWUsIEVhZ2xlRWxlbWVudC5nZXQobywgcCwgdildLCByID0gZSA9PiBPYmplY3QuZnJvbUVudHJpZXMoZSkpIHsKICAgIHJldHVybiBzdXBlci5zY29wZSh0LCByKTsKICB9CiAgc2NvcGUyKCkgewogICAgbGV0IGVsZW0gPSB0aGlzOwogICAgbGV0IG9iaiA9IHt9LAogICAgICBpID0gMDsKICAgIGRvIHsKICAgICAgaWYoZWxlbS5uYW1lKSB7CiAgICAgICAgb2JqW2VsZW0udGFnTmFtZV0gPSBlbGVtOwogICAgICB9CiAgICB9IHdoaWxlKGVsZW0udGFnTmFtZSAhPSAnZWFnbGUnICYmIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSk7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgZ2V0IGNoYWluKCkgewogICAgbGV0IGNoYWluID0gdGhpcy5zY29wZTIoKTsKICAgIGlmKHRoaXMubmFtZSkgY2hhaW5bdGhpcy50YWdOYW1lXSA9IHRoaXMubmFtZTsKICAgIHJldHVybiBjaGFpbjsKICB9CgogIGdldFBhcmVudCh0YWdOYW1lKSB7CiAgICBsZXQgZSA9IHRoaXM7CiAgICBkbyB7CiAgICAgIGlmKGUudGFnTmFtZSA9PSB0YWdOYW1lKSByZXR1cm4gZTsKICAgIH0gd2hpbGUoKGUgPSBlLnBhcmVudE5vZGUpKTsKICB9CgogIGdldCBzaGVldCgpIHsKICAgIHJldHVybiB0aGlzLmdldFBhcmVudCgnc2hlZXQnKTsKICB9CiAgZ2V0IHNoZWV0TnVtYmVyKCkgewogICAgbGV0IHNoZWV0ID0gdGhpcy5zaGVldDsKICAgIGlmKHNoZWV0KSByZXR1cm4gdGhpcy5nZXRQYXJlbnQoJ3NoZWV0cycpLmNoaWxkcmVuLmluZGV4T2Yoc2hlZXQpOwogIH0KCiAgbmFtZXMoKSB7CiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5zY29wZSgpKS5yZWR1Y2UoCiAgICAgIChhY2MsIGVudHJ5KSA9PiAoewogICAgICAgIC4uLmFjYywKICAgICAgICBbZW50cnlbMF1dOiBlbnRyeVsxXS5hdHRyaWJ1dGVzLm5hbWUKICAgICAgfSksCiAgICAgIHt9CiAgICApOwogIH0KCiAgc3RhdGljIGtleXMoZW50aXR5KSB7CiAgICByZXR1cm4gT2JqZWN0LmtleXMoRWFnbGVFbGVtZW50LnRvT2JqZWN0KGVudGl0eSkpOwogIH0KICBzdGF0aWMgdmFsdWVzKGVudGl0eSkgewogICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoRWFnbGVFbGVtZW50LnRvT2JqZWN0KGVudGl0eSkpOwogIH0KICBzdGF0aWMgZW50cmllcyhlbnRpdHkpIHsKICAgIHJldHVybiBPYmplY3QuZW50cmllcyhFYWdsZUVsZW1lbnQudG9PYmplY3QoZW50aXR5KSk7CiAgfQoKICBzdGF0aWMgdG9PYmplY3QoZSkgewogICAgbGV0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4sIHRleHQgfSA9IGU7CiAgICBsZXQgbyA9IHt9OwogICAgZm9yKGxldCBbbmFtZSwgdmFsdWVdIG9mIGF0dHJpYnV0ZXMpIHsKICAgICAgb1tuYW1lXSA9IHZhbHVlOwogICAgfQoKICAgIGlmKHR5cGVvZiBlID09ICdvYmplY3QnICYmIGUgIT09IG51bGwgJiYgJ3RhZ05hbWUnIGluIGUpIG8gPSB7IHRhZ05hbWUsIC4uLm8gfTsKICAgIGlmKHR5cGVvZiBjaGlsZHJlbiA9PSAnb2JqZWN0JyAmJiBjaGlsZHJlbiAhPT0gbnVsbCAmJiAnbGVuZ3RoJyBpbiBjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgIGxldCBhID0gY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IHR5cGVvZiBjaGlsZCA9PSAnc3RyaW5nJyk7CiAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IHR5cGVvZiBjaGlsZCAhPSAnc3RyaW5nJykubWFwKEVhZ2xlRWxlbWVudC50b09iamVjdCk7CiAgICAgIHRleHQgPSBhLmpvaW4oJ1xuJyk7CiAgICB9CgogICAgaWYodHlwZW9mIHRleHQgPT0gJ3N0cmluZycgJiYgdGV4dC5sZW5ndGggPiAwKQogICAgICBpZignYXR0cmlidXRlcycgaW4gbykgby5hdHRyaWJ1dGVzLnRleHQgPSB0ZXh0OwogICAgICBlbHNlIG8uaW5uZXJIVE1MID0gdGV4dDsKICAgIG8udHlwZSA9IGUubm9kZVR5cGU7CiAgICByZXR1cm4gbzsKICB9CgogIHN0YXRpYyB0b0FycmF5KGUpIHsKICAgIGNvbnN0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4gfSA9IGU7CiAgICByZXR1cm4gW3RhZ05hbWUsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuXTsKICB9CgogIHRvU3RyaW5nKCkgewogICAgaWYodGhpcy50YWdOYW1lID09ICdsYXllcicpIHJldHVybiBgJHt0aGlzLm51bWJlcn0gJHt0aGlzLm5hbWV9YDsKCiAgICByZXR1cm4gc3VwZXIudG9TdHJpbmcoKTsKICB9CgogICpnZXRBbGwocHJlZCwgdHJhbnNmb3JtID0gYSA9PiBhKSB7CiAgICBjb25zdCBjYWxsID0gdHJ5RnVuY3Rpb24oCiAgICAgICh2LCBwLCBvKSA9PiB0eXBlb2YgdiA9PSAnb2JqZWN0JyAmJiB2ICE9PSBudWxsICYmIEVhZ2xlRWxlbWVudC5nZXQobyB8fCB0aGlzLm93bmVyLCBwLCB2KSwKICAgICAgKHIsIHYsIHAsIG8pID0+IHIgJiYgdHJhbnNmb3JtKHIsIHAsIG8pLAogICAgICAoKSA9PiB1bmRlZmluZWQKICAgICk7CgogICAgaWYodHlwZW9mIHByZWQgIT0gJ2Z1bmN0aW9uJykgcHJlZCA9IEVhZ2xlTm9kZS5tYWtlUHJlZGljYXRlKHByZWQpOwogICAgeWllbGQqIHN1cGVyLmdldEFsbCgodiwgcCwgbykgPT4gdHlwZW9mIHYgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCAmJiAndGFnTmFtZScgaW4gdiAmJiBwcmVkKHYsIHAsIG8pLCBjYWxsKTsKICB9CgogIGdldChwcmVkLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGxldCBpdCA9IHRoaXMuZ2V0QWxsKCh2LCBwLCBvKSA9PiAocHJlZCh2LCBwLCBvKSA/IC0xIDogZmFsc2UpLCB0cmFuc2Zvcm0pOwogICAgbGV0IHsgdmFsdWUsIGRvbmUgfSA9IGl0Lm5leHQoKTsKICAgIGNvbnN0IHsgcm9vdCwgcGF0aCwgcmF3IH0gPSB0aGlzOwoKICAgIHJldHVybiB2YWx1ZSB8fCBudWxsOwogIH0KCiAgZmluZChwcmVkLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGNvbnN0IGNhbGwgPSB0cnlGdW5jdGlvbigKICAgICAgKHYsIHAsIG8pID0+IEVhZ2xlRWxlbWVudC5nZXQobyB8fCB0aGlzLm93bmVyLCBwKSwKICAgICAgKHIsIHYsIHAsIG8pID0+IHRyYW5zZm9ybShyLCBwLCBvKSwKICAgICAgKCkgPT4gdW5kZWZpbmVkCiAgICApOwogICAgcmV0dXJuIHN1cGVyLmZpbmQocHJlZCwgY2FsbCk7CiAgfQoKICBzZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHsKICAgIGlmKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJyAmJiAhdmFsdWUpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgZWxzZSB0aGlzLnJhdy5hdHRyaWJ1dGVzW25hbWVdID0gdmFsdWUgKyAnJzsKICB9CgogIHJlbW92ZUF0dHJpYnV0ZShuYW1lKSB7CiAgICBkZWxldGUgdGhpcy5yYXcuYXR0cmlidXRlc1tuYW1lXTsKICB9CgogIGdldCBwb3MoKSB7CiAgICByZXR1cm4gYCgkeyh0aGlzLnggLyAyNS40KS50b0ZpeGVkKDEpfSAkeyh0aGlzLnkgLyAyNS40KS50b0ZpeGVkKDEpfSlgOwogIH0KCiAgLyoKICBzdGF0aWMgY3JlYXRlKG93bmVyLCByZWYsIC4uLmFyZ3MpIHsKICAgIGlmKCdsZW5ndGgnIGluIHJlZikgcmVmID0gb3duZXIucmVmLmNvbmNhdChbLi4ucmVmXSk7CiAgICBpZihhcmdzLmxlbmd0aCA+IDApIHJlZiA9IHJlZi5jb25jYXQoWy4uLmFyZ3NdKTsKICAgIHJldHVybiBFYWdsZUVsZW1lbnQuZ2V0KG93bmVyLCByZWYpOwogIH0qLwoKICBzdGF0aWMgYXR0cmlidXRlTGlzdHMgPSB7CiAgICBhcHByb3ZlZDogWydoYXNoJ10sCiAgICBhdHRyaWJ1dGU6IFsnbmFtZScsICd4JywgJ3knLCAnc2l6ZScsICdsYXllcicsICdyb3QnLCAnYWxpZ24nLCAncmF0aW8nLCAnZm9udCcsICd2YWx1ZScsICdjb25zdGFudCcsICdkaXNwbGF5J10sCiAgICBidXM6IFsnbmFtZSddLAogICAgY2lyY2xlOiBbJ3gnLCAneScsICdyYWRpdXMnLCAnd2lkdGgnLCAnbGF5ZXInXSwKICAgIGNsYXNzOiBbJ251bWJlcicsICduYW1lJywgJ3dpZHRoJywgJ2RyaWxsJ10sCiAgICBjbGVhcmFuY2U6IFsnY2xhc3MnLCAndmFsdWUnXSwKICAgIGNvbm5lY3Q6IFsnZ2F0ZScsICdwaW4nLCAncGFkJywgJ3JvdXRlJ10sCiAgICBjb250YWN0cmVmOiBbJ2VsZW1lbnQnLCAncGFkJywgJ3JvdXRlJywgJ3JvdXRldGFnJ10sCiAgICBkZXNjcmlwdGlvbjogWydsYW5ndWFnZSddLAogICAgZGVzaWducnVsZXM6IFsnbmFtZSddLAogICAgZGV2aWNlOiBbJ25hbWUnLCAncGFja2FnZSddLAogICAgZGV2aWNlc2V0OiBbJ25hbWUnLCAncHJlZml4JywgJ3VzZXJ2YWx1ZSddLAogICAgZGltZW5zaW9uOiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJywgJ3gzJywgJ3kzJywgJ3RleHRzaXplJywgJ2xheWVyJywgJ3Zpc2libGUnLCAnd2lkdGgnLCAnZXh0d2lkdGgnLCAndW5pdCcsICd0ZXh0cmF0aW8nXSwKICAgIGVhZ2xlOiBbJ3ZlcnNpb24nXSwKICAgIGVsZW1lbnQ6IFsnbmFtZScsICdsaWJyYXJ5JywgJ3BhY2thZ2UnLCAndmFsdWUnLCAneCcsICd5JywgJ3JvdCcsICdzbWFzaGVkJ10sCiAgICBmcmFtZTogWyd4MScsICd5MScsICd4MicsICd5MicsICdjb2x1bW5zJywgJ3Jvd3MnLCAnbGF5ZXInXSwKICAgIGdhdGU6IFsnbmFtZScsICdzeW1ib2wnLCAneCcsICd5JywgJ3N3YXBsZXZlbCcsICdhZGRsZXZlbCddLAogICAgZ3JpZDogWydkaXN0YW5jZScsICd1bml0ZGlzdCcsICd1bml0JywgJ3N0eWxlJywgJ211bHRpcGxlJywgJ2Rpc3BsYXknLCAnYWx0ZGlzdGFuY2UnLCAnYWx0dW5pdGRpc3QnLCAnYWx0dW5pdCddLAogICAgaG9sZTogWyd4JywgJ3knLCAnZHJpbGwnXSwKICAgIGluc3RhbmNlOiBbJ3BhcnQnLCAnZ2F0ZScsICd4JywgJ3knLCAncm90JywgJ3NtYXNoZWQnXSwKICAgIGp1bmN0aW9uOiBbJ3gnLCAneSddLAogICAgbGFiZWw6IFsneCcsICd5JywgJ3NpemUnLCAnbGF5ZXInLCAncm90JywgJ3hyZWYnLCAncmF0aW8nLCAnZm9udCddLAogICAgbGF5ZXI6IFsnbnVtYmVyJywgJ25hbWUnLCAnY29sb3InLCAnZmlsbCcsICd2aXNpYmxlJywgJ2FjdGl2ZSddLAogICAgbGlicmFyeTogWyduYW1lJ10sCiAgICBtb2R1bGVpbnN0OiBbJ25hbWUnLCAnbW9kdWxlJywgJ3gnLCAneScsICdyb3QnXSwKICAgIG1vZHVsZTogWyduYW1lJywgJ3ByZWZpeCcsICdkeCcsICdkeSddLAogICAgbmV0OiBbJ25hbWUnLCAnY2xhc3MnXSwKICAgIG5vdGU6IFsndmVyc2lvbicsICdtaW52ZXJzaW9uJywgJ3NldmVyaXR5J10sCiAgICBwYWNrYWdlOiBbJ25hbWUnXSwKICAgIHBhZDogWyduYW1lJywgJ3gnLCAneScsICdkcmlsbCcsICdzaGFwZScsICdkaWFtZXRlcicsICdyb3QnLCAnc3RvcCcsICdmaXJzdCcsICd0aGVybWFscyddLAogICAgcGFyYW06IFsnbmFtZScsICd2YWx1ZSddLAogICAgcGFydDogWyduYW1lJywgJ2xpYnJhcnknLCAnZGV2aWNlc2V0JywgJ2RldmljZScsICd2YWx1ZScsICd0ZWNobm9sb2d5J10sCiAgICBwYXNzOiBbJ25hbWUnLCAncmVmZXInLCAnYWN0aXZlJ10sCiAgICBwaW46IFsnbmFtZScsICd4JywgJ3knLCAndmlzaWJsZScsICdsZW5ndGgnLCAnZGlyZWN0aW9uJywgJ2Z1bmN0aW9uJywgJ3JvdCcsICdzd2FwbGV2ZWwnXSwKICAgIHBpbnJlZjogWydwYXJ0JywgJ2dhdGUnLCAncGluJ10sCiAgICBwb2x5Z29uOiBbJ3dpZHRoJywgJ2xheWVyJywgJ2lzb2xhdGUnLCAnb3JwaGFucycsICd0aGVybWFscyddLAogICAgcG9ydDogWyduYW1lJywgJ3NpZGUnLCAnY29vcmQnLCAnZGlyZWN0aW9uJ10sCiAgICBwb3J0cmVmOiBbJ21vZHVsZWluc3QnLCAncG9ydCddLAogICAgcmVjdGFuZ2xlOiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJywgJ2xheWVyJywgJ3JvdCddLAogICAgc2NoZW1hdGljOiBbJ3hyZWZsYWJlbCcsICd4cmVmcGFydCddLAogICAgc2V0dGluZzogWydhbHdheXN2ZWN0b3Jmb250JywgJ3ZlcnRpY2FsdGV4dCddLAogICAgc2lnbmFsOiBbJ25hbWUnLCAnY2xhc3MnXSwKICAgIHNtZDogWyduYW1lJywgJ3gnLCAneScsICdkeCcsICdkeScsICdsYXllcicsICdyb3QnLCAnc3RvcCcsICdjcmVhbScsICdyb3VuZG5lc3MnXSwKICAgIHN5bWJvbDogWyduYW1lJ10sCiAgICB0ZWNobm9sb2d5OiBbJ25hbWUnXSwKICAgIHRleHQ6IFsneCcsICd5JywgJ3NpemUnLCAnbGF5ZXInLCAncmF0aW8nLCAncm90JywgJ2FsaWduJywgJ2ZvbnQnLCAnZGlzdGFuY2UnXSwKICAgIHZlcnRleDogWyd4JywgJ3knLCAnY3VydmUnXSwKICAgIHZpYTogWyd4JywgJ3knLCAnZXh0ZW50JywgJ2RyaWxsJywgJ3NoYXBlJywgJ2RpYW1ldGVyJ10sCiAgICB3aXJlOiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJywgJ3dpZHRoJywgJ2xheWVyJywgJ2N1cnZlJywgJ3N0eWxlJywgJ2NhcCcsICdleHRlbnQnXSwKICAgICc/eG1sJzogWyd2ZXJzaW9uJywgJ2VuY29kaW5nJ10KICB9Owp9CgpPYmplY3QuYXNzaWduKEVhZ2xlRWxlbWVudCwgeyBzdWJzY3JpYmVyczogW10sIHI6IG51bGwsIGNsYXNzOiB1bmRlZmluZWQgfSk7Ck9iamVjdC5hc3NpZ24oRWFnbGVFbGVtZW50LnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0VhZ2xlRWxlbWVudCcgfSk7CgpleHBvcnQgY29uc3QgbWFrZUVhZ2xlRWxlbWVudCA9IChvd25lciwgcmVmLCByYXcpID0+IEVhZ2xlRWxlbWVudC5nZXQob3duZXIsIHJlZiwgcmF3KTsKAAAAAAAAAABAggAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5CAAAAAAAAPkIAAAAAAAAAAAAAAAA8L8"
				],
				[
					214,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAJ4WAAAAAAAAnxYAAAAAAAAAAAAAnxYAAAAAAACfFgAAAAAAAAwAAAAgaWZUaGVuRWxzZSg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeFgAAAAAAAKoWAAAAAAAAAAAAAAAA8L8"
				],
				[
					217,
					1,
					"left_delete",
					null,
					"AQAAAMAWAAAAAAAAwBYAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADBFgAAAAAAAMEWAAAAAAAAAAAAAAAA8L8"
				],
				[
					218,
					1,
					"insert",
					{
						"characters": " ?"
					},
					"AgAAAMAWAAAAAAAAwRYAAAAAAAAAAAAAwRYAAAAAAADCFgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADAFgAAAAAAAMAWAAAAAAAAAAAAAAAA8L8"
				],
				[
					219,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAMIWAAAAAAAAwxYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADCFgAAAAAAAMIWAAAAAAAAAAAAAAAA8L8"
				],
				[
					220,
					17,
					"right_delete",
					null,
					"EQAAAMMWAAAAAAAAwxYAAAAAAAABAAAACsMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAdsMWAAAAAAAAwxYAAAAAAAABAAAAIMMWAAAAAAAAwxYAAAAAAAABAAAAPcMWAAAAAAAAwxYAAAAAAAABAAAAPg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADDFgAAAAAAAMMWAAAAAAAAAAAAAAAA8L8"
				],
				[
					222,
					1,
					"left_delete",
					null,
					"AQAAAPUWAAAAAAAA9RYAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2FgAAAAAAAPYWAAAAAAAA////////738"
				],
				[
					223,
					1,
					"insert",
					{
						"characters": " :"
					},
					"AgAAAPUWAAAAAAAA9hYAAAAAAAAAAAAA9hYAAAAAAAD3FgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD1FgAAAAAAAPUWAAAAAAAAAAAAAAAA8L8"
				],
				[
					224,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPcWAAAAAAAA+BYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD3FgAAAAAAAPcWAAAAAAAAAAAAAAAA8L8"
				],
				[
					225,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAPgWAAAAAAAA+hYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD4FgAAAAAAAPgWAAAAAAAAAAAAAAAA8L8"
				],
				[
					226,
					1,
					"right_delete",
					null,
					"AQAAAPkWAAAAAAAA+RYAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5FgAAAAAAAPkWAAAAAAAAAAAAAAAA8L8"
				],
				[
					228,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAKQXAAAAAAAApRcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACkFwAAAAAAAKQXAAAAAAAAAAAAAABAhkA"
				],
				[
					229,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKUXAAAAAAAApxcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAClFwAAAAAAAKUXAAAAAAAAAAAAAAAA8L8"
				],
				[
					231,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAKcXAAAAAAAAqBcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACnFwAAAAAAAKcXAAAAAAAAAAAAAAAA8L8"
				],
				[
					234,
					1,
					"right_delete",
					null,
					"AQAAAKkXAAAAAAAAqRcAAAAAAAANAAAAICAgICAgICAgICk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACpFwAAAAAAALYXAAAAAAAAAAAAAAAAAAA"
				],
				[
					235,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line.sublime-macro"
					},
					"AwAAAM0XAAAAAAAAzhcAAAAAAAAAAAAAzhcAAAAAAADWFwAAAAAAAAAAAADWFwAAAAAAANgXAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACpFwAAAAAAAKkXAAAAAAAAAAAAAAAA8L8"
				],
				[
					255,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAPYXAAAAAAAA9xcAAAAAAAAAAAAAzhcAAAAAAADOFwAAAAAAAAoAAAAgICAgICAgICAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2FwAAAAAAAPYXAAAAAAAAAAAAAAAA8L8"
				],
				[
					257,
					1,
					"cut",
					null,
					"AQAAAO0XAAAAAAAA7RcAAAAAAAAMAAAAIGlmVGhlbkVsc2Uo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtFwAAAAAAAPkXAAAAAAAA////////738"
				],
				[
					258,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAO0XAAAAAAAA7hcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtFwAAAAAAAO0XAAAAAAAAAAAAAAAA8L8"
				],
				[
					259,
					2,
					"right_delete",
					null,
					"AgAAAO4XAAAAAAAA7hcAAAAAAAABAAAACu4XAAAAAAAA7hcAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuFwAAAAAAAO4XAAAAAAAAAAAAAAAA8L8"
				],
				[
					261,
					1,
					"left_delete",
					null,
					"AQAAAAcYAAAAAAAABxgAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIGAAAAAAAAAgYAAAAAAAA////////738"
				],
				[
					262,
					1,
					"insert",
					{
						"characters": " ?"
					},
					"AgAAAAcYAAAAAAAACBgAAAAAAAAAAAAACBgAAAAAAAAJGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAHGAAAAAAAAAcYAAAAAAAAAAAAAAAA8L8"
				],
				[
					263,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAkYAAAAAAAAChgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAJGAAAAAAAAAkYAAAAAAAAAAAAAAAA8L8"
				],
				[
					264,
					19,
					"right_delete",
					null,
					"EwAAAAoYAAAAAAAAChgAAAAAAAABAAAACgoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAKAoYAAAAAAAAChgAAAAAAAABAAAAKQoYAAAAAAAAChgAAAAAAAABAAAAIAoYAAAAAAAAChgAAAAAAAABAAAAPQoYAAAAAAAAChgAAAAAAAABAAAAPgoYAAAAAAAAChgAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKGAAAAAAAAAoYAAAAAAAAAAAAAAAA8L8"
				],
				[
					266,
					1,
					"left_delete",
					null,
					"AQAAABAYAAAAAAAAEBgAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAARGAAAAAAAABEYAAAAAAAA////////738"
				],
				[
					267,
					1,
					"insert",
					{
						"characters": " :"
					},
					"AgAAABAYAAAAAAAAERgAAAAAAAAAAAAAERgAAAAAAAASGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAQGAAAAAAAABAYAAAAAAAAAAAAAAAA8L8"
				],
				[
					268,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABIYAAAAAAAAExgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAASGAAAAAAAABIYAAAAAAAAAAAAAAAA8L8"
				],
				[
					269,
					18,
					"right_delete",
					null,
					"EgAAABMYAAAAAAAAExgAAAAAAAABAAAAChMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAdhMYAAAAAAAAExgAAAAAAAABAAAAIBMYAAAAAAAAExgAAAAAAAABAAAAPRMYAAAAAAAAExgAAAAAAAABAAAAPhMYAAAAAAAAExgAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATGAAAAAAAABMYAAAAAAAAAAAAAAAA8L8"
				],
				[
					271,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAABUYAAAAAAAAFhgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAVGAAAAAAAABUYAAAAAAAAAAAAAAAA8L8"
				],
				[
					274,
					1,
					"right_delete",
					null,
					"AQAAABcYAAAAAAAAFxgAAAAAAAANAAAAICAgICAgICAgICk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAXGAAAAAAAACQYAAAAAAAAAAAAAAAAAAA"
				],
				[
					276,
					1,
					"left_delete",
					null,
					"AQAAAM0XAAAAAAAAzRcAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADOFwAAAAAAAM4XAAAAAAAAAAAAAAAAAAA"
				],
				[
					281,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADngQAAaW1wb3J0IHsgY2xhc3NOYW1lLCBkZWZpbmUsIGdldE9yQ3JlYXRlLCBpbnNlcnRlciwgaXNOdW1lcmljLCBpc09iamVjdCwgcm91bmRUbywgdHJ5RnVuY3Rpb24sIHVjZmlyc3QgfSBmcm9tICcuLi9taXNjLmpzJzsKaW1wb3J0IHRya2wgZnJvbSAnLi4vdHJrbC5qcyc7CmltcG9ydCBVdGlsIGZyb20gJy4uL3V0aWwuanMnOwppbXBvcnQgeyBFYWdsZU5vZGUgfSBmcm9tICcuL25vZGUuanMnOwppbXBvcnQgeyBFYWdsZU5vZGVMaXN0IH0gZnJvbSAnLi9ub2RlTGlzdC5qcyc7CmltcG9ydCB7IEVhZ2xlRWxlbWVudFByb3h5IH0gZnJvbSAnLi9lbGVtZW50UHJveHkuanMnOwppbXBvcnQgeyBFYWdsZVJlZmVyZW5jZSB9IGZyb20gJy4vcmVmLmpzJzsKaW1wb3J0IHsgUkdCQSB9IGZyb20gJy4uL2NvbG9yLmpzJzsKaW1wb3J0IHsgSW1tdXRhYmxlWFBhdGggfSBmcm9tICcuLi94bWwveHBhdGguanMnOwppbXBvcnQgeyBQb2ludGVyIGFzIEltbXV0YWJsZVBhdGggfSBmcm9tICcuLi9wb2ludGVyLmpzJzsKaW1wb3J0IHsgTWFrZVJvdGF0aW9uLCBBbGlnbm1lbnQsIFBpblNpemVzIH0gZnJvbSAnLi9yZW5kZXJVdGlscy5qcyc7CmltcG9ydCB7IGxhenlQcm9wZXJ0eSB9IGZyb20gJy4uL2xhenlJbml0aWFsaXplci5qcyc7CmltcG9ydCB7IEJCb3gsIFBvaW50LCBDaXJjbGUsIExpbmUsIGlzTGluZSwgUmVjdCwgVHJhbnNmb3JtYXRpb25MaXN0LCBUcmFuc2Zvcm1hdGlvbiwgUG9pbnRMaXN0LCBUcmFuc2xhdGlvbiwgUG9seWdvbiwgTWFrZVBvbHlnb24gfSBmcm9tICcuLi9nZW9tLmpzJzsKaW1wb3J0IHsgUmVwZWF0ZXIgfSBmcm9tICcuLi9yZXBlYXRlci9yZXBlYXRlci5qcyc7CmltcG9ydCB7IEVhZ2xlTm9kZU1hcCB9IGZyb20gJy4vbm9kZU1hcC5qcyc7Cgpjb25zdCBhZGQgPSAoYXJyLCAuLi5pdGVtcykgPT4gWy4uLihhcnIgfHwgW10pLCAuLi5pdGVtc107Cgpjb25zdCBkZWNvZGVIVE1MRW50aXRpZXMgPSBzID0+CiAgcy5yZXBsYWNlKAogICAgbmV3IFJlZ0V4cCgnJihbXjtdKyk7JywgJ2dtJyksCiAgICAobWF0Y2gsIGVudGl0eSkgPT4KICAgICAgKHsKICAgICAgICBhbXA6ICcmJywKICAgICAgICBhcG9zOiAiJyIsCiAgICAgICAgJyN4MjcnOiAiJyIsCiAgICAgICAgJyN4MkYnOiAnLycsCiAgICAgICAgJyMzOSc6ICInIiwKICAgICAgICAnIzQ3JzogJy8nLAogICAgICAgIGx0OiAnPCcsCiAgICAgICAgZ3Q6ICc+JywKICAgICAgICBuYnNwOiAnICcsCiAgICAgICAgcXVvdDogJyInCiAgICAgIH1bZW50aXR5XSB8fCBtYXRjaCkKICApOwoKY29uc3QgVExpc3QgPSAoY2hpbGQsIGVsZW0pID0+IHsKICBsZXQgdHJhbnNmb3JtYXRpb24gPSBlbGVtLnRyYW5zZm9ybWF0aW9uKCk7CiAgbGV0IGluc3RhbmNlID0geyBjaGlsZCwgZWxlbSB9OwogIGxldCByb3VuZCA9IG4gPT4gcm91bmRUbyhuLCAwLjAwMDEsIDQpOwogIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UuY2hpbGQsIHsKICAgIGdldCh0YXJnZXQsIHByb3ApIHsKICAgICAgbGV0IHYgPSBSZWZsZWN0LmdldChpbnN0YW5jZS5jaGlsZCwgcHJvcCk7CiAgICAgIGlmKFsneCcsICd5J10uaW5kZXhPZihwcm9wKSAhPSAtMSkgewogICAgICAgIHYgPSBpbnN0YW5jZS5lbGVtW3Byb3BdICsgdGFyZ2V0W3Byb3BdOwogICAgICAgIHYgPSByb3VuZCh2KTsKICAgICAgfSBlbHNlIGlmKHByb3AgPT0gZWxlbS50YWdOYW1lKSB7CiAgICAgICAgdiA9IGVsZW07CiAgICAgIH0gZWxzZSBpZihwcm9wID09ICdnZW9tZXRyeScpIHsKICAgICAgICB2ID0gdGFyZ2V0W3Byb3BdOwogICAgICAgIHYgPSB2LmNsb25lKCk7CiAgICAgICAgLy9jb25zb2xlLmxvZyhgVExpc3QgZ2V0KCR7cHJvcH0pYCwgeyBlbGVtLCB0cmFuc2Zvcm1hdGlvbiwgdGFyZ2V0IH0pOwogICAgICAgIHRyYW5zZm9ybWF0aW9uLmFwcGx5KHYpOwogICAgICB9CiAgICAgIHJldHVybiB2OwogICAgfQogIH0pOwp9OwoKZXhwb3J0IGNsYXNzIEVhZ2xlRWxlbWVudCBleHRlbmRzIEVhZ2xlTm9kZSB7CiAgc3RhdGljIGxpc3QgPSBbXTsKICBzdGF0aWMgY3VycmVudEVsZW1lbnQgPSBudWxsOwoKICBzdGF0aWMgbWFrZVRyYW5zcGFyZW50ID0gbmV3IFJHQkEoMjU1LCAyNTUsIDI1NSkudG9BbHBoYSgpOwoKICBzdGF0aWMgZ2V0KG93bmVyLCByZWYsIHJhdykgewogICAgLy9jb25zb2xlLmxvZygnRWFnbGVFbGVtZW50LmdldCcsIHtvd25lcjogb3duZXIucmF3LHJlZixyYXd9KTsKICAgIGlmKHJlZi5sZW5ndGggPT09IDAgfHwgcmF3ID09PSB1bmRlZmluZWQpIHsKICAgICAgbGV0IHJvb3QgPSAncm9vdCcgaW4gcmVmID8gcmVmLnJvb3QgOiBudWxsOwogICAgICBsZXQgcGF0aCA9ICdwYXRoJyBpbiByZWYgPyByZWYucGF0aCA6IHJlZjsKICAgICAgZ2xvYmFsVGhpcy50bXAgPSB7IG93bmVyLCByb290LCBwYXRoLCByYXcsIHJlZiB9OwogICAgICAvL2lmKG93bmVyIGluc3RhbmNlb2YgRWFnbGVEb2N1bWVudCAmJiByb290ID09IG51bGwgJiYgcGF0aC5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcignRWFnbGVFbGVtZW50LmdldCcpOwogICAgfQogICAgbGV0IHJvb3QgPSByZWYucm9vdCB8fCBvd25lci5yYXcgPyBvd25lci5yYXcgOiBvd25lcjsKICAgIGxldCBkb2MgPSBvd25lci5kb2N1bWVudDsKICAgIGNvbnN0IHsgcGF0aE1hcHBlciwgcmF3MmVsZW1lbnQgfSA9IGRvYzsKICAgIGxldCBpbnNlcnQgPSBpbnNlcnRlcihwYXRoTWFwcGVyKTsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5nZXQoMSknLCB7cm9vdCxyZWZ9KTsKICAgIGlmKHR5cGVvZiByZWYgPT0gJ3N0cmluZycpIHJlZiA9IG5ldyBJbW11dGFibGVQYXRoKHJlZiwgeyBzZXBhcmF0b3I6ICcgJyB9KTsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5nZXQoMiknLCB7cm9vdCxyZWZ9KTsKICAgIC8vCiAgICBpZihpc09iamVjdChyZWYpICYmIEFycmF5LmlzQXJyYXkocmVmKSAmJiAhKHJlZiBpbnN0YW5jZW9mIEVhZ2xlUmVmZXJlbmNlKSkgewogICAgICAvL2NvbnNvbGUubG9nKCdFYWdsZUVsZW1lbnQuZ2V0KDIpJywge3Jvb3QscmVmfSk7CgogICAgICB0cnkgewogICAgICAgIHJlZiA9IG5ldyBFYWdsZVJlZmVyZW5jZShvd25lciwgcmVmKTsKICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJlZiA9IG5ldyBFYWdsZVJlZmVyZW5jZShvd25lci5yYXcsIHJlZik7CiAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICByZWYgPSBuZXcgRWFnbGVSZWZlcmVuY2Uocm9vdCwgcmVmKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmKCFpc09iamVjdChyZWYpIHx8ICEoJ2RlcmVmZXJlbmNlJyBpbiByZWYpIHx8ICEocmVmIGluc3RhbmNlb2YgRWFnbGVSZWZlcmVuY2UpKSB7CiAgICAgIHJlZiA9IG5ldyBFYWdsZVJlZmVyZW5jZShyb290LCByZWYpOwogICAgfQogICAgaWYoIXJhdyAmJiBpc09iamVjdChyZWYucGF0aCkpIHJhdyA9IHJlZi5wYXRoLmRlcmVmKHJvb3QsIHRydWUpOwogICAgaWYoIXJhdykgcmF3ID0gcmVmLmRlcmVmZXJlbmNlKCk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZUVsZW1lbnQuZ2V0KDIpJywge3Jvb3QscmVmLHJhd30pOwogICAgbGV0IGluc3QgPSBkb2MucmF3MmVsZW1lbnQocmF3LCBvd25lciwgcmVmKTsKICAgIGluc2VydChpbnN0LCByZWYucGF0aCk7CiAgICBFYWdsZUVsZW1lbnQuY3VycmVudEVsZW1lbnQgPSBpbnN0OwogICAgcmV0dXJuIGluc3Q7CiAgfQoKICBzdGF0aWMgY3JlYXRlKHRhZ05hbWUsIGF0dHJpYnV0ZXMgPSB7fSwgY2hpbGRyZW4gPSBbXSkgewogICAgZm9yKGxldCBuYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgYXR0cmlidXRlc1tuYW1lXSA9IGF0dHJpYnV0ZXNbbmFtZV0gKyAnJzsKICAgIH0KICAgIHJldHVybiB7IHRhZ05hbWUsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuIH07CiAgfQogIHN0YXRpYyBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBFYWdsZUVsZW1lbnQ7CiAgfQoKICBjb25zdHJ1Y3Rvcihvd25lciwgcmVmLCByYXcpIHsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5jb25zdHJ1Y3RvcicsIHtvd25lcjogb3duZXIucmF3LHJlZixyYXd9KTsKICAgIGlmKGNsYXNzTmFtZShvd25lcikgPT0gJ09iamVjdCcpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2luc3BlY3Qob3duZXIsIDApfSAke2luc3BlY3QocmVmLCAxKX1gKTsKICAgIH0KICAgIHN1cGVyKG93bmVyLCByZWYsIHJhdyk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZUVsZW1lbnQuY29uc3RydWN0b3IoMiknLCB7b3duZXI6IHRoaXMub3duZXIsIHJlZjogdGhpcy5yZWYscmF3OiB0aGlzLnJhd30pOwoKICAgIEVhZ2xlRWxlbWVudC5saXN0LnB1c2godGhpcyk7CiAgICBkZWZpbmUodGhpcywgeyBoYW5kbGVyczoge30gfSk7CiAgICBsZXQgcGF0aCA9IHRoaXMucmVmLnBhdGg7CiAgICBpZihvd25lciA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdvd25lciA9PSBudWxsJyk7CiAgICBpZihyYXcgPT09IHVuZGVmaW5lZCB8fCAocmF3LnRhZ05hbWUgPT09IHVuZGVmaW5lZCAmJiByYXcuYXR0cmlidXRlcyA9PT0gdW5kZWZpbmVkICYmIHJhdy5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkKSkgewogICAgICB0cnkgewogICAgICAgIHJhdyA9IHRoaXMucmVmLmRlcmVmZXJlbmNlKCk7CiAgICAgIH0gY2F0Y2goZXJyb3IpIHt9CiAgICB9CiAgICBpZihyYXcgPT09IG51bGwgfHwgdHlwZW9mIHJhdyAhPSAnb2JqZWN0JykgdGhyb3cgbmV3IEVycm9yKCdyZWY6ICcgKyB0aGlzLnJlZi5pbnNwZWN0KCkgKyAnIGVudGl0eTogJyArIEVhZ2xlTm9kZS5wcm90b3R5cGUuaW5zcGVjdC5jYWxsKHRoaXMpKTsKICAgIGxldCB7IHRhZ05hbWUsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuID0gW10gfSA9IHJhdzsKICAgIC8vdGhpcy50YWdOYW1lID0gdGFnTmFtZTsKICAgIGRlZmluZSh0aGlzLCB7IGF0dHJNYXA6IHt9IH0pOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICd0YWdOYW1lJywgewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnRhZ05hbWU7CiAgICAgIH0sCiAgICAgIGVudW1lcmFibGU6IHRydWUKICAgIH0pOwogICAgbGV0IGRvYyA9IHRoaXMuZ2V0RG9jdW1lbnQoKTsKICAgIGxldCBlbGVtID0gdGhpczsKICAgIGNvbnN0IGF0dHJpYnV0ZUxpc3QgPSBFYWdsZUVsZW1lbnQuYXR0cmlidXRlTGlzdHNbdGFnTmFtZV0gfHwgT2JqZWN0LmtleXMoYXR0cmlidXRlcyB8fCB7fSk7CiAgICBpZih0YWdOYW1lID09ICdjb250YWN0cmVmJykgewogICAgICBsYXp5UHJvcGVydHkodGhpcywgJ2VsZW1lbnQnLCAoKSA9PiB7CiAgICAgICAgY29uc3QgeyBlbGVtZW50LCBwYWQgfSA9IGF0dHJpYnV0ZXM7CiAgICAgICAgcmV0dXJuIGRvYy5lbGVtZW50c1tlbGVtZW50XTsKICAgICAgfSk7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAncGFkJywgKCkgPT4gewogICAgICAgIGNvbnN0IHsgZWxlbWVudCwgcGFkIH0gPSBhdHRyaWJ1dGVzOwogICAgICAgIHJldHVybiBkb2MuZWxlbWVudHNbZWxlbWVudF0ucGFkc1twYWRdOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IG5hbWVzID0gdGhpcy5uYW1lcygpOwogICAgICBmb3IobGV0IGtleSBvZiBhdHRyaWJ1dGVMaXN0KSB7CiAgICAgICAgbGV0IHByb3AgPSB0cmtsLnByb3BlcnR5KHRoaXMuYXR0ck1hcCwga2V5KTsKICAgICAgICBsZXQgaGFuZGxlcjsKICAgICAgICBpZihbJ3Zpc2libGUnLCAnYWN0aXZlJ10uaW5kZXhPZihrZXkpICE9IC0xKQogICAgICAgICAgaGFuZGxlciA9IAogICAgICAgICAgICB2ID0+IHYgIT09IHVuZGVmaW5lZCA/ICBwcm9wKHYgPT09IHRydWUgPyAneWVzJyA6IHYgPT09IGZhbHNlID8gJ25vJyA6IHYpIDogKAogICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgbGV0IHYgPSBwcm9wKCk7CiAgICAgICAgICAgICAgaWYodiA9PSAneWVzJykgdiA9IHRydWU7CiAgICAgICAgICAgICAgZWxzZSBpZih2ID09ICdubycpIHYgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gdjsKICAgICAgICAgICAgfSkoKTsKICAgICAgICBlbHNlIGlmKGtleSA9PSAnZGlhbWV0ZXInKSB7CiAgICAgICAgICBjb25zdCBnZXREaWFtZXRlciA9ICAgICAgICAgICAgIHYgPT4gaXNOYU4oK3YpID8gJ2F1dG8nIDogK3Y7CiAgICAgICAgICBoYW5kbGVyID0gdiA9PiAodiAhPT0gdW5kZWZpbmVkID8gcHJvcChpc05hTigrdikgPyB2IDogK3YpIDogZ2V0RGlhbWV0ZXIocHJvcCgpKSk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICBoYW5kbGVyID0gdiA9PgogICAgICAgICAgICB2ICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICA/IHByb3AodiArICcnKQogICAgICAgICAgICAgIDogKCgpID0+IHsKICAgICAgICAgICAgICAgICAgbGV0IHYgPSBwcm9wKCk7CiAgICAgICAgICAgICAgICAgIGlmKGlzTnVtZXJpYyh2KSAmJiBrZXkgIT0gJ25hbWUnKSB2ID0gcGFyc2VGbG9hdCh2KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgICAgICAgICB9KSgpOwoKICAgICAgICBwcm9wKGF0dHJpYnV0ZXNba2V5XSk7CiAgICAgICAgcHJvcC5zdWJzY3JpYmUodmFsdWUgPT4gKHZhbHVlICE9PSB1bmRlZmluZWQgPyAocmF3LmF0dHJpYnV0ZXNba2V5XSA9ICcnICsgdmFsdWUpIDogZGVsZXRlIHJhdy5hdHRyaWJ1dGVzW2tleV0pKTsKICAgICAgICBwcm9wLnN1YnNjcmliZSh2YWx1ZSA9PiAoZWxlbS5wdXNoRXZlbnQgPyBlbGVtLnB1c2hFdmVudChlbGVtLCBrZXksIHZhbHVlKSA6IHZvaWQgMCkpOwogICAgICAgIHRoaXMuaGFuZGxlcnNba2V5XSA9IHByb3A7CgogICAgICAgIGlmKE9iamVjdC5rZXlzKG5hbWVzKS5pbmRleE9mKGtleSkgIT0gLTEgJiYgIShbJ2luc3RhbmNlJywgJ3BhcnQnLCAnZWxlbWVudCddLmluZGV4T2YodGFnTmFtZSkgIT0gLTEgJiYgWyduYW1lJywgJ3ZhbHVlJ10uaW5kZXhPZihrZXkpICE9IC0xKSkgewogICAgICAgICAgbXNnYGtleT0ke2tleX0gbmFtZXM9JHtuYW1lc31gOwogICAgICAgICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiAodiA/IHYubmFtZXMuZm9yRWFjaChuYW1lID0+IHRoaXMuaGFuZGxlcnNbbmFtZV0odi5uYW1lc1tuYW1lXSkpIDogdGhpcy5saWJyYXJ5W2tleSArICdzJ11bdGhpcy5hdHRyTWFwW2tleV1dKSk7CiAgICAgICAgfSBlbHNlIGlmKGtleSA9PSAnZGV2aWNlJykgewogICAgICAgICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiB7CiAgICAgICAgICAgIGlmKHYpIHsKICAgICAgICAgICAgICBjb25zdCB7IG5hbWVzIH0gPSB2OwogICAgICAgICAgICAgIGlmKG5hbWVzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMubGlicmFyeShuYW1lcy5saWJyYXJ5KTsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuZGV2aWNlc2V0KG5hbWVzLmRldmljZXNldCk7CiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmRldmljZShuYW1lcy5kZXZpY2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBsaWJyYXJ5ID0gZG9jLmdldExpYnJhcnkoYXR0cmlidXRlcy5saWJyYXJ5KTsKICAgICAgICAgICAgICBjb25zdCBkZXZpY2VzZXQgPSBsaWJyYXJ5LmRldmljZXNldHNbYXR0cmlidXRlcy5kZXZpY2VzZXRdOwogICAgICAgICAgICAgIGNvbnN0IGRldmljZSA9IGRldmljZXNldC5kZXZpY2VzW2F0dHJpYnV0ZXMuZGV2aWNlXTsKICAgICAgICAgICAgICByZXR1cm4gZGV2aWNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYodGFnTmFtZSA9PSAnbGF5ZXInICYmIGtleSA9PSAnY29sb3InKSB7CiAgICAgICAgICBkZWZpbmUodGhpcywgewogICAgICAgICAgICBnZXQgY29sb3IoKSB7CiAgICAgICAgICAgICAgbGV0IGNvbG9ySW5kZXggPSBhdHRyaWJ1dGVzLmNvbG9yID09IHVuZGVmaW5lZCA/IDE1IDogYXR0cmlidXRlcy5jb2xvcjsKICAgICAgICAgICAgICBsZXQgY29sb3IgPSBkb2MucGFsZXR0ZVtjb2xvckluZGV4XSB8fCBkb2MucGFsZXR0ZVswYjAxMTBdOwogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbG9ySW5kZXgnLCBjb2xvckluZGV4LCBjb2xvcik7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYoRWFnbGVFbGVtZW50LmlzUmVsYXRpb24oa2V5KSB8fCBbJ3BhY2thZ2UnLCAnbGlicmFyeScsICdsYXllciddLmluZGV4T2Yoa2V5KSAhPSAtMSkgewogICAgICAgICAgbGV0IGhmbjsKICAgICAgICAgIGlmKGtleSA9PSAncGFja2FnZScpIHsKICAgICAgICAgICAgaGZuID0gdmFsdWUgPT4gewogICAgICAgICAgICAgIGNvbnN0IGxpYk5hbWUgPSBlbGVtLmF0dHJpYnV0ZXMubGlicmFyeTsKICAgICAgICAgICAgICBjb25zdCBwa2dOYW1lID0gZWxlbS5oYW5kbGVycy5wYWNrYWdlKCk7CiAgICAgICAgICAgICAgY29uc3QgbGlicmFyeSA9IHRoaXMuZG9jdW1lbnQuZ2V0TGlicmFyeShsaWJOYW1lKTsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRhZ05hbWUsIHsgbGliTmFtZSwgcGtnTmFtZSwgbGlicmFyeSwga2V5IH0pOwoKICAgICAgICAgICAgICByZXR1cm4gbGlicmFyeS5wYWNrYWdlc1twa2dOYW1lXTsgLy8oeyB0YWdOYW1lOiAncGFja2FnZScsIG5hbWU6IHBrZ05hbWUgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYodGFnTmFtZSA9PSAncGFydCcpIHsKICAgICAgICAgICAgc3dpdGNoIChrZXkpIHsKICAgICAgICAgICAgICBjYXNlICduYW1lJzoKICAgICAgICAgICAgICAgIGhmbiA9ICgpID0+IGF0dHJpYnV0ZXMubmFtZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ2xpYnJhcnknOgogICAgICAgICAgICAgICAgaGZuID0gKCkgPT4gZG9jLmdldExpYnJhcnkoYXR0cmlidXRlcy5saWJyYXJ5KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ2RldmljZXNldCc6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiB0aGlzLmxpYnJhcnkuZGV2aWNlc2V0c1thdHRyaWJ1dGVzLmRldmljZXNldF07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICd2YWx1ZSc6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiBhdHRyaWJ1dGVzLnZhbHVlIHx8IGF0dHJpYnV0ZXMuZGV2aWNlc2V0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAnZGV2aWNlJzoKICAgICAgICAgICAgICAgIGhmbiA9ICgpID0+IHRoaXMuZGV2aWNlc2V0LmRldmljZXNbYXR0cmlidXRlcy5kZXZpY2VdOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZih0YWdOYW1lID09ICdpbnN0YW5jZScgfHwgdGFnTmFtZSA9PSAncGlucmVmJykgewogICAgICAgICAgICBjb25zdCBtb2R1bGUgPSBlbGVtLmNoYWluLm1vZHVsZSB8fCBkb2M7CgogICAgICAgICAgICAvKiAgICAgICAgaWYodGhpcy5saWJyYXJ5ID09PSB1bmRlZmluZWQpIHRya2wuYmluZCh0aGlzLCAnbGlicmFyeScsICgpID0+IHRoaXMucGFydC5saWJyYXJ5IHx8IHRoaXMuZG9jdW1lbnQuZ2V0TGlicmFyeSh0aGlzLnBhcnQuYXR0cmlidXRlcy5saWJyYXJ5KSk7CiAgICAgICAgICAgICAgaWYodGhpcy5kZXZpY2VzZXQgPT09IHVuZGVmaW5lZCkgdHJrbC5iaW5kKHRoaXMsICdkZXZpY2VzZXQnLCAoKSA9PiB0aGlzLnBhcnQuZGV2aWNlc2V0IHx8IHRoaXMubGlicmFyeS5kZXZpY2VzZXRzW3RoaXMucGFydC5hdHRyaWJ1dGVzLmRldmljZXNldF0pOwogICAgICAgICAgICAgIGlmKHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCkgdHJrbC5iaW5kKHRoaXMsICd2YWx1ZScsICgpID0+IHRoaXMucGFydC52YWx1ZSB8fCB0aGlzLmRldmljZXNldC5uYW1lKTsKKi8KICAgICAgICAgICAgc3dpdGNoIChrZXkpIHsKICAgICAgICAgICAgICBjYXNlICdwYXJ0JzoKICAgICAgICAgICAgICAgIGhmbiA9ICgpID0+IHRoaXMuZG9jdW1lbnQuZ2V0KGUgPT4gZS50YWdOYW1lID09ICdwYXJ0JyAmJiBlLmF0dHJpYnV0ZXMubmFtZSA9PSBhdHRyaWJ1dGVzLnBhcnQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAnZ2F0ZSc6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiB0aGlzLnBhcnQuZGV2aWNlc2V0LmdhdGVzW2F0dHJpYnV0ZXMuZ2F0ZV07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICdzeW1ib2wnOgogICAgICAgICAgICAgICAgaGZuID0gKCkgPT4gdGhpcy5nYXRlLnN5bWJvbDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ3Bpbic6CiAgICAgICAgICAgICAgICBoZm4gPSAoKSA9PiB0aGlzLmdhdGUuc3ltYm9sLnBpbnNbYXR0cmlidXRlcy5waW5dOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZihrZXkgPT0gJ2xheWVyJykgewogICAgICAgICAgICBkZWZpbmUodGhpcywgewogICAgICAgICAgICAgIGdldCBsYXllcigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExheWVyKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZihrZXkgKyAncycgaW4gZG9jKSB7CiAgICAgICAgICAgIGhmbiA9ICgpID0+IGRvY1trZXkgKyAncyddW2VsZW0uYXR0ck1hcFtrZXldICsgJyddOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IGlkID0ga2V5ID09ICdsYXllcicgPyAnbnVtYmVyJyA6ICduYW1lJzsKICAgICAgICAgICAgaGZuID0gKCkgPT4gewogICAgICAgICAgICAgIGxldCByLAogICAgICAgICAgICAgICAgdmFsdWUgPSBlbGVtLmF0dHJNYXBba2V5XTsKICAgICAgICAgICAgICBsZXQgbGlzdCA9IGtleSA9PSAnbGlicmFyeScgPyAnbGlicmFyaWVzJyA6IGtleSArICdzJzsKICAgICAgICAgICAgICByID0gbGlzdCBpbiBkb2MgPyBkb2NbbGlzdF1bdmFsdWVdIDogZG9jLmdldCh7IHRhZ05hbWU6IGtleSwgW2lkXTogdmFsdWUgfSk7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgcmVsYXRpb24gZ2V0KCR7a2V5fSwgJHthdHRyaWJ1dGVzW2lkXX0pID0gYCwgcik7CiAgICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmKHRoaXNba2V5XSA9PSB1bmRlZmluZWQpIHRoaXMuaW5pdFJlbGF0aW9uKGtleSwgdGhpcy5oYW5kbGVyc1trZXldLCBoZm4pOwogICAgICAgICAgfQogICAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ2hmbicsIHtoZm46aGZuKycnLHRhZ05hbWUsa2V5fSk7CiAgICAgICAgICAvKiAgbGV0IG5mbiA9ICguLi5hcmdzKSA9PiB7CiAgICAgICAgICAgIGxldCByZXQ7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0ID0gaGZuKC4uLmFyZ3MpOwogICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICByZXQgPSBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICB9OwoqLwogICAgICAgICAgaWYodGhpc1trZXldID09IHVuZGVmaW5lZCkgdHJrbC5iaW5kKHRoaXMsIGtleSwgaGZuKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgaGFuZGxlcik7CiAgICAgICAgfQogICAgICAgIC8vIHByb3Auc3Vic2NyaWJlKHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ldmVudChrZXksIHZhbHVlKSk7CgogICAgICAgIC8vY29uc29sZS5sb2coInByb3A6IixrZXkscHJvcC5zdWJzY3JpYmUpOwogICAgICB9CiAgICB9CiAgICBsZXQgY2hpbGRMaXN0ID0gbnVsbDsKCiAgICBpZih0YWdOYW1lID09ICdlbGVtZW50JykgbGF6eVByb3BlcnR5KHRoaXMsICdjaGlsZHJlbicsICgpID0+IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMucGFja2FnZSwgdGhpcy5wYWNrYWdlLnBhdGguZG93bignY2hpbGRyZW4nKSwgbnVsbCkpOwogICAgZWxzZSBpZignY2hpbGRyZW4nIGluIHJhdykgbGF6eVByb3BlcnR5KHRoaXMsICdjaGlsZHJlbicsICgpID0+IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMsIHRoaXMucGF0aC5kb3duKCdjaGlsZHJlbicpLCBudWxsKSk7CgogICAgaWYodGFnTmFtZSA9PSAnZHJhd2luZycgfHwgdGFnTmFtZSA9PSAnc2NoZW1hdGljJyB8fCB0YWdOYW1lID09ICdib2FyZCcpIHsKICAgICAgZm9yKGxldCBjaGlsZCBvZiByYXcuY2hpbGRyZW4pIGxhenlQcm9wZXJ0eSh0aGlzLCBjaGlsZC50YWdOYW1lLCAoKSA9PiB0aGlzLmdldChlID0+IGUudGFnTmFtZSA9PSBjaGlsZC50YWdOYW1lKSk7CiAgICB9CgogICAgaWYodGFnTmFtZSA9PSAncGFkJykgewogICAgICB0cmtsLmJpbmQodGhpcywgJ2xheWVyJywgKCkgPT4gZG9jLmxheWVyc1snUGFkcyddKTsKICAgIH0gZWxzZSBpZih0YWdOYW1lID09ICd2aWEnKSB7CiAgICAgIHRya2wuYmluZCh0aGlzLCAnbGF5ZXInLCAoKSA9PiBkb2MubGF5ZXJzWydWaWFzJ10pOwogICAgfSBlbHNlIGlmKHRhZ05hbWUgPT0gJ2hvbGUnKSB7CiAgICAgIHRya2wuYmluZCh0aGlzLCAnbGF5ZXInLCAoKSA9PiBkb2MubGF5ZXJzWydIb2xlcyddKTsKICAgIH0KICAgIGlmKHRhZ05hbWUgPT0gJ3BhcnQnKSBsYXp5UHJvcGVydHkodGhpcywgJ3BhY2thZ2UnLCAoKSA9PiB0aGlzLmRldmljZS5wYWNrYWdlKTsKCiAgICBpZih0YWdOYW1lID09ICdpbnN0YW5jZScpIGxhenlQcm9wZXJ0eSh0aGlzLCAncGFja2FnZScsICgpID0+IHRoaXMucGFydC5kZXZpY2UucGFja2FnZSk7CgogICAgaWYodGFnTmFtZSA9PSAnZ2F0ZScpIHsKICAgICAgdHJrbC5iaW5kKHRoaXMsICdzeW1ib2wnLCAoKSA9PiB7CiAgICAgICAgbGV0IHsgbGlicmFyeSB9ID0gdGhpcy5zY29wZTIoLyoobywgcCwgdikgPT4gW3YudGFnTmFtZSwgRWFnbGVFbGVtZW50LmdldChvLCBwLCB2KV0qLyk7CiAgICAgICAgcmV0dXJuIGxpYnJhcnkuc3ltYm9sc1thdHRyaWJ1dGVzLnN5bWJvbF07CiAgICAgIH0pOwoKICAgICAgdHJrbC5iaW5kKHRoaXMsICdwaW5zJywgKCkgPT4gdGhpcy5zeW1ib2wucGlucyk7CiAgICB9IGVsc2UgaWYodGFnTmFtZSA9PSAnaW5zdGFuY2UnKSB7CiAgICAgIHRya2wuYmluZCh0aGlzLCAncGlucycsICgpID0+IHRoaXMuc3ltYm9sLnBpbnMpOwoKICAgICAgdHJrbC5iaW5kKHRoaXMsICdzeW1ib2wnLCAoKSA9PiB0aGlzLmdhdGUuc3ltYm9sKTsKICAgIH0gZWxzZSBpZih0YWdOYW1lID09ICdkZXZpY2UnKSB7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAncGFja2FnZScsICgpID0+IHsKICAgICAgICBjb25zdCBsaWJyYXJ5ID0gdGhpcy5jaGFpbi5saWJyYXJ5OwoKICAgICAgICBpZighbGlicmFyeS5wYWNrYWdlcykgY29uc29sZS5sb2coJycsIHsgdGFnTmFtZSB9LCB0aGlzLmNoYWluKTsKICAgICAgICBsZXQgcGtnID0gbGlicmFyeS5wYWNrYWdlc1thdHRyaWJ1dGVzLnBhY2thZ2VdOwogICAgICAgIHJldHVybiBwa2c7CiAgICAgIH0pOwogICAgfQoKICAgIGlmKFsnYXR0cmlidXRlJywgJ2VsZW1lbnQnLCAnaW5zdGFuY2UnLCAnbGFiZWwnLCAnbW9kdWxlaW5zdCcsICdwYWQnLCAncGluJywgJ3Byb2JlJywgJ3JlY3RhbmdsZScsICdzbWQnLCAndGV4dCddLmluZGV4T2YodGFnTmFtZSkgIT0gLTEpIHsKICAgIH0KICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5pbml0Q2FjaGUnLCB0aGlzKTsKCiAgICB0aGlzLmluaXRDYWNoZShFYWdsZUVsZW1lbnQsIEVhZ2xlTm9kZUxpc3QuY3JlYXRlKTsKCiAgICBpZih0YWdOYW1lID09ICdzeW1ib2wnKSB7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAncGlucycsICgpID0+IHsKICAgICAgICBsZXQgbGlzdCA9IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMsIHRoaXMucGF0aC5kb3duKCdjaGlsZHJlbicpLCBlID0+IGUudGFnTmFtZSA9PSAncGluJyk7CiAgICAgICAgcmV0dXJuIEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdCwgJ25hbWUnKTsKICAgICAgfSk7CiAgICB9CiAgICBpZih0YWdOYW1lID09ICdlbGVtZW50JykgewogICAgICBpZih0aGlzLnBhY2thZ2UpIHsKICAgICAgICBmb3IobGV0IGtleSBvZiBbJ3BhZCcsICd3aXJlJywgJ2NpcmNsZScsICd0ZXh0JywgJ3JlY3RhbmdsZSddKQogICAgICAgICAgbGF6eVByb3BlcnR5KHRoaXMsIGtleSArICdzJywgKCkgPT4gewogICAgICAgICAgICBsZXQgbGlzdCA9IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKAogICAgICAgICAgICAgIHRoaXMsCiAgICAgICAgICAgICAgdGhpcy5wYWNrYWdlLnJlZi5kb3duKCdjaGlsZHJlbicpLAogICAgICAgICAgICAgIGUgPT4gZS50YWdOYW1lID09IGtleSwKICAgICAgICAgICAgICAobywgcCwgcikgPT4gVExpc3QoRWFnbGVFbGVtZW50LmdldChvLCBwLCByKSwgZWxlbSkKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGlmKGtleSAhPSAncGFkJykgcmV0dXJuIGxpc3Q7CiAgICAgICAgICAgIHJldHVybiBFYWdsZU5vZGVNYXAuY3JlYXRlKGxpc3QsICduYW1lJyk7CiAgICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdHJrbC5iaW5kKHRoaXMsICdjb250YWN0cycsICgpID0+CiAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKAogICAgICAgICAgWwogICAgICAgICAgICAuLi5kb2MuYm9hcmQuc2lnbmFscy5nZXRBbGwoewogICAgICAgICAgICAgIHRhZ05hbWU6ICdjb250YWN0cmVmJywKICAgICAgICAgICAgICBlbGVtZW50OiBhdHRyaWJ1dGVzLm5hbWUKICAgICAgICAgICAgfSkKICAgICAgICAgIF0ubWFwKGNyZWYgPT4gW2NyZWYucGFkLm5hbWUsIGNyZWYucGFyZW50Tm9kZV0pCiAgICAgICAgKQogICAgICApOwogICAgICB0cmtsLmJpbmQodGhpcywgJ2NvbnRhY3RyZWZzJywgKCkgPT4KICAgICAgICBPYmplY3QuZnJvbUVudHJpZXMoCiAgICAgICAgICBbCiAgICAgICAgICAgIC4uLmRvYy5ib2FyZC5zaWduYWxzLmdldEFsbCh7CiAgICAgICAgICAgICAgdGFnTmFtZTogJ2NvbnRhY3RyZWYnLAogICAgICAgICAgICAgIGVsZW1lbnQ6IGF0dHJpYnV0ZXMubmFtZQogICAgICAgICAgICB9KQogICAgICAgICAgXS5tYXAoY3JlZiA9PiBbY3JlZi5wYWQubmFtZSwgY3JlZl0pCiAgICAgICAgKQogICAgICApOwogICAgfQogICAgaWYodGFnTmFtZSA9PSAnc2lnbmFsJykgewogICAgICBmb3IobGV0IHByb3Agb2YgWyd2aWEnLCAnd2lyZScsICdjb250YWN0cmVmJ10pIHsKICAgICAgICBsYXp5UHJvcGVydHkodGhpcywgcHJvcCArICdzJywgKCkgPT4gRWFnbGVOb2RlTGlzdC5jcmVhdGUodGhpcywgdGhpcy5wYXRoLmRvd24oJ2NoaWxkcmVuJyksIGUgPT4gZS50YWdOYW1lID09IHByb3ApKTsKICAgICAgfQogICAgfQogICAgaWYodGFnTmFtZSA9PSAncGFja2FnZScpIHsKICAgICAgbGF6eVByb3BlcnR5KHRoaXMsICd2aWFzJywgKCkgPT4gRWFnbGVOb2RlTGlzdC5jcmVhdGUodGhpcywgdGhpcy5wYXRoLmRvd24oJ2NoaWxkcmVuJyksIGUgPT4gZS50YWdOYW1lID09ICd2aWEnKSk7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAncGFkcycsICgpID0+IHsKICAgICAgICBsZXQgbGlzdCA9IEVhZ2xlTm9kZUxpc3QuY3JlYXRlKHRoaXMsIHRoaXMucGF0aC5kb3duKCdjaGlsZHJlbicpLCBlID0+IGUudGFnTmFtZSA9PSAncGFkJyk7CiAgICAgICAgcmV0dXJuIEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdCwgJ25hbWUnKTsKICAgICAgfSk7CiAgICAgIGxhenlQcm9wZXJ0eSh0aGlzLCAnd2lyZXMnLCAoKSA9PiBFYWdsZU5vZGVMaXN0LmNyZWF0ZSh0aGlzLCB0aGlzLnBhdGguZG93bignY2hpbGRyZW4nKSwgZSA9PiBlLnRhZ05hbWUgPT0gJ3dpcmUnKSk7CiAgICB9CgogICAgaWYodGFnTmFtZSA9PSAnbGF5ZXInKSB7CiAgICAgIHRoaXMuZ2V0Q29sb3IgPSBlbGVtZW50ID0+IHsKICAgICAgICBpZihlbGVtZW50KSB0aGlzLmVsZW1lbnRzLmFkZChlbGVtZW50KTsKICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjsKICAgICAgfTsKICAgICAgdGhpcy5pc1Zpc2libGUgPSBlbGVtZW50ID0+IHsKICAgICAgICBpZihlbGVtZW50KSB0aGlzLmVsZW1lbnRzLmFkZChlbGVtZW50KTsKICAgICAgICByZXR1cm4gdGhpcy52aXNpYmxlOwogICAgICB9OwogICAgICB0aGlzLnNldFZpc2libGUgPSB2YWx1ZSA9PiAodmFsdWUgPT09IHVuZGVmaW5lZCA/IHRoaXMuaGFuZGxlcnMudmlzaWJsZSgpID09ICd5ZXMnIDogdGhpcy5oYW5kbGVycy52aXNpYmxlKHZhbHVlID8gJ3llcycgOiAnbm8nKSk7CiAgICAgIHRoaXMuc2V0VmlzaWJsZS5zdWJzY3JpYmUgPSBmID0+IHRoaXMuaGFuZGxlcnMudmlzaWJsZS5zdWJzY3JpYmUodmFsdWUgPT4gZih2YWx1ZSA9PSAneWVzJykpOwogICAgfQogICAgLy8gICAgbGV0IGxheWVyICA9IHRoaXMudGFnTmFtZSA9PSAncGFkJyA/IHRoaXMuZG9jdW1lbnQubGF5ZXJzWydQYWRzJ10gOiAgdGhpcy5sYXllcjsKICAgIGlmKHRoaXMubGF5ZXIgfHwgdGhpcy50YWdOYW1lID09ICdwYWQnIHx8IHRoaXMudGFnTmFtZSA9PSAndmlhJykgewogICAgICB0aGlzLmdldENvbG9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgbGV0IGxheWVyID0gdGhpcy5sYXllciB8fCB0aGlzLmRvY3VtZW50LmxheWVyc1t1Y2ZpcnN0KHRoaXMudGFnTmFtZSkgKyAncyddOwogICAgICAgIGxheWVyLmVsZW1lbnRzLmFkZCh0aGlzKTsKICAgICAgICBsZXQgY29sb3IgPSBsYXllci5jb2xvcjsKICAgICAgICBpZihbJ3BhZCcsICd2aWEnXS5pbmRleE9mKHRoaXMudGFnTmFtZSkgIT0gLTEpIGNvbG9yID0gRWFnbGVFbGVtZW50Lm1ha2VUcmFuc3BhcmVudChjb2xvcik7CgogICAgICAgIHJldHVybiBjb2xvcjsKICAgICAgfTsKICAgIH0KCiAgICBpZih0YWdOYW1lID09ICdsYXllcicpIHRoaXMuZWxlbWVudHMgPSBuZXcgU2V0KCk7CgogICAgaWYodGFnTmFtZSA9PSAncGFkJykgewogICAgICB0cmtsLmJpbmQodGhpcywgJ3JhZGl1cycsIHZhbHVlID0+IHsKICAgICAgICBsZXQgcHJvcCA9IFsnZGlhbWV0ZXInLCAnZHJpbGwnXS5maW5kKG4gPT4gdHlwZW9mIHRoaXNbbl0gPT0gJ251bWJlcicpOwoKICAgICAgICBpZih2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBsZXQgbiA9IHRoaXNbcHJvcF07CiAgICAgICAgICBpZihwcm9wID09ICdkaWFtZXRlcicgJiYgaXNOdW1lcmljKG4pKSByZXR1cm4gK24gLyAyOwoKICAgICAgICAgIGxldCByYWRpdXMgPSBuIC8gMiArIDAuNDUgLyAyOwogICAgICAgICAgcmV0dXJuIHJhZGl1czsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kaWFtZXRlciA9IHZhbHVlICogMjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qCiAgICBpZih0aGlzLmxheWVyKQogICAgICB0aGlzLmxheWVyLmVsZW1lbnRzLmFkZCh0aGlzKTsqLwogICAgbGV0IHRtcCA9IHRoaXMucmVwZWF0ZXI7CiAgfQoKICBnZXQgcmVwZWF0ZXIoKSB7CiAgICBsZXQgcHVzaEZuOwogICAgaWYoIXRoaXMucikgewogICAgICB0aGlzLnIgPSBuZXcgUmVwZWF0ZXIoYXN5bmMgKHB1c2gsIHN0b3ApID0+IHsKICAgICAgICBwdXNoKHRoaXMpOwogICAgICAgIHB1c2hGbiA9IHB1c2g7CiAgICAgICAgcHVzaCh0aGlzKTsKICAgICAgICBhd2FpdCBzdG9wOwogICAgICB9KTsKICAgICAgdGhpcy5yLm5leHQoKS50aGVuKCh7IHZhbHVlLCBkb25lIH0pID0+IHsKICAgICAgICB2YWx1ZS5wdXNoID0gcHVzaEZuOwogICAgICAgIHZhbHVlLnB1c2hFdmVudCA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgICAgICAgIGNvbnN0IFtlID0gdGhpcywga10gPSBhcmdzOwogICAgICAgICAgY29uc3QgdiA9IGVba107CgogICAgICAgICAgLy8gY29uc29sZS5sb2coYHB1c2hFdmVudGAsIGUpOwogICAgICAgICAgLy9jb25zb2xlLmxvZyhgcHVzaEV2ZW50YCwge2Usayx2fSk7CiAgICAgICAgICBpZih0aGlzLnRhZ05hbWUgPT0gJ2xheWVyJykgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGVsZW0gPT4gZWxlbS5wdXNoRXZlbnQoLi4uYXJncykpOwogICAgICAgICAgcHVzaEZuKHRoaXMpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiB0aGlzLnI7CiAgfQoKICBldmVudChuYW1lKSB7CiAgICBjb25zdCB2YWx1ZSA9IHRoaXNbbmFtZV07CiAgICAvL2NvbnNvbGUubG9nKCdldmVudDonLCB0aGlzLCB7IG5hbWUsIHZhbHVlIH0pOwoKICAgIC8qICAgIGZvcihsZXQgc3Vic2NyaWJlciBvZiB0aGlzLnN1YnNjcmliZXJzKSB7CiAgICAgIHN1YnNjcmliZXIuY2FsbCh0aGlzLCBuYW1lLCB2YWx1ZSk7CiAgICB9CiovCiAgfQoKICBzdWJzY3JpYmUoaGFuZGxlcikgewogICAgdGhpcy5zdWJzY3JpYmVycyA9IGFkZCh0aGlzLnN1YnNjcmliZXJzLCBoYW5kbGVyKTsKICAgIHJldHVybiBoYW5kbGVyOwogIH0KCiAgdW5zdWJzY3JpYmUoaGFuZGxlcikgewogICAgdGhpcy5zdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyKGggPT4gaCAhPSBoYW5kbGVyKTsKICAgIHJldHVybiBoYW5kbGVyOwogIH0KCiAgZ2V0IHRleHQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSB0aGlzOwogICAgbGV0IHRleHQgPSAnJzsKICAgIGZvcihsZXQgY2hpbGQgb2YgY2hpbGRyZW4ucmF3KSB7CiAgICAgIGlmKHR5cGVvZiBjaGlsZCA9PSAnc3RyaW5nJykgdGV4dCArPSBjaGlsZDsKICAgIH0KCiAgICByZXR1cm4gZGVjb2RlSFRNTEVudGl0aWVzKHRleHQpOwogIH0KCiAgZ2V0IGF0dHJpYnV0ZXMoKSB7CiAgICByZXR1cm4gdGhpcy5hdHRyTWFwOwogIH0KCiAgZ2V0TGF5ZXIoKSB7CiAgICBpZih0aGlzLnJhdy5hdHRyaWJ1dGVzLmxheWVyKSByZXR1cm4gdGhpcy5kb2N1bWVudC5nZXRMYXllcih0aGlzLnJhdy5hdHRyaWJ1dGVzLmxheWVyKTsKICAgIGlmKHRoaXMucmF3LnRhZ05hbWUgPT0gJ3BhZCcpIHJldHVybiAnUGFkcyc7CiAgICBpZih0aGlzLnJhdy50YWdOYW1lID09ICdob2xlJykgcmV0dXJuICdIb2xlcyc7CiAgICBpZih0aGlzLnJhdy50YWdOYW1lID09ICdkZXNjcmlwdGlvbicpIHJldHVybiAnRG9jdW1lbnQnOwogIH0KCiAgbG9va3VwKHhwYXRoLCBjcmVhdGUpIHsKICAgIC8qIGlmKCEoeHBhdGggaW5zdGFuY2VvZiBJbW11dGFibGVYUGF0aCkpCiAgICB4cGF0aCA9IG5ldyBJbW11dGFibGVYUGF0aChbLi4ueHBhdGhdKTsqLwogICAgLy9jb25zb2xlLmxvZygnRWFnbGVFbGVtZW50Lmxvb2t1cCgnLCB4cGF0aCwgY3JlYXRlLCAnKScpOwogICAgbGV0IHIgPSBzdXBlci5sb29rdXAoeHBhdGgsIChvLCBwLCB2KSA9PiB7CiAgICAgIGlmKGNyZWF0ZSAmJiAhdikgewogICAgICAgIGNvbnN0IHsgdGFnTmFtZSB9ID0gcC5sYXN0OwogICAgICAgIG8ucmF3LmNoaWxkcmVuLnB1c2goewogICAgICAgICAgdGFnTmFtZSwKICAgICAgICAgIGF0dHJpYnV0ZXM6IHt9LAogICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYoIXYpIHYgPSBwLmFwcGx5KG8ucmF3LCB0cnVlKTsKICAgICAgcmV0dXJuIEVhZ2xlRWxlbWVudC5nZXQobywgcCwgdik7CiAgICB9KTsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlRWxlbWVudC5sb29rdXAgPSAnLCByKTsKICAgIHJldHVybiByOwogIH0KCiAgZ2V0Qm91bmRzKHByZWQsIG9wdHMgPSB7fSkgewogICAgbGV0IGJiID0gbmV3IEJCb3goKTsKCiAgICBpZighcHJlZCAmJiBbJ3NoZWV0JywgJ3NjaGVtYXRpYyddLmluZGV4T2YodGhpcy50YWdOYW1lKSAhPSAtMSkgcHJlZCA9IGUgPT4gWyd3aXJlJywgJ2luc3RhbmNlJ10uaW5kZXhPZihlLnRhZ05hbWUpICE9IC0xOwoKICAgIGlmKHByZWQpIHsKICAgICAgbGV0IG9rID0gMDsKICAgICAgZm9yKGxldCBlbGVtZW50IG9mIHRoaXMuZ2V0QWxsKHByZWQpKSB7CiAgICAgICAgb2sgfD0gYmIudXBkYXRlKGVsZW1lbnQpIHx8IHRydWU7CiAgICAgIH0KICAgICAgaWYob2spIHJldHVybiBiYjsKICAgIH0KICAgIGlmKHRoaXMudGFnTmFtZSA9PSAnc2NoZW1hdGljJykgewogICAgICBsZXQgaW5zdGFuY2VzID0gWy4uLnRoaXMuZ2V0QWxsKCdpbnN0YW5jZScpXTsKICAgICAgcmV0dXJuIEJCb3gub2YoLi4uaW5zdGFuY2VzKTsKICAgIH0KICAgIGlmKHRoaXMudGFnTmFtZSA9PSAnYm9hcmQnKSB7CiAgICAgIGNvbnN0IG1lYXN1cmVzID0gWy4uLnRoaXMucGxhaW5dLmZpbHRlcihlID0+IGUubGF5ZXIubmFtZSA9PSAnTWVhc3VyZXMnKTsKICAgICAgaWYobWVhc3VyZXMubGVuZ3RoID49IDQpIHsKICAgICAgICBiYi51cGRhdGUobWVhc3VyZXMpOwogICAgICAgIGNvbnNvbGUubG9nKCdiYicsIGJiKTsKICAgICAgICByZXR1cm4gYmI7CiAgICAgIH0KICAgIH0KICAgIGlmKHRoaXMudGFnTmFtZSA9PSAncGluJykgewogICAgICBjb25zdCB7IHJvdCwgbGVuZ3RoLCBmdW5jLCB4LCB5IH0gPSB0aGlzOwoKICAgICAgY29uc3QgYW5nbGUgPSArKHJvdCB8fCAnMCcpLnJlcGxhY2UoL1IvLCAnJyk7CiAgICAgIGxldCB2ZWNsZW4gPSBQaW5TaXplc1tsZW5ndGhdICogMi41NDsKICAgICAgaWYoZnVuYyA9PSAnZG90JykgdmVjbGVuIC09IDEuNTsKICAgICAgY29uc3QgZGlyID0gUG9pbnQuZnJvbUFuZ2xlKChhbmdsZSAqIE1hdGguUEkpIC8gMTgwKTsKICAgICAgY29uc3QgdmVjID0gZGlyLnByb2QodmVjbGVuKTsKICAgICAgY29uc3QgcGl2b3QgPSBuZXcgUG9pbnQoK3gsICt5KTsKICAgICAgY29uc3QgcHAgPSBkaXIucHJvZCh2ZWNsZW4gKyAwLjc1KS5hZGQocGl2b3QpOwogICAgICBjb25zdCBsID0gbmV3IExpbmUocGl2b3QsIHZlYy5hZGQocGl2b3QpKTsKICAgICAgLy9jb25zdCB0cCA9IHBpdm90LmRpZmYoZGlyLnByb2QoMi41NCkpOwogICAgICAvLwogICAgICBiYi51cGRhdGUobC50b1BvaW50cygpKTsKICAgIH0gZWxzZSBpZih0aGlzLnRhZ05hbWUgPT0gJ2VsZW1lbnQnKSB7CiAgICAgIGNvbnN0IHsgcmF3LCByZWYsIHBhdGgsIGF0dHJpYnV0ZXMsIG93bmVyLCBkb2N1bWVudCB9ID0gdGhpczsKICAgICAgY29uc3QgbGliTmFtZSA9IHJhdy5hdHRyaWJ1dGVzLmxpYnJhcnk7CiAgICAgIGxldCBsaWJyYXJ5ID0gZG9jdW1lbnQuZ2V0TGlicmFyeShsaWJOYW1lKTsKICAgICAgbGV0IHBrZyA9IGxpYnJhcnkucGFja2FnZXNbcmF3LmF0dHJpYnV0ZXMucGFja2FnZV07CiAgICAgIGJiID0gcGtnLmdldEJvdW5kcygpOwogICAgICBiYi5tb3ZlKHRoaXMueCwgdGhpcy55KTsKICAgIH0gZWxzZSBpZih0aGlzLnRhZ05hbWUgPT0gJ2luc3RhbmNlJykgewogICAgICBjb25zdCB7IHBhcnQsIGdhdGUsIHJvdCwgeCwgeSB9ID0gdGhpczsKICAgICAgY29uc3QgeyBzeW1ib2wgfSA9IGdhdGU7CiAgICAgIGxldCB0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwogICAgICB0ID0gdC5jb25jYXQoTWFrZVJvdGF0aW9uKHJvdCkpOwogICAgICBjb25zdCBuYW1lID0gcGFydC5uYW1lOwogICAgICBjb25zdCB2YWx1ZSA9IHBhcnQudmFsdWUgfHwgcGFydC5kZXZpY2VzZXQubmFtZTsKICAgICAgbGV0IGIgPSBzeW1ib2wuZ2V0Qm91bmRzKGUgPT4gdHJ1ZSwgeyBuYW1lLCB2YWx1ZSB9KTsKICAgICAgLy9iLm1vdmUoeCwgeSk7CiAgICAgIC8vICAgY29uc29sZS5sb2coJ3N5bWJvbC5nZXRCb3VuZHMoKTonLCBzeW1ib2wubmFtZSwgYik7CiAgICAgIGxldCBwID0gbmV3IFJlY3QoYi5yZWN0KS50b1BvaW50cygpOwogICAgICBsZXQgbSA9IHQudG9NYXRyaXgoKTsKICAgICAgcCA9IG5ldyBQb2ludExpc3QoWy4uLm0udHJhbnNmb3JtUG9pbnRzKHApXSk7CiAgICAgIGJiLnVwZGF0ZShwKTsKICAgICAgYmIubW92ZSh4LCB5KTsKICAgIH0gZWxzZSBpZih0aGlzLnRhZ05hbWUgPT0gJ3NoZWV0JyB8fCB0aGlzLnRhZ05hbWUgPT0gJ2JvYXJkJykgewogICAgICBjb25zdCBwbGFpbiA9IHRoaXMuZmluZCgncGxhaW4nKTsKCiAgICAgIGxldCBsaXN0ID0gWy4uLihwbGFpbj8uY2hpbGRyZW4gPz8gW10pXS5maWx0ZXIoZSA9PiBlLnRhZ05hbWUgPT0gJ3dpcmUnICYmIGUuYXR0cmlidXRlcy5sYXllciA9PSAnNDcnKTsKICAgICAgLyogICAgICBpZihsaXN0Lmxlbmd0aCA8PSAwKSovIGxpc3QgPSBsaXN0LmNvbmNhdChbLi4uKHRoaXMudGFnTmFtZSA9PSAnc2hlZXQnID8gdGhpcy5pbnN0YW5jZXMubGlzdCA6IHRoaXMuZWxlbWVudHMubGlzdCldKTsKCiAgICAgIGJiLnVwZGF0ZUxpc3QoCiAgICAgICAgbGlzdAogICAgICAgICAgLm1hcChlID0+IHsKICAgICAgICAgICAgbGV0IHJldDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXQgPSBlLmdldEJvdW5kcygpOwogICAgICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICB9KQogICAgICAgICAgLm1hcChiID0+IG5ldyBSZWN0KGIpKQogICAgICAgICAgLm1hcChyID0+IHIudG9Qb2ludHMoKSkKICAgICAgICAgIC5mbGF0KCkKICAgICAgKTsKICAgIH0gZWxzZSBpZihbJ3BhY2thZ2UnLCAnc2lnbmFsJywgJ3BvbHlnb24nLCAnc3ltYm9sJ10uaW5kZXhPZih0aGlzLnRhZ05hbWUpICE9IC0xKSB7CiAgICAgIGZvcihsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikgYmIudXBkYXRlKGNoaWxkLmdldEJvdW5kcyhlID0+IHRydWUsIG9wdHMpKTsKICAgIH0gZWxzZSBpZih0aGlzLmdlb21ldHJ5ICYmIHRoaXMuZ2VvbWV0cnkudG9Qb2ludHMgLypbJ3dpcmUnLCAncGFkJ10uaW5kZXhPZih0aGlzLnRhZ05hbWUpICE9IC0xKi8pIHsKICAgICAgbGV0IGdlb20gPSB0aGlzLmdlb21ldHJ5OwogICAgICBiYi51cGRhdGVMaXN0KGdlb20udG9Qb2ludHMoKSk7CiAgICB9IGVsc2UgaWYodGhpcy5nZW9tZXRyeSAmJiB0aGlzLmdlb21ldHJ5LmJib3ggLypbJ3dpcmUnLCAncGFkJ10uaW5kZXhPZih0aGlzLnRhZ05hbWUpICE9IC0xKi8pIHsKICAgICAgbGV0IGdlb20gPSB0aGlzLmdlb21ldHJ5OwogICAgICBiYi51cGRhdGUoZ2VvbS5iYm94KCkpOwogICAgfSBlbHNlIGlmKHRoaXMudGFnTmFtZSA9PSAnY2lyY2xlJykgewogICAgICBsZXQgY2lyY2xlID0gdGhpcy5nZW9tZXRyeTsKCiAgICAgIGJiLnVwZGF0ZShjaXJjbGUuYmJveCh0aGlzLndpZHRoKSk7CiAgICB9IGVsc2UgaWYoWydkZXNjcmlwdGlvbiddLmluZGV4T2YodGhpcy50YWdOYW1lKSAhPSAtMSkgewogICAgfSBlbHNlIHsKICAgICAgLyogICAgaWYoWyd3aXJlJywndGV4dCcsJ3JlY3RhbmdsZSddLmluZGV4T2YodGhpcy50YWdOYW1lKSA9PSAtMSkKICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBnZXRCb3VuZHMoKSBmb3IgJyR7dGhpcy50YWdOYW1lfSdgKTsqLwogICAgICBiYi51cGRhdGUoc3VwZXIuZ2V0Qm91bmRzKHByZWQpKTsKICAgICAgLy9jb25zb2xlLmxvZygiYmIiLCB0aGlzLCBiYik7CgogICAgICBpZihbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJ10uc29tZShuID0+IGJiW25dID09PSB1bmRlZmluZWQpKSB0aHJvdyBuZXcgRXJyb3IoYE5vIGdldEJvdW5kcygpIGZvciAnJHt0aGlzLnRhZ05hbWV9JzogJHtiYn1gKTsKICAgIH0KCiAgICBpZignd2lkdGgnIGluIHRoaXMuYXR0cmlidXRlcykgewogICAgICBsZXQgaGFsZiA9IHRoaXMuYXR0cmlidXRlcy53aWR0aCAqIDAuNTsKCiAgICAgIGJiLngxIC09IGhhbGY7CiAgICAgIGJiLngyICs9IGhhbGY7CiAgICAgIGJiLnkxIC09IGhhbGY7CiAgICAgIGJiLnkyICs9IGhhbGY7CiAgICB9CgogICAgcmV0dXJuIGJiOwogIH0KCiAgZ2V0IGJvdW5kcygpIHsKICAgIHJldHVybiB0aGlzLmdldEJvdW5kcygpOwogIH0KCiAgdHJhbnNmb3JtYXRpb24oKSB7CiAgICBsZXQgcmV0ID0gbmV3IFRyYW5zZm9ybWF0aW9uTGlzdCgpOwogICAgbGV0IHJvdCA9IHRoaXMucm90IHx8ICcnOwogICAgaWYoJ3gnIGluIHRoaXMgJiYgJ3knIGluIHRoaXMpIHJldC5wdXNoKG5ldyBUcmFuc2Zvcm1hdGlvbi50cmFuc2xhdGlvbih0aGlzLngsIHRoaXMueSkpOwogICAgaWYoL00vLnRlc3Qocm90KSkgcmV0LnB1c2gobmV3IFRyYW5zZm9ybWF0aW9uLnNjYWxpbmcoLTEsIDEpKTsKICAgIGxldCBhbmdsZSA9ICtyb3QucmVwbGFjZSgvW01SXS9nLCAnJyk7CiAgICBpZihhbmdsZSA+IDApIHJldC5wdXNoKG5ldyBUcmFuc2Zvcm1hdGlvbi5yb3RhdGlvbihhbmdsZSkpOwogICAgcmV0dXJuIHJldDsKICB9CgogIGdldCBnZW9tZXRyeSgpIHsKICAgIGNvbnN0IHsgcmF3IH0gPSB0aGlzOwogICAgLy8gY29uc29sZS5sb2coJ3Jhdy5hdHRyaWJ1dGVzJyxyYXcuYXR0cmlidXRlcyk7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocmF3LmF0dHJpYnV0ZXMgPz8ge30pOwogICAgY29uc3QgbWFrZUdldHRlclNldHRlciA9IGsgPT4gdiA9PiB2ID09PSB1bmRlZmluZWQgPyArcmF3LmF0dHJpYnV0ZXNba10gOiAocmF3LmF0dHJpYnV0ZXNba10gPSB2ICsgJycpOwoKICAgIGlmKHRoaXMuc2hhcGUgPT0gJ29jdGFnb24nKSB7CiAgICAgIGxldCB7IHJhZGl1cyA9IDEuMjcsIHggPSAwLCB5ID0gMCB9ID0gdGhpczsKICAgICAgbGV0IG9jdGFnb24gPSBNYWtlUG9seWdvbig4LCByYWRpdXMgKiAxLjA4MjM5MjIwMDI5MjM5NSwgMC41KS5tYXAocCA9PiBwLmFkZCh4LCB5KS5yb3VuZCgwLjAwMSkpOwogICAgICByZXR1cm4gb2N0YWdvbjsKICAgIH0gZWxzZSBpZihbJ3gnLCAneScsICdyYWRpdXMnXS5ldmVyeShwcm9wID0+IGlzTnVtZXJpYyh0aGlzW3Byb3BdKSkpIHsKICAgICAgcmV0dXJuIENpcmNsZS5iaW5kKHRoaXMsIG51bGwsIGsgPT4gdiA9PiB2ID09PSB1bmRlZmluZWQgPyArdGhpc1trXSA6ICh0aGlzW2tdID0gK3YpKTsKICAgICAgLyogIH0gZWxzZSBpZihbJ2RpYW1ldGVyJywgJ2RyaWxsJ10uZmluZChwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIHJldHVybiBDaXJjbGUuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsqLwogICAgfSBlbHNlIGlmKFsneDEnLCAneTEnLCAneDInLCAneTInXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIGxldCBsaW5lID0gTGluZS5iaW5kKHRoaXMsIG51bGwsIG1ha2VHZXR0ZXJTZXR0ZXIpOwogICAgICB0cmtsLmJpbmQobGluZSwgJ2N1cnZlJywgdGhpcy5oYW5kbGVyc1snY3VydmUnXSk7CiAgICAgIHRya2wuYmluZChsaW5lLCAnd2lkdGgnLCB0aGlzLmhhbmRsZXJzWyd3aWR0aCddKTsKICAgICAgcmV0dXJuIGxpbmU7CiAgICB9IGVsc2UgaWYoWyd4JywgJ3knXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gUG9pbnQodGhpcyk7CiAgICAgIGlmKGtleXMuaW5jbHVkZXMoJ3JhZGl1cycpKSByZXR1cm4gQ2lyY2xlLmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICAgIGlmKFsnd2lkdGgnLCAnaGVpZ2h0J10uZXZlcnkocHJvcCA9PiBrZXlzLmluY2x1ZGVzKHByb3ApKSkgcmV0dXJuIFJlY3QuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgICAgcmV0dXJuIFBvaW50LmJpbmQodGhpcywgWyd4JywgJ3knXSwgbWFrZUdldHRlclNldHRlcik7CiAgICB9CgogICAgaWYoWydwYWNrYWdlJywgJ3N5bWJvbCddLmluZGV4T2YodGhpcy50YWdOYW1lKSA9PSAtMSkgcmV0dXJuOwoKICAgIC8vICAgIGNvbnNvbGUubG9nKCdnZXQgZ2VvbWV0cnknLCB0aGlzLCB0aGlzLmNoaWxkcmVuKTsKCiAgICBpZih0aGlzLnJhdy5jaGlsZHJlbiAmJiB0aGlzLnJhdy5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgbGV0IHJldCA9IG5ldyBNYXAoKTsKICAgICAgbGV0IGVudHJ5ID0gZ2V0T3JDcmVhdGUocmV0LCAoKSA9PiBbXSk7CgogICAgICBmb3IobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICBsZXQgZ2VvbWV0cnkgPSBjaGlsZC5nZW9tZXRyeTsKICAgICAgICBpZihnZW9tZXRyeSAmJiBjaGlsZC5sYXllcikgewogICAgICAgICAgZW50cnkoY2hpbGQubGF5ZXIubmFtZSkucHVzaChnZW9tZXRyeSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IobGV0IFtsYXllciwgZ2VvbWV0cnldIG9mIHJldCkgewogICAgICAgIGlmKGdlb21ldHJ5LmV2ZXJ5KGcgPT4gaXNMaW5lKGcpKSkgcmV0LnNldChsYXllciwgbmV3IExpbmVMaXN0KGdlb21ldHJ5KSk7CiAgICAgIH0KICAgICAgaWYocmV0LnNpemUpIHJldHVybiByZXQ7CiAgICB9CiAgfQoKICBwb3NpdGlvbihvZmZzZXQgPSBudWxsKSB7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5hdHRyaWJ1dGVzKTsKICAgIGNvbnN0IG1ha2VHZXR0ZXJTZXR0ZXIgPSBrID0+IHYgPT4gdiA9PT0gdW5kZWZpbmVkID8gK3RoaXMuaGFuZGxlcnNba10oKSA6IHRoaXMuaGFuZGxlcnNba10oK3YpOwoKICAgIGlmKFsneCcsICd5J10uZXZlcnkocHJvcCA9PiBrZXlzLmluY2x1ZGVzKHByb3ApKSkgewogICAgICBsZXQgcG9zID0gb2Zmc2V0ID8gbmV3IFBvaW50KHRoaXMueCwgdGhpcy55KS5zdW0ob2Zmc2V0KSA6IFBvaW50LmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICAgIHJldHVybiBwb3M7CiAgICB9CiAgfQoKICBzdGF0aWMgaXNSZWxhdGlvbihuYW1lKSB7CiAgICBsZXQgcmVsYXRpb25OYW1lcyA9IFsnY2xhc3MnLCAnZWxlbWVudCcsICdnYXRlJywgJ2xheWVyJywgJ2xpYnJhcnknLCAncGFja2FnZScsICdwYWQnLCAncGFydCcsICdwaW4nLCAnc3ltYm9sJywgJ2RldmljZXNldCcsICdkZXZpY2UnXTsKICAgIHJldHVybiByZWxhdGlvbk5hbWVzLmluZGV4T2YobmFtZSkgIT0gLTE7CiAgfQoKICBzY29wZSh0ID0gKG8sIHAsIHYpID0+IFt2LnRhZ05hbWUsIEVhZ2xlRWxlbWVudC5nZXQobywgcCwgdildLCByID0gZSA9PiBPYmplY3QuZnJvbUVudHJpZXMoZSkpIHsKICAgIHJldHVybiBzdXBlci5zY29wZSh0LCByKTsKICB9CiAgc2NvcGUyKCkgewogICAgbGV0IGVsZW0gPSB0aGlzOwogICAgbGV0IG9iaiA9IHt9LAogICAgICBpID0gMDsKICAgIGRvIHsKICAgICAgaWYoZWxlbS5uYW1lKSB7CiAgICAgICAgb2JqW2VsZW0udGFnTmFtZV0gPSBlbGVtOwogICAgICB9CiAgICB9IHdoaWxlKGVsZW0udGFnTmFtZSAhPSAnZWFnbGUnICYmIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSk7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgZ2V0IGNoYWluKCkgewogICAgbGV0IGNoYWluID0gdGhpcy5zY29wZTIoKTsKICAgIGlmKHRoaXMubmFtZSkgY2hhaW5bdGhpcy50YWdOYW1lXSA9IHRoaXMubmFtZTsKICAgIHJldHVybiBjaGFpbjsKICB9CgogIGdldFBhcmVudCh0YWdOYW1lKSB7CiAgICBsZXQgZSA9IHRoaXM7CiAgICBkbyB7CiAgICAgIGlmKGUudGFnTmFtZSA9PSB0YWdOYW1lKSByZXR1cm4gZTsKICAgIH0gd2hpbGUoKGUgPSBlLnBhcmVudE5vZGUpKTsKICB9CgogIGdldCBzaGVldCgpIHsKICAgIHJldHVybiB0aGlzLmdldFBhcmVudCgnc2hlZXQnKTsKICB9CiAgZ2V0IHNoZWV0TnVtYmVyKCkgewogICAgbGV0IHNoZWV0ID0gdGhpcy5zaGVldDsKICAgIGlmKHNoZWV0KSByZXR1cm4gdGhpcy5nZXRQYXJlbnQoJ3NoZWV0cycpLmNoaWxkcmVuLmluZGV4T2Yoc2hlZXQpOwogIH0KCiAgbmFtZXMoKSB7CiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5zY29wZSgpKS5yZWR1Y2UoCiAgICAgIChhY2MsIGVudHJ5KSA9PiAoewogICAgICAgIC4uLmFjYywKICAgICAgICBbZW50cnlbMF1dOiBlbnRyeVsxXS5hdHRyaWJ1dGVzLm5hbWUKICAgICAgfSksCiAgICAgIHt9CiAgICApOwogIH0KCiAgc3RhdGljIGtleXMoZW50aXR5KSB7CiAgICByZXR1cm4gT2JqZWN0LmtleXMoRWFnbGVFbGVtZW50LnRvT2JqZWN0KGVudGl0eSkpOwogIH0KICBzdGF0aWMgdmFsdWVzKGVudGl0eSkgewogICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoRWFnbGVFbGVtZW50LnRvT2JqZWN0KGVudGl0eSkpOwogIH0KICBzdGF0aWMgZW50cmllcyhlbnRpdHkpIHsKICAgIHJldHVybiBPYmplY3QuZW50cmllcyhFYWdsZUVsZW1lbnQudG9PYmplY3QoZW50aXR5KSk7CiAgfQoKICBzdGF0aWMgdG9PYmplY3QoZSkgewogICAgbGV0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4sIHRleHQgfSA9IGU7CiAgICBsZXQgbyA9IHt9OwogICAgZm9yKGxldCBbbmFtZSwgdmFsdWVdIG9mIGF0dHJpYnV0ZXMpIHsKICAgICAgb1tuYW1lXSA9IHZhbHVlOwogICAgfQoKICAgIGlmKHR5cGVvZiBlID09ICdvYmplY3QnICYmIGUgIT09IG51bGwgJiYgJ3RhZ05hbWUnIGluIGUpIG8gPSB7IHRhZ05hbWUsIC4uLm8gfTsKICAgIGlmKHR5cGVvZiBjaGlsZHJlbiA9PSAnb2JqZWN0JyAmJiBjaGlsZHJlbiAhPT0gbnVsbCAmJiAnbGVuZ3RoJyBpbiBjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgIGxldCBhID0gY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IHR5cGVvZiBjaGlsZCA9PSAnc3RyaW5nJyk7CiAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IHR5cGVvZiBjaGlsZCAhPSAnc3RyaW5nJykubWFwKEVhZ2xlRWxlbWVudC50b09iamVjdCk7CiAgICAgIHRleHQgPSBhLmpvaW4oJ1xuJyk7CiAgICB9CgogICAgaWYodHlwZW9mIHRleHQgPT0gJ3N0cmluZycgJiYgdGV4dC5sZW5ndGggPiAwKQogICAgICBpZignYXR0cmlidXRlcycgaW4gbykgby5hdHRyaWJ1dGVzLnRleHQgPSB0ZXh0OwogICAgICBlbHNlIG8uaW5uZXJIVE1MID0gdGV4dDsKICAgIG8udHlwZSA9IGUubm9kZVR5cGU7CiAgICByZXR1cm4gbzsKICB9CgogIHN0YXRpYyB0b0FycmF5KGUpIHsKICAgIGNvbnN0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4gfSA9IGU7CiAgICByZXR1cm4gW3RhZ05hbWUsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuXTsKICB9CgogIHRvU3RyaW5nKCkgewogICAgaWYodGhpcy50YWdOYW1lID09ICdsYXllcicpIHJldHVybiBgJHt0aGlzLm51bWJlcn0gJHt0aGlzLm5hbWV9YDsKCiAgICByZXR1cm4gc3VwZXIudG9TdHJpbmcoKTsKICB9CgogICpnZXRBbGwocHJlZCwgdHJhbnNmb3JtID0gYSA9PiBhKSB7CiAgICBjb25zdCBjYWxsID0gdHJ5RnVuY3Rpb24oCiAgICAgICh2LCBwLCBvKSA9PiB0eXBlb2YgdiA9PSAnb2JqZWN0JyAmJiB2ICE9PSBudWxsICYmIEVhZ2xlRWxlbWVudC5nZXQobyB8fCB0aGlzLm93bmVyLCBwLCB2KSwKICAgICAgKHIsIHYsIHAsIG8pID0+IHIgJiYgdHJhbnNmb3JtKHIsIHAsIG8pLAogICAgICAoKSA9PiB1bmRlZmluZWQKICAgICk7CgogICAgaWYodHlwZW9mIHByZWQgIT0gJ2Z1bmN0aW9uJykgcHJlZCA9IEVhZ2xlTm9kZS5tYWtlUHJlZGljYXRlKHByZWQpOwogICAgeWllbGQqIHN1cGVyLmdldEFsbCgodiwgcCwgbykgPT4gdHlwZW9mIHYgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCAmJiAndGFnTmFtZScgaW4gdiAmJiBwcmVkKHYsIHAsIG8pLCBjYWxsKTsKICB9CgogIGdldChwcmVkLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGxldCBpdCA9IHRoaXMuZ2V0QWxsKCh2LCBwLCBvKSA9PiAocHJlZCh2LCBwLCBvKSA/IC0xIDogZmFsc2UpLCB0cmFuc2Zvcm0pOwogICAgbGV0IHsgdmFsdWUsIGRvbmUgfSA9IGl0Lm5leHQoKTsKICAgIGNvbnN0IHsgcm9vdCwgcGF0aCwgcmF3IH0gPSB0aGlzOwoKICAgIHJldHVybiB2YWx1ZSB8fCBudWxsOwogIH0KCiAgZmluZChwcmVkLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGNvbnN0IGNhbGwgPSB0cnlGdW5jdGlvbigKICAgICAgKHYsIHAsIG8pID0+IEVhZ2xlRWxlbWVudC5nZXQobyB8fCB0aGlzLm93bmVyLCBwKSwKICAgICAgKHIsIHYsIHAsIG8pID0+IHRyYW5zZm9ybShyLCBwLCBvKSwKICAgICAgKCkgPT4gdW5kZWZpbmVkCiAgICApOwogICAgcmV0dXJuIHN1cGVyLmZpbmQocHJlZCwgY2FsbCk7CiAgfQoKICBzZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHsKICAgIGlmKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJyAmJiAhdmFsdWUpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgZWxzZSB0aGlzLnJhdy5hdHRyaWJ1dGVzW25hbWVdID0gdmFsdWUgKyAnJzsKICB9CgogIHJlbW92ZUF0dHJpYnV0ZShuYW1lKSB7CiAgICBkZWxldGUgdGhpcy5yYXcuYXR0cmlidXRlc1tuYW1lXTsKICB9CgogIGdldCBwb3MoKSB7CiAgICByZXR1cm4gYCgkeyh0aGlzLnggLyAyNS40KS50b0ZpeGVkKDEpfSAkeyh0aGlzLnkgLyAyNS40KS50b0ZpeGVkKDEpfSlgOwogIH0KCiAgLyoKICBzdGF0aWMgY3JlYXRlKG93bmVyLCByZWYsIC4uLmFyZ3MpIHsKICAgIGlmKCdsZW5ndGgnIGluIHJlZikgcmVmID0gb3duZXIucmVmLmNvbmNhdChbLi4ucmVmXSk7CiAgICBpZihhcmdzLmxlbmd0aCA+IDApIHJlZiA9IHJlZi5jb25jYXQoWy4uLmFyZ3NdKTsKICAgIHJldHVybiBFYWdsZUVsZW1lbnQuZ2V0KG93bmVyLCByZWYpOwogIH0qLwoKICBzdGF0aWMgYXR0cmlidXRlTGlzdHMgPSB7CiAgICBhcHByb3ZlZDogWydoYXNoJ10sCiAgICBhdHRyaWJ1dGU6IFsnbmFtZScsICd4JywgJ3knLCAnc2l6ZScsICdsYXllcicsICdyb3QnLCAnYWxpZ24nLCAncmF0aW8nLCAnZm9udCcsICd2YWx1ZScsICdjb25zdGFudCcsICdkaXNwbGF5J10sCiAgICBidXM6IFsnbmFtZSddLAogICAgY2lyY2xlOiBbJ3gnLCAneScsICdyYWRpdXMnLCAnd2lkdGgnLCAnbGF5ZXInXSwKICAgIGNsYXNzOiBbJ251bWJlcicsICduYW1lJywgJ3dpZHRoJywgJ2RyaWxsJ10sCiAgICBjbGVhcmFuY2U6IFsnY2xhc3MnLCAndmFsdWUnXSwKICAgIGNvbm5lY3Q6IFsnZ2F0ZScsICdwaW4nLCAncGFkJywgJ3JvdXRlJ10sCiAgICBjb250YWN0cmVmOiBbJ2VsZW1lbnQnLCAncGFkJywgJ3JvdXRlJywgJ3JvdXRldGFnJ10sCiAgICBkZXNjcmlwdGlvbjogWydsYW5ndWFnZSddLAogICAgZGVzaWducnVsZXM6IFsnbmFtZSddLAogICAgZGV2aWNlOiBbJ25hbWUnLCAncGFja2FnZSddLAogICAgZGV2aWNlc2V0OiBbJ25hbWUnLCAncHJlZml4JywgJ3VzZXJ2YWx1ZSddLAogICAgZGltZW5zaW9uOiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJywgJ3gzJywgJ3kzJywgJ3RleHRzaXplJywgJ2xheWVyJywgJ3Zpc2libGUnLCAnd2lkdGgnLCAnZXh0d2lkdGgnLCAndW5pdCcsICd0ZXh0cmF0aW8nXSwKICAgIGVhZ2xlOiBbJ3ZlcnNpb24nXSwKICAgIGVsZW1lbnQ6IFsnbmFtZScsICdsaWJyYXJ5JywgJ3BhY2thZ2UnLCAndmFsdWUnLCAneCcsICd5JywgJ3JvdCcsICdzbWFzaGVkJ10sCiAgICBmcmFtZTogWyd4MScsICd5MScsICd4MicsICd5MicsICdjb2x1bW5zJywgJ3Jvd3MnLCAnbGF5ZXInXSwKICAgIGdhdGU6IFsnbmFtZScsICdzeW1ib2wnLCAneCcsICd5JywgJ3N3YXBsZXZlbCcsICdhZGRsZXZlbCddLAogICAgZ3JpZDogWydkaXN0YW5jZScsICd1bml0ZGlzdCcsICd1bml0JywgJ3N0eWxlJywgJ211bHRpcGxlJywgJ2Rpc3BsYXknLCAnYWx0ZGlzdGFuY2UnLCAnYWx0dW5pdGRpc3QnLCAnYWx0dW5pdCddLAogICAgaG9sZTogWyd4JywgJ3knLCAnZHJpbGwnXSwKICAgIGluc3RhbmNlOiBbJ3BhcnQnLCAnZ2F0ZScsICd4JywgJ3knLCAncm90JywgJ3NtYXNoZWQnXSwKICAgIGp1bmN0aW9uOiBbJ3gnLCAneSddLAogICAgbGFiZWw6IFsneCcsICd5JywgJ3NpemUnLCAnbGF5ZXInLCAncm90JywgJ3hyZWYnLCAncmF0aW8nLCAnZm9udCddLAogICAgbGF5ZXI6IFsnbnVtYmVyJywgJ25hbWUnLCAnY29sb3InLCAnZmlsbCcsICd2aXNpYmxlJywgJ2FjdGl2ZSddLAogICAgbGlicmFyeTogWyduYW1lJ10sCiAgICBtb2R1bGVpbnN0OiBbJ25hbWUnLCAnbW9kdWxlJywgJ3gnLCAneScsICdyb3QnXSwKICAgIG1vZHVsZTogWyduYW1lJywgJ3ByZWZpeCcsICdkeCcsICdkeSddLAogICAgbmV0OiBbJ25hbWUnLCAnY2xhc3MnXSwKICAgIG5vdGU6IFsndmVyc2lvbicsICdtaW52ZXJzaW9uJywgJ3NldmVyaXR5J10sCiAgICBwYWNrYWdlOiBbJ25hbWUnXSwKICAgIHBhZDogWyduYW1lJywgJ3gnLCAneScsICdkcmlsbCcsICdzaGFwZScsICdkaWFtZXRlcicsICdyb3QnLCAnc3RvcCcsICdmaXJzdCcsICd0aGVybWFscyddLAogICAgcGFyYW06IFsnbmFtZScsICd2YWx1ZSddLAogICAgcGFydDogWyduYW1lJywgJ2xpYnJhcnknLCAnZGV2aWNlc2V0JywgJ2RldmljZScsICd2YWx1ZScsICd0ZWNobm9sb2d5J10sCiAgICBwYXNzOiBbJ25hbWUnLCAncmVmZXInLCAnYWN0aXZlJ10sCiAgICBwaW46IFsnbmFtZScsICd4JywgJ3knLCAndmlzaWJsZScsICdsZW5ndGgnLCAnZGlyZWN0aW9uJywgJ2Z1bmN0aW9uJywgJ3JvdCcsICdzd2FwbGV2ZWwnXSwKICAgIHBpbnJlZjogWydwYXJ0JywgJ2dhdGUnLCAncGluJ10sCiAgICBwb2x5Z29uOiBbJ3dpZHRoJywgJ2xheWVyJywgJ2lzb2xhdGUnLCAnb3JwaGFucycsICd0aGVybWFscyddLAogICAgcG9ydDogWyduYW1lJywgJ3NpZGUnLCAnY29vcmQnLCAnZGlyZWN0aW9uJ10sCiAgICBwb3J0cmVmOiBbJ21vZHVsZWluc3QnLCAncG9ydCddLAogICAgcmVjdGFuZ2xlOiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJywgJ2xheWVyJywgJ3JvdCddLAogICAgc2NoZW1hdGljOiBbJ3hyZWZsYWJlbCcsICd4cmVmcGFydCddLAogICAgc2V0dGluZzogWydhbHdheXN2ZWN0b3Jmb250JywgJ3ZlcnRpY2FsdGV4dCddLAogICAgc2lnbmFsOiBbJ25hbWUnLCAnY2xhc3MnXSwKICAgIHNtZDogWyduYW1lJywgJ3gnLCAneScsICdkeCcsICdkeScsICdsYXllcicsICdyb3QnLCAnc3RvcCcsICdjcmVhbScsICdyb3VuZG5lc3MnXSwKICAgIHN5bWJvbDogWyduYW1lJ10sCiAgICB0ZWNobm9sb2d5OiBbJ25hbWUnXSwKICAgIHRleHQ6IFsneCcsICd5JywgJ3NpemUnLCAnbGF5ZXInLCAncmF0aW8nLCAncm90JywgJ2FsaWduJywgJ2ZvbnQnLCAnZGlzdGFuY2UnXSwKICAgIHZlcnRleDogWyd4JywgJ3knLCAnY3VydmUnXSwKICAgIHZpYTogWyd4JywgJ3knLCAnZXh0ZW50JywgJ2RyaWxsJywgJ3NoYXBlJywgJ2RpYW1ldGVyJ10sCiAgICB3aXJlOiBbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJywgJ3dpZHRoJywgJ2xheWVyJywgJ2N1cnZlJywgJ3N0eWxlJywgJ2NhcCcsICdleHRlbnQnXSwKICAgICc/eG1sJzogWyd2ZXJzaW9uJywgJ2VuY29kaW5nJ10KICB9Owp9CgpPYmplY3QuYXNzaWduKEVhZ2xlRWxlbWVudCwgeyBzdWJzY3JpYmVyczogW10sIHI6IG51bGwsIGNsYXNzOiB1bmRlZmluZWQgfSk7Ck9iamVjdC5hc3NpZ24oRWFnbGVFbGVtZW50LnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0VhZ2xlRWxlbWVudCcgfSk7CgpleHBvcnQgY29uc3QgbWFrZUVhZ2xlRWxlbWVudCA9IChvd25lciwgcmVmLCByYXcpID0+IEVhZ2xlRWxlbWVudC5nZXQob3duZXIsIHJlZiwgcmF3KTsKAAAAAAAAAAD+gQAAAAAAAAAAAAAAAAAAAAAAAP6BAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADNFwAAAAAAAM0XAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/eagle/project.js",
			"settings":
			{
				"buffer_size": 7861,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					22,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAEYPAAAAAAAARw8AAAAAAAAAAAAARw8AAAAAAABIDwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABGDwAAAAAAAEYPAAAAAAAAAAAAAAAAIEA"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "console.log"
					},
					"CwAAAEcPAAAAAAAASA8AAAAAAAAAAAAASA8AAAAAAABJDwAAAAAAAAAAAABJDwAAAAAAAEoPAAAAAAAAAAAAAEoPAAAAAAAASw8AAAAAAAAAAAAASw8AAAAAAABMDwAAAAAAAAAAAABMDwAAAAAAAE0PAAAAAAAAAAAAAE0PAAAAAAAATg8AAAAAAAAAAAAATg8AAAAAAABPDwAAAAAAAAAAAABPDwAAAAAAAFAPAAAAAAAAAAAAAFAPAAAAAAAAUQ8AAAAAAAAAAAAAUQ8AAAAAAABSDwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABHDwAAAAAAAEcPAAAAAAAAAAAAAAAAAAA"
				],
				[
					25,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAFIPAAAAAAAAVA8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABSDwAAAAAAAFIPAAAAAAAAAAAAAAAA8L8"
				],
				[
					26,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAFMPAAAAAAAAVQ8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABTDwAAAAAAAFMPAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "findDop"
					},
					"BwAAAFQPAAAAAAAAVQ8AAAAAAAAAAAAAVQ8AAAAAAABWDwAAAAAAAAAAAABWDwAAAAAAAFcPAAAAAAAAAAAAAFcPAAAAAAAAWA8AAAAAAAAAAAAAWA8AAAAAAABZDwAAAAAAAAAAAABZDwAAAAAAAFoPAAAAAAAAAAAAAFoPAAAAAAAAWw8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABUDwAAAAAAAFQPAAAAAAAAAAAAAAAA8L8"
				],
				[
					28,
					1,
					"left_delete",
					null,
					"AQAAAFoPAAAAAAAAWg8AAAAAAAABAAAAcA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABbDwAAAAAAAFsPAAAAAAAAAAAAAAAA8L8"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": "c"
					},
					"AQAAAFoPAAAAAAAAWw8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABaDwAAAAAAAFoPAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"insert_completion",
					{
						"completion": "findDocument",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "findDocument"
					},
					"AgAAAFQPAAAAAAAAVA8AAAAAAAAHAAAAZmluZERvY1QPAAAAAAAAYA8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABbDwAAAAAAAFsPAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": ",pred"
					},
					"BQAAAGEPAAAAAAAAYg8AAAAAAAAAAAAAYg8AAAAAAABjDwAAAAAAAAAAAABjDwAAAAAAAGQPAAAAAAAAAAAAAGQPAAAAAAAAZQ8AAAAAAAAAAAAAZQ8AAAAAAABmDwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABhDwAAAAAAAGEPAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAGcPAAAAAAAAaA8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABnDwAAAAAAAGcPAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"cut",
					null,
					"AQAAAEcPAAAAAAAARw8AAAAAAAAiAAAAY29uc29sZS5sb2coJ2ZpbmREb2N1bWVudCcscHJlZCk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABHDwAAAAAAAGkPAAAAAAAAAAAAAAAAAAA"
				],
				[
					42,
					1,
					"paste",
					null,
					"AQAAAEYOAAAAAAAAaA4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABGDgAAAAAAAEYOAAAAAAAAAAAAAAAAAAA"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGgOAAAAAAAAaQ4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABoDgAAAAAAAGgOAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "+"
					},
					"AQAAAGUOAAAAAAAAZg4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABlDgAAAAAAAGUOAAAAAAAAAAAAAAAA8L8"
				],
				[
					48,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAGYOAAAAAAAAaA4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABmDgAAAAAAAGYOAAAAAAAAAAAAAAAA8L8"
				],
				[
					77,
					1,
					"paste",
					null,
					"AQAAAJEPAAAAAAAAtg8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRDwAAAAAAAJEPAAAAAAAAAAAAAAAA8L8"
				],
				[
					82,
					1,
					"insert_snippet",
					{
						"contents": "{${0:$SELECTION}}"
					},
					"AgAAAKwPAAAAAAAArA8AAAAAAAAEAAAAcHJlZKwPAAAAAAAAsg8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACsDwAAAAAAALAPAAAAAAAAAAAAAAAA8L8"
				],
				[
					83,
					1,
					"insert",
					{
						"characters": "name"
					},
					"BQAAAK0PAAAAAAAArg8AAAAAAAAAAAAArg8AAAAAAACuDwAAAAAAAAQAAABwcmVkrg8AAAAAAACvDwAAAAAAAAAAAACvDwAAAAAAALAPAAAAAAAAAAAAALAPAAAAAAAAsQ8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtDwAAAAAAALEPAAAAAAAAAAAAAAAA8L8"
				],
				[
					85,
					3,
					"right_delete",
					null,
					"AwAAALIPAAAAAAAAsg8AAAAAAAABAAAAK7IPAAAAAAAAsg8AAAAAAAABAAAAJ7IPAAAAAAAAsg8AAAAAAAABAAAAJw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyDwAAAAAAALIPAAAAAAAAAAAAAAAA8L8"
				],
				[
					109,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAJEPAAAAAAAAkg8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRDwAAAAAAAJEPAAAAAAAAAAAAAAAAAAA"
				],
				[
					124,
					1,
					"insert",
					{
						"characters": "g"
					},
					"AQAAAJIPAAAAAAAAkw8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSDwAAAAAAAJIPAAAAAAAAAAAAAAAAAAA"
				],
				[
					125,
					1,
					"left_delete",
					null,
					"AQAAAJIPAAAAAAAAkg8AAAAAAAABAAAAZw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACTDwAAAAAAAJMPAAAAAAAAAAAAAAAA8L8"
				],
				[
					134,
					1,
					"insert",
					{
						"characters": "\nconsole.log"
					},
					"DAAAALMGAAAAAAAAtAYAAAAAAAAAAAAAtAYAAAAAAAC1BgAAAAAAAAAAAAC1BgAAAAAAALYGAAAAAAAAAAAAALYGAAAAAAAAtwYAAAAAAAAAAAAAtwYAAAAAAAC4BgAAAAAAAAAAAAC4BgAAAAAAALkGAAAAAAAAAAAAALkGAAAAAAAAugYAAAAAAAAAAAAAugYAAAAAAAC7BgAAAAAAAAAAAAC7BgAAAAAAALwGAAAAAAAAAAAAALwGAAAAAAAAvQYAAAAAAAAAAAAAvQYAAAAAAAC+BgAAAAAAAAAAAAC+BgAAAAAAAL8GAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACzBgAAAAAAALMGAAAAAAAAAAAAAAAA8L8"
				],
				[
					135,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAL8GAAAAAAAAwQYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC/BgAAAAAAAL8GAAAAAAAAAAAAAAAA8L8"
				],
				[
					136,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAMAGAAAAAAAAwgYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADABgAAAAAAAMAGAAAAAAAAAAAAAAAA8L8"
				],
				[
					137,
					1,
					"insert",
					{
						"characters": "lazyOpen"
					},
					"CAAAAMEGAAAAAAAAwgYAAAAAAAAAAAAAwgYAAAAAAADDBgAAAAAAAAAAAADDBgAAAAAAAMQGAAAAAAAAAAAAAMQGAAAAAAAAxQYAAAAAAAAAAAAAxQYAAAAAAADGBgAAAAAAAAAAAADGBgAAAAAAAMcGAAAAAAAAAAAAAMcGAAAAAAAAyAYAAAAAAAAAAAAAyAYAAAAAAADJBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADBBgAAAAAAAMEGAAAAAAAAAAAAAAAA8L8"
				],
				[
					139,
					1,
					"insert",
					{
						"characters": ",doc.lib"
					},
					"CAAAAMoGAAAAAAAAywYAAAAAAAAAAAAAywYAAAAAAADMBgAAAAAAAAAAAADMBgAAAAAAAM0GAAAAAAAAAAAAAM0GAAAAAAAAzgYAAAAAAAAAAAAAzgYAAAAAAADPBgAAAAAAAAAAAADPBgAAAAAAANAGAAAAAAAAAAAAANAGAAAAAAAA0QYAAAAAAAAAAAAA0QYAAAAAAADSBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADKBgAAAAAAAMoGAAAAAAAAAAAAAAAA8L8"
				],
				[
					140,
					1,
					"insert_completion",
					{
						"completion": "libraries",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "libraries"
					},
					"AgAAAM8GAAAAAAAAzwYAAAAAAAADAAAAbGlizwYAAAAAAADYBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADSBgAAAAAAANIGAAAAAAAAAAAAAAAA8L8"
				],
				[
					142,
					1,
					"insert",
					{
						"characters": "M"
					},
					"AQAAANkGAAAAAAAA2gYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADZBgAAAAAAANkGAAAAAAAAAAAAAAAA8L8"
				],
				[
					143,
					1,
					"left_delete",
					null,
					"AQAAANkGAAAAAAAA2QYAAAAAAAABAAAATQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaBgAAAAAAANoGAAAAAAAAAAAAAAAA8L8"
				],
				[
					144,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAANkGAAAAAAAA2gYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADZBgAAAAAAANkGAAAAAAAAAAAAAAAA8L8"
				],
				[
					148,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAMsGAAAAAAAAzAYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADLBgAAAAAAAMsGAAAAAAAAAAAAAAAA8L8"
				],
				[
					154,
					1,
					"insert",
					{
						"characters": "console.config"
					},
					"DgAAAMsGAAAAAAAAzAYAAAAAAAAAAAAAzAYAAAAAAADNBgAAAAAAAAAAAADNBgAAAAAAAM4GAAAAAAAAAAAAAM4GAAAAAAAAzwYAAAAAAAAAAAAAzwYAAAAAAADQBgAAAAAAAAAAAADQBgAAAAAAANEGAAAAAAAAAAAAANEGAAAAAAAA0gYAAAAAAAAAAAAA0gYAAAAAAADTBgAAAAAAAAAAAADTBgAAAAAAANQGAAAAAAAAAAAAANQGAAAAAAAA1QYAAAAAAAAAAAAA1QYAAAAAAADWBgAAAAAAAAAAAADWBgAAAAAAANcGAAAAAAAAAAAAANcGAAAAAAAA2AYAAAAAAAAAAAAA2AYAAAAAAADZBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADLBgAAAAAAAMsGAAAAAAAAAAAAAAAA8L8"
				],
				[
					155,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAANkGAAAAAAAA2wYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADZBgAAAAAAANkGAAAAAAAAAAAAAAAA8L8"
				],
				[
					156,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAANoGAAAAAAAA3AYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaBgAAAAAAANoGAAAAAAAAAAAAAAAA8L8"
				],
				[
					157,
					1,
					"insert",
					{
						"characters": "ins"
					},
					"AwAAANsGAAAAAAAA3AYAAAAAAAAAAAAA3AYAAAAAAADdBgAAAAAAAAAAAADdBgAAAAAAAN4GAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbBgAAAAAAANsGAAAAAAAAAAAAAAAA8L8"
				],
				[
					158,
					3,
					"left_delete",
					null,
					"AwAAAN0GAAAAAAAA3QYAAAAAAAABAAAAc9wGAAAAAAAA3AYAAAAAAAABAAAAbtsGAAAAAAAA2wYAAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADeBgAAAAAAAN4GAAAAAAAAAAAAAAAA8L8"
				],
				[
					159,
					1,
					"insert",
					{
						"characters": "customIs"
					},
					"CAAAANsGAAAAAAAA3AYAAAAAAAAAAAAA3AYAAAAAAADdBgAAAAAAAAAAAADdBgAAAAAAAN4GAAAAAAAAAAAAAN4GAAAAAAAA3wYAAAAAAAAAAAAA3wYAAAAAAADgBgAAAAAAAAAAAADgBgAAAAAAAOEGAAAAAAAAAAAAAOEGAAAAAAAA4gYAAAAAAAAAAAAA4gYAAAAAAADjBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbBgAAAAAAANsGAAAAAAAAAAAAAAAA8L8"
				],
				[
					160,
					1,
					"left_delete",
					null,
					"AQAAAOIGAAAAAAAA4gYAAAAAAAABAAAAcw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADjBgAAAAAAAOMGAAAAAAAAAAAAAAAA8L8"
				],
				[
					161,
					1,
					"insert",
					{
						"characters": "nspect"
					},
					"BgAAAOIGAAAAAAAA4wYAAAAAAAAAAAAA4wYAAAAAAADkBgAAAAAAAAAAAADkBgAAAAAAAOUGAAAAAAAAAAAAAOUGAAAAAAAA5gYAAAAAAAAAAAAA5gYAAAAAAADnBgAAAAAAAAAAAADnBgAAAAAAAOgGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiBgAAAAAAAOIGAAAAAAAAAAAAAAAA8L8"
				],
				[
					162,
					13,
					"left_delete",
					null,
					"DQAAAOcGAAAAAAAA5wYAAAAAAAABAAAAdOYGAAAAAAAA5gYAAAAAAAABAAAAY+UGAAAAAAAA5QYAAAAAAAABAAAAZeQGAAAAAAAA5AYAAAAAAAABAAAAcOMGAAAAAAAA4wYAAAAAAAABAAAAc+IGAAAAAAAA4gYAAAAAAAABAAAAbuEGAAAAAAAA4QYAAAAAAAABAAAASeAGAAAAAAAA4AYAAAAAAAABAAAAbd8GAAAAAAAA3wYAAAAAAAABAAAAb94GAAAAAAAA3gYAAAAAAAABAAAAdN0GAAAAAAAA3QYAAAAAAAABAAAAc9wGAAAAAAAA3AYAAAAAAAABAAAAddsGAAAAAAAA2wYAAAAAAAABAAAAYw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADoBgAAAAAAAOgGAAAAAAAAAAAAAAAA8L8"
				],
				[
					163,
					1,
					"insert",
					{
						"characters": "customInspace"
					},
					"DQAAANsGAAAAAAAA3AYAAAAAAAAAAAAA3AYAAAAAAADdBgAAAAAAAAAAAADdBgAAAAAAAN4GAAAAAAAAAAAAAN4GAAAAAAAA3wYAAAAAAAAAAAAA3wYAAAAAAADgBgAAAAAAAAAAAADgBgAAAAAAAOEGAAAAAAAAAAAAAOEGAAAAAAAA4gYAAAAAAAAAAAAA4gYAAAAAAADjBgAAAAAAAAAAAADjBgAAAAAAAOQGAAAAAAAAAAAAAOQGAAAAAAAA5QYAAAAAAAAAAAAA5QYAAAAAAADmBgAAAAAAAAAAAADmBgAAAAAAAOcGAAAAAAAAAAAAAOcGAAAAAAAA6AYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbBgAAAAAAANsGAAAAAAAAAAAAAAAA8L8"
				],
				[
					164,
					3,
					"left_delete",
					null,
					"AwAAAOcGAAAAAAAA5wYAAAAAAAABAAAAZeYGAAAAAAAA5gYAAAAAAAABAAAAY+UGAAAAAAAA5QYAAAAAAAABAAAAYQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADoBgAAAAAAAOgGAAAAAAAAAAAAAAAA8L8"
				],
				[
					165,
					1,
					"insert",
					{
						"characters": "ect:false"
					},
					"CQAAAOUGAAAAAAAA5gYAAAAAAAAAAAAA5gYAAAAAAADnBgAAAAAAAAAAAADnBgAAAAAAAOgGAAAAAAAAAAAAAOgGAAAAAAAA6QYAAAAAAAAAAAAA6QYAAAAAAADqBgAAAAAAAAAAAADqBgAAAAAAAOsGAAAAAAAAAAAAAOsGAAAAAAAA7AYAAAAAAAAAAAAA7AYAAAAAAADtBgAAAAAAAAAAAADtBgAAAAAAAO4GAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlBgAAAAAAAOUGAAAAAAAAAAAAAAAA8L8"
				],
				[
					169,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAPAGAAAAAAAA8QYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwBgAAAAAAAPAGAAAAAAAAAAAAAAAA8L8"
				],
				[
					200,
					1,
					"paste",
					null,
					"AgAAAPIGAAAAAAAAAAcAAAAAAAAAAAAAAAcAAAAAAAAABwAAAAAAAA0AAABkb2MubGlicmFyaWVz",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyBgAAAAAAAP8GAAAAAAAAAAAAAAAA8L8"
				],
				[
					201,
					1,
					"insert",
					{
						"characters": ".lis"
					},
					"BAAAAAAHAAAAAAAAAQcAAAAAAAAAAAAAAQcAAAAAAAACBwAAAAAAAAAAAAACBwAAAAAAAAMHAAAAAAAAAAAAAAMHAAAAAAAABAcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAABwAAAAAAAAAHAAAAAAAAAAAAAAAA8L8"
				],
				[
					202,
					1,
					"insert",
					{
						"characters": " t"
					},
					"AgAAAAQHAAAAAAAABQcAAAAAAAAAAAAABQcAAAAAAAAGBwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEBwAAAAAAAAQHAAAAAAAAAAAAAAAA8L8"
				],
				[
					203,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAAYHAAAAAAAACAcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGBwAAAAAAAAYHAAAAAAAAAAAAAAAA8L8"
				],
				[
					205,
					1,
					"left_delete",
					null,
					"AQAAAAcHAAAAAAAABwcAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIBwAAAAAAAAgHAAAAAAAAAAAAAAAA8L8"
				],
				[
					206,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAAYHAAAAAAAABgcAAAAAAAABAAAAKAYHAAAAAAAABgcAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAHBwAAAAAAAAcHAAAAAAAAAAAAAAAA8L8"
				],
				[
					207,
					2,
					"left_delete",
					null,
					"AgAAAAUHAAAAAAAABQcAAAAAAAABAAAAdAQHAAAAAAAABAcAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGBwAAAAAAAAYHAAAAAAAAAAAAAAAA8L8"
				],
				[
					208,
					1,
					"insert",
					{
						"characters": "t))"
					},
					"AwAAAAQHAAAAAAAABQcAAAAAAAAAAAAABQcAAAAAAAAGBwAAAAAAAAAAAAAGBwAAAAAAAAcHAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEBwAAAAAAAAQHAAAAAAAAAAAAAAAA8L8"
				],
				[
					216,
					1,
					"left_delete",
					null,
					"AQAAAAUHAAAAAAAABQcAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGBwAAAAAAAAYHAAAAAAAAAAAAAAAA8L8"
				],
				[
					218,
					1,
					"left_delete",
					null,
					"AQAAAPIGAAAAAAAA8gYAAAAAAAABAAAAKA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzBgAAAAAAAPMGAAAAAAAAAAAAAAAA8L8"
				],
				[
					236,
					1,
					"transpose",
					null,
					"AgAAAAQHAAAAAAAABQcAAAAAAAABAAAAKQMHAAAAAAAABAcAAAAAAAABAAAAdA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEBwAAAAAAAAQHAAAAAAAAAAAAAAAA8L8"
				],
				[
					241,
					2,
					"left_delete",
					null,
					"AgAAAAQHAAAAAAAABAcAAAAAAAABAAAAdAMHAAAAAAAAAwcAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFBwAAAAAAAAUHAAAAAAAAAAAAAAAA8L8"
				],
				[
					242,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAAAMHAAAAAAAABAcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAADBwAAAAAAAAMHAAAAAAAAAAAAAAAA8L8"
				],
				[
					243,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAAQHAAAAAAAABgcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEBwAAAAAAAAQHAAAAAAAAAAAAAAAA8L8"
				],
				[
					244,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAAQHAAAAAAAABAcAAAAAAAABAAAAKAQHAAAAAAAABAcAAAAAAAABAAAAKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFBwAAAAAAAAUHAAAAAAAAAAAAAAAA8L8"
				],
				[
					245,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAAQHAAAAAAAABQcAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEBwAAAAAAAAQHAAAAAAAAAAAAAAAA8L8"
				],
				[
					247,
					1,
					"insert",
					{
						"characters": "[,."
					},
					"AwAAAPIGAAAAAAAA8wYAAAAAAAAAAAAA8wYAAAAAAAD0BgAAAAAAAAAAAAD0BgAAAAAAAPUGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyBgAAAAAAAPIGAAAAAAAAAAAAAAAA8L8"
				],
				[
					248,
					2,
					"left_delete",
					null,
					"AgAAAPQGAAAAAAAA9AYAAAAAAAABAAAALvMGAAAAAAAA8wYAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD1BgAAAAAAAPUGAAAAAAAAAAAAAAAA8L8"
				],
				[
					249,
					1,
					"insert",
					{
						"characters": "..."
					},
					"AwAAAPMGAAAAAAAA9AYAAAAAAAAAAAAA9AYAAAAAAAD1BgAAAAAAAAAAAAD1BgAAAAAAAPYGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzBgAAAAAAAPMGAAAAAAAAAAAAAAAA8L8"
				],
				[
					252,
					1,
					"insert",
					{
						"characters": " ]"
					},
					"AgAAAAgHAAAAAAAACQcAAAAAAAAAAAAACQcAAAAAAAAKBwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIBwAAAAAAAAgHAAAAAAAAAAAAAAAA8L8"
				],
				[
					263,
					1,
					"paste",
					null,
					"AgAAADkHAAAAAAAAUQcAAAAAAAAAAAAAUQcAAAAAAABRBwAAAAAAABIAAABkb2MubGlicmFyaWVzLmxpc3Q",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA5BwAAAAAAAEsHAAAAAAAAAAAAAAAA8L8"
				],
				[
					296,
					1,
					"insert",
					{
						"characters": "&&"
					},
					"AgAAALQGAAAAAAAAtQYAAAAAAAAAAAAAtQYAAAAAAAC2BgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC0BgAAAAAAALQGAAAAAAAAAAAAAAAAAAA"
				],
				[
					297,
					2,
					"left_delete",
					null,
					"AgAAALUGAAAAAAAAtQYAAAAAAAABAAAAJrQGAAAAAAAAtAYAAAAAAAABAAAAJg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC2BgAAAAAAALYGAAAAAAAAAAAAAAAA8L8"
				],
				[
					298,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAALQGAAAAAAAAtQYAAAAAAAAAAAAAtQYAAAAAAAC2BgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC0BgAAAAAAALQGAAAAAAAAAAAAAAAA8L8"
				],
				[
					318,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD6HgAAaW1wb3J0IHsgZGVmaW5lLCBsYXp5UHJvcGVydHksIHRyeUNhdGNoLCB1bmlxdWUgfSBmcm9tICcuLi9taXNjLmpzJzsKaW1wb3J0IHsgRWFnbGVEb2N1bWVudCB9IGZyb20gJy4vZG9jdW1lbnQuanMnOwppbXBvcnQgeyBFYWdsZUVsZW1lbnQgfSBmcm9tICcuL2VsZW1lbnQuanMnOwppbXBvcnQgeyBFYWdsZU5vZGVNYXAgfSBmcm9tICcuL25vZGVNYXAuanMnOwppbXBvcnQgeyBkdW1wIH0gZnJvbSAnLi9jb21tb24uanMnOwppbXBvcnQgcGF0aCBmcm9tICcuLi9wYXRoLmpzJzsKaW1wb3J0ICogYXMgZnMgZnJvbSAnLi4vZmlsZXN5c3RlbS5qcyc7CgpleHBvcnQgY2xhc3MgRWFnbGVQcm9qZWN0IHsKICBjb25zdHJ1Y3RvcihmaWxlLCBmcykgewogICAgZnMgPSBmcyB8fCB0aGlzLmZzIHx8IGdsb2JhbFRoaXMuZnM7CgogICAgdGhpcy5maWxlbmFtZXMgPSBbXTsKCiAgICBkZWZpbmUodGhpcywgewogICAgICBmaWxlLAoKICAgICAgZG9jdW1lbnRzOiB7fSwKICAgICAgbGlzdDogW10sCiAgICAgIGRhdGE6IHsgc2NoOiBudWxsLCBicmQ6IG51bGwsIGxicjoge30gfSwKICAgICAgZnMKICAgIH0pOwoKICAgIGNvbnN0IGxvYWRGaWxlID0gZmlsZSA9PiB7CiAgICAgIGlmKHR5cGVvZiBmaWxlID09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYoL1wuKGJyZHxzY2gpJC8udGVzdChmaWxlKSB8fCAhL1wubGJyJC8udGVzdChmaWxlKSkgdGhpcy5iYXNlbmFtZSA9IGZpbGUucmVwbGFjZSgvXC4oYnJkfHNjaHxsYnIpJC9pLCAnJyk7CiAgICAgIH0KCiAgICAgIGxldCBkaXIgPSBwYXRoLmRpcm5hbWUoZmlsZSk7CiAgICAgIGxldCBsaWJyYXJ5UGF0aCA9IFtkaXJdOwogICAgICBkaXIgPSBwYXRoLmpvaW4oZGlyLCAnbGJyJyk7CiAgICAgIGlmKGZzLmV4aXN0c1N5bmMoZGlyKSkgbGlicmFyeVBhdGgucHVzaChkaXIpOwogICAgICB0aGlzLmxpYnJhcnlQYXRoID0gbGlicmFyeVBhdGg7CgogICAgICBpZihmcy5leGlzdHNTeW5jKGZpbGUpKSB0aGlzLmxhenlPcGVuKGZpbGUpOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH07CgogICAgdGhpcy5lYWdsZVBhdGggPSBFYWdsZVByb2plY3QuZGV0ZXJtaW5lRWFnbGVQYXRoKGZzKTsKCiAgICBpZihmaWxlKSB7CiAgICAgIGlmKEFycmF5LmlzQXJyYXkoZmlsZSkpIGZpbGUuZm9yRWFjaChsb2FkRmlsZSk7CiAgICAgIGVsc2UgbG9hZEZpbGUoZmlsZSk7CiAgICAgIGlmKCF0aGlzLmZhaWxlZCkgY29uc29sZS5sb2coJ09wZW5lZCBwcm9qZWN0OicsIHRoaXMuYmFzZW5hbWUsIHRoaXMuZWFnbGVQYXRoKTsKICAgIH0KICB9CgogIGxvYWQobmFtZSA9IHRoaXMuYmFzZW5hbWUpIHsKICAgIHRoaXMuYmFzZW5hbWUgPSBuYW1lOwogICAgdGhpcy5sYXp5T3Blbih0aGlzLmJhc2VuYW1lICsgJy5zY2gnKTsKICAgIHRoaXMubGF6eU9wZW4odGhpcy5iYXNlbmFtZSArICcuYnJkJyk7CgogICAgcmV0dXJuICF0aGlzLmZhaWxlZDsKICB9CgogIGxhenlPcGVuKGZpbGUpIHsKICAgIGxldCBpbmRleCA9IHRoaXMuZmlsZW5hbWVzLmxlbmd0aDsKICAgIHRoaXMuZmlsZW5hbWVzLnB1c2goZmlsZSk7CiAgICBsYXp5UHJvcGVydHkoCiAgICAgIHRoaXMuZG9jdW1lbnRzLAogICAgICBwYXRoLmJhc2VuYW1lKGZpbGUpLAogICAgICAoKSA9PiB7CiAgICAgICAgbGV0IGRvYyA9IEVhZ2xlRG9jdW1lbnQub3BlbihmaWxlLCB0aGlzLmZzKTsKICAgICAgICB0aGlzLmxpc3RbaW5kZXhdID0gZG9jOwoKLy9jb25zb2xlLmxvZygnbGF6eU9wZW4nLGNvbnNvbGUuY29uZmlnKHtjdXN0b21JbnNwZWN0OmZhbHNlfSksIFsuLi5kb2MubGlicmFyaWVzLmxpc3QgXSk7CiAgICAgICAgaWYoZG9jLmxpYnJhcmllcykgdGhpcy5hZGRMaWJyYXJpZXMoWy4uLmRvYy5saWJyYXJpZXMubGlzdCBdLm1hcChsID0+IGwubmFtZSkpOwoKICAgICAgICByZXR1cm4gZG9jOwogICAgICB9LAogICAgICB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9CiAgICApOwogIH0KCiAgY2xvc2UoZmlsZSkgewogICAgbGV0IGluZGV4OwoKICAgIGlmKChpbmRleCA9IHRoaXMuZmlsZW5hbWVzLmluZGV4T2YoZmlsZSkpICE9IC0xKSB7CiAgICAgIFtpbmRleF0gPSB0aGlzLmZpbGVuYW1lcy5zcGxpY2UoaW5kZXgsIDEpOwoKICAgICAgZGVsZXRlIHRoaXMuZG9jdW1lbnRzW3BhdGguYmFzZW5hbWUoZmlsZSldOwogICAgfQogICAgcmV0dXJuIGluZGV4OwogIH0KCiAgY2xvc2VBbGwoKSB7CiAgICB3aGlsZSh0aGlzLmZpbGVuYW1lcy5sZW5ndGggPiAwKSB0aGlzLmNsb3NlKHRoaXMuZmlsZW5hbWVzWzBdKTsKICB9CgogIGFkZExpYnJhcmllcyhsaWJzKSB7CiAgICBmb3IobGV0IGxpYiBvZiBsaWJzKSB7CiAgICAgIGxldCBmaWxlID0gdGhpcy5maW5kTGlicmFyeShsaWIpOwogICAgICBpZihmaWxlICYmIHRoaXMuZmlsZW5hbWVzLmluZGV4T2YoZmlsZSkgPT0gLTEpIHRoaXMubGF6eU9wZW4oZmlsZSk7CiAgICB9CiAgfQoKICAvKiogQGJyaWVmICBPcGVucyBhIG93bmVyRG9jdW1lbnQKICAgKgogICAqIEBwYXJhbSAgICAgIHtzdHJpbmd9ICAgICAgICAgYmFzZW5hbWUgIERvY3VtZW50IGJhc2VuYW1lCiAgICogQHJldHVybiAgICAge0VhZ2xlRG9jdW1lbnR9ICBUaGUgZWFnbGUgb3duZXJEb2N1bWVudC4KICAgKi8KICBvcGVuKGZpbGUpIHsKICAgIGxldCBkb2MsIGVycjsKCiAgICB0cnlDYXRjaCgpOwoKICAgIHRyeSB7CiAgICAgIGRvYyA9IEVhZ2xlRG9jdW1lbnQub3BlbihmaWxlLCB0aGlzLmZzKTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgZXJyID0gZXJyb3I7CiAgICAgIGNvbnNvbGUubG9nKCdFUlJPUjonLCBlcnIpOwogICAgfQogICAgaWYoZG9jKSB7CiAgICAgIGNvbnNvbGUubG9nKCdPcGVuZWQgZG9jdW1lbnQnLCBmaWxlKTsKICAgICAgdGhpcy5maWxlbmFtZXMucHVzaChmaWxlKTsKICAgICAgdGhpcy5saXN0W3BhdGguYmFzZW5hbWUoZmlsZSldID0gZG9jOwogICAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgRWFnbGVQcm9qZWN0OiBlcnJvciBvcGVuaW5nICcke2ZpbGV9JzogJHtlcnJ9YCk7CiAgICBpZihkb2MudHlwZSA9PSAnbGJyJykgewogICAgICB0aGlzLmRhdGFbZG9jLnR5cGVdW2RvYy5iYXNlbmFtZV0gPSBkb2M7CiAgICAgIGNvbnNvbGUubG9nKCdPcGVuZWQgbGlicmFyeTonLCBkb2MuYmFzZW5hbWUpOwogICAgfSBlbHNlIHRoaXMuZGF0YVtkb2MudHlwZV0gPSBkb2M7CiAgICB0aGlzLmZhaWxlZCA9ICFkb2M7CiAgICByZXR1cm4gZG9jOwogIH0KCiAgc3RhdGljIGRldGVybWluZUVhZ2xlUGF0aChmcykgewogICAgbGV0IGVudlZhcjsKICAgIGlmKCFlbnZWYXIpCiAgICAgIHRyeSB7CiAgICAgICAgZW52VmFyID0gcHJvY2Vzcy5lbnZbJ1BBVEgnXTsKICAgICAgfSBjYXRjaChlKSB7fQogICAgbGV0IHNlYXJjaFBhdGggPSBlbnZWYXIuc3BsaXQoLzovZyk7CiAgICBsZXQgYmluOwogICAgZm9yKGxldCBkaXIgb2Ygc2VhcmNoUGF0aCkgewogICAgICBiaW4gPSBkaXIgKyAnL2VhZ2xlJzsKICAgICAgaWYoIWZzLmV4aXN0c1N5bmMoYmluKSkgY29udGludWU7CiAgICAgIGlmKCEvKGVhZ2xlKS9pLnRlc3QoZGlyKSkgewogICAgICAgIGJpbiA9IGZzLnJlYWxwYXRoU3luYyhiaW4pOwogICAgICAgIGRpciA9IGJpbi5yZXBsYWNlKC9cL1teXC9dKyQvLCAnJyk7CiAgICAgIH0KICAgICAgZGlyID0gZGlyLnJlcGxhY2UoL1tcXFwvXWJpbiQvaSwgJycpOwoKICAgICAgcmV0dXJuIGRpcjsKICAgIH0KICB9CgogIGZpbmREb2N1bWVudChwcmVkKSB7CmNvbnNvbGUubG9nKCdmaW5kRG9jdW1lbnQnLHByZWQrJycpOwoKICAgIGlmKHR5cGVvZiBwcmVkID09ICdzdHJpbmcnKSB7CiAgICAgIGxldCBuYW1lID0gcHJlZDsKICAgICAgaWYobmFtZS5pbmRleE9mKCcvJykgPT0gLTEpIG5hbWUgPSAnKF58LyknICsgbmFtZTsKCiAgICAgIGxldCByZSA9IG5ldyBSZWdFeHAobmFtZSArICckJyk7CiAgICAgIHByZWQgPSBuYW1lID0+IHJlLnRlc3QobmFtZSk7CiAgICB9CiAgICBsZXQgbmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLmRvY3VtZW50cyk7CgoKICAgIGNvbnN0IG5hbWUgPSBuYW1lcy5maW5kKHByZWQpOwoKY29uc29sZS5sb2coJ2ZpbmREb2N1bWVudCcse25hbWV9KTsKCiAgICByZXR1cm4gdGhpcy5kb2N1bWVudHNbbmFtZV07CiAgfQoKICBnZXRMaWJyYXJ5KG5hbWUpIHsKICAgIHJldHVybiB0aGlzLmZpbmREb2N1bWVudChuYW1lICsgJy5sYnInKTsKICB9CgogIGdldCBzY2hlbWF0aWMoKSB7CiAgICByZXR1cm4gdGhpcy5maW5kRG9jdW1lbnQobmFtZSA9PiAvXC5zY2gkL2kudGVzdChuYW1lKSk7CiAgfQogIGdldCBib2FyZCgpIHsKICAgIHJldHVybiB0aGlzLmZpbmREb2N1bWVudChuYW1lID0+IC9cLmJyZCQvaS50ZXN0KG5hbWUpKTsKICB9CiAgZ2V0IGxpYnJhcmllcygpIHsKICAgIHJldHVybiB0aGlzLmxpc3QuZmlsdGVyKGRvYyA9PiBkb2MudHlwZSA9PSAnbGJyJyk7CiAgfQogIGdldCByb290KCkgewogICAgbGV0IGNoaWxkcmVuID0gdGhpcy5saXN0OwogICAgcmV0dXJuIHsgY2hpbGRyZW4gfTsKICB9CiAgZ2V0IGNoaWxkcmVuKCkgewogICAgbGV0IGNoaWxkcmVuID0gdGhpcy5saXN0OwogICAgcmV0dXJuIGNoaWxkcmVuOwogIH0KCiAgKml0ZXJhdG9yKHQgPSAoW3YsIGwsIGRdKSA9PiBbdHlwZW9mIHYgPT0gJ29iamVjdCcgPyBFYWdsZUVsZW1lbnQuZ2V0KGQsIGwsIHYpIDogdiwgbCwgZF0pIHsKICAgIGNvbnN0IHByb2plY3QgPSB0aGlzOwogICAgZm9yKGxldCBkb2Mgb2YgdGhpcy5saXN0KSB7CiAgICAgIGxldCBwcmVmaXggPSBFYWdsZVByb2plY3QuZG9jdW1lbnRLZXkoZG9jKTsKICAgICAgeWllbGQqIGRvYy5pdGVyYXRvcih0KTsKICAgIH0KICB9CgogIHN0YXRpYyBkb2N1bWVudExvY2F0aW9uKGQpIHsKICAgIHJldHVybiBkLnR5cGUgPT0gJ2xicicgPyBbJ2xicicsIGQuYmFzZW5hbWVdIDogW2QudHlwZV07CiAgfQoKICBzdGF0aWMgZG9jdW1lbnRLZXkoZCkgewogICAgc3dpdGNoIChkLnR5cGUpIHsKICAgICAgY2FzZSAnc2NoJzoKICAgICAgICByZXR1cm4gWydzY2hlbWF0aWMnXTsKICAgICAgY2FzZSAnYnJkJzoKICAgICAgICByZXR1cm4gWydib2FyZCddOwogICAgICBjYXNlICdsYnInOgogICAgICAgIHJldHVybiBbJ2xpYnJhcnknLCBkLmJhc2VuYW1lXTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZ2V0RG9jdW1lbnREaXJlY3RvcmllcygpIHsKICAgIHJldHVybiB1bmlxdWUodGhpcy5maWxlbmFtZXMubWFwKGZpbGUgPT4gcGF0aC5kaXJuYW1lKGZpbGUpKSk7CiAgfQoKICBnZXRMaWJyYXJ5UGF0aCgpIHsKICAgIGxldCBkb2NEaXJzID0gdGhpcy5nZXREb2N1bWVudERpcmVjdG9yaWVzKCk7CiAgICBsZXQgcGF0aCA9IFsuLi5kb2NEaXJzLCAuLi5kb2NEaXJzLm1hcChkaXIgPT4gYCR7ZGlyfS9sYnJgKV07CiAgICBpZih0aGlzLmVhZ2xlUGF0aCkgcGF0aC5wdXNoKHRoaXMuZWFnbGVQYXRoICsgJy9sYnInKTsKICAgIHJldHVybiBwYXRoOwogIH0KCiAgZ2V0TGlicmFyeU5hbWVzKCkgewogICAgbGV0IGxpYnJhcnlOYW1lcyA9IFtdOwoKICAgIHRyeUNhdGNoKAogICAgICAoKSA9PiB0aGlzLnNjaGVtYXRpYy5saWJyYXJpZXMua2V5cygpLAogICAgICBuYW1lcyA9PiAobGlicmFyeU5hbWVzID0gbGlicmFyeU5hbWVzLmNvbmNhdChuYW1lcykpCiAgICApOwogICAgdHJ5Q2F0Y2goCiAgICAgICgpID0+IHRoaXMuYm9hcmQubGlicmFyaWVzLmtleXMoKSwKICAgICAgbmFtZXMgPT4gKGxpYnJhcnlOYW1lcyA9IGxpYnJhcnlOYW1lcy5jb25jYXQobmFtZXMpKQogICAgKTsKCiAgICByZXR1cm4gdW5pcXVlKGxpYnJhcnlOYW1lcyk7CiAgfQoKICBmaW5kTGlicmFyeShuYW1lLCBkaXJzID0gdGhpcy5saWJyYXJ5UGF0aCkgewogICAgZGlycyA/Pz0gdGhpcy5nZXRMaWJyYXJ5UGF0aCgpOwoKICAgIGZvcihsZXQgZGlyIG9mIGRpcnMpIHsKICAgICAgY29uc3QgZmlsZSA9IGAke2Rpcn0vJHtuYW1lfS5sYnJgOwogICAgICBpZih0aGlzLmZzLmV4aXN0c1N5bmMoZmlsZSkpIHJldHVybiBmaWxlOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICB1cGRhdGVMaWJyYXJ5KG5hbWUpIHsKICAgIGNvbnN0IGwgPSB0aGlzLmxpYnJhcnk7CgogICAgY29uc3QgeyBzY2hlbWF0aWMsIGJvYXJkIH0gPSB0aGlzOwoKICAgIGxldCBsaWJyYXJpZXMgPSB7CiAgICAgIGZpbGU6IHRoaXMuZ2V0TGlicmFyeShuYW1lKSwKICAgICAgc2NoZW1hdGljOiBzY2hlbWF0aWMuZ2V0TGlicmFyeShuYW1lKSwKICAgICAgYm9hcmQ6IGJvYXJkLmdldExpYnJhcnkobmFtZSkKICAgIH07CgogICAgZm9yKGxldCBkZXN0RG9jIG9mIFsnc2NoZW1hdGljJywgJ2JvYXJkJ10pIHsKICAgICAgY29uc3QgbGliUHJvcHMgPSBsaWIgPT4gbGliOwoKICAgICAgY29uc3QgZGVzdExpYiA9IGxpYlByb3BzKGxpYnJhcmllc1tkZXN0RG9jXSk7CiAgICAgIGNvbnN0IHNyY0xpYiA9IGxpYlByb3BzKGxpYnJhcmllcy5maWxlKTsKCiAgICAgIGZvcihsZXQgZW50aXR5IG9mIFsncGFja2FnZXMnLCAnc3ltYm9scycsICdkZXZpY2VzZXRzJ10pIHsKICAgICAgICBpZighKGVudGl0eSBpbiBkZXN0TGliKSkgY29udGludWU7CiAgICAgICAgaWYoIShkZXN0TGliW2VudGl0eV0gaW5zdGFuY2VvZiBFYWdsZU5vZGVNYXApKSBjb250aW51ZTsKCiAgICAgICAgY29uc3QgZHN0TWFwID0gZGVzdExpYltlbnRpdHldOwogICAgICAgIGxldCBlbnQgPSBzcmNMaWJbZW50aXR5XS5lbnRyaWVzKCk7CiAgICAgICAgbGV0IG0gPSBuZXcgTWFwKGVudCk7CgogICAgICAgIGxldCBudW1VcGRhdGVkID0gMDsKICAgICAgICBmb3IobGV0IHZhbHVlIG9mIHNyY0xpYltlbnRpdHldLnZhbHVlcygpKSB7CiAgICAgICAgICBjb25zdCBrZXkgPSB2YWx1ZS5uYW1lOwoKICAgICAgICAgIGRzdE1hcC5zZXQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICBudW1VcGRhdGVkKys7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBpbmRleChsKSB7CiAgICBsZXQgcGF0aCA9IFsuLi5sXTsKICAgIGxldCBrZXkgPSBwYXRoLnNoaWZ0KCk7CiAgICBsZXQgZG9jLCBuYW1lOwoKICAgIGlmKHBhdGgubGVuZ3RoID09IDApIHJldHVybiB0aGlzOwoKICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgIGNhc2UgJ2JvYXJkJzoKICAgICAgY2FzZSAnc2NoZW1hdGljJzoKICAgICAgICBkb2MgPSB0aGlzW2tleV07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2xpYnJhcnknOgogICAgICAgIG5hbWUgPSBwYXRoLnNoaWZ0KCk7CiAgICAgICAgZG9jID0gdGhpc1trZXldW25hbWVdOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogICAgaWYoIWRvYyB8fCAhZG9jLmluZGV4KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignRVJST1I6IHByb2plY3QuaW5kZXgoJyArIGwuam9pbignLCAnKSArICcgKScpOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGlmKHBhdGgubGVuZ3RoID09IDApIHJldHVybiBkb2M7CiAgICByZXR1cm4gZG9jLmluZGV4KHBhdGgpOwogIH0KCiAgc2F2ZVRvKGRpciA9ICcuJywgb3ZlcndyaXRlID0gZmFsc2UpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIGxldCBwcm9taXNlcyA9IHRoaXMubGlzdC5tYXAoZG9jID0+IFtkb2MuYmFzZW5hbWUsIGRvYy5zYXZlVG8oW2RpciwgZG9jLmJhc2VuYW1lXS5qb2luKCcvJyksIG92ZXJ3cml0ZSwgdGhpcy5mcyldKTsKCiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihyZXN1bHQgPT4gewogICAgICAgIHJlc29sdmUoT2JqZWN0LmZyb21FbnRyaWVzKHJlc3VsdCkpOwogICAgICB9KTsKICAgIH0pOwogIH0KfQoKRWFnbGVQcm9qZWN0LnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ0VhZ2xlUHJvamVjdCc7CgAAAAAAAAAADh8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyCAAAAAAAAPgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					338,
					2,
					"left_delete",
					null,
					"AgAAAAAQAAAAAAAAABAAAAAAAAArAAAAICAgIGNvbnNvbGUubG9nKCdmaW5kRG9jdW1lbnQnLCB7IG5hbWUgfSk7Cv8PAAAAAAAA/w8AAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAEAAAAAAAACsQAAAAAAAAAAAAAAAA8L8"
				],
				[
					347,
					2,
					"right_delete",
					null,
					"AgAAAK4OAAAAAAAArg4AAAAAAAAsAAAAICAgIGNvbnNvbGUubG9nKCdmaW5kRG9jdW1lbnQnLCBwcmVkICsgJycpOwquDgAAAAAAAK4OAAAAAAAAAQAAAAo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuDgAAAAAAANoOAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/eagle/document.js",
			"settings":
			{
				"buffer_size": 11315,
				"line_ending": "Unix"
			}
		},
		{
			"file": "lib/eagle/node.js",
			"settings":
			{
				"buffer_size": 16502,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					14,
					2,
					"right_delete",
					null,
					"AgAAAKMpAAAAAAAAoykAAAAAAAABAAAAL6MpAAAAAAAAoykAAAAAAAABAAAALw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACjKQAAAAAAAKMpAAAAAAAAAAAAAAAAQEA"
				],
				[
					118,
					1,
					"insert",
					{
						"characters": " ??"
					},
					"AwAAAIspAAAAAAAAjCkAAAAAAAAAAAAAjCkAAAAAAACNKQAAAAAAAAAAAACNKQAAAAAAAI4pAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACLKQAAAAAAAIspAAAAAAAAAAAAAAAA8L8"
				],
				[
					119,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAI4pAAAAAAAAjykAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOKQAAAAAAAI4pAAAAAAAAAAAAAAAA8L8"
				],
				[
					120,
					5,
					"right_delete",
					null,
					"BQAAAI8pAAAAAAAAjykAAAAAAAABAAAAO48pAAAAAAAAjykAAAAAAAABAAAAII8pAAAAAAAAjykAAAAAAAABAAAAL48pAAAAAAAAjykAAAAAAAABAAAAL48pAAAAAAAAjykAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPKQAAAAAAAI8pAAAAAAAAAAAAAAAA8L8"
				],
				[
					129,
					1,
					"insert",
					{
						"characters": ",attgri"
					},
					"BwAAANcpAAAAAAAA2CkAAAAAAAAAAAAA2CkAAAAAAADZKQAAAAAAAAAAAADZKQAAAAAAANopAAAAAAAAAAAAANopAAAAAAAA2ykAAAAAAAAAAAAA2ykAAAAAAADcKQAAAAAAAAAAAADcKQAAAAAAAN0pAAAAAAAAAAAAAN0pAAAAAAAA3ikAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADXKQAAAAAAANcpAAAAAAAAAAAAAAAA8L8"
				],
				[
					130,
					3,
					"left_delete",
					null,
					"AwAAAN0pAAAAAAAA3SkAAAAAAAABAAAAadwpAAAAAAAA3CkAAAAAAAABAAAActspAAAAAAAA2ykAAAAAAAABAAAAZw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADeKQAAAAAAAN4pAAAAAAAAAAAAAAAA8L8"
				],
				[
					131,
					1,
					"insert",
					{
						"characters": "ributeLi"
					},
					"CAAAANspAAAAAAAA3CkAAAAAAAAAAAAA3CkAAAAAAADdKQAAAAAAAAAAAADdKQAAAAAAAN4pAAAAAAAAAAAAAN4pAAAAAAAA3ykAAAAAAAAAAAAA3ykAAAAAAADgKQAAAAAAAAAAAADgKQAAAAAAAOEpAAAAAAAAAAAAAOEpAAAAAAAA4ikAAAAAAAAAAAAA4ikAAAAAAADjKQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbKQAAAAAAANspAAAAAAAAAAAAAAAA8L8"
				],
				[
					132,
					1,
					"insert_completion",
					{
						"completion": "attributeLists",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "attributeLists"
					},
					"AgAAANgpAAAAAAAA2CkAAAAAAAALAAAAYXR0cmlidXRlTGnYKQAAAAAAAOYpAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADjKQAAAAAAAOMpAAAAAAAAAAAAAAAA8L8"
				],
				[
					153,
					2,
					"right_delete",
					null,
					"AgAAAIwpAAAAAAAAjCkAAAAAAAABAAAAP4wpAAAAAAAAjCkAAAAAAAABAAAAPw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACMKQAAAAAAAIwpAAAAAAAAAAAAAAAA8L8"
				],
				[
					157,
					1,
					"cut",
					null,
					"AQAAAI0pAAAAAAAAjSkAAAAAAAAMAAAARWFnbGVFbGVtZW50",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNKQAAAAAAAJkpAAAAAAAAAAAAAAAA8L8"
				],
				[
					160,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAAHcpAAAAAAAAeCkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB3KQAAAAAAAHcpAAAAAAAAAAAAAAAA8L8"
				],
				[
					161,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHgpAAAAAAAAeSkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4KQAAAAAAAHgpAAAAAAAAAAAAAAAA8L8"
				],
				[
					162,
					1,
					"paste",
					null,
					"AQAAAHkpAAAAAAAAhSkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5KQAAAAAAAHkpAAAAAAAAAAAAAAAA8L8"
				],
				[
					163,
					1,
					"insert",
					{
						"characters": ".attr"
					},
					"BQAAAIUpAAAAAAAAhikAAAAAAAAAAAAAhikAAAAAAACHKQAAAAAAAAAAAACHKQAAAAAAAIgpAAAAAAAAAAAAAIgpAAAAAAAAiSkAAAAAAAAAAAAAiSkAAAAAAACKKQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACFKQAAAAAAAIUpAAAAAAAAAAAAAAAA8L8"
				],
				[
					166,
					1,
					"insert_completion",
					{
						"completion": "attributeLists",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "attributeLists"
					},
					"AgAAAIYpAAAAAAAAhikAAAAAAAAEAAAAYXR0coYpAAAAAAAAlCkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACKKQAAAAAAAIopAAAAAAAAAAAAAAAA8L8"
				],
				[
					177,
					1,
					"cut",
					null,
					"AQAAAK0pAAAAAAAArSkAAAAAAABMAAAAICAgIGNvbnNvbGUubG9nKCdFYWdsZU5vZGUuaW5zcGVjdCcsICB7dGFnTmFtZSxhdHRyaWJ1dGVzLGF0dHJpYnV0ZUxpc3RzfSk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtKQAAAAAAAPkpAAAAAAAAAAAAAAAAAAA"
				],
				[
					181,
					1,
					"insert_snippet",
					{
						"contents": "\n${TM_CURRENT_LINE/^\\s*((?:#|\\/\\/[\\/!]?)\\s*).*/$1/}"
					},
					"AQAAAEAqAAAAAAAASCoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABAKgAAAAAAAEAqAAAAAAAAAAAAAABAg0A"
				],
				[
					184,
					3,
					"left_delete",
					null,
					"AwAAAEcqAAAAAAAARyoAAAAAAAABAAAAIEYqAAAAAAAARioAAAAAAAABAAAAL0UqAAAAAAAARSoAAAAAAAABAAAALw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABIKgAAAAAAAEgqAAAAAAAAAAAAAAAATEA"
				],
				[
					187,
					1,
					"right_delete",
					null,
					"AQAAAAEqAAAAAAAAASoAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABKgAAAAAAAAEqAAAAAAAAAAAAAAAA8L8"
				],
				[
					190,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAmQAAAaW1wb3J0IHsgRWFnbGVSZWYsIEVhZ2xlUmVmZXJlbmNlIH0gZnJvbSAnLi9yZWYuanMnOwppbXBvcnQgKiBhcyBkZWVwIGZyb20gJy4uL2RlZXAuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyc1NldHRlcnMsIGZ1bmN0aW9uTmFtZSwgZ2V0UHJvdG90eXBlQ2hhaW4sIGlzQXJyYXksIGlzT2JqZWN0LCBtZW1vaXplLCB0cnlDYXRjaCB9IGZyb20gJy4uL21pc2MuanMnOwppbXBvcnQgeyBsYXp5TWVtYmVycyB9IGZyb20gJy4uL2xhenlJbml0aWFsaXplci5qcyc7CmltcG9ydCB7IHRya2wgfSBmcm9tICcuLi90cmtsLmpzJzsKaW1wb3J0IHsgdGV4dCwgY29uY2F0IH0gZnJvbSAnLi9jb21tb24uanMnOwppbXBvcnQgeyBFYWdsZU5vZGVNYXAgfSBmcm9tICcuL25vZGVNYXAuanMnOwppbXBvcnQgeyBJbW11dGFibGVYUGF0aCB9IGZyb20gJy4uL3htbC94cGF0aC5qcyc7CmltcG9ydCB7IEJCb3ggfSBmcm9tICcuLi9nZW9tLmpzJzsKaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJy4uL3BvaW50ZXIuanMnOwppbXBvcnQgeyByZWFkIGFzIGZyb21YTUwsIHdyaXRlIGFzIHRvWE1MIH0gZnJvbSAnLi4veG1sLmpzJzsKCmV4cG9ydCBjb25zdCBtYWtlRWFnbGVOb2RlID0gKG93bmVyLCByZWYsIGN0b3IpID0+IHsKICBpZighY3RvcikgY3RvciA9IG93bmVyLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKICBsZXQgZSA9IGN0b3IuZ2V0ID8gY3Rvci5nZXQob3duZXIsIHJlZikgOiBuZXcgY3Rvcihvd25lciwgcmVmKTsKICByZXR1cm4gZTsKfTsKCmZ1bmN0aW9uKiB3YWxrUGF0aChwLCB0ID0gcCA9PiBwLnVwKDEpKSB7CiAgbGV0IHJ1biA9IHRydWU7CiAgbGV0IHNraXA7CiAgbGV0IG5leHQ7CiAgY29uc3QgYWJvcnQgPSAoKSA9PiAocnVuID0gZmFsc2UpOwogIGNvbnN0IHNldCA9IHYgPT4gKHAgPSB2KTsKICBjb25zdCBpZ25vcmUgPSAoKSA9PiAoc2tpcCA9IHRydWUpOwogIGZvcihsZXQgcCA9IHRoaXMsIGkgPSAwOyBwOyBwID0gbmV4dCkgewogICAgbmV4dCA9IHQocCwgaSsrLCBhYm9ydCwgaWdub3JlKTsKICAgIGlmKCFza2lwKSB5aWVsZCBwOwogICAgaWYoIXJ1bikgYnJlYWs7CiAgICBza2lwID0gZmFsc2U7CiAgfQp9CgpleHBvcnQgY2xhc3MgRWFnbGVOb2RlIHsKICByZWYgPSBudWxsOwoKICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBFYWdsZU5vZGU7CiAgfQoKICBjb25zdHJ1Y3Rvcihvd25lciwgcmVmLCByYXcpIHsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlTm9kZS5jb25zdHJ1Y3RvcigxKScsIHtvd25lcjogb3duZXIsIHJlZixyYXd9KTsKCiAgICAvL2lmKCFvd25lcikgb3duZXIgPSBuZXcgRWFnbGVSZWZlcmVuY2UocmVmLnJvb3QsIFtdKS5kZXJlZmVyZW5jZSgpOwogICAgaWYoIShyZWYgaW5zdGFuY2VvZiBFYWdsZVJlZmVyZW5jZSkpIHJlZiA9IG5ldyBFYWdsZVJlZihvd25lciAmJiAncmVmJyBpbiBvd25lciA/IG93bmVyLnJlZi5yb290IDogb3duZXIsIFsuLi5yZWZdKTsKICAgIGlmKCFyYXcpIHJhdyA9IHJlZi5kZXJlZmVyZW5jZSgpOwogICAgLy9jb25zb2xlLmxvZygiRWFnbGVOb2RlLmNvbnN0cnVjdG9yIix7b3duZXIscmVmLHJhd30pOwogICAgLy9PYmplY3QuYXNzaWduKHRoaXMsIHsgcmVmLCBvd25lciB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnb3duZXInLCB7CiAgICAgIHZhbHVlOiBvd25lciwKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKCiAgICBkZWZpbmUodGhpcywgeyByZWYgfSk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuY29uc3RydWN0b3IoMiknLCB7b3duZXI6IHRoaXMub3duZXIsIHJlZjogdGhpcy5yZWYscmF3OiB0aGlzLnJhd30pOwogIH0KCiAgZ2V0IHBhdGgoKSB7CiAgICByZXR1cm4gdGhpcy5yZWYucGF0aDsKICB9CgogIGdldCByb290KCkgewogICAgbGV0IHJvb3QgPSB0aGlzLnJlZi5yb290OwogICAgcmV0dXJuIHJvb3Q7CiAgfQoKICBnZXQgZG9jdW1lbnQoKSB7CiAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpOwogIH0KCiAgc2NvcGUodCA9IChvLCBwLCB2KSA9PiBbdi50YWdOYW1lLCB2XSkgewogICAgY29uc3QgeyBvd25lciwgcGF0aCwgZG9jdW1lbnQgfSA9IHRoaXM7CiAgICBsZXQgY2hhaW4gPSBPYmplY3QuZnJvbUVudHJpZXMoCiAgICAgIAogIFsuLi4gICAgICB3YWxrUGF0aChwYXRoLCAocCwgaSwgYWJvcnQsIGlnbm9yZSkgPT4gewogICAgICAgICAgbGV0IHZhbHVlID0gcC5kZXJlZihvd25lci5yYXcsIHRydWUpOwoKICAgICAgICAgIGlmKGkgPT0gMCkgaWdub3JlKCk7CiAgICAgICAgICBpZighdmFsdWUgfHwgIXZhbHVlLmF0dHJpYnV0ZXMgfHwgISh2YWx1ZS50YWdOYW1lID09ICdsaWJyYXJ5JyB8fCB2YWx1ZS50YWdOYW1lID09ICdzaGVldCcgfHwgdmFsdWUuYXR0cmlidXRlcy5uYW1lKSkgaWdub3JlKCk7CgogICAgICAgICAgcmV0dXJuIHAudXAoMik7CiAgICAgICAgfSldLm1hcCgKICAgICAgICBwYXRoID0+IHsKICAgICAgICAgIGxldCB2ID0gcGF0aC5kZXJlZihvd25lci5yYXcsIHRydWUpOwogICAgICAgICAgcmV0dXJuIHQob3duZXIsIHBhdGgsIHYpOwogICAgICAgIH0pCiAgICAgIAogICAgKTsKCiAgICByZXR1cm4gY2hhaW47CgogICAgLyogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgbGV0IHJldCA9IHt9OwogICAgbGV0IHByZXYgPSBudWxsOwogICAgbGV0IGkgPSAwOwogICAgZG8gewogICAgICBpZihub2RlID09IHByZXYpIGJyZWFrOwogICAgICBpZigobm9kZS5hdHRyaWJ1dGVzICYmIG5vZGUuYXR0cmlidXRlcy5uYW1lKSB8fCBub2RlLnRhZ05hbWUgPT0gJ3NoZWV0JykgcmV0W25vZGUudGFnTmFtZV0gPSBub2RlOwogICAgICBwcmV2ID0gbm9kZTsKICAgICAgaSsrOwogICAgfSB3aGlsZSgobm9kZSA9IG5vZGUucGFyZW50Tm9kZSB8fCBub2RlLm93bmVyKSk7CiAgICByZXR1cm4gcmV0OyovCiAgfQogIGdldCBwcm9qZWN0KCkgewogICAgaWYoY2xhc3NOYW1lKHRoaXMub3duZXIpID09ICdFYWdsZVByb2plY3QnKSByZXR1cm4gdGhpcy5vd25lcjsKICAgIHJldHVybiB0aGlzLmRvY3VtZW50Lm93bmVyOwogIH0KCiAgZ2V0IG5vZGUoKSB7CiAgICBsZXQgbm9kZSA9IHRoaXMucGF0aC5kZXJlZih0aGlzLnJvb3QucmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgZ2V0IHJhdygpIHsKICAgIGNvbnN0IHsgcmVmLCBwYXRoLCByb290IH0gPSB0aGlzOwogICAgaWYocmVmKQogICAgICB0cnkgewogICAgICAgIHJldHVybiByZWYuZGVyZWZlcmVuY2UoKTsKICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQoKICAgIGlmKHBhdGggJiYgcm9vdCkKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gcGF0aC5kZXJlZihyb290LnJhdyk7CiAgICAgIH0gY2F0Y2goZSkge30KCiAgICAvL3Rocm93IG5ldyBFcnJvcihgRWFnbGVOb2RlLmdldCByYXcgOiAnTm8gcmVmIGFuZCBubyBwYXRoOiAke09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLmpvaW4oJywgJyl9YCk7CiAgICByZXR1cm4gdGhpcy5nZXRSYXcoKTsKICB9CgogIGNhY2hlRmllbGRzKCkgewogICAgc3dpdGNoICh0aGlzLnRhZ05hbWUpIHsKICAgICAgY2FzZSAnc2NoZW1hdGljJzoKICAgICAgICByZXR1cm4gWy8qWydzZXR0aW5ncyddLCBbJ2xheWVycyddLCovIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ10gLyosIFsnbW9kdWxlcyddKi9dOwogICAgICBjYXNlICdib2FyZCc6CiAgICAgICAgcmV0dXJuIFtbJ3BsYWluJ10sIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ2VsZW1lbnRzJ10sIFsnc2lnbmFscyddXTsKICAgICAgY2FzZSAnbW9kdWxlJzoKICAgICAgICByZXR1cm4gW1sncG9ydHMnXSwgWyd2YXJpYW50ZGVmcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ11dOwogICAgICBjYXNlICdzaGVldCc6CiAgICAgICAgcmV0dXJuIFtbJ2J1c3NlcyddLCBbJ25ldHMnXSwgWydpbnN0YW5jZXMnXSwgWydwbGFpbiddXTsKICAgICAgY2FzZSAnZGV2aWNlc2V0JzoKICAgICAgICByZXR1cm4gW1snZ2F0ZXMnXSwgWydkZXZpY2VzJ11dOwogICAgICBjYXNlICdkZXZpY2UnOgogICAgICAgIHJldHVybiBbWydjb25uZWN0cyddLCBbJ3RlY2hub2xvZ2llcyddXTsKICAgICAgY2FzZSAnbGlicmFyeSc6CiAgICAgICAgcmV0dXJuIFtbJ3BhY2thZ2VzJ10sIFsnc3ltYm9scyddLCBbJ2RldmljZXNldHMnXV07CiAgICB9CiAgfQoKICBnZXQgY2hpbGRDb25zdHJ1Y3RvcigpIHsKICAgIGxldCBwcm90b3MgPSBnZXRQcm90b3R5cGVDaGFpbih0aGlzKTsKICAgIGlmKGZ1bmN0aW9uTmFtZShwcm90b3NbMF0uY29uc3RydWN0b3IpID09ICdFYWdsZURvY3VtZW50JykgcHJvdG9zLnNoaWZ0KCk7CiAgICBsZXQgY3RvciA9IHByb3Rvc1swXS5jb25zdHJ1Y3RvcjsKICAgIC8vY29uc29sZS5sb2coJ2NoaWxkQ29uc3RydWN0b3I6JywgdGhpcywgY3Rvcik7CiAgICByZXR1cm4gY3RvcjsKICB9CgogIGluaXRDYWNoZShjdG9yID0gdGhpcy5jaGlsZENvbnN0cnVjdG9yLCBsaXN0Q3RvciA9IChvLCBwLCB2KSA9PiB2KSB7CiAgICBsZXQgZmllbGRzID0gdGhpcy5jYWNoZUZpZWxkcygpOwogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgaWYoZmllbGRzICYmIGZpZWxkcy5sZW5ndGgpIHsKICAgICAgZGVmaW5lKHRoaXMsIHsgY2FjaGU6IHt9LCBsaXN0czoge30gfSk7CiAgICAgIGxldCBsYXp5ID0ge307CiAgICAgIGxldCBsaXN0cyA9IHt9OwogICAgICBsZXQgbWFwcyA9IHt9OwogICAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICAgIGxldCBvd25lciA9IHRoaXMuZG9jdW1lbnQ7CiAgICAgIGxldCByYXcgPSB0aGlzLnJhdzsKICAgICAgZm9yKGxldCB4cGF0aCBvZiBmaWVsZHMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IGtleSA9IHhwYXRoW3hwYXRoLmxlbmd0aCAtIDFdOwogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3hwYXRoJywgeHBhdGgpOwogICAgICAgICAgbGV0IHBhdGggPSBuZXcgUG9pbnRlcihbLi4ubmV3IEltbXV0YWJsZVhQYXRoKHhwYXRoKS50b1BvaW50ZXIocmF3KV0uY29uY2F0KFsnY2hpbGRyZW4nXSkpOwogICAgICAgICAgbGF6eVtrZXldID0gKCkgPT4gdGhpcy5sb29rdXAoeHBhdGgsIHRydWUpOwogICAgICAgICAgaWYoIXBhdGguZGVyZWYocmF3LCB0cnVlKSkgewogICAgICAgICAgICAvLyAgIGNvbnNvbGUud2FybigncGF0aCBub3QgZm91bmQnLCBwYXRoICsgJycpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdGggPSB0aGlzLnJlZi5wYXRoLmRvd24oLi4ucGF0aCk7CiAgICAgICAgICBsaXN0c1trZXldID0gKCkgPT4gbGlzdEN0b3Iob3duZXIsIHBhdGgpOwogICAgICAgICAgbWFwc1trZXldID0KICAgICAgICAgICAgWydzaGVldHMnLCAnY29ubmVjdHMnLCAncGxhaW4nXS5pbmRleE9mKGtleSkgIT0gLTEKICAgICAgICAgICAgICA/IGxpc3RzW2tleV0KICAgICAgICAgICAgICA6ICgpID0+IEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdHNba2V5XSgpLCBbJ2JvYXJkJywgJ3NjaGVtYXRpYycsICdsaWJyYXJ5J10uaW5kZXhPZihrZXkpICE9IC0xID8gJ3RhZ05hbWUnIDoga2V5ID09ICdpbnN0YW5jZXMnID8gJ3BhcnQnIDoga2V5ID09ICdsYXllcnMnID8gWydudW1iZXInLCAnbmFtZSddIDogJ25hbWUnKTsKICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgIH0KICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcy5saXN0cywgbGlzdHMpOwogICAgICBkZWZpbmVHZXR0ZXJzU2V0dGVycyh0aGlzLmNhY2hlLCBsYXp5KTsKICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcywgbWFwcyk7CiAgICB9CiAgfQoKICBpbml0UmVsYXRpb24oa2V5LCBoYW5kbGVyLCBmbikgewogICAgbGV0IGVsZW0gPSB0aGlzOwogICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiB7CiAgICAgIGlmKHYgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGhhbmRsZXIodHlwZW9mIHYgPT0gJ3N0cmluZycgPyB2IDogdi5uYW1lKTsKICAgICAgbGV0IHZhbHVlID0gaGFuZGxlcigpIHx8IGVsZW0uYXR0ck1hcFtrZXldIHx8IGVsZW0uYXR0cmlidXRlc1trZXldOwogICAgICByZXR1cm4gZm4odmFsdWUsIGVsZW0sIGVsZW0uZG9jdW1lbnQpOwogICAgfSk7CiAgICAvL2NvbnNvbGUubG9nKGBpbml0UmVsYXRpb25gLGtleSx0aGlzW2tleV0pOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBhcHBlbmRDaGlsZChub2RlLCBhdHRyaWJ1dGVzID0ge30pIHsKICAgIGlmKHR5cGVvZiBub2RlID09ICdzdHJpbmcnKSB7CiAgICAgIG5vZGUgPSB7CiAgICAgICAgdGFnTmFtZTogbm9kZSwKICAgICAgICBjaGlsZHJlbjogW10KICAgICAgfTsKICAgIH0KICAgIG5vZGUuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICB0aGlzLnJlZi5jb25jYXQoWydjaGlsZHJlbiddKS5kZXJlZmVyZW5jZSgpLnB1c2gobm9kZSk7CiAgICByZXR1cm4gdGhpcy5sYXN0Q2hpbGQ7CiAgfQoKICByZXBsYWNlKG5vZGUpIHsKICAgIHRoaXMucmVmLnJlcGxhY2Uobm9kZSk7CiAgfQoKICBzdGF0aWMgbWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpIHsKICAgIGxldCBwcmVkID0gcHJlZGljYXRlOwogICAgaWYocHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICBsZXQgcmUgPSBwcmVkOwogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IHJlLnRlc3Qodi50YWdOYW1lKTsKICAgIH0gZWxzZSBpZih0eXBlb2YgcHJlZCA9PSAnc3RyaW5nJykgewogICAgICBsZXQgbmFtZSA9IHByZWQ7CiAgICAgIHByZWQgPSAodiwgcCwgbykgPT4gdi50YWdOYW1lID09PSBuYW1lOwogICAgfSBlbHNlIGlmKGlzT2JqZWN0KHByZWQpICYmIHR5cGVvZiBwcmVkICE9ICdmdW5jdGlvbicpIHsKICAgICAgbGV0IGtleXMgPSBBcnJheS5pc0FycmF5KHByZWQpID8gcHJlZCA6IE9iamVjdC5rZXlzKHByZWQpOwogICAgICBsZXQgdmFsdWVzID0ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiBbLi4uYWNjLCBwcmVkW2tleV1dLCBbXSk7CgogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IGtleXMuZXZlcnkoKGtleSwgaSkgPT4gKGtleSA9PSAndGFnTmFtZScgPyB2W2tleV0gPT0gdmFsdWVzW2ldIDogdi5hdHRyaWJ1dGVzW2tleV0gPT0gdmFsdWVzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gcHJlZDsKICB9CgogICpnZXRBbGwocHJlZGljYXRlLCB0cmFuc2Zvcm0pIHsKICAgIC8vICB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIGxldCBuYW1lOwogICAgbGV0IHByZWQgPSBFYWdsZU5vZGUubWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpOwogICAgbGV0IGN0b3IgPSB0aGlzW1N5bWJvbC5zcGVjaWVzXTsKICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybSB8fCAoKC4uLmFyZ3MpID0+IGFyZ3MpOwogICAgbGV0IGNvbmQgPSBwcmVkOwogICAgZm9yKGxldCBbdiwgcF0gb2YgZGVlcC5pdGVyYXRlKHRoaXMucmF3LCBjb25kIC8qLCBkZWVwLlJFVFVSTl9WQUxVRV9QQVRIKi8pKSB7CiAgICAgIHlpZWxkIHRyYW5zZm9ybSh2LCBbLi4udGhpcy5wYXRoLCAuLi5wXSwgdGhpcy5kb2N1bWVudCA/PyB0aGlzLnJvb3QpOwogICAgfQogIH0KCiAgZ2V0KHByZWQsIHRyYW5zZm9ybSkgewogICAgLy9jb25zb2xlLmxvZygnZ2V0JywgdGhpcywgcHJlZCk7CiAgICBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUocHJlZCk7CiAgICBsZXQgY3RvciA9IHRoaXNbU3ltYm9sLnNwZWNpZXNdOwogICAgdHJhbnNmb3JtID0gdHJhbnNmb3JtIHx8ICgoLi4uYXJncykgPT4gYXJncyk7CiAgICBsZXQgY29uZCA9IHByZWQ7CiAgICBsZXQgZm91bmQgPSBkZWVwLmZpbmQodGhpcy5yYXcsIGNvbmQgLyosIGRlZXAuUkVUVVJOX1ZBTFVFX1BBVEgqLyk7CgogICAgaWYoZm91bmQpIHsKICAgICAgbGV0IFt2LCBwXSA9IGZvdW5kOwogICAgICByZXR1cm4gdHJhbnNmb3JtKHYsIFsuLi50aGlzLnBhdGgsIC4uLnBdLCB0aGlzLmRvY3VtZW50ID8/IHRoaXMucm9vdCk7CiAgICB9CgogICAgcmV0dXJuIGZvdW5kOwogIH0KCiAgZmluZChuYW1lLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGxldCBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUobmFtZSk7CiAgICBsZXQgcmVzdWx0ID0gZGVlcC5maW5kKHRoaXMucmF3LCBwcmVkLCBbLi4udGhpcy5wYXRoXSk7IC8vdGhpcy5nZXRBbGwoKHYsIHAsIG8pID0+IChwcmVkKHYsIHAsIG8pID8gLTEgOiBmYWxzZSksIHRyYW5zZm9ybSkpCgogICAgaWYocmVzdWx0KSB7CiAgICAgIGNvbnN0IHsgcGF0aCwgdmFsdWUgfSA9IHJlc3VsdDsKICAgICAgLy9jb25zb2xlLmxvZygiZm91bmQ6Iix7cGF0aCx2YWx1ZX0pOwogICAgICByZXR1cm4gdmFsdWUgPyB0cmFuc2Zvcm0odmFsdWUsIHBhdGgpIDogdmFsdWU7CiAgICB9CiAgfQoKICBnZXRNYXAoZW50aXR5KSB7CiAgICBsZXQgYSA9IHRoaXMuY2FjaGVbZW50aXR5ICsgJ3MnXTsKICAgIGlmKGEgJiYgYS5jaGlsZHJlbikgcmV0dXJuIG5ldyBNYXAoWy4uLmEuY2hpbGRyZW5dLm1hcChlID0+IFtlLm5hbWUsIGVdKSk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGdldEJ5TmFtZShlbGVtZW50LCBuYW1lLCBhdHRyID0gJ25hbWUnLCB0ID0gKFt2LCBsLCBkXSkgPT4gbWFrZUVhZ2xlTm9kZShkLCB0aGlzLnJlZi5jb25jYXQoWy4uLmxdKSwgdGhpcy5jaGlsZENvbnN0cnVjdG9yKSkgewogICAgZm9yKGxldCBbdiwgbCwgZF0gb2YgdGhpcy5pdGVyYXRvcihbXSwgaXQgPT4gaXQpKSB7CiAgICAgIGlmKHR5cGVvZiB2ID09ICdvYmplY3QnICYmICd0YWdOYW1lJyBpbiB2ICYmICdhdHRyaWJ1dGVzJyBpbiB2ICYmIGF0dHIgaW4gdi5hdHRyaWJ1dGVzKSB7CiAgICAgICAgaWYodi50YWdOYW1lID09IGVsZW1lbnQgJiYgdi5hdHRyaWJ1dGVzW2F0dHJdID09IG5hbWUpIHJldHVybiB0KFt2LCBsLCBkXSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZ2V0IG5hbWVzKCkgewogICAgbGV0IG5hbWVzID0gW107CiAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICBkbyB7CiAgICAgIGxldCBub2RlID0gcmVmLmRlcmVmZXJlbmNlKCk7CiAgICAgIGlmKG5vZGUuYXR0cmlidXRlcy5uYW1lICE9PSB1bmRlZmluZWQpIG5hbWVzLnB1c2goW25vZGUudGFnTmFtZSwgbm9kZS5hdHRyaWJ1dGVzLm5hbWVdKTsKICAgICAgcmVmID0gcmVmLnVwKDIpOwogICAgfSB3aGlsZShyZWYucGF0aC5sZW5ndGgpOwogICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhuYW1lcyk7CiAgfQoKICBnZXQgbmV4dFNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5uZXh0U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcHJldlNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5wcmV2U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcGFyZW50Tm9kZSgpIHsKICAgIGlmKHRoaXMucGF0aC5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7CgogICAgLyogICBjb25zdCByZWYgPSB0aGlzLnJlZi51cCgyKTsqLwogICAgY29uc3QgeyByZWYsIHBhdGgsIHJvb3QsIHJhdyB9ID0gdGhpczsKICAgIGxldCBkb2MgPSB0aGlzLmdldERvY3VtZW50KCk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXJlbnROb2RlJywgcGF0aCArICcnLCBkb2MpOwogICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdLmdldChkb2MsIHJlZi51cCgyKSk7CiAgfQoKICBnZXQgZmlyc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgMCk7CiAgICByZXR1cm4gcmVmID8gbmV3IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdKHRoaXMsIHJlZikgOiBudWxsOwogIH0KCiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgLTEpOwogICAgcmV0dXJuIHJlZiA/IG5ldyB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXSh0aGlzLCByZWYpIDogbnVsbDsKICB9CgogIFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZTsgLy9FYWdsZU5vZGUuaW5zcGVjdCh0aGlzKTsKICB9CgogIHRvU3RyaW5nKCkgewogICAgcmV0dXJuIHRvWE1MKHRoaXMucmF3KTsKICAgIC8vICAgIHJldHVybiB0WG1sLnRvU3RyaW5nKFt0aGlzLnJhd10pOwogIH0KCiAgaW5zcGVjdChkZXB0aCwgb3B0aW9ucykgewogICAgbGV0IGF0dHJzID0gWycnXTsKICAgIGlmKGRlcHRoID4gMTAwKSB0aHJvdyBuZXcgRXJyb3IoYEVhZ2xlTm9kZS5pbnNwZWN0KClgKTsKCiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuaW5zcGVjdCcsIGRlcHRoLCB0aGlzLnRhZ05hbWUpOwoKICAgIGNvbnN0IHsgcmF3IH0gPSB0aGlzOwogICAgY29uc3QgeyBjaGlsZHJlbiwgdGFnTmFtZSwgYXR0cmlidXRlcyA9IHt9IH0gPSByYXc7CiAgICBjb25zdCB7IGF0dHJpYnV0ZUxpc3RzID0gRWFnbGVFbGVtZW50LmF0dHJpYnV0ZUxpc3RzfSA9IHRoaXMuY29uc3RydWN0b3IgIDsKCiAgICBjb25zdCBhdHRyaWJ1dGVMaXN0ID0gYXR0cmlidXRlTGlzdHNbdGFnTmFtZV0gfHwgT2JqZWN0LmtleXMoYXR0cmlidXRlcyk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuaW5zcGVjdCcsICB7IHRhZ05hbWUsIGF0dHJpYnV0ZUxpc3QgfSk7CiAgICAKICAgIGNvbnN0IGdldEF0dHIgPSBuYW1lID0+IHsKICAgICAgZm9yKGxldCBhdHRyTWFwIG9mIFthdHRyaWJ1dGVzLCB0aGlzLCByYXddKSBpZihuYW1lIGluIGF0dHJNYXApIHJldHVybiBhdHRyTWFwW25hbWVdOwogICAgfTsKICAgIGlmKHRydWUpIHsKICAgICAgYXR0cnMgPSBhdHRyaWJ1dGVMaXN0CiAgICAgICAgLmZpbHRlcihuYW1lID0+IGdldEF0dHIobmFtZSkgIT09IHVuZGVmaW5lZCkKICAgICAgICAucmVkdWNlKAogICAgICAgICAgKGF0dHJzLCBhdHRyKSA9PgogICAgICAgICAgICBjb25jYXQoCiAgICAgICAgICAgICAgYXR0cnMsCiAgICAgICAgICAgICAgJyAnLAogICAgICAgICAgICAgIHRleHQoYXR0ciwgMSwgMzMpLAogICAgICAgICAgICAgIHRleHQoJzonLCAxLCAzNiksCiAgICAgICAgICAgICAgL14oYWx0ZGlzdGFuY2V8Y2xhc3N8Y29sb3J8Y3VydmV8ZGlhbWV0ZXJ8ZGlzdGFuY2V8ZHJpbGx8ZmlsbHxsYXllcnxtdWx0aXBsZXxudW1iZXJ8cmFkaXVzfHJhdGlvfHNpemV8d2lkdGh8eFsxLTNdP3x5WzEtM10/KSQvLnRlc3QoYXR0cikKICAgICAgICAgICAgICAgID8gdGV4dChnZXRBdHRyKGF0dHIpLCAxLCAzNikKICAgICAgICAgICAgICAgIDogdGV4dCgiJyIgKyBnZXRBdHRyKGF0dHIpICsgIiciLCAxLCAzMikKICAgICAgICAgICAgKSwKICAgICAgICAgIGF0dHJzCiAgICAgICAgKTsKICAgIH0KICAgIGxldCBudW1DaGlsZHJlbiA9IGNoaWxkcmVuID8gY2hpbGRyZW4ubGVuZ3RoIDogMDsKICAgIGxldCByZXQgPSBbJyddOwogICAgbGV0IHRhZyA9IHRoaXMudGFnTmFtZSB8fCByYXcudGFnTmFtZTsKICAgIGlmKHRhZykgcmV0ID0gY29uY2F0KHJldCwgdGV4dCgnPCcsIDEsIDM2KSwgdGV4dCh0YWcsIDEsIDMxKSwgYXR0cnMsIHRleHQobnVtQ2hpbGRyZW4gPT0gMCA/ICcgLz4nIDogJz4nLCAxLCAzNikpOwogICAgaWYodGhpcy5maWxlbmFtZSkgcmV0ID0gY29uY2F0KHJldCwgYCBmaWxlbmFtZT0iJHt0aGlzLmZpbGVuYW1lfSJgKTsKICAgIGlmKG51bUNoaWxkcmVuID4gMCkgewogICAgICBpZihkZXB0aCA8IDEpIHsKICAgICAgICByZXQgKz0gKCdcbicgKyB4bWwud3JpdGUoY2hpbGRyZW4sIG9wdGlvbnMuZGVwdGggLSBkZXB0aCkpLnJlcGxhY2UoL1xuL2csICdcbiAgJyk7CiAgICAgICAgcmV0ICs9ICdcbic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0ICs9IGNvbmNhdChyZXQsIGB7Li4uJHtudW1DaGlsZHJlbn0gY2hpbGRyZW4uLi59YCk7CiAgICAgIH0KICAgICAgcmV0ICs9IGA8LyR7dGFnfT5gOwogICAgfQogICAgcmV0dXJuIChyZXQgPSBjb25jYXQodGV4dCh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcsIDApLCByZXQpKTsKICB9CgogIFtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXShkZXB0aCwgb3B0aW9ucykgewogICAgcmV0dXJuIHRoaXMuaW5zcGVjdChkZXB0aCwgb3B0aW9ucyk7CiAgfQoKICBsb29rdXAoeHBhdGgsIHQgPSAobywgcCwgdikgPT4gW28sIHBdKSB7CiAgICAvKiBpZighKHhwYXRoIGluc3RhbmNlb2YgSW1tdXRhYmxlWFBhdGgpKSAqLyB4cGF0aCA9IG5ldyBJbW11dGFibGVYUGF0aCh4cGF0aCk7CiAgICAvLyBjb25zb2xlLmxvZygnRWFnbGVOb2RlLmxvb2t1cCgnLCB4cGF0aCwgJywnLCB0ICsgJycsICcpJyk7CgogICAgbGV0IHBhdGggPSBuZXcgUG9pbnRlcihbLi4ueHBhdGgudG9Qb2ludGVyKHRoaXMucmF3KV0pOyAvL1suLi54cGF0aF0pOwogICAgbGV0IHZhbHVlID0geHBhdGguZGVyZWYodGhpcy5yYXcsIHRydWUpOwogICAgbGV0IHJldCA9IHQodGhpcywgcGF0aCwgdmFsdWUpOwogICAgcmV0dXJuIHJldDsKICB9CgogIGdldEJvdW5kcyhwcmVkID0gZSA9PiB0cnVlKSB7CiAgICBsZXQgYmIgPSBuZXcgQkJveCgpOwogICAgaWYodGhpcy5jaGlsZHJlbiAmJiB0aGlzLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICBmb3IobGV0IGVsZW1lbnQgb2YgdGhpcy5nZXRBbGwoZSA9PiBlLnRhZ05hbWUgIT09IHVuZGVmaW5lZCAmJiBwcmVkKGUpKSkgewogICAgICAgIGxldCBnID0gZWxlbWVudD8uZ2VvbWV0cnk7CiAgICAgICAgaWYoZykgewogICAgICAgICAgbGV0IGJvdW5kID0gdHlwZW9mIGcuYmJveCA9PSAnZnVuY3Rpb24nID8gZy5iYm94KCkgOiBnOwogICAgICAgICAgYmIudXBkYXRlKGJvdW5kLCAwLCBlbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGxldCBnID0gdGhpcy5nZW9tZXRyeTsKICAgIGlmKGcpIGJiLnVwZGF0ZShnKTsKICAgIHJldHVybiBiYjsKICB9CgogIGdldCBnZW9tZXRyeSgpIHsKICAgIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gdGhpcy5yYXc7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcyk7CiAgICBjb25zdCBtYWtlR2V0dGVyU2V0dGVyID0gayA9PiB2ID0+IHYgPT09IHVuZGVmaW5lZCA/IHRoaXNba10gOiAodGhpc1trXSA9IHYpOwogICAgaWYoWyd4MScsICd5MScsICd4MicsICd5MiddLmV2ZXJ5KHByb3AgPT4ga2V5cy5pbmNsdWRlcyhwcm9wKSkpIHsKICAgICAgcmV0dXJuIExpbmUuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgIH0gZWxzZSBpZihbJ3gnLCAneSddLmV2ZXJ5KHByb3AgPT4ga2V5cy5pbmNsdWRlcyhwcm9wKSkpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSBQb2ludCh0aGlzKTsKICAgICAgaWYoa2V5cy5pbmNsdWRlcygncmFkaXVzJykpIHJldHVybiBDaXJjbGUuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgICAgaWYoWyd3aWR0aCcsICdoZWlnaHQnXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSByZXR1cm4gUmVjdC5iaW5kKHRoaXMsIG51bGwsIG1ha2VHZXR0ZXJTZXR0ZXIpOwogICAgICByZXR1cm4gUG9pbnQuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgIH0KICB9CgogIGdldERvY3VtZW50KCkgewogICAgbGV0IG8gPSB0aGlzOwogICAgd2hpbGUoby5vd25lcikgewogICAgICBpZihvLnhtbCAhPT0gdW5kZWZpbmVkKSBicmVhazsKICAgICAgbyA9IG8ub3duZXI7CiAgICB9CiAgICByZXR1cm4gbzsKICB9CgogIHhwYXRoKCkgewogICAgcmV0dXJuIHRyeUNhdGNoKAogICAgICAoKSA9PiBJbW11dGFibGVYUGF0aC5mcm9tKHRoaXMucGF0aCwgdGhpcy5kb2N1bWVudCksCiAgICAgIHhwYXRoID0+IHhwYXRoLAogICAgICAoKSA9PiBPYmplY3Quc2V0UHJvdG90eXBlT2YoWy4uLnRoaXMucGF0aF0sIEltbXV0YWJsZVhQYXRoLnByb3RvdHlwZSkKICAgICk7CiAgfQoKICBlbnRyaWVzKHQgPSAoW3YsIGwsIGRdKSA9PiBbbFtsLmxlbmd0aCAtIDFdLCBFYWdsZUVsZW1lbnQuZ2V0KGQsIGwpXSkgewogICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoW10sIHQpOwogIH0KCiAgKml0ZXJhdG9yKC4uLmFyZ3MpIHsKICAgIGxldCBwcmVkaWNhdGUgPSB0eXBlb2YgYXJnc1swXSA9PSAnZnVuY3Rpb24nID8gYXJncy5zaGlmdCgpIDogYXJnID0+IHRydWU7CiAgICBsZXQgcGF0aCA9IChBcnJheS5pc0FycmF5KGFyZ3NbMF0pICYmIGFyZ3Muc2hpZnQoKSkgfHwgW107CiAgICBsZXQgdCA9IHR5cGVvZiBhcmdzWzBdID09ICdmdW5jdGlvbicgPyBhcmdzLnNoaWZ0KCkgOiAoW3YsIGwsIGRdKSA9PiBbdHlwZW9mIHYgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCAmJiAndGFnTmFtZScgaW4gdiA/IG5ldyB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXShkLCBsKSA6IHYsIGwsIGRdOwogICAgbGV0IG93bmVyID0gaXNPYmplY3QodGhpcykgJiYgJ293bmVyJyBpbiB0aGlzID8gdGhpcy5vd25lciA6IHRoaXM7CiAgICBsZXQgcm9vdCA9IHRoaXMucm9vdCB8fCAob3duZXIueG1sICYmIG93bmVyLnhtbFswXSk7CiAgICBsZXQgbm9kZSA9IHJvb3Q7CiAgICBpZihwYXRoLmxlbmd0aCA+IDApIG5vZGUgPSBkZWVwLmdldChub2RlLCBwYXRoKTsKICAgIGZvcihsZXQgW3YsIGxdIG9mIGRlZXAuaXRlcmF0ZShub2RlLCAodiwgcCkgPT4gKHByZWRpY2F0ZSh2LCBwKSA/IC0xIDogcC5sZW5ndGggPiAxID8gcFtwLmxlbmd0aCAtIDJdID09ICdjaGlsZHJlbicgOiB0cnVlKSkpIHsKICAgICAgaWYoIShsIGluc3RhbmNlb2YgSW1tdXRhYmxlUGF0aCkpIGwgPSBuZXcgSW1tdXRhYmxlUGF0aChsKTsKICAgICAgaWYodHlwZW9mIHYgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCAmJiAndGFnTmFtZScgaW4gdikgaWYgKHByZWRpY2F0ZSh2LCBsLCBvd25lcikpIHlpZWxkIHQoW3YsIGwsIG93bmVyXSk7CiAgICB9CiAgfQoKICB0b1hNTChpbmRlbnQgPSAnJykgewogICAgcmV0dXJuIHRvWE1MKHRoaXMucmF3KTsgLy8sIDEwMDAwLCAnIicsIGluZGVudCk7CiAgfQoKICAvKiBzdGF0aWMgaW5zcGVjdCA9IChlLCBkLCBjID0geyBkZXB0aDogMCwgYnJlYWtMZW5ndGg6IDQwMCwgcGF0aDogdHJ1ZSB9KSA9PiB7CiAgICBjb25zdCB7IGRlcHRoLCBicmVha0xlbmd0aCB9ID0gYzsKICAgIGxldCBvID0gZTsKICAgIGxldCByID0gKGUgJiYgZS5yYXcpIHx8IGU7CiAgICBpZih0eXBlb2YgciA9PSAnc3RyaW5nJykgcmV0dXJuIHRleHQociwgMSwgMzYpOwogICAgbGV0IHggPSAnJzsKICAgIHRyeSB7CiAgICAgIHggPSBpbnNwZWN0KHIsIHsKICAgICAgICBkZXB0aDogZGVwdGggKiAyLAogICAgICAgIGJyZWFrTGVuZ3RoLAogICAgICAgIGNvbG9yczogIWlzQnJvd3NlcigpCiAgICAgIH0pOwogICAgfSBjYXRjaChlcnIpIHt9CiAgICBsZXQgcyA9ICfij5AnOwogICAgeCA9IHguc3Vic3RyaW5nKHguaW5kZXhPZigndGFnTmFtZScpICsgMTQpOwogICAgeCA9IE9iamVjdC5lbnRyaWVzKChyICYmIHIuYXR0cmlidXRlcykgfHwge30pLm1hcCgKICAgICAgKFtrZXksIHZhbHVlXSkgPT4gdGV4dChrZXksIDMzKSArIHRleHQocywgMCwgMzcpICsgdGV4dCh2YWx1ZSwgMSwgMzYpCiAgICApOwogICAgeC51bnNoaWZ0KHIudGFnTmFtZSk7CiAgICBsZXQgW3AsIC4uLmFycl0gPSB4OwogICAgcCA9IHRleHQoYOOAlGAsIDEsIDM3KSArIHRleHQocCwgMzgsIDUsIDE5OSk7CiAgICBsZXQgbCA9IGUucGF0aCArICcnOwogICAgbGV0IHR5cGUgPSBjbGFzc05hbWUoZSk7CiAgICBpZihhcnIubGVuZ3RoKSBhcnIudW5zaGlmdCgnJyk7CiAgICBsZXQgcmV0ID0gW3RleHQodHlwZSwgMzgsIDUsIDIxOSksIHAsIHRleHQoJ+Kng+Kdi+KtlycsIDM4LCA1LCAxMTIpLCAuLi5hcnIsIHRleHQoYOOAlWAsIDEsIDM3KV07CgogICAgcmV0dXJuIChsLnRyaW0oKSA/IGwgKyAnICAnIDogJycpICsgcmV0LmpvaW4oJyAnKSArIHRleHQoJycsIDApOwogIH07Ki8KfQoKZGVmaW5lKEVhZ2xlTm9kZS5wcm90b3R5cGUsIHsKICBnZXRSYXc6IG1lbW9pemUoZnVuY3Rpb24gKCkgewogICAgY29uc3QgeyBvd25lciwgcmVmLCBkb2N1bWVudCB9ID0gdGhpczsKICAgIGxldCByID0gcmVmLnBhdGguZGVyZWYob3duZXIucmF3LCB0cnVlKTsKICAgIGlmKCFyKSB7CiAgICAgIHIgPSByZWYucGF0aC5kZXJlZihyZWYucm9vdCkgfHwgcmVmLnBhdGguZGVyZWYob3duZXIpOwogICAgICBpZighcikgciA9IGRvY3VtZW50Lm1hcHBlci5hdChyZWYucGF0aCk7CiAgICB9CiAgICByZXR1cm4gcjsKICB9KQp9KTsKAAAAAAAAAAAGQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABKgAAAAAAAAEqAAAAAAAAAAAAAAAA8L8"
				],
				[
					229,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BQAAAGkuAAAAAAAAai4AAAAAAAAAAAAAai4AAAAAAAByLgAAAAAAAAAAAAByLgAAAAAAAHIuAAAAAAAABQAAAHdyaXRlai4AAAAAAABqLgAAAAAAAAgAAAAgICAgICAgIGouAAAAAAAAdC4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpLgAAAAAAAG4uAAAAAAAAAAAAAAAA8L8"
				],
				[
					230,
					10,
					"left_delete",
					null,
					"CgAAAHIuAAAAAAAAci4AAAAAAAACAAAAICBwLgAAAAAAAHAuAAAAAAAAAgAAACAgbi4AAAAAAABuLgAAAAAAAAIAAAAgIGwuAAAAAAAAbC4AAAAAAAACAAAAICBqLgAAAAAAAGouAAAAAAAAAgAAACAgaS4AAAAAAABpLgAAAAAAAAEAAAAKaC4AAAAAAABoLgAAAAAAAAEAAAAuZy4AAAAAAABnLgAAAAAAAAEAAABsZi4AAAAAAABmLgAAAAAAAAEAAABtZS4AAAAAAABlLgAAAAAAAAEAAAB4",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB0LgAAAAAAAHQuAAAAAAAAAAAAAAAA8L8"
				],
				[
					231,
					1,
					"insert",
					{
						"characters": "toXML"
					},
					"BQAAAGUuAAAAAAAAZi4AAAAAAAAAAAAAZi4AAAAAAABnLgAAAAAAAAAAAABnLgAAAAAAAGguAAAAAAAAAAAAAGguAAAAAAAAaS4AAAAAAAAAAAAAaS4AAAAAAABqLgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABlLgAAAAAAAGUuAAAAAAAAAAAAAAAA8L8"
				],
				[
					289,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AgAAAGUuAAAAAAAAZi4AAAAAAAAAAAAAZi4AAAAAAABmLgAAAAAAAAUAAAB0b1hNTA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABlLgAAAAAAAGouAAAAAAAAAAAAAAAA8L8"
				],
				[
					342,
					1,
					"insert",
					{
						"characters": "tg"
					},
					"AgAAAGYuAAAAAAAAZy4AAAAAAAAAAAAAZy4AAAAAAABoLgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABmLgAAAAAAAGYuAAAAAAAAAAAAAAAA8L8"
				],
				[
					343,
					1,
					"left_delete",
					null,
					"AQAAAGcuAAAAAAAAZy4AAAAAAAABAAAAZw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABoLgAAAAAAAGguAAAAAAAAAAAAAAAA8L8"
				],
				[
					344,
					1,
					"insert_completion",
					{
						"completion": "this",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "this"
					},
					"AgAAAGYuAAAAAAAAZi4AAAAAAAABAAAAdGYuAAAAAAAAai4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABnLgAAAAAAAGcuAAAAAAAAAAAAAAAA8L8"
				],
				[
					345,
					4,
					"left_delete",
					null,
					"BAAAAGkuAAAAAAAAaS4AAAAAAAABAAAAc2guAAAAAAAAaC4AAAAAAAABAAAAaWcuAAAAAAAAZy4AAAAAAAABAAAAaGYuAAAAAAAAZi4AAAAAAAABAAAAdA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqLgAAAAAAAGouAAAAAAAAAAAAAAAA8L8"
				],
				[
					346,
					1,
					"insert",
					{
						"characters": "toXML"
					},
					"BQAAAGYuAAAAAAAAZy4AAAAAAAAAAAAAZy4AAAAAAABoLgAAAAAAAAAAAABoLgAAAAAAAGkuAAAAAAAAAAAAAGkuAAAAAAAAai4AAAAAAAAAAAAAai4AAAAAAABrLgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABmLgAAAAAAAGYuAAAAAAAAAAAAAAAA8L8"
				],
				[
					358,
					1,
					"left_delete",
					null,
					"AQAAANYuAAAAAAAA1i4AAAAAAAABAAAAKw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADXLgAAAAAAANcuAAAAAAAAAAAAAAAA8L8"
				],
				[
					369,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAOQAAAaW1wb3J0IHsgRWFnbGVSZWYsIEVhZ2xlUmVmZXJlbmNlIH0gZnJvbSAnLi9yZWYuanMnOwppbXBvcnQgKiBhcyBkZWVwIGZyb20gJy4uL2RlZXAuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyc1NldHRlcnMsIGZ1bmN0aW9uTmFtZSwgZ2V0UHJvdG90eXBlQ2hhaW4sIGlzQXJyYXksIGlzT2JqZWN0LCBtZW1vaXplLCB0cnlDYXRjaCB9IGZyb20gJy4uL21pc2MuanMnOwppbXBvcnQgeyBsYXp5TWVtYmVycyB9IGZyb20gJy4uL2xhenlJbml0aWFsaXplci5qcyc7CmltcG9ydCB7IHRya2wgfSBmcm9tICcuLi90cmtsLmpzJzsKaW1wb3J0IHsgdGV4dCwgY29uY2F0IH0gZnJvbSAnLi9jb21tb24uanMnOwppbXBvcnQgeyBFYWdsZU5vZGVNYXAgfSBmcm9tICcuL25vZGVNYXAuanMnOwppbXBvcnQgeyBJbW11dGFibGVYUGF0aCB9IGZyb20gJy4uL3htbC94cGF0aC5qcyc7CmltcG9ydCB7IEJCb3ggfSBmcm9tICcuLi9nZW9tLmpzJzsKaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJy4uL3BvaW50ZXIuanMnOwppbXBvcnQgeyByZWFkIGFzIGZyb21YTUwsIHdyaXRlIGFzIHRvWE1MIH0gZnJvbSAnLi4veG1sLmpzJzsKCmV4cG9ydCBjb25zdCBtYWtlRWFnbGVOb2RlID0gKG93bmVyLCByZWYsIGN0b3IpID0+IHsKICBpZighY3RvcikgY3RvciA9IG93bmVyLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKICBsZXQgZSA9IGN0b3IuZ2V0ID8gY3Rvci5nZXQob3duZXIsIHJlZikgOiBuZXcgY3Rvcihvd25lciwgcmVmKTsKICByZXR1cm4gZTsKfTsKCmZ1bmN0aW9uKiB3YWxrUGF0aChwLCB0ID0gcCA9PiBwLnVwKDEpKSB7CiAgbGV0IHJ1biA9IHRydWU7CiAgbGV0IHNraXA7CiAgbGV0IG5leHQ7CiAgY29uc3QgYWJvcnQgPSAoKSA9PiAocnVuID0gZmFsc2UpOwogIGNvbnN0IHNldCA9IHYgPT4gKHAgPSB2KTsKICBjb25zdCBpZ25vcmUgPSAoKSA9PiAoc2tpcCA9IHRydWUpOwogIGZvcihsZXQgcCA9IHRoaXMsIGkgPSAwOyBwOyBwID0gbmV4dCkgewogICAgbmV4dCA9IHQocCwgaSsrLCBhYm9ydCwgaWdub3JlKTsKICAgIGlmKCFza2lwKSB5aWVsZCBwOwogICAgaWYoIXJ1bikgYnJlYWs7CiAgICBza2lwID0gZmFsc2U7CiAgfQp9CgpleHBvcnQgY2xhc3MgRWFnbGVOb2RlIHsKICByZWYgPSBudWxsOwoKICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBFYWdsZU5vZGU7CiAgfQoKICBjb25zdHJ1Y3Rvcihvd25lciwgcmVmLCByYXcpIHsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlTm9kZS5jb25zdHJ1Y3RvcigxKScsIHtvd25lcjogb3duZXIsIHJlZixyYXd9KTsKCiAgICAvL2lmKCFvd25lcikgb3duZXIgPSBuZXcgRWFnbGVSZWZlcmVuY2UocmVmLnJvb3QsIFtdKS5kZXJlZmVyZW5jZSgpOwogICAgaWYoIShyZWYgaW5zdGFuY2VvZiBFYWdsZVJlZmVyZW5jZSkpIHJlZiA9IG5ldyBFYWdsZVJlZihvd25lciAmJiAncmVmJyBpbiBvd25lciA/IG93bmVyLnJlZi5yb290IDogb3duZXIsIFsuLi5yZWZdKTsKICAgIGlmKCFyYXcpIHJhdyA9IHJlZi5kZXJlZmVyZW5jZSgpOwogICAgLy9jb25zb2xlLmxvZygiRWFnbGVOb2RlLmNvbnN0cnVjdG9yIix7b3duZXIscmVmLHJhd30pOwogICAgLy9PYmplY3QuYXNzaWduKHRoaXMsIHsgcmVmLCBvd25lciB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnb3duZXInLCB7CiAgICAgIHZhbHVlOiBvd25lciwKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKCiAgICBkZWZpbmUodGhpcywgeyByZWYgfSk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuY29uc3RydWN0b3IoMiknLCB7b3duZXI6IHRoaXMub3duZXIsIHJlZjogdGhpcy5yZWYscmF3OiB0aGlzLnJhd30pOwogIH0KCiAgZ2V0IHBhdGgoKSB7CiAgICByZXR1cm4gdGhpcy5yZWYucGF0aDsKICB9CgogIGdldCByb290KCkgewogICAgbGV0IHJvb3QgPSB0aGlzLnJlZi5yb290OwogICAgcmV0dXJuIHJvb3Q7CiAgfQoKICBnZXQgZG9jdW1lbnQoKSB7CiAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpOwogIH0KCiAgc2NvcGUodCA9IChvLCBwLCB2KSA9PiBbdi50YWdOYW1lLCB2XSkgewogICAgY29uc3QgeyBvd25lciwgcGF0aCwgZG9jdW1lbnQgfSA9IHRoaXM7CiAgICBsZXQgY2hhaW4gPSBPYmplY3QuZnJvbUVudHJpZXMoCiAgICAgIFsKICAgICAgICAuLi53YWxrUGF0aChwYXRoLCAocCwgaSwgYWJvcnQsIGlnbm9yZSkgPT4gewogICAgICAgICAgbGV0IHZhbHVlID0gcC5kZXJlZihvd25lci5yYXcsIHRydWUpOwoKICAgICAgICAgIGlmKGkgPT0gMCkgaWdub3JlKCk7CiAgICAgICAgICBpZighdmFsdWUgfHwgIXZhbHVlLmF0dHJpYnV0ZXMgfHwgISh2YWx1ZS50YWdOYW1lID09ICdsaWJyYXJ5JyB8fCB2YWx1ZS50YWdOYW1lID09ICdzaGVldCcgfHwgdmFsdWUuYXR0cmlidXRlcy5uYW1lKSkgaWdub3JlKCk7CgogICAgICAgICAgcmV0dXJuIHAudXAoMik7CiAgICAgICAgfSkKICAgICAgXS5tYXAocGF0aCA9PiB7CiAgICAgICAgbGV0IHYgPSBwYXRoLmRlcmVmKG93bmVyLnJhdywgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIHQob3duZXIsIHBhdGgsIHYpOwogICAgICB9KQogICAgKTsKCiAgICByZXR1cm4gY2hhaW47CgogICAgLyogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgbGV0IHJldCA9IHt9OwogICAgbGV0IHByZXYgPSBudWxsOwogICAgbGV0IGkgPSAwOwogICAgZG8gewogICAgICBpZihub2RlID09IHByZXYpIGJyZWFrOwogICAgICBpZigobm9kZS5hdHRyaWJ1dGVzICYmIG5vZGUuYXR0cmlidXRlcy5uYW1lKSB8fCBub2RlLnRhZ05hbWUgPT0gJ3NoZWV0JykgcmV0W25vZGUudGFnTmFtZV0gPSBub2RlOwogICAgICBwcmV2ID0gbm9kZTsKICAgICAgaSsrOwogICAgfSB3aGlsZSgobm9kZSA9IG5vZGUucGFyZW50Tm9kZSB8fCBub2RlLm93bmVyKSk7CiAgICByZXR1cm4gcmV0OyovCiAgfQogIGdldCBwcm9qZWN0KCkgewogICAgaWYoY2xhc3NOYW1lKHRoaXMub3duZXIpID09ICdFYWdsZVByb2plY3QnKSByZXR1cm4gdGhpcy5vd25lcjsKICAgIHJldHVybiB0aGlzLmRvY3VtZW50Lm93bmVyOwogIH0KCiAgZ2V0IG5vZGUoKSB7CiAgICBsZXQgbm9kZSA9IHRoaXMucGF0aC5kZXJlZih0aGlzLnJvb3QucmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgZ2V0IHJhdygpIHsKICAgIGNvbnN0IHsgcmVmLCBwYXRoLCByb290IH0gPSB0aGlzOwogICAgaWYocmVmKQogICAgICB0cnkgewogICAgICAgIHJldHVybiByZWYuZGVyZWZlcmVuY2UoKTsKICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQoKICAgIGlmKHBhdGggJiYgcm9vdCkKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gcGF0aC5kZXJlZihyb290LnJhdyk7CiAgICAgIH0gY2F0Y2goZSkge30KCiAgICAvL3Rocm93IG5ldyBFcnJvcihgRWFnbGVOb2RlLmdldCByYXcgOiAnTm8gcmVmIGFuZCBubyBwYXRoOiAke09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLmpvaW4oJywgJyl9YCk7CiAgICByZXR1cm4gdGhpcy5nZXRSYXcoKTsKICB9CgogIGNhY2hlRmllbGRzKCkgewogICAgc3dpdGNoICh0aGlzLnRhZ05hbWUpIHsKICAgICAgY2FzZSAnc2NoZW1hdGljJzoKICAgICAgICByZXR1cm4gWy8qWydzZXR0aW5ncyddLCBbJ2xheWVycyddLCovIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ10gLyosIFsnbW9kdWxlcyddKi9dOwogICAgICBjYXNlICdib2FyZCc6CiAgICAgICAgcmV0dXJuIFtbJ3BsYWluJ10sIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ2VsZW1lbnRzJ10sIFsnc2lnbmFscyddXTsKICAgICAgY2FzZSAnbW9kdWxlJzoKICAgICAgICByZXR1cm4gW1sncG9ydHMnXSwgWyd2YXJpYW50ZGVmcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ11dOwogICAgICBjYXNlICdzaGVldCc6CiAgICAgICAgcmV0dXJuIFtbJ2J1c3NlcyddLCBbJ25ldHMnXSwgWydpbnN0YW5jZXMnXSwgWydwbGFpbiddXTsKICAgICAgY2FzZSAnZGV2aWNlc2V0JzoKICAgICAgICByZXR1cm4gW1snZ2F0ZXMnXSwgWydkZXZpY2VzJ11dOwogICAgICBjYXNlICdkZXZpY2UnOgogICAgICAgIHJldHVybiBbWydjb25uZWN0cyddLCBbJ3RlY2hub2xvZ2llcyddXTsKICAgICAgY2FzZSAnbGlicmFyeSc6CiAgICAgICAgcmV0dXJuIFtbJ3BhY2thZ2VzJ10sIFsnc3ltYm9scyddLCBbJ2RldmljZXNldHMnXV07CiAgICB9CiAgfQoKICBnZXQgY2hpbGRDb25zdHJ1Y3RvcigpIHsKICAgIGxldCBwcm90b3MgPSBnZXRQcm90b3R5cGVDaGFpbih0aGlzKTsKICAgIGlmKGZ1bmN0aW9uTmFtZShwcm90b3NbMF0uY29uc3RydWN0b3IpID09ICdFYWdsZURvY3VtZW50JykgcHJvdG9zLnNoaWZ0KCk7CiAgICBsZXQgY3RvciA9IHByb3Rvc1swXS5jb25zdHJ1Y3RvcjsKICAgIC8vY29uc29sZS5sb2coJ2NoaWxkQ29uc3RydWN0b3I6JywgdGhpcywgY3Rvcik7CiAgICByZXR1cm4gY3RvcjsKICB9CgogIGluaXRDYWNoZShjdG9yID0gdGhpcy5jaGlsZENvbnN0cnVjdG9yLCBsaXN0Q3RvciA9IChvLCBwLCB2KSA9PiB2KSB7CiAgICBsZXQgZmllbGRzID0gdGhpcy5jYWNoZUZpZWxkcygpOwogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgaWYoZmllbGRzICYmIGZpZWxkcy5sZW5ndGgpIHsKICAgICAgZGVmaW5lKHRoaXMsIHsgY2FjaGU6IHt9LCBsaXN0czoge30gfSk7CiAgICAgIGxldCBsYXp5ID0ge307CiAgICAgIGxldCBsaXN0cyA9IHt9OwogICAgICBsZXQgbWFwcyA9IHt9OwogICAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICAgIGxldCBvd25lciA9IHRoaXMuZG9jdW1lbnQ7CiAgICAgIGxldCByYXcgPSB0aGlzLnJhdzsKICAgICAgZm9yKGxldCB4cGF0aCBvZiBmaWVsZHMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IGtleSA9IHhwYXRoW3hwYXRoLmxlbmd0aCAtIDFdOwogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3hwYXRoJywgeHBhdGgpOwogICAgICAgICAgbGV0IHBhdGggPSBuZXcgUG9pbnRlcihbLi4ubmV3IEltbXV0YWJsZVhQYXRoKHhwYXRoKS50b1BvaW50ZXIocmF3KV0uY29uY2F0KFsnY2hpbGRyZW4nXSkpOwogICAgICAgICAgbGF6eVtrZXldID0gKCkgPT4gdGhpcy5sb29rdXAoeHBhdGgsIHRydWUpOwogICAgICAgICAgaWYoIXBhdGguZGVyZWYocmF3LCB0cnVlKSkgewogICAgICAgICAgICAvLyAgIGNvbnNvbGUud2FybigncGF0aCBub3QgZm91bmQnLCBwYXRoICsgJycpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdGggPSB0aGlzLnJlZi5wYXRoLmRvd24oLi4ucGF0aCk7CiAgICAgICAgICBsaXN0c1trZXldID0gKCkgPT4gbGlzdEN0b3Iob3duZXIsIHBhdGgpOwogICAgICAgICAgbWFwc1trZXldID0KICAgICAgICAgICAgWydzaGVldHMnLCAnY29ubmVjdHMnLCAncGxhaW4nXS5pbmRleE9mKGtleSkgIT0gLTEKICAgICAgICAgICAgICA/IGxpc3RzW2tleV0KICAgICAgICAgICAgICA6ICgpID0+IEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdHNba2V5XSgpLCBbJ2JvYXJkJywgJ3NjaGVtYXRpYycsICdsaWJyYXJ5J10uaW5kZXhPZihrZXkpICE9IC0xID8gJ3RhZ05hbWUnIDoga2V5ID09ICdpbnN0YW5jZXMnID8gJ3BhcnQnIDoga2V5ID09ICdsYXllcnMnID8gWydudW1iZXInLCAnbmFtZSddIDogJ25hbWUnKTsKICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgIH0KICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcy5saXN0cywgbGlzdHMpOwogICAgICBkZWZpbmVHZXR0ZXJzU2V0dGVycyh0aGlzLmNhY2hlLCBsYXp5KTsKICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcywgbWFwcyk7CiAgICB9CiAgfQoKICBpbml0UmVsYXRpb24oa2V5LCBoYW5kbGVyLCBmbikgewogICAgbGV0IGVsZW0gPSB0aGlzOwogICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiB7CiAgICAgIGlmKHYgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGhhbmRsZXIodHlwZW9mIHYgPT0gJ3N0cmluZycgPyB2IDogdi5uYW1lKTsKICAgICAgbGV0IHZhbHVlID0gaGFuZGxlcigpIHx8IGVsZW0uYXR0ck1hcFtrZXldIHx8IGVsZW0uYXR0cmlidXRlc1trZXldOwogICAgICByZXR1cm4gZm4odmFsdWUsIGVsZW0sIGVsZW0uZG9jdW1lbnQpOwogICAgfSk7CiAgICAvL2NvbnNvbGUubG9nKGBpbml0UmVsYXRpb25gLGtleSx0aGlzW2tleV0pOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBhcHBlbmRDaGlsZChub2RlLCBhdHRyaWJ1dGVzID0ge30pIHsKICAgIGlmKHR5cGVvZiBub2RlID09ICdzdHJpbmcnKSB7CiAgICAgIG5vZGUgPSB7CiAgICAgICAgdGFnTmFtZTogbm9kZSwKICAgICAgICBjaGlsZHJlbjogW10KICAgICAgfTsKICAgIH0KICAgIG5vZGUuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICB0aGlzLnJlZi5jb25jYXQoWydjaGlsZHJlbiddKS5kZXJlZmVyZW5jZSgpLnB1c2gobm9kZSk7CiAgICByZXR1cm4gdGhpcy5sYXN0Q2hpbGQ7CiAgfQoKICByZXBsYWNlKG5vZGUpIHsKICAgIHRoaXMucmVmLnJlcGxhY2Uobm9kZSk7CiAgfQoKICBzdGF0aWMgbWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpIHsKICAgIGxldCBwcmVkID0gcHJlZGljYXRlOwogICAgaWYocHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICBsZXQgcmUgPSBwcmVkOwogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IHJlLnRlc3Qodi50YWdOYW1lKTsKICAgIH0gZWxzZSBpZih0eXBlb2YgcHJlZCA9PSAnc3RyaW5nJykgewogICAgICBsZXQgbmFtZSA9IHByZWQ7CiAgICAgIHByZWQgPSAodiwgcCwgbykgPT4gdi50YWdOYW1lID09PSBuYW1lOwogICAgfSBlbHNlIGlmKGlzT2JqZWN0KHByZWQpICYmIHR5cGVvZiBwcmVkICE9ICdmdW5jdGlvbicpIHsKICAgICAgbGV0IGtleXMgPSBBcnJheS5pc0FycmF5KHByZWQpID8gcHJlZCA6IE9iamVjdC5rZXlzKHByZWQpOwogICAgICBsZXQgdmFsdWVzID0ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiBbLi4uYWNjLCBwcmVkW2tleV1dLCBbXSk7CgogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IGtleXMuZXZlcnkoKGtleSwgaSkgPT4gKGtleSA9PSAndGFnTmFtZScgPyB2W2tleV0gPT0gdmFsdWVzW2ldIDogdi5hdHRyaWJ1dGVzW2tleV0gPT0gdmFsdWVzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gcHJlZDsKICB9CgogICpnZXRBbGwocHJlZGljYXRlLCB0cmFuc2Zvcm0pIHsKICAgIC8vICB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIGxldCBuYW1lOwogICAgbGV0IHByZWQgPSBFYWdsZU5vZGUubWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpOwogICAgbGV0IGN0b3IgPSB0aGlzW1N5bWJvbC5zcGVjaWVzXTsKICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybSB8fCAoKC4uLmFyZ3MpID0+IGFyZ3MpOwogICAgbGV0IGNvbmQgPSBwcmVkOwogICAgZm9yKGxldCBbdiwgcF0gb2YgZGVlcC5pdGVyYXRlKHRoaXMucmF3LCBjb25kIC8qLCBkZWVwLlJFVFVSTl9WQUxVRV9QQVRIKi8pKSB7CiAgICAgIHlpZWxkIHRyYW5zZm9ybSh2LCBbLi4udGhpcy5wYXRoLCAuLi5wXSwgdGhpcy5kb2N1bWVudCA/PyB0aGlzLnJvb3QpOwogICAgfQogIH0KCiAgZ2V0KHByZWQsIHRyYW5zZm9ybSkgewogICAgLy9jb25zb2xlLmxvZygnZ2V0JywgdGhpcywgcHJlZCk7CiAgICBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUocHJlZCk7CiAgICBsZXQgY3RvciA9IHRoaXNbU3ltYm9sLnNwZWNpZXNdOwogICAgdHJhbnNmb3JtID0gdHJhbnNmb3JtIHx8ICgoLi4uYXJncykgPT4gYXJncyk7CiAgICBsZXQgY29uZCA9IHByZWQ7CiAgICBsZXQgZm91bmQgPSBkZWVwLmZpbmQodGhpcy5yYXcsIGNvbmQgLyosIGRlZXAuUkVUVVJOX1ZBTFVFX1BBVEgqLyk7CgogICAgaWYoZm91bmQpIHsKICAgICAgbGV0IFt2LCBwXSA9IGZvdW5kOwogICAgICByZXR1cm4gdHJhbnNmb3JtKHYsIFsuLi50aGlzLnBhdGgsIC4uLnBdLCB0aGlzLmRvY3VtZW50ID8/IHRoaXMucm9vdCk7CiAgICB9CgogICAgcmV0dXJuIGZvdW5kOwogIH0KCiAgZmluZChuYW1lLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGxldCBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUobmFtZSk7CiAgICBsZXQgcmVzdWx0ID0gZGVlcC5maW5kKHRoaXMucmF3LCBwcmVkLCBbLi4udGhpcy5wYXRoXSk7IC8vdGhpcy5nZXRBbGwoKHYsIHAsIG8pID0+IChwcmVkKHYsIHAsIG8pID8gLTEgOiBmYWxzZSksIHRyYW5zZm9ybSkpCgogICAgaWYocmVzdWx0KSB7CiAgICAgIGNvbnN0IHsgcGF0aCwgdmFsdWUgfSA9IHJlc3VsdDsKICAgICAgLy9jb25zb2xlLmxvZygiZm91bmQ6Iix7cGF0aCx2YWx1ZX0pOwogICAgICByZXR1cm4gdmFsdWUgPyB0cmFuc2Zvcm0odmFsdWUsIHBhdGgpIDogdmFsdWU7CiAgICB9CiAgfQoKICBnZXRNYXAoZW50aXR5KSB7CiAgICBsZXQgYSA9IHRoaXMuY2FjaGVbZW50aXR5ICsgJ3MnXTsKICAgIGlmKGEgJiYgYS5jaGlsZHJlbikgcmV0dXJuIG5ldyBNYXAoWy4uLmEuY2hpbGRyZW5dLm1hcChlID0+IFtlLm5hbWUsIGVdKSk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGdldEJ5TmFtZShlbGVtZW50LCBuYW1lLCBhdHRyID0gJ25hbWUnLCB0ID0gKFt2LCBsLCBkXSkgPT4gbWFrZUVhZ2xlTm9kZShkLCB0aGlzLnJlZi5jb25jYXQoWy4uLmxdKSwgdGhpcy5jaGlsZENvbnN0cnVjdG9yKSkgewogICAgZm9yKGxldCBbdiwgbCwgZF0gb2YgdGhpcy5pdGVyYXRvcihbXSwgaXQgPT4gaXQpKSB7CiAgICAgIGlmKHR5cGVvZiB2ID09ICdvYmplY3QnICYmICd0YWdOYW1lJyBpbiB2ICYmICdhdHRyaWJ1dGVzJyBpbiB2ICYmIGF0dHIgaW4gdi5hdHRyaWJ1dGVzKSB7CiAgICAgICAgaWYodi50YWdOYW1lID09IGVsZW1lbnQgJiYgdi5hdHRyaWJ1dGVzW2F0dHJdID09IG5hbWUpIHJldHVybiB0KFt2LCBsLCBkXSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZ2V0IG5hbWVzKCkgewogICAgbGV0IG5hbWVzID0gW107CiAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICBkbyB7CiAgICAgIGxldCBub2RlID0gcmVmLmRlcmVmZXJlbmNlKCk7CiAgICAgIGlmKG5vZGUuYXR0cmlidXRlcy5uYW1lICE9PSB1bmRlZmluZWQpIG5hbWVzLnB1c2goW25vZGUudGFnTmFtZSwgbm9kZS5hdHRyaWJ1dGVzLm5hbWVdKTsKICAgICAgcmVmID0gcmVmLnVwKDIpOwogICAgfSB3aGlsZShyZWYucGF0aC5sZW5ndGgpOwogICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhuYW1lcyk7CiAgfQoKICBnZXQgbmV4dFNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5uZXh0U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcHJldlNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5wcmV2U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcGFyZW50Tm9kZSgpIHsKICAgIGlmKHRoaXMucGF0aC5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7CgogICAgLyogICBjb25zdCByZWYgPSB0aGlzLnJlZi51cCgyKTsqLwogICAgY29uc3QgeyByZWYsIHBhdGgsIHJvb3QsIHJhdyB9ID0gdGhpczsKICAgIGxldCBkb2MgPSB0aGlzLmdldERvY3VtZW50KCk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXJlbnROb2RlJywgcGF0aCArICcnLCBkb2MpOwogICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdLmdldChkb2MsIHJlZi51cCgyKSk7CiAgfQoKICBnZXQgZmlyc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgMCk7CiAgICByZXR1cm4gcmVmID8gbmV3IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdKHRoaXMsIHJlZikgOiBudWxsOwogIH0KCiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgLTEpOwogICAgcmV0dXJuIHJlZiA/IG5ldyB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXSh0aGlzLCByZWYpIDogbnVsbDsKICB9CgogIFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZTsgLy9FYWdsZU5vZGUuaW5zcGVjdCh0aGlzKTsKICB9CgogIHRvU3RyaW5nKCkgewogICAgcmV0dXJuIHRvWE1MKHRoaXMucmF3KTsKICAgIC8vICAgIHJldHVybiB0WG1sLnRvU3RyaW5nKFt0aGlzLnJhd10pOwogIH0KCiAgaW5zcGVjdChkZXB0aCwgb3B0aW9ucykgewogICAgbGV0IGF0dHJzID0gWycnXTsKICAgIGlmKGRlcHRoID4gMTAwKSB0aHJvdyBuZXcgRXJyb3IoYEVhZ2xlTm9kZS5pbnNwZWN0KClgKTsKCiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuaW5zcGVjdCcsIGRlcHRoLCB0aGlzLnRhZ05hbWUpOwoKICAgIGNvbnN0IHsgcmF3IH0gPSB0aGlzOwogICAgY29uc3QgeyBjaGlsZHJlbiwgdGFnTmFtZSwgYXR0cmlidXRlcyA9IHt9IH0gPSByYXc7CiAgICBjb25zdCB7IGF0dHJpYnV0ZUxpc3RzID0gRWFnbGVFbGVtZW50LmF0dHJpYnV0ZUxpc3RzIH0gPSB0aGlzLmNvbnN0cnVjdG9yOwoKICAgIGNvbnN0IGF0dHJpYnV0ZUxpc3QgPSBhdHRyaWJ1dGVMaXN0c1t0YWdOYW1lXSB8fCBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKTsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlTm9kZS5pbnNwZWN0JywgIHsgdGFnTmFtZSwgYXR0cmlidXRlTGlzdCB9KTsKCiAgICBjb25zdCBnZXRBdHRyID0gbmFtZSA9PiB7CiAgICAgIGZvcihsZXQgYXR0ck1hcCBvZiBbYXR0cmlidXRlcywgdGhpcywgcmF3XSkgaWYobmFtZSBpbiBhdHRyTWFwKSByZXR1cm4gYXR0ck1hcFtuYW1lXTsKICAgIH07CiAgICBpZih0cnVlKSB7CiAgICAgIGF0dHJzID0gYXR0cmlidXRlTGlzdAogICAgICAgIC5maWx0ZXIobmFtZSA9PiBnZXRBdHRyKG5hbWUpICE9PSB1bmRlZmluZWQpCiAgICAgICAgLnJlZHVjZSgKICAgICAgICAgIChhdHRycywgYXR0cikgPT4KICAgICAgICAgICAgY29uY2F0KAogICAgICAgICAgICAgIGF0dHJzLAogICAgICAgICAgICAgICcgJywKICAgICAgICAgICAgICB0ZXh0KGF0dHIsIDEsIDMzKSwKICAgICAgICAgICAgICB0ZXh0KCc6JywgMSwgMzYpLAogICAgICAgICAgICAgIC9eKGFsdGRpc3RhbmNlfGNsYXNzfGNvbG9yfGN1cnZlfGRpYW1ldGVyfGRpc3RhbmNlfGRyaWxsfGZpbGx8bGF5ZXJ8bXVsdGlwbGV8bnVtYmVyfHJhZGl1c3xyYXRpb3xzaXplfHdpZHRofHhbMS0zXT98eVsxLTNdPykkLy50ZXN0KGF0dHIpCiAgICAgICAgICAgICAgICA/IHRleHQoZ2V0QXR0cihhdHRyKSwgMSwgMzYpCiAgICAgICAgICAgICAgICA6IHRleHQoIiciICsgZ2V0QXR0cihhdHRyKSArICInIiwgMSwgMzIpCiAgICAgICAgICAgICksCiAgICAgICAgICBhdHRycwogICAgICAgICk7CiAgICB9CiAgICBsZXQgbnVtQ2hpbGRyZW4gPSBjaGlsZHJlbiA/IGNoaWxkcmVuLmxlbmd0aCA6IDA7CiAgICBsZXQgcmV0ID0gWycnXTsKICAgIGxldCB0YWcgPSB0aGlzLnRhZ05hbWUgfHwgcmF3LnRhZ05hbWU7CiAgICBpZih0YWcpIHJldCA9IGNvbmNhdChyZXQsIHRleHQoJzwnLCAxLCAzNiksIHRleHQodGFnLCAxLCAzMSksIGF0dHJzLCB0ZXh0KG51bUNoaWxkcmVuID09IDAgPyAnIC8+JyA6ICc+JywgMSwgMzYpKTsKICAgIGlmKHRoaXMuZmlsZW5hbWUpIHJldCA9IGNvbmNhdChyZXQsIGAgZmlsZW5hbWU9IiR7dGhpcy5maWxlbmFtZX0iYCk7CiAgICBpZihudW1DaGlsZHJlbiA+IDApIHsKICAgICAgaWYoZGVwdGggPCAxKSB7CiAgICAgICAgcmV0ICs9ICgnXG4nICsgIHRvWE1MKGNoaWxkcmVuLCBvcHRpb25zLmRlcHRoIC0gZGVwdGgpKS5yZXBsYWNlKC9cbi9nLCAnXG4gICcpOwogICAgICAgIHJldCArPSAnXG4nOwogICAgICB9IGVsc2UgewogICAgICAgIHJldCA9IGNvbmNhdChyZXQsIGB7Li4uJHtudW1DaGlsZHJlbn0gY2hpbGRyZW4uLi59YCk7CiAgICAgIH0KICAgICAgcmV0ICs9IGA8LyR7dGFnfT5gOwogICAgfQogICAgcmV0dXJuIChyZXQgPSBjb25jYXQodGV4dCh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcsIDApLCByZXQpKTsKICB9CgogIFtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXShkZXB0aCwgb3B0aW9ucykgewogICAgcmV0dXJuIHRoaXMuaW5zcGVjdChkZXB0aCwgb3B0aW9ucyk7CiAgfQoKICBsb29rdXAoeHBhdGgsIHQgPSAobywgcCwgdikgPT4gW28sIHBdKSB7CiAgICAvKiBpZighKHhwYXRoIGluc3RhbmNlb2YgSW1tdXRhYmxlWFBhdGgpKSAqLyB4cGF0aCA9IG5ldyBJbW11dGFibGVYUGF0aCh4cGF0aCk7CiAgICAvLyBjb25zb2xlLmxvZygnRWFnbGVOb2RlLmxvb2t1cCgnLCB4cGF0aCwgJywnLCB0ICsgJycsICcpJyk7CgogICAgbGV0IHBhdGggPSBuZXcgUG9pbnRlcihbLi4ueHBhdGgudG9Qb2ludGVyKHRoaXMucmF3KV0pOyAvL1suLi54cGF0aF0pOwogICAgbGV0IHZhbHVlID0geHBhdGguZGVyZWYodGhpcy5yYXcsIHRydWUpOwogICAgbGV0IHJldCA9IHQodGhpcywgcGF0aCwgdmFsdWUpOwogICAgcmV0dXJuIHJldDsKICB9CgogIGdldEJvdW5kcyhwcmVkID0gZSA9PiB0cnVlKSB7CiAgICBsZXQgYmIgPSBuZXcgQkJveCgpOwogICAgaWYodGhpcy5jaGlsZHJlbiAmJiB0aGlzLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICBmb3IobGV0IGVsZW1lbnQgb2YgdGhpcy5nZXRBbGwoZSA9PiBlLnRhZ05hbWUgIT09IHVuZGVmaW5lZCAmJiBwcmVkKGUpKSkgewogICAgICAgIGxldCBnID0gZWxlbWVudD8uZ2VvbWV0cnk7CiAgICAgICAgaWYoZykgewogICAgICAgICAgbGV0IGJvdW5kID0gdHlwZW9mIGcuYmJveCA9PSAnZnVuY3Rpb24nID8gZy5iYm94KCkgOiBnOwogICAgICAgICAgYmIudXBkYXRlKGJvdW5kLCAwLCBlbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGxldCBnID0gdGhpcy5nZW9tZXRyeTsKICAgIGlmKGcpIGJiLnVwZGF0ZShnKTsKICAgIHJldHVybiBiYjsKICB9CgogIGdldCBnZW9tZXRyeSgpIHsKICAgIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gdGhpcy5yYXc7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcyk7CiAgICBjb25zdCBtYWtlR2V0dGVyU2V0dGVyID0gayA9PiB2ID0+IHYgPT09IHVuZGVmaW5lZCA/IHRoaXNba10gOiAodGhpc1trXSA9IHYpOwogICAgaWYoWyd4MScsICd5MScsICd4MicsICd5MiddLmV2ZXJ5KHByb3AgPT4ga2V5cy5pbmNsdWRlcyhwcm9wKSkpIHsKICAgICAgcmV0dXJuIExpbmUuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgIH0gZWxzZSBpZihbJ3gnLCAneSddLmV2ZXJ5KHByb3AgPT4ga2V5cy5pbmNsdWRlcyhwcm9wKSkpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSBQb2ludCh0aGlzKTsKICAgICAgaWYoa2V5cy5pbmNsdWRlcygncmFkaXVzJykpIHJldHVybiBDaXJjbGUuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgICAgaWYoWyd3aWR0aCcsICdoZWlnaHQnXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSByZXR1cm4gUmVjdC5iaW5kKHRoaXMsIG51bGwsIG1ha2VHZXR0ZXJTZXR0ZXIpOwogICAgICByZXR1cm4gUG9pbnQuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgIH0KICB9CgogIGdldERvY3VtZW50KCkgewogICAgbGV0IG8gPSB0aGlzOwogICAgd2hpbGUoby5vd25lcikgewogICAgICBpZihvLnhtbCAhPT0gdW5kZWZpbmVkKSBicmVhazsKICAgICAgbyA9IG8ub3duZXI7CiAgICB9CiAgICByZXR1cm4gbzsKICB9CgogIHhwYXRoKCkgewogICAgcmV0dXJuIHRyeUNhdGNoKAogICAgICAoKSA9PiBJbW11dGFibGVYUGF0aC5mcm9tKHRoaXMucGF0aCwgdGhpcy5kb2N1bWVudCksCiAgICAgIHhwYXRoID0+IHhwYXRoLAogICAgICAoKSA9PiBPYmplY3Quc2V0UHJvdG90eXBlT2YoWy4uLnRoaXMucGF0aF0sIEltbXV0YWJsZVhQYXRoLnByb3RvdHlwZSkKICAgICk7CiAgfQoKICBlbnRyaWVzKHQgPSAoW3YsIGwsIGRdKSA9PiBbbFtsLmxlbmd0aCAtIDFdLCBFYWdsZUVsZW1lbnQuZ2V0KGQsIGwpXSkgewogICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoW10sIHQpOwogIH0KCiAgKml0ZXJhdG9yKC4uLmFyZ3MpIHsKICAgIGxldCBwcmVkaWNhdGUgPSB0eXBlb2YgYXJnc1swXSA9PSAnZnVuY3Rpb24nID8gYXJncy5zaGlmdCgpIDogYXJnID0+IHRydWU7CiAgICBsZXQgcGF0aCA9IChBcnJheS5pc0FycmF5KGFyZ3NbMF0pICYmIGFyZ3Muc2hpZnQoKSkgfHwgW107CiAgICBsZXQgdCA9IHR5cGVvZiBhcmdzWzBdID09ICdmdW5jdGlvbicgPyBhcmdzLnNoaWZ0KCkgOiAoW3YsIGwsIGRdKSA9PiBbdHlwZW9mIHYgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCAmJiAndGFnTmFtZScgaW4gdiA/IG5ldyB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXShkLCBsKSA6IHYsIGwsIGRdOwogICAgbGV0IG93bmVyID0gaXNPYmplY3QodGhpcykgJiYgJ293bmVyJyBpbiB0aGlzID8gdGhpcy5vd25lciA6IHRoaXM7CiAgICBsZXQgcm9vdCA9IHRoaXMucm9vdCB8fCAob3duZXIueG1sICYmIG93bmVyLnhtbFswXSk7CiAgICBsZXQgbm9kZSA9IHJvb3Q7CiAgICBpZihwYXRoLmxlbmd0aCA+IDApIG5vZGUgPSBkZWVwLmdldChub2RlLCBwYXRoKTsKICAgIGZvcihsZXQgW3YsIGxdIG9mIGRlZXAuaXRlcmF0ZShub2RlLCAodiwgcCkgPT4gKHByZWRpY2F0ZSh2LCBwKSA/IC0xIDogcC5sZW5ndGggPiAxID8gcFtwLmxlbmd0aCAtIDJdID09ICdjaGlsZHJlbicgOiB0cnVlKSkpIHsKICAgICAgaWYoIShsIGluc3RhbmNlb2YgSW1tdXRhYmxlUGF0aCkpIGwgPSBuZXcgSW1tdXRhYmxlUGF0aChsKTsKICAgICAgaWYodHlwZW9mIHYgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCAmJiAndGFnTmFtZScgaW4gdikgaWYgKHByZWRpY2F0ZSh2LCBsLCBvd25lcikpIHlpZWxkIHQoW3YsIGwsIG93bmVyXSk7CiAgICB9CiAgfQoKICB0b1hNTChpbmRlbnQgPSAnJykgewogICAgcmV0dXJuIHRvWE1MKHRoaXMucmF3KTsgLy8sIDEwMDAwLCAnIicsIGluZGVudCk7CiAgfQoKICAvKiBzdGF0aWMgaW5zcGVjdCA9IChlLCBkLCBjID0geyBkZXB0aDogMCwgYnJlYWtMZW5ndGg6IDQwMCwgcGF0aDogdHJ1ZSB9KSA9PiB7CiAgICBjb25zdCB7IGRlcHRoLCBicmVha0xlbmd0aCB9ID0gYzsKICAgIGxldCBvID0gZTsKICAgIGxldCByID0gKGUgJiYgZS5yYXcpIHx8IGU7CiAgICBpZih0eXBlb2YgciA9PSAnc3RyaW5nJykgcmV0dXJuIHRleHQociwgMSwgMzYpOwogICAgbGV0IHggPSAnJzsKICAgIHRyeSB7CiAgICAgIHggPSBpbnNwZWN0KHIsIHsKICAgICAgICBkZXB0aDogZGVwdGggKiAyLAogICAgICAgIGJyZWFrTGVuZ3RoLAogICAgICAgIGNvbG9yczogIWlzQnJvd3NlcigpCiAgICAgIH0pOwogICAgfSBjYXRjaChlcnIpIHt9CiAgICBsZXQgcyA9ICfij5AnOwogICAgeCA9IHguc3Vic3RyaW5nKHguaW5kZXhPZigndGFnTmFtZScpICsgMTQpOwogICAgeCA9IE9iamVjdC5lbnRyaWVzKChyICYmIHIuYXR0cmlidXRlcykgfHwge30pLm1hcCgKICAgICAgKFtrZXksIHZhbHVlXSkgPT4gdGV4dChrZXksIDMzKSArIHRleHQocywgMCwgMzcpICsgdGV4dCh2YWx1ZSwgMSwgMzYpCiAgICApOwogICAgeC51bnNoaWZ0KHIudGFnTmFtZSk7CiAgICBsZXQgW3AsIC4uLmFycl0gPSB4OwogICAgcCA9IHRleHQoYOOAlGAsIDEsIDM3KSArIHRleHQocCwgMzgsIDUsIDE5OSk7CiAgICBsZXQgbCA9IGUucGF0aCArICcnOwogICAgbGV0IHR5cGUgPSBjbGFzc05hbWUoZSk7CiAgICBpZihhcnIubGVuZ3RoKSBhcnIudW5zaGlmdCgnJyk7CiAgICBsZXQgcmV0ID0gW3RleHQodHlwZSwgMzgsIDUsIDIxOSksIHAsIHRleHQoJ+Kng+Kdi+KtlycsIDM4LCA1LCAxMTIpLCAuLi5hcnIsIHRleHQoYOOAlWAsIDEsIDM3KV07CgogICAgcmV0dXJuIChsLnRyaW0oKSA/IGwgKyAnICAnIDogJycpICsgcmV0LmpvaW4oJyAnKSArIHRleHQoJycsIDApOwogIH07Ki8KfQoKZGVmaW5lKEVhZ2xlTm9kZS5wcm90b3R5cGUsIHsKICBnZXRSYXc6IG1lbW9pemUoZnVuY3Rpb24gKCkgewogICAgY29uc3QgeyBvd25lciwgcmVmLCBkb2N1bWVudCB9ID0gdGhpczsKICAgIGxldCByID0gcmVmLnBhdGguZGVyZWYob3duZXIucmF3LCB0cnVlKTsKICAgIGlmKCFyKSB7CiAgICAgIHIgPSByZWYucGF0aC5kZXJlZihyZWYucm9vdCkgfHwgcmVmLnBhdGguZGVyZWYob3duZXIpOwogICAgICBpZighcikgciA9IGRvY3VtZW50Lm1hcHBlci5hdChyZWYucGF0aCk7CiAgICB9CiAgICByZXR1cm4gcjsKICB9KQp9KTsKAAAAAAAAAAABQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACoKgAAAAAAAKgqAAAAAAAAAAAAAAAA8L8"
				],
				[
					416,
					1,
					"insert",
					{
						"characters": "\ncns"
					},
					"BgAAABcnAAAAAAAAGCcAAAAAAAAAAAAAGCcAAAAAAAAaJwAAAAAAAAAAAAAaJwAAAAAAABwnAAAAAAAAAAAAABwnAAAAAAAAHScAAAAAAAAAAAAAHScAAAAAAAAeJwAAAAAAAAAAAAAeJwAAAAAAAB8nAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAXJwAAAAAAABcnAAAAAAAAAAAAAAAA8L8"
				],
				[
					417,
					3,
					"left_delete",
					null,
					"AwAAAB4nAAAAAAAAHicAAAAAAAABAAAAcx0nAAAAAAAAHScAAAAAAAABAAAAbhwnAAAAAAAAHCcAAAAAAAABAAAAYw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfJwAAAAAAAB8nAAAAAAAAAAAAAAAA8L8"
				],
				[
					418,
					1,
					"insert",
					{
						"characters": "this.cjhil"
					},
					"CgAAABwnAAAAAAAAHScAAAAAAAAAAAAAHScAAAAAAAAeJwAAAAAAAAAAAAAeJwAAAAAAAB8nAAAAAAAAAAAAAB8nAAAAAAAAICcAAAAAAAAAAAAAICcAAAAAAAAhJwAAAAAAAAAAAAAhJwAAAAAAACInAAAAAAAAAAAAACInAAAAAAAAIycAAAAAAAAAAAAAIycAAAAAAAAkJwAAAAAAAAAAAAAkJwAAAAAAACUnAAAAAAAAAAAAACUnAAAAAAAAJicAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAcJwAAAAAAABwnAAAAAAAAAAAAAAAA8L8"
				],
				[
					419,
					4,
					"left_delete",
					null,
					"BAAAACUnAAAAAAAAJScAAAAAAAABAAAAbCQnAAAAAAAAJCcAAAAAAAABAAAAaSMnAAAAAAAAIycAAAAAAAABAAAAaCInAAAAAAAAIicAAAAAAAABAAAAag",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAmJwAAAAAAACYnAAAAAAAAAAAAAAAA8L8"
				],
				[
					420,
					1,
					"insert",
					{
						"characters": "hildren.length"
					},
					"DgAAACInAAAAAAAAIycAAAAAAAAAAAAAIycAAAAAAAAkJwAAAAAAAAAAAAAkJwAAAAAAACUnAAAAAAAAAAAAACUnAAAAAAAAJicAAAAAAAAAAAAAJicAAAAAAAAnJwAAAAAAAAAAAAAnJwAAAAAAACgnAAAAAAAAAAAAACgnAAAAAAAAKScAAAAAAAAAAAAAKScAAAAAAAAqJwAAAAAAAAAAAAAqJwAAAAAAACsnAAAAAAAAAAAAACsnAAAAAAAALCcAAAAAAAAAAAAALCcAAAAAAAAtJwAAAAAAAAAAAAAtJwAAAAAAAC4nAAAAAAAAAAAAAC4nAAAAAAAALycAAAAAAAAAAAAALycAAAAAAAAwJwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAiJwAAAAAAACInAAAAAAAAAAAAAAAA8L8"
				],
				[
					422,
					1,
					"cut",
					null,
					"AQAAABwnAAAAAAAAHCcAAAAAAAAUAAAAdGhpcy5jaGlsZHJlbi5sZW5ndGg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwJwAAAAAAABwnAAAAAAAAAAAAAAAAQEA"
				],
				[
					425,
					1,
					"paste",
					null,
					"AQAAAEcnAAAAAAAAWycAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABHJwAAAAAAAEcnAAAAAAAAAAAAAAAA8L8"
				],
				[
					427,
					3,
					"left_delete",
					null,
					"AwAAABonAAAAAAAAGicAAAAAAAACAAAAICAYJwAAAAAAABgnAAAAAAAAAgAAACAgFycAAAAAAAAXJwAAAAAAAAEAAAAK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAcJwAAAAAAABwnAAAAAAAAAAAAAAAAf0A"
				],
				[
					448,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAhQAAAaW1wb3J0IHsgRWFnbGVSZWYsIEVhZ2xlUmVmZXJlbmNlIH0gZnJvbSAnLi9yZWYuanMnOwppbXBvcnQgKiBhcyBkZWVwIGZyb20gJy4uL2RlZXAuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyc1NldHRlcnMsIGZ1bmN0aW9uTmFtZSwgZ2V0UHJvdG90eXBlQ2hhaW4sIGlzQXJyYXksIGlzT2JqZWN0LCBtZW1vaXplLCB0cnlDYXRjaCB9IGZyb20gJy4uL21pc2MuanMnOwppbXBvcnQgeyBsYXp5TWVtYmVycyB9IGZyb20gJy4uL2xhenlJbml0aWFsaXplci5qcyc7CmltcG9ydCB7IHRya2wgfSBmcm9tICcuLi90cmtsLmpzJzsKaW1wb3J0IHsgdGV4dCwgY29uY2F0IH0gZnJvbSAnLi9jb21tb24uanMnOwppbXBvcnQgeyBFYWdsZU5vZGVNYXAgfSBmcm9tICcuL25vZGVNYXAuanMnOwppbXBvcnQgeyBJbW11dGFibGVYUGF0aCB9IGZyb20gJy4uL3htbC94cGF0aC5qcyc7CmltcG9ydCB7IEJCb3ggfSBmcm9tICcuLi9nZW9tLmpzJzsKaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJy4uL3BvaW50ZXIuanMnOwppbXBvcnQgeyByZWFkIGFzIGZyb21YTUwsIHdyaXRlIGFzIHRvWE1MIH0gZnJvbSAnLi4veG1sLmpzJzsKCmV4cG9ydCBjb25zdCBtYWtlRWFnbGVOb2RlID0gKG93bmVyLCByZWYsIGN0b3IpID0+IHsKICBpZighY3RvcikgY3RvciA9IG93bmVyLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKICBsZXQgZSA9IGN0b3IuZ2V0ID8gY3Rvci5nZXQob3duZXIsIHJlZikgOiBuZXcgY3Rvcihvd25lciwgcmVmKTsKICByZXR1cm4gZTsKfTsKCmZ1bmN0aW9uKiB3YWxrUGF0aChwLCB0ID0gcCA9PiBwLnVwKDEpKSB7CiAgbGV0IHJ1biA9IHRydWU7CiAgbGV0IHNraXA7CiAgbGV0IG5leHQ7CiAgY29uc3QgYWJvcnQgPSAoKSA9PiAocnVuID0gZmFsc2UpOwogIGNvbnN0IHNldCA9IHYgPT4gKHAgPSB2KTsKICBjb25zdCBpZ25vcmUgPSAoKSA9PiAoc2tpcCA9IHRydWUpOwogIGZvcihsZXQgcCA9IHRoaXMsIGkgPSAwOyBwOyBwID0gbmV4dCkgewogICAgbmV4dCA9IHQocCwgaSsrLCBhYm9ydCwgaWdub3JlKTsKICAgIGlmKCFza2lwKSB5aWVsZCBwOwogICAgaWYoIXJ1bikgYnJlYWs7CiAgICBza2lwID0gZmFsc2U7CiAgfQp9CgpleHBvcnQgY2xhc3MgRWFnbGVOb2RlIHsKICByZWYgPSBudWxsOwoKICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBFYWdsZU5vZGU7CiAgfQoKICBjb25zdHJ1Y3Rvcihvd25lciwgcmVmLCByYXcpIHsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlTm9kZS5jb25zdHJ1Y3RvcigxKScsIHtvd25lcjogb3duZXIsIHJlZixyYXd9KTsKCiAgICAvL2lmKCFvd25lcikgb3duZXIgPSBuZXcgRWFnbGVSZWZlcmVuY2UocmVmLnJvb3QsIFtdKS5kZXJlZmVyZW5jZSgpOwogICAgaWYoIShyZWYgaW5zdGFuY2VvZiBFYWdsZVJlZmVyZW5jZSkpIHJlZiA9IG5ldyBFYWdsZVJlZihvd25lciAmJiAncmVmJyBpbiBvd25lciA/IG93bmVyLnJlZi5yb290IDogb3duZXIsIFsuLi5yZWZdKTsKICAgIGlmKCFyYXcpIHJhdyA9IHJlZi5kZXJlZmVyZW5jZSgpOwogICAgLy9jb25zb2xlLmxvZygiRWFnbGVOb2RlLmNvbnN0cnVjdG9yIix7b3duZXIscmVmLHJhd30pOwogICAgLy9PYmplY3QuYXNzaWduKHRoaXMsIHsgcmVmLCBvd25lciB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnb3duZXInLCB7CiAgICAgIHZhbHVlOiBvd25lciwKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKCiAgICBkZWZpbmUodGhpcywgeyByZWYgfSk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuY29uc3RydWN0b3IoMiknLCB7b3duZXI6IHRoaXMub3duZXIsIHJlZjogdGhpcy5yZWYscmF3OiB0aGlzLnJhd30pOwogIH0KCiAgZ2V0IHBhdGgoKSB7CiAgICByZXR1cm4gdGhpcy5yZWYucGF0aDsKICB9CgogIGdldCByb290KCkgewogICAgbGV0IHJvb3QgPSB0aGlzLnJlZi5yb290OwogICAgcmV0dXJuIHJvb3Q7CiAgfQoKICBnZXQgZG9jdW1lbnQoKSB7CiAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpOwogIH0KCiAgc2NvcGUodCA9IChvLCBwLCB2KSA9PiBbdi50YWdOYW1lLCB2XSkgewogICAgY29uc3QgeyBvd25lciwgcGF0aCwgZG9jdW1lbnQgfSA9IHRoaXM7CiAgICBsZXQgY2hhaW4gPSBPYmplY3QuZnJvbUVudHJpZXMoCiAgICAgIFsKICAgICAgICAuLi53YWxrUGF0aChwYXRoLCAocCwgaSwgYWJvcnQsIGlnbm9yZSkgPT4gewogICAgICAgICAgbGV0IHZhbHVlID0gcC5kZXJlZihvd25lci5yYXcsIHRydWUpOwoKICAgICAgICAgIGlmKGkgPT0gMCkgaWdub3JlKCk7CiAgICAgICAgICBpZighdmFsdWUgfHwgIXZhbHVlLmF0dHJpYnV0ZXMgfHwgISh2YWx1ZS50YWdOYW1lID09ICdsaWJyYXJ5JyB8fCB2YWx1ZS50YWdOYW1lID09ICdzaGVldCcgfHwgdmFsdWUuYXR0cmlidXRlcy5uYW1lKSkgaWdub3JlKCk7CgogICAgICAgICAgcmV0dXJuIHAudXAoMik7CiAgICAgICAgfSkKICAgICAgXS5tYXAocGF0aCA9PiB7CiAgICAgICAgbGV0IHYgPSBwYXRoLmRlcmVmKG93bmVyLnJhdywgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIHQob3duZXIsIHBhdGgsIHYpOwogICAgICB9KQogICAgKTsKCiAgICByZXR1cm4gY2hhaW47CgogICAgLyogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgbGV0IHJldCA9IHt9OwogICAgbGV0IHByZXYgPSBudWxsOwogICAgbGV0IGkgPSAwOwogICAgZG8gewogICAgICBpZihub2RlID09IHByZXYpIGJyZWFrOwogICAgICBpZigobm9kZS5hdHRyaWJ1dGVzICYmIG5vZGUuYXR0cmlidXRlcy5uYW1lKSB8fCBub2RlLnRhZ05hbWUgPT0gJ3NoZWV0JykgcmV0W25vZGUudGFnTmFtZV0gPSBub2RlOwogICAgICBwcmV2ID0gbm9kZTsKICAgICAgaSsrOwogICAgfSB3aGlsZSgobm9kZSA9IG5vZGUucGFyZW50Tm9kZSB8fCBub2RlLm93bmVyKSk7CiAgICByZXR1cm4gcmV0OyovCiAgfQogIGdldCBwcm9qZWN0KCkgewogICAgaWYoY2xhc3NOYW1lKHRoaXMub3duZXIpID09ICdFYWdsZVByb2plY3QnKSByZXR1cm4gdGhpcy5vd25lcjsKICAgIHJldHVybiB0aGlzLmRvY3VtZW50Lm93bmVyOwogIH0KCiAgZ2V0IG5vZGUoKSB7CiAgICBsZXQgbm9kZSA9IHRoaXMucGF0aC5kZXJlZih0aGlzLnJvb3QucmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgZ2V0IHJhdygpIHsKICAgIGNvbnN0IHsgcmVmLCBwYXRoLCByb290IH0gPSB0aGlzOwogICAgaWYocmVmKQogICAgICB0cnkgewogICAgICAgIHJldHVybiByZWYuZGVyZWZlcmVuY2UoKTsKICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQoKICAgIGlmKHBhdGggJiYgcm9vdCkKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gcGF0aC5kZXJlZihyb290LnJhdyk7CiAgICAgIH0gY2F0Y2goZSkge30KCiAgICAvL3Rocm93IG5ldyBFcnJvcihgRWFnbGVOb2RlLmdldCByYXcgOiAnTm8gcmVmIGFuZCBubyBwYXRoOiAke09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLmpvaW4oJywgJyl9YCk7CiAgICByZXR1cm4gdGhpcy5nZXRSYXcoKTsKICB9CgogIGNhY2hlRmllbGRzKCkgewogICAgc3dpdGNoICh0aGlzLnRhZ05hbWUpIHsKICAgICAgY2FzZSAnc2NoZW1hdGljJzoKICAgICAgICByZXR1cm4gWy8qWydzZXR0aW5ncyddLCBbJ2xheWVycyddLCovIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ10gLyosIFsnbW9kdWxlcyddKi9dOwogICAgICBjYXNlICdib2FyZCc6CiAgICAgICAgcmV0dXJuIFtbJ3BsYWluJ10sIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ2VsZW1lbnRzJ10sIFsnc2lnbmFscyddXTsKICAgICAgY2FzZSAnbW9kdWxlJzoKICAgICAgICByZXR1cm4gW1sncG9ydHMnXSwgWyd2YXJpYW50ZGVmcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ11dOwogICAgICBjYXNlICdzaGVldCc6CiAgICAgICAgcmV0dXJuIFtbJ2J1c3NlcyddLCBbJ25ldHMnXSwgWydpbnN0YW5jZXMnXSwgWydwbGFpbiddXTsKICAgICAgY2FzZSAnZGV2aWNlc2V0JzoKICAgICAgICByZXR1cm4gW1snZ2F0ZXMnXSwgWydkZXZpY2VzJ11dOwogICAgICBjYXNlICdkZXZpY2UnOgogICAgICAgIHJldHVybiBbWydjb25uZWN0cyddLCBbJ3RlY2hub2xvZ2llcyddXTsKICAgICAgY2FzZSAnbGlicmFyeSc6CiAgICAgICAgcmV0dXJuIFtbJ3BhY2thZ2VzJ10sIFsnc3ltYm9scyddLCBbJ2RldmljZXNldHMnXV07CiAgICB9CiAgfQoKICBnZXQgY2hpbGRDb25zdHJ1Y3RvcigpIHsKICAgIGxldCBwcm90b3MgPSBnZXRQcm90b3R5cGVDaGFpbih0aGlzKTsKICAgIGlmKGZ1bmN0aW9uTmFtZShwcm90b3NbMF0uY29uc3RydWN0b3IpID09ICdFYWdsZURvY3VtZW50JykgcHJvdG9zLnNoaWZ0KCk7CiAgICBsZXQgY3RvciA9IHByb3Rvc1swXS5jb25zdHJ1Y3RvcjsKICAgIC8vY29uc29sZS5sb2coJ2NoaWxkQ29uc3RydWN0b3I6JywgdGhpcywgY3Rvcik7CiAgICByZXR1cm4gY3RvcjsKICB9CgogIGluaXRDYWNoZShjdG9yID0gdGhpcy5jaGlsZENvbnN0cnVjdG9yLCBsaXN0Q3RvciA9IChvLCBwLCB2KSA9PiB2KSB7CiAgICBsZXQgZmllbGRzID0gdGhpcy5jYWNoZUZpZWxkcygpOwogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgaWYoZmllbGRzICYmIGZpZWxkcy5sZW5ndGgpIHsKICAgICAgZGVmaW5lKHRoaXMsIHsgY2FjaGU6IHt9LCBsaXN0czoge30gfSk7CiAgICAgIGxldCBsYXp5ID0ge307CiAgICAgIGxldCBsaXN0cyA9IHt9OwogICAgICBsZXQgbWFwcyA9IHt9OwogICAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICAgIGxldCBvd25lciA9IHRoaXMuZG9jdW1lbnQ7CiAgICAgIGxldCByYXcgPSB0aGlzLnJhdzsKICAgICAgZm9yKGxldCB4cGF0aCBvZiBmaWVsZHMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IGtleSA9IHhwYXRoW3hwYXRoLmxlbmd0aCAtIDFdOwogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3hwYXRoJywgeHBhdGgpOwogICAgICAgICAgbGV0IHBhdGggPSBuZXcgUG9pbnRlcihbLi4ubmV3IEltbXV0YWJsZVhQYXRoKHhwYXRoKS50b1BvaW50ZXIocmF3KV0uY29uY2F0KFsnY2hpbGRyZW4nXSkpOwogICAgICAgICAgbGF6eVtrZXldID0gKCkgPT4gdGhpcy5sb29rdXAoeHBhdGgsIHRydWUpOwogICAgICAgICAgaWYoIXBhdGguZGVyZWYocmF3LCB0cnVlKSkgewogICAgICAgICAgICAvLyAgIGNvbnNvbGUud2FybigncGF0aCBub3QgZm91bmQnLCBwYXRoICsgJycpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdGggPSB0aGlzLnJlZi5wYXRoLmRvd24oLi4ucGF0aCk7CiAgICAgICAgICBsaXN0c1trZXldID0gKCkgPT4gbGlzdEN0b3Iob3duZXIsIHBhdGgpOwogICAgICAgICAgbWFwc1trZXldID0KICAgICAgICAgICAgWydzaGVldHMnLCAnY29ubmVjdHMnLCAncGxhaW4nXS5pbmRleE9mKGtleSkgIT0gLTEKICAgICAgICAgICAgICA/IGxpc3RzW2tleV0KICAgICAgICAgICAgICA6ICgpID0+IEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdHNba2V5XSgpLCBbJ2JvYXJkJywgJ3NjaGVtYXRpYycsICdsaWJyYXJ5J10uaW5kZXhPZihrZXkpICE9IC0xID8gJ3RhZ05hbWUnIDoga2V5ID09ICdpbnN0YW5jZXMnID8gJ3BhcnQnIDoga2V5ID09ICdsYXllcnMnID8gWydudW1iZXInLCAnbmFtZSddIDogJ25hbWUnKTsKICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgIH0KICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcy5saXN0cywgbGlzdHMpOwogICAgICBkZWZpbmVHZXR0ZXJzU2V0dGVycyh0aGlzLmNhY2hlLCBsYXp5KTsKICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcywgbWFwcyk7CiAgICB9CiAgfQoKICBpbml0UmVsYXRpb24oa2V5LCBoYW5kbGVyLCBmbikgewogICAgbGV0IGVsZW0gPSB0aGlzOwogICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiB7CiAgICAgIGlmKHYgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGhhbmRsZXIodHlwZW9mIHYgPT0gJ3N0cmluZycgPyB2IDogdi5uYW1lKTsKICAgICAgbGV0IHZhbHVlID0gaGFuZGxlcigpIHx8IGVsZW0uYXR0ck1hcFtrZXldIHx8IGVsZW0uYXR0cmlidXRlc1trZXldOwogICAgICByZXR1cm4gZm4odmFsdWUsIGVsZW0sIGVsZW0uZG9jdW1lbnQpOwogICAgfSk7CiAgICAvL2NvbnNvbGUubG9nKGBpbml0UmVsYXRpb25gLGtleSx0aGlzW2tleV0pOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBhcHBlbmRDaGlsZChub2RlLCBhdHRyaWJ1dGVzID0ge30pIHsKICAgIGlmKHR5cGVvZiBub2RlID09ICdzdHJpbmcnKSB7CiAgICAgIG5vZGUgPSB7CiAgICAgICAgdGFnTmFtZTogbm9kZSwKICAgICAgICBjaGlsZHJlbjogW10KICAgICAgfTsKICAgIH0KICAgIG5vZGUuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICB0aGlzLnJlZi5jb25jYXQoWydjaGlsZHJlbiddKS5kZXJlZmVyZW5jZSgpLnB1c2gobm9kZSk7CiAgICByZXR1cm4gdGhpcy5sYXN0Q2hpbGQ7CiAgfQoKICByZXBsYWNlKG5vZGUpIHsKICAgIHRoaXMucmVmLnJlcGxhY2Uobm9kZSk7CiAgfQoKICBzdGF0aWMgbWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpIHsKICAgIGxldCBwcmVkID0gcHJlZGljYXRlOwogICAgaWYocHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICBsZXQgcmUgPSBwcmVkOwogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IHJlLnRlc3Qodi50YWdOYW1lKTsKICAgIH0gZWxzZSBpZih0eXBlb2YgcHJlZCA9PSAnc3RyaW5nJykgewogICAgICBsZXQgbmFtZSA9IHByZWQ7CiAgICAgIHByZWQgPSAodiwgcCwgbykgPT4gdi50YWdOYW1lID09PSBuYW1lOwogICAgfSBlbHNlIGlmKGlzT2JqZWN0KHByZWQpICYmIHR5cGVvZiBwcmVkICE9ICdmdW5jdGlvbicpIHsKICAgICAgbGV0IGtleXMgPSBBcnJheS5pc0FycmF5KHByZWQpID8gcHJlZCA6IE9iamVjdC5rZXlzKHByZWQpOwogICAgICBsZXQgdmFsdWVzID0ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiBbLi4uYWNjLCBwcmVkW2tleV1dLCBbXSk7CgogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IGtleXMuZXZlcnkoKGtleSwgaSkgPT4gKGtleSA9PSAndGFnTmFtZScgPyB2W2tleV0gPT0gdmFsdWVzW2ldIDogdi5hdHRyaWJ1dGVzW2tleV0gPT0gdmFsdWVzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gcHJlZDsKICB9CgogICpnZXRBbGwocHJlZGljYXRlLCB0cmFuc2Zvcm0pIHsKICAgIC8vICB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIGxldCBuYW1lOwogICAgbGV0IHByZWQgPSBFYWdsZU5vZGUubWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpOwogICAgbGV0IGN0b3IgPSB0aGlzW1N5bWJvbC5zcGVjaWVzXTsKICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybSB8fCAoKC4uLmFyZ3MpID0+IGFyZ3MpOwogICAgbGV0IGNvbmQgPSBwcmVkOwogICAgZm9yKGxldCBbdiwgcF0gb2YgZGVlcC5pdGVyYXRlKHRoaXMucmF3LCBjb25kIC8qLCBkZWVwLlJFVFVSTl9WQUxVRV9QQVRIKi8pKSB7CiAgICAgIHlpZWxkIHRyYW5zZm9ybSh2LCBbLi4udGhpcy5wYXRoLCAuLi5wXSwgdGhpcy5kb2N1bWVudCA/PyB0aGlzLnJvb3QpOwogICAgfQogIH0KCiAgZ2V0KHByZWQsIHRyYW5zZm9ybSkgewogICAgLy9jb25zb2xlLmxvZygnZ2V0JywgdGhpcywgcHJlZCk7CiAgICBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUocHJlZCk7CiAgICBsZXQgY3RvciA9IHRoaXNbU3ltYm9sLnNwZWNpZXNdOwogICAgdHJhbnNmb3JtID0gdHJhbnNmb3JtIHx8ICgoLi4uYXJncykgPT4gYXJncyk7CiAgICBsZXQgY29uZCA9IHByZWQ7CiAgICBsZXQgZm91bmQgPSBkZWVwLmZpbmQodGhpcy5yYXcsIGNvbmQgLyosIGRlZXAuUkVUVVJOX1ZBTFVFX1BBVEgqLyk7CgogICAgaWYoZm91bmQpIHsKICAgICAgbGV0IFt2LCBwXSA9IGZvdW5kOwogICAgICByZXR1cm4gdHJhbnNmb3JtKHYsIFsuLi50aGlzLnBhdGgsIC4uLnBdLCB0aGlzLmRvY3VtZW50ID8/IHRoaXMucm9vdCk7CiAgICB9CgogICAgcmV0dXJuIGZvdW5kOwogIH0KCiAgZmluZChuYW1lLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGxldCBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUobmFtZSk7CiAgICBsZXQgcmVzdWx0ID0gZGVlcC5maW5kKHRoaXMucmF3LCBwcmVkLCBbLi4udGhpcy5wYXRoXSk7IC8vdGhpcy5nZXRBbGwoKHYsIHAsIG8pID0+IChwcmVkKHYsIHAsIG8pID8gLTEgOiBmYWxzZSksIHRyYW5zZm9ybSkpCgogICAgaWYocmVzdWx0KSB7CiAgICAgIGNvbnN0IHsgcGF0aCwgdmFsdWUgfSA9IHJlc3VsdDsKICAgICAgLy9jb25zb2xlLmxvZygiZm91bmQ6Iix7cGF0aCx2YWx1ZX0pOwogICAgICByZXR1cm4gdmFsdWUgPyB0cmFuc2Zvcm0odmFsdWUsIHBhdGgpIDogdmFsdWU7CiAgICB9CiAgfQoKICBnZXRNYXAoZW50aXR5KSB7CiAgICBsZXQgYSA9IHRoaXMuY2FjaGVbZW50aXR5ICsgJ3MnXTsKICAgIGlmKGEgJiYgYS5jaGlsZHJlbikgcmV0dXJuIG5ldyBNYXAoWy4uLmEuY2hpbGRyZW5dLm1hcChlID0+IFtlLm5hbWUsIGVdKSk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGdldEJ5TmFtZShlbGVtZW50LCBuYW1lLCBhdHRyID0gJ25hbWUnLCB0ID0gKFt2LCBsLCBkXSkgPT4gbWFrZUVhZ2xlTm9kZShkLCB0aGlzLnJlZi5jb25jYXQoWy4uLmxdKSwgdGhpcy5jaGlsZENvbnN0cnVjdG9yKSkgewogICAgZm9yKGxldCBbdiwgbCwgZF0gb2YgdGhpcy5pdGVyYXRvcihbXSwgaXQgPT4gaXQpKSB7CiAgICAgIGlmKHR5cGVvZiB2ID09ICdvYmplY3QnICYmICd0YWdOYW1lJyBpbiB2ICYmICdhdHRyaWJ1dGVzJyBpbiB2ICYmIGF0dHIgaW4gdi5hdHRyaWJ1dGVzKSB7CiAgICAgICAgaWYodi50YWdOYW1lID09IGVsZW1lbnQgJiYgdi5hdHRyaWJ1dGVzW2F0dHJdID09IG5hbWUpIHJldHVybiB0KFt2LCBsLCBkXSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZ2V0IG5hbWVzKCkgewogICAgbGV0IG5hbWVzID0gW107CiAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICBkbyB7CiAgICAgIGxldCBub2RlID0gcmVmLmRlcmVmZXJlbmNlKCk7CiAgICAgIGlmKG5vZGUuYXR0cmlidXRlcy5uYW1lICE9PSB1bmRlZmluZWQpIG5hbWVzLnB1c2goW25vZGUudGFnTmFtZSwgbm9kZS5hdHRyaWJ1dGVzLm5hbWVdKTsKICAgICAgcmVmID0gcmVmLnVwKDIpOwogICAgfSB3aGlsZShyZWYucGF0aC5sZW5ndGgpOwogICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhuYW1lcyk7CiAgfQoKICBnZXQgbmV4dFNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5uZXh0U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcHJldlNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5wcmV2U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcGFyZW50Tm9kZSgpIHsKICAgIGlmKHRoaXMucGF0aC5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7CgogICAgLyogICBjb25zdCByZWYgPSB0aGlzLnJlZi51cCgyKTsqLwogICAgY29uc3QgeyByZWYsIHBhdGgsIHJvb3QsIHJhdyB9ID0gdGhpczsKICAgIGxldCBkb2MgPSB0aGlzLmdldERvY3VtZW50KCk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXJlbnROb2RlJywgcGF0aCArICcnLCBkb2MpOwogICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdLmdldChkb2MsIHJlZi51cCgyKSk7CiAgfQoKICBnZXQgZmlyc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgMCk7CiAgICByZXR1cm4gcmVmID8gbmV3IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdKHRoaXMsIHJlZikgOiBudWxsOwogIH0KCiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgdGhpcy5jaGlsZHJlbi5sZW5ndGgtMSk7CiAgICByZXR1cm4gcmVmID8gbmV3IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdKHRoaXMsIHJlZikgOiBudWxsOwogIH0KCiAgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7CiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lOyAvL0VhZ2xlTm9kZS5pbnNwZWN0KHRoaXMpOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gdG9YTUwodGhpcy5yYXcpOwogICAgLy8gICAgcmV0dXJuIHRYbWwudG9TdHJpbmcoW3RoaXMucmF3XSk7CiAgfQoKICBpbnNwZWN0KGRlcHRoLCBvcHRpb25zKSB7CiAgICBsZXQgYXR0cnMgPSBbJyddOwogICAgaWYoZGVwdGggPiAxMDApIHRocm93IG5ldyBFcnJvcihgRWFnbGVOb2RlLmluc3BlY3QoKWApOwoKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlTm9kZS5pbnNwZWN0JywgZGVwdGgsIHRoaXMudGFnTmFtZSk7CgogICAgY29uc3QgeyByYXcgfSA9IHRoaXM7CiAgICBjb25zdCB7IGNoaWxkcmVuLCB0YWdOYW1lLCBhdHRyaWJ1dGVzID0ge30gfSA9IHJhdzsKICAgIGNvbnN0IHsgYXR0cmlidXRlTGlzdHMgPSBFYWdsZUVsZW1lbnQuYXR0cmlidXRlTGlzdHMgfSA9IHRoaXMuY29uc3RydWN0b3I7CgogICAgY29uc3QgYXR0cmlidXRlTGlzdCA9IGF0dHJpYnV0ZUxpc3RzW3RhZ05hbWVdIHx8IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpOwogICAgLy9jb25zb2xlLmxvZygnRWFnbGVOb2RlLmluc3BlY3QnLCAgeyB0YWdOYW1lLCBhdHRyaWJ1dGVMaXN0IH0pOwoKICAgIGNvbnN0IGdldEF0dHIgPSBuYW1lID0+IHsKICAgICAgZm9yKGxldCBhdHRyTWFwIG9mIFthdHRyaWJ1dGVzLCB0aGlzLCByYXddKSBpZihuYW1lIGluIGF0dHJNYXApIHJldHVybiBhdHRyTWFwW25hbWVdOwogICAgfTsKICAgIGlmKHRydWUpIHsKICAgICAgYXR0cnMgPSBhdHRyaWJ1dGVMaXN0CiAgICAgICAgLmZpbHRlcihuYW1lID0+IGdldEF0dHIobmFtZSkgIT09IHVuZGVmaW5lZCkKICAgICAgICAucmVkdWNlKAogICAgICAgICAgKGF0dHJzLCBhdHRyKSA9PgogICAgICAgICAgICBjb25jYXQoCiAgICAgICAgICAgICAgYXR0cnMsCiAgICAgICAgICAgICAgJyAnLAogICAgICAgICAgICAgIHRleHQoYXR0ciwgMSwgMzMpLAogICAgICAgICAgICAgIHRleHQoJzonLCAxLCAzNiksCiAgICAgICAgICAgICAgL14oYWx0ZGlzdGFuY2V8Y2xhc3N8Y29sb3J8Y3VydmV8ZGlhbWV0ZXJ8ZGlzdGFuY2V8ZHJpbGx8ZmlsbHxsYXllcnxtdWx0aXBsZXxudW1iZXJ8cmFkaXVzfHJhdGlvfHNpemV8d2lkdGh8eFsxLTNdP3x5WzEtM10/KSQvLnRlc3QoYXR0cikKICAgICAgICAgICAgICAgID8gdGV4dChnZXRBdHRyKGF0dHIpLCAxLCAzNikKICAgICAgICAgICAgICAgIDogdGV4dCgiJyIgKyBnZXRBdHRyKGF0dHIpICsgIiciLCAxLCAzMikKICAgICAgICAgICAgKSwKICAgICAgICAgIGF0dHJzCiAgICAgICAgKTsKICAgIH0KICAgIGxldCBudW1DaGlsZHJlbiA9IGNoaWxkcmVuID8gY2hpbGRyZW4ubGVuZ3RoIDogMDsKICAgIGxldCByZXQgPSBbJyddOwogICAgbGV0IHRhZyA9IHRoaXMudGFnTmFtZSB8fCByYXcudGFnTmFtZTsKICAgIGlmKHRhZykgcmV0ID0gY29uY2F0KHJldCwgdGV4dCgnPCcsIDEsIDM2KSwgdGV4dCh0YWcsIDEsIDMxKSwgYXR0cnMsIHRleHQobnVtQ2hpbGRyZW4gPT0gMCA/ICcgLz4nIDogJz4nLCAxLCAzNikpOwogICAgaWYodGhpcy5maWxlbmFtZSkgcmV0ID0gY29uY2F0KHJldCwgYCBmaWxlbmFtZT0iJHt0aGlzLmZpbGVuYW1lfSJgKTsKICAgIGlmKG51bUNoaWxkcmVuID4gMCkgewogICAgICBpZihkZXB0aCA8IDEpIHsKICAgICAgICByZXQgKz0gKCdcbicgKyB0b1hNTChjaGlsZHJlbiwgb3B0aW9ucy5kZXB0aCAtIGRlcHRoKSkucmVwbGFjZSgvXG4vZywgJ1xuICAnKTsKICAgICAgICByZXQgKz0gJ1xuJzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXQgPSBjb25jYXQocmV0LCBgey4uLiR7bnVtQ2hpbGRyZW59IGNoaWxkcmVuLi4ufWApOwogICAgICB9CiAgICAgIHJldCArPSBgPC8ke3RhZ30+YDsKICAgIH0KICAgIHJldHVybiAocmV0ID0gY29uY2F0KHRleHQodGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnLCAwKSwgcmV0KSk7CiAgfQoKICBbU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0oZGVwdGgsIG9wdGlvbnMpIHsKICAgIHJldHVybiB0aGlzLmluc3BlY3QoZGVwdGgsIG9wdGlvbnMpOwogIH0KCiAgbG9va3VwKHhwYXRoLCB0ID0gKG8sIHAsIHYpID0+IFtvLCBwXSkgewogICAgLyogaWYoISh4cGF0aCBpbnN0YW5jZW9mIEltbXV0YWJsZVhQYXRoKSkgKi8geHBhdGggPSBuZXcgSW1tdXRhYmxlWFBhdGgoeHBhdGgpOwogICAgLy8gY29uc29sZS5sb2coJ0VhZ2xlTm9kZS5sb29rdXAoJywgeHBhdGgsICcsJywgdCArICcnLCAnKScpOwoKICAgIGxldCBwYXRoID0gbmV3IFBvaW50ZXIoWy4uLnhwYXRoLnRvUG9pbnRlcih0aGlzLnJhdyldKTsgLy9bLi4ueHBhdGhdKTsKICAgIGxldCB2YWx1ZSA9IHhwYXRoLmRlcmVmKHRoaXMucmF3LCB0cnVlKTsKICAgIGxldCByZXQgPSB0KHRoaXMsIHBhdGgsIHZhbHVlKTsKICAgIHJldHVybiByZXQ7CiAgfQoKICBnZXRCb3VuZHMocHJlZCA9IGUgPT4gdHJ1ZSkgewogICAgbGV0IGJiID0gbmV3IEJCb3goKTsKICAgIGlmKHRoaXMuY2hpbGRyZW4gJiYgdGhpcy5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgZm9yKGxldCBlbGVtZW50IG9mIHRoaXMuZ2V0QWxsKGUgPT4gZS50YWdOYW1lICE9PSB1bmRlZmluZWQgJiYgcHJlZChlKSkpIHsKICAgICAgICBsZXQgZyA9IGVsZW1lbnQ/Lmdlb21ldHJ5OwogICAgICAgIGlmKGcpIHsKICAgICAgICAgIGxldCBib3VuZCA9IHR5cGVvZiBnLmJib3ggPT0gJ2Z1bmN0aW9uJyA/IGcuYmJveCgpIDogZzsKICAgICAgICAgIGJiLnVwZGF0ZShib3VuZCwgMCwgZWxlbWVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBsZXQgZyA9IHRoaXMuZ2VvbWV0cnk7CiAgICBpZihnKSBiYi51cGRhdGUoZyk7CiAgICByZXR1cm4gYmI7CiAgfQoKICBnZXQgZ2VvbWV0cnkoKSB7CiAgICBjb25zdCB7IGF0dHJpYnV0ZXMgfSA9IHRoaXMucmF3OwogICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpOwogICAgY29uc3QgbWFrZUdldHRlclNldHRlciA9IGsgPT4gdiA9PiB2ID09PSB1bmRlZmluZWQgPyB0aGlzW2tdIDogKHRoaXNba10gPSB2KTsKICAgIGlmKFsneDEnLCAneTEnLCAneDInLCAneTInXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIHJldHVybiBMaW5lLmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICB9IGVsc2UgaWYoWyd4JywgJ3knXS5ldmVyeShwcm9wID0+IGtleXMuaW5jbHVkZXMocHJvcCkpKSB7CiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gUG9pbnQodGhpcyk7CiAgICAgIGlmKGtleXMuaW5jbHVkZXMoJ3JhZGl1cycpKSByZXR1cm4gQ2lyY2xlLmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICAgIGlmKFsnd2lkdGgnLCAnaGVpZ2h0J10uZXZlcnkocHJvcCA9PiBrZXlzLmluY2x1ZGVzKHByb3ApKSkgcmV0dXJuIFJlY3QuYmluZCh0aGlzLCBudWxsLCBtYWtlR2V0dGVyU2V0dGVyKTsKICAgICAgcmV0dXJuIFBvaW50LmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICB9CiAgfQoKICBnZXREb2N1bWVudCgpIHsKICAgIGxldCBvID0gdGhpczsKICAgIHdoaWxlKG8ub3duZXIpIHsKICAgICAgaWYoby54bWwgIT09IHVuZGVmaW5lZCkgYnJlYWs7CiAgICAgIG8gPSBvLm93bmVyOwogICAgfQogICAgcmV0dXJuIG87CiAgfQoKICB4cGF0aCgpIHsKICAgIHJldHVybiB0cnlDYXRjaCgKICAgICAgKCkgPT4gSW1tdXRhYmxlWFBhdGguZnJvbSh0aGlzLnBhdGgsIHRoaXMuZG9jdW1lbnQpLAogICAgICB4cGF0aCA9PiB4cGF0aCwKICAgICAgKCkgPT4gT2JqZWN0LnNldFByb3RvdHlwZU9mKFsuLi50aGlzLnBhdGhdLCBJbW11dGFibGVYUGF0aC5wcm90b3R5cGUpCiAgICApOwogIH0KCiAgZW50cmllcyh0ID0gKFt2LCBsLCBkXSkgPT4gW2xbbC5sZW5ndGggLSAxXSwgRWFnbGVFbGVtZW50LmdldChkLCBsKV0pIHsKICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKFtdLCB0KTsKICB9CgogICppdGVyYXRvciguLi5hcmdzKSB7CiAgICBsZXQgcHJlZGljYXRlID0gdHlwZW9mIGFyZ3NbMF0gPT0gJ2Z1bmN0aW9uJyA/IGFyZ3Muc2hpZnQoKSA6IGFyZyA9PiB0cnVlOwogICAgbGV0IHBhdGggPSAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiBhcmdzLnNoaWZ0KCkpIHx8IFtdOwogICAgbGV0IHQgPSB0eXBlb2YgYXJnc1swXSA9PSAnZnVuY3Rpb24nID8gYXJncy5zaGlmdCgpIDogKFt2LCBsLCBkXSkgPT4gW3R5cGVvZiB2ID09ICdvYmplY3QnICYmIHYgIT09IG51bGwgJiYgJ3RhZ05hbWUnIGluIHYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10oZCwgbCkgOiB2LCBsLCBkXTsKICAgIGxldCBvd25lciA9IGlzT2JqZWN0KHRoaXMpICYmICdvd25lcicgaW4gdGhpcyA/IHRoaXMub3duZXIgOiB0aGlzOwogICAgbGV0IHJvb3QgPSB0aGlzLnJvb3QgfHwgKG93bmVyLnhtbCAmJiBvd25lci54bWxbMF0pOwogICAgbGV0IG5vZGUgPSByb290OwogICAgaWYocGF0aC5sZW5ndGggPiAwKSBub2RlID0gZGVlcC5nZXQobm9kZSwgcGF0aCk7CiAgICBmb3IobGV0IFt2LCBsXSBvZiBkZWVwLml0ZXJhdGUobm9kZSwgKHYsIHApID0+IChwcmVkaWNhdGUodiwgcCkgPyAtMSA6IHAubGVuZ3RoID4gMSA/IHBbcC5sZW5ndGggLSAyXSA9PSAnY2hpbGRyZW4nIDogdHJ1ZSkpKSB7CiAgICAgIGlmKCEobCBpbnN0YW5jZW9mIEltbXV0YWJsZVBhdGgpKSBsID0gbmV3IEltbXV0YWJsZVBhdGgobCk7CiAgICAgIGlmKHR5cGVvZiB2ID09ICdvYmplY3QnICYmIHYgIT09IG51bGwgJiYgJ3RhZ05hbWUnIGluIHYpIGlmIChwcmVkaWNhdGUodiwgbCwgb3duZXIpKSB5aWVsZCB0KFt2LCBsLCBvd25lcl0pOwogICAgfQogIH0KCiAgdG9YTUwoaW5kZW50ID0gJycpIHsKICAgIHJldHVybiB0b1hNTCh0aGlzLnJhdyk7IC8vLCAxMDAwMCwgJyInLCBpbmRlbnQpOwogIH0KCiAgLyogc3RhdGljIGluc3BlY3QgPSAoZSwgZCwgYyA9IHsgZGVwdGg6IDAsIGJyZWFrTGVuZ3RoOiA0MDAsIHBhdGg6IHRydWUgfSkgPT4gewogICAgY29uc3QgeyBkZXB0aCwgYnJlYWtMZW5ndGggfSA9IGM7CiAgICBsZXQgbyA9IGU7CiAgICBsZXQgciA9IChlICYmIGUucmF3KSB8fCBlOwogICAgaWYodHlwZW9mIHIgPT0gJ3N0cmluZycpIHJldHVybiB0ZXh0KHIsIDEsIDM2KTsKICAgIGxldCB4ID0gJyc7CiAgICB0cnkgewogICAgICB4ID0gaW5zcGVjdChyLCB7CiAgICAgICAgZGVwdGg6IGRlcHRoICogMiwKICAgICAgICBicmVha0xlbmd0aCwKICAgICAgICBjb2xvcnM6ICFpc0Jyb3dzZXIoKQogICAgICB9KTsKICAgIH0gY2F0Y2goZXJyKSB7fQogICAgbGV0IHMgPSAn4o+QJzsKICAgIHggPSB4LnN1YnN0cmluZyh4LmluZGV4T2YoJ3RhZ05hbWUnKSArIDE0KTsKICAgIHggPSBPYmplY3QuZW50cmllcygociAmJiByLmF0dHJpYnV0ZXMpIHx8IHt9KS5tYXAoCiAgICAgIChba2V5LCB2YWx1ZV0pID0+IHRleHQoa2V5LCAzMykgKyB0ZXh0KHMsIDAsIDM3KSArIHRleHQodmFsdWUsIDEsIDM2KQogICAgKTsKICAgIHgudW5zaGlmdChyLnRhZ05hbWUpOwogICAgbGV0IFtwLCAuLi5hcnJdID0geDsKICAgIHAgPSB0ZXh0KGDjgJRgLCAxLCAzNykgKyB0ZXh0KHAsIDM4LCA1LCAxOTkpOwogICAgbGV0IGwgPSBlLnBhdGggKyAnJzsKICAgIGxldCB0eXBlID0gY2xhc3NOYW1lKGUpOwogICAgaWYoYXJyLmxlbmd0aCkgYXJyLnVuc2hpZnQoJycpOwogICAgbGV0IHJldCA9IFt0ZXh0KHR5cGUsIDM4LCA1LCAyMTkpLCBwLCB0ZXh0KCfip4PinYvirZcnLCAzOCwgNSwgMTEyKSwgLi4uYXJyLCB0ZXh0KGDjgJVgLCAxLCAzNyldOwoKICAgIHJldHVybiAobC50cmltKCkgPyBsICsgJyAgJyA6ICcnKSArIHJldC5qb2luKCcgJykgKyB0ZXh0KCcnLCAwKTsKICB9OyovCn0KCmRlZmluZShFYWdsZU5vZGUucHJvdG90eXBlLCB7CiAgZ2V0UmF3OiBtZW1vaXplKGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHsgb3duZXIsIHJlZiwgZG9jdW1lbnQgfSA9IHRoaXM7CiAgICBsZXQgciA9IHJlZi5wYXRoLmRlcmVmKG93bmVyLnJhdywgdHJ1ZSk7CiAgICBpZighcikgewogICAgICByID0gcmVmLnBhdGguZGVyZWYocmVmLnJvb3QpIHx8IHJlZi5wYXRoLmRlcmVmKG93bmVyKTsKICAgICAgaWYoIXIpIHIgPSBkb2N1bWVudC5tYXBwZXIuYXQocmVmLnBhdGgpOwogICAgfQogICAgcmV0dXJuIHI7CiAgfSkKfSk7CgAAAAAAAAAAF0AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADLJQAAAAAAAMslAAAAAAAAAAAAAAAA8L8"
				],
				[
					452,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAHwwAAAAAAAAfTAAAAAAAAAAAAAAfTAAAAAAAAB9MAAAAAAAAAYAAAAgICAgLy8",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCMAAAAAAAAHwwAAAAAAAAAAAAAAAA8L8"
				],
				[
					461,
					1,
					"insert",
					{
						"characters": " newPoin"
					},
					"CAAAAJ4wAAAAAAAAnzAAAAAAAAAAAAAAnzAAAAAAAACgMAAAAAAAAAAAAACgMAAAAAAAAKEwAAAAAAAAAAAAAKEwAAAAAAAAojAAAAAAAAAAAAAAojAAAAAAAACjMAAAAAAAAAAAAACjMAAAAAAAAKQwAAAAAAAAAAAAAKQwAAAAAAAApTAAAAAAAAAAAAAApTAAAAAAAACmMAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeMAAAAAAAAJ4wAAAAAAAAAAAAAAAA8L8"
				],
				[
					462,
					4,
					"left_delete",
					null,
					"BAAAAKUwAAAAAAAApTAAAAAAAAABAAAAbqQwAAAAAAAApDAAAAAAAAABAAAAaaMwAAAAAAAAozAAAAAAAAABAAAAb6IwAAAAAAAAojAAAAAAAAABAAAAUA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACmMAAAAAAAAKYwAAAAAAAAAAAAAAAA8L8"
				],
				[
					463,
					1,
					"insert",
					{
						"characters": " Pio"
					},
					"BAAAAKIwAAAAAAAAozAAAAAAAAAAAAAAozAAAAAAAACkMAAAAAAAAAAAAACkMAAAAAAAAKUwAAAAAAAAAAAAAKUwAAAAAAAApjAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACiMAAAAAAAAKIwAAAAAAAAAAAAAAAA8L8"
				],
				[
					464,
					2,
					"left_delete",
					null,
					"AgAAAKUwAAAAAAAApTAAAAAAAAABAAAAb6QwAAAAAAAApDAAAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACmMAAAAAAAAKYwAAAAAAAAAAAAAAAA8L8"
				],
				[
					465,
					1,
					"insert",
					{
						"characters": "ointer"
					},
					"BgAAAKQwAAAAAAAApTAAAAAAAAAAAAAApTAAAAAAAACmMAAAAAAAAAAAAACmMAAAAAAAAKcwAAAAAAAAAAAAAKcwAAAAAAAAqDAAAAAAAAAAAAAAqDAAAAAAAACpMAAAAAAAAAAAAACpMAAAAAAAAKowAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACkMAAAAAAAAKQwAAAAAAAAAAAAAAAA8L8"
				],
				[
					466,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAKowAAAAAAAArDAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACqMAAAAAAAAKowAAAAAAAAAAAAAAAA8L8"
				],
				[
					467,
					2,
					"right_delete",
					null,
					"AgAAAKswAAAAAAAAqzAAAAAAAAABAAAAKaswAAAAAAAAqzAAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACrMAAAAAAAAKswAAAAAAAAAAAAAAAA8L8"
				],
				[
					468,
					1,
					"insert",
					{
						"characters": "..."
					},
					"AwAAAKswAAAAAAAArDAAAAAAAAAAAAAArDAAAAAAAACtMAAAAAAAAAAAAACtMAAAAAAAAK4wAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACrMAAAAAAAAKswAAAAAAAAAAAAAAAA8L8"
				],
				[
					472,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAALMwAAAAAAAAtDAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACzMAAAAAAAALMwAAAAAAAAAAAAAAAA8L8"
				],
				[
					530,
					1,
					"cut",
					null,
					"AQAAAHwwAAAAAAAAfDAAAAAAAABNAAAAICBjb25zb2xlLmxvZygnRWFnbGVOb2RlLmxvb2t1cCgnLCBuZXcgUG9pbnRlciguLi54cGF0aCksICcsJywgdCArICcnLCAnKScpOwo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB8MAAAAAAAAMkwAAAAAAAAAAAAAAAA8L8"
				],
				[
					533,
					1,
					"paste",
					null,
					"AQAAACowAAAAAAAAdzAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqMAAAAAAAACowAAAAAAAAAAAAAAAA8L8"
				],
				[
					538,
					1,
					"insert",
					{
						"characters": "xüp"
					},
					"BAAAAEwwAAAAAAAATTAAAAAAAAAAAAAATTAAAAAAAABNMAAAAAAAABYAAAAgbmV3IFBvaW50ZXIoLi4ueHBhdGgpTTAAAAAAAABOMAAAAAAAAAAAAABOMAAAAAAAAE8wAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABMMAAAAAAAAGIwAAAAAAAAAAAAAAAA8L8"
				],
				[
					539,
					2,
					"left_delete",
					null,
					"AgAAAE4wAAAAAAAATjAAAAAAAAABAAAAcE0wAAAAAAAATTAAAAAAAAACAAAAw7w",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABPMAAAAAAAAE8wAAAAAAAAAAAAAAAA8L8"
				],
				[
					540,
					1,
					"insert",
					{
						"characters": "path"
					},
					"BAAAAE0wAAAAAAAATjAAAAAAAAAAAAAATjAAAAAAAABPMAAAAAAAAAAAAABPMAAAAAAAAFAwAAAAAAAAAAAAAFAwAAAAAAAAUTAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABNMAAAAAAAAE0wAAAAAAAAAAAAAAAA8L8"
				],
				[
					549,
					1,
					"cut",
					null,
					"AQAAACgwAAAAAAAAKDAAAAAAAAA+AAAAICAgIGNvbnNvbGUubG9nKCdFYWdsZU5vZGUubG9va3VwKCcseHBhdGgsICcsJywgdCArICcnLCAnKScpOwo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAoMAAAAAAAAGYwAAAAAAAAAAAAAAAA8L8"
				],
				[
					550,
					1,
					"paste",
					null,
					"AQAAACgwAAAAAAAAZjAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAoMAAAAAAAACgwAAAAAAAAAAAAAAAA8L8"
				],
				[
					553,
					1,
					"paste",
					null,
					"AQAAALgwAAAAAAAA9jAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4MAAAAAAAALgwAAAAAAAAAAAAAAAA8L8"
				],
				[
					625,
					1,
					"cut",
					null,
					"AQAAAEIxAAAAAAAAQjEAAAAAAAAtAAAAICAgIGxldCB2YWx1ZSA9IHhwYXRoLmRlcmVmKHRoaXMucmF3LCB0cnVlKTsK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABCMQAAAAAAAG8xAAAAAAAAAAAAAAAA8L8"
				],
				[
					628,
					1,
					"paste",
					null,
					"AQAAAPYwAAAAAAAAIzEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD2MAAAAAAAAPYwAAAAAAAAAAAAAAAA8L8"
				],
				[
					635,
					1,
					"cut",
					null,
					"AQAAALgwAAAAAAAAuDAAAAAAAAA+AAAAICAgIGNvbnNvbGUubG9nKCdFYWdsZU5vZGUubG9va3VwKCcseHBhdGgsICcsJywgdCArICcnLCAnKScpOwo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4MAAAAAAAAPYwAAAAAAAAAAAAAAAA8L8"
				],
				[
					636,
					1,
					"paste",
					null,
					"AQAAALgwAAAAAAAA9jAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4MAAAAAAAALgwAAAAAAAAAAAAAAAA8L8"
				],
				[
					639,
					1,
					"paste",
					null,
					"AQAAACMxAAAAAAAAYTEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAjMQAAAAAAACMxAAAAAAAAAAAAAAAA8L8"
				],
				[
					643,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAEUxAAAAAAAARjEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABFMQAAAAAAAEUxAAAAAAAAAAAAAAAA8L8"
				],
				[
					645,
					1,
					"insert",
					{
						"characters": "{}"
					},
					"AgAAAEgxAAAAAAAASTEAAAAAAAAAAAAASTEAAAAAAABKMQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABIMQAAAAAAAEgxAAAAAAAAAAAAAAAA8L8"
				],
				[
					646,
					1,
					"left_delete",
					null,
					"AQAAAEkxAAAAAAAASTEAAAAAAAABAAAAfQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABKMQAAAAAAAEoxAAAAAAAAAAAAAAAA8L8"
				],
				[
					647,
					1,
					"insert",
					{
						"characters": "value});"
					},
					"CAAAAEkxAAAAAAAASjEAAAAAAAAAAAAASjEAAAAAAABLMQAAAAAAAAAAAABLMQAAAAAAAEwxAAAAAAAAAAAAAEwxAAAAAAAATTEAAAAAAAAAAAAATTEAAAAAAABOMQAAAAAAAAAAAABOMQAAAAAAAE8xAAAAAAAAAAAAAE8xAAAAAAAAUDEAAAAAAAAAAAAAUDEAAAAAAABRMQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABJMQAAAAAAAEkxAAAAAAAAAAAAAAAA8L8"
				],
				[
					649,
					1,
					"cut",
					null,
					"AQAAAFExAAAAAAAAUTEAAAAAAAAZAAAAeHBhdGgsICcsJywgdCArICcnLCAnKScpOw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABRMQAAAAAAAGoxAAAAAAAA////////738"
				],
				[
					654,
					1,
					"left_delete",
					null,
					"AQAAANkwAAAAAAAA2TAAAAAAAAABAAAAKA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaMAAAAAAAANowAAAAAAAAAAAAAAAA8L8"
				],
				[
					656,
					1,
					"insert",
					{
						"characters": "{"
					},
					"AQAAANswAAAAAAAA3DAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbMAAAAAAAANswAAAAAAAAAAAAAAAA8L8"
				],
				[
					658,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAAOEwAAAAAAAA4jAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhMAAAAAAAAOEwAAAAAAAAAAAAAAAA8L8"
				],
				[
					661,
					1,
					"left_delete",
					null,
					"AQAAAOIwAAAAAAAA4jAAAAAAAAASAAAALCAnLCcsIHQgKyAnJywgJykn",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiMAAAAAAAAPQwAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB5QAAAaW1wb3J0IHsgRWFnbGVSZWYsIEVhZ2xlUmVmZXJlbmNlIH0gZnJvbSAnLi9yZWYuanMnOwppbXBvcnQgKiBhcyBkZWVwIGZyb20gJy4uL2RlZXAuanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGRlZmluZSwgZGVmaW5lR2V0dGVyc1NldHRlcnMsIGZ1bmN0aW9uTmFtZSwgZ2V0UHJvdG90eXBlQ2hhaW4sIGlzQXJyYXksIGlzT2JqZWN0LCBtZW1vaXplLCB0cnlDYXRjaCB9IGZyb20gJy4uL21pc2MuanMnOwppbXBvcnQgeyBsYXp5TWVtYmVycyB9IGZyb20gJy4uL2xhenlJbml0aWFsaXplci5qcyc7CmltcG9ydCB7IHRya2wgfSBmcm9tICcuLi90cmtsLmpzJzsKaW1wb3J0IHsgdGV4dCwgY29uY2F0IH0gZnJvbSAnLi9jb21tb24uanMnOwppbXBvcnQgeyBFYWdsZU5vZGVNYXAgfSBmcm9tICcuL25vZGVNYXAuanMnOwppbXBvcnQgeyBJbW11dGFibGVYUGF0aCB9IGZyb20gJy4uL3htbC94cGF0aC5qcyc7CmltcG9ydCB7IEJCb3ggfSBmcm9tICcuLi9nZW9tLmpzJzsKaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJy4uL3BvaW50ZXIuanMnOwppbXBvcnQgeyByZWFkIGFzIGZyb21YTUwsIHdyaXRlIGFzIHRvWE1MIH0gZnJvbSAnLi4veG1sLmpzJzsKCmV4cG9ydCBjb25zdCBtYWtlRWFnbGVOb2RlID0gKG93bmVyLCByZWYsIGN0b3IpID0+IHsKICBpZighY3RvcikgY3RvciA9IG93bmVyLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXTsKICBsZXQgZSA9IGN0b3IuZ2V0ID8gY3Rvci5nZXQob3duZXIsIHJlZikgOiBuZXcgY3Rvcihvd25lciwgcmVmKTsKICByZXR1cm4gZTsKfTsKCmZ1bmN0aW9uKiB3YWxrUGF0aChwLCB0ID0gcCA9PiBwLnVwKDEpKSB7CiAgbGV0IHJ1biA9IHRydWU7CiAgbGV0IHNraXA7CiAgbGV0IG5leHQ7CiAgY29uc3QgYWJvcnQgPSAoKSA9PiAocnVuID0gZmFsc2UpOwogIGNvbnN0IHNldCA9IHYgPT4gKHAgPSB2KTsKICBjb25zdCBpZ25vcmUgPSAoKSA9PiAoc2tpcCA9IHRydWUpOwogIGZvcihsZXQgcCA9IHRoaXMsIGkgPSAwOyBwOyBwID0gbmV4dCkgewogICAgbmV4dCA9IHQocCwgaSsrLCBhYm9ydCwgaWdub3JlKTsKICAgIGlmKCFza2lwKSB5aWVsZCBwOwogICAgaWYoIXJ1bikgYnJlYWs7CiAgICBza2lwID0gZmFsc2U7CiAgfQp9CgpleHBvcnQgY2xhc3MgRWFnbGVOb2RlIHsKICByZWYgPSBudWxsOwoKICBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsKICAgIHJldHVybiBFYWdsZU5vZGU7CiAgfQoKICBjb25zdHJ1Y3Rvcihvd25lciwgcmVmLCByYXcpIHsKICAgIC8vY29uc29sZS5sb2coJ0VhZ2xlTm9kZS5jb25zdHJ1Y3RvcigxKScsIHtvd25lcjogb3duZXIsIHJlZixyYXd9KTsKCiAgICAvL2lmKCFvd25lcikgb3duZXIgPSBuZXcgRWFnbGVSZWZlcmVuY2UocmVmLnJvb3QsIFtdKS5kZXJlZmVyZW5jZSgpOwogICAgaWYoIShyZWYgaW5zdGFuY2VvZiBFYWdsZVJlZmVyZW5jZSkpIHJlZiA9IG5ldyBFYWdsZVJlZihvd25lciAmJiAncmVmJyBpbiBvd25lciA/IG93bmVyLnJlZi5yb290IDogb3duZXIsIFsuLi5yZWZdKTsKICAgIGlmKCFyYXcpIHJhdyA9IHJlZi5kZXJlZmVyZW5jZSgpOwogICAgLy9jb25zb2xlLmxvZygiRWFnbGVOb2RlLmNvbnN0cnVjdG9yIix7b3duZXIscmVmLHJhd30pOwogICAgLy9PYmplY3QuYXNzaWduKHRoaXMsIHsgcmVmLCBvd25lciB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnb3duZXInLCB7CiAgICAgIHZhbHVlOiBvd25lciwKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKCiAgICBkZWZpbmUodGhpcywgeyByZWYgfSk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuY29uc3RydWN0b3IoMiknLCB7b3duZXI6IHRoaXMub3duZXIsIHJlZjogdGhpcy5yZWYscmF3OiB0aGlzLnJhd30pOwogIH0KCiAgZ2V0IHBhdGgoKSB7CiAgICByZXR1cm4gdGhpcy5yZWYucGF0aDsKICB9CgogIGdldCByb290KCkgewogICAgbGV0IHJvb3QgPSB0aGlzLnJlZi5yb290OwogICAgcmV0dXJuIHJvb3Q7CiAgfQoKICBnZXQgZG9jdW1lbnQoKSB7CiAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpOwogIH0KCiAgc2NvcGUodCA9IChvLCBwLCB2KSA9PiBbdi50YWdOYW1lLCB2XSkgewogICAgY29uc3QgeyBvd25lciwgcGF0aCwgZG9jdW1lbnQgfSA9IHRoaXM7CiAgICBsZXQgY2hhaW4gPSBPYmplY3QuZnJvbUVudHJpZXMoCiAgICAgIFsKICAgICAgICAuLi53YWxrUGF0aChwYXRoLCAocCwgaSwgYWJvcnQsIGlnbm9yZSkgPT4gewogICAgICAgICAgbGV0IHZhbHVlID0gcC5kZXJlZihvd25lci5yYXcsIHRydWUpOwoKICAgICAgICAgIGlmKGkgPT0gMCkgaWdub3JlKCk7CiAgICAgICAgICBpZighdmFsdWUgfHwgIXZhbHVlLmF0dHJpYnV0ZXMgfHwgISh2YWx1ZS50YWdOYW1lID09ICdsaWJyYXJ5JyB8fCB2YWx1ZS50YWdOYW1lID09ICdzaGVldCcgfHwgdmFsdWUuYXR0cmlidXRlcy5uYW1lKSkgaWdub3JlKCk7CgogICAgICAgICAgcmV0dXJuIHAudXAoMik7CiAgICAgICAgfSkKICAgICAgXS5tYXAocGF0aCA9PiB7CiAgICAgICAgbGV0IHYgPSBwYXRoLmRlcmVmKG93bmVyLnJhdywgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIHQob3duZXIsIHBhdGgsIHYpOwogICAgICB9KQogICAgKTsKCiAgICByZXR1cm4gY2hhaW47CgogICAgLyogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgbGV0IHJldCA9IHt9OwogICAgbGV0IHByZXYgPSBudWxsOwogICAgbGV0IGkgPSAwOwogICAgZG8gewogICAgICBpZihub2RlID09IHByZXYpIGJyZWFrOwogICAgICBpZigobm9kZS5hdHRyaWJ1dGVzICYmIG5vZGUuYXR0cmlidXRlcy5uYW1lKSB8fCBub2RlLnRhZ05hbWUgPT0gJ3NoZWV0JykgcmV0W25vZGUudGFnTmFtZV0gPSBub2RlOwogICAgICBwcmV2ID0gbm9kZTsKICAgICAgaSsrOwogICAgfSB3aGlsZSgobm9kZSA9IG5vZGUucGFyZW50Tm9kZSB8fCBub2RlLm93bmVyKSk7CiAgICByZXR1cm4gcmV0OyovCiAgfQogIGdldCBwcm9qZWN0KCkgewogICAgaWYoY2xhc3NOYW1lKHRoaXMub3duZXIpID09ICdFYWdsZVByb2plY3QnKSByZXR1cm4gdGhpcy5vd25lcjsKICAgIHJldHVybiB0aGlzLmRvY3VtZW50Lm93bmVyOwogIH0KCiAgZ2V0IG5vZGUoKSB7CiAgICBsZXQgbm9kZSA9IHRoaXMucGF0aC5kZXJlZih0aGlzLnJvb3QucmF3KTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgZ2V0IHJhdygpIHsKICAgIGNvbnN0IHsgcmVmLCBwYXRoLCByb290IH0gPSB0aGlzOwogICAgaWYocmVmKQogICAgICB0cnkgewogICAgICAgIHJldHVybiByZWYuZGVyZWZlcmVuY2UoKTsKICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQoKICAgIGlmKHBhdGggJiYgcm9vdCkKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gcGF0aC5kZXJlZihyb290LnJhdyk7CiAgICAgIH0gY2F0Y2goZSkge30KCiAgICAvL3Rocm93IG5ldyBFcnJvcihgRWFnbGVOb2RlLmdldCByYXcgOiAnTm8gcmVmIGFuZCBubyBwYXRoOiAke09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpLmpvaW4oJywgJyl9YCk7CiAgICByZXR1cm4gdGhpcy5nZXRSYXcoKTsKICB9CgogIGNhY2hlRmllbGRzKCkgewogICAgc3dpdGNoICh0aGlzLnRhZ05hbWUpIHsKICAgICAgY2FzZSAnc2NoZW1hdGljJzoKICAgICAgICByZXR1cm4gWy8qWydzZXR0aW5ncyddLCBbJ2xheWVycyddLCovIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ10gLyosIFsnbW9kdWxlcyddKi9dOwogICAgICBjYXNlICdib2FyZCc6CiAgICAgICAgcmV0dXJuIFtbJ3BsYWluJ10sIFsnbGlicmFyaWVzJ10sIFsnY2xhc3NlcyddLCBbJ2VsZW1lbnRzJ10sIFsnc2lnbmFscyddXTsKICAgICAgY2FzZSAnbW9kdWxlJzoKICAgICAgICByZXR1cm4gW1sncG9ydHMnXSwgWyd2YXJpYW50ZGVmcyddLCBbJ3BhcnRzJ10sIFsnc2hlZXRzJ11dOwogICAgICBjYXNlICdzaGVldCc6CiAgICAgICAgcmV0dXJuIFtbJ2J1c3NlcyddLCBbJ25ldHMnXSwgWydpbnN0YW5jZXMnXSwgWydwbGFpbiddXTsKICAgICAgY2FzZSAnZGV2aWNlc2V0JzoKICAgICAgICByZXR1cm4gW1snZ2F0ZXMnXSwgWydkZXZpY2VzJ11dOwogICAgICBjYXNlICdkZXZpY2UnOgogICAgICAgIHJldHVybiBbWydjb25uZWN0cyddLCBbJ3RlY2hub2xvZ2llcyddXTsKICAgICAgY2FzZSAnbGlicmFyeSc6CiAgICAgICAgcmV0dXJuIFtbJ3BhY2thZ2VzJ10sIFsnc3ltYm9scyddLCBbJ2RldmljZXNldHMnXV07CiAgICB9CiAgfQoKICBnZXQgY2hpbGRDb25zdHJ1Y3RvcigpIHsKICAgIGxldCBwcm90b3MgPSBnZXRQcm90b3R5cGVDaGFpbih0aGlzKTsKICAgIGlmKGZ1bmN0aW9uTmFtZShwcm90b3NbMF0uY29uc3RydWN0b3IpID09ICdFYWdsZURvY3VtZW50JykgcHJvdG9zLnNoaWZ0KCk7CiAgICBsZXQgY3RvciA9IHByb3Rvc1swXS5jb25zdHJ1Y3RvcjsKICAgIC8vY29uc29sZS5sb2coJ2NoaWxkQ29uc3RydWN0b3I6JywgdGhpcywgY3Rvcik7CiAgICByZXR1cm4gY3RvcjsKICB9CgogIGluaXRDYWNoZShjdG9yID0gdGhpcy5jaGlsZENvbnN0cnVjdG9yLCBsaXN0Q3RvciA9IChvLCBwLCB2KSA9PiB2KSB7CiAgICBsZXQgZmllbGRzID0gdGhpcy5jYWNoZUZpZWxkcygpOwogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgaWYoZmllbGRzICYmIGZpZWxkcy5sZW5ndGgpIHsKICAgICAgZGVmaW5lKHRoaXMsIHsgY2FjaGU6IHt9LCBsaXN0czoge30gfSk7CiAgICAgIGxldCBsYXp5ID0ge307CiAgICAgIGxldCBsaXN0cyA9IHt9OwogICAgICBsZXQgbWFwcyA9IHt9OwogICAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICAgIGxldCBvd25lciA9IHRoaXMuZG9jdW1lbnQ7CiAgICAgIGxldCByYXcgPSB0aGlzLnJhdzsKICAgICAgZm9yKGxldCB4cGF0aCBvZiBmaWVsZHMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IGtleSA9IHhwYXRoW3hwYXRoLmxlbmd0aCAtIDFdOwogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3hwYXRoJywgeHBhdGgpOwogICAgICAgICAgbGV0IHBhdGggPSBuZXcgUG9pbnRlcihbLi4ubmV3IEltbXV0YWJsZVhQYXRoKHhwYXRoKS50b1BvaW50ZXIocmF3KV0uY29uY2F0KFsnY2hpbGRyZW4nXSkpOwogICAgICAgICAgbGF6eVtrZXldID0gKCkgPT4gdGhpcy5sb29rdXAoeHBhdGgsIHRydWUpOwogICAgICAgICAgaWYoIXBhdGguZGVyZWYocmF3LCB0cnVlKSkgewogICAgICAgICAgICAvLyAgIGNvbnNvbGUud2FybigncGF0aCBub3QgZm91bmQnLCBwYXRoICsgJycpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdGggPSB0aGlzLnJlZi5wYXRoLmRvd24oLi4ucGF0aCk7CiAgICAgICAgICBsaXN0c1trZXldID0gKCkgPT4gbGlzdEN0b3Iob3duZXIsIHBhdGgpOwogICAgICAgICAgbWFwc1trZXldID0KICAgICAgICAgICAgWydzaGVldHMnLCAnY29ubmVjdHMnLCAncGxhaW4nXS5pbmRleE9mKGtleSkgIT0gLTEKICAgICAgICAgICAgICA/IGxpc3RzW2tleV0KICAgICAgICAgICAgICA6ICgpID0+IEVhZ2xlTm9kZU1hcC5jcmVhdGUobGlzdHNba2V5XSgpLCBbJ2JvYXJkJywgJ3NjaGVtYXRpYycsICdsaWJyYXJ5J10uaW5kZXhPZihrZXkpICE9IC0xID8gJ3RhZ05hbWUnIDoga2V5ID09ICdpbnN0YW5jZXMnID8gJ3BhcnQnIDoga2V5ID09ICdsYXllcnMnID8gWydudW1iZXInLCAnbmFtZSddIDogJ25hbWUnKTsKICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgIH0KICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcy5saXN0cywgbGlzdHMpOwogICAgICBkZWZpbmVHZXR0ZXJzU2V0dGVycyh0aGlzLmNhY2hlLCBsYXp5KTsKICAgICAgZGVmaW5lR2V0dGVyc1NldHRlcnModGhpcywgbWFwcyk7CiAgICB9CiAgfQoKICBpbml0UmVsYXRpb24oa2V5LCBoYW5kbGVyLCBmbikgewogICAgbGV0IGVsZW0gPSB0aGlzOwogICAgdHJrbC5iaW5kKHRoaXMsIGtleSwgdiA9PiB7CiAgICAgIGlmKHYgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGhhbmRsZXIodHlwZW9mIHYgPT0gJ3N0cmluZycgPyB2IDogdi5uYW1lKTsKICAgICAgbGV0IHZhbHVlID0gaGFuZGxlcigpIHx8IGVsZW0uYXR0ck1hcFtrZXldIHx8IGVsZW0uYXR0cmlidXRlc1trZXldOwogICAgICByZXR1cm4gZm4odmFsdWUsIGVsZW0sIGVsZW0uZG9jdW1lbnQpOwogICAgfSk7CiAgICAvL2NvbnNvbGUubG9nKGBpbml0UmVsYXRpb25gLGtleSx0aGlzW2tleV0pOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBhcHBlbmRDaGlsZChub2RlLCBhdHRyaWJ1dGVzID0ge30pIHsKICAgIGlmKHR5cGVvZiBub2RlID09ICdzdHJpbmcnKSB7CiAgICAgIG5vZGUgPSB7CiAgICAgICAgdGFnTmFtZTogbm9kZSwKICAgICAgICBjaGlsZHJlbjogW10KICAgICAgfTsKICAgIH0KICAgIG5vZGUuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICB0aGlzLnJlZi5jb25jYXQoWydjaGlsZHJlbiddKS5kZXJlZmVyZW5jZSgpLnB1c2gobm9kZSk7CiAgICByZXR1cm4gdGhpcy5sYXN0Q2hpbGQ7CiAgfQoKICByZXBsYWNlKG5vZGUpIHsKICAgIHRoaXMucmVmLnJlcGxhY2Uobm9kZSk7CiAgfQoKICBzdGF0aWMgbWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpIHsKICAgIGxldCBwcmVkID0gcHJlZGljYXRlOwogICAgaWYocHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICBsZXQgcmUgPSBwcmVkOwogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IHJlLnRlc3Qodi50YWdOYW1lKTsKICAgIH0gZWxzZSBpZih0eXBlb2YgcHJlZCA9PSAnc3RyaW5nJykgewogICAgICBsZXQgbmFtZSA9IHByZWQ7CiAgICAgIHByZWQgPSAodiwgcCwgbykgPT4gdi50YWdOYW1lID09PSBuYW1lOwogICAgfSBlbHNlIGlmKGlzT2JqZWN0KHByZWQpICYmIHR5cGVvZiBwcmVkICE9ICdmdW5jdGlvbicpIHsKICAgICAgbGV0IGtleXMgPSBBcnJheS5pc0FycmF5KHByZWQpID8gcHJlZCA6IE9iamVjdC5rZXlzKHByZWQpOwogICAgICBsZXQgdmFsdWVzID0ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiBbLi4uYWNjLCBwcmVkW2tleV1dLCBbXSk7CgogICAgICBwcmVkID0gKHYsIHAsIG8pID0+IGtleXMuZXZlcnkoKGtleSwgaSkgPT4gKGtleSA9PSAndGFnTmFtZScgPyB2W2tleV0gPT0gdmFsdWVzW2ldIDogdi5hdHRyaWJ1dGVzW2tleV0gPT0gdmFsdWVzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gcHJlZDsKICB9CgogICpnZXRBbGwocHJlZGljYXRlLCB0cmFuc2Zvcm0pIHsKICAgIC8vICB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIGxldCBuYW1lOwogICAgbGV0IHByZWQgPSBFYWdsZU5vZGUubWFrZVByZWRpY2F0ZShwcmVkaWNhdGUpOwogICAgbGV0IGN0b3IgPSB0aGlzW1N5bWJvbC5zcGVjaWVzXTsKICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybSB8fCAoKC4uLmFyZ3MpID0+IGFyZ3MpOwogICAgbGV0IGNvbmQgPSBwcmVkOwogICAgZm9yKGxldCBbdiwgcF0gb2YgZGVlcC5pdGVyYXRlKHRoaXMucmF3LCBjb25kIC8qLCBkZWVwLlJFVFVSTl9WQUxVRV9QQVRIKi8pKSB7CiAgICAgIHlpZWxkIHRyYW5zZm9ybSh2LCBbLi4udGhpcy5wYXRoLCAuLi5wXSwgdGhpcy5kb2N1bWVudCA/PyB0aGlzLnJvb3QpOwogICAgfQogIH0KCiAgZ2V0KHByZWQsIHRyYW5zZm9ybSkgewogICAgLy9jb25zb2xlLmxvZygnZ2V0JywgdGhpcywgcHJlZCk7CiAgICBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUocHJlZCk7CiAgICBsZXQgY3RvciA9IHRoaXNbU3ltYm9sLnNwZWNpZXNdOwogICAgdHJhbnNmb3JtID0gdHJhbnNmb3JtIHx8ICgoLi4uYXJncykgPT4gYXJncyk7CiAgICBsZXQgY29uZCA9IHByZWQ7CiAgICBsZXQgZm91bmQgPSBkZWVwLmZpbmQodGhpcy5yYXcsIGNvbmQgLyosIGRlZXAuUkVUVVJOX1ZBTFVFX1BBVEgqLyk7CgogICAgaWYoZm91bmQpIHsKICAgICAgbGV0IFt2LCBwXSA9IGZvdW5kOwogICAgICByZXR1cm4gdHJhbnNmb3JtKHYsIFsuLi50aGlzLnBhdGgsIC4uLnBdLCB0aGlzLmRvY3VtZW50ID8/IHRoaXMucm9vdCk7CiAgICB9CgogICAgcmV0dXJuIGZvdW5kOwogIH0KCiAgZmluZChuYW1lLCB0cmFuc2Zvcm0gPSBhID0+IGEpIHsKICAgIGxldCBwcmVkID0gRWFnbGVOb2RlLm1ha2VQcmVkaWNhdGUobmFtZSk7CiAgICBsZXQgcmVzdWx0ID0gZGVlcC5maW5kKHRoaXMucmF3LCBwcmVkLCBbLi4udGhpcy5wYXRoXSk7IC8vdGhpcy5nZXRBbGwoKHYsIHAsIG8pID0+IChwcmVkKHYsIHAsIG8pID8gLTEgOiBmYWxzZSksIHRyYW5zZm9ybSkpCgogICAgaWYocmVzdWx0KSB7CiAgICAgIGNvbnN0IHsgcGF0aCwgdmFsdWUgfSA9IHJlc3VsdDsKICAgICAgLy9jb25zb2xlLmxvZygiZm91bmQ6Iix7cGF0aCx2YWx1ZX0pOwogICAgICByZXR1cm4gdmFsdWUgPyB0cmFuc2Zvcm0odmFsdWUsIHBhdGgpIDogdmFsdWU7CiAgICB9CiAgfQoKICBnZXRNYXAoZW50aXR5KSB7CiAgICBsZXQgYSA9IHRoaXMuY2FjaGVbZW50aXR5ICsgJ3MnXTsKICAgIGlmKGEgJiYgYS5jaGlsZHJlbikgcmV0dXJuIG5ldyBNYXAoWy4uLmEuY2hpbGRyZW5dLm1hcChlID0+IFtlLm5hbWUsIGVdKSk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGdldEJ5TmFtZShlbGVtZW50LCBuYW1lLCBhdHRyID0gJ25hbWUnLCB0ID0gKFt2LCBsLCBkXSkgPT4gbWFrZUVhZ2xlTm9kZShkLCB0aGlzLnJlZi5jb25jYXQoWy4uLmxdKSwgdGhpcy5jaGlsZENvbnN0cnVjdG9yKSkgewogICAgZm9yKGxldCBbdiwgbCwgZF0gb2YgdGhpcy5pdGVyYXRvcihbXSwgaXQgPT4gaXQpKSB7CiAgICAgIGlmKHR5cGVvZiB2ID09ICdvYmplY3QnICYmICd0YWdOYW1lJyBpbiB2ICYmICdhdHRyaWJ1dGVzJyBpbiB2ICYmIGF0dHIgaW4gdi5hdHRyaWJ1dGVzKSB7CiAgICAgICAgaWYodi50YWdOYW1lID09IGVsZW1lbnQgJiYgdi5hdHRyaWJ1dGVzW2F0dHJdID09IG5hbWUpIHJldHVybiB0KFt2LCBsLCBkXSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZ2V0IG5hbWVzKCkgewogICAgbGV0IG5hbWVzID0gW107CiAgICBsZXQgcmVmID0gdGhpcy5yZWY7CiAgICBkbyB7CiAgICAgIGxldCBub2RlID0gcmVmLmRlcmVmZXJlbmNlKCk7CiAgICAgIGlmKG5vZGUuYXR0cmlidXRlcy5uYW1lICE9PSB1bmRlZmluZWQpIG5hbWVzLnB1c2goW25vZGUudGFnTmFtZSwgbm9kZS5hdHRyaWJ1dGVzLm5hbWVdKTsKICAgICAgcmVmID0gcmVmLnVwKDIpOwogICAgfSB3aGlsZShyZWYucGF0aC5sZW5ndGgpOwogICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhuYW1lcyk7CiAgfQoKICBnZXQgbmV4dFNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5uZXh0U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcHJldlNpYmxpbmcoKSB7CiAgICBjb25zdCByZWYgPSB0aGlzLnJlZi5wcmV2U2libGluZzsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBnZXQgcGFyZW50Tm9kZSgpIHsKICAgIGlmKHRoaXMucGF0aC5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7CgogICAgLyogICBjb25zdCByZWYgPSB0aGlzLnJlZi51cCgyKTsqLwogICAgY29uc3QgeyByZWYsIHBhdGgsIHJvb3QsIHJhdyB9ID0gdGhpczsKICAgIGxldCBkb2MgPSB0aGlzLmdldERvY3VtZW50KCk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXJlbnROb2RlJywgcGF0aCArICcnLCBkb2MpOwogICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdLmdldChkb2MsIHJlZi51cCgyKSk7CiAgfQoKICBnZXQgZmlyc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgMCk7CiAgICByZXR1cm4gcmVmID8gbmV3IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdKHRoaXMsIHJlZikgOiBudWxsOwogIH0KCiAgZ2V0IGxhc3RDaGlsZCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMucmVmLmRvd24oJ2NoaWxkcmVuJywgdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxKTsKICAgIHJldHVybiByZWYgPyBuZXcgdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10odGhpcywgcmVmKSA6IG51bGw7CiAgfQoKICBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHsKICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7IC8vRWFnbGVOb2RlLmluc3BlY3QodGhpcyk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIHJldHVybiB0b1hNTCh0aGlzLnJhdyk7CiAgICAvLyAgICByZXR1cm4gdFhtbC50b1N0cmluZyhbdGhpcy5yYXddKTsKICB9CgogIGluc3BlY3QoZGVwdGgsIG9wdGlvbnMpIHsKICAgIGxldCBhdHRycyA9IFsnJ107CiAgICBpZihkZXB0aCA+IDEwMCkgdGhyb3cgbmV3IEVycm9yKGBFYWdsZU5vZGUuaW5zcGVjdCgpYCk7CgogICAgLy9jb25zb2xlLmxvZygnRWFnbGVOb2RlLmluc3BlY3QnLCBkZXB0aCwgdGhpcy50YWdOYW1lKTsKCiAgICBjb25zdCB7IHJhdyB9ID0gdGhpczsKICAgIGNvbnN0IHsgY2hpbGRyZW4sIHRhZ05hbWUsIGF0dHJpYnV0ZXMgPSB7fSB9ID0gcmF3OwogICAgY29uc3QgeyBhdHRyaWJ1dGVMaXN0cyA9IEVhZ2xlRWxlbWVudC5hdHRyaWJ1dGVMaXN0cyB9ID0gdGhpcy5jb25zdHJ1Y3RvcjsKCiAgICBjb25zdCBhdHRyaWJ1dGVMaXN0ID0gYXR0cmlidXRlTGlzdHNbdGFnTmFtZV0gfHwgT2JqZWN0LmtleXMoYXR0cmlidXRlcyk7CiAgICAvL2NvbnNvbGUubG9nKCdFYWdsZU5vZGUuaW5zcGVjdCcsICB7IHRhZ05hbWUsIGF0dHJpYnV0ZUxpc3QgfSk7CgogICAgY29uc3QgZ2V0QXR0ciA9IG5hbWUgPT4gewogICAgICBmb3IobGV0IGF0dHJNYXAgb2YgW2F0dHJpYnV0ZXMsIHRoaXMsIHJhd10pIGlmKG5hbWUgaW4gYXR0ck1hcCkgcmV0dXJuIGF0dHJNYXBbbmFtZV07CiAgICB9OwogICAgaWYodHJ1ZSkgewogICAgICBhdHRycyA9IGF0dHJpYnV0ZUxpc3QKICAgICAgICAuZmlsdGVyKG5hbWUgPT4gZ2V0QXR0cihuYW1lKSAhPT0gdW5kZWZpbmVkKQogICAgICAgIC5yZWR1Y2UoCiAgICAgICAgICAoYXR0cnMsIGF0dHIpID0+CiAgICAgICAgICAgIGNvbmNhdCgKICAgICAgICAgICAgICBhdHRycywKICAgICAgICAgICAgICAnICcsCiAgICAgICAgICAgICAgdGV4dChhdHRyLCAxLCAzMyksCiAgICAgICAgICAgICAgdGV4dCgnOicsIDEsIDM2KSwKICAgICAgICAgICAgICAvXihhbHRkaXN0YW5jZXxjbGFzc3xjb2xvcnxjdXJ2ZXxkaWFtZXRlcnxkaXN0YW5jZXxkcmlsbHxmaWxsfGxheWVyfG11bHRpcGxlfG51bWJlcnxyYWRpdXN8cmF0aW98c2l6ZXx3aWR0aHx4WzEtM10/fHlbMS0zXT8pJC8udGVzdChhdHRyKQogICAgICAgICAgICAgICAgPyB0ZXh0KGdldEF0dHIoYXR0ciksIDEsIDM2KQogICAgICAgICAgICAgICAgOiB0ZXh0KCInIiArIGdldEF0dHIoYXR0cikgKyAiJyIsIDEsIDMyKQogICAgICAgICAgICApLAogICAgICAgICAgYXR0cnMKICAgICAgICApOwogICAgfQogICAgbGV0IG51bUNoaWxkcmVuID0gY2hpbGRyZW4gPyBjaGlsZHJlbi5sZW5ndGggOiAwOwogICAgbGV0IHJldCA9IFsnJ107CiAgICBsZXQgdGFnID0gdGhpcy50YWdOYW1lIHx8IHJhdy50YWdOYW1lOwogICAgaWYodGFnKSByZXQgPSBjb25jYXQocmV0LCB0ZXh0KCc8JywgMSwgMzYpLCB0ZXh0KHRhZywgMSwgMzEpLCBhdHRycywgdGV4dChudW1DaGlsZHJlbiA9PSAwID8gJyAvPicgOiAnPicsIDEsIDM2KSk7CiAgICBpZih0aGlzLmZpbGVuYW1lKSByZXQgPSBjb25jYXQocmV0LCBgIGZpbGVuYW1lPSIke3RoaXMuZmlsZW5hbWV9ImApOwogICAgaWYobnVtQ2hpbGRyZW4gPiAwKSB7CiAgICAgIGlmKGRlcHRoIDwgMSkgewogICAgICAgIHJldCArPSAoJ1xuJyArIHRvWE1MKGNoaWxkcmVuLCBvcHRpb25zLmRlcHRoIC0gZGVwdGgpKS5yZXBsYWNlKC9cbi9nLCAnXG4gICcpOwogICAgICAgIHJldCArPSAnXG4nOwogICAgICB9IGVsc2UgewogICAgICAgIHJldCA9IGNvbmNhdChyZXQsIGB7Li4uJHtudW1DaGlsZHJlbn0gY2hpbGRyZW4uLi59YCk7CiAgICAgIH0KICAgICAgcmV0ICs9IGA8LyR7dGFnfT5gOwogICAgfQogICAgcmV0dXJuIChyZXQgPSBjb25jYXQodGV4dCh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcsIDApLCByZXQpKTsKICB9CgogIFtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXShkZXB0aCwgb3B0aW9ucykgewogICAgcmV0dXJuIHRoaXMuaW5zcGVjdChkZXB0aCwgb3B0aW9ucyk7CiAgfQoKICBsb29rdXAoeHBhdGgsIHQgPSAobywgcCwgdikgPT4gW28sIHBdKSB7CiAgICBjb25zb2xlLmxvZygnRWFnbGVOb2RlLmxvb2t1cCgnLHhwYXRoLCAnLCcsIHQgKyAnJywgJyknKTsKICAvKiBpZighKHhwYXRoIGluc3RhbmNlb2YgSW1tdXRhYmxlWFBhdGgpKSAqLyB4cGF0aCA9IG5ldyBJbW11dGFibGVYUGF0aCh4cGF0aCk7CiAgICBjb25zb2xlLmxvZygnRWFnbGVOb2RlLmxvb2t1cCcse3hwYXRofSk7CiAgICBsZXQgdmFsdWUgPSB4cGF0aC5kZXJlZih0aGlzLnJhdywgdHJ1ZSk7CiAgICBjb25zb2xlLmxvZygnRWFnbGVOb2RlLmxvb2t1cCgpJyx7dmFsdWV9KTsKCiAgICBsZXQgcGF0aCA9IG5ldyBQb2ludGVyKFsuLi54cGF0aC50b1BvaW50ZXIodGhpcy5yYXcpXSk7IC8vWy4uLnhwYXRoXSk7CiAgICBsZXQgcmV0ID0gdCh0aGlzLCBwYXRoLCB2YWx1ZSk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgZ2V0Qm91bmRzKHByZWQgPSBlID0+IHRydWUpIHsKICAgIGxldCBiYiA9IG5ldyBCQm94KCk7CiAgICBpZih0aGlzLmNoaWxkcmVuICYmIHRoaXMuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgIGZvcihsZXQgZWxlbWVudCBvZiB0aGlzLmdldEFsbChlID0+IGUudGFnTmFtZSAhPT0gdW5kZWZpbmVkICYmIHByZWQoZSkpKSB7CiAgICAgICAgbGV0IGcgPSBlbGVtZW50Py5nZW9tZXRyeTsKICAgICAgICBpZihnKSB7CiAgICAgICAgICBsZXQgYm91bmQgPSB0eXBlb2YgZy5iYm94ID09ICdmdW5jdGlvbicgPyBnLmJib3goKSA6IGc7CiAgICAgICAgICBiYi51cGRhdGUoYm91bmQsIDAsIGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbGV0IGcgPSB0aGlzLmdlb21ldHJ5OwogICAgaWYoZykgYmIudXBkYXRlKGcpOwogICAgcmV0dXJuIGJiOwogIH0KCiAgZ2V0IGdlb21ldHJ5KCkgewogICAgY29uc3QgeyBhdHRyaWJ1dGVzIH0gPSB0aGlzLnJhdzsKICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKTsKICAgIGNvbnN0IG1ha2VHZXR0ZXJTZXR0ZXIgPSBrID0+IHYgPT4gdiA9PT0gdW5kZWZpbmVkID8gdGhpc1trXSA6ICh0aGlzW2tdID0gdik7CiAgICBpZihbJ3gxJywgJ3kxJywgJ3gyJywgJ3kyJ10uZXZlcnkocHJvcCA9PiBrZXlzLmluY2x1ZGVzKHByb3ApKSkgewogICAgICByZXR1cm4gTGluZS5iaW5kKHRoaXMsIG51bGwsIG1ha2VHZXR0ZXJTZXR0ZXIpOwogICAgfSBlbHNlIGlmKFsneCcsICd5J10uZXZlcnkocHJvcCA9PiBrZXlzLmluY2x1ZGVzKHByb3ApKSkgewogICAgICBjb25zdCB7IHgsIHkgfSA9IFBvaW50KHRoaXMpOwogICAgICBpZihrZXlzLmluY2x1ZGVzKCdyYWRpdXMnKSkgcmV0dXJuIENpcmNsZS5iaW5kKHRoaXMsIG51bGwsIG1ha2VHZXR0ZXJTZXR0ZXIpOwogICAgICBpZihbJ3dpZHRoJywgJ2hlaWdodCddLmV2ZXJ5KHByb3AgPT4ga2V5cy5pbmNsdWRlcyhwcm9wKSkpIHJldHVybiBSZWN0LmJpbmQodGhpcywgbnVsbCwgbWFrZUdldHRlclNldHRlcik7CiAgICAgIHJldHVybiBQb2ludC5iaW5kKHRoaXMsIG51bGwsIG1ha2VHZXR0ZXJTZXR0ZXIpOwogICAgfQogIH0KCiAgZ2V0RG9jdW1lbnQoKSB7CiAgICBsZXQgbyA9IHRoaXM7CiAgICB3aGlsZShvLm93bmVyKSB7CiAgICAgIGlmKG8ueG1sICE9PSB1bmRlZmluZWQpIGJyZWFrOwogICAgICBvID0gby5vd25lcjsKICAgIH0KICAgIHJldHVybiBvOwogIH0KCiAgeHBhdGgoKSB7CiAgICByZXR1cm4gdHJ5Q2F0Y2goCiAgICAgICgpID0+IEltbXV0YWJsZVhQYXRoLmZyb20odGhpcy5wYXRoLCB0aGlzLmRvY3VtZW50KSwKICAgICAgeHBhdGggPT4geHBhdGgsCiAgICAgICgpID0+IE9iamVjdC5zZXRQcm90b3R5cGVPZihbLi4udGhpcy5wYXRoXSwgSW1tdXRhYmxlWFBhdGgucHJvdG90eXBlKQogICAgKTsKICB9CgogIGVudHJpZXModCA9IChbdiwgbCwgZF0pID0+IFtsW2wubGVuZ3RoIC0gMV0sIEVhZ2xlRWxlbWVudC5nZXQoZCwgbCldKSB7CiAgICByZXR1cm4gdGhpcy5pdGVyYXRvcihbXSwgdCk7CiAgfQoKICAqaXRlcmF0b3IoLi4uYXJncykgewogICAgbGV0IHByZWRpY2F0ZSA9IHR5cGVvZiBhcmdzWzBdID09ICdmdW5jdGlvbicgPyBhcmdzLnNoaWZ0KCkgOiBhcmcgPT4gdHJ1ZTsKICAgIGxldCBwYXRoID0gKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgYXJncy5zaGlmdCgpKSB8fCBbXTsKICAgIGxldCB0ID0gdHlwZW9mIGFyZ3NbMF0gPT0gJ2Z1bmN0aW9uJyA/IGFyZ3Muc2hpZnQoKSA6IChbdiwgbCwgZF0pID0+IFt0eXBlb2YgdiA9PSAnb2JqZWN0JyAmJiB2ICE9PSBudWxsICYmICd0YWdOYW1lJyBpbiB2ID8gbmV3IHRoaXMuY29uc3RydWN0b3JbU3ltYm9sLnNwZWNpZXNdKGQsIGwpIDogdiwgbCwgZF07CiAgICBsZXQgb3duZXIgPSBpc09iamVjdCh0aGlzKSAmJiAnb3duZXInIGluIHRoaXMgPyB0aGlzLm93bmVyIDogdGhpczsKICAgIGxldCByb290ID0gdGhpcy5yb290IHx8IChvd25lci54bWwgJiYgb3duZXIueG1sWzBdKTsKICAgIGxldCBub2RlID0gcm9vdDsKICAgIGlmKHBhdGgubGVuZ3RoID4gMCkgbm9kZSA9IGRlZXAuZ2V0KG5vZGUsIHBhdGgpOwogICAgZm9yKGxldCBbdiwgbF0gb2YgZGVlcC5pdGVyYXRlKG5vZGUsICh2LCBwKSA9PiAocHJlZGljYXRlKHYsIHApID8gLTEgOiBwLmxlbmd0aCA+IDEgPyBwW3AubGVuZ3RoIC0gMl0gPT0gJ2NoaWxkcmVuJyA6IHRydWUpKSkgewogICAgICBpZighKGwgaW5zdGFuY2VvZiBJbW11dGFibGVQYXRoKSkgbCA9IG5ldyBJbW11dGFibGVQYXRoKGwpOwogICAgICBpZih0eXBlb2YgdiA9PSAnb2JqZWN0JyAmJiB2ICE9PSBudWxsICYmICd0YWdOYW1lJyBpbiB2KSBpZiAocHJlZGljYXRlKHYsIGwsIG93bmVyKSkgeWllbGQgdChbdiwgbCwgb3duZXJdKTsKICAgIH0KICB9CgogIHRvWE1MKGluZGVudCA9ICcnKSB7CiAgICByZXR1cm4gdG9YTUwodGhpcy5yYXcpOyAvLywgMTAwMDAsICciJywgaW5kZW50KTsKICB9CgogIC8qIHN0YXRpYyBpbnNwZWN0ID0gKGUsIGQsIGMgPSB7IGRlcHRoOiAwLCBicmVha0xlbmd0aDogNDAwLCBwYXRoOiB0cnVlIH0pID0+IHsKICAgIGNvbnN0IHsgZGVwdGgsIGJyZWFrTGVuZ3RoIH0gPSBjOwogICAgbGV0IG8gPSBlOwogICAgbGV0IHIgPSAoZSAmJiBlLnJhdykgfHwgZTsKICAgIGlmKHR5cGVvZiByID09ICdzdHJpbmcnKSByZXR1cm4gdGV4dChyLCAxLCAzNik7CiAgICBsZXQgeCA9ICcnOwogICAgdHJ5IHsKICAgICAgeCA9IGluc3BlY3QociwgewogICAgICAgIGRlcHRoOiBkZXB0aCAqIDIsCiAgICAgICAgYnJlYWtMZW5ndGgsCiAgICAgICAgY29sb3JzOiAhaXNCcm93c2VyKCkKICAgICAgfSk7CiAgICB9IGNhdGNoKGVycikge30KICAgIGxldCBzID0gJ+KPkCc7CiAgICB4ID0geC5zdWJzdHJpbmcoeC5pbmRleE9mKCd0YWdOYW1lJykgKyAxNCk7CiAgICB4ID0gT2JqZWN0LmVudHJpZXMoKHIgJiYgci5hdHRyaWJ1dGVzKSB8fCB7fSkubWFwKAogICAgICAoW2tleSwgdmFsdWVdKSA9PiB0ZXh0KGtleSwgMzMpICsgdGV4dChzLCAwLCAzNykgKyB0ZXh0KHZhbHVlLCAxLCAzNikKICAgICk7CiAgICB4LnVuc2hpZnQoci50YWdOYW1lKTsKICAgIGxldCBbcCwgLi4uYXJyXSA9IHg7CiAgICBwID0gdGV4dChg44CUYCwgMSwgMzcpICsgdGV4dChwLCAzOCwgNSwgMTk5KTsKICAgIGxldCBsID0gZS5wYXRoICsgJyc7CiAgICBsZXQgdHlwZSA9IGNsYXNzTmFtZShlKTsKICAgIGlmKGFyci5sZW5ndGgpIGFyci51bnNoaWZ0KCcnKTsKICAgIGxldCByZXQgPSBbdGV4dCh0eXBlLCAzOCwgNSwgMjE5KSwgcCwgdGV4dCgn4qeD4p2L4q2XJywgMzgsIDUsIDExMiksIC4uLmFyciwgdGV4dChg44CVYCwgMSwgMzcpXTsKCiAgICByZXR1cm4gKGwudHJpbSgpID8gbCArICcgICcgOiAnJykgKyByZXQuam9pbignICcpICsgdGV4dCgnJywgMCk7CiAgfTsqLwp9CgpkZWZpbmUoRWFnbGVOb2RlLnByb3RvdHlwZSwgewogIGdldFJhdzogbWVtb2l6ZShmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB7IG93bmVyLCByZWYsIGRvY3VtZW50IH0gPSB0aGlzOwogICAgbGV0IHIgPSByZWYucGF0aC5kZXJlZihvd25lci5yYXcsIHRydWUpOwogICAgaWYoIXIpIHsKICAgICAgciA9IHJlZi5wYXRoLmRlcmVmKHJlZi5yb290KSB8fCByZWYucGF0aC5kZXJlZihvd25lcik7CiAgICAgIGlmKCFyKSByID0gZG9jdW1lbnQubWFwcGVyLmF0KHJlZi5wYXRoKTsKICAgIH0KICAgIHJldHVybiByOwogIH0pCn0pOwoAAAAAAAAAAHZAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5DAAAAAAAADkMAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/eagle/common.js",
			"settings":
			{
				"buffer_size": 3953,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					18,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOAAAAAAAAAA4QAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADgAAAAAAAAAOAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"paste",
					null,
					"AQAAAOEAAAAAAAAA7gAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhAAAAAAAAAOEAAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "?"
					},
					"AQAAAO4AAAAAAAAA7wAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuAAAAAAAAAO4AAAAAAAAAAAAAAAAA8L8"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": " :"
					},
					"AgAAACoBAAAAAAAAKwEAAAAAAAAAAAAAKwEAAAAAAAAsAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqAQAAAAAAACoBAAAAAAAAAAAAAAAA8L8"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": " {"
					},
					"AgAAACwBAAAAAAAALQEAAAAAAAAAAAAALQEAAAAAAAAuAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsAQAAAAAAACwBAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BwAAAC4BAAAAAAAALwEAAAAAAAAAAAAALwEAAAAAAAAxAQAAAAAAAAAAAAAvAQAAAAAAAC8BAAAAAAAAAgAAACAgLwEAAAAAAAAzAQAAAAAAAAAAAAAzAQAAAAAAADQBAAAAAAAAAAAAAC8BAAAAAAAALwEAAAAAAAAEAAAAICAgIC8BAAAAAAAAMQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAuAQAAAAAAAC4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					56,
					1,
					"paste",
					null,
					"AQAAADABAAAAAAAAZAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwAQAAAAAAADABAAAAAAAAAAAAAAAA8L8"
				],
				[
					57,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BAAAAGQBAAAAAAAAZQEAAAAAAAAAAAAAZQEAAAAAAABnAQAAAAAAAAAAAABnAQAAAAAAAGgBAAAAAAAAAAAAAGgBAAAAAAAAagEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABkAQAAAAAAAGQBAAAAAAAAAAAAAAAA8L8"
				],
				[
					63,
					1,
					"left_delete",
					null,
					"AQAAAF4BAAAAAAAAXgEAAAAAAAABAAAAdA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABfAQAAAAAAAF8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					64,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAF4BAAAAAAAAYAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABeAQAAAAAAAF4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					65,
					1,
					"insert",
					{
						"characters": "t,co"
					},
					"BAAAAF8BAAAAAAAAYAEAAAAAAAAAAAAAYAEAAAAAAABhAQAAAAAAAAAAAABhAQAAAAAAAGIBAAAAAAAAAAAAAGIBAAAAAAAAYwEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABfAQAAAAAAAF8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					66,
					2,
					"left_delete",
					null,
					"AgAAAGIBAAAAAAAAYgEAAAAAAAABAAAAb2EBAAAAAAAAYQEAAAAAAAABAAAAYw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABjAQAAAAAAAGMBAAAAAAAAAAAAAAAA8L8"
				],
				[
					67,
					1,
					"insert",
					{
						"characters": "...colors"
					},
					"CQAAAGEBAAAAAAAAYgEAAAAAAAAAAAAAYgEAAAAAAABjAQAAAAAAAAAAAABjAQAAAAAAAGQBAAAAAAAAAAAAAGQBAAAAAAAAZQEAAAAAAAAAAAAAZQEAAAAAAABmAQAAAAAAAAAAAABmAQAAAAAAAGcBAAAAAAAAAAAAAGcBAAAAAAAAaAEAAAAAAAAAAAAAaAEAAAAAAABpAQAAAAAAAAAAAABpAQAAAAAAAGoBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABhAQAAAAAAAGEBAAAAAAAAAAAAAAAA8L8"
				],
				[
					77,
					1,
					"insert",
					{
						"characters": "ansi"
					},
					"BQAAAGQBAAAAAAAAZQEAAAAAAAAAAAAAZQEAAAAAAABlAQAAAAAAAAYAAABjb2xvcnNlAQAAAAAAAGYBAAAAAAAAAAAAAGYBAAAAAAAAZwEAAAAAAAAAAAAAZwEAAAAAAABoAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABkAQAAAAAAAGoBAAAAAAAAAAAAAAAA8L8"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": "`"
					},
					"AQAAAG0BAAAAAAAAbgEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtAQAAAAAAAG0BAAAAAAAAAAAAAAAA8L8"
				],
				[
					81,
					1,
					"left_delete",
					null,
					"AQAAAG0BAAAAAAAAbQEAAAAAAAABAAAAYA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABuAQAAAAAAAG4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": "an"
					},
					"AgAAAG0BAAAAAAAAbgEAAAAAAAAAAAAAbgEAAAAAAABvAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtAQAAAAAAAG0BAAAAAAAAAAAAAAAA8L8"
				],
				[
					83,
					2,
					"left_delete",
					null,
					"AgAAAG4BAAAAAAAAbgEAAAAAAAABAAAAbm0BAAAAAAAAbQEAAAAAAAABAAAAYQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABvAQAAAAAAAG8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": "`\\x1v"
					},
					"BQAAAG0BAAAAAAAAbgEAAAAAAAAAAAAAbgEAAAAAAABvAQAAAAAAAAAAAABvAQAAAAAAAHABAAAAAAAAAAAAAHABAAAAAAAAcQEAAAAAAAAAAAAAcQEAAAAAAAByAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtAQAAAAAAAG0BAAAAAAAAAAAAAAAA8L8"
				],
				[
					85,
					1,
					"left_delete",
					null,
					"AQAAAHEBAAAAAAAAcQEAAAAAAAABAAAAdg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByAQAAAAAAAHIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					86,
					1,
					"insert",
					{
						"characters": "b["
					},
					"AgAAAHEBAAAAAAAAcgEAAAAAAAAAAAAAcgEAAAAAAABzAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxAQAAAAAAAHEBAAAAAAAAAAAAAAAA8L8"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHMBAAAAAAAAdAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABzAQAAAAAAAHMBAAAAAAAAAAAAAAAA8L8"
				],
				[
					89,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAAHMBAAAAAAAAdAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABzAQAAAAAAAHMBAAAAAAAAAAAAAAAA8L8"
				],
				[
					90,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAHQBAAAAAAAAdgEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB0AQAAAAAAAHQBAAAAAAAAAAAAAAAA8L8"
				],
				[
					91,
					1,
					"insert",
					{
						"characters": "ansi.join"
					},
					"CQAAAHUBAAAAAAAAdgEAAAAAAAAAAAAAdgEAAAAAAAB3AQAAAAAAAAAAAAB3AQAAAAAAAHgBAAAAAAAAAAAAAHgBAAAAAAAAeQEAAAAAAAAAAAAAeQEAAAAAAAB6AQAAAAAAAAAAAAB6AQAAAAAAAHsBAAAAAAAAAAAAAHsBAAAAAAAAfAEAAAAAAAAAAAAAfAEAAAAAAAB9AQAAAAAAAAAAAAB9AQAAAAAAAH4BAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1AQAAAAAAAHUBAAAAAAAAAAAAAAAA8L8"
				],
				[
					92,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAH4BAAAAAAAAgAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB+AQAAAAAAAH4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					93,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAH8BAAAAAAAAgAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB/AQAAAAAAAH8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					94,
					1,
					"left_delete",
					null,
					"AQAAAH8BAAAAAAAAfwEAAAAAAAABAAAAOw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACAAQAAAAAAAIABAAAAAAAAAAAAAAAA8L8"
				],
				[
					95,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAH8BAAAAAAAAgQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB/AQAAAAAAAH8BAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAIABAAAAAAAAgQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACAAQAAAAAAAIABAAAAAAAAAAAAAAAA8L8"
				],
				[
					98,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAAIQBAAAAAAAAhQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACEAQAAAAAAAIQBAAAAAAAAAAAAAAAA8L8"
				],
				[
					99,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAAIUBAAAAAAAAhgEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACFAQAAAAAAAIUBAAAAAAAAAAAAAAAA8L8"
				],
				[
					100,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAIYBAAAAAAAAiAEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGAQAAAAAAAIYBAAAAAAAAAAAAAAAA8L8"
				],
				[
					101,
					2,
					"right_delete",
					null,
					"AgAAAIcBAAAAAAAAhwEAAAAAAAABAAAAfYcBAAAAAAAAhwEAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHAQAAAAAAAIcBAAAAAAAAAAAAAAAA8L8"
				],
				[
					103,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAAIgBAAAAAAAAiQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACIAQAAAAAAAIgBAAAAAAAAAAAAAAAA8L8"
				],
				[
					106,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAAIkBAAAAAAAAigEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACJAQAAAAAAAIkBAAAAAAAAAAAAAAAA8L8"
				],
				[
					107,
					1,
					"left_delete",
					null,
					"AQAAAIkBAAAAAAAAiQEAAAAAAAABAAAAJA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACKAQAAAAAAAIoBAAAAAAAAAAAAAAAA8L8"
				],
				[
					108,
					1,
					"insert",
					{
						"characters": "\\x1b"
					},
					"BAAAAIkBAAAAAAAAigEAAAAAAAAAAAAAigEAAAAAAACLAQAAAAAAAAAAAACLAQAAAAAAAIwBAAAAAAAAAAAAAIwBAAAAAAAAjQEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACJAQAAAAAAAIkBAAAAAAAAAAAAAAAA8L8"
				],
				[
					109,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAI0BAAAAAAAAjwEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACNAQAAAAAAAI0BAAAAAAAAAAAAAAAA8L8"
				],
				[
					110,
					1,
					"insert",
					{
						"characters": "0m"
					},
					"AgAAAI4BAAAAAAAAjwEAAAAAAAAAAAAAjwEAAAAAAACQAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOAQAAAAAAAI4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					1,
					"right_delete",
					null,
					"AQAAAJABAAAAAAAAkAEAAAAAAAABAAAAXQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQAQAAAAAAAJABAAAAAAAAAAAAAAAA8L8"
				],
				[
					112,
					1,
					"insert",
					{
						"characters": "`K"
					},
					"AgAAAJABAAAAAAAAkQEAAAAAAAAAAAAAkQEAAAAAAACSAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQAQAAAAAAAJABAAAAAAAAAAAAAAAA8L8"
				],
				[
					113,
					1,
					"left_delete",
					null,
					"AQAAAJEBAAAAAAAAkQEAAAAAAAABAAAASw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSAQAAAAAAAJIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					115,
					1,
					"left_delete",
					null,
					"AQAAAJEBAAAAAAAAkQEAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSAQAAAAAAAJIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					121,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABcDwAAaW1wb3J0IHsgSW1tdXRhYmxlUGF0aCB9IGZyb20gJy4uL2pzb24uanMnOwppbXBvcnQgeyBjbGFzc05hbWUsIGlzT2JqZWN0LGluc3BlY3RTeW1ib2wgfSBmcm9tICcuLi9taXNjLmpzJzsKCmNvbnN0IGlzQnJvd3NlciA9ICgpID0+ICEhZ2xvYmFsVGhpcy5uYXZpZ2F0b3I7Cgpjb25zdCBwYXRoUGFkZGluZyA9IGlzQnJvd3NlcigpID8gMCA6IDQwOwoKZXhwb3J0IGNvbnN0IGNvbG9yaW5nID0gIGlzQnJvd3NlcigpID8gewogIGNvbmNhdDogKC4uLmFyZ3MpID0+IGFyZ3Muam9pbignJyksCiAgdGV4dDogdCA9PiB0CiAgfSA6IHsKICAgY29uY2F0OiAoLi4uYXJncykgPT4gYXJncy5qb2luKCcnKSwKICB0ZXh0OiAodCwuLi5hbnNpKSA9PiBgXHgxYlske2Fuc2kuam9pbignOycpfW0ke3R9XHgxYlswbWAgIAogICB9OwoKZXhwb3J0IGNvbnN0IGNvbmNhdCA9IGNvbG9yaW5nLmNvbmNhdC5iaW5kKGNvbG9yaW5nKTsKZXhwb3J0IGNvbnN0IHRleHQgPSBjb2xvcmluZy50ZXh0LmJpbmQoY29sb3JpbmcpOwoKZXhwb3J0IGNvbnN0IGRpbmdiYXRDb2RlID0gZGlnaXQgPT4gKGRpZ2l0ICUgMTAgPT0gMCA/IGNpcmNsZXNbMF0gOiBTdHJpbmcuZnJvbUNoYXJDb2RlKChkaWdpdCAlIDEwKSArIGNpcmNsZXNbMV0uY2hhckNvZGVBdCgwKSAtIDEpKTsKCmV4cG9ydCBjb25zdCBQYWxldHRlID0gewogIGJvYXJkOiAobSA9IChyLCBnLCBiKSA9PiBbciwgZywgYl0pID0+CiAgICBbCiAgICAgIFsyNTUsIDI1NSwgMjU1XSwgLy8gMAogICAgICBbNzUsIDc1LCAxNjVdLAogICAgICBbNzUsIDE2NSwgNzVdLAogICAgICBbNzUsIDE2NSwgMTY1XSwKICAgICAgWzE2NSwgNzUsIDc1XSwKICAgICAgWzE2NSwgNzUsIDE2NV0sIC8vIDUKICAgICAgWzE2NSwgMTY1LCA3NV0sCiAgICAgIFsxNzUsIDE3NSwgMTc1XSwgLy8gNwogICAgICBbNzUsIDc1LCAyNTVdLAogICAgICBbNzUsIDI1NSwgNzVdLAogICAgICBbNzUsIDI1NSwgMjU1XSwKICAgICAgWzI1NSwgNzUsIDc1XSwKICAgICAgWzI1NSwgNzUsIDI1NV0sCiAgICAgIFsyNTUsIDI1NSwgNzVdLAogICAgICBbNzUsIDc1LCA3NV0sCiAgICAgIFsxNjUsIDE2NSwgMTY1XSwKICAgICAgWzE4MCwgMTgwLCAxODBdLCAvLyAxNgogICAgICBbOTAsIDkwLCA5MF0sCiAgICAgIFsxOTIsIDE5MiwgMTkyXSAvLyAyNAogICAgXS5tYXAoYyA9PiBtKC4uLmMpKSwKICBzY2hlbWF0aWM6IChtID0gKHIsIGcsIGIpID0+IFtyLCBnLCBiXSkgPT4KICAgIFsKICAgICAgWzI1NSwgMjU1LCAyNTVdLAogICAgICBbNzUsIDc1LCAxNjVdLAogICAgICBbNzUsIDE2NSwgNzVdLAogICAgICBbNzUsIDE2NSwgMTY1XSwKICAgICAgWzE2NSwgNzUsIDc1XSwKICAgICAgWzE2NSwgNzUsIDE2NV0sCiAgICAgIFsxNjUsIDE2NSwgNzVdLAogICAgICBbMTc1LCAxNzUsIDE3NV0sCiAgICAgIFs3NSwgNzUsIDI1NV0sCiAgICAgIFs3NSwgMjU1LCA3NV0sCiAgICAgIFs3NSwgMjU1LCAyNTVdLAogICAgICBbMjU1LCA3NSwgNzVdLAogICAgICBbMjU1LCA3NSwgMjU1XSwKICAgICAgWzI1NSwgMjU1LCA3NV0sCiAgICAgIFs3NSwgNzUsIDc1XSwKICAgICAgWzE2NSwgMTY1LCAxNjVdLAogICAgICBbMTc1LCAxNzUsIDE3NV0KICAgIF0ubWFwKGMgPT4gbSguLi5jKSkKfTsKCmV4cG9ydCBjb25zdCBkdW1wID0gKG8sIGRlcHRoID0gMiwgYnJlYWtMZW5ndGggPSA0MDApID0+IHsKICBjb25zdCBpc0VsZW1lbnQgPSBvID0+IGlzT2JqZWN0KG8pICYmIFsnRWFnbGVFbGVtZW50JywgJ0VhZ2xlTm9kZScsICdFYWdsZURvY3VtZW50J10uaW5kZXhPZihjbGFzc05hbWUobykpICE9IC0xOwogIGxldCBzOwogIGlmKG8gaW5zdGFuY2VvZiBBcnJheSkgewogICAgcyA9ICcnOwogICAgZm9yKGxldCBpIG9mIG8pIHsKICAgICAgaWYocy5sZW5ndGggPiAwKSBzICs9IGlzRWxlbWVudChpKSA/ICcsXG4nIDogJywgJzsKICAgICAgcyArPSBkdW1wKGksIGRlcHRoIC0gMSwgYnJlYWtMZW5ndGgpOwogICAgfQogIH0gZWxzZSBpZihpc0VsZW1lbnQobykpIHsKICAgIHMgPSBFYWdsZUludGVyZmFjZS5pbnNwZWN0KG8sIHVuZGVmaW5lZCwgeyBkZXB0aCwgcGF0aDogZmFsc2UgfSk7CiAgICBkZXB0aCAqIDQ7CiAgfSBlbHNlCiAgICBzID0gaW5zcGVjdChvLCB7CiAgICAgIGRlcHRoLAogICAgICBuZXdsaW5lOiAnJywKICAgICAgY29sb3JzOiAhaXNCcm93c2VyKCksCiAgICAgIGJyZWFrTGVuZ3RoCiAgICB9KTsKICByZXR1cm4gczsKfTsKCmV4cG9ydCBjb25zdCBwYXJzZUFyZ3MgPSBhcmdzID0+IHsKICBsZXQgcmV0ID0geyBwYXRoOiBbXSB9OwoKICB3aGlsZShhcmdzLmxlbmd0aCA+IDApIHsKICAgIGlmKGFyZ3NbMF0gaW5zdGFuY2VvZiBJbW11dGFibGVQYXRoKSB7CiAgICAgIHJldC5wYXRoID0gYXJncy5zaGlmdCgpOwogICAgfSBlbHNlIGlmKGFyZ3NbMF0gaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgbGV0IHJlID0gYXJncy5zaGlmdCgpOwogICAgICByZXQucHJlZGljYXRlID0gaXQgPT4gcmUudGVzdChpdC50YWdOYW1lKTsKICAgIH0gZWxzZSBpZihhcmdzWzBdIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgcmV0LnBhdGggPSBuZXcgSW1tdXRhYmxlUGF0aChhcmdzLnNoaWZ0KCkpOwogICAgfSBlbHNlIGlmKHR5cGVvZiBhcmdzWzBdID09ICdmdW5jdGlvbicpIHsKICAgICAgaWYocmV0LnByZWRpY2F0ZSA9PT0gdW5kZWZpbmVkKSByZXQucHJlZGljYXRlID0gYXJncy5zaGlmdCgpOwogICAgICBlbHNlIHJldC50cmFuc2Zvcm0gPSBhcmdzLnNoaWZ0KCk7CiAgICB9IGVsc2UgaWYodHlwZW9mIGFyZ3NbMF0gPT0gJ3N0cmluZycpIHsKICAgICAgaWYocmV0LmVsZW1lbnQgPT09IHVuZGVmaW5lZCkgcmV0LmVsZW1lbnQgPSBhcmdzLnNoaWZ0KCk7CiAgICAgIGVsc2UgcmV0Lm5hbWUgPSBhcmdzLnNoaWZ0KCk7CiAgICB9IGVsc2UgaWYodHlwZW9mIGFyZ3NbMF0gPT0gJ29iamVjdCcpIHsKICAgICAgY29uc3QgeyBwcmVkaWNhdGUsIHRyYW5zZm9ybSwgZWxlbWVudCwgbmFtZSB9ID0gYXJncy5zaGlmdCgpOwogICAgICBPYmplY3QuYXNzaWduKHJldCwgeyBwcmVkaWNhdGUsIHRyYW5zZm9ybSwgZWxlbWVudCwgbmFtZSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5oYW5kbGVkOiAnICsgdHlwZW9mIGFyZ3NbMF0gKyBkdW1wKGFyZ3NbMF0pKTsKICAgIH0KICB9CiAgaWYodHlwZW9mIHJldC5wcmVkaWNhdGUgIT0gJ2Z1bmN0aW9uJyAmJiAocmV0LmVsZW1lbnQgfHwgcmV0Lm5hbWUpKSB7CiAgICBpZihyZXQubmFtZSkgcmV0LnByZWRpY2F0ZSA9IHYgPT4gdi50YWdOYW1lID09IHJldC5lbGVtZW50ICYmIHYuYXR0cmlidXRlcy5uYW1lID09IHJldC5uYW1lOwogICAgZWxzZSByZXQucHJlZGljYXRlID0gdiA9PiB2LnRhZ05hbWUgPT0gcmV0LmVsZW1lbnQ7CiAgfQogIHJldHVybiByZXQ7Cn07CgpleHBvcnQgY29uc3QgdHJhdmVyc2UgPSBmdW5jdGlvbiogKG9iaiwgcGF0aCA9IFtdLCBkb2MpIHsKICBpZighKHBhdGggaW5zdGFuY2VvZiBJbW11dGFibGVQYXRoKSkgcGF0aCA9IG5ldyBJbW11dGFibGVQYXRoKHBhdGgpOwogIHlpZWxkIFtvYmosIHBhdGgsIGRvY107CiAgaWYodHlwZW9mIG9iaiA9PSAnb2JqZWN0JykgewogICAgaWYoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHlpZWxkKiB0cmF2ZXJzZShvYmpbaV0sIHBhdGguY29uY2F0KFtpXSksIGRvYyk7CiAgICB9IGVsc2UgaWYoJ2NoaWxkcmVuJyBpbiBvYmogJiYgQXJyYXkuaXNBcnJheShvYmouY2hpbGRyZW4pKSB7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvYmouY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHlpZWxkKiB0cmF2ZXJzZShvYmouY2hpbGRyZW5baV0sIHBhdGguY29uY2F0KFsnY2hpbGRyZW4nLCBpXSksIGRvYyk7CiAgICB9CiAgfQp9OwoAAAAAAAAAAHEPAAAAAAAAAAAAAAAAAAAAAAAAcQ8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACZAQAAAAAAAJkBAAAAAAAAAAAAAACAfUA"
				]
			]
		},
		{
			"file": "lib/misc.js",
			"settings":
			{
				"buffer_size": 65534,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					37,
					1,
					"paste",
					null,
					"AgAAAE9ZAAAAAAAAD1sAAAAAAAAAAAAAD1sAAAAAAAAPWwAAAAAAALwBAABleHBvcnQgZnVuY3Rpb24gZmlsdGVyKHNlcSwgcHJlZCwgdGhpc0FyZykgewogIGlmKGlzT2JqZWN0KHByZWQpICYmIHByZWQgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgIGxldCByZSA9IHByZWQ7CiAgICBwcmVkID0gKGVsLCBpKSA9PiByZS50ZXN0KGVsKTsKICB9CiAgaWYodHlwZXMuaXNJdGVyYWJsZShzZXEpKSB7CiAgICBsZXQgciA9IFtdLAogICAgICBpID0gMDsKICAgIGZvcihsZXQgZWwgb2Ygc2VxKSBpZihwcmVkLmNhbGwodGhpc0FyZywgZWwsIGkrKywgc2VxKSkgci5wdXNoKGVsKTsKICAgIHJldHVybiByOwogIH0gZWxzZSBpZihpc09iamVjdChzZXEpKSB7CiAgICBsZXQgciA9IHt9OwogICAgZm9yKGxldCBrZXkgaW4gc2VxKSBpZihwcmVkLmNhbGwodGhpc0FyZywgdmFsdWUsIGtleSwgc2VxKSkgcltrZXldID0gc2VxW2tleV07CiAgICByZXR1cm4gcjsKICB9Cn0",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABPWQAAAAAAAAtbAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"left_delete",
					null,
					"AQAAAE5ZAAAAAAAATlkAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABPWQAAAAAAAE9ZAAAAAAAAAAAAAAAAIEA"
				],
				[
					54,
					1,
					"paste",
					null,
					"AQAAAAG+AAAAAAAAD78AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABvgAAAAAAAAG+AAAAAAAAAAAAAAAA8L8"
				],
				[
					55,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAA+/AAAAAAAAEL8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAPvwAAAAAAAA+/AAAAAAAAAAAAAAAA8L8"
				],
				[
					62,
					1,
					"cut",
					null,
					"AQAAAB++AAAAAAAAH74AAAAAAAAIAAAAICB0cnkgewo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfvgAAAAAAACe+AAAAAAAAAAAAAAAAAAA"
				],
				[
					66,
					1,
					"cut",
					null,
					"AQAAAOW+AAAAAAAA5b4AAAAAAAAhAAAAICB9IGNhdGNoKGVycikge30KICByZXR1cm4gbnVsbDsK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlvgAAAAAAAAa/AAAAAAAAAAAAAAAAAAA"
				],
				[
					73,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC4/QAALy9leHBvcnQgeyB0eXBlcyB9IGZyb20gICcuLi9xdWlja2pzL3Fqcy1tb2R1bGVzL2xpYi91dGlsLmpzJzsKCmNvbnN0IHNsaWNlID0gKHgsIHMsIGUpID0+CiAgdHlwZW9mIHggPT0gJ29iamVjdCcgPyAoaXNBcnJheUJ1ZmZlcih4KSA/IGR1cEFycmF5QnVmZmVyKHgsIHMsIGUpIDogQXJyYXkuaXNBcnJheSh4KSA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHgsIHMsIGUpIDogeC5zbGljZShzLCBlKSkgOiBTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwoeCwgcywgZSk7CmNvbnN0IHN0cmluZ2lmeSA9IHYgPT4gYCR7dn1gOwpjb25zdCBwcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mOwpjb25zdCBmb3JtYXROdW1iZXIgPSBuID0+IChuID09PSAtMCA/ICctMCcgOiBgJHtufWApOwpjb25zdCBpc05hdGl2ZSA9IGZuID0+IC9cW25hdGl2ZVxzY29kZVxdLy50ZXN0KHN0cmluZ2lmeShmbikpOwoKLypleHBvcnQgZGVmYXVsdCovIGZ1bmN0aW9uIHV0aWwoKSB7CiAgcmV0dXJuIHV0aWw7Cn0KCnV0aWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdXRpbDsKCmNvbnN0IEFzeW5jRnVuY3Rpb24gPSBhc3luYyBmdW5jdGlvbiB4KCkge30uY29uc3RydWN0b3I7CmNvbnN0IEdlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBBc3luY0dlbmVyYXRvckZ1bmN0aW9uID0gYXN5bmMgZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBUeXBlZEFycmF5ID0gcHJvdG9PZihwcm90b09mKG5ldyBVaW50MTZBcnJheSgxMCkpKS5jb25zdHJ1Y3RvcjsKCmNvbnN0IFNldEl0ZXJhdG9yUHJvdG90eXBlID0gcHJvdG9PZihuZXcgU2V0KCkudmFsdWVzKCkpOwpjb25zdCBNYXBJdGVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YobmV3IE1hcCgpLmVudHJpZXMoKSk7Ci8vY29uc3QgR2VuZXJhdG9yUHJvdG90eXBlID0gcHJvdG9PZigoZnVuY3Rpb24qICgpIHt9KSgpKTsKCi8vIHByZXR0aWVyLWlnbm9yZQpleHBvcnQgY29uc3QgZXJyb3JzID0gW251bGwsICdFUEVSTScsICdFTk9FTlQnLCAnRVNSQ0gnLCAnRUlOVFInLCAnRUlPJywgJ0VOWElPJywgJ0UyQklHJywgJ0VOT0VYRUMnLCAnRUJBREYnLCAnRUNISUxEJywgJ0VBR0FJTicsICdFTk9NRU0nLCAnRUFDQ0VTJywgJ0VGQVVMVCcsICdFTk9UQkxLJywgJ0VCVVNZJywgJ0VFWElTVCcsICdFWERFVicsICdFTk9ERVYnLCAnRU5PVERJUicsICdFSVNESVInLCAnRUlOVkFMJywgJ0VORklMRScsICdFTUZJTEUnLCAnRU5PVFRZJywgJ0VUWFRCU1knLCAnRUZCSUcnLCAnRU5PU1BDJywgJ0VTUElQRScsICdFUk9GUycsICdFTUxJTksnLCAnRVBJUEUnLCAnRURPTScsICdFUkFOR0UnLCAnRURFQURMSycsICdFTkFNRVRPT0xPTkcnLCAnRU5PTENLJywgJ0VOT1NZUycsICdFTk9URU1QVFknLCBudWxsLCBudWxsLCAnRU5PTVNHJywgJ0VJRFJNJywgJ0VDSFJORycsICdFTDJOU1lOQycsICdFTDNITFQnLCAnRUwzUlNUJywgJ0VMTlJORycsICdFVU5BVENIJywgJ0VOT0NTSScsICdFTDJITFQnLCAnRUJBREUnLCAnRUJBRFInLCAnRVhGVUxMJywgJ0VOT0FOTycsICdFQkFEUlFDJywgbnVsbCwgJycsICdFQkZPTlQnLCAnRU5PU1RSJywgJ0VOT0RBVEEnLCAnRVRJTUUnLCAnRU5PU1InLCAnRU5PTkVUJywgJ0VOT1BLRycsICdFUkVNT1RFJywgJ0VOT0xJTksnLCAnRUFEVicsICdFU1JNTlQnLCAnRUNPTU0nLCAnRVBST1RPJywgJ0VNVUxUSUhPUCcsICdFRE9URE9UJywgJ0VCQURNU0cnLCAnRU9WRVJGTE9XJywgJ0VOT1RVTklRJywgJ0VCQURGRCcsICdFUkVNQ0hHJywgJ0VMSUJBQ0MnLCAnRUxJQkJBRCcsICdFTElCU0NOJywgJ0VMSUJNQVgnLCAnRUxJQkVYRUMnLCAnRUlMU0VRJywgJ0VSRVNUQVJUJywgJ0VTVFJQSVBFJywgJ0VVU0VSUycsICdFTk9UU09DSycsICdFREVTVEFERFJSRVEnLCAnRU1TR1NJWkUnLCAnRVBST1RPVFlQRScsICdFTk9QUk9UT09QVCcsICdFUFJPVE9OT1NVUFBPUlQnLCAnRVNPQ0tUTk9TVVBQT1JUJywgJ0VPUE5PVFNVUFAnLCAnRVBGTk9TVVBQT1JUJywgJ0VBRk5PU1VQUE9SVCcsICdFQUREUklOVVNFJywgJ0VBRERSTk9UQVZBSUwnLCAnRU5FVERPV04nLCAnRU5FVFVOUkVBQ0gnLCAnRU5FVFJFU0VUJywgJ0VDT05OQUJPUlRFRCcsICdFQ09OTlJFU0VUJywgJ0VOT0JVRlMnLCAnRUlTQ09OTicsICdFTk9UQ09OTicsICdFU0hVVERPV04nLCAnRVRPT01BTllSRUZTJywgJ0VUSU1FRE9VVCcsICdFQ09OTlJFRlVTRUQnLCAnRUhPU1RET1dOJywgJ0VIT1NUVU5SRUFDSCcsICdFQUxSRUFEWScsICdFSU5QUk9HUkVTUycsICdFU1RBTEUnLCAnRVVDTEVBTicsICdFTk9UTkFNJywgJ0VOQVZBSUwnLCAnRUlTTkFNJywgJ0VSRU1PVEVJTycsICdFRFFVT1QnLCAnRU5PTUVESVVNJywgJ0VNRURJVU1UWVBFJywgJ0VDQU5DRUxFRCcsICdFTk9LRVknLCAnRUtFWUVYUElSRUQnLCAnRUtFWVJFVk9LRUQnLCAnRUtFWVJFSkVDVEVEJywgJ0VPV05FUkRFQUQnLCAnRU5PVFJFQ09WRVJBQkxFJywgJ0VSRktJTEwnXTsKCmV4cG9ydCBjb25zdCB0eXBlcyA9IHsKICBpc0FueUFycmF5QnVmZmVyKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiAodiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IHYgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcik7CiAgfSwKICBpc0FycmF5QnVmZmVyKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7CiAgfSwKICBpc0JpZ0ludDY0QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCaWdJbnQ2NEFycmF5OwogIH0sCiAgaXNCaWdVaW50NjRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEJpZ1VpbnQ2NEFycmF5OwogIH0sCiAgaXNEYXRlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRGF0ZTsKICB9LAogIGlzRmxvYXQzMkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5OwogIH0sCiAgaXNGbG9hdDY0QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXk7CiAgfSwKICBpc0ludDhBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEludDhBcnJheTsKICB9LAogIGlzSW50MTZBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEludDE2QXJyYXk7CiAgfSwKICBpc0ludDMyQXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQzMkFycmF5OwogIH0sCiAgaXNNYXAodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBNYXA7CiAgfSwKICBpc1Byb21pc2UodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBQcm9taXNlOwogIH0sCiAgaXNQcm94eSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFByb3h5OwogIH0sCiAgaXNSZWdFeHAodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBSZWdFeHA7CiAgfSwKICBpc1NldCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFNldDsKICB9LAogIGlzU2hhcmVkQXJyYXlCdWZmZXIodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcjsKICB9LAogIGlzVWludDhBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk7CiAgfSwKICBpc1VpbnQ4Q2xhbXBlZEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXk7CiAgfSwKICBpc1VpbnQxNkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgVWludDE2QXJyYXk7CiAgfSwKICBpc1VpbnQzMkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgVWludDMyQXJyYXk7CiAgfSwKICBpc1dlYWtNYXAodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBXZWFrTWFwOwogIH0sCiAgaXNXZWFrU2V0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgV2Vha1NldDsKICB9LAogIGlzRGF0YVZpZXcodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBEYXRhVmlldzsKICB9LAogIGlzQm9vbGVhbk9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEJvb2xlYW47CiAgfSwKICBpc0FzeW5jRnVuY3Rpb24odikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBBc3luY0Z1bmN0aW9uOwogIH0sCiAgaXNHZW5lcmF0b3JGdW5jdGlvbih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEdlbmVyYXRvckZ1bmN0aW9uOwogIH0sCiAgaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQXN5bmNHZW5lcmF0b3JGdW5jdGlvbjsKICB9LAogIGlzTnVtYmVyT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgTnVtYmVyOwogIH0sCiAgaXNCaWdJbnRPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCaWdJbnQ7CiAgfSwKICBpc1N5bWJvbE9iamVjdCh2KSB7CiAgICByZXR1cm4gdiAmJiB2IGluc3RhbmNlb2YgU3ltYm9sOwogIH0sCiAgaXNOYXRpdmVFcnJvcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEVycm9yICYmIGlzTmF0aXZlKHYuY29uc3RydWN0b3IpOwogIH0sCiAgaXNNYXBJdGVyYXRvcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgcHJvdG9PZih2KSA9PSBNYXBJdGVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzU2V0SXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHByb3RvT2YodikgPT0gU2V0SXRlcmF0b3JQcm90b3R5cGU7CiAgfSwKICBpc1N0cmluZ09iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFN0cmluZzsKICB9LAogIGlzQXJyYXlCdWZmZXJWaWV3KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcodik7CiAgfSwKICBpc0FyZ3VtZW50c09iamVjdCh2KSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHYpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nOwogIH0sCiAgaXNCb3hlZFByaW1pdGl2ZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgW051bWJlciwgU3RyaW5nLCBCb29sZWFuLCBCaWdJbnQsIFN5bWJvbF0uc29tZShjdG9yID0+IHYgaW5zdGFuY2VvZiBjdG9yKTsKICB9LAogIGlzR2VuZXJhdG9yT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IEdlbmVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzVHlwZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7CiAgfSwKICBpc01vZHVsZU5hbWVzcGFjZU9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdltTeW1ib2wudG9TdHJpbmdUYWddID09ICdNb2R1bGUnOwogIH0sCiAgaXNDb25zdHJ1Y3Rvcih2KSB7CiAgICByZXR1cm4gaXNGdW5jdGlvbih2KSAmJiAncHJvdG90eXBlJyBpbiB2OwogIH0sCiAgaXNJdGVyYWJsZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgaXNGdW5jdGlvbih2W1N5bWJvbC5pdGVyYXRvcl0pOwogIH0sCiAgaXNBc3luY0l0ZXJhYmxlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBpc0Z1bmN0aW9uKHZbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKTsKICB9LAogIGlzSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIGlzRnVuY3Rpb24odi5uZXh0KTsKICB9LAogIGlzQXJyYXlMaWtlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB0eXBlb2Ygdi5sZW5ndGggPT0gJ251bWJlcicgJiYgTnVtYmVyLmlzSW50ZWdlcih2Lmxlbmd0aCk7CiAgfQp9OwoKZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzQXN5bmMoZm4pIHsKICBpZih0eXBlcy5pc0FzeW5jRnVuY3Rpb24oZm4pIHx8IHR5cGVzLmlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbihmbikpIHJldHVybiB0cnVlOwoKICBpZihpc0Z1bmN0aW9uKGZuKSkgcmV0dXJuIC9eYXN5bmNccytmdW5jdGlvbi8udGVzdChmbiArICcnKTsKfQoKZXhwb3J0IGNvbnN0IGluc3BlY3RTeW1ib2wgPSBTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpOwoKY29uc3QgVVRGOEZpcnN0Q29kZU1hc2sgPSBbMHgxZiwgMHhmLCAweDcsIDB4MywgMHgxXTsKY29uc3QgVVRGOE1pbkNvZGUgPSBbMHg4MCwgMHg4MDAsIDB4MTAwMDAsIDB4MDAyMDAwMDAsIDB4MDQwMDAwMDBdOwoKLyogcHJldHRpZXItaWdub3JlICovIGNvbnN0IGVycm9yU3ltYm9scyA9IFsgMCwgJ0VQRVJNJywgJ0VOT0VOVCcsICdFU1JDSCcsICdFSU5UUicsICdFSU8nLCAnRU5YSU8nLCAnRTJCSUcnLCAnRU5PRVhFQycsICdFQkFERicsICdFQ0hJTEQnLCAnRUFHQUlOJywgJ0VOT01FTScsICdFQUNDRVMnLCAnRUZBVUxUJywgJ0VOT1RCTEsnLCAnRUJVU1knLCAnRUVYSVNUJywgJ0VYREVWJywgJ0VOT0RFVicsICdFTk9URElSJywgJ0VJU0RJUicsICdFSU5WQUwnLCAnRU5GSUxFJywgJ0VNRklMRScsICdFTk9UVFknLCAnRVRYVEJTWScsICdFRkJJRycsICdFTk9TUEMnLCAnRVNQSVBFJywgJ0VST0ZTJywgJ0VNTElOSycsICdFUElQRScsICdFRE9NJywgJ0VSQU5HRScsICdFREVBRExLJywgJ0VOQU1FVE9PTE9ORycsICdFTk9MQ0snLCAnRU5PU1lTJywgJ0VOT1RFTVBUWScsIDAsIDAsICdFTk9NU0cnLCAnRUlEUk0nLCAnRUNIUk5HJywgJ0VMMk5TWU5DJywgJ0VMM0hMVCcsICdFTDNSU1QnLCAnRUxOUk5HJywgJ0VVTkFUQ0gnLCAnRU5PQ1NJJywgJ0VMMkhMVCcsICdFQkFERScsICdFQkFEUicsICdFWEZVTEwnLCAnRU5PQU5PJywgJ0VCQURSUUMnLCAwLCAwLCAnRUJGT05UJywgJ0VOT1NUUicsICdFTk9EQVRBJywgJ0VUSU1FJywgJ0VOT1NSJywgJ0VOT05FVCcsICdFTk9QS0cnLCAnRVJFTU9URScsICdFTk9MSU5LJywgJ0VBRFYnLCAnRVNSTU5UJywgJ0VDT01NJywgJ0VQUk9UTycsICdFTVVMVElIT1AnLCAnRURPVERPVCcsICdFQkFETVNHJywgJ0VPVkVSRkxPVycsICdFTk9UVU5JUScsICdFQkFERkQnLCAnRVJFTUNIRycsICdFTElCQUNDJywgJ0VMSUJCQUQnLCAnRUxJQlNDTicsICdFTElCTUFYJywgJ0VMSUJFWEVDJywgJ0VJTFNFUScsICdFUkVTVEFSVCcsICdFU1RSUElQRScsICdFVVNFUlMnLCAnRU5PVFNPQ0snLCAnRURFU1RBRERSUkVRJywgJ0VNU0dTSVpFJywgJ0VQUk9UT1RZUEUnLCAnRU5PUFJPVE9PUFQnLCAnRVBST1RPTk9TVVBQT1JUJywgJ0VTT0NLVE5PU1VQUE9SVCcsICdFT1BOT1RTVVBQJywgJ0VQRk5PU1VQUE9SVCcsICdFQUZOT1NVUFBPUlQnLCAnRUFERFJJTlVTRScsICdFQUREUk5PVEFWQUlMJywgJ0VORVRET1dOJywgJ0VORVRVTlJFQUNIJywgJ0VORVRSRVNFVCcsICdFQ09OTkFCT1JURUQnLCAnRUNPTk5SRVNFVCcsICdFTk9CVUZTJywgJ0VJU0NPTk4nLCAnRU5PVENPTk4nLCAnRVNIVVRET1dOJywgJ0VUT09NQU5ZUkVGUycsICdFVElNRURPVVQnLCAnRUNPTk5SRUZVU0VEJywgJ0VIT1NURE9XTicsICdFSE9TVFVOUkVBQ0gnLCAnRUFMUkVBRFknLCAnRUlOUFJPR1JFU1MnLCAnRVNUQUxFJywgJ0VVQ0xFQU4nLCAnRU5PVE5BTScsICdFTkFWQUlMJywgJ0VJU05BTScsICdFUkVNT1RFSU8nLCAnRURRVU9UJywgJ0VOT01FRElVTScsICdFTUVESVVNVFlQRScsICdFQ0FOQ0VMRUQnLCAnRU5PS0VZJywgJ0VLRVlFWFBJUkVEJywgJ0VLRVlSRVZPS0VEJywgJ0VLRVlSRUpFQ1RFRCcsICdFT1dORVJERUFEJywgJ0VOT1RSRUNPVkVSQUJMRScsICdFUkZLSUxMJyBdOwoKZXhwb3J0IGZ1bmN0aW9uIFN5c2NhbGxFcnJvcihzeXNjYWxsLCBlcnJudW0pIHsKICBsZXQgb2JqID0gbmV3LnRhcmdldCA/IHRoaXMgOiBuZXcgU3lzY2FsbEVycm9yKCk7CiAgaWYoc3lzY2FsbCkgb2JqLnN5c2NhbGwgPSBzeXNjYWxsOwogIGlmKGVycm51bSAhPSB1bmRlZmluZWQpIHsKICAgIGlmKHR5cGVvZiBlcnJudW0gPT0gJ251bWJlcicpIHsKICAgICAgb2JqLmVycm5vID0gZXJybnVtOwogICAgICBvYmouY29kZSA9IGVycm9yU3ltYm9sc1tlcnJudW1dOwogICAgfSBlbHNlIHsKICAgICAgb2JqLmVycm5vID0gZXJyb3JTeW1ib2xzLmluZGV4T2YoZXJybnVtKTsKICAgICAgb2JqLmNvZGUgPSBlcnJudW07CiAgICB9CiAgfQogIEVycm9yLmNhbGwob2JqLCBgU3lzY2FsbEVycm9yOiAnJHtvYmouc3lzY2FsbH0nIGVycm5vID0gJHtvYmouY29kZX0gKCR7b2JqLmVycm5vfSlgKTsKICByZXR1cm4gb2JqOwp9CgpTeXNjYWxsRXJyb3IucHJvdG90eXBlID0gbmV3IEVycm9yKCk7CgpkZWZpbmUoU3lzY2FsbEVycm9yLnByb3RvdHlwZSwgewogIGdldCBtZXNzYWdlKCkgewogICAgcmV0dXJuIGBTeXNjYWxsRXJyb3I6ICcke3RoaXMuc3lzY2FsbH0nIGVycm5vID0gJHt0aGlzLmNvZGV9ICgke3RoaXMuZXJybm99KWA7CiAgfSwKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1N5c2NhbGxFcnJvcicKfSk7CgpnbG9iYWxUaGlzLlN5c2NhbGxFcnJvciA9IFN5c2NhbGxFcnJvcjsKCmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhhcnJheUJ1ZiwgZW5jb2RpbmcgPSAndXRmLTgnKSB7CiAgaWYoZ2xvYmFsVGhpcy5UZXh0RGVjb2RlcikgewogICAgbGV0IGRlYyA9IG5ldyBUZXh0RGVjb2RlcihlbmNvZGluZyk7CiAgICByZXR1cm4gZGVjLmRlY29kZShhcnJheUJ1Zik7CiAgfQoKICBpZihlbmNvZGluZyA9PSAnbGF0aW4xJykgewogICAgbGV0IGJpbmFyeSA9ICcnOwogICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWYpOwogICAgbGV0IGxlbiA9IGJ5dGVzLmJ5dGVMZW5ndGg7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pOwogICAgfQogICAgcmV0dXJuIGJpbmFyeTsKICB9CgogIGxldCBhID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWYpOwogIGxldCBwID0gMDsKICBsZXQgbyA9ICcnOwogIGxldCBsZW4gPSBhLmxlbmd0aDsKICBmb3IocCA9IDA7IHAgPCBsZW47ICkgewogICAgbGV0IG1heF9sZW4gPSBsZW4gLSBwOwogICAgbGV0IGwsIGMsIGIsIGk7CgogICAgYyA9IGFbcCsrXTsKICAgIGlmKGMgPCAweDgwKSB7CiAgICAgIG8gKz0gU3RyaW5nLmZyb21Db2RlUG9pbnQoYyk7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHN3aXRjaCAoYykgewogICAgICBjYXNlIDB4YzA6CiAgICAgIGNhc2UgMHhjMToKICAgICAgY2FzZSAweGMyOgogICAgICBjYXNlIDB4YzM6CiAgICAgIGNhc2UgMHhjNDoKICAgICAgY2FzZSAweGM1OgogICAgICBjYXNlIDB4YzY6CiAgICAgIGNhc2UgMHhjNzoKICAgICAgY2FzZSAweGM4OgogICAgICBjYXNlIDB4Yzk6CiAgICAgIGNhc2UgMHhjYToKICAgICAgY2FzZSAweGNiOgogICAgICBjYXNlIDB4Y2M6CiAgICAgIGNhc2UgMHhjZDoKICAgICAgY2FzZSAweGNlOgogICAgICBjYXNlIDB4Y2Y6CiAgICAgIGNhc2UgMHhkMDoKICAgICAgY2FzZSAweGQxOgogICAgICBjYXNlIDB4ZDI6CiAgICAgIGNhc2UgMHhkMzoKICAgICAgY2FzZSAweGQ0OgogICAgICBjYXNlIDB4ZDU6CiAgICAgIGNhc2UgMHhkNjoKICAgICAgY2FzZSAweGQ3OgogICAgICBjYXNlIDB4ZDg6CiAgICAgIGNhc2UgMHhkOToKICAgICAgY2FzZSAweGRhOgogICAgICBjYXNlIDB4ZGI6CiAgICAgIGNhc2UgMHhkYzoKICAgICAgY2FzZSAweGRkOgogICAgICBjYXNlIDB4ZGU6CiAgICAgIGNhc2UgMHhkZjoKICAgICAgICBsID0gMTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAweGUwOgogICAgICBjYXNlIDB4ZTE6CiAgICAgIGNhc2UgMHhlMjoKICAgICAgY2FzZSAweGUzOgogICAgICBjYXNlIDB4ZTQ6CiAgICAgIGNhc2UgMHhlNToKICAgICAgY2FzZSAweGU2OgogICAgICBjYXNlIDB4ZTc6CiAgICAgIGNhc2UgMHhlODoKICAgICAgY2FzZSAweGU5OgogICAgICBjYXNlIDB4ZWE6CiAgICAgIGNhc2UgMHhlYjoKICAgICAgY2FzZSAweGVjOgogICAgICBjYXNlIDB4ZWQ6CiAgICAgIGNhc2UgMHhlZToKICAgICAgY2FzZSAweGVmOgogICAgICAgIGwgPSAyOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDB4ZjA6CiAgICAgIGNhc2UgMHhmMToKICAgICAgY2FzZSAweGYyOgogICAgICBjYXNlIDB4ZjM6CiAgICAgIGNhc2UgMHhmNDoKICAgICAgY2FzZSAweGY1OgogICAgICBjYXNlIDB4ZjY6CiAgICAgIGNhc2UgMHhmNzoKICAgICAgICBsID0gMzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAweGY4OgogICAgICBjYXNlIDB4Zjk6CiAgICAgIGNhc2UgMHhmYToKICAgICAgY2FzZSAweGZiOgogICAgICAgIGwgPSA0OwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDB4ZmM6CiAgICAgIGNhc2UgMHhmZDoKICAgICAgICBsID0gNTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIC8qIGNoZWNrIHRoYXQgd2UgaGF2ZSBlbm91Z2ggY2hhcmFjdGVycyAqLwogICAgaWYobCA+IG1heF9sZW4gLSAxKSByZXR1cm4gLTE7CgogICAgYyAmPSBVVEY4Rmlyc3RDb2RlTWFza1tsIC0gMV07CiAgICBmb3IoaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgYiA9IGFbcCsrXTsKICAgICAgaWYoYiA8IDB4ODAgfHwgYiA+PSAweGMwKSByZXR1cm4gLTE7CgogICAgICBjID0gKGMgPDwgNikgfCAoYiAmIDB4M2YpOwogICAgfQogICAgaWYoYyA8IFVURjhNaW5Db2RlW2wgLSAxXSkgcmV0dXJuIC0xOwogICAgbyArPSBTdHJpbmcuZnJvbUNvZGVQb2ludChjKTsKICB9CiAgcmV0dXJuIG87Cn0KCmNvbnN0IGI2NGNoID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JzsKY29uc3QgYjY0Y2hzID0gWy4uLmI2NGNoXTsKY29uc3QgYjY0dGFiID0gKGEgPT4gewogIGxldCB0YWIgPSB7fTsKICBhLmZvckVhY2goKGMsIGkpID0+ICh0YWJbY10gPSBpKSk7CiAgcmV0dXJuIHRhYjsKfSkoYjY0Y2hzKTsKY29uc3QgYjY0cmUgPSAvXig/OltBLVphLXpcZCtcL117NH0pKj8oPzpbQS1aYS16XGQrXC9dezJ9KD86PT0pP3xbQS1aYS16XGQrXC9dezN9PT8pPyQvOwoKZXhwb3J0IGZ1bmN0aW9uIGJ0b2EoYmluKSB7CiAgbGV0IHUzMiwKICAgIGMwLAogICAgYzEsCiAgICBjMiwKICAgIGFzYyA9ICcnOwogIGNvbnN0IHBhZCA9IGJpbi5sZW5ndGggJSAzOwogIGZvcihsZXQgaSA9IDA7IGkgPCBiaW4ubGVuZ3RoOyBpICs9IDApIHsKICAgIGlmKChjMCA9IGJpbi5jaGFyQ29kZUF0KGkrKykpID4gMjU1IHx8IChjMSA9IGJpbi5jaGFyQ29kZUF0KGkrKykpID4gMjU1IHx8IChjMiA9IGJpbi5jaGFyQ29kZUF0KGkrKykpID4gMjU1KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGNoYXJhY3RlciBmb3VuZCcpOwogICAgdTMyID0gKGMwIDw8IDE2KSB8IChjMSA8PCA4KSB8IGMyOwogICAgYXNjICs9IGI2NGNoc1sodTMyID4+IDE4KSAmIDYzXSArIGI2NGNoc1sodTMyID4+IDEyKSAmIDYzXSArIGI2NGNoc1sodTMyID4+IDYpICYgNjNdICsgYjY0Y2hzW3UzMiAmIDYzXTsKICB9CiAgcmV0dXJuIHBhZCA/IGFzYy5zbGljZSgwLCBwYWQgLSAzKSArICc9PT0nLnN1YnN0cmluZyhwYWQpIDogYXNjOwp9CgpleHBvcnQgZnVuY3Rpb24gYXRvYihhc2MpIHsKICBhc2MgPSBhc2MucmVwbGFjZSgvXHMrL2csICcnKTsKICBpZighYjY0cmUudGVzdChhc2MpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdtYWxmb3JtZWQgYmFzZTY0LicpOwogIGFzYyArPSAnPT0nLnNsaWNlKDIgLSAoYXNjLmxlbmd0aCAmIDMpKTsKICBsZXQgdTI0LAogICAgYmluID0gJycsCiAgICByMSwKICAgIHIyOwogIGZvcihsZXQgaSA9IDA7IGkgPCBhc2MubGVuZ3RoOyBpICs9IDApIHsKICAgIHUyNCA9IChiNjR0YWJbYXNjLmNoYXJBdChpKyspXSA8PCAxOCkgfCAoYjY0dGFiW2FzYy5jaGFyQXQoaSsrKV0gPDwgMTIpIHwgKChyMSA9IGI2NHRhYlthc2MuY2hhckF0KGkrKyldKSA8PCA2KSB8IChyMiA9IGI2NHRhYlthc2MuY2hhckF0KGkrKyldKTsKICAgIGJpbiArPQogICAgICByMSA9PT0gNjQgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKCh1MjQgPj4gMTYpICYgMjU1KSA6IHIyID09PSA2NCA/IFN0cmluZy5mcm9tQ2hhckNvZGUoKHUyNCA+PiAxNikgJiAyNTUsICh1MjQgPj4gOCkgJiAyNTUpIDogU3RyaW5nLmZyb21DaGFyQ29kZSgodTI0ID4+IDE2KSAmIDI1NSwgKHUyNCA+PiA4KSAmIDI1NSwgdTI0ICYgMjU1KTsKICB9CiAgcmV0dXJuIGJpbjsKfQpleHBvcnQgZnVuY3Rpb24gYXNzZXJ0KGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZihhcmd1bWVudHMubGVuZ3RoID09IDEpIGV4cGVjdGVkID0gdHJ1ZTsKCiAgaWYoYWN0dWFsID09PSBleHBlY3RlZCkgcmV0dXJuOwoKICBpZihhY3R1YWwgIT09IG51bGwgJiYgZXhwZWN0ZWQgIT09IG51bGwgJiYgdHlwZW9mIGFjdHVhbCA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgZXhwZWN0ZWQgPT0gJ29iamVjdCcgJiYgYWN0dWFsLnRvU3RyaW5nKCkgPT09IGV4cGVjdGVkLnRvU3RyaW5nKCkpIHJldHVybjsKCiAgdGhyb3cgRXJyb3IoJ2Fzc2VydGlvbiBmYWlsZWQ6IGdvdCB8JyArIGFjdHVhbCArICd8JyArICcsIGV4cGVjdGVkIHwnICsgZXhwZWN0ZWQgKyAnfCcgKyAobWVzc2FnZSA/ICcgKCcgKyBtZXNzYWdlICsgJyknIDogJycpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZShzdHIsIGNoYXJzID0gW10pIHsKICBjb25zdCB0YWJsZSA9IHsKICAgIFsnXG4nXTogJ24nLAogICAgWydcciddOiAncicsCiAgICBbJ1x0J106ICd0JywKICAgIFsnXHYnXTogJ3YnLAogICAgWydcYiddOiAnYicKICB9OwogIGZvcihsZXQgY2ggb2YgY2hhcnMpIHRhYmxlW2NoXSA9IGNoOwogIGxldCBzID0gJyc7CiAgZm9yKGxldCBjaCBvZiBzdHIpIHsKICAgIGlmKHRhYmxlW2NoXSkgcyArPSAnXFwnICsgKHRhYmxlW2NoXSA/PyBjaCk7CiAgICBlbHNlIHMgKz0gY2g7CiAgfQogIHJldHVybiBzOwp9CgpleHBvcnQgZnVuY3Rpb24gcXVvdGUoc3RyLCBxID0gJyInKSB7CiAgcmV0dXJuIHEgKyBlc2NhcGUoc3RyLCBbcV0pICsgcTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemUoZm4pIHsKICBsZXQgY2FjaGUgPSB7fTsKICByZXR1cm4gKG4sIC4uLnJlc3QpID0+IHsKICAgIGlmKG4gaW4gY2FjaGUpIHJldHVybiBjYWNoZVtuXTsKICAgIHJldHVybiAoY2FjaGVbbl0gPSBmbihuLCAuLi5yZXN0KSk7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldHNldCh0YXJnZXQsIC4uLmFyZ3MpIHsKICBsZXQgcmV0ID0gW107CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICByZXQgPSBbdGFyZ2V0LCB0eXBlb2YgYXJnc1swXSA9PSAnZnVuY3Rpb24nID8gYXJnc1swXSA6IHRhcmdldF07CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICBpZih0YXJnZXQuZ2V0ID09PSB0YXJnZXQuc2V0KSB7CiAgICAgIGNvbnN0IEdldFNldCA9ICguLi5hcmdzKSA9PiB0YXJnZXQuc2V0KC4uLmFyZ3MpOwogICAgICByZXQgPSBbR2V0U2V0LCBHZXRTZXRdOwogICAgfSBlbHNlIHsKICAgICAgcmV0ID0gW2tleSA9PiB0YXJnZXQuZ2V0KGtleSksIChrZXksIHZhbHVlKSA9PiB0YXJnZXQuc2V0KGtleSwgdmFsdWUpXTsKICAgICAgLy9jb25zb2xlLmxvZygnZ2V0c2V0JywgcmV0WzFdICsgJycsIHRhcmdldC5nZXQgPT09IHRhcmdldC5zZXQpOwogICAgfQogIH0gZWxzZSBpZihpc09iamVjdCh0YXJnZXQpKSB7CiAgICByZXQgPSBba2V5ID0+IHRhcmdldFtrZXldLCAoa2V5LCB2YWx1ZSkgPT4gKHRhcmdldFtrZXldID0gdmFsdWUpXTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgZ2V0c2V0IHVua25vd24gYXJndW1lbnQgdHlwZSAnJHt0eXBlb2YgdGFyZ2V0fSdgKTsKICB9CiAgaWYoYXJncy5sZW5ndGgpIHsKICAgIGxldCBbZ2V0LCBzZXRdID0gcmV0OwogICAgcmV0ID0gWygpID0+IGdldCguLi5hcmdzKSwgdmFsdWUgPT4gc2V0KC4uLmFyZ3MsIHZhbHVlKV07CiAgfQogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtb2RpZmllciguLi5hcmdzKSB7CiAgbGV0IGdzID0gZ2V0dGVyc2V0dGVyKC4uLmFyZ3MpOwogIHJldHVybiBmbiA9PiB7CiAgICBsZXQgdmFsdWUgPSBncygpOwogICAgcmV0dXJuIGZuKHZhbHVlLCBuZXdWYWx1ZSA9PiBncyhuZXdWYWx1ZSkpOwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXR0ZXIodGFyZ2V0LCAuLi5hcmdzKSB7CiAgaWYoaXNPYmplY3QodGFyZ2V0KSAmJiBpc0Z1bmN0aW9uKHRhcmdldC5nZXQpKSByZXR1cm4gKCkgPT4gdGFyZ2V0LmdldCguLi5hcmdzKTsKICBsZXQgcmV0OwogIGlmKGlzRnVuY3Rpb24odGFyZ2V0KSkgewogICAgcmV0ID0gdGFyZ2V0OwogIH0gZWxzZSBpZihoYXNHZXRTZXQodGFyZ2V0KSkgewogICAgcmV0ID0ga2V5ID0+IHRhcmdldC5nZXQoa2V5KTsKICB9IGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkgewogICAgcmV0ID0ga2V5ID0+IHRhcmdldFtrZXldOwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBnZXR0ZXIgdW5rbm93biBhcmd1bWVudCB0eXBlICcke3R5cGVvZiB0YXJnZXR9J2ApOwogIH0KICBpZihhcmdzLmxlbmd0aCkgewogICAgbGV0IGdldCA9IHJldDsKICAgIHJldCA9ICgpID0+IGdldCguLi5hcmdzKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNldHRlcih0YXJnZXQsIC4uLmFyZ3MpIHsKICBpZihpc09iamVjdCh0YXJnZXQpICYmIGlzRnVuY3Rpb24odGFyZ2V0LnNldCkpIHJldHVybiB2YWx1ZSA9PiB0YXJnZXQuc2V0KC4uLmFyZ3MsIHZhbHVlKTsKICBsZXQgcmV0OwogIGlmKGlzRnVuY3Rpb24odGFyZ2V0KSkgewogICAgcmV0ID0gdGFyZ2V0OwogIH0gZWxzZSBpZihoYXNHZXRTZXQodGFyZ2V0KSkgewogICAgcmV0ID0gKGtleSwgdmFsdWUpID0+IHRhcmdldC5zZXQoa2V5LCB2YWx1ZSk7CiAgfSBlbHNlIGlmKGlzT2JqZWN0KHRhcmdldCkpIHsKICAgIHJldCA9IChrZXksIHZhbHVlKSA9PiAodGFyZ2V0W2tleV0gPSB2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYHNldHRlciB1bmtub3duIGFyZ3VtZW50IHR5cGUgJyR7dHlwZW9mIHRhcmdldH0nYCk7CiAgfQogIGlmKGFyZ3MubGVuZ3RoKSB7CiAgICBsZXQgc2V0ID0gcmV0OwogICAgcmV0ID0gdmFsdWUgPT4gc2V0KC4uLmFyZ3MsIHZhbHVlKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldHRlcnNldHRlcih0YXJnZXQsIC4uLmFyZ3MpIHsKICBsZXQgZm47CiAgaWYoaXNPYmplY3QodGFyZ2V0KSAmJiBpc0Z1bmN0aW9uKHRhcmdldC5yZWNlaXZlcikpIHJldHVybiAoLi4uYXJnczIpID0+IHRhcmdldC5yZWNlaXZlciguLi5hcmdzLCAuLi5hcmdzMik7CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICBpZihpc0Z1bmN0aW9uKGFyZ3NbMF0pICYmIGFyZ3NbMF0gIT09IHRhcmdldCkgewogICAgICBsZXQgc2V0dGVyID0gYXJncy5zaGlmdCgpOwogICAgICBmbiA9ICguLi5hcmdzKSA9PiAoYXJncy5sZW5ndGggPT0gMCA/IHRhcmdldCgpIDogc2V0dGVyKC4uLmFyZ3MpKTsKICAgIH0gZWxzZSBmbiA9IHRhcmdldDsKICB9IGVsc2UgaWYoaGFzR2V0U2V0KHRhcmdldCkpIHsKICAgIGlmKHRhcmdldC5nZXQgPT09IHRhcmdldC5zZXQpIGZuID0gKC4uLmFyZ3MpID0+IHRhcmdldC5zZXQoLi4uYXJncyk7CiAgICBlbHNlIGZuID0gKC4uLmFyZ3MpID0+IChhcmdzLmxlbmd0aCA8IDIgPyB0YXJnZXQuZ2V0KC4uLmFyZ3MpIDogdGFyZ2V0LnNldCguLi5hcmdzKSk7CiAgfSBlbHNlIGlmKGlzT2JqZWN0KHRhcmdldCkpIHsKICAgIGZuID0gKC4uLmFyZ3MpID0+IHsKICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gYXJnczsKICAgICAgaWYoYXJncy5sZW5ndGggPT0gMSkgcmV0dXJuIHRhcmdldFtrZXldOwogICAgICB0YXJnZXRba2V5XSA9IHZhbHVlOwogICAgfTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgZ2V0dGVyc2V0dGVyIHVua25vd24gYXJndW1lbnQgdHlwZSAnJHt0eXBlb2YgdGFyZ2V0fSdgKTsKICB9CiAgaWYoZm4gIT09IHRhcmdldCkgZGVmaW5lKGZuLCB7IHJlY2VpdmVyOiB0YXJnZXQgfSk7CiAgaWYoYXJncy5sZW5ndGgpIHJldHVybiAoLi4uYXJnczIpID0+IGZuKC4uLmFyZ3MsIC4uLmFyZ3MyKTsKICByZXR1cm4gZm47Cn0KCmV4cG9ydCBmdW5jdGlvbiBoYXNHZXRTZXQob2JqKSB7CiAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgWydnZXQnLCAnc2V0J10uZXZlcnkobSA9PiB0eXBlb2Ygb2JqW21dID09ICdmdW5jdGlvbicpOwp9CgpleHBvcnQgZnVuY3Rpb24gbWFwT2JqZWN0KHRhcmdldCkgewogIGxldCBvYmo7CiAgaWYoaGFzR2V0U2V0KHRhcmdldC5yZWNlaXZlcikpIHJldHVybiB0YXJnZXQucmVjZWl2ZXI7CiAgaWYoaGFzR2V0U2V0KHRhcmdldCkpIG9iaiA9IHRhcmdldDsKICBlbHNlIGlmKHR5cGVvZiB0YXJnZXQgPT0gJ2Z1bmN0aW9uJykgb2JqID0geyBnZXQ6IHRhcmdldCwgc2V0OiB0YXJnZXQgfTsKICBlbHNlIGlmKGlzT2JqZWN0KHRhcmdldCkpCiAgICBvYmogPSB7CiAgICAgIHNldDogKGtleSwgdmFsdWUpID0+ICh0YXJnZXRba2V5XSA9IHZhbHVlKSwKICAgICAgZ2V0OiBrZXkgPT4gdGFyZ2V0W2tleV0KICAgIH07CiAgaWYob2JqICE9PSB0YXJnZXQpIGRlZmluZShvYmosIHsgcmVjZWl2ZXI6IHRhcmdldCB9KTsKICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gb25jZShmbiwgdGhpc0FyZywgbWVtb0ZuKSB7CiAgbGV0IHJldCwKICAgIHJhbiA9IGZhbHNlOwoKICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykgewogICAgaWYoIXJhbikgewogICAgICByYW4gPSB0cnVlOwogICAgICByZXQgPSBmbi5hcHBseSh0aGlzQXJnIHx8IHRoaXMsIGFyZ3MpOwogICAgfSBlbHNlIGlmKHR5cGVvZiBtZW1vRm4gPT0gJ2Z1bmN0aW9uJykgewogICAgICByZXQgPSBtZW1vRm4ocmV0KTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfTsKfQoKY29uc3QgYXRleGl0X2Z1bmN0aW9ucyA9IFtdOwpjb25zdCBhdGV4aXRfaW5zdGFsbCA9IG9uY2UoY2FsbGJhY2sgPT4gewogIC8vIGF0dGFjaCB1c2VyIGNhbGxiYWNrIHRvIHRoZSBwcm9jZXNzIGV2ZW50IGVtaXR0ZXIKICAvLyBpZiBubyBjYWxsYmFjaywgaXQgd2lsbCBzdGlsbCBleGl0IGdyYWNlZnVsbHkgb24gQ3RybC1DCiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBub09wOwogIHByb2Nlc3Mub24oJ2NsZWFudXAnLCBjYWxsYmFjayk7CgogIC8vIGRvIGFwcCBzcGVjaWZpYyBjbGVhbmluZyBiZWZvcmUgZXhpdGluZwogIHByb2Nlc3Mub24oJ2V4aXQnLCBmdW5jdGlvbigpIHsKICAgIHByb2Nlc3MuZW1pdCgnY2xlYW51cCcpOwogIH0pOwoKICAvLyBjYXRjaCBjdHJsK2MgZXZlbnQgYW5kIGV4aXQgbm9ybWFsbHkKICBwcm9jZXNzLm9uKCdTSUdJTlQnLCBmdW5jdGlvbigpIHsKICAgIGNvbnNvbGUubG9nKCdDdHJsLUMuLi4nKTsKICAgIHByb2Nlc3MuZXhpdCgyKTsKICB9KTsKCiAgLy9jYXRjaCB1bmNhdWdodCBleGNlcHRpb25zLCB0cmFjZSwgdGhlbiBleGl0IG5vcm1hbGx5CiAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCBmdW5jdGlvbihlKSB7CiAgICBjb25zb2xlLmxvZygnVW5jYXVnaHQgRXhjZXB0aW9uLi4uJyk7CiAgICBjb25zb2xlLmxvZyhlLnN0YWNrKTsKICAgIHByb2Nlc3MuZXhpdCg5OSk7CiAgfSk7Cn0pOwoKZXhwb3J0IGZ1bmN0aW9uIGF0ZXhpdChmbikgewogIGF0ZXhpdF9mdW5jdGlvbnMucHVzaChmbik7CgogIGlmKGdsb2JhbFRoaXMucHJvY2VzcyAmJiAnb24nIGluIHByb2Nlc3MpIHsKICAgIGF0ZXhpdF9pbnN0YWxsKCgpID0+IHsKICAgICAgZm9yKGxldCBmbiBvZiBhdGV4aXRfZnVuY3Rpb25zKSBmbigpOwogICAgfSk7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24gd2FpdEZvcihtcykgewogIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRlZmluZShvYmosIC4uLmFyZ3MpIHsKICBmb3IobGV0IHByb3BzIG9mIGFyZ3MpIHsKICAgIGxldCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMocHJvcHMpOwogICAgZm9yKGxldCBwcm9wIGluIGRlc2MpIHsKICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gZGVzY1twcm9wXTsKICAgICAgZGVzY1twcm9wXS5lbnVtZXJhYmxlID0gZmFsc2U7CiAgICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSBkZXNjW3Byb3BdLndyaXRhYmxlID0gZmFsc2U7CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIGRlc2MpOwogIH0KICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gZGVmaW5lR2V0dGVyKG9iaiwga2V5LCBmbiwgZW51bWVyYWJsZSA9IGZhbHNlKSB7CiAgaWYoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIGVudW1lcmFibGUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmbgogICAgfSk7CiAgcmV0dXJuIG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUdldHRlclNldHRlcihvYmosIGtleSwgZywgcywgZW51bWVyYWJsZSA9IGZhbHNlKSB7CiAgaWYoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIGdldDogZywKICAgICAgc2V0OiBzLAogICAgICBlbnVtZXJhYmxlCiAgICB9KTsKICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gZGVmaW5lR2V0dGVyc1NldHRlcnMob2JqLCBnZXR0ZXJzU2V0dGVycykgewogIGZvcihsZXQgbmFtZSBpbiBnZXR0ZXJzU2V0dGVycykgZGVmaW5lR2V0dGVyU2V0dGVyKG9iaiwgbmFtZSwgZ2V0dGVyc1NldHRlcnNbbmFtZV0sIGdldHRlcnNTZXR0ZXJzW25hbWVdKTsKICByZXR1cm4gb2JqOwp9CgovKmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVHZXR0ZXJzU2V0dGVycyhvYmosIGdldHRlcnNTZXR0ZXJzLCBlbnVtZXJhYmxlID0gZmFsc2UpIHsKICBsZXQgcHJvcHMgPSB7fTsKICB0cnkgewogICAgZm9yKGxldCBuYW1lIGluIGdldHRlcnNTZXR0ZXJzKSBwcm9wc1tuYW1lXSA9IHsgZ2V0OiBnZXR0ZXJzU2V0dGVyc1tuYW1lXSwgc2V0OiBnZXR0ZXJzU2V0dGVyc1tuYW1lXSwgZW51bWVyYWJsZSB9OwogICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwgcHJvcHMpOwogIH0gY2F0Y2goZSkgewogICAgZm9yKGxldCBuYW1lIGluIGdldHRlcnNTZXR0ZXJzKQogICAgICB0cnkgewogICAgICAgIGRlZmluZUdldHRlclNldHRlcihvYmosIG5hbWUsIGdldHRlcnNTZXR0ZXJzW25hbWVdLCBnZXR0ZXJzU2V0dGVyc1tuYW1lXSk7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIGNvbnNvbGUubG9nKGBGYWlsZWQgc2V0dGluZyBwcm9wZXJ0eSAnJHtuYW1lfSdgKTsKICAgICAgfQogICAgcmV0dXJuIG9iajsKICB9Cn0qLwoKZXhwb3J0IGZ1bmN0aW9uKiBwcm90b3R5cGVJdGVyYXRvcihvYmosIHByZWQgPSAob2JqLCBkZXB0aCkgPT4gdHJ1ZSkgewogIGxldCBkZXB0aCA9IDA7CgogIHdoaWxlKG9iaikgewogICAgaWYocHJlZChvYmosIGRlcHRoKSkgeWllbGQgb2JqOwogICAgbGV0IHRtcCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopOwogICAgaWYodG1wID09PSBvYmopIGJyZWFrOwogICAgb2JqID0gdG1wOwogICAgKytkZXB0aDsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBrZXlzKG9iaiwgc3RhcnQgPSAwLCBlbmQgPSBvYmogPT4gb2JqID09PSBPYmplY3QucHJvdG90eXBlKSB7CiAgbGV0IHByZWQsCiAgICBhID0gW10sCiAgICBkZXB0aCA9IDA7CgogIGlmKCFpc0Z1bmN0aW9uKGVuZCkpIHsKICAgIGxldCBuID0gZW5kOwogICAgcHJlZCA9IChvYmosIGRlcHRoKSA9PiBkZXB0aCA+PSBzdGFydCAmJiBkZXB0aCA8IG47CiAgICBlbmQgPSAoKSA9PiBmYWxzZTsKICB9IGVsc2UgewogICAgcHJlZCA9IChvYmosIGRlcHRoKSA9PiBkZXB0aCA+PSBzdGFydDsKICB9CgogIGZvcihsZXQgcHJvdG8gb2YgcHJvdG90eXBlSXRlcmF0b3Iob2JqLCBwcmVkKSkgewogICAgaWYoZW5kKHByb3RvLCBkZXB0aCsrKSkgYnJlYWs7CiAgICBhLnB1c2goLi4uT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhwcm90bykuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKSkpOwogIH0KCiAgcmV0dXJuIFsuLi5uZXcgU2V0KGEpXTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGVudHJpZXMob2JqLCBzdGFydCA9IDAsIGVuZCA9IG9iaiA9PiBvYmogPT09IE9iamVjdC5wcm90b3R5cGUpIHsKICBsZXQgYSA9IFtdOwogIGZvcihsZXQga2V5IG9mIGtleXMob2JqLCBzdGFydCwgZW5kKSkgYS5wdXNoKFtrZXksIG9ialtrZXldXSk7CiAgcmV0dXJuIGE7Cn0KCmV4cG9ydCBmdW5jdGlvbiB2YWx1ZXMob2JqLCBzdGFydCA9IDAsIGVuZCA9IG9iaiA9PiBvYmogPT09IE9iamVjdC5wcm90b3R5cGUpIHsKICBsZXQgYSA9IFtdOwogIGZvcihsZXQga2V5IG9mIGtleXMob2JqLCBzdGFydCwgZW5kKSkgYS5wdXNoKG9ialtrZXldKTsKICByZXR1cm4gYTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGhvZE5hbWVzKG9iaiwgZGVwdGggPSAxLCBzdGFydCA9IDApIHsKICBsZXQgbmFtZXMgPSBbXTsKICBmb3IobGV0IG4gb2Yga2V5cyhvYmosIHN0YXJ0LCBzdGFydCArIGRlcHRoKSkgewogICAgdHJ5IHsKICAgICAgaWYoaXNGdW5jdGlvbihvYmpbbl0pKSBuYW1lcy5wdXNoKG4pOwogICAgfSBjYXRjaChlKSB7fQogIH0KICByZXR1cm4gbmFtZXM7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRNZXRob2RzKG9iaiwgZGVwdGggPSAxLCBzdGFydCA9IDApIHsKICBsZXQgbWV0aG9kcyA9IHt9OwoKICBmb3IobGV0IG4gb2YgZ2V0TWV0aG9kTmFtZXMob2JqLCBkZXB0aCwgc3RhcnQpKSBtZXRob2RzW25dID0gb2JqW25dOwoKICByZXR1cm4gbWV0aG9kczsKfQoKZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnRpZXMob2JqLCBvcHRpb25zID0geyBlbnVtZXJhYmxlOiB0cnVlIH0pIHsKICBsZXQgZGVzYyA9IHt9OwogIGNvbnN0IHsgbWVtb2l6ZTogbWVtbyA9IGZhbHNlLCAuLi5vcHRzIH0gPSBvcHRpb25zOwogIGNvbnN0IG1mbiA9IG1lbW8gPyBmbiA9PiBtZW1vaXplKGZuKSA6IGZuID0+IGZuOwogIGZvcihsZXQgcHJvcCBvZiBrZXlzKG9iaikpIHsKICAgIGlmKEFycmF5LmlzQXJyYXkob2JqW3Byb3BdKSkgewogICAgICBjb25zdCBbZ2V0LCBzZXRdID0gb2JqW3Byb3BdOwogICAgICBkZXNjW3Byb3BdID0geyAuLi5vcHRzLCBnZXQsIHNldCB9OwogICAgfSBlbHNlIGlmKGlzRnVuY3Rpb24ob2JqW3Byb3BdKSkgewogICAgICBkZXNjW3Byb3BdID0geyAuLi5vcHRzLCBnZXQ6IG1mbihvYmpbcHJvcF0pIH07CiAgICB9CiAgfQogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwgZGVzYyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB3ZWFrQXNzaWduKG9iaiwgLi4uYXJncykgewogIGxldCBkZXNjID0ge307CiAgZm9yKGxldCBvdGhlciBvZiBhcmdzKSB7CiAgICBsZXQgb3RoZXJEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob3RoZXIpOwogICAgZm9yKGxldCBrZXkgaW4gb3RoZXJEZXNjKSBpZighKGtleSBpbiBvYmopICYmIGRlc2Nba2V5XSA9PT0gdW5kZWZpbmVkICYmIG90aGVyRGVzY1trZXldICE9PSB1bmRlZmluZWQpIGRlc2Nba2V5XSA9IG90aGVyRGVzY1trZXldOwogIH0KICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCBkZXNjKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldFByb3RvdHlwZUNoYWluKG9iaiwgbGltaXQgPSAtMSwgc3RhcnQgPSAwKSB7CiAgbGV0IGkgPSAtMSwKICAgIHJldCA9IFtdOwogIGRvIHsKICAgIGlmKGkgPj0gc3RhcnQgJiYgKGxpbWl0ID09IC0xIHx8IGkgPCBzdGFydCArIGxpbWl0KSkgcmV0LnB1c2gob2JqKTsKICAgIGlmKG9iaiA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBvYmouY29uc3RydWN0b3IgPT09IE9iamVjdCkgYnJlYWs7CiAgICArK2k7CiAgfSB3aGlsZSgob2JqID0gb2JqLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSkpOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRDb25zdHJ1Y3RvckNoYWluKG9iaiwgLi4ucmFuZ2UpIHsKICBsZXQgcmV0ID0gW107CiAgcHVzaFVuaXF1ZShyZXQsIG9iai5jb25zdHJ1Y3Rvcik7CiAgZm9yKGxldCBwcm90byBvZiBnZXRQcm90b3R5cGVDaGFpbihvYmosIC4uLnJhbmdlKSkgcHVzaFVuaXF1ZShyZXQsIHByb3RvLmNvbnN0cnVjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gaGFzUHJvdG90eXBlKG9iaiwgcHJvdG8pIHsKICByZXR1cm4gZ2V0UHJvdG90eXBlQ2hhaW4ob2JqKS5pbmRleE9mKHByb3RvKSAhPSAtMTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcihzZXEsIHByZWQsIHRoaXNBcmcpIHsKICBpZihpc09iamVjdChwcmVkKSAmJiBwcmVkIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICBsZXQgcmUgPSBwcmVkOwogICAgcHJlZCA9IChlbCwgaSkgPT4gcmUudGVzdChlbCk7CiAgfQogIGlmKHR5cGVzLmlzSXRlcmFibGUoc2VxKSkgewogICAgbGV0IHIgPSBbXSwKICAgICAgaSA9IDA7CiAgICBmb3IobGV0IGVsIG9mIHNlcSkgaWYocHJlZC5jYWxsKHRoaXNBcmcsIGVsLCBpKyssIHNlcSkpIHIucHVzaChlbCk7CiAgICByZXR1cm4gcjsKICB9IGVsc2UgaWYoaXNPYmplY3Qoc2VxKSkgewogICAgbGV0IHIgPSB7fTsKICAgIGZvcihsZXQga2V5IGluIHNlcSkgaWYocHJlZC5jYWxsKHRoaXNBcmcsIHNlcVtrZXldLCBrZXksIHNlcSkpIHJba2V5XSA9IHNlcVtrZXldOwogICAgcmV0dXJuIHI7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24gZmlsdGVyS2V5cyhyLCBuZWVkbGVzLCBrZWVwID0gdHJ1ZSkgewogIGxldCBwcmVkOwogIGlmKGlzRnVuY3Rpb24obmVlZGxlcykpIHsKICAgIHByZWQgPSBuZWVkbGVzOwogIH0gZWxzZSB7CiAgICBpZighQXJyYXkuaXNBcnJheShuZWVkbGVzKSkgbmVlZGxlcyA9IFsuLi5uZWVkbGVzXTsKICAgIHByZWQgPSBrZXkgPT4gKG5lZWRsZXMuaW5kZXhPZihrZXkpICE9IC0xKSA9PT0ga2VlcDsKICB9CiAgcmV0dXJuIE9iamVjdC5rZXlzKHIpCiAgICAuZmlsdGVyKHByZWQpCiAgICAucmVkdWNlKChvYmosIGtleSkgPT4gewogICAgICBvYmpba2V5XSA9IHJba2V5XTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0sIHt9KTsKfQoKZXhwb3J0IGNvbnN0IGN1cnJ5ID0KICAoZiwgYXJyID0gW10sIGxlbmd0aCA9IGYubGVuZ3RoKSA9PgogICguLi5hcmdzKSA9PgogICAgKGEgPT4gKGEubGVuZ3RoID09PSBsZW5ndGggPyBmKC4uLmEpIDogY3VycnkoZiwgYSkpKShbLi4uYXJyLCAuLi5hcmdzXSk7CgpleHBvcnQgY29uc3QgY2xhbXAgPSBjdXJyeSgobWluLCBtYXgsIHZhbHVlKSA9PiBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgdmFsdWUpKSk7CgpleHBvcnQgZnVuY3Rpb24qIHNwbGl0KGJ1ZiwgLi4ucG9pbnRzKSB7CiAgcG9pbnRzLnNvcnQoKTsKICBjb25zdCBzcGxpdEF0ID0gKGIsIHBvcywgbGVuKSA9PiB7CiAgICBsZXQgciA9IHBvcyA8IGIuYnl0ZUxlbmd0aCA/IFtzbGljZShiLCAwLCBwb3MpLCBzbGljZShiLCBwb3MpXSA6IFtudWxsLCBiXTsKICAgIHJldHVybiByOwogIH07CiAgbGV0IHByZXYsCiAgICBsZW4gPSAwOwogIGZvcihsZXQgb2Zmc2V0IG9mIHBvaW50cykgewogICAgbGV0IGF0ID0gb2Zmc2V0IC0gbGVuOwogICAgW3ByZXYsIGJ1Zl0gPSBzcGxpdEF0KGJ1ZiwgYXQsIGxlbik7CiAgICBpZihwcmV2KSB7CiAgICAgIHlpZWxkIHByZXY7CiAgICAgIGxlbiA9IG9mZnNldDsKICAgIH0KICB9CiAgaWYoYnVmKSB5aWVsZCBidWY7Cn0KCmV4cG9ydCBjb25zdCBtYXRjaEFsbCA9IGN1cnJ5KGZ1bmN0aW9uKiAocmUsIHN0cikgewogIGxldCBtYXRjaDsKICByZSA9IHJlIGluc3RhbmNlb2YgUmVnRXhwID8gcmUgOiBuZXcgUmVnRXhwKEFycmF5LmlzQXJyYXkocmUpID8gJygnICsgcmUuam9pbignfCcpICsgJyknIDogcmUsICdnJyk7CiAgZG8gewogICAgaWYoKG1hdGNoID0gcmUuZXhlYyhzdHIpKSkgeWllbGQgbWF0Y2g7CiAgfSB3aGlsZShtYXRjaCAhPSBudWxsKTsKfSk7CgpleHBvcnQgZnVuY3Rpb24gYmluZFByb3BlcnRpZXMob2JqLCB0YXJnZXQsIHByb3BzLCBnZW4pIHsKICBpZihwcm9wcyBpbnN0YW5jZW9mIEFycmF5KSBwcm9wcyA9IE9iamVjdC5mcm9tRW50cmllcyhwcm9wcy5tYXAobmFtZSA9PiBbbmFtZSwgbmFtZV0pKTsKICBjb25zdCBbcHJvcE1hcCwgcHJvcE5hbWVzXSA9IEFycmF5LmlzQXJyYXkocHJvcHMpID8gW3Byb3BzLnJlZHVjZSgoYWNjLCBuYW1lKSA9PiAoeyAuLi5hY2MsIFtuYW1lXTogbmFtZSB9KSwge30pLCBwcm9wc10gOiBbcHJvcHMsIE9iamVjdC5rZXlzKHByb3BzKV07CiAgZ2VuID8/PSBwID0+IHYgPT4gdiA9PT0gdW5kZWZpbmVkID8gdGFyZ2V0W3Byb3BNYXBbcF1dIDogKHRhcmdldFtwcm9wTWFwW3BdXSA9IHYpOwogIGNvbnN0IHByb3BHZXRTZXQgPSBwcm9wTmFtZXMKICAgIC5tYXAoayA9PiBbaywgcHJvcE1hcFtrXV0pCiAgICAucmVkdWNlKAogICAgICAoYSwgW2ssIHZdKSA9PiAoewogICAgICAgIC4uLmEsCiAgICAgICAgW2tdOiBpc0Z1bmN0aW9uKHYpID8gKC4uLmFyZ3MpID0+IHYuY2FsbCh0YXJnZXQsIGssIC4uLmFyZ3MpIDogKGdlbiAmJiBnZW4oaykpIHx8ICgoLi4uYXJncykgPT4gKGFyZ3MubGVuZ3RoID4gMCA/ICh0YXJnZXRba10gPSBhcmdzWzBdKSA6IHRhcmdldFtrXSkpCiAgICAgIH0pLAogICAgICB7fQogICAgKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcygKICAgIG9iaiwKICAgIHByb3BOYW1lcy5yZWR1Y2UoCiAgICAgIChhLCBrKSA9PiB7CiAgICAgICAgY29uc3QgcHJvcCA9IHByb3BzW2tdOwogICAgICAgIGNvbnN0IGdldF9zZXQgPSBwcm9wR2V0U2V0W2tdOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5hLAogICAgICAgICAgW2tdOiB7CiAgICAgICAgICAgIGdldDogZ2V0X3NldCwKICAgICAgICAgICAgc2V0OiBnZXRfc2V0LAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgewogICAgICAgIF9fZ2V0dGVyX3NldHRlcl9fOiB7IHZhbHVlOiBnZW4sIGVudW1lcmFibGU6IGZhbHNlIH0sCiAgICAgICAgX19ib3VuZF90YXJnZXRfXzogeyB2YWx1ZTogdGFyZ2V0LCBlbnVtZXJhYmxlOiBmYWxzZSB9CiAgICAgIH0KICAgICkKICApOwogIHJldHVybiBvYmo7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpbW11dGFibGVDbGFzcyhvcmlnLCAuLi5wcm90bykgewogIGxldCBuYW1lID0gZnVuY3Rpb25OYW1lKG9yaWcpLnJlcGxhY2UoL011dGFibGUvZywgJycpOwogIGxldCBpbU5hbWUgPSAnSW1tdXRhYmxlJyArIG5hbWU7CiAgcHJvdG8gPSBwcm90byB8fCBbXTsKICBsZXQgaW5pdGlhbFByb3RvID0gcHJvdG8ubWFwKHAgPT4KICAgIGlzQXJyb3cocCkKICAgICAgPyBwCiAgICAgIDogY3RvciA9PiB7CiAgICAgICAgICBmb3IobGV0IG4gaW4gcCkgY3Rvci5wcm90b3R5cGVbbl0gPSBwW25dOwogICAgICAgIH0KICApOwogIGxldCBib2R5ID0gYGNsYXNzICR7aW1OYW1lfSBleHRlbmRzICR7bmFtZX0ge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gICAgaWYobmV3LnRhcmdldCA9PT0gJHtpbU5hbWV9KVxuICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUodGhpcyk7XG4gIH1cbn07XG5cbiR7aW1OYW1lfS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSAke2ltTmFtZX07XG5cbnJldHVybiAke2ltTmFtZX07YDsKICBmb3IobGV0IHAgb2YgaW5pdGlhbFByb3RvKSBwKG9yaWcpOwogIGxldCBjdG9yOwogIGxldCBpbW0gPSBiYXNlID0+IHsKICAgIGxldCBjbHM7CiAgICBjbHMgPSBjbGFzcyBleHRlbmRzIGJhc2UgewogICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICAgICAgc3VwZXIoLi4uYXJncyk7CiAgICAgICAgaWYobmV3LnRhcmdldCA9PT0gY2xzKSByZXR1cm4gT2JqZWN0LmZyZWV6ZSh0aGlzKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiBjbHM7CiAgfTsKICBjdG9yID0gaW1tKG9yaWcpOwogIGxldCBzcGVjaWVzID0gY3RvcjsKICByZXR1cm4gY3RvcjsKfQoKLy8gdGltZSBhIGdpdmVuIGZ1bmN0aW9uCmV4cG9ydCBmdW5jdGlvbiBpbnN0cnVtZW50KAogIGZuLAogIGxvZyA9IChkdXJhdGlvbiwgbmFtZSwgYXJncywgcmV0KSA9PiBjb25zb2xlLmxvZyhgZnVuY3Rpb24gJyR7bmFtZX0nYCArIChyZXQgIT09IHVuZGVmaW5lZCA/IGAgez0gJHtlc2NhcGUocmV0ICsgJycpLnN1YnN0cmluZygwLCAxMDApICsgJy4uLid9fWAgOiAnJykgKyBgIHRpbWluZzogJHtkdXJhdGlvbi50b0ZpeGVkKDMpfW1zYCksCiAgbG9nSW50ZXJ2YWwgPSAwIC8vMTAwMAopIHsKICAvLyBjb25zdCB7IG5vdywgaHJ0aW1lLCBmdW5jdGlvbk5hbWUgfSA9IFV0aWw7CiAgbGV0IGxhc3QgPSBEYXRlLm5vdygpOwogIGxldCBkdXJhdGlvbiA9IDAsCiAgICB0aW1lcyA9IDA7CiAgY29uc3QgbmFtZSA9IGZ1bmN0aW9uTmFtZShmbikgfHwgJzxhbm9ueW1vdXM+JzsKICBjb25zdCBhc3luY2hyb25vdXMgPSBpc0FzeW5jKGZuKSB8fCBpc0FzeW5jKG5vdyk7CiAgY29uc3QgZG9Mb2cgPSBhc3luY2hyb25vdXMKICAgID8gYXN5bmMgKGFyZ3MsIHJldCkgPT4gewogICAgICAgIGxldCB0ID0gRGF0ZS5ub3coKTsKICAgICAgICBpZih0IC0gKGF3YWl0IGxhc3QpID49IGxvZ0ludGVydmFsKSB7CiAgICAgICAgICBsb2coZHVyYXRpb24gLyB0aW1lcywgbmFtZSwgYXJncywgcmV0KTsKICAgICAgICAgIGR1cmF0aW9uID0gdGltZXMgPSAwOwogICAgICAgICAgbGFzdCA9IHQ7CiAgICAgICAgfQogICAgICB9CiAgICA6IChhcmdzLCByZXQpID0+IHsKICAgICAgICBsZXQgdCA9IERhdGUubm93KCk7CiAgICAgICAgLy9jb25zb2xlLmxvZygnZG9Mb2cnLCB7IHBhc3NlZDogdCAtIGxhc3QsIGxvZ0ludGVydmFsIH0pOwogICAgICAgIGlmKHQgLSBsYXN0ID49IGxvZ0ludGVydmFsKSB7CiAgICAgICAgICBsb2coZHVyYXRpb24gLyB0aW1lcywgbmFtZSwgYXJncywgcmV0KTsKICAgICAgICAgIGR1cmF0aW9uID0gdGltZXMgPSAwOwogICAgICAgICAgbGFzdCA9IHQ7CiAgICAgICAgfQogICAgICB9OwoKICByZXR1cm4gYXN5bmNocm9ub3VzCiAgICA/IGFzeW5jIGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7CiAgICAgICAgbGV0IHJldCA9IGF3YWl0IGZuLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICAgIGR1cmF0aW9uICs9IERhdGUubm93KCkgLSBzdGFydDsKICAgICAgICB0aW1lcysrOwogICAgICAgIGF3YWl0IGRvTG9nKGFyZ3MsIHJldCk7CiAgICAgICAgcmV0dXJuIHJldDsKICAgICAgfQogICAgOiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpOwogICAgICAgIGxldCByZXQgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICBkdXJhdGlvbiArPSBEYXRlLm5vdygpIC0gc3RhcnQ7CiAgICAgICAgdGltZXMrKzsKICAgICAgICBkb0xvZyhhcmdzLCByZXQpOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH07Cn0KCmV4cG9ydCBjb25zdCBoYXNoID0gKG5ld01hcCA9ICgpID0+IG5ldyBNYXAoKSkgPT4gewogIGxldCBtYXAgPSBuZXdNYXAoKTsKICBsZXQgY2FjaGUgPSBtZW1vaXplKCguLi5hcmdzKSA9PiBnZXR0ZXJzZXR0ZXIobmV3TWFwKC4uLmFyZ3MpKSwgbmV3IE1hcCgpKTsKCiAgLy8gbGV0IFtnZXQsIHNldF0gPSBnZXRzZXQoY2FjaGUpOwoKICByZXR1cm4gewogICAgZ2V0KHBhdGgpIHsKICAgICAgbGV0IGkgPSAwLAogICAgICAgIG9iaiA9IG1hcDsKICAgICAgZm9yKGxldCBwYXJ0IG9mIHBhdGgpIHsKICAgICAgICBsZXQgY2FjaGVmbiA9IGNhY2hlKG9iaikgPz8gZ2V0dGVyKG9iaik7CiAgICAgICAgY29uc29sZS5sb2coJ2NhY2hlJywgeyBpLCBjYWNoZSB9KTsKICAgICAgICBvYmogPSBjYWNoZWZuKHBhcnQpOwogICAgICAgIGNvbnNvbGUubG9nKCdjYWNoZWZuJywgeyBpLCBjYWNoZWZuIH0pOwogICAgICB9CiAgICAgIHJldHVybiBvYmo7CiAgICB9LAogICAgc2V0KHBhdGgsIHZhbHVlKSB7CiAgICAgIGxldCBpID0gMCwKICAgICAgICBvYmogPSBtYXA7CiAgICAgIGxldCBrZXkgPSBwYXRoLnBvcCgpOwoKICAgICAgZm9yKGxldCBwYXJ0IG9mIHBhdGgpIHsKICAgICAgICBjb25zb2xlLmxvZygnY2FjaGUnLCB7IHBhcnQsIG9iaiB9KTsKICAgICAgICBsZXQgY2FjaGVmbiA9IGNhY2hlKG9iai5yZWNlaXZlciA/PyBvYmopOwogICAgICAgIGNvbnNvbGUubG9nKCdjYWNoZWZuJywgeyBpLCBjYWNoZWZuIH0pOwogICAgICAgIG9iaiA9IGNhY2hlZm4ocGFydCkgPz8gKGNhY2hlZm4ocGFydCwgZ2V0dGVyc2V0dGVyKG5ld01hcCgpKSksIGNhY2hlZm4ocGFydCkpOwogICAgICAgIGNvbnNvbGUubG9nKCdjYWNoZWZuJywgeyBvYmogfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG9iaihrZXksIHZhbHVlKTsKICAgIH0KICB9Owp9OwoKZXhwb3J0IGNvbnN0IGNhdGNoYWJsZSA9IGZ1bmN0aW9uIENhdGNoYWJsZShzZWxmKSB7CiAgYXNzZXJ0KGlzRnVuY3Rpb24oc2VsZikpOwoKICBpZighKHNlbGYgaW5zdGFuY2VvZiBjYXRjaGFibGUpKSBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc2VsZiwgY2F0Y2hhYmxlLnByb3RvdHlwZSk7CiAgaWYoJ2NvbnN0cnVjdG9yJyBpbiBzZWxmKSBzZWxmLmNvbnN0cnVjdG9yID0gY2F0Y2hhYmxlOwoKICByZXR1cm4gc2VsZjsKfTsKCk9iamVjdC5hc3NpZ24oY2F0Y2hhYmxlLCB7CiAgW1N5bWJvbC5zcGVjaWVzXTogY2F0Y2hhYmxlLAogIHByb3RvdHlwZTogT2JqZWN0LmFzc2lnbihmdW5jdGlvbiAoKSB7fSwgewogICAgdGhlbihmbikgewogICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcltTeW1ib2wuc3BlY2llc10oKC4uLmFyZ3MpID0+IHsKICAgICAgICBsZXQgcmVzdWx0OwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXN1bHQgPSB0aGlzKC4uLmFyZ3MpOwogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZuKHJlc3VsdCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNhdGNoKGZuKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yW1N5bWJvbC5zcGVjaWVzXSgoLi4uYXJncykgPT4gewogICAgICAgIGxldCByZXN1bHQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJlc3VsdCA9IHRoaXMoLi4uYXJncyk7CiAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICByZXR1cm4gZm4oZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0pOwogICAgfQogIH0pCn0pOwoKZXhwb3J0IGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWx1ZSkgewogIGZvcihsZXQgZiBvZiBbdiA9PiArdiwgcGFyc2VJbnQsIHBhcnNlRmxvYXRdKSBpZighaXNOYU4oZih2YWx1ZSkpKSByZXR1cm4gdHJ1ZTsKICByZXR1cm4gZmFsc2U7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0luZGV4KHZhbHVlKSB7CiAgcmV0dXJuICFpc05hTigrdmFsdWUpICYmIE1hdGguZmxvb3IoK3ZhbHVlKSArICcnID09IHZhbHVlICsgJyc7Cn0KCmV4cG9ydCBmdW5jdGlvbiBudW1lcmljSW5kZXgodmFsdWUpIHsKICByZXR1cm4gaXNJbmRleCh2YWx1ZSkgPyArdmFsdWUgOiB2YWx1ZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhpc3RvZ3JhbShhcnIsIG91dCA9IG5ldyBNYXAoKSkgewogIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KG91dCk7CgogIGNvbnN0IGluY3IgPSBrZXkgPT4gc2V0KGtleSwgKGdldChrZXkpID8/IDApICsgMSk7CiAgZm9yKGxldCBpdGVtIG9mIGFycikgewogICAgaW5jcihpdGVtKTsKICB9CiAgcmV0dXJuIG91dDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5TG9va3VwSGFuZGxlcnMoaGFuZGxlciA9IGtleSA9PiBudWxsKSB7CiAgbGV0IGhhbmRsZXJzID0gewogICAgZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikgewogICAgICByZXR1cm4gaGFuZGxlcihrZXkpOwogICAgfQogIH07CiAgbGV0IHRtcCA9IGhhbmRsZXIoKTsKCiAgaWYoIWlzU3RyaW5nKHRtcCkpCiAgICB0cnkgewogICAgICBsZXQgYSA9IEFycmF5LmlzQXJyYXkodG1wKSA/IHRtcCA6IFsuLi50bXBdOwogICAgICBpZihhKQogICAgICAgIGhhbmRsZXJzLm93bktleXMgPSBmdW5jdGlvbih0YXJnZXQpIHsKICAgICAgICAgIHJldHVybiBoYW5kbGVyKCk7CiAgICAgICAgfTsKICAgIH0gY2F0Y2goZSkge30KCiAgcmV0dXJuIGhhbmRsZXJzOwp9CgpleHBvcnQgZnVuY3Rpb24gcHJvcGVydHlMb29rdXAoLi4uYXJncykgewogIGxldCBbb2JqID0ge30sIGhhbmRsZXIgPSBrZXkgPT4gbnVsbF0gPSBhcmdzLmxlbmd0aCA9PSAxID8gW3t9LCAuLi5hcmdzXSA6IGFyZ3M7CgogIHJldHVybiBuZXcgUHJveHkoCiAgICBvYmosCiAgICBwcm9wZXJ0eUxvb2t1cEhhbmRsZXJzKGZ1bmN0aW9uICguLi5hcmdzKSB7CiAgICAgIGlmKGFyZ3MubGVuZ3RoID49IDEgJiYgYXJnc1swXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGV0IFtrZXldID0gYXJnczsKICAgICAgICBpZihrZXkgaW4gb2JqKSByZXR1cm4gb2JqW2tleV07CgogICAgICAgIHJldHVybiBoYW5kbGVyKGtleSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGhhbmRsZXIoKTsKICAgIH0pCiAgKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFiYnJldmlhdGUoc3RyLCBtYXggPSA0MCwgc3VmZml4ID0gJy4uLicpIHsKICBtYXggPSArbWF4OwogIGlmKGlzTmFOKG1heCkpIG1heCA9IEluZmluaXR5OwogIGlmKEFycmF5LmlzQXJyYXkoc3RyKSkgewogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHN0ciwgMCwgTWF0aC5taW4oc3RyLmxlbmd0aCwgbWF4KSkuY29uY2F0KFtzdWZmaXhdKTsKICB9CiAgaWYoIWlzU3RyaW5nKHN0cikgfHwgIU51bWJlci5pc0Zpbml0ZShtYXgpIHx8IG1heCA8IDApIHJldHVybiBzdHI7CiAgc3RyID0gJycgKyBzdHI7CiAgaWYoc3RyLmxlbmd0aCA+IG1heCkgewogICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgbWF4IC0gc3VmZml4Lmxlbmd0aCkgKyBzdWZmaXg7CiAgfQogIHJldHVybiBzdHI7Cn0KCmV4cG9ydCBmdW5jdGlvbiB0cnlGdW5jdGlvbihmbiwgcmVzb2x2ZSA9IGEgPT4gYSwgcmVqZWN0ID0gKCkgPT4gbnVsbCkgewogIGlmKCFpc0Z1bmN0aW9uKHJlc29sdmUpKSB7CiAgICBsZXQgcnZhbCA9IHJlc29sdmU7CiAgICByZXNvbHZlID0gKCkgPT4gcnZhbDsKICB9CiAgaWYoIWlzRnVuY3Rpb24ocmVqZWN0KSkgewogICAgbGV0IGN2YWwgPSByZWplY3Q7CiAgICByZWplY3QgPSAoKSA9PiBjdmFsOwogIH0KICByZXR1cm4gaXNBc3luYyhmbikKICAgID8gYXN5bmMgZnVuY3Rpb24oLi4uYXJncykgewogICAgICAgIGxldCByZXQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldCA9IGF3YWl0IGZuKC4uLmFyZ3MpOwogICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVyciwgLi4uYXJncyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXNvbHZlKHJldCwgLi4uYXJncyk7CiAgICAgIH0KICAgIDogZnVuY3Rpb24oLi4uYXJncykgewogICAgICAgIGxldCByZXQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldCA9IGZuKC4uLmFyZ3MpOwogICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVyciwgLi4uYXJncyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXNvbHZlKHJldCwgLi4uYXJncyk7CiAgICAgIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiB0cnlDYXRjaChmbiwgcmVzb2x2ZSA9IGEgPT4gYSwgcmVqZWN0ID0gKCkgPT4gbnVsbCwgLi4uYXJncykgewogIGlmKGlzQXN5bmMoZm4pKQogICAgcmV0dXJuIGZuKC4uLmFyZ3MpCiAgICAgIC50aGVuKHJlc29sdmUpCiAgICAgIC5jYXRjaChyZWplY3QpOwoKICByZXR1cm4gdHJ5RnVuY3Rpb24oZm4sIHJlc29sdmUsIHJlamVjdCkoLi4uYXJncyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtYXBBZGFwdGVyKGZuKSB7CiAgbGV0IHIgPSB7CiAgICBnZXQoa2V5KSB7CiAgICAgIHJldHVybiBmbihrZXkpOwogICAgfSwKICAgIHNldChrZXksIHZhbHVlKSB7CiAgICAgIGZuKGtleSwgdmFsdWUpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9OwogIGxldCB0bXAgPSBmbigpOwogIGlmKHR5cGVzLmlzSXRlcmFibGUodG1wKSB8fCB0eXBlcy5pc1Byb21pc2UodG1wKSkgci5rZXlzID0gKCkgPT4gZm4oKTsKCiAgaWYoZm5bU3ltYm9sLml0ZXJhdG9yXSkgci5lbnRyaWVzID0gZm5bU3ltYm9sLml0ZXJhdG9yXTsKICBlbHNlIHsKICAgIGxldCBnID0gZm4oKTsKICAgIGlmKHR5cGVzLmlzSXRlcmFibGUoZykgfHwgdHlwZXMuaXNHZW5lcmF0b3JGdW5jdGlvbihnKSkgci5lbnRyaWVzID0gKCkgPT4gZm4oKTsKICB9CgogIHJldHVybiBtYXBGdW5jdGlvbihyKTsKfQoKLyoqCiAqIEBwYXJhbSBBcnJheSAgIGZvcndhcmQKICogQHBhcmFtIEFycmF5ICAgYmFja3dhcmQKICoKICogY29tcG9uZW50MnBhdGgsICBwYXRoMmVhZ2xlICA9PiBjb21wb25lbnQyZWFnbGUKICogIGVhZ2xlMnBhdGgsIHBhdGgyY29tcG9uZW50ID0+CiAqLwpleHBvcnQgZnVuY3Rpb24gbWFwRnVuY3Rpb24obWFwKSB7CiAgbGV0IGZuOwogIGZuID0gZnVuY3Rpb24oLi4uYXJncykgewogICAgY29uc3QgW2tleSwgdmFsdWVdID0gYXJnczsKICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHsKICAgICAgY2FzZSAwOgogICAgICAgIHJldHVybiBmbi5rZXlzKCk7CiAgICAgIGNhc2UgMToKICAgICAgICByZXR1cm4gZm4uZ2V0KGtleSk7CiAgICAgIGNhc2UgMjoKICAgICAgICByZXR1cm4gZm4uc2V0KGtleSwgdmFsdWUpOwogICAgfQogIH07CgogIGZuLm1hcCA9IChtID0+IHsKICAgIHdoaWxlKGlzRnVuY3Rpb24obSkgJiYgbS5tYXAgIT09IHVuZGVmaW5lZCkgbSA9IG0ubWFwOwogICAgcmV0dXJuIG07CiAgfSkobWFwKTsKCiAgaWYobWFwIGluc3RhbmNlb2YgTWFwIHx8IChpc09iamVjdChtYXApICYmIGlzRnVuY3Rpb24obWFwLmdldCkgJiYgaXNGdW5jdGlvbihtYXAuc2V0KSkpIHsKICAgIGZuLnNldCA9IChrZXksIHZhbHVlKSA9PiAobWFwLnNldChrZXksIHZhbHVlKSwgKGssIHYpID0+IGZuKGssIHYpKTsKICAgIGZuLmdldCA9IGtleSA9PiBtYXAuZ2V0KGtleSk7CiAgfSBlbHNlIGlmKG1hcCBpbnN0YW5jZW9mIENhY2hlIHx8IChpc09iamVjdChtYXApICYmIGlzRnVuY3Rpb24obWFwLm1hdGNoKSAmJiBpc0Z1bmN0aW9uKG1hcC5wdXQpKSkgewogICAgZm4uc2V0ID0gKGtleSwgdmFsdWUpID0+IChtYXAucHV0KGtleSwgdmFsdWUpLCAoaywgdikgPT4gZm4oaywgdikpOwogICAgZm4uZ2V0ID0ga2V5ID0+IG1hcC5tYXRjaChrZXkpOwogIH0gZWxzZSBpZihpc09iamVjdChtYXApICYmIGlzRnVuY3Rpb24obWFwLmdldEl0ZW0pICYmIGlzRnVuY3Rpb24obWFwLnNldEl0ZW0pKSB7CiAgICBmbi5zZXQgPSAoa2V5LCB2YWx1ZSkgPT4gKG1hcC5zZXRJdGVtKGtleSwgdmFsdWUpLCAoaywgdikgPT4gZm4oaywgdikpOwogICAgZm4uZ2V0ID0ga2V5ID0+IG1hcC5nZXRJdGVtKGtleSk7CiAgfSBlbHNlIHsKICAgIGZuLnNldCA9IChrZXksIHZhbHVlKSA9PiAoKG1hcFtrZXldID0gdmFsdWUpLCAoaywgdikgPT4gZm4oaywgdikpOwogICAgZm4uZ2V0ID0ga2V5ID0+IG1hcFtrZXldOwogIH0KCiAgZm4udXBkYXRlID0gZnVuY3Rpb24oa2V5LCBmbiA9IChrLCB2KSA9PiB2KSB7CiAgICBsZXQgb2xkVmFsdWUgPSB0aGlzLmdldChrZXkpOwogICAgbGV0IG5ld1ZhbHVlID0gZm4ob2xkVmFsdWUsIGtleSk7CiAgICBpZihvbGRWYWx1ZSAhPSBuZXdWYWx1ZSkgewogICAgICBpZihuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkICYmIGlzRnVuY3Rpb24obWFwLmRlbGV0ZSkpIG1hcC5kZWxldGUoa2V5KTsKICAgICAgZWxzZSB0aGlzLnNldChrZXksIG5ld1ZhbHVlKTsKICAgIH0KICAgIHJldHVybiBuZXdWYWx1ZTsKICB9OwoKICBpZihpc0Z1bmN0aW9uKG1hcC5lbnRyaWVzKSkgewogICAgZm4uZW50cmllcyA9IGZ1bmN0aW9uKiAoKSB7CiAgICAgIGZvcihsZXQgW2tleSwgdmFsdWVdIG9mIG1hcC5lbnRyaWVzKCkpIHlpZWxkIFtrZXksIHZhbHVlXTsKICAgIH07CiAgICBmbi52YWx1ZXMgPSBmdW5jdGlvbiogKCkgewogICAgICBmb3IobGV0IFtrZXksIHZhbHVlXSBvZiBtYXAuZW50cmllcygpKSB5aWVsZCB2YWx1ZTsKICAgIH07CiAgICBmbi5rZXlzID0gZnVuY3Rpb24qICgpIHsKICAgICAgZm9yKGxldCBba2V5LCB2YWx1ZV0gb2YgbWFwLmVudHJpZXMoKSkgeWllbGQga2V5OwogICAgfTsKICAgIGZuW1N5bWJvbC5pdGVyYXRvcl0gPSBmbi5lbnRyaWVzOwogICAgZm5baW5zcGVjdFN5bWJvbF0gPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIG5ldyBNYXAodGhpcy5tYXAoKFtrZXksIHZhbHVlXSkgPT4gW0FycmF5LmlzQXJyYXkoa2V5KSA/IGtleS5qb2luKCcuJykgOiBrZXksIHZhbHVlXSkpOwogICAgfTsKICB9IGVsc2UgaWYoaXNGdW5jdGlvbihtYXAua2V5cykpIHsKICAgIGlmKGlzQXN5bmMobWFwLmtleXMpIHx8IHR5cGVzLmlzUHJvbWlzZShtYXAua2V5cygpKSkgewogICAgICBmbi5rZXlzID0gYXN5bmMgKCkgPT4gWy4uLihhd2FpdCBtYXAua2V5cygpKV07CgogICAgICBmbi5lbnRyaWVzID0gYXN5bmMgKCkgPT4gewogICAgICAgIGxldCByID0gW107CiAgICAgICAgZm9yKGxldCBrZXkgb2YgYXdhaXQgZm4ua2V5cygpKSByLnB1c2goW2tleSwgYXdhaXQgZm4uZ2V0KGtleSldKTsKICAgICAgICByZXR1cm4gcjsKICAgICAgfTsKICAgICAgZm4udmFsdWVzID0gYXN5bmMgKCkgPT4gewogICAgICAgIGxldCByID0gW107CiAgICAgICAgZm9yKGxldCBrZXkgb2YgYXdhaXQgZm4ua2V5cygpKSByLnB1c2goYXdhaXQgZm4uZ2V0KGtleSkpOwogICAgICAgIHJldHVybiByOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgZm4ua2V5cyA9IGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgZm9yKGxldCBrZXkgb2YgbWFwLmtleXMoKSkgeWllbGQga2V5OwogICAgICB9OwoKICAgICAgZm4uZW50cmllcyA9IGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgZm9yKGxldCBrZXkgb2YgZm4ua2V5cygpKSB5aWVsZCBba2V5LCBmbihrZXkpXTsKICAgICAgfTsKICAgICAgZm4udmFsdWVzID0gZnVuY3Rpb24qICgpIHsKICAgICAgICBmb3IobGV0IGtleSBvZiBmbi5rZXlzKCkpIHlpZWxkIGZuKGtleSk7CiAgICAgIH07CiAgICB9CiAgfQoKICBpZihpc0Z1bmN0aW9uKGZuLmVudHJpZXMpKSB7CiAgICBmbi5maWx0ZXIgPSBmdW5jdGlvbihwcmVkKSB7CiAgICAgIHJldHVybiBtYXBGdW5jdGlvbigKICAgICAgICBuZXcgTWFwKAogICAgICAgICAgKGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgICAgZm9yKGxldCBba2V5LCB2YWx1ZV0gb2YgZm4uZW50cmllcygpKSBpZihwcmVkKFtrZXksIHZhbHVlXSwgaSsrKSkgeWllbGQgW2tleSwgdmFsdWVdOwogICAgICAgICAgfSkoKQogICAgICAgICkKICAgICAgKTsKICAgIH07CiAgICBmbi5tYXAgPSBmdW5jdGlvbih0KSB7CiAgICAgIHJldHVybiBtYXBGdW5jdGlvbigKICAgICAgICBuZXcgTWFwKAogICAgICAgICAgKGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgICAgIGxldCBpID0gMDsKCiAgICAgICAgICAgIGZvcihsZXQgW2tleSwgdmFsdWVdIG9mIGZuLmVudHJpZXMoKSkgeWllbGQgdChba2V5LCB2YWx1ZV0sIGkrKyk7CiAgICAgICAgICB9KSgpCiAgICAgICAgKQogICAgICApOwogICAgfTsKICAgIGZuLmZvckVhY2ggPSBmdW5jdGlvbihmbikgewogICAgICBsZXQgaSA9IDA7CgogICAgICBmb3IobGV0IFtrZXksIHZhbHVlXSBvZiB0aGlzLmVudHJpZXMoKSkgZm4oW2tleSwgdmFsdWVdLCBpKyspOwogICAgfTsKICB9CiAgaWYoaXNGdW5jdGlvbihtYXAuZGVsZXRlKSkgZm4uZGVsZXRlID0ga2V5ID0+IG1hcC5kZWxldGUoa2V5KTsKCiAgaWYoaXNGdW5jdGlvbihtYXAuaGFzKSkgZm4uaGFzID0ga2V5ID0+IG1hcC5oYXMoa2V5KTsKICByZXR1cm4gZm47Cn0KCmV4cG9ydCBmdW5jdGlvbiBtYXBXcmFwcGVyKG1hcCwgdG9LZXkgPSBrZXkgPT4ga2V5LCBmcm9tS2V5ID0ga2V5ID0+IGtleSkgewogIGxldCBmbiA9IG1hcEZ1bmN0aW9uKG1hcCk7CiAgZm4uc2V0ID0gKGtleSwgdmFsdWUpID0+IChtYXAuc2V0KHRvS2V5KGtleSksIHZhbHVlKSwgKGssIHYpID0+IGZuKGssIHYpKTsKICBmbi5nZXQgPSBrZXkgPT4gbWFwLmdldCh0b0tleShrZXkpKTsKICBpZihpc0Z1bmN0aW9uKG1hcC5rZXlzKSkgZm4ua2V5cyA9ICgpID0+IFsuLi5tYXAua2V5cygpXS5tYXAoZnJvbUtleSk7CiAgaWYoaXNGdW5jdGlvbihtYXAuZW50cmllcykpCiAgICBmbi5lbnRyaWVzID0gZnVuY3Rpb24qICgpIHsKICAgICAgZm9yKGxldCBba2V5LCB2YWx1ZV0gb2YgbWFwLmVudHJpZXMoKSkgeWllbGQgW2Zyb21LZXkoa2V5KSwgdmFsdWVdOwogICAgfTsKICBpZihpc0Z1bmN0aW9uKG1hcC52YWx1ZXMpKQogICAgZm4udmFsdWVzID0gZnVuY3Rpb24qICgpIHsKICAgICAgZm9yKGxldCB2YWx1ZSBvZiBtYXAudmFsdWVzKCkpIHlpZWxkIHZhbHVlOwogICAgfTsKICBpZihpc0Z1bmN0aW9uKG1hcC5oYXMpKSBmbi5oYXMgPSBrZXkgPT4gbWFwLmhhcyh0b0tleShrZXkpKTsKICBpZihpc0Z1bmN0aW9uKG1hcC5kZWxldGUpKSBmbi5kZWxldGUgPSBrZXkgPT4gbWFwLmRlbGV0ZSh0b0tleShrZXkpKTsKCiAgZm4ubWFwID0gKG0gPT4gewogICAgd2hpbGUoaXNGdW5jdGlvbihtKSAmJiBtLm1hcCAhPT0gdW5kZWZpbmVkKSBtID0gbS5tYXA7CiAgICByZXR1cm4gbTsKICB9KShtYXApOwoKICByZXR1cm4gZm47Cn0KCmV4cG9ydCBmdW5jdGlvbiB3ZWFrTWFwcGVyKGNyZWF0ZUZuLCBtYXAgPSBuZXcgV2Vha01hcCgpLCBoaXRGbikgewogIGxldCBzZWxmID0gZnVuY3Rpb24ob2JqLCAuLi5hcmdzKSB7CiAgICBsZXQgcmV0OwogICAgaWYobWFwLmhhcyhvYmopKSB7CiAgICAgIHJldCA9IG1hcC5nZXQob2JqKTsKICAgICAgaWYoaXNGdW5jdGlvbihoaXRGbikpIGhpdEZuKG9iaiwgcmV0KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldCA9IGNyZWF0ZUZuKG9iaiwgLi4uYXJncyk7CiAgICAgIG1hcC5zZXQob2JqLCByZXQpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9OwogIHNlbGYuc2V0ID0gKGssIHYpID0+IG1hcC5zZXQoaywgdik7CiAgc2VsZi5nZXQgPSBrID0+IG1hcC5nZXQoayk7CiAgc2VsZi5tYXAgPSBtYXA7CiAgcmV0dXJuIHNlbGY7Cn0KCmV4cG9ydCBmdW5jdGlvbiB3cmFwR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIHR5cGVzLmlzR2VuZXJhdG9yRnVuY3Rpb24oZm4pCiAgICA/IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgICAgICByZXR1cm4gWy4uLmZuLmNhbGwodGhpcywgLi4uYXJncyldOwogICAgICB9CiAgICA6IGZuOwp9CgpleHBvcnQgZnVuY3Rpb24gd3JhcEdlbmVyYXRvck1ldGhvZHMob2JqKSB7CiAgZm9yKGxldCBuYW1lIG9mIGtleXMob2JqLCAxLCAwKSkgaWYoaXNGdW5jdGlvbihvYmpbbmFtZV0pKSBvYmpbbmFtZV0gPSB3cmFwR2VuZXJhdG9yKG9ialtuYW1lXSk7CgogIHJldHVybiBvYmo7Cn0KCmV4cG9ydCBjb25zdCB1bmlxdWUgPSAoYXJyLCBjbXApID0+IGFyci5maWx0ZXIodHlwZW9mIGNtcCA9PSAnZnVuY3Rpb24nID8gKGVsLCBpLCBhcnIpID0+IGFyci5maW5kSW5kZXgoaXRlbSA9PiBjbXAoZWwsIGl0ZW0pKSA9PSBpIDogKGVsLCBpLCBhcnIpID0+IGFyci5pbmRleE9mKGVsKSA9PSBpKTsKCmV4cG9ydCBjb25zdCBnZXRGdW5jdGlvbkFyZ3VtZW50cyA9IGZuID0+CiAgKGZuICsgJycpCiAgICAucmVwbGFjZSgvXG4uKi9nLCAnJykKICAgIC5yZXBsYWNlKC8oPT58e3xcbikuKi9nLCAnJykKICAgIC5yZXBsYWNlKC9eZnVuY3Rpb25ccyovLCAnJykKICAgIC5yZXBsYWNlKC9eXCgoLiopXClccyokL2csICckMScpCiAgICAuc3BsaXQoLyxccyovZyk7Cgpjb25zdCBBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUID0gMTA7Cgpjb25zdCB3cmFwQW5zaTE2ID0KICAob2Zmc2V0ID0gMCkgPT4KICBjb2RlID0+CiAgICBgXHgxYlske2NvZGUgKyBvZmZzZXR9bWA7Cgpjb25zdCB3cmFwQW5zaTI1NiA9CiAgKG9mZnNldCA9IDApID0+CiAgY29kZSA9PgogICAgYFx4MWJbJHszOCArIG9mZnNldH07NTske2NvZGV9bWA7Cgpjb25zdCB3cmFwQW5zaTE2bSA9CiAgKG9mZnNldCA9IDApID0+CiAgKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgICBgXHgxYlskezM4ICsgb2Zmc2V0fTsyOyR7cmVkfTske2dyZWVufTske2JsdWV9bWA7CgpmdW5jdGlvbiBnZXRBbnNpU3R5bGVzKCkgewogIGNvbnN0IGNvZGVzID0gbmV3IE1hcCgpOwogIGNvbnN0IHN0eWxlcyA9IHsKICAgIG1vZGlmaWVyOiB7CiAgICAgIHJlc2V0OiBbMCwgMF0sCiAgICAgIC8vIDIxIGlzbid0IHdpZGVseSBzdXBwb3J0ZWQgYW5kIDIyIGRvZXMgdGhlIHNhbWUgdGhpbmcKICAgICAgYm9sZDogWzEsIDIyXSwKICAgICAgZGltOiBbMiwgMjJdLAogICAgICBpdGFsaWM6IFszLCAyM10sCiAgICAgIHVuZGVybGluZTogWzQsIDI0XSwKICAgICAgb3ZlcmxpbmU6IFs1MywgNTVdLAogICAgICBpbnZlcnNlOiBbNywgMjddLAogICAgICBoaWRkZW46IFs4LCAyOF0sCiAgICAgIHN0cmlrZXRocm91Z2g6IFs5LCAyOV0KICAgIH0sCiAgICBjb2xvcjogewogICAgICBibGFjazogWzMwLCAzOV0sCiAgICAgIHJlZDogWzMxLCAzOV0sCiAgICAgIGdyZWVuOiBbMzIsIDM5XSwKICAgICAgeWVsbG93OiBbMzMsIDM5XSwKICAgICAgYmx1ZTogWzM0LCAzOV0sCiAgICAgIG1hZ2VudGE6IFszNSwgMzldLAogICAgICBjeWFuOiBbMzYsIDM5XSwKICAgICAgd2hpdGU6IFszNywgMzldLAoKICAgICAgLy8gQnJpZ2h0IGNvbG9yCiAgICAgIGJsYWNrQnJpZ2h0OiBbOTAsIDM5XSwKICAgICAgcmVkQnJpZ2h0OiBbOTEsIDM5XSwKICAgICAgZ3JlZW5CcmlnaHQ6IFs5MiwgMzldLAogICAgICB5ZWxsb3dCcmlnaHQ6IFs5MywgMzldLAogICAgICBibHVlQnJpZ2h0OiBbOTQsIDM5XSwKICAgICAgbWFnZW50YUJyaWdodDogWzk1LCAzOV0sCiAgICAgIGN5YW5CcmlnaHQ6IFs5NiwgMzldLAogICAgICB3aGl0ZUJyaWdodDogWzk3LCAzOV0KICAgIH0sCiAgICBiZ0NvbG9yOiB7CiAgICAgIGJnQmxhY2s6IFs0MCwgNDldLAogICAgICBiZ1JlZDogWzQxLCA0OV0sCiAgICAgIGJnR3JlZW46IFs0MiwgNDldLAogICAgICBiZ1llbGxvdzogWzQzLCA0OV0sCiAgICAgIGJnQmx1ZTogWzQ0LCA0OV0sCiAgICAgIGJnTWFnZW50YTogWzQ1LCA0OV0sCiAgICAgIGJnQ3lhbjogWzQ2LCA0OV0sCiAgICAgIGJnV2hpdGU6IFs0NywgNDldLAoKICAgICAgLy8gQnJpZ2h0IGNvbG9yCiAgICAgIGJnQmxhY2tCcmlnaHQ6IFsxMDAsIDQ5XSwKICAgICAgYmdSZWRCcmlnaHQ6IFsxMDEsIDQ5XSwKICAgICAgYmdHcmVlbkJyaWdodDogWzEwMiwgNDldLAogICAgICBiZ1llbGxvd0JyaWdodDogWzEwMywgNDldLAogICAgICBiZ0JsdWVCcmlnaHQ6IFsxMDQsIDQ5XSwKICAgICAgYmdNYWdlbnRhQnJpZ2h0OiBbMTA1LCA0OV0sCiAgICAgIGJnQ3lhbkJyaWdodDogWzEwNiwgNDldLAogICAgICBiZ1doaXRlQnJpZ2h0OiBbMTA3LCA0OV0KICAgIH0KICB9OwoKICAvLyBBbGlhcyBicmlnaHQgYmxhY2sgYXMgZ3JheSAoYW5kIGdyZXkpCiAgc3R5bGVzLmNvbG9yLmdyYXkgPSBzdHlsZXMuY29sb3IuYmxhY2tCcmlnaHQ7CiAgc3R5bGVzLmJnQ29sb3IuYmdHcmF5ID0gc3R5bGVzLmJnQ29sb3IuYmdCbGFja0JyaWdodDsKICBzdHlsZXMuY29sb3IuZ3JleSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDsKICBzdHlsZXMuYmdDb2xvci5iZ0dyZXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0OwoKICBmb3IoY29uc3QgW2dyb3VwTmFtZSwgZ3JvdXBdIG9mIE9iamVjdC5lbnRyaWVzKHN0eWxlcykpIHsKICAgIGZvcihjb25zdCBbc3R5bGVOYW1lLCBzdHlsZV0gb2YgT2JqZWN0LmVudHJpZXMoZ3JvdXApKSB7CiAgICAgIHN0eWxlc1tzdHlsZU5hbWVdID0gewogICAgICAgIG9wZW46IGBcdTAwMUJbJHtzdHlsZVswXX1tYCwKICAgICAgICBjbG9zZTogYFx1MDAxQlske3N0eWxlWzFdfW1gCiAgICAgIH07CgogICAgICBncm91cFtzdHlsZU5hbWVdID0gc3R5bGVzW3N0eWxlTmFtZV07CgogICAgICBjb2Rlcy5zZXQoc3R5bGVbMF0sIHN0eWxlWzFdKTsKICAgIH0KCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCBncm91cE5hbWUsIHsKICAgICAgdmFsdWU6IGdyb3VwLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSk7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCAnY29kZXMnLCB7CiAgICB2YWx1ZTogY29kZXMsCiAgICBlbnVtZXJhYmxlOiBmYWxzZQogIH0pOwoKICBzdHlsZXMuY29sb3IuY2xvc2UgPSAnXHUwMDFCWzM5bSc7CiAgc3R5bGVzLmJnQ29sb3IuY2xvc2UgPSAnXHUwMDFCWzQ5bSc7CgogIHN0eWxlcy5jb2xvci5hbnNpID0gd3JhcEFuc2kxNigpOwogIHN0eWxlcy5jb2xvci5hbnNpMjU2ID0gd3JhcEFuc2kyNTYoKTsKICBzdHlsZXMuY29sb3IuYW5zaTE2bSA9IHdyYXBBbnNpMTZtKCk7CiAgc3R5bGVzLmJnQ29sb3IuYW5zaSA9IHdyYXBBbnNpMTYoQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7CiAgc3R5bGVzLmJnQ29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KEFOU0lfQkFDS0dST1VORF9PRkZTRVQpOwogIHN0eWxlcy5iZ0NvbG9yLmFuc2kxNm0gPSB3cmFwQW5zaTE2bShBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTsKCiAgLy8gRnJvbSBodHRwczovL2dpdGh1Yi5jb20vUWl4LS9jb2xvci1jb252ZXJ0L2Jsb2IvM2YwZTBkNGU5MmUyMzU3OTZjY2IxN2Y2ZTg1YzcyMDk0YTY1MWY0OS9jb252ZXJzaW9ucy5qcwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0eWxlcywgewogICAgcmdiVG9BbnNpMjU2OiB7CiAgICAgIHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4gewogICAgICAgIC8vIFdlIHVzZSB0aGUgZXh0ZW5kZWQgZ3JleXNjYWxlIHBhbGV0dGUgaGVyZSwgd2l0aCB0aGUgZXhjZXB0aW9uIG9mCiAgICAgICAgLy8gYmxhY2sgYW5kIHdoaXRlLiBub3JtYWwgcGFsZXR0ZSBvbmx5IGhhcyA0IGdyZXlzY2FsZSBzaGFkZXMuCiAgICAgICAgaWYocmVkID09PSBncmVlbiAmJiBncmVlbiA9PT0gYmx1ZSkgewogICAgICAgICAgaWYocmVkIDwgOCkgewogICAgICAgICAgICByZXR1cm4gMTY7CiAgICAgICAgICB9CgogICAgICAgICAgaWYocmVkID4gMjQ4KSB7CiAgICAgICAgICAgIHJldHVybiAyMzE7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKChyZWQgLSA4KSAvIDI0NykgKiAyNCkgKyAyMzI7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGMgPSBbcmVkLCBncmVlbiwgYmx1ZV0ubWFwKGMgPT4gKGMgLyAyNTUpICogNSk7CiAgICAgICAgcmV0dXJuIDE2ICsgMzYgKiBjWzBdICsgNiAqIGNbMV0gKyBjWzJdOwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvUmdiOiB7CiAgICAgIHZhbHVlOiBoZXggPT4gewogICAgICAgIGNvbnN0IG1hdGNoZXMgPSAvKD88Y29sb3JTdHJpbmc+W2EtZlxkXXs2fXxbYS1mXGRdezN9KS9pLmV4ZWMoaGV4LnRvU3RyaW5nKDE2KSk7CiAgICAgICAgaWYoIW1hdGNoZXMpIHsKICAgICAgICAgIHJldHVybiBbMCwgMCwgMF07CiAgICAgICAgfQoKICAgICAgICBsZXQgeyBjb2xvclN0cmluZyB9ID0gbWF0Y2hlcy5ncm91cHM7CgogICAgICAgIGlmKGNvbG9yU3RyaW5nLmxlbmd0aCA9PT0gMykgewogICAgICAgICAgY29sb3JTdHJpbmcgPSBjb2xvclN0cmluZwogICAgICAgICAgICAuc3BsaXQoJycpCiAgICAgICAgICAgIC5tYXAoY2hhcmFjdGVyID0+IGNoYXJhY3RlciArIGNoYXJhY3RlcikKICAgICAgICAgICAgLmpvaW4oJycpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgaW50ZWdlciA9IE51bWJlci5wYXJzZUludChjb2xvclN0cmluZywgMTYpOwoKICAgICAgICByZXR1cm4gWyhpbnRlZ2VyID4+IDE2KSAmIDB4ZmYsIChpbnRlZ2VyID4+IDgpICYgMHhmZiwgaW50ZWdlciAmIDB4ZmZdOwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvQW5zaTI1NjogewogICAgICB2YWx1ZTogaGV4ID0+IHN0eWxlcy5yZ2JUb0Fuc2kyNTYoLi4uc3R5bGVzLmhleFRvUmdiKGhleCkpLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGFuc2kyNTZUb0Fuc2k6IHsKICAgICAgdmFsdWU6IGNvZGUgPT4gewogICAgICAgIGlmKGNvZGUgPCA4KSB7CiAgICAgICAgICByZXR1cm4gMzAgKyBjb2RlOwogICAgICAgIH0KCiAgICAgICAgaWYoY29kZSA8IDE2KSB7CiAgICAgICAgICByZXR1cm4gOTAgKyAoY29kZSAtIDgpOwogICAgICAgIH0KCiAgICAgICAgbGV0IHJlZDsKICAgICAgICBsZXQgZ3JlZW47CiAgICAgICAgbGV0IGJsdWU7CgogICAgICAgIGlmKGNvZGUgPj0gMjMyKSB7CiAgICAgICAgICByZWQgPSAoKGNvZGUgLSAyMzIpICogMTAgKyA4KSAvIDI1NTsKICAgICAgICAgIGdyZWVuID0gcmVkOwogICAgICAgICAgYmx1ZSA9IHJlZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29kZSAtPSAxNjsKCiAgICAgICAgICBjb25zdCByZW1haW5kZXIgPSBjb2RlICUgMzY7CgogICAgICAgICAgcmVkID0gTWF0aC5mbG9vcihjb2RlIC8gMzYpICogMC4yOwogICAgICAgICAgZ3JlZW4gPSBNYXRoLmZsb29yKHJlbWFpbmRlciAvIDYpICogMC4yOwogICAgICAgICAgYmx1ZSA9IChyZW1haW5kZXIgJSA2KSAqIDAuMjsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHZhbHVlID0gTWF0aC5tYXgocmVkLCBncmVlbiwgYmx1ZSkgKiAyOwoKICAgICAgICBpZih2YWx1ZSA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIDMwOwogICAgICAgIH0KCiAgICAgICAgbGV0IHJlc3VsdCA9IDMwICsgKChNYXRoLnJvdW5kKGJsdWUpIDw8IDIpIHwgKE1hdGgucm91bmQoZ3JlZW4pIDw8IDEpIHwgTWF0aC5yb3VuZChyZWQpKTsKCiAgICAgICAgaWYodmFsdWUgPT09IDIpIHsKICAgICAgICAgIHJlc3VsdCArPSA2MDsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0sCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgcmdiVG9BbnNpOiB7CiAgICAgIHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4gc3R5bGVzLmFuc2kyNTZUb0Fuc2koc3R5bGVzLnJnYlRvQW5zaTI1NihyZWQsIGdyZWVuLCBibHVlKSksCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgaGV4VG9BbnNpOiB7CiAgICAgIHZhbHVlOiBoZXggPT4gc3R5bGVzLmFuc2kyNTZUb0Fuc2koc3R5bGVzLmhleFRvQW5zaTI1NihoZXgpKSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0KICB9KTsKCiAgcmV0dXJuIHN0eWxlczsKfQoKZXhwb3J0IGZ1bmN0aW9uIHN0cmlwQW5zaShzdHIpIHsKICByZXR1cm4gKHN0ciArICcnKS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1x4MWJbWyg/KTtdezAsMn0oOz9bMC05XSkqLicsICdnJyksICcnKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHBhZEFuc2koc3RyLCBuLCBzID0gJyAnKSB7CiAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpcEFuc2koc3RyKTsKICBsZXQgcGFkID0gJyc7CiAgZm9yKGxldCBpID0gbGVuZ3RoOyBpIDwgbjsgaSsrKSBwYWQgKz0gczsKICByZXR1cm4gcGFkOwp9CgpleHBvcnQgZnVuY3Rpb24gcGFkU3RhcnRBbnNpKHN0ciwgbiwgcyA9ICcgJykgewogIHJldHVybiBwYWRBbnNpKHN0ciwgbiwgcykgKyBzdHI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwYWRFbmRBbnNpKHN0ciwgbiwgcyA9ICcgJykgewogIHJldHVybiBzdHIgKyBwYWRBbnNpKHN0ciwgbiwgcyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kSW50KC4uLmFyZ3MpIHsKICBsZXQgcmFuZ2UgPSBhcmdzLnNwbGljZSgwLCAyKTsKICBsZXQgcm5nID0gYXJncy5zaGlmdCgpID8/IE1hdGgucmFuZG9tOwogIGlmKHJhbmdlLmxlbmd0aCA8IDIpIHJhbmdlLnVuc2hpZnQoMCk7CiAgcmV0dXJuIE1hdGgucm91bmQocmFuZChyYW5nZVsxXSAtIHJhbmdlWzBdICsgMSkgKyByYW5nZVswXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kRmxvYXQobWluLCBtYXgsIHJuZyA9IE1hdGgucmFuZG9tKSB7CiAgcmV0dXJuIHJuZygpICogKG1heCAtIG1pbikgKyBtaW47Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kU3RyKG4sIHNldCwgcm5nID0gTWF0aC5yYW5kb20pIHsKICBsZXQgbyA9ICcnOwogIHNldCA/Pz0gJ18wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7CiAgd2hpbGUoLS1uID49IDApIG8gKz0gc2V0W01hdGgucm91bmQocm5nKCkgKiAoc2V0Lmxlbmd0aCAtIDEpKV07CiAgcmV0dXJuIG87Cn0KCmV4cG9ydCBmdW5jdGlvbiB0b0JpZ0ludChhcmcpIHsKICBpZih0eXBlcy5pc0FycmF5QnVmZmVyKGFyZykpIHsKICAgIGNvbnN0IGJpdHMgPSBtaXNjLmJpdHMoYXJnKS5qb2luKCcnKTsKICAgIHJldHVybiBldmFsKGAwYiR7Yml0c31uYCk7CiAgfQogIHJldHVybiBCaWdJbnQoYXJnKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJvdW5kRGlnaXRzKHByZWNpc2lvbikgewogIGlmKHR5cGVvZiBwcmVjaXNpb24gPT0gJ251bWJlcicpIHJldHVybiAtTWF0aC5sb2cxMChwcmVjaXNpb24pOwoKICBwcmVjaXNpb24gPSBwcmVjaXNpb24gKyAnJzsKICBsZXQgaW5kZXggPSBwcmVjaXNpb24uaW5kZXhPZignLicpOwogIGxldCBmcmFjID0gaW5kZXggPT0gLTEgPyAnJyA6IHByZWNpc2lvbi5zbGljZShpbmRleCArIDEpOwogIHJldHVybiBmcmFjLmxlbmd0aDsKCiAgcmV0dXJuIC1jbGFtcCgtSW5maW5pdHksIDAsIE1hdGguZmxvb3IoTWF0aC5sb2cxMChwcmVjaXNpb24gLSBOdW1iZXIuRVBTSUxPTikpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJvdW5kVG8odmFsdWUsIHByZWMsIGRpZ2l0cywgdHlwZSA9ICdyb3VuZCcpIHsKICBpZighTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkgcmV0dXJuIHZhbHVlOwogIGNvbnN0IGZuID0gTWF0aFt0eXBlXTsKICBpZihwcmVjID09IDEpIHJldHVybiBmbih2YWx1ZSk7CiAgaWYocHJlYyA8IDEgJiYgcHJlYyA+IDAgJiYgIWlzTnVtYmVyKGRpZ2l0cykpIGRpZ2l0cyA9IC1NYXRoLmxvZzEwKHByZWMpOwogIGxldCByZXQgPSBwcmVjID49IE51bWJlci5FUFNJTE9OID8gZm4odmFsdWUgLyBwcmVjKSAqIHByZWMgOiB2YWx1ZTsKICBpZihpc051bWJlcihkaWdpdHMpICYmIGRpZ2l0cyA+PSAxICYmIGRpZ2l0cyA8PSAxMDApIHJldCA9ICtyZXQudG9GaXhlZChkaWdpdHMpOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsYXp5UHJvcGVydHkob2JqLCBuYW1lLCBnZXR0ZXIsIG9wdHMgPSB7fSkgewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7CiAgICBnZXQ6IHR5cGVzLmlzQXN5bmNGdW5jdGlvbihnZXR0ZXIpCiAgICAgID8gYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gcmVwbGFjZVByb3BlcnR5KGF3YWl0IGdldHRlci5jYWxsKHRoaXMgPz8gb2JqLCBuYW1lKSk7CiAgICAgICAgfQogICAgICA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXR0ZXIuY2FsbCh0aGlzID8/IG9iaiwgbmFtZSk7CiAgICAgICAgICBpZih0eXBlcy5pc1Byb21pc2UodmFsdWUpKSB7CiAgICAgICAgICAgIHZhbHVlLnRoZW4odiA9PiB7CiAgICAgICAgICAgICAgcmVwbGFjZVByb3BlcnR5KHYpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGB1dGlsLmxhenlQcm9wZXJ0eSByZXNvbHZlZCBgLCBvYmpbbmFtZV0pOwogICAgICAgICAgICAgIHJldHVybiB2OwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlcGxhY2VQcm9wZXJ0eSh2YWx1ZSk7CiAgICAgICAgfSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIC4uLm9wdHMKICB9KTsKCiAgZnVuY3Rpb24gcmVwbGFjZVByb3BlcnR5KHZhbHVlKSB7CiAgICBkZWxldGUgb2JqW25hbWVdOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgeyB2YWx1ZSwgLi4ub3B0cyB9KTsKICAgIHJldHVybiB2YWx1ZTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBsYXp5UHJvcGVydGllcyhvYmosIGdldHRlcnNPYmosIG9wdHMgPSB7fSkgewogIG9wdHMgPSB7IGVudW1lcmFibGU6IGZhbHNlLCAuLi5vcHRzIH07CiAgZm9yKGxldCBwcm9wIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdldHRlcnNPYmopKSBsYXp5UHJvcGVydHkob2JqLCBwcm9wLCBnZXR0ZXJzT2JqW3Byb3BdLCBvcHRzKTsKICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0T3B0KG9wdGlvbnMgPSB7fSwgYXJncykgewogIGxldCBzaG9ydCwgbG9uZzsKICBsZXQgcmVzdWx0ID0ge307CiAgbGV0IHBvc2l0aW9uYWwgPSAocmVzdWx0WydAJ10gPSBbXSk7CiAgaWYoIShvcHRpb25zIGluc3RhbmNlb2YgQXJyYXkpKSBvcHRpb25zID0gT2JqZWN0LmVudHJpZXMob3B0aW9ucyk7CiAgY29uc3QgZmluZE9wdCA9IGFyZyA9PiBvcHRpb25zLmZpbmQoKFtvcHRuYW1lLCBvcHRpb25dKSA9PiAoQXJyYXkuaXNBcnJheShvcHRpb24pID8gb3B0aW9uLmluZGV4T2YoYXJnKSAhPSAtMSA6IGZhbHNlKSB8fCBhcmcgPT0gb3B0bmFtZSk7CiAgbGV0IFssIHBhcmFtc10gPSBvcHRpb25zLmZpbmQob3B0ID0+IG9wdFswXSA9PSAnQCcpIHx8IFtdOwogIGlmKHR5cGVvZiBwYXJhbXMgPT0gJ3N0cmluZycpIHBhcmFtcyA9IHBhcmFtcy5zcGxpdCgnLCcpOwogIGZvcihsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7CiAgICBjb25zdCBhcmcgPSBhcmdzW2ldOwogICAgbGV0IG9wdDsKICAgIGlmKGFyZ1swXSA9PSAnLScpIHsKICAgICAgbGV0IG5hbWUsIHZhbHVlLCBzdGFydCwgZW5kOwogICAgICBpZihhcmdbMV0gPT0gJy0nKSBsb25nID0gdHJ1ZTsKICAgICAgZWxzZSBzaG9ydCA9IHRydWU7CiAgICAgIHN0YXJ0ID0gc2hvcnQgPyAxIDogMjsKICAgICAgaWYoc2hvcnQpIGVuZCA9IDI7CiAgICAgIGVsc2UgaWYoKGVuZCA9IGFyZy5pbmRleE9mKCc9JykpID09IC0xKSBlbmQgPSBhcmcubGVuZ3RoOwogICAgICBuYW1lID0gYXJnLnN1YnN0cmluZyhzdGFydCwgZW5kKTsKICAgICAgaWYoKG9wdCA9IGZpbmRPcHQobmFtZSkpKSB7CiAgICAgICAgY29uc3QgW2hhc19hcmcsIGhhbmRsZXJdID0gb3B0WzFdOwogICAgICAgIGlmKGhhc19hcmcpIHsKICAgICAgICAgIGlmKGFyZy5sZW5ndGggPiBlbmQpIHZhbHVlID0gYXJnLnN1YnN0cmluZyhlbmQgKyAoYXJnW2VuZF0gPT0gJz0nKSk7CiAgICAgICAgICBlbHNlIHZhbHVlID0gYXJnc1srK2ldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICB2YWx1ZSA9IGhhbmRsZXIodmFsdWUsIHJlc3VsdFtvcHRbMF1dLCBvcHRpb25zLCByZXN1bHQpOwogICAgICAgIH0gY2F0Y2goZSkge30KICAgICAgICByZXN1bHRbb3B0WzBdXSA9IHZhbHVlOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICB9CiAgICBpZihwYXJhbXMubGVuZ3RoKSB7CiAgICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnNoaWZ0KCk7CiAgICAgIGlmKChvcHQgPSBmaW5kT3B0KHBhcmFtKSkpIHsKICAgICAgICBjb25zdCBbLCBbLCBoYW5kbGVyXV0gPSBvcHQ7CiAgICAgICAgbGV0IHZhbHVlID0gYXJnOwogICAgICAgIGlmKHR5cGVvZiBoYW5kbGVyID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhbHVlID0gaGFuZGxlcih2YWx1ZSwgcmVzdWx0W29wdFswXV0sIG9wdGlvbnMsIHJlc3VsdCk7CiAgICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgfQogICAgICAgIGNvbnN0IG5hbWUgPSBvcHRbMF07CiAgICAgICAgcmVzdWx0W29wdFswXV0gPSB2YWx1ZTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgfQogICAgcmVzdWx0WydAJ10gPSBbLi4uKHJlc3VsdFsnQCddID8/IFtdKSwgYXJnXTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzb0RhdGUoZCkgewogICAgaWYodHlwZW9mIGQgPT0gJ251bWJlcicpIGQgPSBuZXcgRGF0ZShkKTsKICAgIGNvbnN0IHR6ID0gZC5nZXRUaW1lem9uZU9mZnNldCgpOwogICAgY29uc3QgbXMgPSBkLnZhbHVlT2YoKSAtIHR6ICogNjAgKiAxMDAwOwogICAgZCA9IG5ldyBEYXRlKG1zKTsKICAgIHJldHVybiBkLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvVC4qLywgJycpOwp9CgpleHBvcnQgZnVuY3Rpb24gdG9Vbml4VGltZShkYXRlT2JqLCB1dGMgPSBmYWxzZSkgewogIGlmKCEoZGF0ZU9iaiBpbnN0YW5jZW9mIERhdGUpKSBkYXRlT2JqID0gbmV3IERhdGUoZGF0ZU9iaik7CiAgbGV0IGVwb2NoID0gTWF0aC5mbG9vcihkYXRlT2JqLmdldFRpbWUoKSAvIDEwMDApOwogIGlmKHV0YykgZXBvY2ggKz0gZGF0ZU9iai5nZXRUaW1lem9uZU9mZnNldCgpICogNjA7CiAgcmV0dXJuIGVwb2NoOwp9CgpleHBvcnQgZnVuY3Rpb24gdW5peFRpbWUodXRjID0gZmFsc2UpIHsKICByZXR1cm4gdG9Vbml4VGltZShuZXcgRGF0ZSgpLCB1dGMpOwp9CgpleHBvcnQgZnVuY3Rpb24gZnJvbVVuaXhUaW1lKGVwb2NoLCB1dGMgPSBmYWxzZSkgewogIGxldCB0ID0gcGFyc2VJbnQoZXBvY2gpOwogIGxldCBkID0gbmV3IERhdGUoMCk7CiAgdXRjID8gZC5zZXRVVENTZWNvbmRzKHQpIDogZC5zZXRTZWNvbmRzKHQpOwogIHJldHVybiBkOwp9CgpleHBvcnQgZnVuY3Rpb24gcmFuZ2UoLi4uYXJncykgewogIGxldCBbc3RhcnQsIGVuZCwgc3RlcCA9IDFdID0gYXJnczsKICBsZXQgcmV0OwogIHN0YXJ0IC89IHN0ZXA7CiAgZW5kIC89IHN0ZXA7CiAgaWYoc3RhcnQgPiBlbmQpIHsKICAgIHJldCA9IFtdOwogICAgd2hpbGUoc3RhcnQgPj0gZW5kKSByZXQucHVzaChzdGFydC0tKTsKICB9IGVsc2UgewogICAgcmV0ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogZW5kIC0gc3RhcnQgKyAxIH0sICh2LCBrKSA9PiBrICsgc3RhcnQpOwogIH0KICBpZihzdGVwICE9IDEpIHsKICAgIHJldCA9IHJldC5tYXAobiA9PiBuICogc3RlcCk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZXBlYXRlcihuLCB3aGF0KSB7CiAgaWYodHlwZW9mIHdoYXQgPT0gJ2Z1bmN0aW9uJykKICAgIHJldHVybiAoZnVuY3Rpb24qICgpIHsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG47IGkrKykgeWllbGQgd2hhdCgpOwogICAgfSkoKTsKICByZXR1cm4gKGZ1bmN0aW9uKiAoKSB7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB5aWVsZCB3aGF0OwogIH0pKCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZXBlYXQobiwgd2hhdCkgewogIHJldHVybiBbLi4ucmVwZWF0ZXIobiwgd2hhdCldOwp9CgpleHBvcnQgZnVuY3Rpb24gY2h1bmtBcnJheShhcnIsIHNpemUpIHsKICBjb25zdCBmbiA9IChhLCB2LCBpKSA9PiB7CiAgICBjb25zdCBqID0gaSAlIHNpemU7CiAgICBpZihqID09IDApIGEucHVzaChbXSk7CiAgICBhW2EubGVuZ3RoIC0gMV0ucHVzaCh2KTsKICAgIHJldHVybiBhOwogIH07CgogIHJldHVybiBhcnIucmVkdWNlKGZuLCBbXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB1Y2ZpcnN0KHN0cikgewogIGlmKHR5cGVvZiBzdHIgIT0gJ3N0cmluZycpIHN0ciA9IHN0ciArICcnOwogIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKDEpOwp9CgpleHBvcnQgZnVuY3Rpb24gbGNmaXJzdChzdHIpIHsKICBpZih0eXBlb2Ygc3RyICE9ICdzdHJpbmcnKSBzdHIgPSBzdHIgKyAnJzsKICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpICsgc3RyLnN1YnN0cmluZygxKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNhbWVsaXplKHN0ciwgZGVsaW0gPSAnJykgewogIHJldHVybiBzdHIucmVwbGFjZSgvXihbQS1aXSl8W1xzLV9dKyhcdykvZywgKG1hdGNoLCBwMSwgcDIsIG9mZnNldCkgPT4gewogICAgaWYocDIpIHJldHVybiBkZWxpbSArIHAyLnRvVXBwZXJDYXNlKCk7CiAgICByZXR1cm4gcDEudG9Mb3dlckNhc2UoKTsKICB9KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRlY2FtZWxpemUoc3RyLCBkZWxpbSA9ICctJykgewogIHJldHVybiAvLltBLVpdLy50ZXN0KHN0cikKICAgID8gc3RyCiAgICAgICAgLnJlcGxhY2UoLyhbYS16XGRdKShbQS1aXSkvZywgJyQxJyArIGRlbGltICsgJyQyJykKICAgICAgICAucmVwbGFjZSgvKFtBLVpdKykoW0EtWl1bYS16XGRdKykvZywgJyQxJyArIGRlbGltICsgJyQyJykKICAgICAgICAudG9Mb3dlckNhc2UoKQogICAgOiBzdHI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzaG9ydGVuKHN0ciwgbWF4ID0gNDAsIHN1ZmZpeCA9ICcuLi4nKSB7CiAgbWF4ID0gK21heDsKICBpZihpc05hTihtYXgpKSBtYXggPSBJbmZpbml0eTsKICBpZihBcnJheS5pc0FycmF5KHN0cikpIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChzdHIsIDAsIE1hdGgubWluKHN0ci5sZW5ndGgsIG1heCkpLmNvbmNhdChbc3VmZml4XSk7CiAgaWYodHlwZW9mIHN0ciAhPSAnc3RyaW5nJyB8fCAhTnVtYmVyLmlzRmluaXRlKG1heCkgfHwgbWF4IDwgMCkgcmV0dXJuIHN0cjsKICBzdHIgPSAnJyArIHN0cjsKCiAgaWYoc3RyLmxlbmd0aCA+IG1heCkgewogICAgbGV0IG4gPSBNYXRoLmZsb29yKChtYXggLSAoMiArIHN1ZmZpeC5sZW5ndGgpKSAvIDIpOwogICAgbGV0IHRhaWwgPSBzdHIubGVuZ3RoIC0gbjsKICAgIGxldCBsZW4gPSBNYXRoLm1pbihuLCB0YWlsKTsKICAgIGxldCBpbnNlcnQgPSAnICcgKyBzdWZmaXggKyAnICcgKyAoc3RyLmxlbmd0aCAtIChsZW4gKyBuKSkgKyAnIGJ5dGVzICcgKyBzdWZmaXggKyAnICc7CgogICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgbGVuKSArIGluc2VydCArIHN0ci5zdWJzdHJpbmcodGFpbCk7CiAgfQogIHJldHVybiBzdHI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBhcnJheXNJbkNvbW1vbihhKSB7CiAgbGV0IGksCiAgICBjLAogICAgbiA9IGEubGVuZ3RoLAogICAgbWluID0gSW5maW5pdHk7CiAgd2hpbGUobikgewogICAgaWYoYVstLW5dLmxlbmd0aCA8IG1pbikgewogICAgICBtaW4gPSBhW25dLmxlbmd0aDsKICAgICAgaSA9IG47CiAgICB9CiAgfQogIGMgPSBBcnJheS5mcm9tKGEuc3BsaWNlKGksIDEpWzBdKTsKICByZXR1cm4gYy5maWx0ZXIoKGl0bSwgaW5keCkgPT4gewogICAgaWYoYy5pbmRleE9mKGl0bSkgPT0gaW5keCkgcmV0dXJuIGEuZXZlcnkoYXJyID0+IGFyci5pbmRleE9mKGl0bSkgIT0gLTEpOwogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gYXJyYXlGYWNhZGUocHJvdG8sIGl0ZW1GbiA9IChjb250YWluZXIsIGkpID0+IGNvbnRhaW5lci5hdChpKSkgewogIHJldHVybiBkZWZpbmUocHJvdG8sIHsKICAgICpbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgaXRlbUZuKHRoaXMsIGkpOwogICAgfSwKICAgICprZXlzKCkgewogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBpOwogICAgfSwKICAgICplbnRyaWVzKCkgewogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBbaSwgaXRlbUZuKHRoaXMsIGkpXTsKICAgIH0sCiAgICAqdmFsdWVzKCkgewogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBpdGVtRm4odGhpcywgaSk7CiAgICB9LAogICAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykgewogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGl0ZW1Gbih0aGlzLCBpKSwgaSwgdGhpcyk7CiAgICB9LAogICAgcmVkdWNlKGNhbGxiYWNrLCBhY2N1LCB0aGlzQXJnKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGFjY3UgPSBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGFjY3UsIGl0ZW1Gbih0aGlzLCBpKSwgaSwgdGhpcyk7CiAgICAgIHJldHVybiBhY2N1OwogICAgfQogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gbW9kKGEsIGIpIHsKICByZXR1cm4gdHlwZW9mIGIgPT0gJ251bWJlcicgPyAoKGEgJSBiKSArIGIpICUgYiA6IG4gPT4gKChuICUgYSkgKyBhKSAlIGE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwdXNoVW5pcXVlKGFyciwgLi4uYXJncykgewogIGxldCByZWplY3QgPSBbXTsKICBmb3IobGV0IGFyZyBvZiBhcmdzKQogICAgaWYoYXJyLmluZGV4T2YoYXJnKSA9PSAtMSkgYXJyLnB1c2goYXJnKTsKICAgIGVsc2UgcmVqZWN0LnB1c2goYXJnKTsKICByZXR1cm4gcmVqZWN0Owp9CgpleHBvcnQgZnVuY3Rpb24gaW5zZXJ0ZXIoZGVzdCwgbmV4dCA9IChrLCB2KSA9PiB7fSkgewogIGNvbnN0IGluc2VydCA9IGlzRnVuY3Rpb24oZGVzdC5zZXQpICYmIGRlc3Quc2V0Lmxlbmd0aCA+PSAyID8gKGssIHYpID0+IGRlc3Quc2V0KGssIHYpIDogQXJyYXkuaXNBcnJheShkZXN0KSA/IChrLCB2KSA9PiBkZXN0LnB1c2goW2ssIHZdKSA6IChrLCB2KSA9PiAoZGVzdFtrXSA9IHYpOwogIGxldCBmbjsKICBmbiA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGluc2VydChrZXksIHZhbHVlKTsKICAgIG5leHQoa2V5LCB2YWx1ZSk7CiAgICByZXR1cm4gZm47CiAgfTsKICBmbi5kZXN0ID0gZGVzdDsKICBmbi5pbnNlcnQgPSBpbnNlcnQ7CiAgcmV0dXJuIGZuOwp9CgpleHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0KGEsIGIpIHsKICBpZighQXJyYXkuaXNBcnJheShhKSkgYSA9IFsuLi5hXTsKICByZXR1cm4gYS5maWx0ZXIoU2V0LnByb3RvdHlwZS5oYXMsIG5ldyBTZXQoYikpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3ltbWV0cmljRGlmZmVyZW5jZShhLCBiKSB7CiAgcmV0dXJuIFtdLmNvbmNhdCguLi5kaWZmZXJlbmNlKGEsIGIpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uKiBwYXJ0aXRpb25BcnJheShhLCBzaXplKSB7CiAgZm9yKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpICs9IHNpemUpIHlpZWxkIGEuc2xpY2UoaSwgaSArIHNpemUpOwp9CgpleHBvcnQgZnVuY3Rpb24gZGlmZmVyZW5jZShhLCBiLCBpbmNsdWRlcykgewogIGlmKCFBcnJheS5pc0FycmF5KGEpKSBhID0gWy4uLmFdOwogIGlmKCFBcnJheS5pc0FycmF5KGIpKSBiID0gWy4uLmJdOwoKICBpZih0eXBlb2YgaW5jbHVkZXMgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIFthLmZpbHRlcih4ID0+ICFiLmluY2x1ZGVzKHgpKSwgYi5maWx0ZXIoeCA9PiAhYS5pbmNsdWRlcyh4KSldOwoKICByZXR1cm4gW2EuZmlsdGVyKHggPT4gIWluY2x1ZGVzKGIsIHgpKSwgYi5maWx0ZXIoeCA9PiAhaW5jbHVkZXMoYSwgeCkpXTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdGlvbihhLCBiKSB7CiAgaWYoIShhIGluc3RhbmNlb2YgU2V0KSkgYSA9IG5ldyBTZXQoYSk7CiAgaWYoIShiIGluc3RhbmNlb2YgU2V0KSkgYiA9IG5ldyBTZXQoYik7CiAgbGV0IGludGVyc2VjdGlvbiA9IG5ldyBTZXQoWy4uLmFdLmZpbHRlcih4ID0+IGIuaGFzKHgpKSk7CiAgcmV0dXJuIEFycmF5LmZyb20oaW50ZXJzZWN0aW9uKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHVuaW9uKGEsIGIsIGVxdWFsaXR5KSB7CiAgaWYoZXF1YWxpdHkgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFsuLi5uZXcgU2V0KFsuLi5hLCAuLi5iXSldOwoKICByZXR1cm4gdW5pcXVlKFsuLi5hLCAuLi5iXSwgZXF1YWxpdHkpOwp9CgovKioKICogYWNjZXB0cyBhcnJheSBhbmQgZnVuY3Rpb24gcmV0dXJuaW5nIGB0cnVlYCBvciBgZmFsc2VgIGZvciBlYWNoIGVsZW1lbnQKICoKICogQHBhcmFtICB7W3R5cGVdfSAgIGFycmF5ICAgIFtkZXNjcmlwdGlvbl0KICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrIFtkZXNjcmlwdGlvbl0KICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICAgIFtkZXNjcmlwdGlvbl0KICovCmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb24oYXJyYXksIGNhbGxiYWNrKSB7CiAgY29uc3QgbWF0Y2hlcyA9IFtdLAogICAgbm9uTWF0Y2hlcyA9IFtdOwoKICAvLyBwdXNoIGVhY2ggZWxlbWVudCBpbnRvIGFycmF5IGRlcGVuZGluZyBvbiByZXR1cm4gdmFsdWUgb2YgYGNhbGxiYWNrYAogIGZvcihsZXQgZWxlbWVudCBvZiBhcnJheSkgKGNhbGxiYWNrKGVsZW1lbnQpID8gbWF0Y2hlcyA6IG5vbk1hdGNoZXMpLnB1c2goZWxlbWVudCk7CgogIHJldHVybiBbbWF0Y2hlcywgbm9uTWF0Y2hlc107Cn0KCmV4cG9ydCBmdW5jdGlvbiBMb2NhdGlvbihsaW5lLCBjb2x1bW4sIHBvcywgZmlsZSwgZnJlZXplID0gdHJ1ZSkgewogIGxldCBvYmogPSB0aGlzIHx8IG5ldy50YXJnZXQudGVzdCB8fCB0aGlzID8gdGhpcyA6IHt9OwoKICAvKmNvbnNvbGUubG9nKCJvYmouY29uc3RydWN0b3I6IixvYmouY29uc3RydWN0b3IpOwogIC8vY29uc29sZS5sb2coImZyZWV6ZToiLGZyZWV6ZSk7Ki8KICBPYmplY3QuYXNzaWduKG9iaiwgewogICAgbGluZSwKICAgIGNvbHVtbiwKICAgIHBvcywKICAgIGZpbGUKICB9KTsKICBpZih0aGlzICE9PSBvYmopIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIExvY2F0aW9uLnByb3RvdHlwZSk7CgogIHJldHVybiBmcmVlemUgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBMb2NhdGlvbiA/IE9iamVjdC5mcmVlemUob2JqKSA6IG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdCguLi5hcmdzKSB7CiAgcmV0dXJuIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwoeyBoaWRlS2V5czogWydjb25zdHJ1Y3RvciddIH0sIGFyZ3MpOwp9CgpleHBvcnQgZnVuY3Rpb24gZm9ybWF0V2l0aE9wdGlvbnMob3B0cywgLi4uYXJncykgewogIGlmKCFpc09iamVjdChvcHRzKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgb3B0aW9ucyBhcmd1bWVudCBpcyBub3QgYW4gb2JqZWN0YCk7CiAgcmV0dXJuIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwob3B0cywgYXJncyk7Cn0KCmZ1bmN0aW9uIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwobywgdikgewogIGNvbnN0IHggPSB2WzBdOwogIGxldCBhID0gMDsKICBsZXQgcyA9ICcnOwogIGxldCBqID0gJyc7CiAgaWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7CiAgICBpZih2Lmxlbmd0aCA9PT0gMSkgcmV0dXJuIHg7CiAgICBsZXQgdDsKICAgIGxldCBwID0gMDsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aCAtIDE7IGkrKykgewogICAgICBpZih4W2ldID09ICclJykgewogICAgICAgIGxldCBmID0gJyc7CiAgICAgICAgd2hpbGUoJ3NqeGRPb2lmYyUnLmluZGV4T2YoeFtpICsgMV0pID09IC0xKSB7CiAgICAgICAgICBmICs9IHhbaSArIDFdOwogICAgICAgICAgKytpOwogICAgICAgIH0KICAgICAgICBpZihwIDwgaSkgcyArPSBzbGljZSh4LCBwLCBpKTsKICAgICAgICBwID0gaSArIDE7CgogICAgICAgIGNvbnN0IGMgPSBTdHJpbmcucHJvdG90eXBlLmNoYXJDb2RlQXQuY2FsbCh4LCArK2kpOwogICAgICAgIGlmKGEgKyAxICE9PSB2Lmxlbmd0aCkgewogICAgICAgICAgc3dpdGNoIChjKSB7CiAgICAgICAgICAgIGNhc2UgMTE1OiAvLyAlcwogICAgICAgICAgICAgIGNvbnN0IHkgPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIHkgPT09ICdudW1iZXInKSB0ID0gZm9ybWF0TnVtYmVyKHkpOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIHkgPT09ICdiaWdpbnQnKSB0ID0gYCR7eX1uYDsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiB5ICE9PSAnb2JqZWN0JyB8fCB5ID09PSBudWxsIHx8ICFoYXNCdWlsdEluKHksICd0b1N0cmluZycpKSB0ID0gU3RyaW5nKHkpOwogICAgICAgICAgICAgIGVsc2UgdCA9IGluc3BlY3QoeSwgeyAuLi5vLCBjb21wYWN0OiAzLCBjb2xvcnM6IGZhbHNlLCBkZXB0aDogMCB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDY6IC8vICVqCiAgICAgICAgICAgICAgdCA9IHN0cmluZ2lmeSh2WysrYV0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEyMDogLy8gJXgKICAgICAgICAgICAgY2FzZSAxMDA6IC8vICVkCiAgICAgICAgICAgICAgY29uc3QgbiA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgbiA9PT0gJ2JpZ2ludCcpIHQgPSBgJHtufW5gOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIG4gPT09ICdzeW1ib2wnKSB0ID0gJ05hTic7CiAgICAgICAgICAgICAgZWxzZSB0ID0gZm9ybWF0TnVtYmVyKGMgPT0gMTIwID8gTnVtYmVyKG4pLnRvU3RyaW5nKDE2KSA6IE51bWJlcihuKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzk6IC8vICVPCiAgICAgICAgICAgICAgdCA9IGluc3BlY3QodlsrK2FdLCBvKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMTE6IC8vICVvCiAgICAgICAgICAgICAgdCA9IC8qdlsrK2FdKycnID8/ICovIGluc3BlY3QodlsrK2FdLCB7CiAgICAgICAgICAgICAgICAuLi5vLAogICAgICAgICAgICAgICAgc2hvd0hpZGRlbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHNob3dQcm94eTogdHJ1ZSwKICAgICAgICAgICAgICAgIGRlcHRoOiAxLAogICAgICAgICAgICAgICAgcHJvdG9DaGFpbjogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDU6IC8vICVpCiAgICAgICAgICAgICAgY29uc3QgayA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgayA9PT0gJ2JpZ2ludCcpIHQgPSBgJHtrfWA7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgayA9PT0gJ3N5bWJvbCcpIHQgPSAnTmFOJzsKICAgICAgICAgICAgICBlbHNlIHQgPSBmb3JtYXROdW1iZXIocGFyc2VJbnQoaykpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwMjogLy8gJWYKICAgICAgICAgICAgICBjb25zdCBkID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBkID09PSAnc3ltYm9sJykgdCA9ICdOYU4nOwogICAgICAgICAgICAgIGVsc2UgdCA9IGZvcm1hdE51bWJlcihwYXJzZUZsb2F0KGQpKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA5OTogLy8gJWMKICAgICAgICAgICAgICBhICs9IDE7CiAgICAgICAgICAgICAgdCA9ICcnOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM3OiAvLyAlJQogICAgICAgICAgICAgIHMgKz0gc2xpY2UoeCwgcCwgaSk7CiAgICAgICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYocCAhPT0gaSAtIDEpIHMgKz0gc2xpY2UoeCwgcCwgaSAtIDEpOwogICAgICAgICAgbGV0IHBhZCA9IHBhcnNlSW50KGYpOwogICAgICAgICAgaWYoTWF0aC5hYnMocGFkKSA+IDApIHQgPSB0WydwYWQnICsgKHBhZCA8IDAgPyAnRW5kJyA6ICdTdGFydCcpXShNYXRoLmFicyhwYWQpLCAvXi0/MC8udGVzdChmKSA/ICcwJyA6ICcgJyk7CiAgICAgICAgICBzICs9IHQ7CiAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgfSBlbHNlIGlmKGMgPT09IDM3KSB7CiAgICAgICAgICBzICs9IHNsaWNlKHgsIHAsIGkpOwogICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYocCAhPT0gMCkgewogICAgICBhKys7CiAgICAgIGogPSAnICc7CiAgICAgIGlmKHAgPCB4Lmxlbmd0aCkgcyArPSBzbGljZSh4LCBwKTsKICAgIH0KICB9CiAgd2hpbGUoYSA8IHYubGVuZ3RoKSB7CiAgICBjb25zdCB5ID0gdlthXTsKICAgIHMgKz0gajsKICAgIHMgKz0gdHlwZW9mIHkgIT09ICdzdHJpbmcnID8gaW5zcGVjdCh5LCBvKSA6IHk7CiAgICBqID0gJyAnOwogICAgYSsrOwogIH0KICByZXR1cm4gczsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZ1bmN0aW9uTmFtZShmbikgewogIGlmKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBmbi5uYW1lID09ICdzdHJpbmcnKSByZXR1cm4gZm4ubmFtZTsKICB0cnkgewogICAgY29uc3QgbWF0Y2hlcyA9IC9mdW5jdGlvblxzKihbXihdKilcKC4qL2cuZXhlYyhmbiArICcnKTsKICAgIGlmKG1hdGNoZXMgJiYgbWF0Y2hlc1sxXSkgcmV0dXJuIG1hdGNoZXNbMV07CiAgfSBjYXRjaCB7fQogIHJldHVybiBudWxsOwp9CgpleHBvcnQgZnVuY3Rpb24gY2xhc3NOYW1lKG9iaikgewogIGlmKGlzT2JqZWN0KG9iaikpIHsKICAgIGlmKCdjb25zdHJ1Y3RvcicgaW4gb2JqKSByZXR1cm4gZnVuY3Rpb25OYW1lKG9iai5jb25zdHJ1Y3Rvcik7CiAgICBpZihTeW1ib2wudG9TdHJpbmdUYWcgaW4gb2JqKSByZXR1cm4gb2JqW1N5bWJvbC50b1N0cmluZ1RhZ107CiAgfQogIHJldHVybiBudWxsOwp9CgpleHBvcnQgY29uc3QgaXNBcnJvd0Z1bmN0aW9uID0gZm4gPT4gKGlzRnVuY3Rpb24oZm4pICYmICEoJ3Byb3RvdHlwZScgaW4gZm4pKSB8fCAvXCA9PlwgLy50ZXN0KCgnJyArIGZuKS5yZXBsYWNlKC9cbi4qL2csICcnKSk7CgpleHBvcnQgZnVuY3Rpb24gcHJlZGljYXRlKGZuX29yX3JlZ2V4LCBwcmVkKSB7CiAgbGV0IGZuID0gZm5fb3JfcmVnZXg7CiAgaWYodHlwZW9mIGZuX29yX3JlZ2V4ID09ICdzdHJpbmcnKSBmbl9vcl9yZWdleCA9IG5ldyBSZWdFeHAoJ14nICsgZm5fb3JfcmVnZXggKyAnJCcpOwogIGlmKGlzT2JqZWN0KGZuX29yX3JlZ2V4KSAmJiBmbl9vcl9yZWdleCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgZm4gPSBhcmcgPT4gZm5fb3JfcmVnZXgudGVzdChhcmcgKyAnJyk7CiAgICBmbi52YWx1ZU9mID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBmbl9vcl9yZWdleDsKICAgIH07CiAgfQogIGlmKGlzRnVuY3Rpb24ocHJlZCkpIHJldHVybiBhcmcgPT4gcHJlZChhcmcsIGZuKTsKICByZXR1cm4gZm47Cn0KCmV4cG9ydCBjb25zdCBpc0FycmF5ID0gYSA9PiBBcnJheS5pc0FycmF5KGEpOwoKZXhwb3J0IGNsYXNzIEFycmF5RmFjYWRlIHsKICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgaXRlbUZuKHRoaXMsIGkpOwogIH0KICAqa2V5cygpIHsKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBpOwogIH0KICAqZW50cmllcygpIHsKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBbaSwgaXRlbUZuKHRoaXMsIGkpXTsKICB9CiAgKnZhbHVlcygpIHsKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBpdGVtRm4odGhpcywgaSk7CiAgfQogIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGl0ZW1Gbih0aGlzLCBpKSwgaSwgdGhpcyk7CiAgfQogIHJlZHVjZShjYWxsYmFjaywgYWNjdSwgdGhpc0FyZykgewogICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGFjY3UgPSBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGFjY3UsIGl0ZW1Gbih0aGlzLCBpKSwgaSwgdGhpcyk7CiAgICByZXR1cm4gYWNjdTsKICB9Cn0KCi8qZXhwb3J0IGZ1bmN0aW9uIGFycmF5RmFjYWRlKHByb3RvLCBpdGVtRm4gPSAoY29udGFpbmVyLCBpKSA9PiBjb250YWluZXIuYXQoaSkpIHsKICByZXR1cm4gZGVmaW5lKHByb3RvLCBBcnJheUZhY2FkZS5wcm90b3R5cGUpOwp9Ki8KCmV4cG9ydCBmdW5jdGlvbiBiaXRzKGJ1ZmZlcikgewogIGxldCBhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTsKICBsZXQgYml0LAogICAgYml0cyA9IGJ1ZmZlci5ieXRlTGVuZ3RoIDw8IDM7CiAgbGV0IHJldCA9IFtdOwogIGZvcihiaXQgPSAwOyBiaXQgPCBiaXRzOyBiaXQrKykgewogICAgbGV0IHNoaWZ0ID0gYml0ICYgMHg3OwogICAgbGV0IGJwb3MgPSBiaXQgPj4gMzsKCiAgICByZXQucHVzaChhW2JpdCA+PiAzXSAmICgxIDw8IHNoaWZ0KSA/IDEgOiAwKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGR1cEFycmF5QnVmZmVyKGJ1Ziwgc3RhcnQsIGxlbmd0aCkgewogIGxldCBhID0gbmV3IFVpbnQ4QXJyYXkoYnVmLCBzdGFydCwgbGVuZ3RoKTsKICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWy4uLmFdKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0VHlwZU5hbWUodikgewogIHJldHVybiB0eXBlb2YgdjsKfQpleHBvcnQgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcihidWYpIHsKICByZXR1cm4gaXNPYmplY3QoYnVmKSAmJiBidWYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzQmlnRGVjaW1hbChudW0pIHsKICByZXR1cm4gdHlwZW9mIG51bSA9PSAnYmlnZGVjaW1hbCcgfHwgbnVtW1N5bWJvbC50b1N0cmluZ1RhZ10gPT0gJ0JpZ0RlY2ltYWwnOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNCaWdGbG9hdChudW0pIHsKICByZXR1cm4gdHlwZW9mIG51bSA9PSAnYmlnZmxvYXQnIHx8IG51bVtTeW1ib2wudG9TdHJpbmdUYWddID09ICdCaWdGbG9hdCc7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0JpZ0ludChudW0pIHsKICByZXR1cm4gdHlwZW9mIG51bSA9PSAnYmlnaW50JyB8fCBudW1bU3ltYm9sLnRvU3RyaW5nVGFnXSA9PSAnaXNCaWdJbnQnOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNCb29sKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnYm9vbGVhbic7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0NGdW5jdGlvbihmbikgewogIHJldHVybiBmYWxzZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzQ29uc3RydWN0b3IoZm4pIHsKICByZXR1cm4gdHlwZW9mIGZuID09ICdmdW5jdGlvbicgJiYgJ3Byb3RvdHlwZScgaW4gZm47Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5U3RyaW5nKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlID09PSAnJzsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBFcnJvciB8fCB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddLmVuZHNXaXRoKCdFcnJvcicpOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNFeGNlcHRpb24odmFsdWUpIHsKICByZXR1cm4gZmFsc2U7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc0V4dGVuc2libGUodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkgewogIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJzsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzSFRNTEREQSh2YWx1ZSkgewogIHJldHVybiBmYWxzZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzSW5zdGFuY2VPZih2YWx1ZSwgY3RvcikgewogIGlmKGN0b3JbU3ltYm9sLmhhc0luc3RhbmNlXSkgewogICAgcmV0dXJuIGN0b3JbU3ltYm9sLmhhc0luc3RhbmNlXSh2YWx1ZSk7CiAgfQogIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBjdG9yOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7CiAgcmV0dXJuIE1hdGguYWJzKHZhbHVlKSAlIDEgPT0gMDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzSm9iUGVuZGluZyhpZCkgewogIHJldHVybiBmYWxzZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzTGl2ZU9iamVjdChvYmopIHsKICByZXR1cm4gdHJ1ZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbCh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSA9PT0gbnVsbDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJzsKfQpleHBvcnQgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnOwp9CgpleHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnOwp9CmV4cG9ydCBmdW5jdGlvbiBpc1VuaW5pdGlhbGl6ZWQodmFsdWUpIHsKICByZXR1cm4gZmFsc2U7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkgewogIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHwgdmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PSAnU3ltYm9sJzsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzVW5jYXRjaGFibGVFcnJvcih2YWx1ZSkgewogIHJldHVybiBmYWxzZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzUmVnaXN0ZXJlZENsYXNzKGlkKSB7CiAgcmV0dXJuIGZhbHNlOwp9CmV4cG9ydCBmdW5jdGlvbiByYW5kKCkgewogIHJldHVybiBNYXRoLnJhbmRvbSgpICogMiAqKiAzMjsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRpKCkgewogIHJldHVybiByYW5kKCkgLSAyICoqIDMxOwp9CgpleHBvcnQgZnVuY3Rpb24gcmFuZGYoKSB7CiAgcmV0dXJuIE1hdGgucmFuZG9tKCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzcmFuZChzZWVkKSB7fQoKZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXlCdWZmZXIodmFsdWUpIHsKICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgJ2J1ZmZlcicgaW4gdmFsdWUgJiYgaXNBcnJheUJ1ZmZlcih2YWx1ZS5idWZmZXIpKSByZXR1cm4gdmFsdWUuYnVmZmVyOwoKICBpZih0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHsKICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTsKICAgIGNvbnN0IHZpZXcgPSBlbmNvZGVyLmVuY29kZSh2YWx1ZSk7CiAgICByZXR1cm4gdmlldy5idWZmZXI7CiAgfQogIHJldHVybiB2YWx1ZTsKfQoKTG9jYXRpb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oZnJlZXplID0gZmFsc2UsIHdpdGhGaWxlbmFtZSA9IHRydWUpIHsKICBjb25zdCB7IGxpbmUsIGNvbHVtbiwgcG9zLCBmaWxlIH0gPSB0aGlzOwoKICByZXR1cm4gbmV3IExvY2F0aW9uKGxpbmUsIGNvbHVtbiwgcG9zLCB3aXRoRmlsZW5hbWUgPyBmaWxlIDogbnVsbCwgZnJlZXplKTsKfTsKTG9jYXRpb24ucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnTG9jYXRpb24nOwoKTG9jYXRpb24ucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiogKCkgewogIGxldCB7IGZpbGUsIGxpbmUsIGNvbHVtbiB9ID0gdGhpczsKICBsZXQgdiA9IGZpbGUgPyBbZmlsZSwgbGluZSwgY29sdW1uXSA6IFtsaW5lLCBjb2x1bW5dOwogIHlpZWxkKiB2Owp9OwpMb2NhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRzID0ge30pIHsKICBjb25zdCB7IGxpbmUsIGNvbHVtbiwgZmlsZSB9ID0gdGhpczsKICByZXR1cm4gKGZpbGUgPyBmaWxlICsgJzonIDogJycpICsgbGluZSArICc6JyArIGNvbHVtbjsKfTsKTG9jYXRpb24ucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gdGhpcy5wb3M7Cn07CkxvY2F0aW9uLnByb3RvdHlwZVtTeW1ib2wudG9QcmltaXRpdmVdID0gZnVuY3Rpb24oaGludCkgewogIGlmKGhpbnQgPT0gJ251bWJlcicpIHJldHVybiB0aGlzLnBvczsKICBpZihoaW50ID09ICdzdHJpbmcnKSByZXR1cm4gdGhpcy50b1N0cmluZygpOwp9OwpMb2NhdGlvbi5wcm90b3R5cGVbU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0gPSBmdW5jdGlvbihuLCBvcHRzKSB7CiAgcmV0dXJuIHRoaXMudG9TdHJpbmcoeyBjb2xvcnM6IHRydWUgfSk7CiAgcmV0dXJuIGluc3BlY3QodGhpcywgewogICAgY29sb3JzOiB0cnVlLAogICAgLi4ub3B0cywKICAgIHRvU3RyaW5nOiBTeW1ib2wudG9TdHJpbmdUYWcKICB9KTsKfTsKLyoKTG9jYXRpb24ucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gdGhpcy5wb3M7Cn07Ki8KCmRlZmluZShMb2NhdGlvbi5wcm90b3R5cGUsIHsKICAvKiBwcmV0dGllci1pZ25vcmUgKi8gZ2V0IG9mZnNldCgpIHsKICAgIHJldHVybiB0aGlzLnZhbHVlT2YoKTsKICB9Cn0pOwoAAAAAAAAAAK79AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlvgAAAAAAAOW+AAAAAAAAAAAAAAAA8L8"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "c"
					},
					"AQAAAOW+AAAAAAAA5r4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADlvgAAAAAAAOW+AAAAAAAAAAAAAAAA8L8"
				],
				[
					75,
					1,
					"left_delete",
					null,
					"AQAAAOW+AAAAAAAA5b4AAAAAAAABAAAAYw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmvgAAAAAAAOa+AAAAAAAAAAAAAAAA8L8"
				],
				[
					103,
					1,
					"paste",
					null,
					"AQAAANpAAAAAAAAADEIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaQAAAAAAAANpAAAAAAAAAAAAAAAAA8L8"
				],
				[
					106,
					1,
					"paste",
					null,
					"AQAAANtAAAAAAAAA+0EAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADbQAAAAAAAANtAAAAAAAAAAAAAAAAA8L8"
				],
				[
					109,
					2,
					"left_delete",
					null,
					"AgAAANtAAAAAAAAA20AAAAAAAAABAAAACtpAAAAAAAAA2kAAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADcQAAAAAAAANxAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "components.js",
			"settings":
			{
				"buffer_size": 41728,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					2,
					1,
					"left_delete",
					null,
					"AQAAALcAAAAAAAAAtwAAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC4AAAAAAAAALgAAAAAAAAAAAAAAAAAAAA"
				],
				[
					13,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB/ogAAaW1wb3J0IHsgaCwgRnJhZ21lbnQsIGh0bWwsIHJlbmRlciwgQ29tcG9uZW50LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUNhbGxiYWNrLCBQb3J0YWwsIFJlYWN0Q29tcG9uZW50LCB0b0NoaWxkQXJyYXkgLyosIGNsb25lRWxlbWVudCovIH0gZnJvbSAnLi9saWIvZG9tL3ByZWFjdENvbXBvbmVudC5qcyc7CmltcG9ydCB7IHRya2wgfSBmcm9tICcuL2xpYi90cmtsLmpzJzsKaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4vbGliL2RvbS5qcyc7CmltcG9ydCBwYXRoIGZyb20gJy4vbGliL3BhdGguanMnOwppbXBvcnQgeyB1c2VUcmtsIH0gZnJvbSAnLi9saWIvaG9va3MvdXNlVHJrbC5qcyc7CmltcG9ydCB7IGNsYXNzTmFtZXMgfSBmcm9tICcuL2xpYi9jbGFzc05hbWVzLmpzJzsKaW1wb3J0IHsgdXNlQWN0aXZlLCB1c2VDbGlja291dCwgdXNlRGltZW5zaW9ucywgdXNlRG91YmxlQ2xpY2ssIHVzZUVsZW1lbnQsIEV2ZW50VHJhY2tlciwgdXNlRXZlbnQsIHVzZUZvY3VzLCB1c2VSZWNvZ25pemVycywgdXNlRHJhZywgdXNlUGluY2gsIHVzZVdoZWVsLCB1c2VNb3ZlLCB1c2VTY3JvbGwsIHVzZUdlc3R1cmUsIHVzZUhvdmVyLCB1c2VNb3VzZVBvc2l0aW9uLCB1c2VQYW5ab29tLCB1c2VUb2dnbGVCdXR0b25Hcm91cFN0YXRlIH0gZnJvbSAnLi9saWIvaG9va3MuanMnOwppbXBvcnQgZGVlcERpZmYgZnJvbSAnLi9saWIvZGVlcC1kaWZmLmpzJzsKaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tICcuL2xpYi9yZXBlYXRlci9yZWFjdC1ob29rcy5qcyc7CmltcG9ydCBSdWxlckRyYWdnYWJsZSBmcm9tICcuL3J1bGVyLWRyYWdnYWJsZS5qcyc7CgpleHBvcnQgY29uc3QgUnVsZXIgPSAoeyBoYW5kbGVDaGFuZ2UsIHN0eWxlID0ge30sIGNsYXNzOiBjbGFzc05hbWUgfSkgPT4gewogIGNvbnN0IHJlZlJ1bGVyID0gdXNlUmVmKCk7CiAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShudWxsKTsKCiAgLypjb25zb2xlLmxvZygnUnVsZXIgcmVmUnVsZXI6ICcsIHJlZlJ1bGVyKTsKICAvL2NvbnNvbGUubG9nKCdSdWxlciB2YWx1ZTogJywgdmFsdWUpOyovCgogIGNvbnN0IGhhbmRsZXJzID0gdHJrbChudWxsKTsKICBsZXQgY29tbWFuZHM7CgogIGhhbmRsZXJzLnN1YnNjcmliZSh2YWx1ZSA9PiB7CiAgICBpZighY29tbWFuZHMgJiYgaXNPYmplY3QodmFsdWUpKSBjb21tYW5kcyA9IHZhbHVlOwogICAgLypjb25zb2xlLmxvZygndHJrbCBoYW5kbGVycyB2YWx1ZSA9JywgdmFsdWUpOwogICAgLy9jb25zb2xlLmxvZygnY29tbWFuZHMgPScsIGNvbW1hbmRzKTsqLwogIH0pOwoKICBjb25zdCBwcmVzc2luZ0Rvd24gPSAoKSA9PiBjb21tYW5kcy5wcmVzc2luZ0Rvd24oKTsKICBjb25zdCBwcmVzc2luZ1VwID0gKCkgPT4gY29tbWFuZHMucHJlc3NpbmdVcCgpOwogIGNvbnN0IHN0b3BQcmVzc2luZyA9ICgpID0+IGNvbW1hbmRzLnN0b3BQcmVzc2luZygpOwogIGxldCBvbkNoYW5nZWQgPSB2YWx1ZSA9PiBzZXRWYWx1ZSh2YWx1ZSk7CgogIGlmKHR5cGVvZiBoYW5kbGVDaGFuZ2UgPT0gJ2Z1bmN0aW9uJykgewogICAgY29uc3QgcHJldkhhbmRsZXIgPSBvbkNoYW5nZWQ7CiAgICBvbkNoYW5nZWQgPSB2YWx1ZSA9PiB7CiAgICAgIHByZXZIYW5kbGVyKHZhbHVlKTsKICAgICAgaGFuZGxlQ2hhbmdlKHZhbHVlKTsKICAgIH07CiAgfQoKICByZXR1cm4gaCgnZGl2JywgeyBzdHlsZSwgY2xhc3M6IGNsYXNzTmFtZSB9LCBbCiAgICBoKAogICAgICAnYnV0dG9uJywKICAgICAgewogICAgICAgIG9uTW91c2VEb3duOiBwcmVzc2luZ0Rvd24sCiAgICAgICAgb25Nb3VzZVVwOiBzdG9wUHJlc3NpbmcKICAgICAgfSwKICAgICAgWydEb3duJ10KICAgICksCiAgICBoKAogICAgICAnYnV0dG9uJywKICAgICAgewogICAgICAgIG9uTW91c2VEb3duOiBwcmVzc2luZ1VwLAogICAgICAgIG9uTW91c2VVcDogc3RvcFByZXNzaW5nCiAgICAgIH0sCiAgICAgIFsnVXAnXQogICAgKSwKICAgIGgoJ2RpdicsIHt9LCBbcm91bmRUbyh2YWx1ZSwgMC4wMDEsIDMpXSksCiAgICBoKAogICAgICBSdWxlckRyYWdnYWJsZSwKICAgICAgewogICAgICAgIHJlZjogcmVmUnVsZXIsCiAgICAgICAgaGFuZGxlcnMsCiAgICAgICAgZGVmYXVsdFZhbHVlOiA1MCwKICAgICAgICBvbkNoYW5nZWQsCiAgICAgICAgbG9uZ0xlbmd0aDogNjAwLAogICAgICAgIHNob3J0TGVuZ3RoOiA2MCwKICAgICAgICBob3Jpem9udGFsOiBmYWxzZQogICAgICB9LAogICAgICBbXQogICAgKQogIF0pOwp9OwoKZXhwb3J0IGNvbnN0IENsaWNrSGFuZGxlciA9IGNhbGxiYWNrID0+IGUgPT4gewogIGlmKGUudHlwZSkgewogICAgY29uc3QgcHJlc3MgPSBlLnR5cGUuZW5kc1dpdGgoJ2Rvd24nKTsKICAgIGNhbGxiYWNrKGUsIHByZXNzKTsKICB9Cn07CgpleHBvcnQgY29uc3QgVG9nZ2xlSGFuZGxlciA9IChjYWxsYmFjaywgZ2V0U3RhdGUsIHNldFN0YXRlKSA9PiBlID0+IHsKICBpZihlLnR5cGUpIHsKICAgIGNvbnN0IHByZXNzID0gZS50eXBlLmVuZHNXaXRoKCdkb3duJyk7CgogICAgaWYocHJlc3MpIHsKICAgICAgbGV0IHN0YXRlID0gIWdldFN0YXRlKCk7CiAgICAgIHNldFN0YXRlKHN0YXRlKTsKICAgICAgY2FsbGJhY2soZSwgc3RhdGUpOwogICAgfQogIH0KfTsKCmV4cG9ydCBjb25zdCBNb3VzZUV2ZW50cyA9IGggPT4gKHsKICBvbk1vdXNlRG93bjogaCwKCiAgLyogIG9uQmx1cjogaCwqLwogIG9uTW91c2VPdXQ6IGgsCiAgb25Nb3VzZVVwOiBoCn0pOwoKZXhwb3J0IGNvbnN0IE92ZXJsYXkgPSAoeyBjbGFzc05hbWUgPSAnb3ZlcmxheScsIHRpdGxlLCB0b29sdGlwLCBhY3RpdmUgPSB0cnVlLCBlbmFibGUgPSB0cmtsKHRydWUpLCB2aXNpYmxlID0gdHJrbCh0cnVlKSwgdG9nZ2xlLCBzdGF0ZSwgb25QdXNoLCB0ZXh0LCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkgPT4gewogIGNvbnN0IFtwdXNoZWQsIHNldFB1c2hlZF0gPSB0eXBlb2Ygc3RhdGUgPT0gJ2Z1bmN0aW9uJyA/IFt1c2VUcmtsKHN0YXRlKSwgc3RhdGVdIDogdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IGVuYWJsZWQgPSB1c2VUcmtsKGVuYWJsZSk7CiAgY29uc3QgZXZlbnRzID0gZW5hYmxlZAogICAgPyBNb3VzZUV2ZW50cygKICAgICAgICAodG9nZ2xlID8gVG9nZ2xlSGFuZGxlciA6IENsaWNrSGFuZGxlcikoCiAgICAgICAgICAoZSwgc3RhdGUpID0+IHsKICAgICAgICAgICAgY29uc3QgcHJldiA9IHB1c2hlZDsKICAgICAgICAgICAgaWYoZS5idXR0b25zICYmIGUuYnV0dG9ucyAhPSAxKSByZXR1cm47CiAgICAgICAgICAgIGlmKCFlLnR5cGUuZW5kc1dpdGgoJ2Rvd24nKSAmJiAhZS50eXBlLmVuZHNXaXRoKCd1cCcpKSByZXR1cm47CiAgICAgICAgICAgIGxldCByZXQ7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJNb3VzZUV2ZW50Iiwge3R5cGU6IGUudHlwZSwgc3RhdGV9KTsKICAgICAgICAgICAgaWYodHlwZW9mIG9uUHVzaCA9PSAnZnVuY3Rpb24nKSByZXQgPSBvblB1c2goZSwgc3RhdGUpOwogICAgICAgICAgICBpZihyZXQgPT09IHRydWUgfHwgcmV0ID09PSBmYWxzZSkgc3RhdGUgPSByZXQ7CiAgICAgICAgICAgIHNldFB1c2hlZChzdGF0ZSk7CiAgICAgICAgICB9LAogICAgICAgICAgKCkgPT4gcHVzaGVkLAogICAgICAgICAgc2V0UHVzaGVkCiAgICAgICAgKQogICAgICApCiAgICA6IHt9OwogIGlmKHR5cGVvZiB0aXRsZSA9PSAnc3RyaW5nJyAmJiB0aXRsZS5sZW5ndGggPiAwKSBwcm9wcy50aXRsZSA9IHRpdGxlOwogIGlmKHR5cGVvZiB0b29sdGlwID09ICdzdHJpbmcnICYmIHRvb2x0aXAubGVuZ3RoID4gMCkgcHJvcHNbJ2RhdGEtdG9vbHRpcCddID0gdG9vbHRpcDsKICByZXR1cm4gaCgKICAgICdkaXYnLAogICAgewogICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2xhc3NOYW1lLCBwdXNoZWQgJiYgJ3B1c2hlZCcsIGFjdGl2ZSA/ICdhY3RpdmUnIDogJ2luYWN0aXZlJywgIXZpc2libGUgJiYgJ2hpZGRlbicpLAogICAgICAuLi5wcm9wcywKICAgICAgLi4uZXZlbnRzCiAgICB9LAogICAgY2hpbGRyZW4KICApOwp9OwoKZXhwb3J0IGNvbnN0IENvbnRhaW5lciA9ICh7IGNsYXNzTmFtZSA9ICdwYW5lbCcsIHRhZyA9ICdkaXYnLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkgPT4gewogIC8vIHVzZUNhbGxiYWNrKCgpID0+IGNvbnNvbGUuZGVidWcoJ3JlLXJlbmRlciBwYW5lbCcpKTsKICByZXR1cm4gaCh0YWcsIHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCBjaGlsZHJlbik7Cn07CgpleHBvcnQgY29uc3QgQnV0dG9uID0gYWxsUHJvcHMgPT4gewogIGxldCB7CiAgICBjbGFzc05hbWUsCiAgICBjYXB0aW9uLAogICAgaW1hZ2UsCiAgICBmbiwKICAgIHN0YXRlLAogICAgZW5hYmxlID0gdHJrbCh0cnVlKSwKICAgIHZpc2libGUgPSB0cmtsKHRydWUpLAogICAgb25QdXNoID0gc3RhdGUgPT4gKHN0YXRlICYmIHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4oc3RhdGUpIDogdW5kZWZpbmVkKSwKICAgIHN0eWxlID0ge30sCiAgICAuLi5wcm9wcwogIH0gPSBhbGxQcm9wczsKICBjb25zdCBlbmFibGVkID0gdXNlVHJrbChlbmFibGUpOwogIGNvbnN0IHNob3cgPSB1c2VUcmtsKHZpc2libGUpOwoKICBpZighcHJvcHMuY2hpbGRyZW4pIHByb3BzLmNoaWxkcmVuID0gW107CiAgaWYodHlwZW9mIGltYWdlID09ICdzdHJpbmcnKSBpbWFnZSA9IGgoJ2ltZycsIHsgc3JjOiBpbWFnZSB9KTsKICBlbHNlIGlmKHR5cGVvZiBpbWFnZSA9PSAnZnVuY3Rpb24nKSBpbWFnZSA9IGltYWdlKGFsbFByb3BzKTsKCiAgcHJvcHMuY2hpbGRyZW4udW5zaGlmdChpbWFnZSk7CgogIC8vY29uc29sZS5sb2coJ0J1dHRvbicsIGNhcHRpb24gPz8gaW1hZ2UsIHsgZW5hYmxlZCwgc2hvdyB9KTsKCiAgcmV0dXJuIGgoT3ZlcmxheSwgewogICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdidXR0b24nLCBjbGFzc05hbWUsICFlbmFibGVkICYmICdkaXNhYmxlZCcpLAogICAgdGV4dDogY2FwdGlvbiwKICAgIHRvZ2dsZTogdHJ1ZSwKICAgIHN0YXRlLAogICAgb25QdXNoLAogICAgc3R5bGUsCiAgICBlbmFibGUsCiAgICB2aXNpYmxlLAogICAgLi4ucHJvcHMKICB9KTsKfTsKCmV4cG9ydCBjb25zdCBUb2dnbGUgPSAoeyBjbGFzc05hbWUsIGltYWdlcywgZm4sIHN0YXRlLCBzdHlsZSA9IHt9LCAuLi5wcm9wcyB9KSA9PiB7CiAgY29uc3QgcHVzaGVkID0gdXNlVHJrbChzdGF0ZSk7CiAgY29uc3QgaW1hZ2UgPSBpbWFnZXNbcHVzaGVkIHwgMF07CiAgc3RhdGUuc3Vic2NyaWJlKHZhbHVlID0+IHsKICAgIC8vY29uc29sZS5sb2coJ1RvZ2dsZWQ6JywgdmFsdWUpOwogIH0pOwogIHJldHVybiBoKEJ1dHRvbiwgewogICAgY2xhc3NOYW1lLAogICAgZm4sCiAgICBzdGF0ZSwKICAgIGltYWdlLAogICAgc3R5bGUsCiAgICAuLi5wcm9wcwogIH0pOwp9OwoKZXhwb3J0IGNvbnN0IEJ1dHRvbkdyb3VwID0gKHsgY2xhc3NOYW1lLCBpbmRleCA9IHRya2woKSwgY2hpbGRyZW4sIG9uQ2hhbmdlID0gKCkgPT4ge30sIC4uLnByb3BzIH0pID0+IHsKICBjb25zdCBhY3RpdmUgPSB1c2VUcmtsKGluZGV4KTsKICBjb25zdCBidXR0b25zID0gWwogICAgLi4uY2hpbGRyZW4ubWFwKChjb21wb25lbnQsIGkpID0+CiAgICAgIHR5cGVvZiBjb21wb25lbnQgPT0gJ2Z1bmN0aW9uJwogICAgICAgID8gY29tcG9uZW50KHsKICAgICAgICAgICAgLi4ucHJvcHMsCiAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcygnYnV0dG9uJywgY2xhc3NOYW1lKSwKICAgICAgICAgICAgc3RhdGU6IGFjdGl2ZSA9PT0gaSAvKiwKICAgICAgICAgICAgb25QdXNoKi8KICAgICAgICAgIH0pCiAgICAgICAgOiBjb21wb25lbnQKICAgICkKICBdOwoKICBmdW5jdGlvbiBvblB1c2goZXZlbnQpIHsKICAgIGxldCB7IGN1cnJlbnRUYXJnZXQsIHRhcmdldCB9ID0gZXZlbnQ7CgogICAgY29uc3QgdGFnID0gdGFyZ2V0Py50YWdOYW1lPy50b0xvd2VyQ2FzZSgpOwogICAgbGV0IHNpYmxpbmdDb3VudGVyID0gMDsKICAgIGlmKHRhZyA9PSAnaW1nJykgewogICAgICBkbyB7CiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7CiAgICAgICAgc2libGluZ0NvdW50ZXIrKzsKICAgICAgfSB3aGlsZSh0YXJnZXQpOwogICAgICBjb25zb2xlLmxvZygnQnV0dG9uR3JvdXAuZXZlbnQ6Jywgc2libGluZ0NvdW50ZXIpOwogICAgICBsZXQgaiA9IHNpYmxpbmdDb3VudGVyIC0gMTsKICAgICAgaWYoaiAhPSBhY3RpdmUpIHsKICAgICAgICBpbmRleChqKTsKICAgICAgICBvbkNoYW5nZShldmVudCk7CiAgICAgIH0KICAgIH0KICB9CgogIGNvbnNvbGUubG9nKCdCdXR0b25Hcm91cC5idXR0b25zOicsIGJ1dHRvbnMpOwoKICByZXR1cm4gaCgKICAgICdkaXYnLAogICAgewogICAgICBjbGFzc05hbWU6ICdidXR0b24tZ3JvdXAnLAogICAgICBvbk1vdXNlRG93bjogb25QdXNoCiAgICB9LAogICAgYnV0dG9ucwogICk7Cn07CgovKmh0bWxgCiAgPCR7T3ZlcmxheX0gY2xhc3NOYW1lPSJidXR0b24iIHRleHQ9JHtjYXB0aW9ufSBvblB1c2g9JHtzdGF0ZSA9PiAoc3RhdGUgPyBmbihzdGF0ZSkgOiB1bmRlZmluZWQpfSAkey4uLnByb3BzfSAvPgpgOwoqLwpleHBvcnQgY29uc3QgRmxvYXRpbmdQYW5lbCA9ICh7IGNoaWxkcmVuLCBjbGFzc05hbWUsIG9uU2l6ZSwgb25IaWRlLCBzdHlsZSA9IHt9LCAuLi5wcm9wcyB9KSA9PiB7CiAgY29uc3QgW3JlZiwgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH1dID0gdXNlRGltZW5zaW9ucygpOwoKICAvL2NvbnNvbGUubG9nKCdGbG9hdGluZ1BhbmVsLmRpbWVuc2lvbnM6JywgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0pOwoKICBjb25zdCBbc2l6ZSwgc2V0U2l6ZV0gPSB1c2VTdGF0ZShvblNpemUgPyBvblNpemUoKSA6IHt9KTsKICBjb25zdCBbaGlkZGVuLCBzZXRIaWRkZW5dID0gdXNlU3RhdGUob25IaWRlID8gb25IaWRlKCkgOiBmYWxzZSk7CgogIGxldCBub1VwZGF0ZSA9IGZhbHNlOwoKICBjb25zdCBoYXNPblNpemUgPSB0eXBlb2Ygb25TaXplID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9uU2l6ZS5zdWJzY3JpYmUgPT0gJ2Z1bmN0aW9uJzsKCiAgZnVuY3Rpb24gdXBkYXRlU2l6ZSh2YWx1ZSkgewogICAgaWYoIW5vVXBkYXRlKSBzZXRTaXplKHZhbHVlKTsKICB9CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGhhc09uU2l6ZSAmJiBvblNpemUuc3Vic2NyaWJlKHVwZGF0ZVNpemUpOwogICAgcmV0dXJuICgpID0+IGhhc09uU2l6ZSAmJiBvblNpemUudW5zdWJzY3JpYmUodXBkYXRlU2l6ZSk7CiAgfSwgW10pOwoKICBpZihoYXNPblNpemUpIHsKICAgIGNvbnN0IHRtcFNpemUgPSBvblNpemUoKTsKICAgIG5vVXBkYXRlID0gdHJ1ZTsKICAgIC8vIGlmKHRtcFNpemUud2lkdGggIT0gd2lkdGggfHwgdG1wU2l6ZS5oZWlnaHQgIT0gaGVpZ2h0KQogICAgaWYoaXNPYmplY3QodG1wU2l6ZSkgJiYgKHRtcFNpemUud2lkdGggPT09IHVuZGVmaW5lZCB8fCB0bXBTaXplLmhlaWdodCA9PT0gdW5kZWZpbmVkKSkgaWYgKHdpZHRoICE9PSB1bmRlZmluZWQgJiYgaGVpZ2h0ICE9PSB1bmRlZmluZWQpIG9uU2l6ZSh7IHdpZHRoLCBoZWlnaHQgfSk7CiAgICBub1VwZGF0ZSA9IGZhbHNlOwogIH0KICBjb25zdCBoYXNPbkhpZGUgPSB0eXBlb2Ygb25IaWRlID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9uSGlkZS5zdWJzY3JpYmUgPT0gJ2Z1bmN0aW9uJzsKCiAgZnVuY3Rpb24gdXBkYXRlSGlkZSh2YWx1ZSkgewogICAgc2V0SGlkZGVuKHZhbHVlKTsKICB9CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGhhc09uSGlkZSAmJiBvbkhpZGUuc3Vic2NyaWJlKHVwZGF0ZUhpZGUpOwogICAgcmV0dXJuICgpID0+IGhhc09uSGlkZSAmJiBvbkhpZGUudW5zdWJzY3JpYmUodXBkYXRlSGlkZSk7CiAgfSwgW10pOwoKICBpZihzaXplKSB7CiAgICBpZighaXNOYU4oK3NpemUud2lkdGgpKSBzdHlsZS53aWR0aCA9IGAke3NpemUud2lkdGh9cHhgOwogICAgaWYoIWlzTmFOKCtzaXplLmhlaWdodCkpIHN0eWxlLmhlaWdodCA9IGAke3NpemUuaGVpZ2h0fXB4YDsKICAgIC8vICAgIGNvbnNvbGUubG9nKCdGbG9hdGluZ1BhbmVsIHNpemU6Jywgc2l6ZSk7CiAgfQoKICBpZihoaWRkZW4pIHN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgogIHJldHVybiBoKAogICAgT3ZlcmxheSwKICAgIHsKICAgICAgcmVmLAogICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2Zsb2F0aW5nJywgaGlkZGVuICYmICdoaWRkZW4nLCBjbGFzc05hbWUpLAogICAgICAuLi5wcm9wcywKICAgICAgc3R5bGUKICAgIH0sCiAgICBjaGlsZHJlbgogICk7Cn07CgpleHBvcnQgY29uc3QgTGFiZWwgPSAoeyBjbGFzc05hbWUsIHRleHQsIHRpdGxlLCB0b29sdGlwLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkgPT4gewogIGlmKHR5cGVvZiB0aXRsZSA9PSAnc3RyaW5nJyAmJiB0aXRsZS5sZW5ndGggPiAwKSBwcm9wcy50aXRsZSA9IHRpdGxlOwogIGlmKHR5cGVvZiB0b29sdGlwID09ICdzdHJpbmcnICYmIHRvb2x0aXAubGVuZ3RoID4gMCkgcHJvcHNbJ2RhdGEtdG9vbHRpcCddID0gdG9vbHRpcDsKICByZXR1cm4gaCgnZGl2JywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2NhcHRpb24nLCBjbGFzc05hbWUpLCAuLi5wcm9wcyB9LCAodGV4dCA/IFt0ZXh0XSA6IFtdKS5jb25jYXQoY2hpbGRyZW4pKTsKfTsKCmV4cG9ydCBjb25zdCBEeW5hbWljTGFiZWwgPSAoeyBjYXB0aW9uLCB0aXRsZSwgY2hpbGRyZW4sIC4uLnByb3BzIH0pID0+IHsKICBjb25zdCBbdGV4dCwgc2V0VGV4dF0gPSB1c2VTdGF0ZShjYXB0aW9uKCkpOwoKICBjYXB0aW9uLnN1YnNjcmliZSh2YWx1ZSA9PiBzZXRUZXh0KHZhbHVlKSk7CgogIHJldHVybiBoKExhYmVsLCB7IC4uLnByb3BzLCB0ZXh0IH0sIFtdKTsKfTsKCmV4cG9ydCBjb25zdCBJdGVtID0gKHsgY2xhc3NOYW1lID0gJ2l0ZW0nLCB0aXRsZSwgdG9vbHRpcCwgbGFiZWwsIGljb24sIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSA9PiB7CiAgaWYodHlwZW9mIHRpdGxlID09ICdzdHJpbmcnICYmIHRpdGxlLmxlbmd0aCA+IDApIHByb3BzLnRpdGxlID0gdGl0bGU7CiAgaWYodHlwZW9mIHRvb2x0aXAgPT0gJ3N0cmluZycgJiYgdG9vbHRpcC5sZW5ndGggPiAwKSBwcm9wc1snZGF0YS10b29sdGlwJ10gPSB0b29sdGlwOwogIC8vY29uc29sZS5sb2coJ0l0ZW0nLCBwcm9wcyk7CiAgcmV0dXJuIGgoT3ZlcmxheSwgeyBjbGFzc05hbWUsIC4uLnByb3BzIH0sIGgoTGFiZWwsIHsgdGV4dDogaWNvbiB9LCBsYWJlbCkpOwp9OwoKZXhwb3J0IGNvbnN0IEljb24gPSAoeyBjbGFzc05hbWUgPSAnaWNvbicsIGNhcHRpb24sIGltYWdlLCAuLi5wcm9wcyB9KSA9PiBoKENvbnRhaW5lciwgeyBjbGFzc05hbWUsIC4uLnByb3BzIH0sIGgoJ2ltZycsIHsgc3JjOiBpbWFnZSB9KSk7CgpleHBvcnQgY29uc3QgUHJvZ3Jlc3MgPSAoeyBjbGFzc05hbWUsIHBlcmNlbnQsIC4uLnByb3BzIH0pID0+CiAgaCgKICAgIE92ZXJsYXksCiAgICB7CiAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcygncHJvZ3Jlc3MnLCAnY2VudGVyJywgY2xhc3NOYW1lKSwKICAgICAgdGV4dDogcGVyY2VudCArICclJywKICAgICAgc3R5bGU6IHsKICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywKICAgICAgICB3aWR0aDogJzEwMCUnLAogICAgICAgIGhlaWdodDogJzEuNWVtJywKICAgICAgICBib3JkZXI6ICcxcHggc29saWQgYmxhY2snLAogICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgekluZGV4OiAnOTknCiAgICAgIH0KICAgIH0sCiAgICBoKCdkaXYnLCB7CiAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcygncHJvZ3Jlc3MtYmFyJywgJ2ZpbGwnKSwKICAgICAgc3R5bGU6IHsKICAgICAgICB3aWR0aDogcGVyY2VudCArICclJywKICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgICBsZWZ0OiAnMHB4JywKICAgICAgICB0b3A6ICcwcHgnLAogICAgICAgIHpJbmRleDogJzk4JwogICAgICB9CiAgICB9KQogICk7CgovKmV4cG9ydCBjb25zdCBCcm93c2VJY29uID0gKHByb3BzKSA9PiBodG1sYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjQwIiB3aWR0aD0iNDAiIHZpZXdCb3g9IjEzMSAtMTMxIDczMS40MjkgNzMxLjQyOSI+CiAgPHBhdGggZD0iTTI0MC43MTQgMzkuNDE0djM5MC42aDQzMi40bDc5LjYtMjQ0LjFoLTQzNS42bC00OC44IDE0NS43IDMzLjEtMTcwLjJoMzc4di00OC44aC0yNDMuNGwtNDcuMi03My4yeiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4KYDsqLwoKZXhwb3J0IGNvbnN0IFNjaGVtYXRpY0ljb24gPSBwcm9wcyA9PiBodG1sYAogIDxzdmcgdmlld0JveD0iMCAwIDQwIDQwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgPGRlZnMgLz4KICAgIDxwYXRoCiAgICAgIGQ9Ik0zMi4wMiAzLjU5NGMtMjEuMzQ3IDI0LjI3LTEwLjY3MyAxMi4xMzUgMCAwem0zLjQzOSAyNi40OTRhMi43MjcgMi43MjcgMCAwMS0uNyAxLjY3NWwtNy4xNjUgNy41MDVhMi4zNzUgMi4zNzUgMCAwMS0xLjcwNi43MzJIMTIuNzY2Yy0zLjMyIDAtNS45NzgtMi44LTUuOTc4LTYuMjQ1VjYuMjVjMC0xLjczNS42NzUtMy4zMDIgMS43NTQtNC40MzNDOS42MjkuNzAyIDExLjEwOCAwIDEyLjc2NiAwaDE2LjcwOEE1Ljg2IDUuODYgMCAwMTMzLjcgMS44MTcgNi40MjIgNi40MjIgMCAwMTM1LjQ2IDYuMjV6IgogICAgICBmaWxsPSIjZmZmIgogICAgLz4KICAgIDxwYXRoCiAgICAgIGQ9Ik0zMy4wNzkgNi4yNWEzLjgyIDMuODIgMCAwMC0xLjA1OS0yLjY1NiAzLjQ4MSAzLjQ4MSAwIDAwLTIuNTQ3LTEuMDkxSDEyLjc2NWMtLjk2OCAwLTEuODY4LjM3NS0yLjUzOCAxLjA5QTMuNzg1IDMuNzg1IDAgMDA5LjE3NSA2LjI1djI3LjUwNWMwIDIuMDYgMS42MTIgMy43NDIgMy41OSAzLjc0MmgxMy4xNDNWMjkuODJoNy4xN3ptMi4zOCAyMy44MzhhMi43MjggMi43MjggMCAwMS0uNyAxLjY3NWwtNy4xNjUgNy41MDVhMi4zNzUgMi4zNzUgMCAwMS0xLjcwNi43MzNIMTIuNzY2Yy0zLjMxOSAwLTUuOTc4LTIuODAyLTUuOTc4LTYuMjQ1VjYuMjVjMC0xLjczNS42NzUtMy4zMDMKICAgIDEuNzU0LTQuNDM0QzkuNjMuNzAyIDExLjEwOCAwIDEyLjc2NiAwaDE2LjcwOEE1Ljg2IDUuODYgMCAwMTMzLjcgMS44MTdhNi40MjEgNi40MjEgMCAwMTEuNzYgNC40MzR6IgogICAgICBmaWxsPSIjNDQ0NDQzIgogICAgLz4KICAgIDxwYXRoIGQ9Ik0zMy4wNzQgMjQuODIxSDQuNTM1di0xNy41aDI4LjUzOXoiIGZpbGw9IiNiNGIzYjMiIC8+CiAgICA8cGF0aAogICAgICBkPSJNMTMuNjk1IDE4LjgxMmMuMjg3LjM3MS41MDEuNzAxLjUwMSAxLjE5IDAgMS4wNzUtLjgxNyAxLjYyMS0xLjgwNiAxLjYyMUg5LjIzNGMtLjU0NiAwLTEuMDE5LS4xLTEuNDUtLjQ2LS4zODgtLjMxNS0uNjc0LS44MzEtLjY3NC0xLjMzNCAwLS40NTguMjU4LS44Ni43Ni0uODYuNDE2IDAgLjY3NS4zNDMuNjc1LjczIDAgLjQzMi4yMjkuNDkuNjMxLjQ5aDMuMTEzYy4xMTUgMCAuNDcyLjA0My40NzItLjE3NSAwLS4xMTItLjItLjMyOC0uMjU3LS40MTVsLTQuOTIxLTYuMzI1Yy0uMy0uMzg3LS40NzMtLjY3NS0uNDczLTEuMTc4IDAtLjU3NC4yNzMtMS4wNjIuNzYtMS4zNzUuNDAxLS4yNi43MzEtLjI2IDEuMTktLjI2aDMuMDQzYy41NDUgMCAxLjAwMy4xMTUgMS40Mi40NzUuMzc1LjMyOC42NzUuODYuNjc1IDEuMzYyIDAgLjQ1OS0uMjMuODMxLS43NDcuODMxLS40MyAwLS42OS0uMjcyLS42OS0uNjczIDAtLjQ4OC0uMjQyLS41Ni0uNjg3LS41Nkg5LjAzM2MtLjE1OCAwLS40ODgtLjA0My0uNDg4LjIgMCAuMTMuMTU4LjMwMi4yMTQuMzg4bDQuOTM3IDYuMzI3em00LjkzMyAyLjgxMWMtMS4wNzcgMC0xLjY5My0uNDMtMi4xNTMtMS4zNjRsLTEuMzE5LTIuNjY3Yy0uMjQ1LS40ODgtLjM4Ny0uOTQ2LS4zODctMS41MDYgMC0uNjMyLjExMi0xLjAyLjQtMS41OTNsMS4zMi0yLjY1NWMuNDg4LS45ODkgMS4xMDYtMS4zNzYgMi4yMS0xLjM3NmgyLjQzN2MuMzE2IDAgLjcyLjE3MS43Mi43MTggMCAuNTE2LS4zODkuNzE3LS43MTkuNzE3aC0yLjM5NWMtLjYxNyAwLS43MTcuMDU3LS45OS42MDJsLTEuMjUgMi40OTdjLS4xODUuMzg2LS4zLjY0NS0uMyAxLjA5IDAgLjQwMi4xMy42NDUuMy45OWwxLjIyIDIuNDhjLjI4OC41ODguNDMzLjYzMyAxLjA3NS42MzNoMi4zNGMuMzE1IDAgLjcyLjE3Mi43Mi43MTcgMCAuNTE2LS4zOS43MTctLjcyLjcxN3ptNi4xNy00Ljg2NHY0LjE0N2MwIC40Ni0uMi43MTctLjcxNy43MTdzLS43MTctLjI1Ny0uNzE3LS43MTd2LTkuNzI4YzAtLjQ1OS4yLS43MTcuNzE3LS43MTcuNTE3IDAgLjcxNy4yNTguNzE3LjcxN3Y0LjE0Nmg0LjIxOHYtNC4xNDZjMC0uNDU5LjItLjcxNy43MTctLjcxN3MuNzE3LjI1OC43MTcuNzE3djkuNzI4YzAgLjQ2LS4yMDEuNzE3LS43MTcuNzE3cy0uNzE3LS4yNTctLjcxNy0uNzE3di00LjE0N3oiCiAgICAgIGZpbGw9IiNiZjI3MmYiCiAgICAvPgogIDwvc3ZnPgpgOwoKZXhwb3J0IGNvbnN0IEJvYXJkSWNvbiA9IHByb3BzID0+IGh0bWxgCiAgPHN2ZyB2aWV3Qm94PSIwIDAgNDAgNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZGVmcyAvPgogICAgPHBhdGgKICAgICAgZD0iTTMyLjAyIDMuNTk0Yy0yMS4zNDcgMjQuMjctMTAuNjczIDEyLjEzNSAwIDB6bTMuNDM5IDI2LjQ5NGEyLjcyNyAyLjcyNyAwIDAxLS43IDEuNjc1bC03LjE2NSA3LjUwNWEyLjM3NSAyLjM3NSAwIDAxLTEuNzA2LjczMkgxMi43NjZjLTMuMzIgMC01Ljk3OC0yLjgtNS45NzgtNi4yNDVWNi4yNWMwLTEuNzM1LjY3NS0zLjMwMiAxLjc1NC00LjQzM0M5LjYyOS43MDIgMTEuMTA4IDAgMTIuNzY2IDBoMTYuNzA4QTUuODYgNS44NiAwIDAxMzMuNyAxLjgxNyA2LjQyMiA2LjQyMiAwIDAxMzUuNDYgNi4yNXoiCiAgICAgIGZpbGw9IiNmZmYiCiAgICAvPgogICAgPHBhdGgKICAgICAgZD0iTTMzLjA3OSA2LjI1YTMuODIgMy44MiAwIDAwLTEuMDU5LTIuNjU2IDMuNDgxIDMuNDgxIDAgMDAtMi41NDgtMS4wOTFIMTIuNzY1Yy0uOTY4IDAtMS44NjguMzc0LTIuNTM4IDEuMDlBMy43ODUgMy43ODUgMCAwMDkuMTc1IDYuMjV2MjcuNTA1YzAgMi4wNiAxLjYxMiAzLjc0MiAzLjU5MSAzLjc0MkgyNS45MVYyOS44Mmg3LjE3VjYuMjV6bTIuMzggMjMuODM3YTIuNzI4IDIuNzI4IDAgMDEtLjcgMS42NzVsLTcuMTY1IDcuNTA1YTIuMzc1IDIuMzc1IDAgMDEtMS43MDcuNzMzSDEyLjc2NWMtMy4zMTkgMC01Ljk3OC0yLjgwMS01Ljk3OC02LjI0NVY2LjI1YTYuNDEgNi40MSAwIDAxMS43NTQtNC40MzRDOS42My43MDEgMTEuMTA3IDAgMTIuNzY1IDBoMTYuNzA3QTUuODYgNS44NiAwIDAxMzMuNyAxLjgxNmE2LjQyMSA2LjQyMSAwIDAxMS43NTkgNC40MzR2MjMuODM3eiIKICAgICAgZmlsbD0iIzQ0NDQ0MyIKICAgIC8+CiAgICA8cGF0aCBkPSJNMzMuMDc5IDI0Ljc5NUg0LjU0di0xNy41SDMzLjA4djE3LjV6IiBmaWxsPSIjYjRiM2IzIiAvPgogICAgPHBhdGgKICAgICAgZD0iTTguNzM4IDIwLjIwNmgyLjYwOGMxLjA0NCAwIDEuNjUzLS40NjIgMS42NTMtMS41NjUgMC0xLjIxNy0uMzMzLTEuOS0xLjY1My0xLjlIOC43Mzd2My40NjZ6bTAtNC45MTRoMi42MDhjMS4wNDQgMCAxLjY1My0uNDY1IDEuNjUzLTEuNTY2IDAtMS4yMTctLjMzMy0xLjg5OS0xLjY1My0xLjg5OUg4LjczN3YzLjQ2NXptLTEuNDUtNC45MTVoNC4wNThjMi4xMzIgMCAzLjEwMyAxLjMwNSAzLjEwMyAzLjM1IDAgLjg0LS4xODggMS42MDgtLjk1NiAyLjI5LjgyNC43ODIuOTU2IDEuNTUuOTU2IDIuNjI0IDAgMS45LTEuMjYxIDMuMDE0LTMuMTAzIDMuMDE0SDcuMjg3VjEwLjM3N3ptMTAuMTUgMy43MTJoMy4yMTdjLjQwNiAwIDEuMDQ1LS4wMjkgMS4wNDUtLjYwOXYtMWMwLS41OC0uNTk1LS42NTMtMS4wMy0uNjUzaC0zLjIzMnYyLjI2MnptMCA2Ljg0MmMwIC40NjMtLjIwNC43MjQtLjcyNS43MjQtLjUyMyAwLS43MjYtLjI2MS0uNzI2LS43MjRWMTAuMzc3aDQuODcyYzEuMTQ2IDAgMi4yOTEuODEzIDIuMjkxIDIuMTAzdjFjMCAxLjM2NC0xLjEzIDIuMDU5LTIuMjkxIDIuMDU5aC0xLjMzNGwzLjI2MSA0LjY2OWMuMTU5LjIxNi4zNjMuNDkuMzYzLjc2NyAwIC40MDUtLjMzNC42OC0uNzM5LjY4LS4yOSAwLS40NzktLjE3My0uNjM3LS40MDVsLTQuMDAyLTUuNzExaC0uMzMzdjUuMzkyem05LjYzLS43MjVoLjI3NmMuNjEgMCAuNzU0LS4wNzIgMS4wMTUtLjYwN2wxLjI3NS0yLjU4MmMuMTYyLS4zMzMuMjc1LS41OC4yNzUtLjk0MyAwLS40OTMtLjE1OS0uNzY4LS4zNjEtMS4xODhsLTEuMjA0LTIuNDVjLS4zMDUtLjYyNC0uNDM0LS42MDktMS4xLS42MDloLS4xNzV2OC4zOHpNMjUuNjIgMTEuODNoLS41MzdjLS40OCAwLS44ODQtLjE3NS0uODg0LS43MjUgMC0uNTIzLjM5MS0uNzI1Ljg0LS43MjVoMi40MjFjMS4xMzEgMCAxLjY5NS40NjIgMi4xODggMS40NWwxLjI3NyAyLjU1Yy4yODguNTk1LjQzNSAxLjAxNS40MzUgMS42ODIgMCAuNTc5LS4xNTkgMS4wNzMtLjQyIDEuNTk0bC0xLjMyMSAyLjYzN2MtLjUwNSAxLjAzMi0xLjE2IDEuMzYzLTIuMjkgMS4zNjNoLTIuNDA0Yy0uMzc5IDAtLjcyNS0uMjAxLS43MjUtLjcyNSAwLS41Mi4zNDYtLjcyMy43MjUtLjcyM2guNjk2di04LjM4eiIKICAgICAgZmlsbD0iIzQyYWIzZCIKICAgIC8+CiAgPC9zdmc+CmA7CgpleHBvcnQgY29uc3QgTGlicmFyeUljb24gPSBwcm9wcyA9PiBodG1sYCA8c3ZnIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8Zz4KICAgIDxwYXRoCiAgICAgIGQ9Ik0zLjM5NyA2LjQ4OHYyNi45MzhjMCAzLjA4NSAyLjEzIDUuNjc1IDUuMDEzIDYuNDA3Vi4xMDVhNi41NjEgNi41NjEgMCAwMC01LjAxMiA2LjM4TTMwLjEyMi0uMDk2SDExLjY0NXY0MC4xMDVoMTguNDc3YTYuNiA2LjYgMCAwMDYuNTktNi41ODFWNi40ODhhNi41ODIgNi41ODIgMCAwMC02LjU5LTYuNTgzIgogICAgICBmaWxsPSIjNDQ0NDQzIgogICAgLz4KICAgIDxwYXRoIGQ9Ik0zMC4zMTMgMTkuNzkxaC0xMi41di0xMi41aDEyLjV2MTIuNXoiIGZpbGw9IiNkZWRkMDAiIC8+CiAgPC9nPgo8L3N2Zz5gOwoKZXhwb3J0IGNvbnN0IEdDb2RlSWNvbiA9IHByb3BzID0+IGh0bWxgPHN2ZyB2aWV3Qm94PSIwIDAgNDAgNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGgKICAgIGQ9Ik0zMi4wMiAzLjU5NGMtMjEuMzQ3IDI0LjI3LTEwLjY3MyAxMi4xMzUgMCAwem0zLjQzOSAyNi40OTRhMi43MjcgMi43MjcgMCAwMS0uNyAxLjY3NWwtNy4xNjUgNy41MDVhMi4zNzUgMi4zNzUgMCAwMS0xLjcwNi43MzJIMTIuNzY2Yy0zLjMyIDAtNS45NzgtMi44LTUuOTc4LTYuMjQ1VjYuMjVjMC0xLjczNS42NzUtMy4zMDIgMS43NTQtNC40MzNDOS42MjkuNzAyIDExLjEwOCAwIDEyLjc2NiAwaDE2LjcwOEE1Ljg2IDUuODYgMCAwMTMzLjcgMS44MTdhNi40MjIgNi40MjIgMCAwMTEuNzYgNC40MzN6IgogICAgZmlsbD0iI2ZmZiIKICAvPgogIDxwYXRoCiAgICBkPSJNMzMuMDc5IDYuMjVjLTIyLjA1MyAyMi41LTExLjAyNiAxMS4yNSAwIDB6bTIuMzggMjMuODM3YTIuNzI4IDIuNzI4IDAgMDEtLjcgMS42NzVsLTcuMTY1IDcuNTA1YTIuMzc1IDIuMzc1IDAgMDEtMS43MDcuNzMzSDEyLjc2NWMtMy4zMTkgMC01Ljk3OC0yLjgwMS01Ljk3OC02LjI0NVY2LjI1YTYuNDEgNi40MSAwIDAxMS43NTQtNC40MzRDOS42My43MDEgMTEuMTA3IDAgMTIuNzY1IDBoMTYuNzA3QTUuODYgNS44NiAwIDAxMzMuNyAxLjgxNmE2LjQyMSA2LjQyMSAwIDAxMS43NTkgNC40MzR6IgogICAgZmlsbD0iI2ZmZiIKICAvPgogIDxwYXRoCiAgICBkPSJNMzMuMDc5IDYuMjVhMy44MiAzLjgyIDAgMDAtMS4wNTktMi42NTYgMy40ODEgMy40ODEgMCAwMC0yLjU0OC0xLjA5MUgxMi43NjVjLS45NjggMC0xLjg2OC4zNzQtMi41MzggMS4wOUEzLjc4NSAzLjc4NSAwIDAwOS4xNzUgNi4yNXYyNy41MDVjMCAyLjA2IDEuNjEyIDMuNzQyIDMuNTkxIDMuNzQySDI1LjkxVjI5LjgyaDcuMTdWNi4yNXptMi4zOCAyMy44MzdhMi43MjggMi43MjggMCAwMS0uNyAxLjY3NWwtNy4xNjUgNy41MDVhMi4zNzUgMi4zNzUgMCAwMS0xLjcwNy43MzNIMTIuNzY1Yy0zLjMxOSAwLTUuOTc4LTIuODAxLTUuOTc4LTYuMjQ1VjYuMjVhNi40MSA2LjQxIDAgMDExLjc1NC00LjQzNEM5LjYzLjcwMSAxMS4xMDcgMCAxMi43NjUgMGgxNi43MDdBNS44NiA1Ljg2IDAgMDEzMy43IDEuODE2YTYuNDIxIDYuNDIxIDAgMDExLjc1OSA0LjQzNHYyMy44Mzd6IgogICAgZmlsbD0iIzQ0NDQ0MyIKICAvPgogIDxwYXRoCiAgICBkPSJNNi43NTcgMjIuNzVjLS41ODMtLjU4My0uNjI0LTEuMDQtLjYyNC02Ljg3cy4wNDEtNi4yODguNjI0LTYuODdjLjYwNi0uNjA2IDEuMDQxLS42MjUgMTQuMzY2LS42MjVzMTMuNzYuMDE4IDE0LjM2Ni42MjRjLjU4My41ODMuNjI0IDEuMDQxLjYyNCA2Ljg3IDAgNS44My0uMDQxIDYuMjg4LS42MjQgNi44NzEtLjYwNi42MDYtMS4wNDEuNjI1LTE0LjM2Ni42MjVzLTEzLjc2LS4wMTktMTQuMzY2LS42MjV6IgogICAgZmlsbD0iI2ZmZiIKICAvPgogIDxwYXRoCiAgICBkPSJNNi43NTcgMjIuNzVjLS41ODMtLjU4My0uNjI0LTEuMDQtLjYyNC02Ljg3cy4wNDEtNi4yODguNjI0LTYuODdjLjYwNi0uNjA2IDEuMDQxLS42MjUgMTQuMzY2LS42MjVzMTMuNzYuMDE4IDE0LjM2Ni42MjRjLjU4My41ODMuNjI0IDEuMDQxLjYyNCA2Ljg3IDAgNS44My0uMDQxIDYuMjg4LS42MjQgNi44NzEtLjYwNi42MDYtMS4wNDEuNjI1LTE0LjM2Ni42MjVzLTEzLjc2LS4wMTktMTQuMzY2LS42MjV6bTUuNjIyLTUuNzc3YzAtMS4wNDEtLjEyMi0xLjQwNi0uNDY5LTEuNDA2LS4zMTIgMC0uNDY4LjMxMy0uNDY4LjkzNyAwIDEuMDIyLS40NjMgMS4xOTctMS4zODUuNTIyLS43MjQtLjUyOS0uNzM2LTIuMDY3LS4wMjEtMi41OS4zMTQtLjIzLjkyOC0uMzIzIDEuNDQ0LS4yMi43NjQuMTUzLjg5OS4wODEuODk5LS40ODMgMC0uNTc5LS4xODEtLjY2NC0xLjQwNi0uNjY0LS45ODkgMC0xLjU5LjE4NS0yLjAzLjYyNS0uNDQuNDQtLjYyNCAxLjA0LS42MjQgMi4wMyAwIDEuODkxLjc2MyAyLjY1NCAyLjY1NCAyLjY1NGgxLjQwNnptNC45OTYuNzQxYzAtLjU2NC0uMTM0LS42MzYtLjg5OC0uNDgzLTEuMTcyLjIzNC0xLjk5LS4zODUtMS45OS0xLjUwNyAwLTEuMTIzLjgxOC0xLjc0MiAxLjk5LTEuNTA3Ljc2NC4xNTIuODk4LjA4Ljg5OC0uNDg0IDAtLjU3MS0uMTgyLS42NjQtMS4zMDctLjY2NC0xLjgyNyAwLTIuNzUyLjkxLTIuNzUyIDIuNzA5IDAgMS44MzMuNzgzIDIuNiAyLjY1NCAyLjYgMS4yMjUgMCAxLjQwNS0uMDg1IDEuNDA1LS42NjR6bTUuMjExLS4wMTVjLjk3NC0uOTE1Ljk5Ny0yLjg5My4wNDQtMy45MDctLjkxNS0uOTc0LTIuODkzLS45OTYtMy45MDctLjA0NC0uOTc0LjkxNS0uOTk3IDIuODkzLS4wNDQgMy45MDcuOTE1Ljk3NSAyLjg5My45OTcgMy45MDcuMDQ0em0tMi42MDMtLjU5Yy0xLjE4NS0uNDM5LTEuMTA0LTIuNTQuMTEtMi44NTcuODQ0LS4yMiAxLjg1Ni4yMzMgMi4wMzMuOTEuMzcyIDEuNDIzLS43NjUgMi40NTYtMi4xNDMgMS45NDZ6bTcuOTEyLjU5Yy45NzUtLjkxNS45OTctMi44OTMuMDQ0LTMuOTA3LS41MjgtLjU2Mi0xLjAxNC0uNzIzLTIuMTg2LS43MjNoLTEuNTA3VjE4LjM3OGgxLjQ2M2MxLjA3MyAwIDEuNjU3LS4xODEgMi4xODYtLjY3OXptLTIuNzEyLTEuOTc1di0xLjc4NmwuODU5LjIxMmMxLjEzNi4yODEgMS40MDUuNTgyIDEuNDA1IDEuNTc0IDAgLjk5MS0uMjY5IDEuMjkyLTEuNDA1IDEuNTczbC0uODYuMjEyem03LjgwNyAyLjE4NmMwLS4zMzktLjM0Ny0uNDY5LTEuMjQ5LS40NjktMS4wNCAwLTEuMjUtLjEwNC0xLjI1LS42MjQgMC0uNTA2LjIxLS42MjUgMS4wOTQtLjYyNS43NjMgMCAxLjA5My0uMTQxIDEuMDkzLS40NjggMC0uMzI4LS4zMy0uNDY5LTEuMDkzLS40NjktLjg4NSAwLTEuMDkzLS4xMTktMS4wOTMtLjYyNCAwLS41MDYuMjA4LS42MjUgMS4wOTMtLjYyNS43NjMgMCAxLjA5My0uMTQxIDEuMDkzLS40NjggMC0uMzU0LS4zODItLjQ2OS0xLjU2MS0uNDY5aC0xLjU2MlYxOC4zNzhoMS43MThjMS4zMTggMCAxLjcxNy0uMTA5IDEuNzE3LS40Njh6IgogICAgZmlsbD0iIzU5ZiIKICAvPgo8L3N2Zz4gYDsKCmV4cG9ydCBjb25zdCBGaWxlSWNvbnMgPSB7CiAgc2NoOiBTY2hlbWF0aWNJY29uLAogIGJyZDogQm9hcmRJY29uLAogIGxicjogTGlicmFyeUljb24sCiAgbmdjOiBHQ29kZUljb24KfTsKCmV4cG9ydCBjb25zdCBDb25kaXRpb25hbCA9ICh7IGluaXRpYWxTdGF0ZSwgY29tcG9uZW50ID0gRnJhZ21lbnQsIGNsYXNzTmFtZSwgY2hpbGRyZW4sIHNpZ25hbCwgLi4ucHJvcHMgfSkgPT4gewogIGNvbnN0IFtzaG93LCBzZXRTaG93bl0gPSB1c2VTdGF0ZShpbml0aWFsU3RhdGUgIT09IHVuZGVmaW5lZCA/IGluaXRpYWxTdGF0ZSA6IHNpZ25hbCgpKTsKCiAgaWYoc2lnbmFsKSBzaWduYWwuc3Vic2NyaWJlKHZhbHVlID0+IHNldFNob3duKHZhbHVlKSk7CgogIHJldHVybiBzaG93ID8gaChjb21wb25lbnQsIHsgY2xhc3NOYW1lLCAuLi5wcm9wcyB9LCBjaGlsZHJlbikgOiBoKEZyYWdtZW50LCB7fSk7Cn07CgpleHBvcnQgY29uc3QgU2hvd0hpZGUgPSAoeyBpbml0aWFsU3RhdGUsIGNvbXBvbmVudCwgY2xhc3NOYW1lLCBjaGlsZHJlbiwgc2lnbmFsLCAuLi5wcm9wcyB9KSA9PiB7CiAgY29uc3QgW2hpZGRlbiwgc2V0SGlkZGVuXSA9IHVzZVN0YXRlKGluaXRpYWxTdGF0ZSAhPT0gdW5kZWZpbmVkID8gaW5pdGlhbFN0YXRlIDogIXNpZ25hbCgpKTsKCiAgaWYoc2lnbmFsKSBzaWduYWwuc3Vic2NyaWJlKHZhbHVlID0+IHNldEhpZGRlbighdmFsdWUpKTsKCiAgcmV0dXJuIGgoY29tcG9uZW50LCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjbGFzc05hbWUsIGhpZGRlbiAmJiAnaGlkZGVuJyksIC4uLnByb3BzIH0sIGNoaWxkcmVuKTsKfTsKCmV4cG9ydCBjb25zdCBFZGl0Qm94ID0gKHsgdmFsdWUgPSAnJywgdHlwZSA9ICdkaXYnLCBjbGFzc05hbWUsIGhpZGRlbiA9IGZhbHNlLCBjdXJyZW50LCBmb2N1cywgLi4ucHJvcHMgfSkgPT4gewogIGlmKHR5cGVvZiBjdXJyZW50ID09ICdmdW5jdGlvbicpIHByb3BzLnJlZiA9IGlucHV0ID0+IGN1cnJlbnQoaW5wdXQpOwoKICBjb25zdCBvdXRlclByb3BzID0geyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2xhc3NOYW1lLCBoaWRkZW4gJiYgJ2hpZGRlbicpIH07CgogIGlmKHR5cGUgPT0gJ2Zvcm0nKSBvdXRlclByb3BzLm9uU3VibWl0ID0gZXZlbnQgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgcmV0dXJuIGgoCiAgICB0eXBlLAogICAgb3V0ZXJQcm9wcywKICAgIGgoJ2lucHV0JywgewogICAgICB0eXBlOiAndGV4dCcsCiAgICAgIHZhbHVlLAogICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2xhc3NOYW1lLCBoaWRkZW4gJiYgJ2hpZGRlbicpLAogICAgICAuLi5wcm9wcwogICAgfSkKICApOwp9OwoKZXhwb3J0IGNvbnN0IEZpbGUgPSAoeyBsYWJlbCwgbmFtZSwgZGVzY3JpcHRpb24sIGksIGtleSwgY2xhc3NOYW1lID0gJ2ZpbGUnLCBvblB1c2gsIHNpZ25hbCwgZGF0YSwgZG9jLCAuLi5wcm9wcyB9KSA9PiB7CiAgLy9jb25zb2xlLmxvZygnRmlsZScsIHByb3BzKTsKICBjb25zdCBbbG9hZGVkLCBzZXRMb2FkZWRdID0gdXNlU3RhdGUoTmFOKTsKICBpZihzaWduYWwpIHNpZ25hbC5zdWJzY3JpYmUoZGF0YSA9PiBzZXRMb2FkZWQoZGF0YS5wZXJjZW50KSk7CiAgb25QdXNoID0KICAgIG9uUHVzaCB8fAogICAgKGFzeW5jIHN0YXRlID0+IHsKICAgICAgYXdhaXQgbG9hZChuYW1lKTsKICAgIH0pOwogIGxldCBpZCA9IGtleSB8fCBpOwogIGxldCBpY29uUHJvcHMgPSB7IHN0eWxlOiB7IG1pbldpZHRoOiAnMjBweCcgLyosIHdpZHRoOiAnNDBweCcsIGhlaWdodDogJzQwcHgnKi8gfSB9OwogIGxldCBpY29uID0gL2JyZCQvaS50ZXN0KGlkICsgY2xhc3NOYW1lKQogICAgPyBoKEJvYXJkSWNvbiwgeyAuLi5pY29uUHJvcHMsIGNsYXNzTmFtZTogJ2ljb24nIH0pCiAgICA6IC9zY2gkL2kudGVzdChpZCArIGNsYXNzTmFtZSkKICAgID8gaChTY2hlbWF0aWNJY29uLCB7IC4uLmljb25Qcm9wcywgY2xhc3NOYW1lOiAnaWNvbicgfSkKICAgIDogL2xiciQvaS50ZXN0KGlkICsgY2xhc3NOYW1lKQogICAgPyBoKExpYnJhcnlJY29uLCB7IC4uLmljb25Qcm9wcywgY2xhc3NOYW1lOiAnaWNvbicgfSkKICAgIDogdW5kZWZpbmVkOwogIGxldCBmaWxlRXh0ID0gcGF0aC5leHRuYW1lKG5hbWUpLnJlcGxhY2UoL15cLi8sICcnKTsKICBpZighaWNvbiAmJiBGaWxlSWNvbnNbZmlsZUV4dF0pIGljb24gPSBoKEZpbGVJY29uc1tmaWxlRXh0XSwgeyAuLi5pY29uUHJvcHMsIGNsYXNzTmFtZTogJ2ljb24nIH0pOwogIGlmKGlkKSB7CiAgICBpZCA9IGlzTmFOKCtpZCkgPyBpIDogaWQ7CiAgICBpZCA9ICdmaWxlLScgKyBpZDsKICB9CiAgbGFiZWwgPSBsYWJlbC5yZXBsYWNlKC8oW15cc10pLShbXlxzXSkvZywgJyQxICQyJyk7CiAgLy9pZihpY29uKSBsYWJlbCA9IGxhYmVsLnJlcGxhY2UoL1wuW14uXSokLywgJycpOwogIGxhYmVsID0gaChMYWJlbCwgeyB0ZXh0OiB3b3JkV3JhcChsYWJlbCwgNTAsICdcbicpIH0pOwogIGlmKGRlc2NyaXB0aW9uKSB7CiAgICBsZXQgcyA9IG11bHRpUGFyYWdyYXBoV29yZFdyYXAoc3RyaXBYTUwoZGVjb2RlSFRNTEVudGl0aWVzKGRlc2NyaXB0aW9uKSksIDYwLCAnXG4nKTsKICAgIGxldCBkID0gcy5zcGxpdCgvXG4vZykuc2xpY2UoMCwgMSk7CiAgICBsYWJlbCA9IGgoJ2RpdicsIHt9LCBbCiAgICAgIGxhYmVsLAogICAgICBoKAogICAgICAgICdkaXYnLAogICAgICAgIHsgY2xhc3NOYW1lOiAnZGVzY3JpcHRpb24nIH0sCiAgICAgICAgZC5tYXAobGluZSA9PiBoKCdwcmUnLCB7IGNsYXNzTmFtZTogJ2Rlc2NyaXB0aW9uJyB9LCBbbGluZV0pKQogICAgICApCiAgICBdKTsKICB9CiAgaWNvbiA9IGgoJ2RpdicsIHsgLi4uaWNvblByb3BzLCBjbGFzc05hbWU6ICdpY29uJyB9LCBpY29uKTsKICByZXR1cm4gaCgKICAgIEl0ZW0sCiAgICB7IGNsYXNzTmFtZSwgaWQsICdkYXRhLWZpbGVuYW1lJzogbmFtZSwgbGFiZWwsIG9uUHVzaCwgaWNvbiwgLi4ucHJvcHMgfSwKICAgIGgoUHJvZ3Jlc3MsIHsKICAgICAgY2xhc3NOYW1lOiAhaXNOYU4obG9hZGVkKSA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nLAogICAgICBwZXJjZW50OiBsb2FkZWQKICAgIH0pCiAgKTsKfTsKCmV4cG9ydCBjb25zdCBDaG9vc2VyID0gKHsgY2xhc3NOYW1lID0gJ2xpc3QnLCBpdGVtQ2xhc3MgPSAnaXRlbScsIHRvb2x0aXAgPSAoKSA9PiAnJywgaXRlbUNvbXBvbmVudCA9IE92ZXJsYXksIGl0ZW1GaWx0ZXIsIGl0ZW1zLCBzb3J0Q29tcGFyZSwgb25DaGFuZ2UgPSAoKSA9PiB7fSwgb25QdXNoID0gKCkgPT4ge30sIC4uLnByb3BzIH0pID0+IHsKICBjb25zdCBbYWN0aXZlLCBzZXRBY3RpdmVdID0gdXNlU3RhdGUoLTEpOwogIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSB1c2VTdGF0ZSgnKicpOwogIGNvbnN0IFtsaXN0LCBzZXRMaXN0XSA9IC8qdXNlU3RhdGUoaXRlbXMpOyovIHRya2wuaXMoaXRlbXMpID8gdXNlU3RhdGUoaXRlbXMoKSkgOiBbaXRlbXNdOwoKICBpZih0cmtsLmlzKGl0ZW1zKSkgaXRlbXMuc3Vic2NyaWJlKHNldExpc3QpOwoKICAvL2lmKHR5cGVvZiBpdGVtcyA9PSAnZnVuY3Rpb24nKSBjb25zb2xlLmVycm9yKCdpdGVtcygpOicsIGl0ZW1zKCkpOwoKICBjb25zdCBwdXNoSGFuZGxlciA9IGkgPT4gKGUsIHN0YXRlKSA9PiB7CiAgICBjb25zdCBwcmV2ID0gYWN0aXZlOwogICAgc3RhdGUgPT0gdHJ1ZSAmJiBzZXRBY3RpdmUoaSk7CiAgICBpZihpICE9IHByZXYgJiYgZS50eXBlLmVuZHNXaXRoKCdkb3duJykpIG9uQ2hhbmdlKGUsIGxpc3RbaV0sIGkpOwogICAgb25QdXNoKGUsIGksIHN0YXRlKTsKICB9OwoKICBpZihpdGVtRmlsdGVyKSB7CiAgICBzZXRGaWx0ZXIoaXRlbUZpbHRlcigpKTsKICAgIGl0ZW1GaWx0ZXIuc3Vic2NyaWJlKHZhbHVlID0+IHNldEZpbHRlcih2YWx1ZSkpOwogIH0KICBjb25zdCBsaXN0MnJlID0gbGlzdCA9PiBsaXN0Lm1hcChwYXJ0ID0+IHRyeUNhdGNoKCgpID0+IG5ldyBSZWdFeHAocGFydC50cmltKCkucmVwbGFjZSgvXC4vZywgJ1xcLicpLnJlcGxhY2UoL1wqL2csICcuKicpLCAnaScpKSkuZmlsdGVyKHIgPT4gciAhPT0gbnVsbCk7CiAgY29uc3QgYmFyID0gaHRtbGBgOwogIGNvbnN0IHByZUZpbHRlciA9IGZpbHRlcgogICAgLnJlcGxhY2UoL1x8L2csICcgfCAnKQogICAgLnJlcGxhY2UoL1wrLywgJyArJykKICAgIC5zcGxpdCgvXHMrL2cpCiAgICAuZmlsdGVyKHAgPT4gIS86XC9cLy8udGVzdChwKSk7CiAgY29uc3QgcGx1cyA9IGxpc3QycmUocHJlRmlsdGVyLmZpbHRlcihwID0+IHAuc3RhcnRzV2l0aCgnKycpKS5tYXAocCA9PiBwLnJlcGxhY2UoL1wrL2csICcnKSkpOwogIGNvbnN0IHJlc3QgPSBwcmVGaWx0ZXIuZmlsdGVyKHAgPT4gIXAuc3RhcnRzV2l0aCgnKycpKS5qb2luKCcgJyk7CiAgLy9jb25zb2xlLmxvZygnZmlsdGVyJywgeyBwbHVzLCByZXN0IH0pOwogIGNvbnN0IHJlTGlzdCA9IHJlc3QKICAgIC5zcGxpdCgvXHwvZykKICAgIC5tYXAocCA9PiBwLnRyaW0oKSkKICAgIC5maWx0ZXIocCA9PiBwICE9ICcnKQogICAgLm1hcChwID0+IGxpc3QycmUocC5zcGxpdCgvXHNccyovZykpKTsKICAvL1Njb25zb2xlLmRlYnVnKCdyZWdleDonLCAuLi5yZUxpc3QpOwogIGNvbnN0IHByZWQgPSBuYW1lID0+ICFyZUxpc3QuZXZlcnkoYyA9PiAhYy5ldmVyeShyZSA9PiByZS50ZXN0KG5hbWUpKSkgJiYgcGx1cy5ldmVyeShyZSA9PiByZS50ZXN0KG5hbWUpKTsKICBjb25zdCBvdGhlciA9IGxpc3QuZmlsdGVyKCh7IG5hbWUgfSkgPT4gIXByZWQobmFtZSkpLm1hcChpID0+IGkubmFtZSk7CiAgY29uc3QgZGlzcGxheUxpc3QgPSBbLi4ubGlzdF0uc29ydChzb3J0Q29tcGFyZSk7CiAgLy9jb25zb2xlLmxvZygnZGlzcGxheUxpc3QnLCB7IGRpc3BsYXlMaXN0LCBzb3J0Q29tcGFyZSB9KTsKICBjb25zdCBjaGlsZHJlbiA9IGRpc3BsYXlMaXN0CiAgICAuZmlsdGVyKCh7IG5hbWUgfSkgPT4gcHJlZChuYW1lKSkKICAgIC5tYXAoKHZhbHVlLCBrZXkpID0+IHsKICAgICAgbGV0IHsgbmFtZSwgZGVzY3JpcHRpb24gLyo9ICcnKi8sIGksIHRpdGxlLCBudW1iZXIsIGRhdGEsIC4uLml0ZW0gfSA9IHZhbHVlOwogICAgICBkYXRhID0gZGF0YSB8fCBudW1iZXI7CiAgICAgIGkgPSBpID09PSB1bmRlZmluZWQgPyBudW1iZXIgOiBpOwogICAgICAvL2NvbnNvbGUubG9nKGBDaG9vc2VyIGl0ZW0gIyR7aX06YCwgeyBrZXlzOiBPYmplY3Qua2V5cyhpdGVtKSwgZGF0YSB9KTsKCiAgICAgIHJldHVybiBoKGl0ZW1Db21wb25lbnQsIHsKICAgICAgICBrZXk6IGksCiAgICAgICAgaSwKICAgICAgICBjbGFzc05hbWU6IHR5cGVvZiBpdGVtQ2xhc3MgPT0gJ2Z1bmN0aW9uJyA/IGl0ZW1DbGFzcyh2YWx1ZSkgOiBjbGFzc05hbWVzKGl0ZW1DbGFzcyB8fCBjbGFzc05hbWUgKyAnLWl0ZW0nLCAobmFtZSArICcnKS5yZXBsYWNlKC8uKlwuLywgJycpKSwKICAgICAgICBhY3RpdmU6IGkgPT0gYWN0aXZlLAogICAgICAgIG9uUHVzaDogcHVzaEhhbmRsZXIoaSksCiAgICAgICAgbGFiZWw6IG5hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcuKi8nKSwgJycpLAogICAgICAgIHRvb2x0aXA6IHRvb2x0aXAoewogICAgICAgICAgdGl0bGUsCiAgICAgICAgICBuYW1lLAogICAgICAgICAgZGVzY3JpcHRpb24sCiAgICAgICAgICBpLAogICAgICAgICAgbnVtYmVyLAogICAgICAgICAgZGF0YSwKICAgICAgICAgIC4uLml0ZW0KICAgICAgICB9KSwKICAgICAgICBuYW1lLAogICAgICAgIGRlc2NyaXB0aW9uLAogICAgICAgIC4uLml0ZW0KICAgICAgfSk7CiAgICB9KTsKCiAgcmV0dXJuIGgoQ29udGFpbmVyLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcygncGFuZWwnLCAnbm8tc2VsZWN0JywgY2xhc3NOYW1lKSwgLi4ucHJvcHMgfSwgY2hpbGRyZW4pOwp9OwoKY29uc3QgVG9vbFRpcEZuID0gKHsgbmFtZSwgZGF0YSwgLi4uaXRlbSB9KSA9PiB7CiAgbGV0IHRvb2x0aXAgPSBgbmFtZVx0JHtuYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnLiovJywgJ2cnKSwgJycpfWA7CgogIGZvcihsZXQgZmllbGQgb2YgWyd0eXBlJywgJ3NpemUnLCAnc2hhJywgJ3BhdGgnXSkgaWYoaXRlbVtmaWVsZF0gIT09IHVuZGVmaW5lZCkgdG9vbHRpcCArPSBgXG4ke2ZpZWxkfVx0JHtpdGVtW2ZpZWxkXX1gOwogIGlmKHR5cGVvZiBkYXRhID09ICdvYmplY3QnICYmIGRhdGEgIT0gbnVsbCkgewogICAgLy9jb25zb2xlLmxvZygnZGF0YScsZGF0YSk7CiAgICBkYXRhID0gT2JqZWN0LmVudHJpZXMoZGF0YSkKICAgICAgLmZpbHRlcigoW25hbWUsIHZhbHVlXSkgPT4gIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSAhPSBudWxsKQogICAgICAubWFwKChbbmFtZSwgdmFsdWVdKSA9PiBgJHtuYW1lfTogJHt2YWx1ZX1gKQogICAgICAuam9pbignXG4nKTsKICB9IGVsc2UgZGF0YSA9IGFiYnJldmlhdGUoZGF0YSk7CiAgaWYoZGF0YSkgdG9vbHRpcCArPSBgXG5kYXRhXHQke2RhdGF9YDsKICByZXR1cm4gdG9vbHRpcDsKfTsKCmV4cG9ydCBjb25zdCBGaWxlTGlzdCA9ICh7IGZpbGVzLCBvbkNoYW5nZSwgb25BY3RpdmUsIGZpbHRlciwgc2hvd1NlYXJjaCwgZm9jdXNTZWFyY2gsIGN1cnJlbnRJbnB1dCwgY2hhbmdlSW5wdXQsIHRhZyA9ICdkaXYnLCBsaXN0VGFnID0gJ2RpdicsIHNvcnRLZXksIHNvcnRPcmRlciwgbWFrZVNvcnRDb21wYXJlLCAuLi5wcm9wcyB9KSA9PiB7CiAgY29uc3QgW2FjdGl2ZSwgc2V0QWN0aXZlXSA9IHVzZVN0YXRlKHRydWUpOwogIGNvbnN0IFtpdGVtcywgc2V0SXRlbXNdID0gdXNlU3RhdGUoZmlsZXMoKSk7CiAgY29uc3Qga2V5ID0gdXNlVHJrbChzb3J0S2V5KTsKICBjb25zdCBvcmRlciA9IHVzZVRya2woc29ydE9yZGVyKTsKCiAgY29uc3Qgc29ydEZ1bmN0aW9uID0gbWFrZVNvcnRDb21wYXJlKGtleSk7CiAgY29uc3Qgc29ydENvbXBhcmUgPSAoYSwgYikgPT4gc29ydEZ1bmN0aW9uKGEsIGIpICogKG9yZGVyIHwgMSk7CgogIGZpbGVzLnN1YnNjcmliZSh2YWx1ZSA9PiBzZXRJdGVtcyh2YWx1ZSkpOwoKICBvbkFjdGl2ZS5zdWJzY3JpYmUodmFsdWUgPT4gc2V0QWN0aXZlKHZhbHVlKSk7CiAgY29uc3QgY2xhc3NOYW1lID0gY2xhc3NOYW1lcygnc2lkZWJhcicsIGFjdGl2ZSA/ICdhY3RpdmUnIDogJ2luYWN0aXZlJyk7CgogIHJldHVybiBoKHRhZywgeyBjbGFzc05hbWUgfSwgWwogICAgaChDb25kaXRpb25hbCwgewogICAgICBjb21wb25lbnQ6IEVkaXRCb3gsCiAgICAgIHR5cGU6ICdmb3JtJywKICAgICAgY2xhc3NOYW1lOiAnc2VhcmNoJywKICAgICAgYXV0b2ZvY3VzOiB0cnVlLAogICAgICBuYW1lOiAncXVlcnknLAogICAgICBpZDogJ3NlYXJjaCcsCiAgICAgIHBsYWNlaG9sZGVyOiAnU2VhcmNoJywKICAgICAgc2lnbmFsOiBzaG93U2VhcmNoLAogICAgICBmb2N1czogZm9jdXNTZWFyY2gsCiAgICAgIGN1cnJlbnQ6IGN1cnJlbnRJbnB1dCwKICAgICAgb25DaGFuZ2U6IGNoYW5nZUlucHV0LAogICAgICBvbklucHV0OiBjaGFuZ2VJbnB1dCwKICAgICAgdmFsdWU6IGZpbHRlcigpCiAgICB9KSwKICAgIGgoQ2hvb3NlciwgewogICAgICB0YWc6IGxpc3RUYWcsCiAgICAgIGNsYXNzTmFtZTogJ2xpc3QnLAogICAgICBpdGVtQ29tcG9uZW50OiBGaWxlLAogICAgICBpdGVtQ2xhc3M6IGl0ZW0gPT4gY2xhc3NOYW1lcygnZmlsZScsICdoY2VudGVyJywgaXRlbS5uYW1lLnJlcGxhY2UoLy4qXC4vZywgJycpKSwKICAgICAgaXRlbUZpbHRlcjogZmlsdGVyLAogICAgICBzb3J0Q29tcGFyZSwKICAgICAgaXRlbXMsCiAgICAgIHRvb2x0aXA6IFRvb2xUaXBGbiwKICAgICAgb25DaGFuZ2U6ICguLi5hcmdzKSA9PiBvbkNoYW5nZSguLi5hcmdzKSwKICAgICAgLi4ucHJvcHMKICAgIH0pCiAgXSk7Cn07CgpleHBvcnQgY29uc3QgUGFuZWwgPSAoeyBjbGFzc05hbWUsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSA9PiBoKENvbnRhaW5lciwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ3BhbmVsJywgY2xhc3NOYW1lKSwgLi4ucHJvcHMgfSwgY2hpbGRyZW4pOwoKZXhwb3J0IGNvbnN0IFdyYXBJbkFzcGVjdEJveCA9IChlbmFibGUsIHsgd2lkdGggPSAnMTAwJScsIGFzcGVjdCA9IDEsIGNsYXNzTmFtZSB9LCBjaGlsZHJlbikgPT4KICBlbmFibGUKICAgID8gaCgKICAgICAgICBTaXplZEFzcGVjdFJhdGlvQm94LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzTmFtZSwKICAgICAgICAgIHdpZHRoLAogICAgICAgICAgYXNwZWN0LAogICAgICAgICAgc3R5bGU6IHsgb3ZlcmZsb3c6ICd2aXNpYmxlJyB9CiAgICAgICAgfSwKICAgICAgICBjaGlsZHJlbgogICAgICApCiAgICA6IGgoCiAgICAgICAgJ2RpdicsCiAgICAgICAgewogICAgICAgICAgY2xhc3NOYW1lLAogICAgICAgICAgc3R5bGU6IHsgd2lkdGggfQogICAgICAgIH0sCiAgICAgICAgY2hpbGRyZW4KICAgICAgKTsKCmV4cG9ydCBjb25zdCBBc3BlY3RSYXRpb0JveCA9ICgKICB7CiAgICBhc3BlY3QgPSAxLjAsCiAgICBjaGlsZHJlbiwKICAgIGluc2lkZUNsYXNzTmFtZSwKICAgIG91dHNpZGVDbGFzc05hbWUsCiAgICBvdXRzaWRlUHJvcHMgPSB7fSwKICAgIHN0eWxlLAogICAgLi4ucHJvcHMKICB9IC8qIGNvbnNvbGUuZGVidWcoJ0FzcGVjdFJhdGlvQm94ICcsIHsgcHJvcHMsIGFzcGVjdCwgY2hpbGRyZW4sIGluc2lkZUNsYXNzTmFtZSwgb3V0c2lkZUNsYXNzTmFtZSwgc3R5bGUgfSk7Ki8KKSA9PgogIGgoRnJhZ21lbnQsIHt9LCBbCiAgICBoKAogICAgICAnZGl2JywKICAgICAgewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcygnYXNwZWN0LXJhdGlvLWJveCcsIG91dHNpZGVDbGFzc05hbWUpLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBoZWlnaHQ6IDAsCiAgICAgICAgICBwYWRkaW5nQm90dG9tOiAoMS4wIC8gYXNwZWN0KSAqIDEwMCArICclJywKICAgICAgICAgIC4uLnN0eWxlCiAgICAgICAgfQogICAgICB9LAogICAgICBbCiAgICAgICAgaCgKICAgICAgICAgICdkaXYnLAogICAgICAgICAgewogICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2FzcGVjdC1yYXRpby1ib3gtaW5zaWRlJywgaW5zaWRlQ2xhc3NOYW1lKQogICAgICAgICAgfSwKICAgICAgICAgIGNoaWxkcmVuCiAgICAgICAgKQogICAgICBdCiAgICApCiAgXSk7CgpleHBvcnQgY29uc3QgU2l6ZWRBc3BlY3RSYXRpb0JveCA9ICh7CiAgaWQsCiAgd2lkdGgsCiAgaGVpZ2h0LAogIHN0eWxlLAogIGNsYXNzTmFtZSwKICBjaGlsZHJlbiwKICBvdXRzaWRlQ2xhc3NOYW1lLAogIGluc2lkZUNsYXNzTmFtZSwKICBpbnNpZGVQcm9wcywKICBvdXRzaWRlUHJvcHMgPSB7fSwKICBzaXplQ2xhc3NOYW1lLAogIHNpemVQcm9wcyA9IHt9LAogIG9uQ2xpY2ssCiAgLi4ucHJvcHMKfSkgPT4KICBoKAogICAgJ2RpdicsCiAgICB7CiAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcygnYXNwZWN0LXJhdGlvLWJveC1zaXplJywgY2xhc3NOYW1lICYmIGNsYXNzTmFtZSArICctc2l6ZScsIHNpemVDbGFzc05hbWUpLAogICAgICBzdHlsZTogeyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgd2lkdGgsIGhlaWdodCwgLi4uc3R5bGUgfSwKICAgICAgb25DbGljaywKICAgICAgaWQKICAgIH0sCiAgICBbCiAgICAgIGgoCiAgICAgICAgQXNwZWN0UmF0aW9Cb3gsCiAgICAgICAgewogICAgICAgICAgb3V0c2lkZUNsYXNzTmFtZTogY2xhc3NOYW1lcygnYXNwZWN0LXJhdGlvLWJveC1vdXRzaWRlJywgY2xhc3NOYW1lICYmIGNsYXNzTmFtZSArICctb3V0c2lkZScsIG91dHNpZGVDbGFzc05hbWUpLAogICAgICAgICAgb3V0c2lkZVByb3BzLAogICAgICAgICAgaW5zaWRlQ2xhc3NOYW1lOiBpbnNpZGVDbGFzc05hbWUgfHwgY2xhc3NOYW1lLAogICAgICAgICAgb25DbGljaywKICAgICAgICAgIC4uLnByb3BzCiAgICAgICAgfSwKICAgICAgICBjaGlsZHJlbgogICAgICApCiAgICBdCiAgKTsKCmV4cG9ydCBjb25zdCBUcmFuc2Zvcm1lZEVsZW1lbnQgPSAoeyB0eXBlID0gJ2RpdicsIGlkLCBhc3BlY3QsIGxpc3RlbmVyLCBzdHlsZSA9IHsgcG9zaXRpb246ICdyZWxhdGl2ZScgfSwgY2xhc3NOYW1lLCBjaGlsZHJlbiA9IFtdLCAuLi5wcm9wcyB9KSA9PiB7CiAgLyogIGNvbnN0IFt0cmFuc2Zvcm0sIHNldFRyYW5zZm9ybV0gPSB1c2VTdGF0ZShuZXcgVHJhbnNmb3JtYXRpb25MaXN0KCkpOwogIC8vY29uc29sZS5kZWJ1ZygnVHJhbnNmb3JtZWRFbGVtZW50OicsIHsgYXNwZWN0IH0pOwogIC8vCiAgaWYobGlzdGVuZXIgJiYgbGlzdGVuZXIuc3Vic2NyaWJlKQogICAgbGlzdGVuZXIuc3Vic2NyaWJlKHZhbHVlID0+IHsKICAgICAvL2NvbnNvbGUubG9nKCdUcmFuc2Zvcm1lZEVsZW1lbnQgc2V0VmFsdWUnLCB2YWx1ZSk7CiAgICAgIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHNldFRyYW5zZm9ybSh2YWx1ZSArICcnKTsKICAgIH0pOyovCiAgbGV0IHRyYW5zZm9ybSA9IHVzZVRya2wobGlzdGVuZXIpOwogIHJldHVybiBoKAogICAgdHlwZSwKICAgIHsKICAgICAgaWQsCiAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcygndHJhbnNmb3JtZWQtZWxlbWVudCcsIGNsYXNzTmFtZSAmJiBjbGFzc05hbWUgKyAnLXNpemUnKSwKICAgICAgc3R5bGU6IHsKICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywKICAgICAgICAuLi5zdHlsZSwKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybS50b1N0cmluZygncHgnKQogICAgICB9LAogICAgICBhc3BlY3QsCiAgICAgIC4uLnByb3BzCiAgICB9LAogICAgY2hpbGRyZW4KICApOwp9OwoKZXhwb3J0IGNvbnN0IFNsaWRlciA9ICh7IG1pbiA9IDAsIG1heCA9IDEwMCwgdmFsdWU6IGluaXRpYWxWYWx1ZSA9IDAsIHN0ZXAgPSAxLCBuYW1lID0gJ3NsaWRlcicsIG9yaWVudCA9ICdob3Jpem9udGFsJywgbGFiZWwsIG9uQ2hhbmdlID0gdmFsdWUgPT4ge30sIHN0eWxlID0ge30sIGxlbmd0aCwgLi4ucHJvcHMgfSkgPT4gewogIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoaW5pdGlhbFZhbHVlKTsKICBjb25zdCBvbklucHV0ID0gZSA9PiB7CiAgICBjb25zdCB7IHRhcmdldCB9ID0gZTsKCiAgICBzZXRWYWx1ZSh0YXJnZXQudmFsdWUpOwogICAgb25DaGFuZ2UodGFyZ2V0LnZhbHVlKTsKICB9OwogIGxhYmVsID0gbGFiZWwgfHwgbmFtZTsKICBsZXQgZGltID0gbGVuZ3RoID8geyBbb3JpZW50ID09ICdob3Jpem9udGFsJyA/ICd3aWR0aCcgOiAnaGVpZ2h0J106IGxlbmd0aCB9IDoge307CgogIHJldHVybiBoKAogICAgJ2RpdicsCiAgICB7CiAgICAgIHN0eWxlOiB7CiAgICAgICAgZGlzcGxheTogJ2lubGluZS1mbGV4JywKICAgICAgICBmbGV4QmFzaXM6ICcxMDAlJywKICAgICAgICBmbGV4Rmxvdzogb3JpZW50ID09ICdob3Jpem9udGFsJyA/ICdyb3cnIDogJ2NvbHVtbicsCiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzdHJldGNoJywKICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJywKICAgICAgICBmb250U2l6ZTogJzAuOGVtJywKICAgICAgICAuLi5zdHlsZQogICAgICB9CiAgICB9LAogICAgWwogICAgICAvL2goJ2xhYmVsJywgeyBmb3I6IG5hbWUgfSwgbGFiZWwpLAogICAgICBsYWJlbCwKICAgICAgaCgnaW5wdXQnLCB7CiAgICAgICAgbmFtZSwKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIG1pbiwKICAgICAgICBtYXgsCiAgICAgICAgb3JpZW50LAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBXZWJraXRBcHBlYXJhbmNlOiBgc2xpZGVyLSR7b3JpZW50fWAsCiAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lJywKICAgICAgICAgIHdpZHRoOiA0MCwKICAgICAgICAgIGZsZXg6ICcxIDEgYXV0bycsCiAgICAgICAgICAuLi5kaW0KICAgICAgICB9LAogICAgICAgIC4uLnByb3BzLAogICAgICAgIHZhbHVlLAogICAgICAgIG9uSW5wdXQKICAgICAgfSksCiAgICAgIGgoJ2lucHV0JywgewogICAgICAgIG5hbWUsCiAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgbWluLAogICAgICAgIG1heCwKCiAgICAgICAgb3JpZW50LAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB3aWR0aDogKCttYXggKyAnJykubGVuZ3RoICogMTAgKyAncHgnLAogICAgICAgICAgTW96QXBwZWFyYW5jZTogYHRleHRmaWVsZGAsCiAgICAgICAgICBXZWJraXRBcHBlYXJhbmNlOiAnbm9uZScsCiAgICAgICAgICBtYXJnaW46IDAsCiAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lJywKICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBmbGV4OiAnMCAxIGF1dG8nCiAgICAgICAgfSwKICAgICAgICAuLi5wcm9wcywKICAgICAgICB2YWx1ZSwKICAgICAgICBvbklucHV0CiAgICAgIH0pCiAgICBdCiAgKTsKfTsKCmV4cG9ydCBjb25zdCBDYW52YXMgPSAoeyBvbkluaXQsIC4uLnByb3BzIH0pID0+IHsKICBjb25zdCBbZHJhd2luZywgc2V0RHJhd2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3dpZHRoLCBzZXRXaWR0aF0gPSB1c2VTdGF0ZShwcm9wcy53aWR0aCk7CiAgY29uc3QgW2hlaWdodCwgc2V0SGVpZ2h0XSA9IHVzZVN0YXRlKHByb3BzLmhlaWdodCk7CiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmKCk7CiAgY29uc3QgY3R4ID0gdXNlUmVmKCk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAvL2NvbnNvbGUuZGVidWcoJ2NhbnZhc1JlZi5jdXJyZW50JywgY2FudmFzUmVmLmN1cnJlbnQpOwogICAgY3R4LmN1cnJlbnQgPSBjYW52YXNSZWYuY3VycmVudC5nZXRDb250ZXh0KCcyZCcpOwogICAgLy9jb25zb2xlLmRlYnVnKCdjdHguY3VycmVudCcsIGN0eC5jdXJyZW50KTsKICAgIGNvbnN0IHsgb2Zmc2V0TGVmdDogeCwgb2Zmc2V0VG9wOiB5IH0gPSBjYW52YXNSZWYuY3VycmVudDsKCiAgICBpZih0eXBlb2Ygb25Jbml0ID09ICdmdW5jdGlvbicpIG9uSW5pdChjdHguY3VycmVudCwgY2FudmFzUmVmLmN1cnJlbnQsIHsgd2lkdGgsIGhlaWdodCwgeCwgeSB9KTsKICB9LCBbXSk7CgogIC8qICBjb25zdCBbd2luZG93V2lkdGgsIHdpbmRvd0hlaWdodF0gPSB1c2VXaW5kb3dTaXplKCgpID0+IHsKICAgIHNldFdpZHRoKHdpbmRvdy5pbm5lcldpZHRoKQogICAgc2V0SGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCkKICB9KSovCgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZShlKSB7CiAgICAvL2FjdHVhbCBjb29yZGluYXRlcwogICAgY29uc3QgY29vcmRzID0gW2UuY2xpZW50WCAtIGNhbnZhc1JlZi5jdXJyZW50Lm9mZnNldExlZnQsIGUuY2xpZW50WSAtIGNhbnZhc1JlZi5jdXJyZW50Lm9mZnNldFRvcF07CiAgICBpZihkcmF3aW5nKSB7CiAgICAgIGN0eC5jdXJyZW50LmxpbmVUbyguLi5jb29yZHMpOwogICAgICBjdHguY3VycmVudC5zdHJva2UoKTsKICAgIH0KICAgIGlmKHByb3BzLmhhbmRsZU1vdXNlTW92ZSkgewogICAgICBwcm9wcy5oYW5kbGVNb3VzZU1vdmUoLi4uY29vcmRzKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHN0YXJ0RHJhd2luZyhlKSB7CiAgICBjdHguY3VycmVudC5saW5lSm9pbiA9ICdyb3VuZCc7CiAgICBjdHguY3VycmVudC5saW5lQ2FwID0gJ3JvdW5kJzsKICAgIGN0eC5jdXJyZW50LmxpbmVXaWR0aCA9IDE7CiAgICBjdHguY3VycmVudC5zdHJva2VTdHlsZSA9IHByb3BzLmNvbG9yOwogICAgY3R4LmN1cnJlbnQuYmVnaW5QYXRoKCk7CiAgICAvL2FjdHVhbCBjb29yZGluYXRlcwogICAgY3R4LmN1cnJlbnQubW92ZVRvKGUuY2xpZW50WCAtIGNhbnZhc1JlZi5jdXJyZW50Lm9mZnNldExlZnQsIGUuY2xpZW50WSAtIGNhbnZhc1JlZi5jdXJyZW50Lm9mZnNldFRvcCk7CiAgICBzZXREcmF3aW5nKHRydWUpOwogIH0KCiAgZnVuY3Rpb24gc3RvcERyYXdpbmcoKSB7CiAgICBjdHguY3VycmVudC5jbG9zZVBhdGgoKTsKICAgIHNldERyYXdpbmcoZmFsc2UpOwogIH0KCiAgcmV0dXJuIGgoCiAgICAnY2FudmFzJywKICAgIHsKICAgICAgcmVmOiBjYW52YXNSZWYsCiAgICAgIHdpZHRoLAogICAgICBoZWlnaHQsCiAgICAgIG9uTW91c2VEb3duOiBzdGFydERyYXdpbmcsCiAgICAgIG9uTW91c2VVcDogc3RvcERyYXdpbmcsCiAgICAgIG9uTW91c2VPdXQ6IHN0b3BEcmF3aW5nLAogICAgICBvbk1vdXNlTW92ZTogaGFuZGxlTW91c2VNb3ZlCiAgICB9LAogICAgW10KICApOwp9OwoKZXhwb3J0IGNvbnN0IENvbG9yV2hlZWwgPSAoeyByYWRpdXMgPSA1MCwgLi4ucHJvcHMgfSkgPT4gewogIGxldCBkYXRhOwogIGxldCBsZWZ0LCB0b3A7CiAgcmV0dXJuIGgoQ2FudmFzLCB7CiAgICB3aWR0aDogcmFkaXVzICogMiwKICAgIGhlaWdodDogcmFkaXVzICogMiwKICAgIG9uSW5pdDogKGN0eCwgY2FudmFzLCBzaXplKSA9PiB7CiAgICAgIGxlZnQgPSBzaXplLng7CiAgICAgIHRvcCA9IHNpemUueTsKCiAgICAgIGRyYXdDaXJjbGUoKTsKICAgICAgY3R4LmxpbmVXaWR0aCA9IDAuNzU7CiAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgY3R4LmFyYyg1MCwgNTAsIDUwIC0gY3R4LmxpbmVXaWR0aCAvIDIsIDAsIE1hdGguY2VpbCgyICogTWF0aC5QSSkpOwogICAgICBjdHguc3Ryb2tlKCk7CgogICAgICBmdW5jdGlvbiBkcmF3Q2lyY2xlKCkgewogICAgICAgIGxldCByYWRpdXMgPSA1MDsKICAgICAgICBsZXQgaW1hZ2UgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKDIgKiByYWRpdXMsIDIgKiByYWRpdXMpOwogICAgICAgIGRhdGEgPSBpbWFnZS5kYXRhOwoKICAgICAgICBmb3IobGV0IHggPSAtcmFkaXVzOyB4IDwgcmFkaXVzOyB4KyspIHsKICAgICAgICAgIGZvcihsZXQgeSA9IC1yYWRpdXM7IHkgPCByYWRpdXM7IHkrKykgewogICAgICAgICAgICBsZXQgW3IsIHBoaV0gPSB4eTJwb2xhcih4LCB5KTsKCiAgICAgICAgICAgIGlmKHIgPiByYWRpdXMpIHsKICAgICAgICAgICAgICAvL3NraXAgYWxsICh4LHkpIGNvb3JkaW5hdGVzIHRoYXQgYXJlIG91dHNpZGUgb2YgdGhlIGNpcmNsZQogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgZGVnID0gcmFkMmRlZyhwaGkpOwoKICAgICAgICAgICAgLy9GaWd1cmUgb3V0IHRoZSBzdGFydGluZyBpbmRleCBvZiB0aGlzIHBpeGVsIGluIHRoZSBpbWFnZSBkYXRhIGFycmF5LgogICAgICAgICAgICBsZXQgcm93TGVuZ3RoID0gMiAqIHJhZGl1czsKICAgICAgICAgICAgbGV0IGFkanVzdGVkWCA9IHggKyByYWRpdXM7IC8vY29udmVydCB4IGZyb20gWy01MCwgNTBdIHRvIFswLCAxMDBdICh0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGltYWdlIGRhdGEgYXJyYXkpIGxldCBhZGp1c3RlZFkgPSB5ICsgcmFkaXVzOyAvL2NvbnZlcnQgeSBmcm9tIFstNTAsIDUwXSB0byBbMCwgMTAwXSAodGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBpbWFnZSBkYXRhIGFycmF5KSBsZXQgcGl4ZWxXaWR0aCA9IDQ7IC8vZWFjaCBwaXhlbCByZXF1aXJlcyA0IHNsb3RzIGluIHRoZSBkYXRhIGFycmF5IGxldCBpbmRleCA9IChhZGp1c3RlZFggKyBhZGp1c3RlZFkgKiByb3dMZW5ndGgpICogcGl4ZWxXaWR0aDsKCiAgICAgICAgICAgIGxldCBodWUgPSBkZWc7CiAgICAgICAgICAgIGxldCBzYXR1cmF0aW9uID0gciAvIHJhZGl1czsKICAgICAgICAgICAgbGV0IHZhbHVlID0gMS4wOwoKICAgICAgICAgICAgbGV0IFtyZWQsIGdyZWVuLCBibHVlXSA9IGhzdjJyZ2IoaHVlLCBzYXR1cmF0aW9uLCB2YWx1ZSk7CiAgICAgICAgICAgIGxldCBhbHBoYSA9IDI1NTsKCiAgICAgICAgICAgIGRhdGFbaW5kZXhdID0gcmVkOwogICAgICAgICAgICBkYXRhW2luZGV4ICsgMV0gPSBncmVlbjsKICAgICAgICAgICAgZGF0YVtpbmRleCArIDJdID0gYmx1ZTsKICAgICAgICAgICAgZGF0YVtpbmRleCArIDNdID0gYWxwaGE7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKGltYWdlLCAwLCAwKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24geHkycG9sYXIoeCwgeSkgewogICAgICAgIGxldCByID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpOwogICAgICAgIGxldCBwaGkgPSBNYXRoLmF0YW4yKHksIHgpOwogICAgICAgIHJldHVybiBbciwgcGhpXTsKICAgICAgfQoKICAgICAgLy9yYWQgaW4gWy3PgCwgz4BdIHJhbmdlCiAgICAgIC8vcmV0dXJuIGRlZ3JlZSBpbiBbMCwgMzYwXSByYW5nZQogICAgICBmdW5jdGlvbiByYWQyZGVnKHJhZCkgewogICAgICAgIHJldHVybiAoKHJhZCArIE1hdGguUEkpIC8gKDIgKiBNYXRoLlBJKSkgKiAzNjA7CiAgICAgIH0KCiAgICAgIC8vaHVlIGluIHJhbmdlIFswLCAzNjBdCiAgICAgIC8vc2F0dXJhdGlvbiwgdmFsdWUgaW4gcmFuZ2UgWzAsMV0KICAgICAgLy9yZXR1cm4gW3IsZyxiXSBlYWNoIGluIHJhbmdlIFswLDI1NV0KICAgICAgLy9TZWU6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTTF9hbmRfSFNWI0Zyb21fSFNWCiAgICAgIGZ1bmN0aW9uIGhzdjJyZ2IoaHVlLCBzYXR1cmF0aW9uLCB2YWx1ZSkgewogICAgICAgIGxldCBjaHJvbWEgPSB2YWx1ZSAqIHNhdHVyYXRpb247CiAgICAgICAgbGV0IGh1ZTEgPSBodWUgLyA2MDsKICAgICAgICBsZXQgeCA9IGNocm9tYSAqICgxIC0gTWF0aC5hYnMoKGh1ZTEgJSAyKSAtIDEpKTsKICAgICAgICBsZXQgcjEsIGcxLCBiMTsKICAgICAgICBpZihodWUxID49IDAgJiYgaHVlMSA8PSAxKSB7CiAgICAgICAgICBbcjEsIGcxLCBiMV0gPSBbY2hyb21hLCB4LCAwXTsKICAgICAgICB9IGVsc2UgaWYoaHVlMSA+PSAxICYmIGh1ZTEgPD0gMikgewogICAgICAgICAgW3IxLCBnMSwgYjFdID0gW3gsIGNocm9tYSwgMF07CiAgICAgICAgfSBlbHNlIGlmKGh1ZTEgPj0gMiAmJiBodWUxIDw9IDMpIHsKICAgICAgICAgIFtyMSwgZzEsIGIxXSA9IFswLCBjaHJvbWEsIHhdOwogICAgICAgIH0gZWxzZSBpZihodWUxID49IDMgJiYgaHVlMSA8PSA0KSB7CiAgICAgICAgICBbcjEsIGcxLCBiMV0gPSBbMCwgeCwgY2hyb21hXTsKICAgICAgICB9IGVsc2UgaWYoaHVlMSA+PSA0ICYmIGh1ZTEgPD0gNSkgewogICAgICAgICAgW3IxLCBnMSwgYjFdID0gW3gsIDAsIGNocm9tYV07CiAgICAgICAgfSBlbHNlIGlmKGh1ZTEgPj0gNSAmJiBodWUxIDw9IDYpIHsKICAgICAgICAgIFtyMSwgZzEsIGIxXSA9IFtjaHJvbWEsIDAsIHhdOwogICAgICAgIH0KCiAgICAgICAgbGV0IG0gPSB2YWx1ZSAtIGNocm9tYTsKICAgICAgICBsZXQgW3IsIGcsIGJdID0gW3IxICsgbSwgZzEgKyBtLCBiMSArIG1dOwoKICAgICAgICAvL0NoYW5nZSByLGcsYiB2YWx1ZXMgZnJvbSBbMCwxXSB0byBbMCwyNTVdCiAgICAgICAgcmV0dXJuIFsyNTUgKiByLCAyNTUgKiBnLCAyNTUgKiBiXTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKZXhwb3J0IGNvbnN0IENyb3NzSGFpciA9ICh7IHBvc2l0aW9uLCBzaG93LCByYWRpdXMgPSAyMCwgLi4ucHJvcHMgfSkgPT4gewogIGNvbnN0IFtwb3MsIHNldFBvc10gPSB1c2VTdGF0ZShwb3NpdGlvbigpKTsKICBjb25zdCBbdmlzaWJsZSwgc2V0VmlzaWJsZV0gPSB1c2VTdGF0ZShzaG93KCkpOwoKICBwb3NpdGlvbi5zdWJzY3JpYmUodmFsdWUgPT4gc2V0UG9zKHZhbHVlKSk7CiAgc2hvdy5zdWJzY3JpYmUodmFsdWUgPT4gc2V0VmlzaWJsZSh2YWx1ZSkpOwoKICByZXR1cm4gaCgKICAgICdkaXYnLAogICAgewogICAgICBzdHlsZTogewogICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLAogICAgICAgIGxlZnQ6IGAke3Bvcy54IC0gcmFkaXVzfXB4YCwKICAgICAgICB0b3A6IGAke3Bvcy55IC0gcmFkaXVzfXB4YCwKICAgICAgICAuLi4odmlzaWJsZSA/IHt9IDogeyBkaXNwbGF5OiAnbm9uZScgfSksCiAgICAgICAgekluZGV4OiAxMDAwMDAKICAgICAgfQogICAgfSwKICAgIGgoCiAgICAgICdzdmcnLAogICAgICB7CiAgICAgICAgdmlld0JveDogJzAgMCAyMiAyMicsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLAogICAgICAgICAgd2lkdGg6IGAke3JhZGl1cyAqIDJ9cHhgLAogICAgICAgICAgaGVpZ2h0OiBgJHtyYWRpdXMgKiAyfXB4YAogICAgICAgIH0KICAgICAgfSwKICAgICAgaCgncGF0aCcsIHsKICAgICAgICBkOiAnTTExLjAwNCAyMmMtLjAwNy05LjE4NC0uMDEzLTEyLjgxNiAwLTIyTTAgMTEuMDA1YzkuMTgzLS4wMDcgMTIuODE2LS4wMTMgMjIgME0xNS4yNyAxMUE0LjI3MSA0LjI3MSAwIDAxMTEgMTUuMjcgNC4yNzEgNC4yNzEgMCAwMTYuNzI5IDExIDQuMjcxIDQuMjcxIDAgMDExMSA2LjcyOWE0LjI3MSA0LjI3MSAwIDAxNC4yNzEgNC4yN3ptMy42NDUuMDE1YTcuOTMyIDcuOTMxIDAgMDEtNy45MzIgNy45MzIgNy45MzIgNy45MzEgMCAwMS03LjkzMS03LjkzMiA3LjkzMiA3LjkzMSAwIDAxNy45MzEtNy45MzEgNy45MzIgNy45MzEgMCAwMTcuOTMyIDcuOTMxeicsCiAgICAgICAgZmlsbDogJ25vbmUnLAogICAgICAgIHN0cm9rZTogJyMwMDAnLAogICAgICAgIHN0cm9rZVdpZHRoOiAxCiAgICAgIH0pCiAgICApCiAgKTsKfTsKCmV4cG9ydCBjb25zdCBNb3ZlQ3Vyc29yID0gcHJvcHMgPT4KICBoKAogICAgJ3N2ZycsCiAgICB7CiAgICAgIGhlaWdodDogJzIyJywKICAgICAgd2lkdGg6ICcyMicsCiAgICAgIHhtbG5zOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnCiAgICB9LAogICAgWwogICAgICBoKCdkZWZzJywge30pLAogICAgICBoKCdwYXRoJywgewogICAgICAgIGQ6ICdNMTkuMTczIDExLjcyMmwtMi4zOTMgMi4zOTMgMS4wNDQgMS4wNDRMMjIgMTAuOTgzbC00LjE3Ni00LjE3N0wxNi43OCA3Ljg1bDMuMTMyIDMuMTMzek01LjIyMSAxNC4xMTVsLTMuMTMyLTMuMTMyTDUuMjIgNy44NTEgNC4xNzcgNi44MDYgMCAxMC45ODNsNC4xNzcgNC4xNzd6bTYuNTM1LTExLjI4OGwyLjM5OCAyLjM5NCAxLjA0NC0xLjA0NEwxMS4wMTggMCA2Ljg0IDQuMTc3IDcuODg1IDUuMjJsMy4xMzItMy4xMzN6bS0xLjQ3MyAxNi4zNDVMNy44ODUgMTYuNzhsLTEuMDQ0IDEuMDQ0TDExLjAxNyAyMmw0LjE4MS00LjE3Ny0xLjA0NC0xLjA0NC0zLjEzNiAzLjEzMnptLTcuNDU1LTcuNDVoMTYuMzQ1bC43MzktLjc0LS43NC0uNzM5SDIuODI5bC0uNzQuNzR6bTguOTI4LTguODk1bC0uNzM5LS43MzktLjczNC43NHY3LjQxNWgxLjQ3M3ptLTEuNDczIDE2LjM0NWwuNzM0Ljc0Ljc0LS43NHYtNy40NTVoLTEuNDc0eicKICAgICAgfSkKICAgIF0KICApOwoKZXhwb3J0IGNvbnN0IERyb3BEb3duID0gKHsgY2hpbGRyZW4sIGludG8gLyogPSAnYm9keScqLywgaXNPcGVuID0gdHJrbChmYWxzZSksIC4uLnByb3BzIH0pID0+IHsKICBsZXQgW2J1dHRvbiwgb3ZlcmxheV0gPSBSZWFjdENvbXBvbmVudC50b0NoaWxkQXJyYXkoY2hpbGRyZW4pOwogIGNvbnN0IFtvcGVuLCBzZXRPcGVuXSA9IHVzZVN0YXRlKGlzT3BlbigpKTsKICBpc09wZW4uc3Vic2NyaWJlKHZhbHVlID0+IHNldE9wZW4odmFsdWUpKTsKICBjb25zdCBbcmVmLCByZWN0LCBlbGVtZW50XSA9IHVzZURpbWVuc2lvbnMoKTsKICBjb25zdCBvcmVmID0gdXNlRWxlbWVudChlbGVtZW50ID0+IHsKICAgIGlmKHJlY3QpIHsKICAgICAgY29uc3QgeHkgPSBuZXcgUmVjdChyZWN0KS50b1BvaW50cygpWzNdOwogICAgICBFbGVtZW50LnNldENTUyhlbGVtZW50LCB4eS50b0NTUygpKTsKICAgIH0KICB9KTsKICBjb25zdCBldmVudCA9IHVzZUNhbGxiYWNrKAogICAgdHJrbCgpLnN1YnNjcmliZSgoZSwgcHJldikgPT4gewogICAgICBjb25zdCB7IHgsIHksIGJ1dHRvbnMsIGJ1dHRvbiwgdGltZVN0YW1wIH0gPSBlOwogICAgICBjb25zdCBvcmVjdCA9IEVsZW1lbnQucmVjdChvcmVmLmN1cnJlbnQpOwogICAgICBjb25zdCB0aW1lU3RlcCA9IHRpbWVTdGFtcCAtIChwcmV2ID8gcHJldi50aW1lU3RhbXAgOiBOYU4pOwogICAgICBjb25zdCBwb2ludHMgPSBbbmV3IFBvaW50KHByZXYpLCBuZXcgUG9pbnQoZSldOwogICAgICBjb25zdCBkaWZmID0gUG9pbnQuZGlmZiguLi5wb2ludHMpOwogICAgICBjb25zdCBkaXN0ID0gUG9pbnQuZGlzdGFuY2UoLi4ucG9pbnRzKTsKICAgICAgY29uc3QgaW5zaWRlID0gb3JlY3QgJiYgb3JlY3QuaW5zaWRlKHsgeCwgeSB9KTsKICAgICAgLy8gICBjb25zb2xlLmRlYnVnKGUudHlwZSwgZGlmZiwgZGlzdCwge3RpbWVTdGVwLCBvcmVjdCwgaW5zaWRlLCB4LCB5LCBidXR0b25zLCBidXR0b24sIHRpbWVTdGFtcCB9KTsKICAgICAgaWYoZS5idXR0b24gPT0gMikgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYob3JlZi5jdXJyZW50ICYmIG9wZW4gJiYgIWluc2lkZSkgewogICAgICAgIGlzT3BlbihmYWxzZSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSkKICApOwoKICB1c2VFdmVudCgnbW91c2Vkb3duJywgZXZlbnQpOwoKICBpZih0eXBlb2YgYnV0dG9uID09ICdmdW5jdGlvbicpIGJ1dHRvbiA9IGJ1dHRvbih7IHJlZjogcmVmLCAuLi5wcm9wcyB9KTsKICBpZih0eXBlb2Ygb3ZlcmxheSA9PSAnZnVuY3Rpb24nKSBvdmVybGF5ID0gb3ZlcmxheSh7IHJlZjogb3JlZiwgb25Nb3VzZVdoZWVsIH0pOwogIC8vY29uc29sZS5sb2coJ0Ryb3BEb3duIG9wZW49JywgeyBvcGVuIH0pOwoKICBmdW5jdGlvbiBvbk1vdXNlV2hlZWwoZSkgewogICAgY29uc3QgeyBkZWx0YVksIHdoZWVsRGVsdGEsIHdoZWVsRGVsdGFYLCB3aGVlbERlbHRhWSB9ID0gZTsKICAgIC8vY29uc29sZS5sb2coZS50eXBlLCAnOiAnLCB7IGRlbHRhWSwgd2hlZWxEZWx0YSwgd2hlZWxEZWx0YVgsIHdoZWVsRGVsdGFZIH0pOwogICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiBoKEZyYWdtZW50LCB7fSwgb3BlbiA/IFtidXR0b24sIGludG8gPyBoKFBvcnRhbCwgeyBpbnRvIH0sIG92ZXJsYXkpIDogb3ZlcmxheV0gOiBidXR0b24pOwp9OwoKZXhwb3J0IGNvbnN0IEZlbmNlID0gKHsgY2hpbGRyZW4sIHN0eWxlID0ge30sIHNpemVMaXN0ZW5lciwgYXNwZWN0TGlzdGVuZXIsIC4uLnByb3BzIH0pID0+IHsKICBjb25zdCBbZGltZW5zaW9ucywgc2V0RGltZW5zaW9uc10gPSB1c2VTdGF0ZShzaXplTGlzdGVuZXIoKSk7CiAgY29uc3QgW2FzcGVjdCwgc2V0QXNwZWN0XSA9IHVzZVN0YXRlKGFzcGVjdExpc3RlbmVyKCkpOwogIGlmKHNpemVMaXN0ZW5lciAmJiBzaXplTGlzdGVuZXIuc3Vic2NyaWJlKSBzaXplTGlzdGVuZXIuc3Vic2NyaWJlKHZhbHVlID0+IHNldERpbWVuc2lvbnModmFsdWUpKTsKICBpZihhc3BlY3RMaXN0ZW5lciAmJiBhc3BlY3RMaXN0ZW5lci5zdWJzY3JpYmUpIGFzcGVjdExpc3RlbmVyLnN1YnNjcmliZSh2YWx1ZSA9PiBzZXRBc3BlY3QodmFsdWUpKTsKICAvL2NvbnNvbGUuZGVidWcoJ0ZlbmNlIGRpbWVuc2lvbnM6JywgZGltZW5zaW9ucyk7CiAgcmV0dXJuIGgoCiAgICBUcmFuc2Zvcm1lZEVsZW1lbnQsCiAgICB7CiAgICAgIGlkOiAnZmVuY2UnLAogICAgICB0eXBlOiAnZGl2JyB8fCBTaXplZEFzcGVjdFJhdGlvQm94LAogICAgICAnZGF0YS1hc3BlY3QnOiBhc3BlY3QsCiAgICAgIC8vIGxpc3RlbmVyOiB0cmFuc2Zvcm0sCiAgICAgIHN0eWxlOiB7CiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsCiAgICAgICAgbWluV2lkdGg6ICcxMDBweCcsCiAgICAgICAgdG9wOiAwLAogICAgICAgIGxlZnQ6IDAsCiAgICAgICAgLi4uc3R5bGUsCiAgICAgICAgLi4uZGltZW5zaW9ucwogICAgICB9LAogICAgICAuLi5wcm9wcwogICAgfSwKICAgIGNoaWxkcmVuCiAgKTsKfTsKCmV4cG9ydCBjb25zdCBab29tYWJsZSA9ICh7IHR5cGUgPSAnZGl2Jywgc3R5bGUsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSA9PiB7CiAgY29uc3QgeyB0cmFuc2Zvcm0sIHBhblpvb21IYW5kbGVycywgc2V0Q29udGFpbmVyLCBzZXRQYW4sIHNldFpvb20gfSA9IHVzZVBhblpvb20oewogICAgem9vbVNlbnNpdGl2aXR5OiAwLjAwMSwKICAgIG1pblpvb206IDEsCiAgICBpbml0aWFsWm9vbTogNCwKICAgIC8vbWluWDogMCwgbWluWTogMCwgLy9tYXhYOiB3aW5kb3cuaW5uZXJXaWR0aCwgbWF4WTogd2luZG93LmlubmVySGVpZ2h0LAogICAgb25QYW4sCiAgICBvblpvb20KICB9KTsKICBmdW5jdGlvbiBvblBhbihhcmcpIHsKICAgIC8vY29uc29sZS5sb2coJ29uUGFuJywgYXJnKTsKICB9CiAgZnVuY3Rpb24gb25ab29tKGFyZykgewogICAgLy9jb25zb2xlLmxvZygnb25ab29tJywgYXJnKTsKICB9CiAgLy8gY29uc29sZS5sb2coJ1pvb21hYmxlIHRyYW5zZm9ybTonLCB0cmFuc2Zvcm0pOwogIGxldCBpbm5lciA9IHRya2woKTsKICBjb25zdCByZWYgPSBlbCA9PiB7CiAgICAvKiAgaWYoZWwgJiYgdHlwZW9mIGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PSAnZnVuY3Rpb24nKQogICAgICAgICAgLy9jb25zb2xlLmxvZygnWm9vbWFibGUuY29udGFpbmVyOicsIGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTsKCiAgICAgICAgaWYoaW5uZXIoKSkKICAgICAgICAgIC8vY29uc29sZS5sb2coJ1pvb21hYmxlLmlubmVyOicsIGlubmVyKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpOyovCiAgICBzZXRDb250YWluZXIoZWwpOwogIH07CiAgcmV0dXJuIGgoCiAgICB0eXBlLAogICAgewogICAgICAuLi5wcm9wcywKICAgICAgLi4ucGFuWm9vbUhhbmRsZXJzCiAgICB9LAogICAgaCh0eXBlLCB7IHJlZiwgc3R5bGU6IHsgLi4uc3R5bGUsIHRyYW5zZm9ybSB9IH0sIGNoaWxkcmVuKQogICk7Cn07CgpleHBvcnQgY29uc3QgRGlzcGxheUxpc3QgPSAoeyBkYXRhLCAuLi5wcm9wcyB9KSA9PiB7CiAgbGV0IFtpdGVtcywgc2V0SXRlbXNdID0gdXNlU3RhdGUoW10pOwoKICBsZXQgaXRlbURhdGEgPSB1c2VWYWx1ZShhc3luYyBmdW5jdGlvbiogKCkgewogICAgZm9yIGF3YWl0KGxldCBpdGVtIG9mIGRhdGEucmVwZWF0ZXIpIHsKICAgICAgLy9jb25zb2xlLmxvZygnRGlzcGxheUxpc3QuaXRlbTonLCBpdGVtKTsKICAgICAgeWllbGQgaXRlbTsKICAgIH0KICB9KTsKCiAgaWYoaXRlbURhdGEpIHNldEl0ZW1zKGl0ZW1EYXRhKTsKCiAgLy9jb25zb2xlLmxvZygnaXRlbURhdGE6JywgaXRlbURhdGEpOwoKICByZXR1cm4gaChGcmFnbWVudCwge30sIFsnRGlzcGxheUxpc3QnLCAuLi5pdGVtc10pOwp9OwovKgpleHBvcnQgY29uc3QgQ29uZGl0aW9uYWwgPSAoeyB0cmtsLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkgPT4gewogIGNvbnN0IFtjb25kLCBzZXRDb25kXSA9IHVzZVN0YXRlKHRya2woKSk7CgogIHRya2wuc3Vic2NyaWJlKHNldENvbmQpOysKCiAgcmV0dXJuIGgoRnJhZ21lbnQsIHt9LCBjb25kID8gY2hpbGRyZW4gOiBbXSk7Cn07CiovCmV4cG9ydCBkZWZhdWx0IHsKICBPdmVybGF5LAogIENvbnRhaW5lciwKICBDaG9vc2VyLAogIEJ1dHRvbiwKICBMYWJlbCwKICBJdGVtLAogIEljb24sCiAgUHJvZ3Jlc3MsCiAgQm9hcmRJY29uLAogIEZpbGUsCiAgRmlsZUxpc3QsCiAgUGFuZWwsCiAgQXNwZWN0UmF0aW9Cb3gsCiAgV3JhcEluQXNwZWN0Qm94LAogIFNpemVkQXNwZWN0UmF0aW9Cb3gsCiAgQ2FudmFzLAogIENvbG9yV2hlZWwsCiAgU2xpZGVyLAogIENyb3NzSGFpciwKICBNb3ZlQ3Vyc29yLAogIEZlbmNlCn07CgAAAAAAAAAA9qIAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABLfQAAAAAAAEx9AAAAAAAAAAAAAAAA8L8"
				],
				[
					17,
					1,
					"cut",
					null,
					"AQAAAPsAAAAAAAAA+wAAAAAAAAA2AAAALy9pbXBvcnQgeyBpc1ZhbGlkRWxlbWVudCB9IGZyb20gJy4vbGliL2NvbXBhdC5tanMnOwoK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD7AAAAAAAAADEBAAAAAAAAAAAAAAAAAAA"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": ",tryCac"
					},
					"BwAAACoAAAAAAAAAKwAAAAAAAAAAAAAAKwAAAAAAAAAsAAAAAAAAAAAAAAAsAAAAAAAAAC0AAAAAAAAAAAAAAC0AAAAAAAAALgAAAAAAAAAAAAAALgAAAAAAAAAvAAAAAAAAAAAAAAAvAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqAAAAAAAAACoAAAAAAAAAAAAAAAAA8L8"
				],
				[
					26,
					1,
					"left_delete",
					null,
					"AQAAADAAAAAAAAAAMAAAAAAAAAABAAAAYw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxAAAAAAAAADEAAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "tch"
					},
					"AwAAADAAAAAAAAAAMQAAAAAAAAAAAAAAMQAAAAAAAAAyAAAAAAAAAAAAAAAyAAAAAAAAADMAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": ",roundTo"
					},
					"CAAAADMAAAAAAAAANAAAAAAAAAAAAAAANAAAAAAAAAA1AAAAAAAAAAAAAAA1AAAAAAAAADYAAAAAAAAAAAAAADYAAAAAAAAANwAAAAAAAAAAAAAANwAAAAAAAAA4AAAAAAAAAAAAAAA4AAAAAAAAADkAAAAAAAAAAAAAADkAAAAAAAAAOgAAAAAAAAAAAAAAOgAAAAAAAAA7AAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAzAAAAAAAAADMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					59,
					1,
					"",
					null,
					"AQAAAI4DAAAAAAAAvQMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACOAwAAAAAAAI4DAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "events.js",
			"settings":
			{
				"buffer_size": 1632,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATBgAAaW1wb3J0IHsgUmVwZWF0ZXIgfSBmcm9tICcuL2xpYi9yZXBlYXRlci9yZXBlYXRlci5qcyc7CmV4cG9ydCB7IEV2ZW50RW1pdHRlciwgRXZlbnRUYXJnZXQgfSBmcm9tICcuL2xpYi9ldmVudHMuanMnOwoKZXhwb3J0IGZ1bmN0aW9uIEVtaXR0ZXIodGFyZ2V0KSB7CiAgY29uc3QgbGlzdGVuZXJzID0gbmV3IE1hcCgpOwogIGxldCBlbWl0dGVyID0gbmV3LnRhcmdldCA/IHRoaXMgOiB7fTsKICBPYmplY3QuYXNzaWduKGVtaXR0ZXIsIHsKICAgIG9uOiAodHlwZSwgaGFuZGxlcikgPT4gKGxpc3RlbmVycy5zZXQodHlwZSwgaGFuZGxlciksIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpLCBlbWl0dGVyKSwKICAgIG9mZjogKHR5cGUsIGhhbmRsZXIpID0+ICh0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyIHx8IGxpc3RlbmVycy5nZXQodHlwZSkpLCBsaXN0ZW5lcnMuZGVsZXRlKHR5cGUpLCBlbWl0dGVyKSwKICAgIHJlc2V0OiAoKSA9PiB7CiAgICAgIGZvcihsZXQgW3R5cGUsIGhhbmRsZXJdIG9mIGxpc3RlbmVycykgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcik7CiAgICAgIGxpc3RlbmVycy5jbGVhcigpOwogICAgICByZXR1cm4gZW1pdHRlcjsKICAgIH0KICB9KTsKICByZXR1cm4gZGVmaW5lKGVtaXR0ZXIsIHsgbGlzdGVuZXJzLCB0YXJnZXQgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBFdmVudEl0ZXJhdG9yKGV2ZW50cywgdGFyZ2V0ID0gdHJ5Q2F0Y2goKCkgPT4gd2luZG93KSkgewogIGxldCBlbWl0dGVyID0gbmV3IEVtaXR0ZXIodGFyZ2V0KTsKICBpZih0eXBlb2YgZXZlbnRzID09ICdzdHJpbmcnKSBldmVudHMgPSBFdmVudEl0ZXJhdG9yW2V2ZW50cyArICdFdmVudHMnXSB8fCBldmVudHMuc3BsaXQoLywvZyk7CgogIGxldCBpdGVyID0gbmV3IFJlcGVhdGVyKGFzeW5jIChwdXNoLCBzdG9wKSA9PiB7CiAgICBsZXQgaGFuZGxlciA9IGUgPT4gewogICAgICBlLmVtaXR0ZXIgPSBlbWl0dGVyOwogICAgICBwdXNoKGUpOwogICAgfTsKCiAgICBmb3IobGV0IHR5cGUgb2YgZXZlbnRzKSBlbWl0dGVyLm9uKHR5cGUsIGhhbmRsZXIpOwogICAgY29uc29sZS5sb2coJ3JlZ2lzdGVyZWQnLCBldmVudHMpOwogICAgYXdhaXQgc3RvcDsKCiAgICAvKmZvcihsZXQgdHlwZSBvZiBldmVudHMpIGVtaXR0ZXIub2ZmKHR5cGUsIGhhbmRsZXIpOwogICAgICBjb25zb2xlLmxvZygndW5yZWdpc3RlcmVkJywgZXZlbnRzKTsqLwogICAgZW1pdHRlci5yZXNldCgpOwogIH0pOwogIHJldHVybiBkZWZpbmUoaXRlciwgeyBlbWl0dGVyLCB0YXJnZXQgfSk7CiAgaXRlci5lbWl0dGVyID0gZW1pdHRlcjsKICByZXR1cm4gaXRlcjsKfQoKY29uc3QgdG91Y2hFdmVudHMgPSBbJ3RvdWNobW92ZScsICd0b3VjaHN0YXJ0JywgJ3RvdWNoY2FuY2VsJywgJ21vdXNlbW92ZScsICdtb3VzZXVwJywgJ21vdXNlZG93biddOwpjb25zdCBrZXlFdmVudHMgPSBbJ2tleWRvd24nXTsKT2JqZWN0LmFzc2lnbihFdmVudEl0ZXJhdG9yLCB7IHRvdWNoRXZlbnRzLCBrZXlFdmVudHMgfSk7CgAAAAAAAAAAVgYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAkAAAAAAAAACgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAJAAAAAAAAAAkAAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "tryCatch,"
					},
					"CQAAAAkAAAAAAAAACgAAAAAAAAAAAAAACgAAAAAAAAALAAAAAAAAAAAAAAALAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADQAAAAAAAAAAAAAADQAAAAAAAAAOAAAAAAAAAAAAAAAOAAAAAAAAAA8AAAAAAAAAAAAAAA8AAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAARAAAAAAAAAAAAAAARAAAAAAAAABIAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAJAAAAAAAAAAkAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/tlite.js",
			"settings":
			{
				"buffer_size": 6293,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAATQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					2,
					"right_delete",
					null,
					"AgAAAD8AAAAAAAAAPwAAAAAAAAADAAAAbGliPwAAAAAAAAA/AAAAAAAAAAEAAAAv",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA/AAAAAAAAAEIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "wea"
					},
					"BAAAAAkAAAAAAAAACgAAAAAAAAAAAAAACgAAAAAAAAAKAAAAAAAAACwAAAB0cnlDYXRjaCwgZGVmaW5lLCBpc09iamVjdCwgbWVtb2l6ZSwgdW5pcXVlIAoAAAAAAAAACwAAAAAAAAAAAAAACwAAAAAAAAAMAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA1AAAAAAAAAAkAAAAAAAAAAAAAAAAA8L8"
				],
				[
					14,
					1,
					"insert_completion",
					{
						"completion": "weakMapper",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "weakMapper"
					},
					"AgAAAAkAAAAAAAAACQAAAAAAAAABAAAAdwkAAAAAAAAAEwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKAAAAAAAAAAoAAAAAAAAAAAAAAAAA8L8"
				],
				[
					19,
					2,
					"right_delete",
					null,
					"AgAAABMAAAAAAAAAEwAAAAAAAAABAAAAZRMAAAAAAAAAEwAAAAAAAAABAAAAYQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATAAAAAAAAABMAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "commands.js",
			"settings":
			{
				"buffer_size": 12259,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					21,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					29,
					1,
					"",
					null,
					"AQAAAAAAAAAAAAAAQwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"left_delete",
					null,
					"AQAAAEIAAAAAAAAAQgAAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABDAAAAAAAAAEMAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/fetch.js",
			"settings":
			{
				"buffer_size": 2433,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					29,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": "import"
					},
					"BgAAAAEAAAAAAAAAAgAAAAAAAAAAAAAAAgAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAGAAAAAAAAAAAAAAAGAAAAAAAAAAcAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAA"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": " Util"
					},
					"BQAAAAcAAAAAAAAACAAAAAAAAAAAAAAACAAAAAAAAAAJAAAAAAAAAAAAAAAJAAAAAAAAAAoAAAAAAAAAAAAAAAoAAAAAAAAACwAAAAAAAAAAAAAACwAAAAAAAAAMAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAHAAAAAAAAAAcAAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"insert",
					{
						"characters": " from"
					},
					"BQAAAAwAAAAAAAAADQAAAAAAAAAAAAAADQAAAAAAAAAOAAAAAAAAAAAAAAAOAAAAAAAAAA8AAAAAAAAAAAAAAA8AAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAARAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABEAAAAAAAAAEgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAARAAAAAAAAABEAAAAAAAAAAAAAAAAA8L8"
				],
				[
					35,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAABIAAAAAAAAAFAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAASAAAAAAAAABIAAAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					1,
					"insert",
					{
						"characters": ".-"
					},
					"AgAAABMAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAVAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATAAAAAAAAABMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					2,
					"left_delete",
					null,
					"AgAAABQAAAAAAAAAFAAAAAAAAAABAAAALRMAAAAAAAAAEwAAAAAAAAABAAAALg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAVAAAAAAAAABUAAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "-"
					},
					"AQAAABMAAAAAAAAAFAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATAAAAAAAAABMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"left_delete",
					null,
					"AQAAABMAAAAAAAAAEwAAAAAAAAABAAAALQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": "./util.js"
					},
					"CQAAABMAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAVAAAAAAAAAAAAAAAVAAAAAAAAABYAAAAAAAAAAAAAABYAAAAAAAAAFwAAAAAAAAAAAAAAFwAAAAAAAAAYAAAAAAAAAAAAAAAYAAAAAAAAABkAAAAAAAAAAAAAABkAAAAAAAAAGgAAAAAAAAAAAAAAGgAAAAAAAAAbAAAAAAAAAAAAAAAbAAAAAAAAABwAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATAAAAAAAAABMAAAAAAAAAAAAAAAAA8L8"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAAB0AAAAAAAAAHgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAdAAAAAAAAAB0AAAAAAAAAAAAAAAAA8L8"
				],
				[
					43,
					1,
					"left_delete",
					null,
					"AQAAAB0AAAAAAAAAHQAAAAAAAAABAAAAMA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAeAAAAAAAAAB4AAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAB0AAAAAAAAAHgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAdAAAAAAAAAB0AAAAAAAAAAAAAAAAA8L8"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAB4AAAAAAAAAHwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAeAAAAAAAAAB4AAAAAAAAAAAAAAAAA8L8"
				],
				[
					46,
					1,
					"left_delete",
					null,
					"AQAAAB4AAAAAAAAAHgAAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfAAAAAAAAAB8AAAAAAAAAAAAAAAAA8L8"
				],
				[
					48,
					1,
					"right_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbUA"
				],
				[
					64,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAH4HAAAAAAAAfwcAAAAAAAAAAAAAfwcAAAAAAACABwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB+BwAAAAAAAH4HAAAAAAAAAAAAAAAA8L8"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAIkGAAAAAAAAigYAAAAAAAAAAAAAigYAAAAAAACKBgAAAAAAAB4AAAAvKi50aGVuKCAgTm9ybWFsaXplUmVzcG9uc2UpKi8",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACJBgAAAAAAAKcGAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					2,
					"left_delete",
					null,
					"AgAAAIkGAAAAAAAAiQYAAAAAAAABAAAAIIgGAAAAAAAAiAYAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACKBgAAAAAAAIoGAAAAAAAAAAAAAAAA8L8"
				],
				[
					104,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADoCAAAaW1wb3J0IFV0aWwgZnJvbSAnLi91dGlsLmpzJzsKCmV4cG9ydCBhc3luYyBmdW5jdGlvbiBOb3JtYWxpemVSZXNwb25zZShyZXNwKSB7CiAgcmVzcCA9IGF3YWl0IHJlc3A7CgogIGlmKFV0aWwuaXNPYmplY3QocmVzcCkpIHsKICAgIGxldCB7IGNhY2hlZCwgc3RhdHVzLCBvaywgcmVkaXJlY3RlZCwgdXJsLCBoZWFkZXJzIH0gPSByZXNwOwogICAgbGV0IGRpc3AgPSBoZWFkZXJzLmdldCgnQ29udGVudC1EaXNwb3NpdGlvbicpOwogICAgbGV0IHR5cGUgPSBoZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJyk7CiAgICBpZihvaykgewogICAgICBpZighZGlzcCAmJiAvanNvbi8udGVzdCh0eXBlKSAmJiB0eXBlb2YgcmVzcC5qc29uID09ICdmdW5jdGlvbicpIHJlc3AgPSB7IGRhdGE6IGF3YWl0IHJlc3AuanNvbigpIH07CiAgICAgIGVsc2UgaWYodHlwZW9mIHJlc3AudGV4dCA9PSAnZnVuY3Rpb24nKSByZXNwID0geyBkYXRhOiBhd2FpdCByZXNwLnRleHQoKSB9OwogICAgICBpZihkaXNwICYmICFyZXNwLmZpbGUpIHJlc3AuZmlsZSA9IGRpc3AucmVwbGFjZSgvLipbJyJdKFteIl0rKVsnIl0uKi8sICckMScpOwogICAgICBpZihkaXNwICYmIHR5cGUpIHJlc3AudHlwZSA9IHR5cGU7CiAgICAgIGlmKHJlc3AuZmlsZSkgaWYgKCEvdG1wXC8vLnRlc3QocmVzcC5maWxlKSkgcmVzcC5maWxlID0gJ3RtcC8nICsgcmVzcC5maWxlOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5pbmZvKCdyZXNwOicsIHJlc3ApOwogICAgICByZXNwID0geyAuLi5yZXNwLCBlcnJvcjogcmVzcC5zdGF0dXNUZXh0IH07CiAgICB9CiAgICBpZihjYWNoZWQpIHJlc3AuY2FjaGVkID0gdHJ1ZTsKICAgIGlmKHJlZGlyZWN0ZWQpIHJlc3AucmVkaXJlY3RlZCA9IHRydWU7CgogICAgbGV0IGZuID0gVXRpbC5tYXBGdW5jdGlvbihoZWFkZXJzKTsKICAgIC8vbGV0IHsga2V5cywgZ2V0IH0gPSBmbjsKICAgIHJlc3AuaGVhZGVycyA9IFV0aWwuZGVmaW5lKE9iamVjdC5mcm9tRW50cmllcyhmbi5lbnRyaWVzKCkpLCB7CiAgICAgIGtleXM6IGZuLAogICAgICBnZXQ6IGZuCiAgICB9KTsKICB9CiAgcmV0dXJuIHJlc3A7Cn0KCmV4cG9ydCBhc3luYyBmdW5jdGlvbiBSZXNwb25zZURhdGEocmVzcCkgewogIHJlc3AgPSBhd2FpdCBOb3JtYWxpemVSZXNwb25zZShyZXNwKTsKICBpZihyZXNwLmRhdGEpIHJldHVybiByZXNwLmRhdGE7Cn0KCmV4cG9ydCBjb25zdCBGZXRjaENhY2hlZCA9IFV0aWwuY2FjaGVkRmV0Y2goewogIGRlYnVnOiB0cnVlLAogIHByaW50KHsgY2FjaGVkLCBvaywgc3RhdHVzLCByZWRpcmVjdGVkLCBzdGF0dXNUZXh0LCB0eXBlLCB1cmwgfSwgZm4sIC4uLmFyZ3MpIHsKICAgIGNvbnNvbGUuZGVidWcoCiAgICAgIGBGZXRjaENhY2hlZCgke2FyZ3MubWFwKChhLCBpKSA9PiAodHlwZW9mIGEgPT0gJ3N0cmluZycgPyAnIicgKyBhICsgJyInIDogaSA9PSAxID8gVXRpbC50b1NvdXJjZSh7IC4uLnRoaXMub3B0cywgLi4uYSB9LCB7IGNvbG9yczogZmFsc2UsIG11bHRpbGluZTogZmFsc2UgfSkgOiBhKSkuam9pbignLCAnKX0pID1gLAogICAgICB7CiAgICAgICAgY2FjaGVkLAogICAgICAgIG9rLAogICAgICAgIHN0YXR1cywKICAgICAgICByZWRpcmVjdGVkLAogICAgICAgIHN0YXR1c1RleHQsCiAgICAgICAgdHlwZSwKICAgICAgICB1cmwKICAgICAgfQogICAgKTsKICB9Cn0pOwoKZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEZldGNoVVJMKHVybCwgYWxsT3B0cyA9IHt9KSB7CiAgbGV0IHsgbm9jYWNoZSA9IGZhbHNlLCAuLi5vcHRzIH0gPSBhbGxPcHRzOwogIGxldCByZXN1bHQ7CiAgbGV0IHJldDsKICBpZihvcHRzLm1ldGhvZCAmJiBvcHRzLm1ldGhvZC50b1VwcGVyQ2FzZSgpID09ICdQT1NUJykgbm9jYWNoZSA9IHRydWU7CiAgLy9sZXQgZmV0Y2ggPSBub2NhY2hlID8gd2luZG93LmZldGNoIDogRmV0Y2hDYWNoZWQ7CiAgaWYoL3RtcFwvLy50ZXN0KHVybCkpIHsKICAgIHVybCA9IHVybC5yZXBsYWNlKC8uKnRtcFwvL2csICd0bXAvJyk7CiAgfSBlbHNlIGlmKC9eXC8vLnRlc3QodXJsKSkgewogICAgdXJsID0gdXJsLnNsaWNlKDEpOwogIH0gZWxzZSBpZigvOlwvXC8vLnRlc3QodXJsKSkgewogIH0gZWxzZSB7CiAgICB1cmwgPSAnc3RhdGljLycgKyB1cmw7CiAgfQogIHRyeSB7CiAgICBpZighcmV0KSByZXQgPSByZXN1bHQgPSBhd2FpdCBmZXRjaCh1cmwsIG9wdHMpOwogIH0gY2F0Y2goZXJyb3IpIHsKICAgIFV0aWwucHV0RXJyb3IoZXJyb3IpOwogICAgdGhyb3cgZXJyb3I7CiAgfQogIHJldHVybiByZXQ7Cn0KAAAAAAAAAADGCAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAUBQAAAAAAABQFAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAHUGAAAAAAAAdwYAAAAAAAAAAAAAyQQAAAAAAADLBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADJBAAAAAAAAHUGAAAAAAAAAAAAAAAA8L8"
				],
				[
					116,
					1,
					"insert",
					{
						"characters": "(url,options"
					},
					"DAAAAMkEAAAAAAAAygQAAAAAAAAAAAAAygQAAAAAAADLBAAAAAAAAAAAAADLBAAAAAAAAMwEAAAAAAAAAAAAAMwEAAAAAAAAzQQAAAAAAAAAAAAAzQQAAAAAAADOBAAAAAAAAAAAAADOBAAAAAAAAM8EAAAAAAAAAAAAAM8EAAAAAAAA0AQAAAAAAAAAAAAA0AQAAAAAAADRBAAAAAAAAAAAAADRBAAAAAAAANIEAAAAAAAAAAAAANIEAAAAAAAA0wQAAAAAAAAAAAAA0wQAAAAAAADUBAAAAAAAAAAAAADUBAAAAAAAANUEAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADJBAAAAAAAAMkEAAAAAAAAAAAAAAAA8L8"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAANUEAAAAAAAA1gQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADVBAAAAAAAANUEAAAAAAAAAAAAAAAA8L8"
				],
				[
					118,
					1,
					"insert",
					{
						"characters": " =>"
					},
					"AwAAANYEAAAAAAAA1wQAAAAAAAAAAAAA1wQAAAAAAADYBAAAAAAAAAAAAADYBAAAAAAAANkEAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADWBAAAAAAAANYEAAAAAAAAAAAAAAAA8L8"
				],
				[
					119,
					1,
					"insert",
					{
						"characters": " fetch(url,op"
					},
					"DQAAANkEAAAAAAAA2gQAAAAAAAAAAAAA2gQAAAAAAADbBAAAAAAAAAAAAADbBAAAAAAAANwEAAAAAAAAAAAAANwEAAAAAAAA3QQAAAAAAAAAAAAA3QQAAAAAAADeBAAAAAAAAAAAAADeBAAAAAAAAN8EAAAAAAAAAAAAAN8EAAAAAAAA4AQAAAAAAAAAAAAA4AQAAAAAAADhBAAAAAAAAAAAAADhBAAAAAAAAOIEAAAAAAAAAAAAAOIEAAAAAAAA4wQAAAAAAAAAAAAA4wQAAAAAAADkBAAAAAAAAAAAAADkBAAAAAAAAOUEAAAAAAAAAAAAAOUEAAAAAAAA5gQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADZBAAAAAAAANkEAAAAAAAAAAAAAAAA8L8"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": "tions);"
					},
					"BwAAAOYEAAAAAAAA5wQAAAAAAAAAAAAA5wQAAAAAAADoBAAAAAAAAAAAAADoBAAAAAAAAOkEAAAAAAAAAAAAAOkEAAAAAAAA6gQAAAAAAAAAAAAA6gQAAAAAAADrBAAAAAAAAAAAAADrBAAAAAAAAOwEAAAAAAAAAAAAAOwEAAAAAAAA7QQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmBAAAAAAAAOYEAAAAAAAAAAAAAAAA8L8"
				],
				[
					121,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAO0EAAAAAAAA7gQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtBAAAAAAAAO0EAAAAAAAAAAAAAAAA8L8"
				],
				[
					128,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					142,
					1,
					"",
					null,
					"AQAAAAAAAAAAAAAAWwAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					145,
					11,
					"right_delete",
					null,
					"CwAAAAoAAAAAAAAACgAAAAAAAAABAAAAYQoAAAAAAAAACgAAAAAAAAABAAAAYwoAAAAAAAAACgAAAAAAAAABAAAAaAoAAAAAAAAACgAAAAAAAAABAAAAZQoAAAAAAAAACgAAAAAAAAABAAAAZAoAAAAAAAAACgAAAAAAAAABAAAARgoAAAAAAAAACgAAAAAAAAABAAAAZQoAAAAAAAAACgAAAAAAAAABAAAAdAoAAAAAAAAACgAAAAAAAAABAAAAYwoAAAAAAAAACgAAAAAAAAABAAAAaAoAAAAAAAAACgAAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKAAAAAAAAAAoAAAAAAAAAAAAAAAAA8L8"
				],
				[
					146,
					1,
					"left_delete",
					null,
					"AQAAAAkAAAAAAAAACQAAAAAAAAABAAAAYw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKAAAAAAAAAAoAAAAAAAAAAAAAAAAA8L8"
				],
				[
					148,
					20,
					"right_delete",
					null,
					"FAAAACcAAAAAAAAAJwAAAAAAAAABAAAALCcAAAAAAAAAJwAAAAAAAAABAAAAICcAAAAAAAAAJwAAAAAAAAABAAAAcCcAAAAAAAAAJwAAAAAAAAABAAAAdScAAAAAAAAAJwAAAAAAAAABAAAAdCcAAAAAAAAAJwAAAAAAAAABAAAARScAAAAAAAAAJwAAAAAAAAABAAAAcicAAAAAAAAAJwAAAAAAAAABAAAAcicAAAAAAAAAJwAAAAAAAAABAAAAbycAAAAAAAAAJwAAAAAAAAABAAAAcicAAAAAAAAAJwAAAAAAAAABAAAALCcAAAAAAAAAJwAAAAAAAAABAAAAICcAAAAAAAAAJwAAAAAAAAABAAAAdCcAAAAAAAAAJwAAAAAAAAABAAAAbycAAAAAAAAAJwAAAAAAAAABAAAAUycAAAAAAAAAJwAAAAAAAAABAAAAbycAAAAAAAAAJwAAAAAAAAABAAAAdScAAAAAAAAAJwAAAAAAAAABAAAAcicAAAAAAAAAJwAAAAAAAAABAAAAYycAAAAAAAAAJwAAAAAAAAABAAAAZQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAnAAAAAAAAACcAAAAAAAAAAAAAAAAA8L8"
				],
				[
					173,
					1,
					"",
					null,
					"AQAAALsDAAAAAAAAuwMAAAAAAAAFAAAAVXRpbC4",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC7AwAAAAAAAMADAAAAAAAAAAAAAAAA8L8"
				],
				[
					174,
					1,
					"",
					null,
					"AQAAAAIEAAAAAAAAAgQAAAAAAAAFAAAAVXRpbC4",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAACBAAAAAAAAAcEAAAAAAAAAAAAAAAA8L8"
				],
				[
					188,
					1,
					"insert",
					{
						"characters": "\nconsole.log"
					},
					"DgAAAOIIAAAAAAAA4wgAAAAAAAAAAAAA4wgAAAAAAADlCAAAAAAAAAAAAADlCAAAAAAAAOcIAAAAAAAAAAAAAOcIAAAAAAAA6AgAAAAAAAAAAAAA6AgAAAAAAADpCAAAAAAAAAAAAADpCAAAAAAAAOoIAAAAAAAAAAAAAOoIAAAAAAAA6wgAAAAAAAAAAAAA6wgAAAAAAADsCAAAAAAAAAAAAADsCAAAAAAAAO0IAAAAAAAAAAAAAO0IAAAAAAAA7ggAAAAAAAAAAAAA7ggAAAAAAADvCAAAAAAAAAAAAADvCAAAAAAAAPAIAAAAAAAAAAAAAPAIAAAAAAAA8QgAAAAAAAAAAAAA8QgAAAAAAADyCAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiCAAAAAAAAOIIAAAAAAAAAAAAAAAA8L8"
				],
				[
					189,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAPIIAAAAAAAA9AgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyCAAAAAAAAPIIAAAAAAAAAAAAAAAA8L8"
				],
				[
					190,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAPMIAAAAAAAA9QgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzCAAAAAAAAPMIAAAAAAAAAAAAAAAA8L8"
				],
				[
					191,
					1,
					"insert",
					{
						"characters": "FetchURL"
					},
					"CAAAAPQIAAAAAAAA9QgAAAAAAAAAAAAA9QgAAAAAAAD2CAAAAAAAAAAAAAD2CAAAAAAAAPcIAAAAAAAAAAAAAPcIAAAAAAAA+AgAAAAAAAAAAAAA+AgAAAAAAAD5CAAAAAAAAAAAAAD5CAAAAAAAAPoIAAAAAAAAAAAAAPoIAAAAAAAA+wgAAAAAAAAAAAAA+wgAAAAAAAD8CAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0CAAAAAAAAPQIAAAAAAAAAAAAAAAA8L8"
				],
				[
					192,
					1,
					"insert",
					{
						"characters": " ERROR:"
					},
					"BwAAAPwIAAAAAAAA/QgAAAAAAAAAAAAA/QgAAAAAAAD+CAAAAAAAAAAAAAD+CAAAAAAAAP8IAAAAAAAAAAAAAP8IAAAAAAAAAAkAAAAAAAAAAAAAAAkAAAAAAAABCQAAAAAAAAAAAAABCQAAAAAAAAIJAAAAAAAAAAAAAAIJAAAAAAAAAwkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8CAAAAAAAAPwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					194,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAAQJAAAAAAAABQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAECQAAAAAAAAQJAAAAAAAAAAAAAAAA8L8"
				],
				[
					195,
					2,
					"left_delete",
					null,
					"AgAAAAQJAAAAAAAABAkAAAAAAAABAAAALAMJAAAAAAAAAwkAAAAAAAABAAAAJw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFCQAAAAAAAAUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					196,
					1,
					"insert",
					{
						"characters": " +"
					},
					"AgAAAAMJAAAAAAAABAkAAAAAAAAAAAAABAkAAAAAAAAFCQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAADCQAAAAAAAAMJAAAAAAAAAAAAAAAA8L8"
				],
				[
					197,
					2,
					"left_delete",
					null,
					"AgAAAAQJAAAAAAAABAkAAAAAAAABAAAAKwMJAAAAAAAAAwkAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFCQAAAAAAAAUJAAAAAAAAAAAAAAAA8L8"
				],
				[
					198,
					1,
					"insert",
					{
						"characters": "',error.messa"
					},
					"DQAAAAMJAAAAAAAABAkAAAAAAAAAAAAABAkAAAAAAAAFCQAAAAAAAAAAAAAFCQAAAAAAAAYJAAAAAAAAAAAAAAYJAAAAAAAABwkAAAAAAAAAAAAABwkAAAAAAAAICQAAAAAAAAAAAAAICQAAAAAAAAkJAAAAAAAAAAAAAAkJAAAAAAAACgkAAAAAAAAAAAAACgkAAAAAAAALCQAAAAAAAAAAAAALCQAAAAAAAAwJAAAAAAAAAAAAAAwJAAAAAAAADQkAAAAAAAAAAAAADQkAAAAAAAAOCQAAAAAAAAAAAAAOCQAAAAAAAA8JAAAAAAAAAAAAAA8JAAAAAAAAEAkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAADCQAAAAAAAAMJAAAAAAAAAAAAAAAA8L8"
				],
				[
					199,
					1,
					"insert",
					{
						"characters": "ge+"
					},
					"AwAAABAJAAAAAAAAEQkAAAAAAAAAAAAAEQkAAAAAAAASCQAAAAAAAAAAAAASCQAAAAAAABMJAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAQCQAAAAAAABAJAAAAAAAAAAAAAAAA8L8"
				],
				[
					200,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAABMJAAAAAAAAFQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAATCQAAAAAAABMJAAAAAAAAAAAAAAAA8L8"
				],
				[
					201,
					1,
					"insert",
					{
						"characters": "\\n"
					},
					"AgAAABQJAAAAAAAAFQkAAAAAAAAAAAAAFQkAAAAAAAAWCQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAUCQAAAAAAABQJAAAAAAAAAAAAAAAA8L8"
				],
				[
					203,
					1,
					"insert",
					{
						"characters": "+error.stack"
					},
					"DAAAABcJAAAAAAAAGAkAAAAAAAAAAAAAGAkAAAAAAAAZCQAAAAAAAAAAAAAZCQAAAAAAABoJAAAAAAAAAAAAABoJAAAAAAAAGwkAAAAAAAAAAAAAGwkAAAAAAAAcCQAAAAAAAAAAAAAcCQAAAAAAAB0JAAAAAAAAAAAAAB0JAAAAAAAAHgkAAAAAAAAAAAAAHgkAAAAAAAAfCQAAAAAAAAAAAAAfCQAAAAAAACAJAAAAAAAAAAAAACAJAAAAAAAAIQkAAAAAAAAAAAAAIQkAAAAAAAAiCQAAAAAAAAAAAAAiCQAAAAAAACMJAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAXCQAAAAAAABcJAAAAAAAAAAAAAAAA8L8"
				],
				[
					205,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAACQJAAAAAAAAJQkAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAkCQAAAAAAACQJAAAAAAAAAAAAAAAA8L8"
				],
				[
					213,
					1,
					"cut",
					null,
					"AQAAACYJAAAAAAAAJgkAAAAAAAAaAAAAICAgIFV0aWwucHV0RXJyb3IoZXJyb3IpOwo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAmCQAAAAAAACYJAAAAAAAAAAAAAAAAAAA"
				],
				[
					225,
					1,
					"insert",
					{
						"characters": "{"
					},
					"AQAAAA0FAAAAAAAADgUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAANBQAAAAAAAA0FAAAAAAAAAAAAAAAA8L8"
				],
				[
					226,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAA4FAAAAAAAADwUAAAAAAAAAAAAADwUAAAAAAAAQBQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAOBQAAAAAAAA4FAAAAAAAAAAAAAAAA8L8"
				],
				[
					228,
					1,
					"insert",
					{
						"characters": "console.log"
					},
					"CwAAAA8FAAAAAAAAEAUAAAAAAAAAAAAAEAUAAAAAAAARBQAAAAAAAAAAAAARBQAAAAAAABIFAAAAAAAAAAAAABIFAAAAAAAAEwUAAAAAAAAAAAAAEwUAAAAAAAAUBQAAAAAAAAAAAAAUBQAAAAAAABUFAAAAAAAAAAAAABUFAAAAAAAAFgUAAAAAAAAAAAAAFgUAAAAAAAAXBQAAAAAAAAAAAAAXBQAAAAAAABgFAAAAAAAAAAAAABgFAAAAAAAAGQUAAAAAAAAAAAAAGQUAAAAAAAAaBQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAPBQAAAAAAAA8FAAAAAAAAAAAAAAAAAAA"
				],
				[
					229,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAABoFAAAAAAAAHAUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAaBQAAAAAAABoFAAAAAAAAAAAAAAAA8L8"
				],
				[
					230,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAABsFAAAAAAAAHQUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAbBQAAAAAAABsFAAAAAAAAAAAAAAAA8L8"
				],
				[
					231,
					1,
					"insert",
					{
						"characters": "FetchCached"
					},
					"CwAAABwFAAAAAAAAHQUAAAAAAAAAAAAAHQUAAAAAAAAeBQAAAAAAAAAAAAAeBQAAAAAAAB8FAAAAAAAAAAAAAB8FAAAAAAAAIAUAAAAAAAAAAAAAIAUAAAAAAAAhBQAAAAAAAAAAAAAhBQAAAAAAACIFAAAAAAAAAAAAACIFAAAAAAAAIwUAAAAAAAAAAAAAIwUAAAAAAAAkBQAAAAAAAAAAAAAkBQAAAAAAACUFAAAAAAAAAAAAACUFAAAAAAAAJgUAAAAAAAAAAAAAJgUAAAAAAAAnBQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAcBQAAAAAAABwFAAAAAAAAAAAAAAAA8L8"
				],
				[
					233,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAACgFAAAAAAAAKQUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAoBQAAAAAAACgFAAAAAAAAAAAAAAAA8L8"
				],
				[
					234,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAACkFAAAAAAAAKwUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAApBQAAAAAAACkFAAAAAAAAAAAAAAAA8L8"
				],
				[
					235,
					1,
					"insert",
					{
						"characters": "urol"
					},
					"BAAAACoFAAAAAAAAKwUAAAAAAAAAAAAAKwUAAAAAAAAsBQAAAAAAAAAAAAAsBQAAAAAAAC0FAAAAAAAAAAAAAC0FAAAAAAAALgUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqBQAAAAAAACoFAAAAAAAAAAAAAAAA8L8"
				],
				[
					236,
					2,
					"left_delete",
					null,
					"AgAAAC0FAAAAAAAALQUAAAAAAAABAAAAbCwFAAAAAAAALAUAAAAAAAABAAAAbw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAuBQAAAAAAAC4FAAAAAAAAAAAAAAAA8L8"
				],
				[
					237,
					1,
					"insert",
					{
						"characters": "l,options"
					},
					"CQAAACwFAAAAAAAALQUAAAAAAAAAAAAALQUAAAAAAAAuBQAAAAAAAAAAAAAuBQAAAAAAAC8FAAAAAAAAAAAAAC8FAAAAAAAAMAUAAAAAAAAAAAAAMAUAAAAAAAAxBQAAAAAAAAAAAAAxBQAAAAAAADIFAAAAAAAAAAAAADIFAAAAAAAAMwUAAAAAAAAAAAAAMwUAAAAAAAA0BQAAAAAAAAAAAAA0BQAAAAAAADUFAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsBQAAAAAAACwFAAAAAAAAAAAAAAAA8L8"
				],
				[
					239,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAADcFAAAAAAAAOAUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA3BQAAAAAAADcFAAAAAAAAAAAAAAAA8L8"
				],
				[
					241,
					1,
					"insert",
					{
						"characters": "return"
					},
					"BgAAADkFAAAAAAAAOgUAAAAAAAAAAAAAOgUAAAAAAAA7BQAAAAAAAAAAAAA7BQAAAAAAADwFAAAAAAAAAAAAADwFAAAAAAAAPQUAAAAAAAAAAAAAPQUAAAAAAAA+BQAAAAAAAAAAAAA+BQAAAAAAAD8FAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA5BQAAAAAAADkFAAAAAAAAAAAAAAAA8L8"
				],
				[
					242,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAD8FAAAAAAAAQAUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA/BQAAAAAAAD8FAAAAAAAAAAAAAAAA8L8"
				],
				[
					244,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"AgAAAFMFAAAAAAAAVAUAAAAAAAAAAAAAVAUAAAAAAABVBQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABTBQAAAAAAAFMFAAAAAAAAAAAAAAAA8L8"
				],
				[
					247,
					1,
					"insert",
					{
						"characters": "M"
					},
					"AQAAAFUFAAAAAAAAVgUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABVBQAAAAAAAFUFAAAAAAAAAAAAAAAA8L8"
				],
				[
					248,
					1,
					"left_delete",
					null,
					"AQAAAFUFAAAAAAAAVQUAAAAAAAABAAAATQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABWBQAAAAAAAFYFAAAAAAAAAAAAAAAA8L8"
				],
				[
					249,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAFUFAAAAAAAAVgUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABVBQAAAAAAAFUFAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "importReplacer.js",
			"settings":
			{
				"buffer_size": 860,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAIAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"insert",
					{
						"characters": "exc"
					},
					"AwAAAAMAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAYAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAADBA"
				],
				[
					5,
					3,
					"left_delete",
					null,
					"AwAAAAUAAAAAAAAABQAAAAAAAAABAAAAYwQAAAAAAAAABAAAAAAAAAABAAAAeAMAAAAAAAAAAwAAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "export"
					},
					"BgAAAAEAAAAAAAAAAgAAAAAAAAAAAAAAAgAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAGAAAAAAAAAAAAAAAGAAAAAAAAAAcAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": " default"
					},
					"CAAAAAcAAAAAAAAACAAAAAAAAAAAAAAACAAAAAAAAAAJAAAAAAAAAAAAAAAJAAAAAAAAAAoAAAAAAAAAAAAAAAoAAAAAAAAACwAAAAAAAAAAAAAACwAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAA0AAAAAAAAAAAAAAA0AAAAAAAAADgAAAAAAAAAAAAAADgAAAAAAAAAPAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABwAAAAAAAAAHAAAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAA8AAAAAAAAAEAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADwAAAAAAAAAPAAAAAAAAAAAAAAAAAPC/"
				],
				[
					10,
					1,
					"ensure_newline_at_eof",
					null,
					"AQAAAC8CAAAAAAAAMAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAF5A"
				],
				[
					14,
					1,
					"paste",
					null,
					"AQAAAAEAAAAAAAAA4wAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"paste",
					null,
					"AQAAAOMAAAAAAAAAuwEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4wAAAAAAAADjAAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAALsBAAAAAAAAvAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuwEAAAAAAAC7AQAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"insert",
					{
						"characters": "unique,"
					},
					"BwAAACEAAAAAAAAAIgAAAAAAAAAAAAAAIgAAAAAAAAAjAAAAAAAAAAAAAAAjAAAAAAAAACQAAAAAAAAAAAAAACQAAAAAAAAAJQAAAAAAAAAAAAAAJQAAAAAAAAAmAAAAAAAAAAAAAAAmAAAAAAAAACcAAAAAAAAAAAAAACcAAAAAAAAAKAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIQAAAAAAAAAhAAAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					2,
					"right_delete",
					null,
					"AgAAAM0CAAAAAAAAzQIAAAAAAAAEAAAAdXRpbM0CAAAAAAAAzQIAAAAAAAABAAAALg",
					"AQAAAAAAAAABAAAAzQIAAAAAAADRAgAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADuAwAACmltcG9ydCB7IGxhenlQcm9wZXJ0aWVzLG1lbW9pemUsdW5pcXVlLCBhYmJyZXZpYXRlLCBjbGFzc05hbWUsIGVzY2FwZSwgZ2V0TWV0aG9kcywgaXNPYmplY3QsIHJhbmRTdHIsIHRvVW5peFRpbWUsIHRyeUNhdGNoLCB0cnlGdW5jdGlvbiwgdW5peFRpbWUsIHdhaXRGb3IsIHdlYWtBc3NpZ24sIHdlYWtNYXBwZXIsIGZpbHRlciwgZmlsdGVyS2V5cywgbWF0Y2hBbGwgfSBmcm9tICcuL2xpYi9taXNjLmpzJzsKaW1wb3J0IHsgSWZEZWJ1ZywgTG9nSWZEZWJ1ZywgUmVhZEZpbGUsIExvYWRIaXN0b3J5LCBSZWFkSlNPTiwgTWFwRmlsZSwgV3JpdGVGaWxlLCBXcml0ZUpTT04sIERpckl0ZXJhdG9yLCBSZWN1cnNpdmVEaXJJdGVyYXRvciwgUmVhZERpclJlY3Vyc2l2ZSwgRmlsdGVyLCBGaWx0ZXJJbWFnZXMsIFNvcnRGaWxlcywgU3RhdEZpbGVzIH0gZnJvbSAnLi9pby1oZWxwZXJzLmpzJzsKCgpleHBvcnQgZGVmYXVsdCBjb25zdCBpbXBvcnRSZXBsYWNlciA9IHsKICByZXBsYWNlbWVudE1hcDogbWVtb2l6ZSgoKSA9PgogICAgT2JqZWN0LmVudHJpZXMoUmVhZEpTT04oJ3BhY2thZ2UuanNvbicpLl9tb2R1bGVBbGlhc2VzKQogICAgICAuZmlsdGVyKChbaywgdl0pID0+ICEvWy5cL10vLnRlc3QodikpCiAgICAgIC5tYXAoYSA9PiBhLnJldmVyc2UoKSkKICApLAogIHJlZ2V4cCgpIHsKICAgIHJldHVybiBuZXcgUmVnRXhwKCJcXGJmcm9tXFxzKicoXFwiICsgdW5pcXVlKHRoaXMucmVwbGFjZW1lbnRNYXAoKS5tYXAoKFtrLCB2XSkgPT4gaykpLmpvaW4oJ3wnKSArICIpJzsiLCAnZ20nKTsKICB9LAogIHJlcGxhY2VyRnVuYygpIHsKICAgIGxldCBtID0gT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMucmVwbGFjZW1lbnRNYXAoKSk7CgogICAgcmV0dXJuICh3LCBzLCBpKSA9PiBgZnJvbSAnJHttW3NdfSc7YDsKICB9LAogIHJlcGxhY2UocykgewogICAgICAgcmV0dXJuIHMucmVwbGFjZUFsbCh0aGlzLnJlZ2V4cCgpLCB0aGlzLnJlcGxhY2VyRnVuYygpKTsKICB9Cn07CgAAAAAAAAAAkAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwgEAAAAAAADCAQAAAAAAAAAAAAAAAHVA"
				],
				[
					52,
					1,
					"right_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADhA"
				],
				[
					59,
					7,
					"left_delete",
					null,
					"BwAAAHIAAAAAAAAAcgAAAAAAAAABAAAAdHEAAAAAAAAAcQAAAAAAAAABAAAAbHAAAAAAAAAAcAAAAAAAAAABAAAAdW8AAAAAAAAAbwAAAAAAAAABAAAAYW4AAAAAAAAAbgAAAAAAAAABAAAAZm0AAAAAAAAAbQAAAAAAAAABAAAAZWwAAAAAAAAAbAAAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAcwAAAAAAAABzAAAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": "export"
					},
					"BgAAAIgCAAAAAAAAiQIAAAAAAAAAAAAAiQIAAAAAAACKAgAAAAAAAAAAAACKAgAAAAAAAIsCAAAAAAAAAAAAAIsCAAAAAAAAjAIAAAAAAAAAAAAAjAIAAAAAAACNAgAAAAAAAAAAAACNAgAAAAAAAI4CAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiAIAAAAAAACIAgAAAAAAAAAAAAAAAExA"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": " default"
					},
					"CAAAAI4CAAAAAAAAjwIAAAAAAAAAAAAAjwIAAAAAAACQAgAAAAAAAAAAAACQAgAAAAAAAJECAAAAAAAAAAAAAJECAAAAAAAAkgIAAAAAAAAAAAAAkgIAAAAAAACTAgAAAAAAAAAAAACTAgAAAAAAAJQCAAAAAAAAAAAAAJQCAAAAAAAAlQIAAAAAAAAAAAAAlQIAAAAAAACWAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjgIAAAAAAACOAgAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"insert",
					{
						"characters": " impor"
					},
					"BgAAAJYCAAAAAAAAlwIAAAAAAAAAAAAAlwIAAAAAAACYAgAAAAAAAAAAAACYAgAAAAAAAJkCAAAAAAAAAAAAAJkCAAAAAAAAmgIAAAAAAAAAAAAAmgIAAAAAAACbAgAAAAAAAAAAAACbAgAAAAAAAJwCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlgIAAAAAAACWAgAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"insert_completion",
					{
						"completion": "importReplacer",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "importReplacer"
					},
					"AgAAAJcCAAAAAAAAlwIAAAAAAAAFAAAAaW1wb3KXAgAAAAAAAKUCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnAIAAAAAAACcAgAAAAAAAAAAAAAAAPC/"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAKUCAAAAAAAApgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApQIAAAAAAAClAgAAAAAAAAAAAAAAAPC/"
				],
				[
					67,
					1,
					"left_delete",
					null,
					"AQAAAKUCAAAAAAAApQIAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAApgIAAAAAAACmAgAAAAAAAAAAAAAAAPC/"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAKUCAAAAAAAApgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApQIAAAAAAAClAgAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAIcCAAAAAAAAiAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhwIAAAAAAACHAgAAAAAAAAAAAAAAAG5A"
				],
				[
					71,
					1,
					"ensure_newline_at_eof",
					null,
					"AQAAAKcCAAAAAAAAqAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiAIAAAAAAACIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACoAgAAaW1wb3J0IHttZW1vaXplLHVuaXF1ZSwgZmlsdGVyIH0gZnJvbSAnLi9saWIvbWlzYy5qcyc7CmltcG9ydCB7IFJlYWRKU09OIH0gZnJvbSAnLi9pby1oZWxwZXJzLmpzJzsKCgpleHBvcnQgIGNvbnN0IGltcG9ydFJlcGxhY2VyID0gewogIHJlcGxhY2VtZW50TWFwOiBtZW1vaXplKCgpID0+CiAgICBPYmplY3QuZW50cmllcyhSZWFkSlNPTigncGFja2FnZS5qc29uJykuX21vZHVsZUFsaWFzZXMpCiAgICAgIC5maWx0ZXIoKFtrLCB2XSkgPT4gIS9bLlwvXS8udGVzdCh2KSkKICAgICAgLm1hcChhID0+IGEucmV2ZXJzZSgpKQogICksCiAgcmVnZXhwKCkgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoIlxcYmZyb21cXHMqJyhcXCIgKyB1bmlxdWUodGhpcy5yZXBsYWNlbWVudE1hcCgpLm1hcCgoW2ssIHZdKSA9PiBrKSkuam9pbignfCcpICsgIiknOyIsICdnbScpOwogIH0sCiAgcmVwbGFjZXJGdW5jKCkgewogICAgbGV0IG0gPSBPYmplY3QuZnJvbUVudHJpZXModGhpcy5yZXBsYWNlbWVudE1hcCgpKTsKCiAgICByZXR1cm4gKHcsIHMsIGkpID0+IGBmcm9tICcke21bc119JztgOwogIH0sCiAgcmVwbGFjZShzKSB7CiAgICAgICByZXR1cm4gcy5yZXBsYWNlQWxsKHRoaXMucmVnZXhwKCksIHRoaXMucmVwbGFjZXJGdW5jKCkpOwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IGltcG9ydFJlcGxhY2VyOwoAAAAAAAAAAKUCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiAIAAAAAAACIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					111,
					1,
					"insert",
					{
						"characters": "f"
					},
					"AQAAADwCAAAAAAAAPQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAIAAAAAAAA8AgAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"left_delete",
					null,
					"AQAAADwCAAAAAAAAPAIAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAAPQIAAAAAAAA9AgAAAAAAAAAAAAAAAPC/"
				],
				[
					119,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAD0CAAAAAAAAPgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPQIAAAAAAAA9AgAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": " from"
					},
					"BQAAAD4CAAAAAAAAPwIAAAAAAAAAAAAAPwIAAAAAAABAAgAAAAAAAAAAAABAAgAAAAAAAEECAAAAAAAAAAAAAEECAAAAAAAAQgIAAAAAAAAAAAAAQgIAAAAAAABDAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPgIAAAAAAAA+AgAAAAAAAAAAAAAAAPC/"
				],
				[
					125,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AwAAAEYCAAAAAAAARwIAAAAAAAAAAAAARwIAAAAAAABJAgAAAAAAAAAAAABJAgAAAAAAAEsCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARgIAAAAAAABGAgAAAAAAAAAAAAAAAGVA"
				],
				[
					141,
					1,
					"",
					null,
					"AQAAAEsCAAAAAAAATQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASwIAAAAAAABLAgAAAAAAAAAAAAAAAPC/"
				],
				[
					144,
					2,
					"left_delete",
					null,
					"AgAAAEwCAAAAAAAATAIAAAAAAAABAAAAIEsCAAAAAAAASwIAAAAAAAABAAAAPg",
					"AQAAAAAAAAABAAAATQIAAAAAAABNAgAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					1,
					"",
					null,
					"AQAAAEsCAAAAAAAAmQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASwIAAAAAAABLAgAAAAAAAAAAAAAAAPC/"
				],
				[
					154,
					1,
					"insert",
					{
						"characters": "from)"
					},
					"BQAAAGYCAAAAAAAAZwIAAAAAAAAAAAAAZwIAAAAAAABoAgAAAAAAAAAAAABoAgAAAAAAAGkCAAAAAAAAAAAAAGkCAAAAAAAAagIAAAAAAAAAAAAAagIAAAAAAABrAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZgIAAAAAAABmAgAAAAAAAAAAAAAAAPC/"
				],
				[
					157,
					1,
					"cut",
					null,
					"AQAAAGsCAAAAAAAAawIAAAAAAAAjAAAAJ3F1aWNranMvcWpzLW1vZHVsZXMvbGliL3hwYXRoLmpzJyk",
					"AQAAAAAAAAABAAAAawIAAAAAAACOAgAAAAAAAAAAAAAAAPC/"
				],
				[
					219,
					1,
					"insert",
					{
						"characters": "file"
					},
					"BAAAAMYBAAAAAAAAxwEAAAAAAAAAAAAAxwEAAAAAAADIAQAAAAAAAAAAAADIAQAAAAAAAMkBAAAAAAAAAAAAAMkBAAAAAAAAygEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxgEAAAAAAADGAQAAAAAAAAAAAAAAAPC/"
				],
				[
					220,
					4,
					"left_delete",
					null,
					"BAAAAMkBAAAAAAAAyQEAAAAAAAABAAAAZcgBAAAAAAAAyAEAAAAAAAABAAAAbMcBAAAAAAAAxwEAAAAAAAABAAAAacYBAAAAAAAAxgEAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAAygEAAAAAAADKAQAAAAAAAAAAAAAAAPC/"
				],
				[
					221,
					1,
					"insert",
					{
						"characters": "for"
					},
					"AwAAAMYBAAAAAAAAxwEAAAAAAAAAAAAAxwEAAAAAAADIAQAAAAAAAAAAAADIAQAAAAAAAMkBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxgEAAAAAAADGAQAAAAAAAAAAAAAAAPC/"
				],
				[
					228,
					1,
					"insert",
					{
						"characters": "from"
					},
					"BQAAAMYBAAAAAAAAxwEAAAAAAAAAAAAAxwEAAAAAAADHAQAAAAAAAAMAAABmb3LHAQAAAAAAAMgBAAAAAAAAAAAAAMgBAAAAAAAAyQEAAAAAAAAAAAAAyQEAAAAAAADKAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxgEAAAAAAADJAQAAAAAAAAAAAAAAAPC/"
				],
				[
					282,
					1,
					"paste",
					null,
					"AQAAACkCAAAAAAAASgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKQIAAAAAAAApAgAAAAAAAAAAAAAAAPC/"
				],
				[
					284,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAEsCAAAAAAAATAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASwIAAAAAAABLAgAAAAAAAAAAAAAAAPC/"
				],
				[
					295,
					1,
					"cut",
					null,
					"AQAAAG0CAAAAAAAAbQIAAAAAAAA0AAAAICAgIHBhdGgucmVsYXRpdmUocGF0aC5kaXJuYW1lKGZyb20pLCdsaWIvbWlzYy5qcycpCg",
					"AQAAAAAAAAABAAAAbQIAAAAAAAChAgAAAAAAAAAAAAAAAPC/"
				],
				[
					298,
					1,
					"insert",
					{
						"characters": "frin"
					},
					"BAAAAKcCAAAAAAAAqAIAAAAAAAAAAAAAqAIAAAAAAACpAgAAAAAAAAAAAACpAgAAAAAAAKoCAAAAAAAAAAAAAKoCAAAAAAAAqwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApwIAAAAAAACnAgAAAAAAAAAAAAAAAPC/"
				],
				[
					299,
					2,
					"left_delete",
					null,
					"AgAAAKoCAAAAAAAAqgIAAAAAAAABAAAAbqkCAAAAAAAAqQIAAAAAAAABAAAAaQ",
					"AQAAAAAAAAABAAAAqwIAAAAAAACrAgAAAAAAAAAAAAAAAPC/"
				],
				[
					300,
					1,
					"insert",
					{
						"characters": "om"
					},
					"AgAAAKkCAAAAAAAAqgIAAAAAAAAAAAAAqgIAAAAAAACrAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqQIAAAAAAACpAgAAAAAAAAAAAAAAAPC/"
				],
				[
					304,
					1,
					"left_delete",
					null,
					"AQAAAGwCAAAAAAAAbAIAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAbQIAAAAAAABtAgAAAAAAAAAAAAAAgH5A"
				],
				[
					343,
					1,
					"cut",
					null,
					"AQAAACkCAAAAAAAAKQIAAAAAAAAgAAAAcGF0aC5yZWxhdGl2ZShwYXRoLmRpcm5hbWUoZnJvbSk",
					"AQAAAAAAAAABAAAAKQIAAAAAAABJAgAAAAAAAAAAAAAAAPC/"
				],
				[
					348,
					1,
					"paste",
					null,
					"AQAAACcCAAAAAAAARwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJwIAAAAAAAAnAgAAAAAAAAAAAAAAAPC/"
				],
				[
					349,
					1,
					"left_delete",
					null,
					"AQAAAEYCAAAAAAAARgIAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAARwIAAAAAAABHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					350,
					1,
					"insert",
					{
						"characters": "),"
					},
					"AgAAAEYCAAAAAAAARwIAAAAAAAAAAAAARwIAAAAAAABIAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARgIAAAAAAABGAgAAAAAAAAAAAAAAAPC/"
				],
				[
					351,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAEgCAAAAAAAASQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAIAAAAAAABIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					353,
					1,
					"right_delete",
					null,
					"AQAAAEsCAAAAAAAASwIAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAASwIAAAAAAABLAgAAAAAAAAAAAAAAAPC/"
				],
				[
					355,
					1,
					"insert",
					{
						"characters": "]"
					},
					"AQAAAEwCAAAAAAAATQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATAIAAAAAAABMAgAAAAAAAAAAAAAAAPC/"
				],
				[
					361,
					1,
					"right_delete",
					null,
					"AQAAAE4CAAAAAAAATgIAAAAAAAABAAAAXQ",
					"AQAAAAAAAAABAAAATgIAAAAAAABOAgAAAAAAAAAAAAAAAPC/"
				],
				[
					365,
					1,
					"insert",
					{
						"characters": "ci"
					},
					"AgAAAAUCAAAAAAAABgIAAAAAAAAAAAAABgIAAAAAAAAHAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABQIAAAAAAAAFAgAAAAAAAAAAAAAAAIJA"
				],
				[
					366,
					2,
					"left_delete",
					null,
					"AgAAAAYCAAAAAAAABgIAAAAAAAABAAAAaQUCAAAAAAAABQIAAAAAAAABAAAAYw",
					"AQAAAAAAAAABAAAABwIAAAAAAAAHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					380,
					1,
					"insert",
					{
						"characters": "mþ[s"
					},
					"BAAAAB4CAAAAAAAAHwIAAAAAAAAAAAAAHwIAAAAAAAAgAgAAAAAAAAAAAAAgAgAAAAAAACECAAAAAAAAAAAAACECAAAAAAAAIgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHgIAAAAAAAAeAgAAAAAAAAAAAAAAAPC/"
				],
				[
					381,
					3,
					"left_delete",
					null,
					"AwAAACECAAAAAAAAIQIAAAAAAAABAAAAcyACAAAAAAAAIAIAAAAAAAABAAAAWx8CAAAAAAAAHwIAAAAAAAACAAAAw74",
					"AQAAAAAAAAABAAAAIgIAAAAAAAAiAgAAAAAAAAAAAAAAAPC/"
				],
				[
					382,
					1,
					"insert",
					{
						"characters": "[ß]"
					},
					"AwAAAB8CAAAAAAAAIAIAAAAAAAAAAAAAIAIAAAAAAAAhAgAAAAAAAAAAAAAhAgAAAAAAACICAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHwIAAAAAAAAfAgAAAAAAAAAAAAAAAPC/"
				],
				[
					383,
					2,
					"left_delete",
					null,
					"AgAAACECAAAAAAAAIQIAAAAAAAABAAAAXSACAAAAAAAAIAIAAAAAAAACAAAAw58",
					"AQAAAAAAAAABAAAAIgIAAAAAAAAiAgAAAAAAAAAAAAAAAPC/"
				],
				[
					384,
					1,
					"insert",
					{
						"characters": "s]"
					},
					"AgAAACACAAAAAAAAIQIAAAAAAAAAAAAAIQIAAAAAAAAiAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIAIAAAAAAAAgAgAAAAAAAAAAAAAAAPC/"
				],
				[
					385,
					1,
					"insert",
					{
						"characters": " ?"
					},
					"AgAAACICAAAAAAAAIwIAAAAAAAAAAAAAIwIAAAAAAAAkAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIgIAAAAAAAAiAgAAAAAAAAAAAAAAAPC/"
				],
				[
					386,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAACQCAAAAAAAAJQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJAIAAAAAAAAkAgAAAAAAAAAAAAAAAPC/"
				],
				[
					390,
					1,
					"insert",
					{
						"characters": " :"
					},
					"AgAAAFkCAAAAAAAAWgIAAAAAAAAAAAAAWgIAAAAAAABbAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWQIAAAAAAABZAgAAAAAAAAAAAAAAAPC/"
				],
				[
					391,
					1,
					"insert",
					{
						"characters": " s"
					},
					"AgAAAFsCAAAAAAAAXAIAAAAAAAAAAAAAXAIAAAAAAABdAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWwIAAAAAAABbAgAAAAAAAAAAAAAAAPC/"
				],
				[
					408,
					1,
					"insert",
					{
						"characters": "console.log"
					},
					"CwAAAAUCAAAAAAAABgIAAAAAAAAAAAAABgIAAAAAAAAHAgAAAAAAAAAAAAAHAgAAAAAAAAgCAAAAAAAAAAAAAAgCAAAAAAAACQIAAAAAAAAAAAAACQIAAAAAAAAKAgAAAAAAAAAAAAAKAgAAAAAAAAsCAAAAAAAAAAAAAAsCAAAAAAAADAIAAAAAAAAAAAAADAIAAAAAAAANAgAAAAAAAAAAAAANAgAAAAAAAA4CAAAAAAAAAAAAAA4CAAAAAAAADwIAAAAAAAAAAAAADwIAAAAAAAAQAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABQIAAAAAAAAFAgAAAAAAAAAAAAAAAPC/"
				],
				[
					409,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAABACAAAAAAAAEgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAIAAAAAAAAQAgAAAAAAAAAAAAAAAPC/"
				],
				[
					410,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAABECAAAAAAAAEwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQIAAAAAAAARAgAAAAAAAAAAAAAAAPC/"
				],
				[
					411,
					1,
					"insert",
					{
						"characters": "from,"
					},
					"BQAAABICAAAAAAAAEwIAAAAAAAAAAAAAEwIAAAAAAAAUAgAAAAAAAAAAAAAUAgAAAAAAABUCAAAAAAAAAAAAABUCAAAAAAAAFgIAAAAAAAAAAAAAFgIAAAAAAAAXAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgIAAAAAAAASAgAAAAAAAAAAAAAAAPC/"
				],
				[
					412,
					1,
					"left_delete",
					null,
					"AQAAABYCAAAAAAAAFgIAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAFwIAAAAAAAAXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					414,
					1,
					"insert",
					{
						"characters": ",from"
					},
					"BQAAABcCAAAAAAAAGAIAAAAAAAAAAAAAGAIAAAAAAAAZAgAAAAAAAAAAAAAZAgAAAAAAABoCAAAAAAAAAAAAABoCAAAAAAAAGwIAAAAAAAAAAAAAGwIAAAAAAAAcAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFwIAAAAAAAAXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					416,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAB0CAAAAAAAAHgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHQIAAAAAAAAdAgAAAAAAAAAAAAAAAPC/"
				],
				[
					442,
					1,
					"cut",
					null,
					"AQAAAFUCAAAAAAAAVQIAAAAAAAASAAAAcGF0aC5kaXJuYW1lKGZyb20p",
					"AQAAAAAAAAABAAAAZwIAAAAAAABVAgAAAAAAAAAAAAAAAPC/"
				],
				[
					443,
					1,
					"insert",
					{
						"characters": "dir"
					},
					"AwAAAFUCAAAAAAAAVgIAAAAAAAAAAAAAVgIAAAAAAABXAgAAAAAAAAAAAABXAgAAAAAAAFgCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVQIAAAAAAABVAgAAAAAAAAAAAAAAAPC/"
				],
				[
					445,
					1,
					"insert",
					{
						"characters": "\nlet"
					},
					"BQAAAAQCAAAAAAAABQIAAAAAAAAAAAAABQIAAAAAAAAJAgAAAAAAAAAAAAAJAgAAAAAAAAoCAAAAAAAAAAAAAAoCAAAAAAAACwIAAAAAAAAAAAAACwIAAAAAAAAMAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABAIAAAAAAAAEAgAAAAAAAAAAAAAAgHxA"
				],
				[
					446,
					1,
					"insert",
					{
						"characters": " dir="
					},
					"BQAAAAwCAAAAAAAADQIAAAAAAAAAAAAADQIAAAAAAAAOAgAAAAAAAAAAAAAOAgAAAAAAAA8CAAAAAAAAAAAAAA8CAAAAAAAAEAIAAAAAAAAAAAAAEAIAAAAAAAARAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADAIAAAAAAAAMAgAAAAAAAAAAAAAAAPC/"
				],
				[
					447,
					1,
					"paste",
					null,
					"AQAAABECAAAAAAAAIwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQIAAAAAAAARAgAAAAAAAAAAAAAAAPC/"
				],
				[
					448,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAACMCAAAAAAAAJAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIwIAAAAAAAAjAgAAAAAAAAAAAAAAAPC/"
				],
				[
					453,
					4,
					"left_delete",
					null,
					"BAAAADsCAAAAAAAAOwIAAAAAAAABAAAAbToCAAAAAAAAOgIAAAAAAAABAAAAbzkCAAAAAAAAOQIAAAAAAAABAAAAcjgCAAAAAAAAOAIAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAAPAIAAAAAAAA8AgAAAAAAAAAAAAAAAPC/"
				],
				[
					454,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAADgCAAAAAAAAOgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOAIAAAAAAAA4AgAAAAAAAAAAAAAAAPC/"
				],
				[
					455,
					1,
					"insert",
					{
						"characters": "from,dir"
					},
					"CAAAADkCAAAAAAAAOgIAAAAAAAAAAAAAOgIAAAAAAAA7AgAAAAAAAAAAAAA7AgAAAAAAADwCAAAAAAAAAAAAADwCAAAAAAAAPQIAAAAAAAAAAAAAPQIAAAAAAAA+AgAAAAAAAAAAAAA+AgAAAAAAAD8CAAAAAAAAAAAAAD8CAAAAAAAAQAIAAAAAAAAAAAAAQAIAAAAAAABBAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOQIAAAAAAAA5AgAAAAAAAAAAAAAAAPC/"
				],
				[
					524,
					1,
					"cut",
					null,
					"AQAAAF0CAAAAAAAAXQIAAAAAAAAEAAAAbVtzXQ",
					"AQAAAAAAAAABAAAAXQIAAAAAAABhAgAAAAAAAAAAAAAAAPC/"
				],
				[
					527,
					1,
					"paste",
					null,
					"AgAAAGkCAAAAAAAAbQIAAAAAAAAAAAAAbQIAAAAAAABtAgAAAAAAABgAAABwYXRoLnJlbGF0aXZlKGRpciwgbVtzXSk",
					"AQAAAAAAAAABAAAAaQIAAAAAAACBAgAAAAAAAAAAAAAAAPC/"
				],
				[
					530,
					1,
					"left_delete",
					null,
					"AQAAAF4CAAAAAAAAXgIAAAAAAAABAAAAPw",
					"AQAAAAAAAAABAAAAXwIAAAAAAABfAgAAAAAAAAAAAAAAAPC/"
				],
				[
					533,
					4,
					"left_delete",
					null,
					"BAAAAHMCAAAAAAAAcwIAAAAAAAABAAAAc3ICAAAAAAAAcgIAAAAAAAABAAAAIHECAAAAAAAAcQIAAAAAAAABAAAAOnACAAAAAAAAcAIAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAdAIAAAAAAAB0AgAAAAAAAAAAAAAAAPC/"
				],
				[
					537,
					1,
					"insert",
					{
						"characters": ".m,a"
					},
					"BAAAAAMCAAAAAAAABAIAAAAAAAAAAAAABAIAAAAAAAAFAgAAAAAAAAAAAAAFAgAAAAAAAAYCAAAAAAAAAAAAAAYCAAAAAAAABwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAwIAAAAAAAADAgAAAAAAAAAAAAAAAPC/"
				],
				[
					538,
					2,
					"left_delete",
					null,
					"AgAAAAYCAAAAAAAABgIAAAAAAAABAAAAYQUCAAAAAAAABQIAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAABwIAAAAAAAAHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					539,
					1,
					"insert",
					{
						"characters": "ap/"
					},
					"AwAAAAUCAAAAAAAABgIAAAAAAAAAAAAABgIAAAAAAAAHAgAAAAAAAAAAAAAHAgAAAAAAAAgCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABQIAAAAAAAAFAgAAAAAAAAAAAAAAAPC/"
				],
				[
					540,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAAgCAAAAAAAACgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACAIAAAAAAAAIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					541,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAAgCAAAAAAAACAIAAAAAAAABAAAAKAgCAAAAAAAACAIAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAACQIAAAAAAAAJAgAAAAAAAAAAAAAAAPC/"
				],
				[
					542,
					1,
					"left_delete",
					null,
					"AQAAAAcCAAAAAAAABwIAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAACAIAAAAAAAAIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					543,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAAcCAAAAAAAACQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABwIAAAAAAAAHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					544,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAAcCAAAAAAAABwIAAAAAAAABAAAAKAcCAAAAAAAABwIAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAACAIAAAAAAAAIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					545,
					5,
					"left_delete",
					null,
					"BQAAAAYCAAAAAAAABgIAAAAAAAABAAAAcAUCAAAAAAAABQIAAAAAAAABAAAAYQQCAAAAAAAABAIAAAAAAAABAAAAbQMCAAAAAAAAAwIAAAAAAAABAAAALgICAAAAAAAAAgIAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAABwIAAAAAAAAHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					546,
					1,
					"insert",
					{
						"characters": ".amp"
					},
					"BAAAAAICAAAAAAAAAwIAAAAAAAAAAAAAAwIAAAAAAAAEAgAAAAAAAAAAAAAEAgAAAAAAAAUCAAAAAAAAAAAAAAUCAAAAAAAABgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAgIAAAAAAAACAgAAAAAAAAAAAAAAAPC/"
				],
				[
					547,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAAYCAAAAAAAACAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABgIAAAAAAAAGAgAAAAAAAAAAAAAAAPC/"
				],
				[
					548,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAAYCAAAAAAAABgIAAAAAAAABAAAAKAYCAAAAAAAABgIAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAABwIAAAAAAAAHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					549,
					3,
					"left_delete",
					null,
					"AwAAAAUCAAAAAAAABQIAAAAAAAABAAAAcAQCAAAAAAAABAIAAAAAAAABAAAAbQMCAAAAAAAAAwIAAAAAAAABAAAAYQ",
					"AQAAAAAAAAABAAAABgIAAAAAAAAGAgAAAAAAAAAAAAAAAPC/"
				],
				[
					550,
					1,
					"insert",
					{
						"characters": "map"
					},
					"AwAAAAMCAAAAAAAABAIAAAAAAAAAAAAABAIAAAAAAAAFAgAAAAAAAAAAAAAFAgAAAAAAAAYCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAwIAAAAAAAADAgAAAAAAAAAAAAAAAPC/"
				],
				[
					551,
					2,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AgAAAAYCAAAAAAAACAIAAAAAAAAAAAAABwIAAAAAAAAJAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABgIAAAAAAAAGAgAAAAAAAAAAAAAAAPC/"
				],
				[
					552,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAAgCAAAAAAAACgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACAIAAAAAAAAIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					553,
					1,
					"insert",
					{
						"characters": "k,v"
					},
					"AwAAAAkCAAAAAAAACgIAAAAAAAAAAAAACgIAAAAAAAALAgAAAAAAAAAAAAALAgAAAAAAAAwCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACQIAAAAAAAAJAgAAAAAAAAAAAAAAAPC/"
				],
				[
					555,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAA4CAAAAAAAADwIAAAAAAAAAAAAADwIAAAAAAAAQAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADgIAAAAAAAAOAgAAAAAAAAAAAAAAAPC/"
				],
				[
					556,
					1,
					"insert",
					{
						"characters": " >"
					},
					"AgAAABACAAAAAAAAEQIAAAAAAAAAAAAAEQIAAAAAAAASAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAIAAAAAAAAQAgAAAAAAAAAAAAAAAPC/"
				],
				[
					557,
					2,
					"left_delete",
					null,
					"AgAAABECAAAAAAAAEQIAAAAAAAABAAAAPhACAAAAAAAAEAIAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAEgIAAAAAAAASAgAAAAAAAAAAAAAAAPC/"
				],
				[
					558,
					1,
					"insert",
					{
						"characters": ">"
					},
					"AQAAABACAAAAAAAAEQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAIAAAAAAAAQAgAAAAAAAAAAAAAAAPC/"
				],
				[
					559,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABECAAAAAAAAEgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQIAAAAAAAARAgAAAAAAAAAAAAAAAPC/"
				],
				[
					560,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAABICAAAAAAAAFAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgIAAAAAAAASAgAAAAAAAAAAAAAAAPC/"
				],
				[
					561,
					1,
					"insert",
					{
						"characters": "k,"
					},
					"AgAAABMCAAAAAAAAFAIAAAAAAAAAAAAAFAIAAAAAAAAVAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEwIAAAAAAAATAgAAAAAAAAAAAAAAAPC/"
				],
				[
					562,
					1,
					"insert",
					{
						"characters": " path.relative"
					},
					"DgAAABUCAAAAAAAAFgIAAAAAAAAAAAAAFgIAAAAAAAAXAgAAAAAAAAAAAAAXAgAAAAAAABgCAAAAAAAAAAAAABgCAAAAAAAAGQIAAAAAAAAAAAAAGQIAAAAAAAAaAgAAAAAAAAAAAAAaAgAAAAAAABsCAAAAAAAAAAAAABsCAAAAAAAAHAIAAAAAAAAAAAAAHAIAAAAAAAAdAgAAAAAAAAAAAAAdAgAAAAAAAB4CAAAAAAAAAAAAAB4CAAAAAAAAHwIAAAAAAAAAAAAAHwIAAAAAAAAgAgAAAAAAAAAAAAAgAgAAAAAAACECAAAAAAAAAAAAACECAAAAAAAAIgIAAAAAAAAAAAAAIgIAAAAAAAAjAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFQIAAAAAAAAVAgAAAAAAAAAAAAAAAPC/"
				],
				[
					563,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAACMCAAAAAAAAJQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIwIAAAAAAAAjAgAAAAAAAAAAAAAAAPC/"
				],
				[
					564,
					1,
					"insert",
					{
						"characters": "dir,"
					},
					"BAAAACQCAAAAAAAAJQIAAAAAAAAAAAAAJQIAAAAAAAAmAgAAAAAAAAAAAAAmAgAAAAAAACcCAAAAAAAAAAAAACcCAAAAAAAAKAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJAIAAAAAAAAkAgAAAAAAAAAAAAAAAPC/"
				],
				[
					565,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAACgCAAAAAAAAKQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKAIAAAAAAAAoAgAAAAAAAAAAAAAAAPC/"
				],
				[
					566,
					1,
					"insert",
					{
						"characters": "bv"
					},
					"AgAAACkCAAAAAAAAKgIAAAAAAAAAAAAAKgIAAAAAAAArAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKQIAAAAAAAApAgAAAAAAAAAAAAAAAPC/"
				],
				[
					567,
					2,
					"left_delete",
					null,
					"AgAAACoCAAAAAAAAKgIAAAAAAAABAAAAdikCAAAAAAAAKQIAAAAAAAABAAAAYg",
					"AQAAAAAAAAABAAAAKwIAAAAAAAArAgAAAAAAAAAAAAAAAPC/"
				],
				[
					568,
					1,
					"insert",
					{
						"characters": "v"
					},
					"AQAAACkCAAAAAAAAKgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKQIAAAAAAAApAgAAAAAAAAAAAAAAAPC/"
				],
				[
					572,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAC0CAAAAAAAALgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALQIAAAAAAAAtAgAAAAAAAAAAAAAAAPC/"
				],
				[
					577,
					1,
					"cut",
					null,
					"AQAAADACAAAAAAAAMAIAAAAAAAAgAAAAICAgIGxldCBkaXI9cGF0aC5kaXJuYW1lKGZyb20pOwo",
					"AQAAAAAAAAABAAAAMAIAAAAAAABQAgAAAAAAAAAAAAAAAAAA"
				],
				[
					579,
					1,
					"paste",
					null,
					"AQAAAM4BAAAAAAAA7gEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzgEAAAAAAADOAQAAAAAAAAAAAAAAAAAA"
				],
				[
					589,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AgAAAF0CAAAAAAAAXgIAAAAAAAAAAAAAXgIAAAAAAABeAgAAAAAAAAQAAABmcm9t",
					"AQAAAAAAAAABAAAAXQIAAAAAAABhAgAAAAAAAAAAAAAAAPC/"
				],
				[
					593,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AgAAAGACAAAAAAAAYQIAAAAAAAAAAAAAYQIAAAAAAABhAgAAAAAAAAoAAAB7ZnJvbSxkaXJ9",
					"AQAAAAAAAAABAAAAYAIAAAAAAABqAgAAAAAAAAAAAAAAAPC/"
				],
				[
					617,
					1,
					"cut",
					null,
					"AQAAAA0CAAAAAAAADQIAAAAAAABAAAAAdGhpcy5yZXBsYWNlbWVudE1hcCgpLm1hcCgoW2ssdl0pID0+IFtrLCBwYXRoLnJlbGF0aXZlKGRpciwgdildKQ",
					"AQAAAAAAAAABAAAADQIAAAAAAABNAgAAAAAAAAAAAAAAAPC/"
				],
				[
					618,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAAA0CAAAAAAAADgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADQIAAAAAAAANAgAAAAAAAAAAAAAAAPC/"
				],
				[
					619,
					1,
					"left_delete",
					null,
					"AQAAAA0CAAAAAAAADQIAAAAAAAABAAAAbQ",
					"AQAAAAAAAAABAAAADgIAAAAAAAAOAgAAAAAAAAAAAAAAAPC/"
				],
				[
					620,
					1,
					"insert",
					{
						"characters": "rm"
					},
					"AgAAAA0CAAAAAAAADgIAAAAAAAAAAAAADgIAAAAAAAAPAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADQIAAAAAAAANAgAAAAAAAAAAAAAAAPC/"
				],
				[
					622,
					1,
					"insert",
					{
						"characters": "\nlet"
					},
					"BQAAAO0BAAAAAAAA7gEAAAAAAAAAAAAA7gEAAAAAAADyAQAAAAAAAAAAAADyAQAAAAAAAPMBAAAAAAAAAAAAAPMBAAAAAAAA9AEAAAAAAAAAAAAA9AEAAAAAAAD1AQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7QEAAAAAAADtAQAAAAAAAAAAAAAAgHBA"
				],
				[
					623,
					1,
					"insert",
					{
						"characters": " rm="
					},
					"BAAAAPUBAAAAAAAA9gEAAAAAAAAAAAAA9gEAAAAAAAD3AQAAAAAAAAAAAAD3AQAAAAAAAPgBAAAAAAAAAAAAAPgBAAAAAAAA+QEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9QEAAAAAAAD1AQAAAAAAAAAAAAAAAPC/"
				],
				[
					624,
					1,
					"paste",
					null,
					"AQAAAPkBAAAAAAAAOQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+QEAAAAAAAD5AQAAAAAAAAAAAAAAAPC/"
				],
				[
					625,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAADkCAAAAAAAAOgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOQIAAAAAAAA5AgAAAAAAAAAAAAAAAPC/"
				],
				[
					637,
					1,
					"cut",
					null,
					"AQAAAA4CAAAAAAAADgIAAAAAAAArAAAALm1hcCgoW2ssdl0pID0+IFtrLCBwYXRoLnJlbGF0aXZlKGRpciwgdildKQ",
					"AQAAAAAAAAABAAAADgIAAAAAAAA5AgAAAAAAAAAAAAAAAPC/"
				],
				[
					639,
					1,
					"insert",
					{
						"characters": "\nlet"
					},
					"BQAAAA8CAAAAAAAAEAIAAAAAAAAAAAAAEAIAAAAAAAAUAgAAAAAAAAAAAAAUAgAAAAAAABUCAAAAAAAAAAAAABUCAAAAAAAAFgIAAAAAAAAAAAAAFgIAAAAAAAAXAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADwIAAAAAAAAPAgAAAAAAAAAAAAAAAPC/"
				],
				[
					640,
					1,
					"insert",
					{
						"characters": " rrl"
					},
					"BAAAABcCAAAAAAAAGAIAAAAAAAAAAAAAGAIAAAAAAAAZAgAAAAAAAAAAAAAZAgAAAAAAABoCAAAAAAAAAAAAABoCAAAAAAAAGwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFwIAAAAAAAAXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					641,
					1,
					"left_delete",
					null,
					"AQAAABoCAAAAAAAAGgIAAAAAAAABAAAAbA",
					"AQAAAAAAAAABAAAAGwIAAAAAAAAbAgAAAAAAAAAAAAAAAPC/"
				],
				[
					642,
					1,
					"insert",
					{
						"characters": "m="
					},
					"AgAAABoCAAAAAAAAGwIAAAAAAAAAAAAAGwIAAAAAAAAcAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGgIAAAAAAAAaAgAAAAAAAAAAAAAAAPC/"
				],
				[
					643,
					1,
					"paste",
					null,
					"AQAAABwCAAAAAAAARwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHAIAAAAAAAAcAgAAAAAAAAAAAAAAAPC/"
				],
				[
					644,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAEcCAAAAAAAASAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARwIAAAAAAABHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					648,
					1,
					"insert",
					{
						"characters": "rm"
					},
					"AgAAABwCAAAAAAAAHQIAAAAAAAAAAAAAHQIAAAAAAAAeAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHAIAAAAAAAAcAgAAAAAAAAAAAAAAAPC/"
				],
				[
					653,
					1,
					"insert",
					{
						"characters": "r"
					},
					"AQAAAGoCAAAAAAAAawIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAagIAAAAAAABqAgAAAAAAAAAAAAAAAPC/"
				],
				[
					656,
					1,
					"left_delete",
					null,
					"AQAAAIACAAAAAAAAgAIAAAAAAAABAAAAbQ",
					"AQAAAAAAAAABAAAAgQIAAAAAAACBAgAAAAAAAAAAAAAAAPC/"
				],
				[
					657,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAIACAAAAAAAAggIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgAIAAAAAAACAAgAAAAAAAAAAAAAAAPC/"
				],
				[
					658,
					1,
					"insert",
					{
						"characters": "rm,rrm.m"
					},
					"CAAAAIECAAAAAAAAggIAAAAAAAAAAAAAggIAAAAAAACDAgAAAAAAAAAAAACDAgAAAAAAAIQCAAAAAAAAAAAAAIQCAAAAAAAAhQIAAAAAAAAAAAAAhQIAAAAAAACGAgAAAAAAAAAAAACGAgAAAAAAAIcCAAAAAAAAAAAAAIcCAAAAAAAAiAIAAAAAAAAAAAAAiAIAAAAAAACJAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgQIAAAAAAACBAgAAAAAAAAAAAAAAAPC/"
				],
				[
					659,
					3,
					"left_delete",
					null,
					"AwAAAIgCAAAAAAAAiAIAAAAAAAABAAAAbYcCAAAAAAAAhwIAAAAAAAABAAAALoYCAAAAAAAAhgIAAAAAAAABAAAAbQ",
					"AQAAAAAAAAABAAAAiQIAAAAAAACJAgAAAAAAAAAAAAAAAPC/"
				],
				[
					660,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAAIYCAAAAAAAAhwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhgIAAAAAAACGAgAAAAAAAAAAAAAAAPC/"
				],
				[
					661,
					3,
					"left_delete",
					null,
					"AwAAAIYCAAAAAAAAhgIAAAAAAAABAAAAbYUCAAAAAAAAhQIAAAAAAAABAAAAcoQCAAAAAAAAhAIAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAhwIAAAAAAACHAgAAAAAAAAAAAAAAAPC/"
				],
				[
					662,
					1,
					"insert",
					{
						"characters": "rrm"
					},
					"AwAAAIQCAAAAAAAAhQIAAAAAAAAAAAAAhQIAAAAAAACGAgAAAAAAAAAAAACGAgAAAAAAAIcCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhAIAAAAAAACEAgAAAAAAAAAAAAAAAPC/"
				],
				[
					668,
					1,
					"cut",
					null,
					"AQAAAHACAAAAAAAAcAIAAAAAAAAbAAAAY29uc29sZS5sb2coJ20nLHtybSxycm19KTsK",
					"AQAAAAAAAAABAAAAcAIAAAAAAACLAgAAAAAAAAAAAAAAAAAA"
				],
				[
					669,
					1,
					"paste",
					null,
					"AQAAAHACAAAAAAAAiwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcAIAAAAAAABwAgAAAAAAAAAAAAAAAPC/"
				],
				[
					671,
					1,
					"paste",
					null,
					"AQAAABACAAAAAAAAKwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAIAAAAAAAAQAgAAAAAAAAAAAAAAAAAA"
				],
				[
					673,
					4,
					"left_delete",
					null,
					"BAAAACYCAAAAAAAAJgIAAAAAAAABAAAAbSUCAAAAAAAAJQIAAAAAAAABAAAAciQCAAAAAAAAJAIAAAAAAAABAAAAciMCAAAAAAAAIwIAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAJwIAAAAAAAAnAgAAAAAAAAAAAAAAAPC/"
				],
				[
					685,
					1,
					"insert",
					{
						"characters": ",dir"
					},
					"BAAAACMCAAAAAAAAJAIAAAAAAAAAAAAAJAIAAAAAAAAlAgAAAAAAAAAAAAAlAgAAAAAAACYCAAAAAAAAAAAAACYCAAAAAAAAJwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIwIAAAAAAAAjAgAAAAAAAAAAAAAAAPC/"
				],
				[
					718,
					1,
					"insert_snippet",
					{
						"contents": "'${0:$SELECTION}'"
					},
					"AgAAAGACAAAAAAAAYAIAAAAAAAABAAAAdmACAAAAAAAAYwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYAIAAAAAAABhAgAAAAAAAAAAAAAAAPC/"
				],
				[
					719,
					1,
					"insert",
					{
						"characters": "."
					},
					"AgAAAGECAAAAAAAAYgIAAAAAAAAAAAAAYgIAAAAAAABiAgAAAAAAAAEAAAB2",
					"AQAAAAAAAAABAAAAYQIAAAAAAABiAgAAAAAAAAAAAAAAAPC/"
				],
				[
					723,
					1,
					"insert",
					{
						"characters": "pat.j"
					},
					"BQAAAE0CAAAAAAAATgIAAAAAAAAAAAAATgIAAAAAAABPAgAAAAAAAAAAAABPAgAAAAAAAFACAAAAAAAAAAAAAFACAAAAAAAAUQIAAAAAAAAAAAAAUQIAAAAAAABSAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATQIAAAAAAABNAgAAAAAAAAAAAAAAAPC/"
				],
				[
					724,
					2,
					"left_delete",
					null,
					"AgAAAFECAAAAAAAAUQIAAAAAAAABAAAAalACAAAAAAAAUAIAAAAAAAABAAAALg",
					"AQAAAAAAAAABAAAAUgIAAAAAAABSAgAAAAAAAAAAAAAAAPC/"
				],
				[
					725,
					1,
					"insert",
					{
						"characters": "h.join("
					},
					"BwAAAFACAAAAAAAAUQIAAAAAAAAAAAAAUQIAAAAAAABSAgAAAAAAAAAAAABSAgAAAAAAAFMCAAAAAAAAAAAAAFMCAAAAAAAAVAIAAAAAAAAAAAAAVAIAAAAAAABVAgAAAAAAAAAAAABVAgAAAAAAAFYCAAAAAAAAAAAAAFYCAAAAAAAAVwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUAIAAAAAAABQAgAAAAAAAAAAAAAAAPC/"
				],
				[
					729,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAG4CAAAAAAAAbwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbgIAAAAAAABuAgAAAAAAAAAAAAAAAPC/"
				],
				[
					730,
					1,
					"insert",
					{
						"characters": " v)"
					},
					"AwAAAG8CAAAAAAAAcAIAAAAAAAAAAAAAcAIAAAAAAABxAgAAAAAAAAAAAABxAgAAAAAAAHICAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbwIAAAAAAABvAgAAAAAAAAAAAAAAAPC/"
				],
				[
					737,
					1,
					"cut",
					null,
					"AQAAAFcCAAAAAAAAVwIAAAAAAAAXAAAAcGF0aC5yZWxhdGl2ZShkaXIsICcuJyk",
					"AQAAAAAAAAABAAAAVwIAAAAAAABuAgAAAAAAAAAAAAAAAPC/"
				],
				[
					738,
					1,
					"paste",
					null,
					"AQAAAFcCAAAAAAAAbgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVwIAAAAAAABXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					743,
					1,
					"cut",
					null,
					"AQAAAFcCAAAAAAAAVwIAAAAAAAAXAAAAcGF0aC5yZWxhdGl2ZShkaXIsICcuJyk",
					"AQAAAAAAAAABAAAAbgIAAAAAAABXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					744,
					1,
					"paste",
					null,
					"AQAAAFcCAAAAAAAAbgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVwIAAAAAAABXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					747,
					1,
					"cut",
					null,
					"AQAAAFcCAAAAAAAAVwIAAAAAAAAXAAAAcGF0aC5yZWxhdGl2ZShkaXIsICcuJyk",
					"AQAAAAAAAAABAAAAbgIAAAAAAABXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					748,
					1,
					"paste",
					null,
					"AQAAAFcCAAAAAAAAbgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVwIAAAAAAABXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					769,
					1,
					"cut",
					null,
					"AQAAAFcCAAAAAAAAVwIAAAAAAAAXAAAAcGF0aC5yZWxhdGl2ZShkaXIsICcuJyk",
					"AQAAAAAAAAABAAAAVwIAAAAAAABuAgAAAAAAAAAAAAAAAPC/"
				],
				[
					770,
					1,
					"paste",
					null,
					"AQAAAFcCAAAAAAAAbgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVwIAAAAAAABXAgAAAAAAAAAAAAAAAPC/"
				],
				[
					783,
					1,
					"insert",
					{
						"characters": "\nlet"
					},
					"BQAAAO0BAAAAAAAA7gEAAAAAAAAAAAAA7gEAAAAAAADyAQAAAAAAAAAAAADyAQAAAAAAAPMBAAAAAAAAAAAAAPMBAAAAAAAA9AEAAAAAAAAAAAAA9AEAAAAAAAD1AQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7QEAAAAAAADtAQAAAAAAAAAAAAAAAPC/"
				],
				[
					784,
					1,
					"insert",
					{
						"characters": " rel="
					},
					"BQAAAPUBAAAAAAAA9gEAAAAAAAAAAAAA9gEAAAAAAAD3AQAAAAAAAAAAAAD3AQAAAAAAAPgBAAAAAAAAAAAAAPgBAAAAAAAA+QEAAAAAAAAAAAAA+QEAAAAAAAD6AQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9QEAAAAAAAD1AQAAAAAAAAAAAAAAAPC/"
				],
				[
					785,
					1,
					"paste",
					null,
					"AQAAAPoBAAAAAAAAEQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+gEAAAAAAAD6AQAAAAAAAAAAAAAAAPC/"
				],
				[
					786,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAABECAAAAAAAAEgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQIAAAAAAAARAgAAAAAAAAAAAAAAAPC/"
				],
				[
					791,
					1,
					"insert",
					{
						"characters": "rel"
					},
					"BAAAAHwCAAAAAAAAfQIAAAAAAAAAAAAAfQIAAAAAAAB9AgAAAAAAABYAAABwYXRoLnJlbGF0aXZlKGRpciwgJy4nfQIAAAAAAAB+AgAAAAAAAAAAAAB+AgAAAAAAAH8CAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfAIAAAAAAACSAgAAAAAAAAAAAAAAAPC/"
				],
				[
					792,
					1,
					"right_delete",
					null,
					"AQAAAH8CAAAAAAAAfwIAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAfwIAAAAAAAB/AgAAAAAAAAAAAAAAAPC/"
				],
				[
					800,
					1,
					"insert",
					{
						"characters": ",rel"
					},
					"BAAAAEwCAAAAAAAATQIAAAAAAAAAAAAATQIAAAAAAABOAgAAAAAAAAAAAABOAgAAAAAAAE8CAAAAAAAAAAAAAE8CAAAAAAAAUAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATAIAAAAAAABMAgAAAAAAAAAAAAAAAPC/"
				],
				[
					808,
					1,
					"cut",
					null,
					"AQAAADUCAAAAAAAANQIAAAAAAAAfAAAAY29uc29sZS5sb2coJ20nLHtybSxkaXIscmVsfSk7Cg",
					"AQAAAAAAAAABAAAANQIAAAAAAABUAgAAAAAAAAAAAAAAAAAA"
				],
				[
					809,
					1,
					"paste",
					null,
					"AQAAADUCAAAAAAAAVAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANQIAAAAAAAA1AgAAAAAAAAAAAAAAAPC/"
				],
				[
					811,
					1,
					"paste",
					null,
					"AQAAAO4BAAAAAAAADQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7gEAAAAAAADuAQAAAAAAAAAAAAAAAAAA"
				],
				[
					813,
					10,
					"left_delete",
					null,
					"CgAAAAgCAAAAAAAACAIAAAAAAAABAAAAbAcCAAAAAAAABwIAAAAAAAABAAAAZQYCAAAAAAAABgIAAAAAAAABAAAAcgUCAAAAAAAABQIAAAAAAAABAAAALAQCAAAAAAAABAIAAAAAAAABAAAAcgMCAAAAAAAAAwIAAAAAAAABAAAAaQICAAAAAAAAAgIAAAAAAAABAAAAZAECAAAAAAAAAQIAAAAAAAABAAAALAACAAAAAAAAAAIAAAAAAAABAAAAbf8BAAAAAAAA/wEAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAACQIAAAAAAAAJAgAAAAAAAAAAAAAAAPC/"
				],
				[
					814,
					1,
					"insert",
					{
						"characters": "from,dir"
					},
					"CAAAAP8BAAAAAAAAAAIAAAAAAAAAAAAAAAIAAAAAAAABAgAAAAAAAAAAAAABAgAAAAAAAAICAAAAAAAAAAAAAAICAAAAAAAAAwIAAAAAAAAAAAAAAwIAAAAAAAAEAgAAAAAAAAAAAAAEAgAAAAAAAAUCAAAAAAAAAAAAAAUCAAAAAAAABgIAAAAAAAAAAAAABgIAAAAAAAAHAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/wEAAAAAAAD/AQAAAAAAAAAAAAAAAPC/"
				],
				[
					823,
					1,
					"cut",
					null,
					"AQAAAFICAAAAAAAAUgIAAAAAAAAfAAAAY29uc29sZS5sb2coJ20nLHtybSxkaXIscmVsfSk7Cg",
					"AQAAAAAAAAABAAAAUgIAAAAAAABxAgAAAAAAAAAAAAAAAAAA"
				],
				[
					825,
					1,
					"paste",
					null,
					"AQAAADACAAAAAAAATwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMAIAAAAAAAAwAgAAAAAAAAAAAAAAAAAA"
				],
				[
					827,
					4,
					"left_delete",
					null,
					"BAAAAEcCAAAAAAAARwIAAAAAAAABAAAALEYCAAAAAAAARgIAAAAAAAABAAAAckUCAAAAAAAARQIAAAAAAAABAAAAaUQCAAAAAAAARAIAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAASAIAAAAAAABIAgAAAAAAAAAAAAAAAPC/"
				],
				[
					830,
					1,
					"cut",
					null,
					"AQAAADACAAAAAAAAMAIAAAAAAAAbAAAAY29uc29sZS5sb2coJ20nLHtybSxyZWx9KTsK",
					"AQAAAAAAAAABAAAAMAIAAAAAAABLAgAAAAAAAAAAAAAAAAAA"
				],
				[
					832,
					1,
					"paste",
					null,
					"AQAAAFICAAAAAAAAbQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUgIAAAAAAABSAgAAAAAAAAAAAAAAAAAA"
				],
				[
					839,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAC0CAAAAAAAALgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALQIAAAAAAAAtAgAAAAAAAAAAAAAAAPC/"
				],
				[
					840,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAC4CAAAAAAAALwIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALgIAAAAAAAAuAgAAAAAAAAAAAAAAAPC/"
				],
				[
					841,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAC8CAAAAAAAAMQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwIAAAAAAAAvAgAAAAAAAAAAAAAAAPC/"
				],
				[
					842,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAADACAAAAAAAAMQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMAIAAAAAAAAwAgAAAAAAAAAAAAAAAPC/"
				],
				[
					843,
					1,
					"left_delete",
					null,
					"AQAAADACAAAAAAAAMAIAAAAAAAABAAAAMA",
					"AQAAAAAAAAABAAAAMQIAAAAAAAAxAgAAAAAAAAAAAAAAAPC/"
				],
				[
					844,
					1,
					"insert",
					{
						"characters": "."
					},
					"AQAAADACAAAAAAAAMQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMAIAAAAAAAAwAgAAAAAAAAAAAAAAAPC/"
				],
				[
					869,
					1,
					"insert",
					{
						"characters": "path.normalize("
					},
					"DwAAAJQCAAAAAAAAlQIAAAAAAAAAAAAAlQIAAAAAAACWAgAAAAAAAAAAAACWAgAAAAAAAJcCAAAAAAAAAAAAAJcCAAAAAAAAmAIAAAAAAAAAAAAAmAIAAAAAAACZAgAAAAAAAAAAAACZAgAAAAAAAJoCAAAAAAAAAAAAAJoCAAAAAAAAmwIAAAAAAAAAAAAAmwIAAAAAAACcAgAAAAAAAAAAAACcAgAAAAAAAJ0CAAAAAAAAAAAAAJ0CAAAAAAAAngIAAAAAAAAAAAAAngIAAAAAAACfAgAAAAAAAAAAAACfAgAAAAAAAKACAAAAAAAAAAAAAKACAAAAAAAAoQIAAAAAAAAAAAAAoQIAAAAAAACiAgAAAAAAAAAAAACiAgAAAAAAAKMCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlAIAAAAAAACUAgAAAAAAAAAAAAAAAPC/"
				],
				[
					872,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAALQCAAAAAAAAtQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtAIAAAAAAAC0AgAAAAAAAAAAAAAAAPC/"
				],
				[
					885,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAO4BAAAAAAAA7wEAAAAAAAAAAAAA7wEAAAAAAADvAQAAAAAAAB0AAABjb25zb2xlLmxvZygnbScse2Zyb20sZGlyfSk7Cg",
					"AQAAAAAAAAABAAAA7gEAAAAAAAALAgAAAAAAAAAAAAAAAPC/"
				],
				[
					892,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAADsCAAAAAAAAPAIAAAAAAAAAAAAAPAIAAAAAAAA8AgAAAAAAABsAAABjb25zb2xlLmxvZygnbScse3JtLHJlbH0pOwo",
					"AQAAAAAAAAABAAAAOwIAAAAAAABWAgAAAAAAAAAAAAAAAPC/"
				],
				[
					899,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAKgCAAAAAAAAqQIAAAAAAAAAAAAAqQIAAAAAAACpAgAAAAAAABsAAABjb25zb2xlLmxvZygnbScse3JtLHJybX0pOwo",
					"AQAAAAAAAAABAAAAqAIAAAAAAADDAgAAAAAAAAAAAAAAAPC/"
				],
				[
					906,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABYAwAAaW1wb3J0IHsgbWVtb2l6ZSwgdW5pcXVlLCBmaWx0ZXIgfSBmcm9tICcuL2xpYi9taXNjLmpzJzsKaW1wb3J0IHsgUmVhZEpTT04gfSBmcm9tICcuL2lvLWhlbHBlcnMuanMnOwoKZXhwb3J0IGNvbnN0IGltcG9ydFJlcGxhY2VyID0gewogIHJlcGxhY2VtZW50TWFwOiBtZW1vaXplKCgpID0+CiAgICBPYmplY3QuZW50cmllcyhSZWFkSlNPTigncGFja2FnZS5qc29uJykuX21vZHVsZUFsaWFzZXMpCiAgICAgIC5maWx0ZXIoKFtrLCB2XSkgPT4gIS9bLlwvXS8udGVzdCh2KSkKICAgICAgLm1hcChhID0+IGEucmV2ZXJzZSgpKQogICksCiAgcmVnZXhwKCkgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoIlxcYmZyb21cXHMqJyhcXCIgKyB1bmlxdWUodGhpcy5yZXBsYWNlbWVudE1hcCgpLm1hcCgoW2ssIHZdKSA9PiBrKSkuam9pbignfCcpICsgIiknOyIsICdnbScpOwogIH0sCiAgcmVwbGFjZXJGdW5jKGZyb20pIHsKICAgIGxldCBkaXI9cGF0aC5kaXJuYW1lKGZyb20pOwogICAgIGxldCByZWw9cGF0aC5yZWxhdGl2ZShkaXIsICcuJywgJy4nKTsKICAgIGxldCBybT10aGlzLnJlcGxhY2VtZW50TWFwKCk7CiAgICAgbGV0IHJybT1ybS5tYXAoKFtrLHZdKSA9PiBbaywgcGF0aC5ub3JtYWxpemUocGF0aC5qb2luKHJlbCwgdikpXSk7CiAgICBsZXQgbSA9IE9iamVjdC5mcm9tRW50cmllcyhycm0pOwogICAgIHJldHVybiAodywgcywgaSkgPT4gICBgZnJvbSAnJHttW3NdfSc7YDsKICB9LAogIHJlcGxhY2UocywgZnJvbSkgewogICAgcmV0dXJuIHMucmVwbGFjZUFsbCh0aGlzLnJlZ2V4cCgpLCB0aGlzLnJlcGxhY2VyRnVuYyhmcm9tKSk7CiAgfQp9OwoKZXhwb3J0IGRlZmF1bHQgaW1wb3J0UmVwbGFjZXI7CgAAAAAAAAAAXAMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqQIAAAAAAACpAgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/path.js",
			"settings":
			{
				"buffer_size": 16439,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "server.js",
			"settings":
			{
				"buffer_size": 27766,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					762,
					1,
					"insert",
					{
						"characters": "Object.frome"
					},
					"DAAAANoHAAAAAAAA2wcAAAAAAAAAAAAA2wcAAAAAAADcBwAAAAAAAAAAAADcBwAAAAAAAN0HAAAAAAAAAAAAAN0HAAAAAAAA3gcAAAAAAAAAAAAA3gcAAAAAAADfBwAAAAAAAAAAAADfBwAAAAAAAOAHAAAAAAAAAAAAAOAHAAAAAAAA4QcAAAAAAAAAAAAA4QcAAAAAAADiBwAAAAAAAAAAAADiBwAAAAAAAOMHAAAAAAAAAAAAAOMHAAAAAAAA5AcAAAAAAAAAAAAA5AcAAAAAAADlBwAAAAAAAAAAAADlBwAAAAAAAOYHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2gcAAAAAAADaBwAAAAAAAAAAAAAAAPC/"
				],
				[
					763,
					1,
					"left_delete",
					null,
					"AQAAAOUHAAAAAAAA5QcAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAA5gcAAAAAAADmBwAAAAAAAAAAAAAAAPC/"
				],
				[
					764,
					1,
					"insert",
					{
						"characters": "Entries("
					},
					"CAAAAOUHAAAAAAAA5gcAAAAAAAAAAAAA5gcAAAAAAADnBwAAAAAAAAAAAADnBwAAAAAAAOgHAAAAAAAAAAAAAOgHAAAAAAAA6QcAAAAAAAAAAAAA6QcAAAAAAADqBwAAAAAAAAAAAADqBwAAAAAAAOsHAAAAAAAAAAAAAOsHAAAAAAAA7AcAAAAAAAAAAAAA7AcAAAAAAADtBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5QcAAAAAAADlBwAAAAAAAAAAAAAAAPC/"
				],
				[
					767,
					1,
					"insert",
					{
						"characters": ")="
					},
					"AgAAAAIIAAAAAAAAAwgAAAAAAAAAAAAAAwgAAAAAAAAECAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAggAAAAAAAACCAAAAAAAAAAAAAAAAPC/"
				],
				[
					768,
					1,
					"left_delete",
					null,
					"AQAAAAMIAAAAAAAAAwgAAAAAAAABAAAAPQ",
					"AQAAAAAAAAABAAAABAgAAAAAAAAECAAAAAAAAAAAAAAAAPC/"
				],
				[
					783,
					1,
					"insert",
					{
						"characters": "'"
					},
					"AQAAACwIAAAAAAAALQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALAgAAAAAAAAsCAAAAAAAAAAAAAAAAPC/"
				],
				[
					790,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAC0IAAAAAAAALggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALQgAAAAAAAAtCAAAAAAAAAAAAAAAAPC/"
				],
				[
					817,
					1,
					"insert",
					{
						"characters": "replacerF"
					},
					"CQAAAMUHAAAAAAAAxgcAAAAAAAAAAAAAxgcAAAAAAADHBwAAAAAAAAAAAADHBwAAAAAAAMgHAAAAAAAAAAAAAMgHAAAAAAAAyQcAAAAAAAAAAAAAyQcAAAAAAADKBwAAAAAAAAAAAADKBwAAAAAAAMsHAAAAAAAAAAAAAMsHAAAAAAAAzAcAAAAAAAAAAAAAzAcAAAAAAADNBwAAAAAAAAAAAADNBwAAAAAAAM4HAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxQcAAAAAAADFBwAAAAAAAAAAAAAAAPC/"
				],
				[
					818,
					1,
					"right_delete",
					null,
					"AQAAAM4HAAAAAAAAzgcAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAAzgcAAAAAAADOBwAAAAAAAAAAAAAAAPC/"
				],
				[
					820,
					1,
					"insert",
					{
						"characters": "m,"
					},
					"AgAAADwIAAAAAAAAPQgAAAAAAAAAAAAAPQgAAAAAAAA+CAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAgAAAAAAAA8CAAAAAAAAAAAAAAAAFZA"
				],
				[
					821,
					2,
					"left_delete",
					null,
					"AgAAAD0IAAAAAAAAPQgAAAAAAAABAAAALDwIAAAAAAAAPAgAAAAAAAABAAAAbQ",
					"AQAAAAAAAAABAAAAPggAAAAAAAA+CAAAAAAAAAAAAAAAAPC/"
				],
				[
					822,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAADwIAAAAAAAAPQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAgAAAAAAAA8CAAAAAAAAAAAAAAAAPC/"
				],
				[
					823,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAD0IAAAAAAAAPggAAAAAAAAAAAAAPggAAAAAAABACAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPQgAAAAAAAA9CAAAAAAAAAAAAAAAAPC/"
				],
				[
					846,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAAEAIAAAAAAAAQQgAAAAAAAAAAAAAQQgAAAAAAABCCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAgAAAAAAABACAAAAAAAAAAAAAAAAF5A"
				],
				[
					847,
					2,
					"left_delete",
					null,
					"AgAAAEEIAAAAAAAAQQgAAAAAAAABAAAAZUAIAAAAAAAAQAgAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAQggAAAAAAABCCAAAAAAAAAAAAAAAAPC/"
				],
				[
					848,
					1,
					"insert",
					{
						"characters": "repl"
					},
					"BAAAAEAIAAAAAAAAQQgAAAAAAAAAAAAAQQgAAAAAAABCCAAAAAAAAAAAAABCCAAAAAAAAEMIAAAAAAAAAAAAAEMIAAAAAAAARAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAgAAAAAAABACAAAAAAAAAAAAAAAAPC/"
				],
				[
					849,
					4,
					"left_delete",
					null,
					"BAAAAEMIAAAAAAAAQwgAAAAAAAABAAAAbEIIAAAAAAAAQggAAAAAAAABAAAAcEEIAAAAAAAAQQgAAAAAAAABAAAAZUAIAAAAAAAAQAgAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAARAgAAAAAAABECAAAAAAAAAAAAAAAAPC/"
				],
				[
					850,
					1,
					"insert",
					{
						"characters": "do"
					},
					"AgAAAEAIAAAAAAAAQQgAAAAAAAAAAAAAQQgAAAAAAABCCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAgAAAAAAABACAAAAAAAAAAAAAAAAPC/"
				],
				[
					851,
					2,
					"left_delete",
					null,
					"AgAAAEEIAAAAAAAAQQgAAAAAAAABAAAAb0AIAAAAAAAAQAgAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAQggAAAAAAABCCAAAAAAAAAAAAAAAAPC/"
				],
				[
					852,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAAEAIAAAAAAAAQQgAAAAAAAAAAAAAQQgAAAAAAABCCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAgAAAAAAABACAAAAAAAAAAAAAAAAPC/"
				],
				[
					853,
					2,
					"left_delete",
					null,
					"AgAAAEEIAAAAAAAAQQgAAAAAAAABAAAAZUAIAAAAAAAAQAgAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAQggAAAAAAABCCAAAAAAAAAAAAAAAAPC/"
				],
				[
					854,
					1,
					"insert",
					{
						"characters": "replace"
					},
					"BwAAAEAIAAAAAAAAQQgAAAAAAAAAAAAAQQgAAAAAAABCCAAAAAAAAAAAAABCCAAAAAAAAEMIAAAAAAAAAAAAAEMIAAAAAAAARAgAAAAAAAAAAAAARAgAAAAAAABFCAAAAAAAAAAAAABFCAAAAAAAAEYIAAAAAAAAAAAAAEYIAAAAAAAARwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAgAAAAAAABACAAAAAAAAAAAAAAAAPC/"
				],
				[
					855,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAEcIAAAAAAAASQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARwgAAAAAAABHCAAAAAAAAAAAAAAAAPC/"
				],
				[
					857,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAEkIAAAAAAAASggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASQgAAAAAAABJCAAAAAAAAAAAAAAAAPC/"
				],
				[
					858,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAEoIAAAAAAAATAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASggAAAAAAABKCAAAAAAAAAAAAAAAAPC/"
				],
				[
					859,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Add Line in Braces.sublime-macro"
					},
					"BgAAAEsIAAAAAAAATAgAAAAAAAAAAAAATAgAAAAAAABOCAAAAAAAAAAAAABOCAAAAAAAAE8IAAAAAAAAAAAAAE8IAAAAAAAAUQgAAAAAAAAAAAAATAgAAAAAAABMCAAAAAAAAAIAAAAgIEwIAAAAAAAAUAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASwgAAAAAAABLCAAAAAAAAAAAAAAAAPC/"
				],
				[
					860,
					1,
					"insert",
					{
						"characters": "loet"
					},
					"BAAAAFAIAAAAAAAAUQgAAAAAAAAAAAAAUQgAAAAAAABSCAAAAAAAAAAAAABSCAAAAAAAAFMIAAAAAAAAAAAAAFMIAAAAAAAAVAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUAgAAAAAAABQCAAAAAAAAAAAAAAAAPC/"
				],
				[
					861,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAFQIAAAAAAAAVQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVAgAAAAAAABUCAAAAAAAAAAAAAAAAPC/"
				],
				[
					862,
					4,
					"left_delete",
					null,
					"BAAAAFQIAAAAAAAAVAgAAAAAAAABAAAAIFMIAAAAAAAAUwgAAAAAAAABAAAAdFIIAAAAAAAAUggAAAAAAAABAAAAZVEIAAAAAAAAUQgAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAVQgAAAAAAABVCAAAAAAAAAAAAAAAAPC/"
				],
				[
					863,
					1,
					"insert",
					{
						"characters": "et"
					},
					"AgAAAFEIAAAAAAAAUggAAAAAAAAAAAAAUggAAAAAAABTCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUQgAAAAAAABRCAAAAAAAAAAAAAAAAPC/"
				],
				[
					864,
					1,
					"insert",
					{
						"characters": " re=this.regexp"
					},
					"DwAAAFMIAAAAAAAAVAgAAAAAAAAAAAAAVAgAAAAAAABVCAAAAAAAAAAAAABVCAAAAAAAAFYIAAAAAAAAAAAAAFYIAAAAAAAAVwgAAAAAAAAAAAAAVwgAAAAAAABYCAAAAAAAAAAAAABYCAAAAAAAAFkIAAAAAAAAAAAAAFkIAAAAAAAAWggAAAAAAAAAAAAAWggAAAAAAABbCAAAAAAAAAAAAABbCAAAAAAAAFwIAAAAAAAAAAAAAFwIAAAAAAAAXQgAAAAAAAAAAAAAXQgAAAAAAABeCAAAAAAAAAAAAABeCAAAAAAAAF8IAAAAAAAAAAAAAF8IAAAAAAAAYAgAAAAAAAAAAAAAYAgAAAAAAABhCAAAAAAAAAAAAABhCAAAAAAAAGIIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUwgAAAAAAABTCAAAAAAAAAAAAAAAAPC/"
				],
				[
					865,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGIIAAAAAAAAZAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYggAAAAAAABiCAAAAAAAAAAAAAAAAPC/"
				],
				[
					867,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAGQIAAAAAAAAZQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZAgAAAAAAABkCAAAAAAAAAAAAAAAAPC/"
				],
				[
					868,
					1,
					"insert",
					{
						"characters": "\nlet"
					},
					"BQAAAGUIAAAAAAAAZggAAAAAAAAAAAAAZggAAAAAAABqCAAAAAAAAAAAAABqCAAAAAAAAGsIAAAAAAAAAAAAAGsIAAAAAAAAbAgAAAAAAAAAAAAAbAgAAAAAAABtCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQgAAAAAAABlCAAAAAAAAAAAAAAAAPC/"
				],
				[
					869,
					1,
					"insert",
					{
						"characters": " re"
					},
					"AwAAAG0IAAAAAAAAbggAAAAAAAAAAAAAbggAAAAAAABvCAAAAAAAAAAAAABvCAAAAAAAAHAIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbQgAAAAAAABtCAAAAAAAAAAAAAAAAPC/"
				],
				[
					870,
					2,
					"left_delete",
					null,
					"AgAAAG8IAAAAAAAAbwgAAAAAAAABAAAAZW4IAAAAAAAAbggAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAcAgAAAAAAABwCAAAAAAAAAAAAAAAAPC/"
				],
				[
					871,
					1,
					"insert",
					{
						"characters": "fn=this.replacerFunc"
					},
					"FAAAAG4IAAAAAAAAbwgAAAAAAAAAAAAAbwgAAAAAAABwCAAAAAAAAAAAAABwCAAAAAAAAHEIAAAAAAAAAAAAAHEIAAAAAAAAcggAAAAAAAAAAAAAcggAAAAAAABzCAAAAAAAAAAAAABzCAAAAAAAAHQIAAAAAAAAAAAAAHQIAAAAAAAAdQgAAAAAAAAAAAAAdQgAAAAAAAB2CAAAAAAAAAAAAAB2CAAAAAAAAHcIAAAAAAAAAAAAAHcIAAAAAAAAeAgAAAAAAAAAAAAAeAgAAAAAAAB5CAAAAAAAAAAAAAB5CAAAAAAAAHoIAAAAAAAAAAAAAHoIAAAAAAAAewgAAAAAAAAAAAAAewgAAAAAAAB8CAAAAAAAAAAAAAB8CAAAAAAAAH0IAAAAAAAAAAAAAH0IAAAAAAAAfggAAAAAAAAAAAAAfggAAAAAAAB/CAAAAAAAAAAAAAB/CAAAAAAAAIAIAAAAAAAAAAAAAIAIAAAAAAAAgQgAAAAAAAAAAAAAgQgAAAAAAACCCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbggAAAAAAABuCAAAAAAAAAAAAAAAAPC/"
				],
				[
					872,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIIIAAAAAAAAhAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgggAAAAAAACCCAAAAAAAAAAAAAAAAPC/"
				],
				[
					874,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAIQIAAAAAAAAhQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhAgAAAAAAACECAAAAAAAAAAAAAAAAPC/"
				],
				[
					875,
					1,
					"insert",
					{
						"characters": "\nreturn"
					},
					"CAAAAIUIAAAAAAAAhggAAAAAAAAAAAAAhggAAAAAAACKCAAAAAAAAAAAAACKCAAAAAAAAIsIAAAAAAAAAAAAAIsIAAAAAAAAjAgAAAAAAAAAAAAAjAgAAAAAAACNCAAAAAAAAAAAAACNCAAAAAAAAI4IAAAAAAAAAAAAAI4IAAAAAAAAjwgAAAAAAAAAAAAAjwgAAAAAAACQCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhQgAAAAAAACFCAAAAAAAAAAAAAAAAPC/"
				],
				[
					876,
					1,
					"insert",
					{
						"characters": "  "
					},
					"AgAAAJAIAAAAAAAAkQgAAAAAAAAAAAAAkQgAAAAAAACSCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkAgAAAAAAACQCAAAAAAAAAAAAAAAAPC/"
				],
				[
					877,
					1,
					"left_delete",
					null,
					"AQAAAJEIAAAAAAAAkQgAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAkggAAAAAAACSCAAAAAAAAAAAAAAAAPC/"
				],
				[
					880,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAAEgIAAAAAAAASQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAgAAAAAAABICAAAAAAAAAAAAAAAAPC/"
				],
				[
					888,
					1,
					"insert",
					{
						"characters": "s.replaceAll"
					},
					"DAAAAJIIAAAAAAAAkwgAAAAAAAAAAAAAkwgAAAAAAACUCAAAAAAAAAAAAACUCAAAAAAAAJUIAAAAAAAAAAAAAJUIAAAAAAAAlggAAAAAAAAAAAAAlggAAAAAAACXCAAAAAAAAAAAAACXCAAAAAAAAJgIAAAAAAAAAAAAAJgIAAAAAAAAmQgAAAAAAAAAAAAAmQgAAAAAAACaCAAAAAAAAAAAAACaCAAAAAAAAJsIAAAAAAAAAAAAAJsIAAAAAAAAnAgAAAAAAAAAAAAAnAgAAAAAAACdCAAAAAAAAAAAAACdCAAAAAAAAJ4IAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkggAAAAAAACSCAAAAAAAAAAAAAAAAFxA"
				],
				[
					889,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJ4IAAAAAAAAoAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnggAAAAAAACeCAAAAAAAAAAAAAAAAPC/"
				],
				[
					890,
					1,
					"insert",
					{
						"characters": "re,"
					},
					"AwAAAJ8IAAAAAAAAoAgAAAAAAAAAAAAAoAgAAAAAAAChCAAAAAAAAAAAAAChCAAAAAAAAKIIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnwgAAAAAAACfCAAAAAAAAAAAAAAAAPC/"
				],
				[
					891,
					1,
					"insert",
					{
						"characters": " fn"
					},
					"AwAAAKIIAAAAAAAAowgAAAAAAAAAAAAAowgAAAAAAACkCAAAAAAAAAAAAACkCAAAAAAAAKUIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoggAAAAAAACiCAAAAAAAAAAAAAAAAPC/"
				],
				[
					893,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAKYIAAAAAAAApwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApggAAAAAAACmCAAAAAAAAAAAAAAAAPC/"
				],
				[
					945,
					1,
					"cut",
					null,
					"AQAAAFgIAAAAAAAAWAgAAAAAAAANAAAAdGhpcy5yZWdleHAoKQ",
					"AQAAAAAAAAABAAAAWAgAAAAAAABlCAAAAAAAAAAAAAAAAPC/"
				],
				[
					946,
					1,
					"paste",
					null,
					"AQAAAFgIAAAAAAAAZQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAgAAAAAAABYCAAAAAAAAAAAAAAAAPC/"
				],
				[
					949,
					1,
					"cut",
					null,
					"AQAAAFgIAAAAAAAAWAgAAAAAAAANAAAAdGhpcy5yZWdleHAoKQ",
					"AQAAAAAAAAABAAAAZQgAAAAAAABYCAAAAAAAAAAAAAAAAPC/"
				],
				[
					958,
					1,
					"paste",
					null,
					"AgAAAJIIAAAAAAAAnwgAAAAAAAAAAAAAnwgAAAAAAACfCAAAAAAAAAIAAAByZQ",
					"AQAAAAAAAAABAAAAkggAAAAAAACUCAAAAAAAAAAAAAAAAPC/"
				],
				[
					961,
					1,
					"cut",
					null,
					"AQAAAGUIAAAAAAAAZQgAAAAAAAATAAAAdGhpcy5yZXBsYWNlckZ1bmMoKQ",
					"AQAAAAAAAAABAAAAZQgAAAAAAAB4CAAAAAAAAAAAAAAAAPC/"
				],
				[
					966,
					1,
					"paste",
					null,
					"AgAAAI4IAAAAAAAAoQgAAAAAAAAAAAAAoQgAAAAAAAChCAAAAAAAAAIAAABmbg",
					"AQAAAAAAAAABAAAAjggAAAAAAACQCAAAAAAAAAAAAAAAAPC/"
				],
				[
					971,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAE8IAAAAAAAAUAgAAAAAAAAAAAAAUAgAAAAAAABQCAAAAAAAABgAAAAgIGxldCByZT07CiAgICBsZXQgZm49Owo",
					"AQAAAAAAAAABAAAATwgAAAAAAABnCAAAAAAAAAAAAAAAAPC/"
				],
				[
					990,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAACwEAAAAAAAALQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALAQAAAAAAAAsBAAAAAAAAAAAAAAAAPC/"
				],
				[
					991,
					1,
					"left_delete",
					null,
					"AQAAACwEAAAAAAAALAQAAAAAAAABAAAAbQ",
					"AQAAAAAAAAABAAAALQQAAAAAAAAtBAAAAAAAAAAAAAAAAPC/"
				],
				[
					992,
					1,
					"insert",
					{
						"characters": "memoize,"
					},
					"CAAAACwEAAAAAAAALQQAAAAAAAAAAAAALQQAAAAAAAAuBAAAAAAAAAAAAAAuBAAAAAAAAC8EAAAAAAAAAAAAAC8EAAAAAAAAMAQAAAAAAAAAAAAAMAQAAAAAAAAxBAAAAAAAAAAAAAAxBAAAAAAAADIEAAAAAAAAAAAAADIEAAAAAAAAMwQAAAAAAAAAAAAAMwQAAAAAAAA0BAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALAQAAAAAAAAsBAAAAAAAAAAAAAAAAPC/"
				],
				[
					997,
					1,
					"cut",
					null,
					"AQAAAHsGAAAAAAAAewYAAAAAAAAgAgAACmNvbnN0IGltcG9ydFJlcGxhY2VyID0gewogIHJlcGxhY2VtZW50TWFwOiBtZW1vaXplKCgpID0+CiAgICBPYmplY3QuZW50cmllcyhSZWFkSlNPTigncGFja2FnZS5qc29uJykuX21vZHVsZUFsaWFzZXMpCiAgICAgIC5maWx0ZXIoKFtrLCB2XSkgPT4gIS9bLlwvXS8udGVzdCh2KSkKICAgICAgLm1hcChhID0+IGEucmV2ZXJzZSgpKQogICksCiAgcmVnZXhwKCkgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoIlxcYmZyb21cXHMqJyhcXCIgKyB1dGlsLnVuaXF1ZSh0aGlzLnJlcGxhY2VtZW50TWFwKCkubWFwKChbaywgdl0pID0+IGspKS5qb2luKCd8JykgKyAiKSc7IiwgJ2dtJyk7CiAgfSwKICByZXBsYWNlckZ1bmMoKSB7CiAgICBsZXQgbSA9IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnJlcGxhY2VtZW50TWFwKCkpOwoKICAgIHJldHVybiAodywgcywgaSkgPT4gYGZyb20gJyR7bVtzXX0nO2A7CiAgfSwKICByZXBsYWNlKHMpIHsKICAgICAgIHJldHVybiBzLnJlcGxhY2VBbGwodGhpcy5yZWdleHAoKSwgdGhpcy5yZXBsYWNlckZ1bmMoKSk7CiAgfQp9Ow",
					"AQAAAAAAAAABAAAAewYAAAAAAACbCAAAAAAAAAAAAAAAAPC/"
				],
				[
					998,
					1,
					"paste",
					null,
					"AQAAAHsGAAAAAAAAmwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAewYAAAAAAAB7BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1003,
					1,
					"insert",
					{
						"characters": "import"
					},
					"BgAAAPYEAAAAAAAA9wQAAAAAAAAAAAAA9wQAAAAAAAD4BAAAAAAAAAAAAAD4BAAAAAAAAPkEAAAAAAAAAAAAAPkEAAAAAAAA+gQAAAAAAAAAAAAA+gQAAAAAAAD7BAAAAAAAAAAAAAD7BAAAAAAAAPwEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9gQAAAAAAAD2BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1004,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPwEAAAAAAAA/QQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/AQAAAAAAAD8BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1005,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAP0EAAAAAAAA/wQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/QQAAAAAAAD9BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1007,
					2,
					"left_delete",
					null,
					"AgAAAP4EAAAAAAAA/gQAAAAAAAABAAAAff0EAAAAAAAA/QQAAAAAAAABAAAAew",
					"AQAAAAAAAAABAAAA/wQAAAAAAAD/BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1008,
					1,
					"insert",
					{
						"characters": "importReplacer"
					},
					"DgAAAP0EAAAAAAAA/gQAAAAAAAAAAAAA/gQAAAAAAAD/BAAAAAAAAAAAAAD/BAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAQUAAAAAAAAAAAAAAQUAAAAAAAACBQAAAAAAAAAAAAACBQAAAAAAAAMFAAAAAAAAAAAAAAMFAAAAAAAABAUAAAAAAAAAAAAABAUAAAAAAAAFBQAAAAAAAAAAAAAFBQAAAAAAAAYFAAAAAAAAAAAAAAYFAAAAAAAABwUAAAAAAAAAAAAABwUAAAAAAAAIBQAAAAAAAAAAAAAIBQAAAAAAAAkFAAAAAAAAAAAAAAkFAAAAAAAACgUAAAAAAAAAAAAACgUAAAAAAAALBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/QQAAAAAAAD9BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1009,
					1,
					"insert",
					{
						"characters": " fo"
					},
					"AwAAAAsFAAAAAAAADAUAAAAAAAAAAAAADAUAAAAAAAANBQAAAAAAAAAAAAANBQAAAAAAAA4FAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACwUAAAAAAAALBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1010,
					1,
					"left_delete",
					null,
					"AQAAAA0FAAAAAAAADQUAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAADgUAAAAAAAAOBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1011,
					1,
					"insert",
					{
						"characters": "rom"
					},
					"AwAAAA0FAAAAAAAADgUAAAAAAAAAAAAADgUAAAAAAAAPBQAAAAAAAAAAAAAPBQAAAAAAABAFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADQUAAAAAAAANBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1012,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABAFAAAAAAAAEQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAUAAAAAAAAQBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1013,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAABEFAAAAAAAAEwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQUAAAAAAAARBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1014,
					1,
					"insert",
					{
						"characters": ".-/"
					},
					"AwAAABIFAAAAAAAAEwUAAAAAAAAAAAAAEwUAAAAAAAAUBQAAAAAAAAAAAAAUBQAAAAAAABUFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgUAAAAAAAASBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1015,
					2,
					"left_delete",
					null,
					"AgAAABQFAAAAAAAAFAUAAAAAAAABAAAALxMFAAAAAAAAEwUAAAAAAAABAAAALQ",
					"AQAAAAAAAAABAAAAFQUAAAAAAAAVBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1016,
					1,
					"insert",
					{
						"characters": "/importReplace"
					},
					"DgAAABMFAAAAAAAAFAUAAAAAAAAAAAAAFAUAAAAAAAAVBQAAAAAAAAAAAAAVBQAAAAAAABYFAAAAAAAAAAAAABYFAAAAAAAAFwUAAAAAAAAAAAAAFwUAAAAAAAAYBQAAAAAAAAAAAAAYBQAAAAAAABkFAAAAAAAAAAAAABkFAAAAAAAAGgUAAAAAAAAAAAAAGgUAAAAAAAAbBQAAAAAAAAAAAAAbBQAAAAAAABwFAAAAAAAAAAAAABwFAAAAAAAAHQUAAAAAAAAAAAAAHQUAAAAAAAAeBQAAAAAAAAAAAAAeBQAAAAAAAB8FAAAAAAAAAAAAAB8FAAAAAAAAIAUAAAAAAAAAAAAAIAUAAAAAAAAhBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEwUAAAAAAAATBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1017,
					1,
					"insert",
					{
						"characters": "r.js"
					},
					"BAAAACEFAAAAAAAAIgUAAAAAAAAAAAAAIgUAAAAAAAAjBQAAAAAAAAAAAAAjBQAAAAAAACQFAAAAAAAAAAAAACQFAAAAAAAAJQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIQUAAAAAAAAhBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1019,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAACYFAAAAAAAAJwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgUAAAAAAAAmBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1020,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAACcFAAAAAAAAKAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJwUAAAAAAAAnBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1027,
					1,
					"cut",
					null,
					"AQAAAK0GAAAAAAAArQYAAAAAAAAhAgAACmNvbnN0IGltcG9ydFJlcGxhY2VyID0gewogIHJlcGxhY2VtZW50TWFwOiBtZW1vaXplKCgpID0+CiAgICBPYmplY3QuZW50cmllcyhSZWFkSlNPTigncGFja2FnZS5qc29uJykuX21vZHVsZUFsaWFzZXMpCiAgICAgIC5maWx0ZXIoKFtrLCB2XSkgPT4gIS9bLlwvXS8udGVzdCh2KSkKICAgICAgLm1hcChhID0+IGEucmV2ZXJzZSgpKQogICksCiAgcmVnZXhwKCkgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoIlxcYmZyb21cXHMqJyhcXCIgKyB1dGlsLnVuaXF1ZSh0aGlzLnJlcGxhY2VtZW50TWFwKCkubWFwKChbaywgdl0pID0+IGspKS5qb2luKCd8JykgKyAiKSc7IiwgJ2dtJyk7CiAgfSwKICByZXBsYWNlckZ1bmMoKSB7CiAgICBsZXQgbSA9IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnJlcGxhY2VtZW50TWFwKCkpOwoKICAgIHJldHVybiAodywgcywgaSkgPT4gYGZyb20gJyR7bVtzXX0nO2A7CiAgfSwKICByZXBsYWNlKHMpIHsKICAgICAgIHJldHVybiBzLnJlcGxhY2VBbGwodGhpcy5yZWdleHAoKSwgdGhpcy5yZXBsYWNlckZ1bmMoKSk7CiAgfQp9Owo",
					"AQAAAAAAAAABAAAArQYAAAAAAADOCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1063,
					1,
					"paste",
					null,
					"AgAAAMMBAAAAAAAAmwIAAAAAAAAAAAAAmwIAAAAAAACbAgAAAAAAANgAAABpbXBvcnQgeyBJZkRlYnVnLCBMb2dJZkRlYnVnLCBSZWFkRmlsZSwgTG9hZEhpc3RvcnksIFJlYWRKU09OLCBNYXBGaWxlLCBXcml0ZUZpbGUsIFdyaXRlSlNPTiwgRGlySXRlcmF0b3IsIFJlY3Vyc2l2ZURpckl0ZXJhdG9yLCBSZWFkRGlyUmVjdXJzaXZlLCBGaWx0ZXIsIEZpbHRlckltYWdlcywgU29ydEZpbGVzLCBTdGF0RmlsZXMgfSBmcm9tICcuL2lvLWhlbHBlcnMuanMnOwo",
					"AQAAAAAAAAABAAAAwwEAAAAAAACbAgAAAAAAAAAAAAAAAPC/"
				],
				[
					1071,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACCawAAaW1wb3J0IGZpbGVzeXN0ZW0gZnJvbSAnZnMnOwovL2ltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwppbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJzsKaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsKaW1wb3J0ICogYXMgdXRpbCBmcm9tICd1dGlsJzsKaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInOwppbXBvcnQgZXhwcmVzc1dzIGZyb20gJ2V4cHJlc3Mtd3MnOwppbXBvcnQgeyBBbGVhIH0gZnJvbSAnLi9saWIvYWxlYS5qcyc7CmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJzsKaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtZmV0Y2gnOwppbXBvcnQgeyBleGVjIH0gZnJvbSAncHJvbWlzaWZ5LWNoaWxkLXByb2Nlc3MnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCB7IHByb21pc2VzIGFzIGZzUHJvbWlzZXMgfSBmcm9tICdmcyc7CmltcG9ydCB7IElmRGVidWcsIExvZ0lmRGVidWcsIFJlYWRGaWxlLCBMb2FkSGlzdG9yeSwgUmVhZEpTT04sIE1hcEZpbGUsIFdyaXRlRmlsZSwgV3JpdGVKU09OLCBEaXJJdGVyYXRvciwgUmVjdXJzaXZlRGlySXRlcmF0b3IsIFJlYWREaXJSZWN1cnNpdmUsIEZpbHRlciwgRmlsdGVySW1hZ2VzLCBTb3J0RmlsZXMsIFN0YXRGaWxlcyB9IGZyb20gJy4vaW8taGVscGVycy5qcyc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IFNlcmlhbFBvcnQgZnJvbSAnc2VyaWFscG9ydCc7CmltcG9ydCBTZXJpYWxTdHJlYW0gZnJvbSAnQHNlcmlhbHBvcnQvc3RyZWFtJzsKaW1wb3J0IFNvY2tldCBmcm9tICcuL3dlYlNvY2tldC5qcyc7CmltcG9ydCBXZWJTb2NrZXQgZnJvbSAnd3MnOwppbXBvcnQgUG9ydGFibGVDaGlsZFByb2Nlc3MsIHsgU0lHVEVSTSwgU0lHS0lMTCwgU0lHU1RPUCwgU0lHQ09OVCB9IGZyb20gJy4vbGliL2NoaWxkUHJvY2Vzcy5qcyc7CmltcG9ydCB7IFJlcGVhdGVyIH0gZnJvbSAnLi9saWIvcmVwZWF0ZXIvcmVwZWF0ZXIuanMnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnLi9tZXNzYWdlLmpzJzsKaW1wb3J0IHsgbGF6eVByb3BlcnRpZXMsbWVtb2l6ZSwgYWJicmV2aWF0ZSwgY2xhc3NOYW1lLCBlc2NhcGUsIGdldE1ldGhvZHMsIGlzT2JqZWN0LCByYW5kU3RyLCB0b1VuaXhUaW1lLCB0cnlDYXRjaCwgdHJ5RnVuY3Rpb24sIHVuaXhUaW1lLCB3YWl0Rm9yLCB3ZWFrQXNzaWduLCB3ZWFrTWFwcGVyLCBmaWx0ZXIsIGZpbHRlcktleXMsIG1hdGNoQWxsIH0gZnJvbSAnLi9saWIvbWlzYy5qcyc7CmltcG9ydCBpbXBvcnRSZXBsYWNlciBmcm9tICcuL2ltcG9ydFJlcGxhY2VyLmpzJzsKCmNvbnN0IHJvdGF0ZUxlZnQgPSBuID0+IHggPT4gKHggPDwgbikgfCAoKHggPj4gKDMyIC0gbikpICYgfigoLTEgPj4gbikgPDwgbikpOwoKZnVuY3Rpb24gaGFzaFN0cmluZyhzdHJpbmcsIGJpdHMgPSAzMiwgbWFzayA9IDB4ZmZmZmZmZmYpIHsKICBsZXQgcmV0ID0gMDsKICBsZXQgYml0YyA9IDA7CiAgbGV0IHJvdCA9IHJvdGF0ZUxlZnQoNyk7CiAgZm9yKGxldCBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykgewogICAgY29uc3QgY29kZSA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOwogICAgcmV0ICo9IDE4NjsKICAgIHJldCBePSBjb2RlOwogICAgYml0YyArPSA4OwogICAgcmV0ID0gcm90KHJldCkgJiBtYXNrOwogIH0KICByZXR1cm4gcmV0ICYgMHg3ZmZmZmZmZjsKfQoKLy9TZXJpYWxTdHJlYW0uQmluZGluZyA9IFNlcmlhbEJpbmRpbmc7CmxldCBuYW1lcyA9IFtdLAogIGRpcnMgPSB7fTsKCmxldCBjaGlsZFByb2Nlc3M7CmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7Cgpjb25zdCBmaWxlcyA9IG5ldyBTZXQoKTsKY29uc3QgaGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGExJyk7Cgpjb25zdCBwcm5nID0gbmV3IEFsZWEoKTsKcHJuZy5zZWVkKERhdGUubm93KCkpOwpjb25zb2xlLmxvZygncmFuZG9tOicsIHBybmcudWludDMyKCkpOwpjb25zb2xlLmxvZygncmFuZFN0cjonLCByYW5kU3RyKDgsIG51bGwsIHBybmcpKTsKCmxldCBhcHAgPSBleHByZXNzKCk7CmV4cHJlc3NXcyhhcHAsIG51bGwsIHsgcGVyTWVzc2FnZURlZmxhdGU6IGZhbHNlIH0pOwpjb25zdCBwID0gcGF0aC5qb2luKHBhdGguZGlybmFtZShwcm9jZXNzLmFyZ3ZbMV0pLCAnLicpOwoKbGV0IG1vdW50RGlycyA9IFsnZGF0YScsICcuLi9hbi10cm9uaWNzL2VhZ2xlJywgJy4uL2luc2lkZXIvZWFnbGUnLCAnLi4vbGMtbWV0ZXIvZWFnbGUnLCAnLi4vcGljdGVzdC9lYWdsZSddOwpsZXQgdG1wRGlyID0gJy4vdG1wJzsKCmFzeW5jIGZ1bmN0aW9uIHdhaXRDaGlsZChwcm9jKSB7CiAgY29uc3QgeyBwaWQsIHN0ZG91dCwgc3RkZXJyLCB3YWl0IH0gPSBwcm9jOwogIGNvbnNvbGUubG9nKCdQcm9jZXNzIElEID0nLCBwaWQpOwogIGxldCByZXQgPSBhd2FpdCB3YWl0KCk7CiAgY29uc29sZS5sb2coJ3dhaXQoKSA9JywgcmV0KTsKICByZXR1cm4gcmV0Owp9Cgphc3luYyBmdW5jdGlvbiBydW5Nb3VudChkaXJzSXRlcmF0b3IpIHsKICBmb3IgYXdhaXQobGV0IGRpcnMgb2YgYXdhaXQgZGlyc0l0ZXJhdG9yKSB7CiAgICBjb25zb2xlLmxvZyhgcnVuTW91bnRgLCBkaXJzKTsKICAgIGNvbnNvbGUuZGVidWcoYE1vdW50ICR7ZGlyc30gdG8gdG1wL2ApOwoKICAgIGxldCBwcm9jID0gY2hpbGRQcm9jZXNzKCcuL21vdW50LXRtcC5zaCcsIFsnLWYnLCAuLi51bmlxdWUoZGlycyB8fCBbXSldLCB7CiAgICAgIGVudjogeyBPUFRTOiAnYXV0b191bm1vdW50LGF0b21pY19vX3RydW5jLGJpZ193cml0ZXMsa2VybmVsX2NhY2hlJyB9CiAgICB9KTsKICAgIGFzeW5jIGZ1bmN0aW9uIHJlYWREYXRhKG91dHB1dCwgY2FsbGJhY2sgPSBkID0+IHt9KSB7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIGF3YWl0KGxldCBkYXRhIG9mIG5ldyBSZXBlYXRlcigocHVzaCwgc3RvcCkgPT4gewogICAgICAgICAgb3V0cHV0Lm9uKCdkYXRhJywgY2h1bmsgPT4gcHVzaChjaHVuay50b1N0cmluZygpKSk7CiAgICAgICAgICBwcm9jLm9uKCdleGl0Jywgc3RvcCk7CiAgICAgICAgICAvLyAgICAgICAgICBvdXRwdXQub24oJ2Nsb3NlJywgKCkgPT4gcHVzaChudWxsKSk7CiAgICAgICAgfSkpIHsKICAgICAgICAgIGlmKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ291dHB1dCBFT0YnKTsKICAgICAgICAgICAgLy9yZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZih0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJykgZGF0YS5zcGxpdCgvXG4vZykuZm9yRWFjaChsaW5lID0+IGNhbGxiYWNrKGxpbmUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIHJldHVybiBlOwogICAgICB9CiAgICB9CiAgICByZWFkRGF0YShwcm9jLnN0ZG91dCk7CiAgICByZWFkRGF0YShwcm9jLnN0ZGVyciwgZGF0YSA9PiBjb25zb2xlLmxvZygnc3RkZXJyIGRhdGE6JywgYWJicmV2aWF0ZShlc2NhcGUoZGF0YSksIHByb2Nlc3MuZW52WydDT0xVTU5TJ10gfHwgMTIwKSkpOwogICAgbGV0IGV4aXRDb2RlID0gYXdhaXQgd2FpdENoaWxkKHByb2MpOwogICAgY29uc29sZS5sb2coJ2V4aXRDb2RlOicsIGV4aXRDb2RlKTsKICAgIHJldHVybiBleGl0Q29kZTsKICB9Cn0KCmFzeW5jIGZ1bmN0aW9uIFJlcXVlc3RDb250b3VycyhyZXEsIHJlcykgewogIGNvbnN0IHsgYm9keSB9ID0gcmVxOwogIGNvbnN0IHsgY29udG91cnMsIGZyYW1lLCB3aWR0aCwgaGVpZ2h0IH0gPSBib2R5OwogIGNvbnNvbGUubG9nKGAke3JlcS51cmx9YCwgeyBjb250b3VycywgZnJhbWUsIHdpZHRoLCBoZWlnaHQgfSk7CgogIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCdPSycpOwoKICBTb2NrZXQuc2VuZEFsbCh7IHR5cGU6ICdDT05UT1VSUycsIG9yaWdpbjogJyonLCByZWNpcGllbnQ6ICcqJywgYm9keSB9KTsKCiAgLy8gIHJlcy5qc29uKHsgc3RhdHVzOiAnT0snIH0pOwp9CgovL2NvbnNvbGUubG9nKCdTZXJ2aW5nIGZyb20nLCBwKTsKCmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7CiAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gcHJvY2VzczsKICBnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZSh7CiAgICBzdGRvdXQsCiAgICBzdGRlcnIsCiAgICBpbnNwZWN0T3B0aW9uczogewogICAgICBicmVha0xlbmd0aDogMTIwLAogICAgICBtYXhTdHJpbmdMZW5ndGg6IEluZmluaXR5LAogICAgICBtYXhBcnJheUxlbmd0aDogMzAsCiAgICAgIGNvbXBhY3Q6IDIKICAgIH0KICB9KTsKICBhd2FpdCBQb3J0YWJsZUNoaWxkUHJvY2VzcyhjcCA9PiAoY2hpbGRQcm9jZXNzID0gY3ApKTsKCiAgU29ja2V0LnRpbWVvdXRDeWNsZXIoKTsKCiAgLyogIGxldCBtb3VudGVyID0gcnVuTW91bnQoCiAgICBuZXcgUmVwZWF0ZXIoYXN5bmMgKHB1c2gsIHN0b3ApID0+IHsKICAgICAgd2hpbGUodHJ1ZSkgYXdhaXQgcHVzaChtb3VudERpcnMpOwogICAgfSkKICApLnRoZW4oZXhpdENvZGUgPT4gewogICAgY29uc29sZS5sb2coJ3J1bk1vdW50JywgeyBleGl0Q29kZSB9KTsKICAgIGlmKGV4aXRDb2RlID09IDEyNykgewogICAgICBwcm9jZXNzLmV4aXQoMTI3KTsKICAgIH0KICAgIHJldHVybiBleGl0Q29kZTsKICB9KTsqLwogIGNvbnNvbGUubG9nKCdtb3VudERpcnMnLCB7IG1vdW50RGlycyB9KTsKCiAgYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHsKICAgIC8vICAgIGNvbnNvbGUubG9nKCJyZXEiLCByZXEudXJsLCByZXEubWV0aG9kKTsKICAgIG5leHQoKTsKICB9KTsKICBhcHAudXNlKGV4cHJlc3MudGV4dCh7IHR5cGU6ICdhcHBsaWNhdGlvbi94bWwnLCBsaW1pdDogJzE2Mzg0a2InIH0pKTsKCiAgYXBwLnVzZShib2R5UGFyc2VyLmpzb24oeyBsaW1pdDogJzIwMG1iJyB9KSk7CiAgYXBwLnVzZShib2R5UGFyc2VyLnJhdyh7IHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnLCBsaW1pdDogJzUyNDI4OGtiJyB9KSk7CiAgYXBwLnVzZShib2R5UGFyc2VyLnJhdyh7IHR5cGU6ICd0ZXh0L3BsYWluJywgbGltaXQ6ICc1MjQyODhrYicgfSkpOwogIGFwcC51c2UoYm9keVBhcnNlci5yYXcoeyB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywgbGltaXQ6ICc1MjQyODhrYicgfSkpOwogIGFwcC51c2UoYm9keVBhcnNlci5yYXcoeyB0eXBlOiAnbXVsdGlwYXJ0L21peGVkJywgbGltaXQ6ICcxNjM4NGtiJyB9KSk7CgogIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgICByZXMuYXBwZW5kKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbSwgaHR0cDovLzEyNy4wLjAuMToke3BvcnR9YCk7CiAgICByZXMuYXBwZW5kKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCxQVVQsUE9TVCxERUxFVEUsT1BUSU9OUycpOwogICAgcmVzLmFwcGVuZCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdDb250ZW50LVR5cGUsIEFjY2VwdCwgQXV0aG9yaXphdGlvbicpOwogICAgcmVzLmFwcGVuZCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpOwogICAgbmV4dCgpOwogIH0pOwoKICBmdW5jdGlvbiBTZW5kUmF3KHJlcywgZmlsZSwgZGF0YSwgdHlwZSA9ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKSB7CiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uJywgYGF0dGFjaG1lbnQ7IGZpbGVuYW1lPSIke3BhdGguYmFzZW5hbWUoZmlsZSl9ImApOwoKICAgIGlmKHR5cGUpIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsIHR5cGUpOwogICAgaWYoZGF0YSkgcmV0dXJuIHJlcy5zZW5kKGRhdGEpOwogICAgZWxzZSBpZihmaWxlICYmIHR5cGVvZiBmaWxlID09ICdzdHJpbmcnKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzZW5kRmlsZScsIHsgZmlsZSB9KTsKICAgICAgcmV0dXJuIHJlcy5zZW5kRmlsZShmaWxlLCB7IHJvb3Q6IHByb2Nlc3MuY3dkKCkgfSk7CiAgICB9CiAgfQoKICBjb25zdCBjb252ZXJ0VG9HZXJiZXIgPSBhc3luYyAoYm9hcmRGaWxlLCBvcHRzID0ge30pID0+IHsKICAgIGNvbnNvbGUubG9nKCdjb252ZXJ0VG9HZXJiZXInLCB7IGJvYXJkRmlsZSwgb3B0cyB9KTsKICAgIGxldCB7CiAgICAgIGxheWVycyA9IG9wdHMuc2lkZSA9PSAnb3V0bGluZScgPyBbJ01lYXN1cmVzJ10gOiBvcHRzLmRyaWxsID8gWydEcmlsbHMnLCAnSG9sZXMnXSA6IFtvcHRzLmZyb250ID8gJ1RvcCcgOiAnQm90dG9tJywgJ1BhZHMnLCAnVmlhcyddLAogICAgICBmb3JtYXQgPSBvcHRzLmRyaWxsID8gJ0VYQ0VMTE9OJyA6ICdHRVJCRVJfUlMyNzRYJywKICAgICAgZGF0YSwKICAgICAgZmV0Y2ggPSBmYWxzZSwKICAgICAgZnJvbnQsCiAgICAgIGJhY2sKICAgIH0gPSBvcHRzOwogICAgY29uc3QgYmFzZSA9IHBhdGguYmFzZW5hbWUoYm9hcmRGaWxlLCAnLmJyZCcpOwogICAgY29uc3QgZm9ybWF0VG9FeHQgPSAobGF5ZXJzLCBmb3JtYXQpID0+IHsKICAgICAgaWYob3B0cy5kcmlsbCB8fCBmb3JtYXQuc3RhcnRzV2l0aCgnRVhDRUxMT04nKSB8fCBsYXllcnMuaW5kZXhPZignRHJpbGxzJykgIT0gLTEgfHwgbGF5ZXJzLmluZGV4T2YoJ0hvbGVzJykgIT0gLTEpIHJldHVybiAnVFhUJzsKICAgICAgaWYobGF5ZXJzLmluZGV4T2YoJ0JvdHRvbScpICE9IC0xIHx8IGZvcm1hdC5zdGFydHNXaXRoKCdHRVJCRVInKSkgcmV0dXJuIG9wdHMuc2lkZSA9PSAnb3V0bGluZScgPyAnR0tPJyA6IGZyb250ID8gJ0dUTCcgOiAnR0JMJzsKCiAgICAgIHJldHVybiAncnMyNzR4JzsKICAgIH07CiAgICBjb25zdCBnZXJiZXJGaWxlID0gYC4vdG1wLyR7YmFzZX0uJHtmb3JtYXRUb0V4dChsYXllcnMsIGZvcm1hdCl9YDsKICAgIGNvbnN0IGNtZCA9IGBlYWdsZSAtWCAtZCAke2Zvcm1hdH0gLW8gIiR7Z2VyYmVyRmlsZX0iICIke2JvYXJkRmlsZX0iICR7bGF5ZXJzLmpvaW4oJyAnKX1gOwogICAgY29uc29sZS5sb2coYGV4ZWN1dGluZyAnJHtjbWR9J2ApOwogICAgY29uc3QgY2hpbGQgPSBleGVjKGAke2NtZH0gMj4mMSAwPC9kZXYvbnVsbGAsIHt9KTsKICAgIC8vIGRvIHdoYXRldmVyIHlvdSB3YW50IHdpdGggYGNoaWxkYCBoZXJlIC0gaXQncyBhIENoaWxkUHJvY2VzcyBpbnN0YW5jZSBqdXN0CiAgICAvLyB3aXRoIHByb21pc2UtZnJpZW5kbHkgYC50aGVuKClgICYgYC5jYXRjaCgpYCBmdW5jdGlvbnMgYWRkZWQgdG8gaXQhCiAgICBsZXQgb3V0cHV0ID0gJyc7CiAgICBjaGlsZC5zdGRvdXQub24oJ2RhdGEnLCBkYXRhID0+IChvdXRwdXQgKz0gZGF0YSkpOwogICAgY2hpbGQuc3RkZXJyLm9uKCdkYXRhJywgZGF0YSA9PiAob3V0cHV0ICs9IGRhdGEpKTsKICAgIGNvbnN0IHsgc3Rkb3V0LCBzdGRlcnIsIGNvZGUsIHNpZ25hbCB9ID0gYXdhaXQgY2hpbGQ7CiAgICBjb25zb2xlLmxvZyhgY29kZTogJHtjb2RlfWApOwogICAgLy8gIGNvbnNvbGUubG9nKGBvdXRwdXQ6ICR7b3V0cHV0fWApOwogICAgaWYoY29kZSAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKG91dHB1dCk7CiAgICBpZihvdXRwdXQpIG91dHB1dCA9IG91dHB1dC5yZXBsYWNlKC9ccypccipcbi9nLCAnXG4nKTsKICAgIGxldCByZXN1bHQgPSB7IGNvZGUsIG91dHB1dCB9OwogICAgaWYob3B0cy5mZXRjaCkgcmVzdWx0LmRhdGEgPSBhd2FpdCAoYXdhaXQgZnNQcm9taXNlcy5yZWFkRmlsZShHZXRWRlNQYXRoKGdlcmJlckZpbGUpKSkudG9TdHJpbmcoKTsKICAgIHJlc3VsdC5maWxlID0gZ2VyYmVyRmlsZTsKICAgIGNvbnNvbGUubG9nKCdjb252ZXJ0VG9HZXJiZXIgcmVzdWx0ID0nLCByZXN1bHQpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICBjb25zdCBnZXJiZXJFbmRwb2ludCA9IGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyBib2R5IH0gPSByZXE7CiAgICBsZXQgeyBib2FyZCwgc2F2ZSwgZmlsZTogZmlsZW5hbWUsIHJhdywgLi4ub3B0cyB9ID0gYm9keTsKICAgIGxldCByZXN1bHQ7CiAgICBjb25zb2xlLmxvZygnUmVxdWVzdCAvZ2VyYmVyJywgeyBib2FyZCwgc2F2ZSwgb3B0cyB9KTsKICAgIHRyeSB7CiAgICAgIHJlc3VsdCA9IGF3YWl0IGNvbnZlcnRUb0dlcmJlcihib2FyZCwgb3B0cyk7CiAgICAgIGlmKHNhdmUpIHsKICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lIHx8IHR5cGVvZiBzYXZlID09ICdzdHJpbmcnID8gc2F2ZSA6IG51bGw7CiAgICAgICAgZmlsZW5hbWUgPSBgdG1wL2AgKyBmaWxlbmFtZS5yZXBsYWNlKC8uKlwvKFteXC9dKSpcLlteXC8uXSokL2csICckMScpOwogICAgICAgIGF3YWl0IGZzUHJvbWlzZXMud3JpdGVGaWxlKGZpbGVuYW1lLCByZXN1bHQuZGF0YSkudGhlbihyZXMgPT4gY29uc29sZS5sb2coJ1dyb3RlIGZpbGU6JywgcmVzKSk7CiAgICAgIH0KICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgcmVzdWx0ID0geyBlcnJvciB9OwogICAgfQogICAgY29uc29sZS5sb2coCiAgICAgICdSZXNwb25zZSAvZ2VyYmVyJywKICAgICAgZmlsdGVyS2V5cyhyZXN1bHQsIGsgPT4gIS8ob3V0cHV0fGRhdGEpLy50ZXN0KGspKQogICAgKTsKCiAgICBpZigvZ2V0L2kudGVzdChyZXEubWV0aG9kKSB8fCByYXcpIHsKICAgICAgY29uc3QgeyBmaWxlIH0gPSByZXN1bHQ7CiAgICAgIHJldHVybiBTZW5kUmF3KHJlcywgZmlsZSwgcmVzdWx0LmRhdGEpOwogICAgfQogICAgcmVzLmpzb24ocmVzdWx0KTsKICB9OwoKICBhcHAuZ2V0KC9eXC9nZXJiZXIvLCBnZXJiZXJFbmRwb2ludCk7CiAgYXBwLnBvc3QoL15cL2dlcmJlci8sIGdlcmJlckVuZHBvaW50KTsKCiAgY29uc3QgZ2VyYmVyVG9HY29kZSA9IGFzeW5jIChnZXJiZXJGaWxlLCBhbGxPcHRzID0ge30pID0+IHsKICAgIGNvbnN0IGJhc2VuYW1lID0gZ2VyYmVyRmlsZS5yZXBsYWNlKC8uKlwvL2csICcnKS5yZXBsYWNlKC9cLlteLl0qJC8sICcnKTsKICAgIGxldCB7IGZldGNoLCBkYXRhLCByYXcsIC4uLm9wdHMgfSA9IGFsbE9wdHM7CiAgICBvcHRzID0gewogICAgICBiYXNlbmFtZSwKICAgICAgenNhZmU6ICcxbW0nLAogICAgICB6Y2hhbmdlOiAnMm1tJywKICAgICAgendvcms6ICctMW1tJywKICAgICAgemRyaWxsOiAnLTJtbScsCiAgICAgIHpjdXQ6ICctMm1tJywKICAgICAgJ2N1dHRlci1kaWFtZXRlcic6ICcxbW0nLAogICAgICAnZHJpbGwtZmVlZCc6IDEwMDAsCiAgICAgICdkcmlsbC1zcGVlZCc6IDEwMDAwLAogICAgICAnbWlsbC1mZWVkJzogNjAwLAogICAgICAnbWlsbC1zcGVlZCc6IDE2MDAwLAogICAgICAnY3V0LWZlZWQnOiAyMDAsCiAgICAgICdjdXQtc3BlZWQnOiAxMDAwMCwKICAgICAgJ2N1dC1pbmZlZWQnOiAnMW1tJywKCiAgICAgICdvdXRwdXQtZGlyJzogJy4vdG1wLycsCiAgICAgIC4uLm9wdHMKICAgIH07CiAgICBpZihvcHRzLmZyb250ID09IHVuZGVmaW5lZCAmJiBvcHRzLmJhY2sgPT0gdW5kZWZpbmVkICYmIG9wdHMuZHJpbGwgPT0gdW5kZWZpbmVkKSBvcHRzLmJhY2sgPSBnZXJiZXJGaWxlOwogICAgbGV0IHNpZGVzID0gW107CgogICAgZm9yKGxldCBzaWRlIG9mIFsnZnJvbnQnLCAnYmFjaycsICdkcmlsbCcsICdvdXRsaW5lJ10pCiAgICAgIGlmKHNpZGUgaW4gb3B0cykgewogICAgICAgIGlmKHR5cGVvZiBvcHRzW3NpZGVdICE9ICdzdHJpbmcnKSBvcHRzW3NpZGVdID0gZ2VyYmVyRmlsZTsKICAgICAgICBzaWRlcy5wdXNoKHNpZGUpOwogICAgICB9CgogICAgaWYob3B0cy52b3Jvbm9pICYmICFvcHRzLnZlY3RvcmlhbCkgb3B0cy52ZWN0b3JpYWwgPSAxOwoKICAgIGNvbnNvbGUuZGVidWcoYGdlcmJlclRvR2NvZGVgLCBvcHRzKTsKICAgIGZ1bmN0aW9uIG1ha2VQYXRoKGV4dCwgc2lkZSwgYmFzZSA9IGJhc2VuYW1lKSB7CiAgICAgIHJldHVybiBwYXRoLmpvaW4ob3B0c1snb3V0cHV0LWRpciddLCBgJHtiYXNlfV8ke3NpZGV9LiR7ZXh0fWApOwogICAgfQoKICAgIGNvbnN0IHBhcmFtcyA9IFsuLi5PYmplY3QuZW50cmllcyhvcHRzKV0KICAgICAgLmZpbHRlcigoW2ssIHZdKSA9PiB0eXBlb2YgdiA9PSAnc3RyaW5nJyB8fCB0eXBlb2YgdiA9PSAnbnVtYmVyJyB8fCAodHlwZW9mIHYgPT0gJ2Jvb2xlYW4nICYmIHYgPT09IHRydWUpKQogICAgICAubWFwKChbaywgdl0pID0+IGAtLSR7a30ke3R5cGVvZiB2ICE9ICdib29sZWFuJyAmJiB2ICE9ICcnID8gJz0nICsgdiA6ICcnfWApOwogICAgY29uc29sZS5sb2coJ1JlcXVlc3QgL2djb2RlJywgeyBnZXJiZXJGaWxlLCBmZXRjaCwgcmF3IH0pOwogICAgLy9jb25zb2xlLndhcm4oYGdlcmJlclRvR2NvZGVgLCBhYmJyZXZpYXRlKGdlcmJlckZpbGUpLCB7IGdjb2RlRmlsZSwgb3B0cyB9KTsKCiAgICBsZXQgd2FpdDsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGNtZCA9IGBwY2IyZ2NvZGUgJHtwYXJhbXMuam9pbignICcpfSAyPiYxYDsKICAgICAgY29uc29sZS53YXJuKGBleGVjdXRpbmcgJyR7Y21kfSdgKTsKICAgICAgY29uc3QgY2hpbGQgPSBleGVjKGNtZCwge30pOwogICAgICAvLyBkbyB3aGF0ZXZlciB5b3Ugd2FudCB3aXRoIGBjaGlsZGAgaGVyZSAtIGl0J3MgYSBDaGlsZFByb2Nlc3MgaW5zdGFuY2UganVzdAogICAgICAvLyB3aXRoIHByb21pc2UtZnJpZW5kbHkgYC50aGVuKClgICYgYC5jYXRjaCgpYCBmdW5jdGlvbnMgYWRkZWQgdG8gaXQhCiAgICAgIGxldCBvdXRwdXQgPSAnJzsKICAgICAgY2hpbGQuc3Rkb3V0Lm9uKCdkYXRhJywgZGF0YSA9PiAob3V0cHV0ICs9IGRhdGEpKTsKICAgICAgY2hpbGQuc3RkZXJyLm9uKCdkYXRhJywgZGF0YSA9PiAob3V0cHV0ICs9IGRhdGEpKTsKICAgICAgd2FpdCA9IGF3YWl0IGNoaWxkLmNhdGNoKGVycm9yID0+ICh7IGNvZGU6IC0xLCBlcnJvciB9KSk7CgogICAgICBjb25zdCB7IHN0ZG91dCwgc3RkZXJyLCBjb2RlLCBzaWduYWwgfSA9IHdhaXQ7CiAgICAgIGlmKG91dHB1dCkgb3V0cHV0ID0gYWJicmV2aWF0ZShvdXRwdXQucmVwbGFjZSgvXHMqXHIqXG4vZywgJ1xuJyksIDIwMCk7CiAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSAvZ2NvZGUnLCB7IHN0ZG91dCwgb3V0cHV0LCBzaWRlcyB9KTsKCiAgICAgIC8vICAgaWYoY29kZSAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKG91dHB1dCk7CgogICAgICBjb25zdCBnY29kZUZpbGUgPSBtYWtlUGF0aCgnbmdjJywgc2lkZXNbMF0pOwogICAgICBjb25zdCBzdmdGaWxlID0gbWFrZVBhdGgoJ3N2ZycsIHNpZGVzWzBdLCAncHJvY2Vzc2VkJyk7CgogICAgICBmb3IobGV0IFtmaWxlLCB0b10gb2Ygc2lkZXMubWFwKHNpZGUgPT4gW21ha2VQYXRoKCdzdmcnLCBzaWRlLCAncHJvY2Vzc2VkJyksIG1ha2VQYXRoKCdzdmcnLCBzaWRlKV0pKSBpZihmcy5leGlzdHNTeW5jKGZpbGUpKSBmcy5yZW5hbWVTeW5jKGZpbGUsIHRvKTsKCiAgICAgIGxldCBmaWxlcyA9IHNpZGVzLm1hcChzaWRlID0+IFtzaWRlLCBtYWtlUGF0aCgnbmdjJywgc2lkZSldKS5maWx0ZXIoKFtzaWRlLCBmaWxlXSkgPT4gZnMuZXhpc3RzU3luYyhmaWxlKSk7CiAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSAvZ2NvZGUnLCB7IGZpbGVzIH0pOwoKICAgICAgbGV0IHJlc3VsdCA9IHsgY29kZSwgb3V0cHV0LCBjbWQgfTsKICAgICAgaWYoZmV0Y2gpIHsKICAgICAgICBmb3IobGV0IFtzaWRlLCBmaWxlXSBvZiBmaWxlcykgcmVzdWx0W3NpZGVdID0gYXdhaXQgKGF3YWl0IGZzUHJvbWlzZXMucmVhZEZpbGUoR2V0VkZTUGF0aChmaWxlKSkpLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgICAgaWYoLyovZ2V0L2kudGVzdChyZXEubWV0aG9kKSB8fCAqLyByYXcpIHsKICAgICAgICBjb25zdCB7IGZpbGUgfSA9IHJlc3VsdDsKICAgICAgICByZXR1cm4gU2VuZFJhdyhyZXMsIGZpbGUsIHJlc3VsdC5kYXRhKTsKICAgICAgfQogICAgICByZXN1bHQuZmlsZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoZmlsZXMpOwogICAgICBjb25zb2xlLmxvZygKICAgICAgICAnUmVzcG9uc2UgL2djb2RlJywKICAgICAgICBmaWx0ZXJLZXlzKHJlc3VsdCwgayA9PiAhLyhYb3V0cHV0fGRhdGEpLy50ZXN0KGspKQogICAgICApOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSBjYXRjaChlcnJvcikgewogICAgICBjb25zb2xlLmxvZygnZ2VyYmVyVG9HY29kZSBFUlJPUjonLCBlcnJvci5tZXNzYWdlICsgJ1xuJyArIGVycm9yLnN0YWNrKTsKICAgIH0KICB9OwoKICBsZXQgZ2NvZGVFbmRwb2ludCA9IGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyBib2R5IH0gPSByZXE7CiAgICBsZXQgeyBmaWxlLCAuLi5vcHRzIH0gPSBib2R5OwogICAgbGV0IHJlc3VsdDsKCiAgICB0cnkgewogICAgICByZXN1bHQgPSBhd2FpdCBnZXJiZXJUb0djb2RlKGZpbGUsIG9wdHMpLmNhdGNoKGVycm9yID0+ICh7IGVycm9yIH0pKTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgcmVzdWx0ID0geyBlcnJvciB9OwogICAgfSBmaW5hbGx5IHsKICAgICAgcmVzLmpzb24ocmVzdWx0KTsKICAgIH0KICB9OwogIGFwcC5wb3N0KC9eXC9nY29kZS8sIGdjb2RlRW5kcG9pbnQpOwogIGFwcC5nZXQoL15cL2djb2RlLywgZ2NvZGVFbmRwb2ludCk7CgogIGNvbnN0IEdpdGh1Ykxpc3RDb250ZW50cyA9IGFzeW5jIChvd25lciwgcmVwbywgZGlyLCBmaWx0ZXIpID0+IHsKICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7b3duZXJ9LyR7cmVwb30vY29udGVudHMvJHtkaXJ9YDsKICAgIGNvbnNvbGUubG9nKGBHSVRIVUIgbGlzdGAsIHsgdXJsLCBvd25lciwgcmVwbywgZGlyLCBmaWx0ZXIgfSk7CiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpOwogICAgbGV0IHJlc3VsdCA9IEpTT04ucGFyc2UoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTsKICAgIGNvbnNvbGUubG9nKCdyZXN1bHQnLCByZXN1bHQpOwogICAgaWYoZmlsdGVyKSB7CiAgICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChmaWx0ZXIsICdnJyk7CiAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHsgbmFtZSB9KSA9PiByZS50ZXN0KG5hbWUpKTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgYXBwLnVzZShhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsKICAgIGlmKCEvb3ZlcnJpZGVzXC8vLnRlc3QocmVxLnBhdGgpKSB7CiAgICAgIGxldCByZWxhdGl2ZVBhdGggPSBwYXRoLmpvaW4oJy4nLCByZXEucGF0aCk7CiAgICAgIGxldCBvdmVycmlkZVBhdGggPSBwYXRoLmpvaW4oJ292ZXJyaWRlcycsIHJlcS5wYXRoKTsKICAgICAgbGV0IGlzRmlsZSA9IGZhbHNlOwoKICAgICAgYXdhaXQgZnNQcm9taXNlcwogICAgICAgIC5zdGF0KEdldFZGU1BhdGgocmVsYXRpdmVQYXRoKSkKICAgICAgICAudGhlbihzdCA9PiAoaXNGaWxlID0gc3QuaXNGaWxlKCkpKQogICAgICAgIC5jYXRjaChlcnIgPT4ge30pOwoKICAgICAgbGV0IG92ZXJyaWRlID0gZmFsc2U7CgogICAgICBpZihpc0ZpbGUpCiAgICAgICAgYXdhaXQgZnNQcm9taXNlcwogICAgICAgICAgLmFjY2VzcyhHZXRWRlNQYXRoKG92ZXJyaWRlUGF0aCksIGZzLmNvbnN0YW50cy5GX09LKQogICAgICAgICAgLnRoZW4oKCkgPT4gKG92ZXJyaWRlID0gdHJ1ZSkpCiAgICAgICAgICAuY2F0Y2goZXJyID0+IHt9KTsKCiAgICAgIGlmKG92ZXJyaWRlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1N0YXRpYyByZXF1ZXN0OicsIHsgb3ZlcnJpZGVQYXRoLCBvdmVycmlkZSwgcmVzIH0pOwoKICAgICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KCcvJyArIG92ZXJyaWRlUGF0aCk7CiAgICAgIH0KICAgIH0KICAgIGlmKC9saWJcL3ByZWFjdC5qcy8udGVzdChyZXEudXJsKSkgcmVxLnVybCA9ICcvbGliL3ByZWFjdC5tanMnOwoKICAgIGlmKCEvbGliXC8vLnRlc3QocmVxLnVybCkpIHsKICAgICAgY29uc3QgeyBwYXRoLCB1cmwsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGJvZHkgfSA9IHJlcTsKICAgICAgZmFsc2UgJiYKICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICdTdGF0aWMgcmVxdWVzdDonLAogICAgICAgICAgeyBwYXRoLCB1cmwsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGJvZHkgfSAvKiBPYmplY3Qua2V5cyhyZXEpLCAqLywKCiAgICAgICAgICBmaWx0ZXJLZXlzKHJlcS5oZWFkZXJzLCBrID0+ICEvKF5zZWN8XmFjY2VwdHxeY2FjaGV8XmRudHwtbGVuZ3RofF5ob3N0JHxeaWYtfF5jb25uZWN0fF51c2VyLWFnZW50fC10eXBlJHxeb3JpZ2luJHxecmVmZXJlciQpLy50ZXN0KGspKQogICAgICAgICk7CiAgICB9CgogICAgbmV4dCgpOwogIH0pOwoKICAvKiAgYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHsKICAgIGxldCBmaWxlID0gcmVxLnVybC5yZXBsYWNlKC9eXC8/LywgJycpOwoKICAgIGlmKC8oZGF0YXx0bXApLy50ZXN0KHJlcS51cmwpKSB7CiAgICAgIGNvbnNvbGUubG9nKGBEYXRhIGZpbGUgJyR7ZmlsZX0nYCk7CiAgICAgIGZpbGUgPSBmaWxlLnJlcGxhY2UoL15cLz8oZGF0YVwvfHRtcFwvfCkvLCAnJyk7CiAgICAgIGxldCBkaXIgPSBkaXJzW2ZpbGVdOwogICAgICBpZihkaXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBmaWxlICcgKyBmaWxlICsgJyB3YXMgcmVxdWVzdGVkLicpOwogICAgICB9CiAgICB9CiAgICBuZXh0KCk7CiAgfSk7Ki8KCiAgLyogYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHsKICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0JywgcmVxLnVybCk7CiAgICBuZXh0KCk7CiAgfSk7Ki8KCiAgbGV0IGxvZ2ZpbGU7CgogIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgICBsZXQgZmlsZSA9IHJlcS51cmwucmVwbGFjZSgvXlwvPy8sICcnKTsKCiAgICBsb2dmaWxlID8/PSBmcy5vcGVuU3luYygnc2VydmVyLmxvZycsICdhKycsIDBvNjQ0KTsKICAgIGxldCBzdHI7CiAgICBsZXQgbm93ID0gbmV3IERhdGUoKTsKICAgIHN0ciA9IGAke25vdy50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKS5yZXBsYWNlKC8tL2csICcnKX0gJHtub3cudG9UaW1lU3RyaW5nKCkuc2xpY2UoMCwgOCl9ICR7cmVxLm1ldGhvZC5wYWRFbmQoNCl9ICR7ZmlsZX1cbmA7CgogICAgbGV0IHdyaXR0ZW4gPSBmcy53cml0ZVN5bmMobG9nZmlsZSwgc3RyLCAwLCBzdHIubGVuZ3RoKTsKCiAgICAvLyBjb25zb2xlLmxvZygnUmVxdWVzdDogLycgKyBmaWxlKTsKCiAgICBpZihmcy5leGlzdHNTeW5jKGZpbGUpKSB7CiAgICAgIGNvbnN0IHJlID0gL1teXG5dKid1dGlsJ1teXG5dKi9nOwogICAgICAvKmxldCBtLAogICAgICAgIGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZSwgJ3V0Zi04Jyk7CiAgICAgIGlmKChtID0gcmUuZXhlYyhkYXRhKSkpIHsKICAgICAgICBjb25zb2xlLmxvZygnVGhlIGZpbGUgJyArIGZpbGUgKyBgIHdhcyByZXF1ZXN0ZWQuICgke2RhdGEubGVuZ3RofSlgLCBgbWF0Y2ggQCAke20uaW5kZXh9OiAke21bMF19YCk7CiAgICAgIH0qLwoKICAgICAgZmlsZXMuYWRkKGZpbGUpOwogICAgfQogICAgbmV4dCgpOwogIH0pOwogIGFwcC51c2UoJy9zdGF0aWMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4ocCwgJ3N0YXRpYycpKSk7CiAgYXBwLnVzZSgnL21vZHVsZXMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4ocCwgJ25vZGVfbW9kdWxlcycpKSk7CiAgYXBwLnVzZSgnL2h0bScsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihwLCAnaHRtJykpKTsKICBhcHAudXNlKCcvbm9kZV9tb2R1bGVzJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHAsICdub2RlX21vZHVsZXMnKSkpOwogIGFwcC51c2UoJy9vdmVycmlkZXMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4ocCwgJ292ZXJyaWRlcycpKSk7CiAgYXBwLnVzZSgnL2NvbXBvbmVudHMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4ocCwgJ2NvbXBvbmVudHMnKSkpOwogIGFwcC51c2UoJy9saWInLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4ocCwgJ2xpYicpKSk7CiAgYXBwLnVzZSgnL3RtcCcsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihwLCAndG1wJykpKTsKCiAgYXBwLnVzZSgnLycsIGV4cHJlc3Muc3RhdGljKHApKTsKCiAgZnVuY3Rpb24gRmluZEZpbGUocmVsYXRpdmUpIHsKICAgIGZvcihsZXQgbW50IG9mIG1vdW50RGlycykgewogICAgICBsZXQgZmlsZSA9IHBhdGguam9pbihtbnQsIHJlbGF0aXZlKTsKICAgICAgY29uc3QgZXhpc3RzID0gZnMuZXhpc3RzU3luYyhmaWxlKTsKICAgICAgLy9jb25zb2xlLmxvZygnRklMRScsIGZpbGUsZXhpc3RzKTsKCiAgICAgIGlmKGV4aXN0cykgcmV0dXJuIG1udDsKICAgIH0KICB9CgogIGFwcC5nZXQoL15cLz8oZGF0YXx0bXB8dmZzKVwvLywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCBmaWxlID0gcmVxLnVybC5yZXBsYWNlKC9eXC8/KGRhdGF8dG1wfHZmcylcLy8sICcnKTsKICAgIGNvbnN0IGRpciA9IGRpcnNbZmlsZV0gPz8gRmluZEZpbGUoZmlsZSk7CiAgICBjb25zdCBwID0gcGF0aC5yZXNvbHZlKGRpciwgZmlsZSk7CiAgICBjb25zb2xlLmxvZygnREFUQScsIGZpbGUsIGRpciwgcCk7CiAgICBsZXQgZGF0YSA9IGF3YWl0IGZzUHJvbWlzZXMucmVhZEZpbGUocCwgJ3V0Zi04Jyk7CiAgICByZXR1cm4gcmVzLnR5cGUoJ2FwcGxpY2F0aW9uL2pzb24nKS5zdGF0dXMoMjAwKS5zZW5kKGRhdGEpOwoKICAgIC8vICAgcmV0dXJuIHJlcy5zZW5kRmlsZShwKTsKICB9KTsKCiAgYXBwLmdldCgnL2Zhdmljb24uaWNvJywgKHJlcSwgcmVzKSA9PgogICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihwLCAnbGliL2VhZ2xlL2ljb24vZWFnbGVpY29uLmljbycpLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2ltYWdlL3gtaWNvbicKICAgICAgfQogICAgfSkKICApOwogIGFwcC5nZXQoL1wvW15cL10qXC5qcyQvLCBhc3luYyAocmVxLCByZXMpID0+IHJlcy5zZW5kRmlsZShwYXRoLmpvaW4ocCwgcmVxLnBhdGgpKSk7CgogIC8vYXBwLmdldCgnL2NvbXBvbmVudHMuanMnLCBhc3luYyAocmVxLCByZXMpID0+IHJlcy5zZW5kRmlsZShwYXRoLmpvaW4ocCwgJ2NvbXBvbmVudHMuanMnKSkpOwoKICBhcHAuZ2V0KC9cL1teXC9dKlwuY3NzJC8sIGFzeW5jIChyZXEsIHJlcykgPT4KICAgIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4ocCwgJ3N0eWxlLmNzcycpLCB7CiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2NzcycsIGNhY2hlQ29udHJvbDogZmFsc2UgfQogICAgfSkKICApOwoKICBmdW5jdGlvbiBHZXRWRlNQYXRoKGZpbGUpIHsKICAgIGxldCBkaXIgPSBkaXJzW2ZpbGVdOwogICAgbGV0IHJldCA9IGZpbGU7CiAgICBpZihkaXIpIHJldCA9IHBhdGguam9pbihkaXIsIGZpbGUpOwoKICAgIC8vIGlmKHJldCAhPSBmaWxlKSBjb25zb2xlLmxvZygnR2V0VkZTUGF0aCcsIGRpciwgZmlsZSk7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgYXN5bmMgZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24oZmlsZSkgewogICAgLy8gY29uc29sZS5sb2coJ2dldERlc2NyaXB0aW9uKCknLCB7IGZpbGV9KTsKICAgIGxldCBzdHIgPSBhd2FpdCBmc1Byb21pc2VzLnJlYWRGaWxlKEdldFZGU1BhdGgoZmlsZSkpLnRoZW4ociA9PiByLnRvU3RyaW5nKCkpOwogICAgbGV0IHIgPSBbLi4ubWF0Y2hBbGwoJzwoLyk/KGJvYXJkfHNjaGVtYXRpY3xsaWJyYXJ5KVsgPl0nLCBzdHIpXQogICAgICAubWFwKG0gPT4gbS5pbmRleCkKICAgICAgLnNvcnQoKGEsIGIpID0+IGEgLSBiKQogICAgICAuc2xpY2UoMCwgMik7CiAgICBsZXQgY2h1bmsgPSBzdHIuc3Vic3RyaW5nKC4uLnIpOwogICAgbGV0IGEgPSBbJzxkZXNjcmlwdGlvbj4nLCAnPC9kZXNjcmlwdGlvbj4nXTsKICAgIGxldCBpbmRleGVzID0gYQogICAgICAubWFwKHMgPT4gbmV3IFJlZ0V4cChzKSkKICAgICAgLm1hcChyZSA9PiByZS5leGVjKGNodW5rKSkKICAgICAgLm1hcChtID0+IG0gJiYgbS5pbmRleCk7CiAgICBsZXQgZCA9IGNodW5rLnN1YnN0cmluZyguLi5pbmRleGVzKTsKICAgIGlmKGQuc3RhcnRzV2l0aCgnPGRlc2NyaXB0aW9uJykpIHJldHVybiBVdGlsLmRlY29kZUhUTUxFbnRpdGllcyhkLnN1YnN0cmluZyhhWzBdLmxlbmd0aCkpOwogICAgcmV0dXJuICcnOwogIH0KCiAgY29uc3QgZGVzY01hcCA9IHdlYWtNYXBwZXIoZ2V0RGVzY3JpcHRpb24sIG5ldyBNYXAoKSk7CgogIGFzeW5jIGZ1bmN0aW9uIEdldEZpbGVzTGlzdChkaXIgPSAnLi90bXAnLCBvcHRzID0ge30pIHsKICAgIGxldCB7IGZpbHRlciA9ICcuKlxcLihicmR8c2NofGxicnxHQkx8R1RMfEdLT3xuZ2MpJCcsIGRlc2NyaXB0aW9ucyA9IGZhbHNlLCBuYW1lcyB9ID0gb3B0czsKICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChmaWx0ZXIsICdpJyk7CiAgICBjb25zdCBmID0gZW50ID0+IHJlLnRlc3QoZW50KTsKCiAgICBjb25zb2xlLmxvZygnR2V0RmlsZXNMaXN0KCknLCB7IGZpbHRlciwgZGVzY3JpcHRpb25zIH0sIC4uLihuYW1lcyA/IFtuYW1lcy5sZW5ndGhdIDogW10pKTsKCiAgICBsZXQgZGlybWFwID0ge307CgogICAgLy8gICAgaWYoIW5hbWVzKSBuYW1lcyA9IFsuLi4oYXdhaXQgZnNQcm9taXNlcy5yZWFkZGlyKGRpcikpXS5maWx0ZXIoZik7CiAgICBkaXJtYXAgPSBtb3VudERpcnMucmVkdWNlKChhY2MsIGRpcikgPT4gewogICAgICBjb25zb2xlLmxvZygnUmVhZERpclJlY3Vyc2l2ZScsIGRpcik7CiAgICAgIGZvcihsZXQgZW50cnkgb2YgUmVhZERpclJlY3Vyc2l2ZShkaXIpKSB7CiAgICAgICAgaWYoZW50cnkuZW5kc1dpdGgoJy8nKSkgY29udGludWU7CiAgICAgICAgaWYoIWYoZW50cnkpKSBjb250aW51ZTsKICAgICAgICBsZXQgcmVsYXRpdmUgPSBlbnRyeS5zdGFydHNXaXRoKGRpciArICcvJykgPyBlbnRyeS5zbGljZShkaXIubGVuZ3RoICsgMSkgOiBlbnRyeTsKICAgICAgICBhY2NbcmVsYXRpdmVdID0gZGlyOwogICAgICAgIGRpcnNbcmVsYXRpdmVdID0gZGlyOwogICAgICB9CiAgICAgIHJldHVybiBhY2M7CiAgICB9LCB7fSk7CgogICAgLy8gICBjb25zb2xlLmxvZygnZGlybWFwJywgZGlybWFwKTsKICAgIGlmKCFuYW1lcykgbmFtZXMgPSBPYmplY3Qua2V5cyhkaXJtYXApOwogICAgY29uc29sZS5sb2coJ25hbWVzJywgbmFtZXMubGVuZ3RoKTsKICAgIHJldHVybiBQcm9taXNlLmFsbCgKICAgICAgbmFtZXMKICAgICAgICAvLy5tYXAoZW50cnkgPT4gZGlyc1tlbnRyeV0gKycvJytlbnRyeSkKICAgICAgICAucmVkdWNlKChhY2MsIGZpbGUpID0+IHsKICAgICAgICAgIGxldCBkaXIgPSBkaXJzW2ZpbGVdOwogICAgICAgICAgbGV0IGFicyA9IGRpciArICcvJyArIGZpbGU7CiAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbnMgPyBkZXNjTWFwKGZpbGUpIDogZGVzY01hcC5nZXQoZmlsZSk7CiAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdkZXNjTWFwOicsIHV0aWwuaW5zcGVjdChkZXNjTWFwLCB7IGRlcHRoOiAxIH0pKTsKICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgIG5hbWU6IGZpbGUsCiAgICAgICAgICAgIC8vZmlsZSwKICAgICAgICAgICAgZGlyOiBkaXJzW2ZpbGVdCiAgICAgICAgICB9OwogICAgICAgICAgaWYodHlwZW9mIGRlc2NyaXB0aW9uID09ICdzdHJpbmcnKSBvYmouZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjsKICAgICAgICAgIGFjYy5wdXNoKAogICAgICAgICAgICBmc1Byb21pc2VzCiAgICAgICAgICAgICAgLnN0YXQoYWJzKQogICAgICAgICAgICAgIC50aGVuKCh7IGN0aW1lLCBtdGltZSwgbW9kZSwgc2l6ZSB9KSA9PgogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsKICAgICAgICAgICAgICAgICAgbXRpbWU6IHRvVW5peFRpbWUobXRpbWUpLAogICAgICAgICAgICAgICAgICB0aW1lOiB0b1VuaXhUaW1lKGN0aW1lKSwKICAgICAgICAgICAgICAgICAgbW9kZTogYDAkeyhtb2RlICYgMHgwOWZmKS50b1N0cmluZyg4KX1gLAogICAgICAgICAgICAgICAgICBzaXplCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHt9KQogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiBhY2M7CiAgICAgICAgfSwgW10pCiAgICApLnRoZW4oYSA9PiBhLmZpbHRlcihpID0+IGkgIT0gbnVsbCkpOwogIH0KCiAgZnVuY3Rpb24gRmlsZXNVUkxzKGxpc3QpIHsKICAgIGlmKGxpc3QubGVuZ3RoID09IDApIHJldHVybiBudWxsOwoKICAgIGNvbnN0IGJhc2VfdXJsID0gbGlzdFswXS5yZXBsYWNlKC9cL1teXC9dKiQvLCAnJyk7CiAgICBjb25zdCBmaWxlcyA9IGxpc3QubWFwKHVybCA9PiB1cmwucmVwbGFjZSgvLipcLy9nLCAnJykpOwogICAgcmV0dXJuIHsgYmFzZV91cmwsIGZpbGVzIH07CiAgfQogIC8vYXBwLnVzZSgiL3NlcmlhbHBvcnQiLCByZW1vdGVTZXJpYWxQb3J0Lmh0dHAoeyB2ZXJib3NlOiB0cnVlIH0pKTsKCiAgYXBwLmdldCgvXC9saXN0LXNlcmlhbC8sIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgbGlzdCA9IGF3YWl0IFNlcmlhbFBvcnQubGlzdCgpOwoKICAgIHJlcy5qc29uKGxpc3QuZmlsdGVyKHBvcnQgPT4gWydtYW51ZmFjdHVyZXInLCAncG5wSWQnLCAndmVuZG9ySWQnLCAncHJvZHVjdElkJ10uc29tZShrZXkgPT4gcG9ydFtrZXldKSkpOwogIH0pOwoKICBhcHAud3MoJy9zZXJpYWwnLCBhc3luYyAod3MsIHJlcSkgPT4gewogICAgY29uc3QgeyBwb3J0IH0gPSByZXEuYm9keTsKICAgIGNvbnNvbGUuZGVidWcoJ09iamVjdC5rZXlzKHJlcSknLCBPYmplY3Qua2V5cyhyZXEpKTsKCiAgICBjb25zdCBkdXBsZXggPSBXZWJTb2NrZXQuY3JlYXRlV2ViU29ja2V0U3RyZWFtKHdzLCB7IGVuY29kaW5nOiAndXRmOCcgfSk7CgogICAgbGV0IHNlcmlhbCA9IG5ldyBTZXJpYWxTdHJlYW0ocG9ydCB8fCAnL2Rldi90bnQxJyk7CgogICAgZHVwbGV4Lm9uKCdkYXRhJywgYXN5bmMgZGF0YSA9PiB7CiAgICAgIGRhdGEgPSBkYXRhICsgJycgKyAnXHJcbic7CgogICAgICBjb25zb2xlLmRlYnVnKCd3cyAtPiBzZXJpYWw6JywgZXNjYXBlKGRhdGEpKTsKCiAgICAgIHNlcmlhbC53cml0ZShkYXRhKTsKICAgICAgc2VyaWFsLmZsdXNoKCk7CiAgICB9KTsKCiAgICBzZXJpYWwub24oJ2RhdGEnLCBhc3luYyBkYXRhID0+IHsKICAgICAgZGF0YSA9IChkYXRhICsgJycpLnJlcGxhY2UoL1xyP1xuPyQvLCAnJyk7CgogICAgICBjb25zb2xlLmRlYnVnKCdzZXJpYWwgLT4gd3M6JywgZXNjYXBlKGRhdGEpKTsKICAgICAgZHVwbGV4LndyaXRlKGRhdGEpOwogICAgfSk7CgogICAgY29uc29sZS5kZWJ1Zygnd2Vic29ja2V0OicsIGdldE1ldGhvZHMod3MsIEluZmluaXR5LCAwKSk7CiAgfSk7CgogIGFwcC5wb3N0KC9cL3NlcmlhbC8sIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyBib2R5IH0gPSByZXE7CiAgICBjb25zdCB7IHBvcnQgfSA9IGJvZHk7CiAgfSk7CiAgY29uc3QgY29uZmlnRmlsZSA9ICdjb25maWcuanNvbic7CiAgY29uc3Qgc2FmZVN0YXQgPSB0cnlGdW5jdGlvbigKICAgIGYgPT4gZmlsZXN5c3RlbS5zdGF0KGYpLAogICAgc3QgPT4gc3QsCiAgICAoKSA9PiB7fQogICk7CgogIGFwcC5nZXQoL1wvY29uZmlnLywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICBsZXQgc3RyID0gJycsCiAgICAgIGRhdGEgPSB7fSwKICAgICAgdGltZSA9IDA7CiAgICB0cnlDYXRjaCgKICAgICAgKCkgPT4gZmlsZXN5c3RlbS5yZWFkRmlsZVN5bmMoY29uZmlnRmlsZSksCiAgICAgIGMgPT4gewogICAgICAgIHN0ciA9IGM7CiAgICAgICAgbGV0IHN0YXQgPSBzYWZlU3RhdChjb25maWdGaWxlKTsKICAgICAgICBjb25zb2xlLmxvZygnc3RhdDonLCBzdGF0KTsKICAgICAgICBpZihpc09iamVjdChzdGF0Lm10aW1lKSkgdGltZSA9IHN0YXQubXRpbWUuZ2V0VGltZSgpOwogICAgICB9LAogICAgICAoKSA9PiAoc3RyID0gJ3t9JykKICAgICk7CiAgICBsZXQgY29uZmlnID0gdHJ5Q2F0Y2goCiAgICAgICgpID0+IEpTT04ucGFyc2Uoc3RyKSwKICAgICAgbyA9PiBvLAogICAgICAoKSA9PiAoe30pCiAgICApOwogICAgY29uc29sZS5sb2coJ2NvbmZpZzonLCBjb25maWcpOwoKICAgIHJlcy5qc29uKHsgY29uZmlnLCB0aW1lLCBoYXNoOiBoYXNoU3RyaW5nKHN0cikgfSk7CiAgfSk7CiAgYXBwLnBvc3QoL1wvY29uZmlnLywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCB7IGJvZHkgfSA9IHJlcTsKICAgIGxldCB0ZXh0ID0gYm9keS50b1N0cmluZygpOwogICAgY29uc29sZS5sb2coJ3RleHQ6JywgdGV4dCk7CiAgICBsZXQgcmV0ID0gZmlsZXN5c3RlbS53cml0ZUZpbGUoY29uZmlnRmlsZSwgdGV4dCk7CiAgICBjb25zb2xlLmxvZygncmV0OicsIHJldCk7CiAgICBsZXQgc3RhdCA9IHNhZmVTdGF0KGNvbmZpZ0ZpbGUpOwogICAgcmVzLmpzb24oewogICAgICBzaXplOiByZXQsCiAgICAgIHRpbWU6IHN0YXQubXRpbWUuZ2V0VGltZSgpLAogICAgICBoYXNoOiBoYXNoU3RyaW5nKHRleHQpCiAgICB9KTsKICB9KTsKCiAgYXBwLmdldCgvXC9naXRodWIvLCBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIHRyeUNhdGNoKAogICAgICBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgeyBib2R5IH0gPSByZXE7CiAgICAgICAgY29uc29sZS5sb2coJ3JlcScsIE9iamVjdC5rZXlzKHJlcSkpOwogICAgICAgIGNvbnNvbGUubG9nKCdyZXEudXJsJywgcmVxLnVybCk7CiAgICAgICAgY29uc3QgbG9jYXRpb24gPSByZXEudXJsICsgJyc7IC8vIFV0aWwucGFyc2VVUkwocmVxLnVybCk7CiAgICAgICAgLy8vY29uc3QgeyBsb2NhdGlvbiwgcXVlcnkgfSA9IHVybDsKICAgICAgICBjb25zdCB7IHF1ZXJ5IH0gPSByZXE7CiAgICAgICAgbGV0IGFyZ3MgPSBsb2NhdGlvbi5zcGxpdCgvXC8vZykuZmlsdGVyKHAgPT4gIS8oXmdpdGh1YiR8XiQpLy50ZXN0KHApKTsKICAgICAgICBsZXQgb3B0aW9ucyA9IHsgLyouLi5xdWVyeSwqLyAuLi5ib2R5IH07CgogICAgICAgIGlmKGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgW293bmVyLCByZXBvLCBkaXIsIGZpbHRlcl0gPSBhcmdzOwogICAgICAgICAgd2Vha0Fzc2lnbihvcHRpb25zLCB7IG93bmVyLCByZXBvLCBkaXIsIGZpbHRlciB9KTsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKGBHRVQgJHtsb2NhdGlvbn1gLCB7IGFyZ3MsIHF1ZXJ5LCBvcHRpb25zIH0pOwoKICAgICAgICBsZXQgcmVzdWx0OwogICAgICAgIGNvbnN0IHsgb3duZXIsIHJlcG8sIGRpciwgZmlsdGVyLCB0YWIsIGFmdGVyIH0gPSBvcHRpb25zOwogICAgICAgIGNvbnNvbGUubG9nKCdnaXRodWInLCB7IG93bmVyLCByZXBvLCBkaXIgfSk7CgogICAgICAgIGlmKG93bmVyICYmIHJlcG8gJiYgZGlyKSByZXN1bHQgPSBhd2FpdCBHaXRodWJMaXN0Q29udGVudHMob3duZXIsIHJlcG8sIGRpciwgZmlsdGVyICYmIG5ldyBSZWdFeHAoZmlsdGVyLCAnZycpKTsKICAgICAgICAvKmlmKG93bmVyICYmICh0YWIgfHwgYWZ0ZXIpKSovIGVsc2UgewogICAgICAgICAgbGV0IHByb3h5VXJsID0gVXRpbC5tYWtlVVJMKHsKICAgICAgICAgICAgLi4udXJsLAogICAgICAgICAgICBwcm90b2NvbDogJ2h0dHBzJywKICAgICAgICAgICAgaG9zdDogJ2dpdGh1Yi5jb20nLAogICAgICAgICAgICBsb2NhdGlvbjogWycnLCAuLi5hcmdzXS5qb2luKCcvJykKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2coYFBST1hZICR7cHJveHlVcmx9YCk7CgogICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocHJveHlVcmwpOwogICAgICAgICAgbGV0IHR5cGUgPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXTsKCiAgICAgICAgICBjb25zb2xlLmxvZyhgUkVTUE9OU0VgLCByZXNwb25zZS51cmwsIHR5cGUpOwogICAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7CiAgICAgICAgICByZXMuc2VuZChkYXRhKTsKICAgICAgICAgIC8vLCAyMDAsIHsgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogdHlwZSB9fSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXMuanNvbihGaWxlc1VSTHMocmVzdWx0Lm1hcChmaWxlID0+IGZpbGUuZG93bmxvYWRfdXJsKSkpOwogICAgICB9LAogICAgICAoKSA9PiB7fSwKICAgICAgZXJyb3IgPT4gY29uc29sZS5sb2coJ0V4Y2VwdGlvbjonLCBlcnJvci5tZXNzYWdlICsgJ1xuJyArIGVycm9yLnN0YWNrKQogICAgKTsKICB9KTsKCiAgYXBwLnBvc3QoL1wvZ2l0aHViLiovLCBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxOwogICAgbGV0IHJlc3VsdDsKICAgIGNvbnN0IHsgb3duZXIsIHJlcG8sIGRpciwgZmlsdGVyIH0gPSBib2R5OwogICAgY29uc29sZS5sb2coJ1BPU1QgZ2l0aHViJywgeyBvd25lciwgcmVwbywgZGlyLCBmaWx0ZXIgfSk7CgogICAgcmVzLmpzb24oCiAgICAgIGF3YWl0IEdpdGh1Ykxpc3RDb250ZW50cyhvd25lciwgcmVwbywgZGlyLCBmaWx0ZXIgJiYgbmV3IFJlZ0V4cChmaWx0ZXIsICdnJykpCiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IEZpbGVzVVJMcyhyZXN1bHQubWFwKGZpbGUgPT4gZmlsZS5kb3dubG9hZF91cmwpKSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gKHsgZXJyb3IgfSkpCiAgICApOwogIH0pOwoKICBhcHAuZ2V0KC9eXC8hdXJscy8sIGFzeW5jIChyZXEsIHJlcykgPT4gcmVzLmpzb24oeyBmaWxlczogWy4uLmZpbGVzXS5zb3J0KCkgfSkpOwogIGFwcC5nZXQoL15cL2ZpbGVzLywgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXMuanNvbih7IGZpbGVzOiBhd2FpdCBHZXRGaWxlc0xpc3QoKSB9KSk7CiAgYXBwLnBvc3QoL15cLyhmaWxlc3xsaXN0KSguaHRtbHwpLywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCB7IGJvZHkgfSA9IHJlcTsKICAgIGxldCB7IGZpbHRlciA9ICcuKicsIGRlc2NyaXB0aW9ucywgbmFtZXMgfSA9IGJvZHk7CiAgICBsZXQgb3B0cyA9IHsgZmlsdGVyIH07CiAgICBpZihkZXNjcmlwdGlvbnMpIG9wdHMuZGVzY3JpcHRpb25zID0gZGVzY3JpcHRpb25zOwoKICAgIGlmKG5hbWVzICE9PSB1bmRlZmluZWQpIHsKICAgICAgaWYodHlwZW9mIG5hbWVzID09ICdzdHJpbmcnKSBuYW1lcyA9IG5hbWVzLnNwbGl0KC9cbi9nKTsKICAgICAgaWYoQXJyYXkuaXNBcnJheShuYW1lcykpIG5hbWVzID0gbmFtZXMubWFwKG5hbWUgPT4gbmFtZS5yZXBsYWNlKC8uKlwvL2csICcnKSk7CiAgICAgIG9wdHMubmFtZXMgPSBuYW1lczsKICAgIH0KICAgIGxldCBmaWxlcyA9IGF3YWl0IEdldEZpbGVzTGlzdCgndG1wJywgb3B0cyk7CiAgICBjb25zb2xlLmxvZygnUE9TVCBmaWxlcycsIHV0aWwuaW5zcGVjdChmaWxlcywgeyBicmVha0xlbmd0aDogSW5maW5pdHksIGNvbG9yczogdHJ1ZSwgbWF4QXJyYXlMZW5ndGg6IDEwLCBjb21wYWN0OiAxIH0pKTsKICAgIHJlcy5qc29uKHsKICAgICAgZmlsZXMKICAgIH0pOwogIH0pOwoKICBhcHAuZ2V0KCcvaW5kZXguaHRtbCcsIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgbGV0IGRhdGEgPSBhd2FpdCBmc1Byb21pc2VzLnJlYWRGaWxlKHBhdGguam9pbihwLCAnaW5kZXguaHRtbCcpKTsKICAgIHJlcy5zZW5kKGRhdGEudG9TdHJpbmcoKS5yZXBsYWNlKC88VFM+L2csIHVuaXhUaW1lKCkgKyAnJykpOwogIH0pOwogIGFwcC5nZXQoJy9jb250b3VycycsIFJlcXVlc3RDb250b3Vycyk7CiAgYXBwLnBvc3QoJy9jb250b3VycycsIFJlcXVlc3RDb250b3Vycyk7CgogIGFwcC5wb3N0KCcvc2F2ZScsIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4gewogICAgLy8gICBjb25zdCBmaWxlbmFtZSA9IChyZXEuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddfHwnJykucmVwbGFjZShuZXcgUmVnRXhwKCcuKiIoW14iXSopIi4qJywnZycpLCAnJDEnKSB8fCAnb3V0cHV0LnN2Zyc7CiAgICAvKiAgICBjb25zdCBmaWxlbmFtZSA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAndG1wJywgJ3VwbG9hZC0nICsgdG9Vbml4VGltZShEYXRlLm5vdygpKSArICcudHh0Jyk7CiAgICBsZXQgb3V0cHV0ID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oZmlsZW5hbWUsIHsgYXV0b0Nsb3NlOiB0cnVlLCBlbWl0Q2xvc2U6IHRydWUgfSk7CiAgICBsZXQgcyA9IHJlcS5waXBlKG91dHB1dCk7CiAgICBjb25zb2xlLmxvZygncycsIGNsYXNzTmFtZShzKSk7CiAgICBsZXQgZGF0YTsKICAgIHMub24oJ2Nsb3NlJywgKCkgPT4gd2FpdEZvcigxMDAwKS50aGVuKCgpID0+IGVuZCgpKSk7CgogICAgLy8gIHJlcS5vbignZW5kJywgKCkgPT4gd2FpdEZvcig1MDApLnRoZW4oKCkgPT4gZW5kKCkpKTsKCiAgICBmdW5jdGlvbiBlbmQoKSB7CiAgICAgIGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUpLnRvU3RyaW5nKCk7CiAgICAgIGNvbnNvbGUubG9nKCdyZXEgZW5kJywgeyBkYXRhIH0pOwogICAgICByZXMuZW5kKGRhdGEgKyAnXG5cblVwbG9hZCBjb21wbGV0ZScpOwogICAgICBuZXh0KCk7CiAgICB9CiovCgogICAgY29uc3QgeyBib2R5IH0gPSByZXE7CiAgICBjb25zb2xlLmxvZygncmVxLmhlYWRlcnM6JywgcmVxLmhlYWRlcnMpOwogICAgY29uc29sZS5sb2coJ2JvZHk6JywgYWJicmV2aWF0ZShib2R5KSwgY2xhc3NOYW1lKGJvZHkpLCBpbnNwZWN0KGJvZHkpKTsKICAgIGNvbnNvbGUubG9nKCdzYXZlIGJvZHk6JywgdHlwZW9mIGJvZHkgPT0gJ3N0cmluZycgPyBhYmJyZXZpYXRlKGJvZHksIDEwMCkgOiBib2R5KTsKICAgIGxldCBzdCwKICAgICAgZXJyLAogICAgICBmaWxlbmFtZSA9IChyZXEuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddIHx8ICcnKS5yZXBsYWNlKG5ldyBSZWdFeHAoJy4qIihbXiJdKikiLionLCAnZycpLCAnJDEnKSB8fCAnb3V0cHV0LnN2Zyc7CiAgICBmaWxlbmFtZSA9ICd0bXAvJyArIGZpbGVuYW1lLnJlcGxhY2UoL150bXBcLy8sICcnKTsKICAgIGF3YWl0IGZzUHJvbWlzZXMKICAgICAgLndyaXRlRmlsZShmaWxlbmFtZSwgYm9keSwgeyBtb2RlOiAweDAxODAsIGZsYWc6ICd3JyB9KQogICAgICAudGhlbigoKSA9PiAoc3QgPSBmcy5zdGF0U3luYyhmaWxlbmFtZSkpKQogICAgICAuY2F0Y2goZXJyb3IgPT4gKGVyciA9IGVycm9yKSk7CgogICAgaWYoZXJyKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzYXZlIGVycm9yOicsIGVycik7CiAgICAgIHJlcy5qc29uKGVycik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygnc2F2ZWQ6JywgZmlsZW5hbWUsIGAke3N0LnNpemV9IGJ5dGVzYCk7CiAgICAgIHJlcy5qc29uKHsgc2l6ZTogc3Quc2l6ZSwgZmlsZW5hbWUgfSk7CiAgICB9CiAgfSk7CgogIGFwcC53cygnL3dzJywgU29ja2V0LmVuZHBvaW50KTsKICBhcHAud3MoJy8ud2Vic29ja2V0JywgU29ja2V0LmVuZHBvaW50KTsKICBhcHAud3MoJy93cy8ud2Vic29ja2V0JywgU29ja2V0LmVuZHBvaW50KTsKCiAgYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4gewogICAgcmVzLnJlZGlyZWN0KDMwMiwgJy9pbmRleC5odG1sJyk7CiAgfSk7CgogIGFwcC5saXN0ZW4ocG9ydCwgKCkgPT4gewogICAgY29uc29sZS5sb2coYFJlYWR5IGF0IGh0dHA6Ly8xMjcuMC4wLjE6JHtwb3J0fWApOwogIH0pOwp9Ci8qCnRyeSB7CiAgYXdhaXQgbWFpbigpOwp9IGNhdGNoKGVycikgewogIFV0aWwucHV0RXJyb3IoZXJyKTsKfSovCm1haW4oLi4ucHJvY2Vzcy5hcmd2LnNsaWNlKDEpKTsKAAAAAAAAAACDawAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwwEAAAAAAACbAgAAAAAAAAAAAAAAAPC/"
				],
				[
					1163,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAJc6AAAAAAAAmDoAAAAAAAAAAAAAmDoAAAAAAACYOgAAAAAAAAMAAAAgLy8",
					"AQAAAAAAAAABAAAAmjoAAAAAAACXOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1200,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"BQAAANk6AAAAAAAA2joAAAAAAAAAAAAA2joAAAAAAADeOgAAAAAAAAAAAADeOgAAAAAAAOA6AAAAAAAAAAAAAOA6AAAAAAAA4ToAAAAAAAAAAAAA4ToAAAAAAADiOgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2ToAAAAAAADZOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1201,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOI6AAAAAAAA5DoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4joAAAAAAADiOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1202,
					1,
					"insert",
					{
						"characters": "/&"
					},
					"AgAAAOM6AAAAAAAA5DoAAAAAAAAAAAAA5DoAAAAAAADlOgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4zoAAAAAAADjOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1203,
					1,
					"left_delete",
					null,
					"AQAAAOQ6AAAAAAAA5DoAAAAAAAABAAAAJg",
					"AQAAAAAAAAABAAAA5ToAAAAAAADlOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1204,
					1,
					"insert",
					{
						"characters": "\\.js$/.test"
					},
					"CwAAAOQ6AAAAAAAA5ToAAAAAAAAAAAAA5ToAAAAAAADmOgAAAAAAAAAAAADmOgAAAAAAAOc6AAAAAAAAAAAAAOc6AAAAAAAA6DoAAAAAAAAAAAAA6DoAAAAAAADpOgAAAAAAAAAAAADpOgAAAAAAAOo6AAAAAAAAAAAAAOo6AAAAAAAA6zoAAAAAAAAAAAAA6zoAAAAAAADsOgAAAAAAAAAAAADsOgAAAAAAAO06AAAAAAAAAAAAAO06AAAAAAAA7joAAAAAAAAAAAAA7joAAAAAAADvOgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5DoAAAAAAADkOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1205,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAO86AAAAAAAA8ToAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7zoAAAAAAADvOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1206,
					1,
					"insert",
					{
						"characters": "file"
					},
					"BAAAAPA6AAAAAAAA8ToAAAAAAAAAAAAA8ToAAAAAAADyOgAAAAAAAAAAAADyOgAAAAAAAPM6AAAAAAAAAAAAAPM6AAAAAAAA9DoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8DoAAAAAAADwOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1208,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPY6AAAAAAAA9zoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9joAAAAAAAD2OgAAAAAAAAAAAAAAAPC/"
				],
				[
					1209,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAPc6AAAAAAAA+ToAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9zoAAAAAAAD3OgAAAAAAAAAAAAAAAPC/"
				],
				[
					1210,
					1,
					"right_delete",
					null,
					"AQAAAPg6AAAAAAAA+DoAAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAA+DoAAAAAAAD4OgAAAAAAAAAAAAAAAPC/"
				],
				[
					1211,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BgAAAPg6AAAAAAAA+ToAAAAAAAAAAAAA+ToAAAAAAAD/OgAAAAAAAAAAAAD/OgAAAAAAAAE7AAAAAAAAAAAAAAE7AAAAAAAAAjsAAAAAAAAAAAAA+ToAAAAAAAD5OgAAAAAAAAgAAAAgICAgICAgIPk6AAAAAAAA/zoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+DoAAAAAAAD4OgAAAAAAAAAAAAAAAPC/"
				],
				[
					1216,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AwAAAPg6AAAAAAAA+ToAAAAAAAAAAAAA+ToAAAAAAAD/OgAAAAAAAAAAAAD/OgAAAAAAAAE7AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+DoAAAAAAAD4OgAAAAAAAP///////+9/"
				],
				[
					1223,
					1,
					"insert",
					{
						"characters": "let"
					},
					"AwAAAAE7AAAAAAAAAjsAAAAAAAAAAAAAAjsAAAAAAAADOwAAAAAAAAAAAAADOwAAAAAAAAQ7AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAATsAAAAAAAABOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1224,
					1,
					"insert",
					{
						"characters": " s"
					},
					"AgAAAAQ7AAAAAAAABTsAAAAAAAAAAAAABTsAAAAAAAAGOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABDsAAAAAAAAEOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1225,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAAY7AAAAAAAABzsAAAAAAAAAAAAABzsAAAAAAAAIOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABjsAAAAAAAAGOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1226,
					1,
					"insert",
					{
						"characters": " ReadFile"
					},
					"CQAAAAg7AAAAAAAACTsAAAAAAAAAAAAACTsAAAAAAAAKOwAAAAAAAAAAAAAKOwAAAAAAAAs7AAAAAAAAAAAAAAs7AAAAAAAADDsAAAAAAAAAAAAADDsAAAAAAAANOwAAAAAAAAAAAAANOwAAAAAAAA47AAAAAAAAAAAAAA47AAAAAAAADzsAAAAAAAAAAAAADzsAAAAAAAAQOwAAAAAAAAAAAAAQOwAAAAAAABE7AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACDsAAAAAAAAIOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1227,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAABE7AAAAAAAAEzsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAETsAAAAAAAAROwAAAAAAAAAAAAAAAPC/"
				],
				[
					1228,
					1,
					"insert",
					{
						"characters": "file"
					},
					"BAAAABI7AAAAAAAAEzsAAAAAAAAAAAAAEzsAAAAAAAAUOwAAAAAAAAAAAAAUOwAAAAAAABU7AAAAAAAAAAAAABU7AAAAAAAAFjsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEjsAAAAAAAASOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1230,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAABc7AAAAAAAAGDsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFzsAAAAAAAAXOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1233,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAABg7AAAAAAAAGTsAAAAAAAAAAAAAGTsAAAAAAAAhOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGDsAAAAAAAAYOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1236,
					1,
					"insert",
					{
						"characters": "importReplacer.replace"
					},
					"FgAAACE7AAAAAAAAIjsAAAAAAAAAAAAAIjsAAAAAAAAjOwAAAAAAAAAAAAAjOwAAAAAAACQ7AAAAAAAAAAAAACQ7AAAAAAAAJTsAAAAAAAAAAAAAJTsAAAAAAAAmOwAAAAAAAAAAAAAmOwAAAAAAACc7AAAAAAAAAAAAACc7AAAAAAAAKDsAAAAAAAAAAAAAKDsAAAAAAAApOwAAAAAAAAAAAAApOwAAAAAAACo7AAAAAAAAAAAAACo7AAAAAAAAKzsAAAAAAAAAAAAAKzsAAAAAAAAsOwAAAAAAAAAAAAAsOwAAAAAAAC07AAAAAAAAAAAAAC07AAAAAAAALjsAAAAAAAAAAAAALjsAAAAAAAAvOwAAAAAAAAAAAAAvOwAAAAAAADA7AAAAAAAAAAAAADA7AAAAAAAAMTsAAAAAAAAAAAAAMTsAAAAAAAAyOwAAAAAAAAAAAAAyOwAAAAAAADM7AAAAAAAAAAAAADM7AAAAAAAANDsAAAAAAAAAAAAANDsAAAAAAAA1OwAAAAAAAAAAAAA1OwAAAAAAADY7AAAAAAAAAAAAADY7AAAAAAAANzsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAITsAAAAAAAAhOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1237,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAADc7AAAAAAAAOTsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANzsAAAAAAAA3OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1238,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAADg7AAAAAAAAOTsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAODsAAAAAAAA4OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1240,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAADo7AAAAAAAAOzsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOjsAAAAAAAA6OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1241,
					1,
					"left_delete",
					null,
					"AQAAADo7AAAAAAAAOjsAAAAAAAABAAAAPQ",
					"AQAAAAAAAAABAAAAOzsAAAAAAAA7OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1242,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAADo7AAAAAAAAOzsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOjsAAAAAAAA6OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1303,
					1,
					"insert",
					{
						"characters": "res.send("
					},
					"CQAAACE7AAAAAAAAIjsAAAAAAAAAAAAAIjsAAAAAAAAjOwAAAAAAAAAAAAAjOwAAAAAAACQ7AAAAAAAAAAAAACQ7AAAAAAAAJTsAAAAAAAAAAAAAJTsAAAAAAAAmOwAAAAAAAAAAAAAmOwAAAAAAACc7AAAAAAAAAAAAACc7AAAAAAAAKDsAAAAAAAAAAAAAKDsAAAAAAAApOwAAAAAAAAAAAAApOwAAAAAAACo7AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAITsAAAAAAAAhOwAAAAAAAAAAAAAAAFBA"
				],
				[
					1305,
					1,
					"left_delete",
					null,
					"AQAAAEM7AAAAAAAAQzsAAAAAAAABAAAAOw",
					"AQAAAAAAAAABAAAARDsAAAAAAABEOwAAAAAAAP///////+9/"
				],
				[
					1306,
					1,
					"insert",
					{
						"characters": "=:"
					},
					"AgAAAEM7AAAAAAAARDsAAAAAAAAAAAAARDsAAAAAAABFOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQzsAAAAAAABDOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1307,
					2,
					"left_delete",
					null,
					"AgAAAEQ7AAAAAAAARDsAAAAAAAABAAAAOkM7AAAAAAAAQzsAAAAAAAABAAAAPQ",
					"AQAAAAAAAAABAAAARTsAAAAAAABFOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1308,
					1,
					"insert",
					{
						"characters": ");"
					},
					"AgAAAEM7AAAAAAAARDsAAAAAAAAAAAAARDsAAAAAAABFOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQzsAAAAAAABDOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1309,
					1,
					"insert",
					{
						"characters": "\nreturn;"
					},
					"CQAAAEU7AAAAAAAARjsAAAAAAAAAAAAARjsAAAAAAABOOwAAAAAAAAAAAABOOwAAAAAAAE87AAAAAAAAAAAAAE87AAAAAAAAUDsAAAAAAAAAAAAAUDsAAAAAAABROwAAAAAAAAAAAABROwAAAAAAAFI7AAAAAAAAAAAAAFI7AAAAAAAAUzsAAAAAAAAAAAAAUzsAAAAAAABUOwAAAAAAAAAAAABUOwAAAAAAAFU7AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARTsAAAAAAABFOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1320,
					1,
					"cut",
					null,
					"AQAAAJQ6AAAAAAAAlDoAAAAAAAAnAAAAICAgICBjb25zb2xlLmxvZygnUmVxdWVzdDogLycgKyBmaWxlKTsK",
					"AQAAAAAAAAABAAAAlDoAAAAAAAC7OgAAAAAAAAAAAAAAAAAA"
				],
				[
					1321,
					1,
					"paste",
					null,
					"AQAAAJQ6AAAAAAAAuzoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlDoAAAAAAACUOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1340,
					1,
					"insert",
					{
						"characters": "\nres.type"
					},
					"CgAAABg7AAAAAAAAGTsAAAAAAAAAAAAAGTsAAAAAAAAhOwAAAAAAAAAAAAAhOwAAAAAAACI7AAAAAAAAAAAAACI7AAAAAAAAIzsAAAAAAAAAAAAAIzsAAAAAAAAkOwAAAAAAAAAAAAAkOwAAAAAAACU7AAAAAAAAAAAAACU7AAAAAAAAJjsAAAAAAAAAAAAAJjsAAAAAAAAnOwAAAAAAAAAAAAAnOwAAAAAAACg7AAAAAAAAAAAAACg7AAAAAAAAKTsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGDsAAAAAAAAYOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1341,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAACk7AAAAAAAAKzsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKTsAAAAAAAApOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1343,
					1,
					"left_delete",
					null,
					"AQAAACo7AAAAAAAAKjsAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAKzsAAAAAAAArOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1344,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAACo7AAAAAAAALDsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKjsAAAAAAAAqOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1345,
					1,
					"insert",
					{
						"characters": "application/json"
					},
					"EAAAACs7AAAAAAAALDsAAAAAAAAAAAAALDsAAAAAAAAtOwAAAAAAAAAAAAAtOwAAAAAAAC47AAAAAAAAAAAAAC47AAAAAAAALzsAAAAAAAAAAAAALzsAAAAAAAAwOwAAAAAAAAAAAAAwOwAAAAAAADE7AAAAAAAAAAAAADE7AAAAAAAAMjsAAAAAAAAAAAAAMjsAAAAAAAAzOwAAAAAAAAAAAAAzOwAAAAAAADQ7AAAAAAAAAAAAADQ7AAAAAAAANTsAAAAAAAAAAAAANTsAAAAAAAA2OwAAAAAAAAAAAAA2OwAAAAAAADc7AAAAAAAAAAAAADc7AAAAAAAAODsAAAAAAAAAAAAAODsAAAAAAAA5OwAAAAAAAAAAAAA5OwAAAAAAADo7AAAAAAAAAAAAADo7AAAAAAAAOzsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKzsAAAAAAAArOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1347,
					1,
					"insert",
					{
						"characters": "),"
					},
					"AgAAADw7AAAAAAAAPTsAAAAAAAAAAAAAPTsAAAAAAAA+OwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPDsAAAAAAAA8OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1348,
					1,
					"left_delete",
					null,
					"AQAAAD07AAAAAAAAPTsAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAPjsAAAAAAAA+OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1349,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAD07AAAAAAAAPjsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPTsAAAAAAAA9OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1381,
					1,
					"insert",
					{
						"characters": ",file"
					},
					"BQAAAGg7AAAAAAAAaTsAAAAAAAAAAAAAaTsAAAAAAABqOwAAAAAAAAAAAABqOwAAAAAAAGs7AAAAAAAAAAAAAGs7AAAAAAAAbDsAAAAAAAAAAAAAbDsAAAAAAABtOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaDsAAAAAAABoOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1411,
					1,
					"insert",
					{
						"characters": "\\/.*"
					},
					"BAAAAOQ6AAAAAAAA5ToAAAAAAAAAAAAA5ToAAAAAAADmOgAAAAAAAAAAAADmOgAAAAAAAOc6AAAAAAAAAAAAAOc6AAAAAAAA6DoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5DoAAAAAAADkOgAAAAAAAAAAAAAAAPC/"
				],
				[
					1429,
					1,
					"insert",
					{
						"characters": "js"
					},
					"AwAAADs7AAAAAAAAPDsAAAAAAAAAAAAAPDsAAAAAAAA8OwAAAAAAAAQAAABqc29uPDsAAAAAAAA9OwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOzsAAAAAAAA/OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1445,
					1,
					"",
					null,
					"AgAAAC87AAAAAAAAVDsAAAAAAAAAAAAAVDsAAAAAAABUOwAAAAAAAA4AAABhcHBsaWNhdGlvbi9qcw",
					"AQAAAAAAAAABAAAALzsAAAAAAAA9OwAAAAAAAAAAAAAAAPC/"
				],
				[
					1555,
					1,
					"paste",
					null,
					"AQAAAAI7AAAAAAAAKTsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAjsAAAAAAAACOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1560,
					1,
					"insert",
					{
						"characters": "JS"
					},
					"AwAAABQ7AAAAAAAAFTsAAAAAAAAAAAAAFTsAAAAAAAAVOwAAAAAAAAcAAABSZXF1ZXN0FTsAAAAAAAAWOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFDsAAAAAAAAbOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1561,
					1,
					"insert",
					{
						"characters": " replcer"
					},
					"CAAAABY7AAAAAAAAFzsAAAAAAAAAAAAAFzsAAAAAAAAYOwAAAAAAAAAAAAAYOwAAAAAAABk7AAAAAAAAAAAAABk7AAAAAAAAGjsAAAAAAAAAAAAAGjsAAAAAAAAbOwAAAAAAAAAAAAAbOwAAAAAAABw7AAAAAAAAAAAAABw7AAAAAAAAHTsAAAAAAAAAAAAAHTsAAAAAAAAeOwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFjsAAAAAAAAWOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1562,
					3,
					"left_delete",
					null,
					"AwAAAB07AAAAAAAAHTsAAAAAAAABAAAAchw7AAAAAAAAHDsAAAAAAAABAAAAZRs7AAAAAAAAGzsAAAAAAAABAAAAYw",
					"AQAAAAAAAAABAAAAHjsAAAAAAAAeOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1563,
					1,
					"insert",
					{
						"characters": "ace"
					},
					"AwAAABs7AAAAAAAAHDsAAAAAAAAAAAAAHDsAAAAAAAAdOwAAAAAAAAAAAAAdOwAAAAAAAB47AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGzsAAAAAAAAbOwAAAAAAAAAAAAAAAPC/"
				],
				[
					1568,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABzbAAAaW1wb3J0IGZpbGVzeXN0ZW0gZnJvbSAnZnMnOwovL2ltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwppbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJzsKaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsKaW1wb3J0ICogYXMgdXRpbCBmcm9tICd1dGlsJzsKaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInOwppbXBvcnQgZXhwcmVzc1dzIGZyb20gJ2V4cHJlc3Mtd3MnOwppbXBvcnQgeyBBbGVhIH0gZnJvbSAnLi9saWIvYWxlYS5qcyc7CmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJzsKaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtZmV0Y2gnOwppbXBvcnQgeyBleGVjIH0gZnJvbSAncHJvbWlzaWZ5LWNoaWxkLXByb2Nlc3MnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCB7IHByb21pc2VzIGFzIGZzUHJvbWlzZXMgfSBmcm9tICdmcyc7CmltcG9ydCB7IElmRGVidWcsIExvZ0lmRGVidWcsIFJlYWRGaWxlLCBMb2FkSGlzdG9yeSwgUmVhZEpTT04sIE1hcEZpbGUsIFdyaXRlRmlsZSwgV3JpdGVKU09OLCBEaXJJdGVyYXRvciwgUmVjdXJzaXZlRGlySXRlcmF0b3IsIFJlYWREaXJSZWN1cnNpdmUsIEZpbHRlciwgRmlsdGVySW1hZ2VzLCBTb3J0RmlsZXMsIFN0YXRGaWxlcyB9IGZyb20gJy4vaW8taGVscGVycy5qcyc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IFNlcmlhbFBvcnQgZnJvbSAnc2VyaWFscG9ydCc7CmltcG9ydCBTZXJpYWxTdHJlYW0gZnJvbSAnQHNlcmlhbHBvcnQvc3RyZWFtJzsKaW1wb3J0IFNvY2tldCBmcm9tICcuL3dlYlNvY2tldC5qcyc7CmltcG9ydCBXZWJTb2NrZXQgZnJvbSAnd3MnOwppbXBvcnQgUG9ydGFibGVDaGlsZFByb2Nlc3MsIHsgU0lHVEVSTSwgU0lHS0lMTCwgU0lHU1RPUCwgU0lHQ09OVCB9IGZyb20gJy4vbGliL2NoaWxkUHJvY2Vzcy5qcyc7CmltcG9ydCB7IFJlcGVhdGVyIH0gZnJvbSAnLi9saWIvcmVwZWF0ZXIvcmVwZWF0ZXIuanMnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnLi9tZXNzYWdlLmpzJzsKaW1wb3J0IHsgbGF6eVByb3BlcnRpZXMsIG1lbW9pemUsIGFiYnJldmlhdGUsIGNsYXNzTmFtZSwgZXNjYXBlLCBnZXRNZXRob2RzLCBpc09iamVjdCwgcmFuZFN0ciwgdG9Vbml4VGltZSwgdHJ5Q2F0Y2gsIHRyeUZ1bmN0aW9uLCB1bml4VGltZSwgd2FpdEZvciwgd2Vha0Fzc2lnbiwgd2Vha01hcHBlciwgZmlsdGVyLCBmaWx0ZXJLZXlzLCBtYXRjaEFsbCB9IGZyb20gJy4vbGliL21pc2MuanMnOwppbXBvcnQgaW1wb3J0UmVwbGFjZXIgZnJvbSAnLi9pbXBvcnRSZXBsYWNlci5qcyc7Cgpjb25zdCByb3RhdGVMZWZ0ID0gbiA9PiB4ID0+ICh4IDw8IG4pIHwgKCh4ID4+ICgzMiAtIG4pKSAmIH4oKC0xID4+IG4pIDw8IG4pKTsKCmZ1bmN0aW9uIGhhc2hTdHJpbmcoc3RyaW5nLCBiaXRzID0gMzIsIG1hc2sgPSAweGZmZmZmZmZmKSB7CiAgbGV0IHJldCA9IDA7CiAgbGV0IGJpdGMgPSAwOwogIGxldCByb3QgPSByb3RhdGVMZWZ0KDcpOwogIGZvcihsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgIGNvbnN0IGNvZGUgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKICAgIHJldCAqPSAxODY7CiAgICByZXQgXj0gY29kZTsKICAgIGJpdGMgKz0gODsKICAgIHJldCA9IHJvdChyZXQpICYgbWFzazsKICB9CiAgcmV0dXJuIHJldCAmIDB4N2ZmZmZmZmY7Cn0KCi8vU2VyaWFsU3RyZWFtLkJpbmRpbmcgPSBTZXJpYWxCaW5kaW5nOwpsZXQgbmFtZXMgPSBbXSwKICBkaXJzID0ge307CgpsZXQgY2hpbGRQcm9jZXNzOwpjb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwOwoKY29uc3QgZmlsZXMgPSBuZXcgU2V0KCk7CmNvbnN0IGhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMScpOwoKY29uc3QgcHJuZyA9IG5ldyBBbGVhKCk7CnBybmcuc2VlZChEYXRlLm5vdygpKTsKY29uc29sZS5sb2coJ3JhbmRvbTonLCBwcm5nLnVpbnQzMigpKTsKY29uc29sZS5sb2coJ3JhbmRTdHI6JywgcmFuZFN0cig4LCBudWxsLCBwcm5nKSk7CgpsZXQgYXBwID0gZXhwcmVzcygpOwpleHByZXNzV3MoYXBwLCBudWxsLCB7IHBlck1lc3NhZ2VEZWZsYXRlOiBmYWxzZSB9KTsKY29uc3QgcCA9IHBhdGguam9pbihwYXRoLmRpcm5hbWUocHJvY2Vzcy5hcmd2WzFdKSwgJy4nKTsKCmxldCBtb3VudERpcnMgPSBbJ2RhdGEnLCAnLi4vYW4tdHJvbmljcy9lYWdsZScsICcuLi9pbnNpZGVyL2VhZ2xlJywgJy4uL2xjLW1ldGVyL2VhZ2xlJywgJy4uL3BpY3Rlc3QvZWFnbGUnXTsKbGV0IHRtcERpciA9ICcuL3RtcCc7Cgphc3luYyBmdW5jdGlvbiB3YWl0Q2hpbGQocHJvYykgewogIGNvbnN0IHsgcGlkLCBzdGRvdXQsIHN0ZGVyciwgd2FpdCB9ID0gcHJvYzsKICBjb25zb2xlLmxvZygnUHJvY2VzcyBJRCA9JywgcGlkKTsKICBsZXQgcmV0ID0gYXdhaXQgd2FpdCgpOwogIGNvbnNvbGUubG9nKCd3YWl0KCkgPScsIHJldCk7CiAgcmV0dXJuIHJldDsKfQoKYXN5bmMgZnVuY3Rpb24gcnVuTW91bnQoZGlyc0l0ZXJhdG9yKSB7CiAgZm9yIGF3YWl0KGxldCBkaXJzIG9mIGF3YWl0IGRpcnNJdGVyYXRvcikgewogICAgY29uc29sZS5sb2coYHJ1bk1vdW50YCwgZGlycyk7CiAgICBjb25zb2xlLmRlYnVnKGBNb3VudCAke2RpcnN9IHRvIHRtcC9gKTsKCiAgICBsZXQgcHJvYyA9IGNoaWxkUHJvY2VzcygnLi9tb3VudC10bXAuc2gnLCBbJy1mJywgLi4udW5pcXVlKGRpcnMgfHwgW10pXSwgewogICAgICBlbnY6IHsgT1BUUzogJ2F1dG9fdW5tb3VudCxhdG9taWNfb190cnVuYyxiaWdfd3JpdGVzLGtlcm5lbF9jYWNoZScgfQogICAgfSk7CiAgICBhc3luYyBmdW5jdGlvbiByZWFkRGF0YShvdXRwdXQsIGNhbGxiYWNrID0gZCA9PiB7fSkgewogICAgICB0cnkgewogICAgICAgIGZvciBhd2FpdChsZXQgZGF0YSBvZiBuZXcgUmVwZWF0ZXIoKHB1c2gsIHN0b3ApID0+IHsKICAgICAgICAgIG91dHB1dC5vbignZGF0YScsIGNodW5rID0+IHB1c2goY2h1bmsudG9TdHJpbmcoKSkpOwogICAgICAgICAgcHJvYy5vbignZXhpdCcsIHN0b3ApOwogICAgICAgICAgLy8gICAgICAgICAgb3V0cHV0Lm9uKCdjbG9zZScsICgpID0+IHB1c2gobnVsbCkpOwogICAgICAgIH0pKSB7CiAgICAgICAgICBpZihkYXRhID09PSBudWxsKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvdXRwdXQgRU9GJyk7CiAgICAgICAgICAgIC8vcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycpIGRhdGEuc3BsaXQoL1xuL2cpLmZvckVhY2gobGluZSA9PiBjYWxsYmFjayhsaW5lKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfQogICAgfQogICAgcmVhZERhdGEocHJvYy5zdGRvdXQpOwogICAgcmVhZERhdGEocHJvYy5zdGRlcnIsIGRhdGEgPT4gY29uc29sZS5sb2coJ3N0ZGVyciBkYXRhOicsIGFiYnJldmlhdGUoZXNjYXBlKGRhdGEpLCBwcm9jZXNzLmVudlsnQ09MVU1OUyddIHx8IDEyMCkpKTsKICAgIGxldCBleGl0Q29kZSA9IGF3YWl0IHdhaXRDaGlsZChwcm9jKTsKICAgIGNvbnNvbGUubG9nKCdleGl0Q29kZTonLCBleGl0Q29kZSk7CiAgICByZXR1cm4gZXhpdENvZGU7CiAgfQp9Cgphc3luYyBmdW5jdGlvbiBSZXF1ZXN0Q29udG91cnMocmVxLCByZXMpIHsKICBjb25zdCB7IGJvZHkgfSA9IHJlcTsKICBjb25zdCB7IGNvbnRvdXJzLCBmcmFtZSwgd2lkdGgsIGhlaWdodCB9ID0gYm9keTsKICBjb25zb2xlLmxvZyhgJHtyZXEudXJsfWAsIHsgY29udG91cnMsIGZyYW1lLCB3aWR0aCwgaGVpZ2h0IH0pOwoKICByZXMuc3RhdHVzKDIwMCkuc2VuZCgnT0snKTsKCiAgU29ja2V0LnNlbmRBbGwoeyB0eXBlOiAnQ09OVE9VUlMnLCBvcmlnaW46ICcqJywgcmVjaXBpZW50OiAnKicsIGJvZHkgfSk7CgogIC8vICByZXMuanNvbih7IHN0YXR1czogJ09LJyB9KTsKfQoKLy9jb25zb2xlLmxvZygnU2VydmluZyBmcm9tJywgcCk7Cgphc3luYyBmdW5jdGlvbiBtYWluKCkgewogIGNvbnN0IHsgc3Rkb3V0LCBzdGRlcnIgfSA9IHByb2Nlc3M7CiAgZ2xvYmFsVGhpcy5jb25zb2xlID0gbmV3IENvbnNvbGUoewogICAgc3Rkb3V0LAogICAgc3RkZXJyLAogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgYnJlYWtMZW5ndGg6IDEyMCwKICAgICAgbWF4U3RyaW5nTGVuZ3RoOiBJbmZpbml0eSwKICAgICAgbWF4QXJyYXlMZW5ndGg6IDMwLAogICAgICBjb21wYWN0OiAyCiAgICB9CiAgfSk7CiAgYXdhaXQgUG9ydGFibGVDaGlsZFByb2Nlc3MoY3AgPT4gKGNoaWxkUHJvY2VzcyA9IGNwKSk7CgogIFNvY2tldC50aW1lb3V0Q3ljbGVyKCk7CgogIC8qICBsZXQgbW91bnRlciA9IHJ1bk1vdW50KAogICAgbmV3IFJlcGVhdGVyKGFzeW5jIChwdXNoLCBzdG9wKSA9PiB7CiAgICAgIHdoaWxlKHRydWUpIGF3YWl0IHB1c2gobW91bnREaXJzKTsKICAgIH0pCiAgKS50aGVuKGV4aXRDb2RlID0+IHsKICAgIGNvbnNvbGUubG9nKCdydW5Nb3VudCcsIHsgZXhpdENvZGUgfSk7CiAgICBpZihleGl0Q29kZSA9PSAxMjcpIHsKICAgICAgcHJvY2Vzcy5leGl0KDEyNyk7CiAgICB9CiAgICByZXR1cm4gZXhpdENvZGU7CiAgfSk7Ki8KICBjb25zb2xlLmxvZygnbW91bnREaXJzJywgeyBtb3VudERpcnMgfSk7CgogIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgICAvLyAgICBjb25zb2xlLmxvZygicmVxIiwgcmVxLnVybCwgcmVxLm1ldGhvZCk7CiAgICBuZXh0KCk7CiAgfSk7CiAgYXBwLnVzZShleHByZXNzLnRleHQoeyB0eXBlOiAnYXBwbGljYXRpb24veG1sJywgbGltaXQ6ICcxNjM4NGtiJyB9KSk7CgogIGFwcC51c2UoYm9keVBhcnNlci5qc29uKHsgbGltaXQ6ICcyMDBtYicgfSkpOwogIGFwcC51c2UoYm9keVBhcnNlci5yYXcoeyB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JywgbGltaXQ6ICc1MjQyODhrYicgfSkpOwogIGFwcC51c2UoYm9keVBhcnNlci5yYXcoeyB0eXBlOiAndGV4dC9wbGFpbicsIGxpbWl0OiAnNTI0Mjg4a2InIH0pKTsKICBhcHAudXNlKGJvZHlQYXJzZXIucmF3KHsgdHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsIGxpbWl0OiAnNTI0Mjg4a2InIH0pKTsKICBhcHAudXNlKGJvZHlQYXJzZXIucmF3KHsgdHlwZTogJ211bHRpcGFydC9taXhlZCcsIGxpbWl0OiAnMTYzODRrYicgfSkpOwoKICBhcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4gewogICAgcmVzLmFwcGVuZCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20sIGh0dHA6Ly8xMjcuMC4wLjE6JHtwb3J0fWApOwogICAgcmVzLmFwcGVuZCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsUFVULFBPU1QsREVMRVRFLE9QVElPTlMnKTsKICAgIHJlcy5hcHBlbmQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBY2NlcHQsIEF1dGhvcml6YXRpb24nKTsKICAgIHJlcy5hcHBlbmQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTsKICAgIG5leHQoKTsKICB9KTsKCiAgZnVuY3Rpb24gU2VuZFJhdyhyZXMsIGZpbGUsIGRhdGEsIHR5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJykgewogICAgcmVzLnNldEhlYWRlcignQ29udGVudC1EaXNwb3NpdGlvbicsIGBhdHRhY2htZW50OyBmaWxlbmFtZT0iJHtwYXRoLmJhc2VuYW1lKGZpbGUpfSJgKTsKCiAgICBpZih0eXBlKSByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCB0eXBlKTsKICAgIGlmKGRhdGEpIHJldHVybiByZXMuc2VuZChkYXRhKTsKICAgIGVsc2UgaWYoZmlsZSAmJiB0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJykgewogICAgICBjb25zb2xlLmxvZygnc2VuZEZpbGUnLCB7IGZpbGUgfSk7CiAgICAgIHJldHVybiByZXMuc2VuZEZpbGUoZmlsZSwgeyByb290OiBwcm9jZXNzLmN3ZCgpIH0pOwogICAgfQogIH0KCiAgY29uc3QgY29udmVydFRvR2VyYmVyID0gYXN5bmMgKGJvYXJkRmlsZSwgb3B0cyA9IHt9KSA9PiB7CiAgICBjb25zb2xlLmxvZygnY29udmVydFRvR2VyYmVyJywgeyBib2FyZEZpbGUsIG9wdHMgfSk7CiAgICBsZXQgewogICAgICBsYXllcnMgPSBvcHRzLnNpZGUgPT0gJ291dGxpbmUnID8gWydNZWFzdXJlcyddIDogb3B0cy5kcmlsbCA/IFsnRHJpbGxzJywgJ0hvbGVzJ10gOiBbb3B0cy5mcm9udCA/ICdUb3AnIDogJ0JvdHRvbScsICdQYWRzJywgJ1ZpYXMnXSwKICAgICAgZm9ybWF0ID0gb3B0cy5kcmlsbCA/ICdFWENFTExPTicgOiAnR0VSQkVSX1JTMjc0WCcsCiAgICAgIGRhdGEsCiAgICAgIGZldGNoID0gZmFsc2UsCiAgICAgIGZyb250LAogICAgICBiYWNrCiAgICB9ID0gb3B0czsKICAgIGNvbnN0IGJhc2UgPSBwYXRoLmJhc2VuYW1lKGJvYXJkRmlsZSwgJy5icmQnKTsKICAgIGNvbnN0IGZvcm1hdFRvRXh0ID0gKGxheWVycywgZm9ybWF0KSA9PiB7CiAgICAgIGlmKG9wdHMuZHJpbGwgfHwgZm9ybWF0LnN0YXJ0c1dpdGgoJ0VYQ0VMTE9OJykgfHwgbGF5ZXJzLmluZGV4T2YoJ0RyaWxscycpICE9IC0xIHx8IGxheWVycy5pbmRleE9mKCdIb2xlcycpICE9IC0xKSByZXR1cm4gJ1RYVCc7CiAgICAgIGlmKGxheWVycy5pbmRleE9mKCdCb3R0b20nKSAhPSAtMSB8fCBmb3JtYXQuc3RhcnRzV2l0aCgnR0VSQkVSJykpIHJldHVybiBvcHRzLnNpZGUgPT0gJ291dGxpbmUnID8gJ0dLTycgOiBmcm9udCA/ICdHVEwnIDogJ0dCTCc7CgogICAgICByZXR1cm4gJ3JzMjc0eCc7CiAgICB9OwogICAgY29uc3QgZ2VyYmVyRmlsZSA9IGAuL3RtcC8ke2Jhc2V9LiR7Zm9ybWF0VG9FeHQobGF5ZXJzLCBmb3JtYXQpfWA7CiAgICBjb25zdCBjbWQgPSBgZWFnbGUgLVggLWQgJHtmb3JtYXR9IC1vICIke2dlcmJlckZpbGV9IiAiJHtib2FyZEZpbGV9IiAke2xheWVycy5qb2luKCcgJyl9YDsKICAgIGNvbnNvbGUubG9nKGBleGVjdXRpbmcgJyR7Y21kfSdgKTsKICAgIGNvbnN0IGNoaWxkID0gZXhlYyhgJHtjbWR9IDI+JjEgMDwvZGV2L251bGxgLCB7fSk7CiAgICAvLyBkbyB3aGF0ZXZlciB5b3Ugd2FudCB3aXRoIGBjaGlsZGAgaGVyZSAtIGl0J3MgYSBDaGlsZFByb2Nlc3MgaW5zdGFuY2UganVzdAogICAgLy8gd2l0aCBwcm9taXNlLWZyaWVuZGx5IGAudGhlbigpYCAmIGAuY2F0Y2goKWAgZnVuY3Rpb25zIGFkZGVkIHRvIGl0IQogICAgbGV0IG91dHB1dCA9ICcnOwogICAgY2hpbGQuc3Rkb3V0Lm9uKCdkYXRhJywgZGF0YSA9PiAob3V0cHV0ICs9IGRhdGEpKTsKICAgIGNoaWxkLnN0ZGVyci5vbignZGF0YScsIGRhdGEgPT4gKG91dHB1dCArPSBkYXRhKSk7CiAgICBjb25zdCB7IHN0ZG91dCwgc3RkZXJyLCBjb2RlLCBzaWduYWwgfSA9IGF3YWl0IGNoaWxkOwogICAgY29uc29sZS5sb2coYGNvZGU6ICR7Y29kZX1gKTsKICAgIC8vICBjb25zb2xlLmxvZyhgb3V0cHV0OiAke291dHB1dH1gKTsKICAgIGlmKGNvZGUgIT09IDApIHRocm93IG5ldyBFcnJvcihvdXRwdXQpOwogICAgaWYob3V0cHV0KSBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZSgvXHMqXHIqXG4vZywgJ1xuJyk7CiAgICBsZXQgcmVzdWx0ID0geyBjb2RlLCBvdXRwdXQgfTsKICAgIGlmKG9wdHMuZmV0Y2gpIHJlc3VsdC5kYXRhID0gYXdhaXQgKGF3YWl0IGZzUHJvbWlzZXMucmVhZEZpbGUoR2V0VkZTUGF0aChnZXJiZXJGaWxlKSkpLnRvU3RyaW5nKCk7CiAgICByZXN1bHQuZmlsZSA9IGdlcmJlckZpbGU7CiAgICBjb25zb2xlLmxvZygnY29udmVydFRvR2VyYmVyIHJlc3VsdCA9JywgcmVzdWx0KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgY29uc3QgZ2VyYmVyRW5kcG9pbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxOwogICAgbGV0IHsgYm9hcmQsIHNhdmUsIGZpbGU6IGZpbGVuYW1lLCByYXcsIC4uLm9wdHMgfSA9IGJvZHk7CiAgICBsZXQgcmVzdWx0OwogICAgY29uc29sZS5sb2coJ1JlcXVlc3QgL2dlcmJlcicsIHsgYm9hcmQsIHNhdmUsIG9wdHMgfSk7CiAgICB0cnkgewogICAgICByZXN1bHQgPSBhd2FpdCBjb252ZXJ0VG9HZXJiZXIoYm9hcmQsIG9wdHMpOwogICAgICBpZihzYXZlKSB7CiAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZSB8fCB0eXBlb2Ygc2F2ZSA9PSAnc3RyaW5nJyA/IHNhdmUgOiBudWxsOwogICAgICAgIGZpbGVuYW1lID0gYHRtcC9gICsgZmlsZW5hbWUucmVwbGFjZSgvLipcLyhbXlwvXSkqXC5bXlwvLl0qJC9nLCAnJDEnKTsKICAgICAgICBhd2FpdCBmc1Byb21pc2VzLndyaXRlRmlsZShmaWxlbmFtZSwgcmVzdWx0LmRhdGEpLnRoZW4ocmVzID0+IGNvbnNvbGUubG9nKCdXcm90ZSBmaWxlOicsIHJlcykpOwogICAgICB9CiAgICB9IGNhdGNoKGVycm9yKSB7CiAgICAgIHJlc3VsdCA9IHsgZXJyb3IgfTsKICAgIH0KICAgIGNvbnNvbGUubG9nKAogICAgICAnUmVzcG9uc2UgL2dlcmJlcicsCiAgICAgIGZpbHRlcktleXMocmVzdWx0LCBrID0+ICEvKG91dHB1dHxkYXRhKS8udGVzdChrKSkKICAgICk7CgogICAgaWYoL2dldC9pLnRlc3QocmVxLm1ldGhvZCkgfHwgcmF3KSB7CiAgICAgIGNvbnN0IHsgZmlsZSB9ID0gcmVzdWx0OwogICAgICByZXR1cm4gU2VuZFJhdyhyZXMsIGZpbGUsIHJlc3VsdC5kYXRhKTsKICAgIH0KICAgIHJlcy5qc29uKHJlc3VsdCk7CiAgfTsKCiAgYXBwLmdldCgvXlwvZ2VyYmVyLywgZ2VyYmVyRW5kcG9pbnQpOwogIGFwcC5wb3N0KC9eXC9nZXJiZXIvLCBnZXJiZXJFbmRwb2ludCk7CgogIGNvbnN0IGdlcmJlclRvR2NvZGUgPSBhc3luYyAoZ2VyYmVyRmlsZSwgYWxsT3B0cyA9IHt9KSA9PiB7CiAgICBjb25zdCBiYXNlbmFtZSA9IGdlcmJlckZpbGUucmVwbGFjZSgvLipcLy9nLCAnJykucmVwbGFjZSgvXC5bXi5dKiQvLCAnJyk7CiAgICBsZXQgeyBmZXRjaCwgZGF0YSwgcmF3LCAuLi5vcHRzIH0gPSBhbGxPcHRzOwogICAgb3B0cyA9IHsKICAgICAgYmFzZW5hbWUsCiAgICAgIHpzYWZlOiAnMW1tJywKICAgICAgemNoYW5nZTogJzJtbScsCiAgICAgIHp3b3JrOiAnLTFtbScsCiAgICAgIHpkcmlsbDogJy0ybW0nLAogICAgICB6Y3V0OiAnLTJtbScsCiAgICAgICdjdXR0ZXItZGlhbWV0ZXInOiAnMW1tJywKICAgICAgJ2RyaWxsLWZlZWQnOiAxMDAwLAogICAgICAnZHJpbGwtc3BlZWQnOiAxMDAwMCwKICAgICAgJ21pbGwtZmVlZCc6IDYwMCwKICAgICAgJ21pbGwtc3BlZWQnOiAxNjAwMCwKICAgICAgJ2N1dC1mZWVkJzogMjAwLAogICAgICAnY3V0LXNwZWVkJzogMTAwMDAsCiAgICAgICdjdXQtaW5mZWVkJzogJzFtbScsCgogICAgICAnb3V0cHV0LWRpcic6ICcuL3RtcC8nLAogICAgICAuLi5vcHRzCiAgICB9OwogICAgaWYob3B0cy5mcm9udCA9PSB1bmRlZmluZWQgJiYgb3B0cy5iYWNrID09IHVuZGVmaW5lZCAmJiBvcHRzLmRyaWxsID09IHVuZGVmaW5lZCkgb3B0cy5iYWNrID0gZ2VyYmVyRmlsZTsKICAgIGxldCBzaWRlcyA9IFtdOwoKICAgIGZvcihsZXQgc2lkZSBvZiBbJ2Zyb250JywgJ2JhY2snLCAnZHJpbGwnLCAnb3V0bGluZSddKQogICAgICBpZihzaWRlIGluIG9wdHMpIHsKICAgICAgICBpZih0eXBlb2Ygb3B0c1tzaWRlXSAhPSAnc3RyaW5nJykgb3B0c1tzaWRlXSA9IGdlcmJlckZpbGU7CiAgICAgICAgc2lkZXMucHVzaChzaWRlKTsKICAgICAgfQoKICAgIGlmKG9wdHMudm9yb25vaSAmJiAhb3B0cy52ZWN0b3JpYWwpIG9wdHMudmVjdG9yaWFsID0gMTsKCiAgICBjb25zb2xlLmRlYnVnKGBnZXJiZXJUb0djb2RlYCwgb3B0cyk7CiAgICBmdW5jdGlvbiBtYWtlUGF0aChleHQsIHNpZGUsIGJhc2UgPSBiYXNlbmFtZSkgewogICAgICByZXR1cm4gcGF0aC5qb2luKG9wdHNbJ291dHB1dC1kaXInXSwgYCR7YmFzZX1fJHtzaWRlfS4ke2V4dH1gKTsKICAgIH0KCiAgICBjb25zdCBwYXJhbXMgPSBbLi4uT2JqZWN0LmVudHJpZXMob3B0cyldCiAgICAgIC5maWx0ZXIoKFtrLCB2XSkgPT4gdHlwZW9mIHYgPT0gJ3N0cmluZycgfHwgdHlwZW9mIHYgPT0gJ251bWJlcicgfHwgKHR5cGVvZiB2ID09ICdib29sZWFuJyAmJiB2ID09PSB0cnVlKSkKICAgICAgLm1hcCgoW2ssIHZdKSA9PiBgLS0ke2t9JHt0eXBlb2YgdiAhPSAnYm9vbGVhbicgJiYgdiAhPSAnJyA/ICc9JyArIHYgOiAnJ31gKTsKICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0IC9nY29kZScsIHsgZ2VyYmVyRmlsZSwgZmV0Y2gsIHJhdyB9KTsKICAgIC8vY29uc29sZS53YXJuKGBnZXJiZXJUb0djb2RlYCwgYWJicmV2aWF0ZShnZXJiZXJGaWxlKSwgeyBnY29kZUZpbGUsIG9wdHMgfSk7CgogICAgbGV0IHdhaXQ7CiAgICB0cnkgewogICAgICBjb25zdCBjbWQgPSBgcGNiMmdjb2RlICR7cGFyYW1zLmpvaW4oJyAnKX0gMj4mMWA7CiAgICAgIGNvbnNvbGUud2FybihgZXhlY3V0aW5nICcke2NtZH0nYCk7CiAgICAgIGNvbnN0IGNoaWxkID0gZXhlYyhjbWQsIHt9KTsKICAgICAgLy8gZG8gd2hhdGV2ZXIgeW91IHdhbnQgd2l0aCBgY2hpbGRgIGhlcmUgLSBpdCdzIGEgQ2hpbGRQcm9jZXNzIGluc3RhbmNlIGp1c3QKICAgICAgLy8gd2l0aCBwcm9taXNlLWZyaWVuZGx5IGAudGhlbigpYCAmIGAuY2F0Y2goKWAgZnVuY3Rpb25zIGFkZGVkIHRvIGl0IQogICAgICBsZXQgb3V0cHV0ID0gJyc7CiAgICAgIGNoaWxkLnN0ZG91dC5vbignZGF0YScsIGRhdGEgPT4gKG91dHB1dCArPSBkYXRhKSk7CiAgICAgIGNoaWxkLnN0ZGVyci5vbignZGF0YScsIGRhdGEgPT4gKG91dHB1dCArPSBkYXRhKSk7CiAgICAgIHdhaXQgPSBhd2FpdCBjaGlsZC5jYXRjaChlcnJvciA9PiAoeyBjb2RlOiAtMSwgZXJyb3IgfSkpOwoKICAgICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciwgY29kZSwgc2lnbmFsIH0gPSB3YWl0OwogICAgICBpZihvdXRwdXQpIG91dHB1dCA9IGFiYnJldmlhdGUob3V0cHV0LnJlcGxhY2UoL1xzKlxyKlxuL2csICdcbicpLCAyMDApOwogICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgL2djb2RlJywgeyBzdGRvdXQsIG91dHB1dCwgc2lkZXMgfSk7CgogICAgICAvLyAgIGlmKGNvZGUgIT09IDApIHRocm93IG5ldyBFcnJvcihvdXRwdXQpOwoKICAgICAgY29uc3QgZ2NvZGVGaWxlID0gbWFrZVBhdGgoJ25nYycsIHNpZGVzWzBdKTsKICAgICAgY29uc3Qgc3ZnRmlsZSA9IG1ha2VQYXRoKCdzdmcnLCBzaWRlc1swXSwgJ3Byb2Nlc3NlZCcpOwoKICAgICAgZm9yKGxldCBbZmlsZSwgdG9dIG9mIHNpZGVzLm1hcChzaWRlID0+IFttYWtlUGF0aCgnc3ZnJywgc2lkZSwgJ3Byb2Nlc3NlZCcpLCBtYWtlUGF0aCgnc3ZnJywgc2lkZSldKSkgaWYoZnMuZXhpc3RzU3luYyhmaWxlKSkgZnMucmVuYW1lU3luYyhmaWxlLCB0byk7CgogICAgICBsZXQgZmlsZXMgPSBzaWRlcy5tYXAoc2lkZSA9PiBbc2lkZSwgbWFrZVBhdGgoJ25nYycsIHNpZGUpXSkuZmlsdGVyKChbc2lkZSwgZmlsZV0pID0+IGZzLmV4aXN0c1N5bmMoZmlsZSkpOwogICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgL2djb2RlJywgeyBmaWxlcyB9KTsKCiAgICAgIGxldCByZXN1bHQgPSB7IGNvZGUsIG91dHB1dCwgY21kIH07CiAgICAgIGlmKGZldGNoKSB7CiAgICAgICAgZm9yKGxldCBbc2lkZSwgZmlsZV0gb2YgZmlsZXMpIHJlc3VsdFtzaWRlXSA9IGF3YWl0IChhd2FpdCBmc1Byb21pc2VzLnJlYWRGaWxlKEdldFZGU1BhdGgoZmlsZSkpKS50b1N0cmluZygpOwogICAgICB9CiAgICAgIGlmKC8qL2dldC9pLnRlc3QocmVxLm1ldGhvZCkgfHwgKi8gcmF3KSB7CiAgICAgICAgY29uc3QgeyBmaWxlIH0gPSByZXN1bHQ7CiAgICAgICAgcmV0dXJuIFNlbmRSYXcocmVzLCBmaWxlLCByZXN1bHQuZGF0YSk7CiAgICAgIH0KICAgICAgcmVzdWx0LmZpbGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKGZpbGVzKTsKICAgICAgY29uc29sZS5sb2coCiAgICAgICAgJ1Jlc3BvbnNlIC9nY29kZScsCiAgICAgICAgZmlsdGVyS2V5cyhyZXN1bHQsIGsgPT4gIS8oWG91dHB1dHxkYXRhKS8udGVzdChrKSkKICAgICAgKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coJ2dlcmJlclRvR2NvZGUgRVJST1I6JywgZXJyb3IubWVzc2FnZSArICdcbicgKyBlcnJvci5zdGFjayk7CiAgICB9CiAgfTsKCiAgbGV0IGdjb2RlRW5kcG9pbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxOwogICAgbGV0IHsgZmlsZSwgLi4ub3B0cyB9ID0gYm9keTsKICAgIGxldCByZXN1bHQ7CgogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gYXdhaXQgZ2VyYmVyVG9HY29kZShmaWxlLCBvcHRzKS5jYXRjaChlcnJvciA9PiAoeyBlcnJvciB9KSk7CiAgICB9IGNhdGNoKGVycm9yKSB7CiAgICAgIHJlc3VsdCA9IHsgZXJyb3IgfTsKICAgIH0gZmluYWxseSB7CiAgICAgIHJlcy5qc29uKHJlc3VsdCk7CiAgICB9CiAgfTsKICBhcHAucG9zdCgvXlwvZ2NvZGUvLCBnY29kZUVuZHBvaW50KTsKICBhcHAuZ2V0KC9eXC9nY29kZS8sIGdjb2RlRW5kcG9pbnQpOwoKICBjb25zdCBHaXRodWJMaXN0Q29udGVudHMgPSBhc3luYyAob3duZXIsIHJlcG8sIGRpciwgZmlsdGVyKSA9PiB7CiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke293bmVyfS8ke3JlcG99L2NvbnRlbnRzLyR7ZGlyfWA7CiAgICBjb25zb2xlLmxvZyhgR0lUSFVCIGxpc3RgLCB7IHVybCwgb3duZXIsIHJlcG8sIGRpciwgZmlsdGVyIH0pOwogICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTsKICAgIGxldCByZXN1bHQgPSBKU09OLnBhcnNlKGF3YWl0IHJlc3BvbnNlLnRleHQoKSk7CiAgICBjb25zb2xlLmxvZygncmVzdWx0JywgcmVzdWx0KTsKICAgIGlmKGZpbHRlcikgewogICAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoZmlsdGVyLCAnZycpOwogICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKCh7IG5hbWUgfSkgPT4gcmUudGVzdChuYW1lKSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIGFwcC51c2UoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgICBpZighL292ZXJyaWRlc1wvLy50ZXN0KHJlcS5wYXRoKSkgewogICAgICBsZXQgcmVsYXRpdmVQYXRoID0gcGF0aC5qb2luKCcuJywgcmVxLnBhdGgpOwogICAgICBsZXQgb3ZlcnJpZGVQYXRoID0gcGF0aC5qb2luKCdvdmVycmlkZXMnLCByZXEucGF0aCk7CiAgICAgIGxldCBpc0ZpbGUgPSBmYWxzZTsKCiAgICAgIGF3YWl0IGZzUHJvbWlzZXMKICAgICAgICAuc3RhdChHZXRWRlNQYXRoKHJlbGF0aXZlUGF0aCkpCiAgICAgICAgLnRoZW4oc3QgPT4gKGlzRmlsZSA9IHN0LmlzRmlsZSgpKSkKICAgICAgICAuY2F0Y2goZXJyID0+IHt9KTsKCiAgICAgIGxldCBvdmVycmlkZSA9IGZhbHNlOwoKICAgICAgaWYoaXNGaWxlKQogICAgICAgIGF3YWl0IGZzUHJvbWlzZXMKICAgICAgICAgIC5hY2Nlc3MoR2V0VkZTUGF0aChvdmVycmlkZVBhdGgpLCBmcy5jb25zdGFudHMuRl9PSykKICAgICAgICAgIC50aGVuKCgpID0+IChvdmVycmlkZSA9IHRydWUpKQogICAgICAgICAgLmNhdGNoKGVyciA9PiB7fSk7CgogICAgICBpZihvdmVycmlkZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdTdGF0aWMgcmVxdWVzdDonLCB7IG92ZXJyaWRlUGF0aCwgb3ZlcnJpZGUsIHJlcyB9KTsKCiAgICAgICAgcmV0dXJuIHJlcy5yZWRpcmVjdCgnLycgKyBvdmVycmlkZVBhdGgpOwogICAgICB9CiAgICB9CiAgICBpZigvbGliXC9wcmVhY3QuanMvLnRlc3QocmVxLnVybCkpIHJlcS51cmwgPSAnL2xpYi9wcmVhY3QubWpzJzsKCiAgICBpZighL2xpYlwvLy50ZXN0KHJlcS51cmwpKSB7CiAgICAgIGNvbnN0IHsgcGF0aCwgdXJsLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBib2R5IH0gPSByZXE7CiAgICAgIGZhbHNlICYmCiAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAnU3RhdGljIHJlcXVlc3Q6JywKICAgICAgICAgIHsgcGF0aCwgdXJsLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBib2R5IH0gLyogT2JqZWN0LmtleXMocmVxKSwgKi8sCgogICAgICAgICAgZmlsdGVyS2V5cyhyZXEuaGVhZGVycywgayA9PiAhLyhec2VjfF5hY2NlcHR8XmNhY2hlfF5kbnR8LWxlbmd0aHxeaG9zdCR8XmlmLXxeY29ubmVjdHxedXNlci1hZ2VudHwtdHlwZSR8Xm9yaWdpbiR8XnJlZmVyZXIkKS8udGVzdChrKSkKICAgICAgICApOwogICAgfQoKICAgIG5leHQoKTsKICB9KTsKCiAgLyogIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgICBsZXQgZmlsZSA9IHJlcS51cmwucmVwbGFjZSgvXlwvPy8sICcnKTsKCiAgICBpZigvKGRhdGF8dG1wKS8udGVzdChyZXEudXJsKSkgewogICAgICBjb25zb2xlLmxvZyhgRGF0YSBmaWxlICcke2ZpbGV9J2ApOwogICAgICBmaWxlID0gZmlsZS5yZXBsYWNlKC9eXC8/KGRhdGFcL3x0bXBcL3wpLywgJycpOwogICAgICBsZXQgZGlyID0gZGlyc1tmaWxlXTsKICAgICAgaWYoZGlyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGEgZmlsZSAnICsgZmlsZSArICcgd2FzIHJlcXVlc3RlZC4nKTsKICAgICAgfQogICAgfQogICAgbmV4dCgpOwogIH0pOyovCgogIC8qIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgICBjb25zb2xlLmxvZygnUmVxdWVzdCcsIHJlcS51cmwpOwogICAgbmV4dCgpOwogIH0pOyovCgogIGxldCBsb2dmaWxlOwoKICBhcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4gewogICAgbGV0IGZpbGUgPSByZXEudXJsLnJlcGxhY2UoL15cLz8vLCAnJyk7CgogICAgbG9nZmlsZSA/Pz0gZnMub3BlblN5bmMoJ3NlcnZlci5sb2cnLCAnYSsnLCAwbzY0NCk7CiAgICBsZXQgc3RyOwogICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICBzdHIgPSBgJHtub3cudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkucmVwbGFjZSgvLS9nLCAnJyl9ICR7bm93LnRvVGltZVN0cmluZygpLnNsaWNlKDAsIDgpfSAke3JlcS5tZXRob2QucGFkRW5kKDQpfSAke2ZpbGV9XG5gOwoKICAgIGxldCB3cml0dGVuID0gZnMud3JpdGVTeW5jKGxvZ2ZpbGUsIHN0ciwgMCwgc3RyLmxlbmd0aCk7CgogICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0OiAvJyArIGZpbGUpOwoKICAgIGlmKGZzLmV4aXN0c1N5bmMoZmlsZSkpIHsKICAgICAgaWYoL1wvLipcLmpzJC8udGVzdChmaWxlKSkgewogICAgICAgICAgY29uc29sZS5sb2coJ0pTIHJlcGxhY2U6IC8nICsgZmlsZSk7CiAgIGxldCBzID0gUmVhZEZpbGUoZmlsZSk7CiAgICAgICAgcmVzLnR5cGUoJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQ7IGNoYXJzZXQ9VVRGLTgnKTsKICAgICAgICByZXMuc2VuZChpbXBvcnRSZXBsYWNlci5yZXBsYWNlKHMsZmlsZSkpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCByZSA9IC9bXlxuXSondXRpbCdbXlxuXSovZzsKICAgICAgLypsZXQgbSwKICAgICAgICBkYXRhID0gZnMucmVhZEZpbGVTeW5jKGZpbGUsICd1dGYtOCcpOwogICAgICBpZigobSA9IHJlLmV4ZWMoZGF0YSkpKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1RoZSBmaWxlICcgKyBmaWxlICsgYCB3YXMgcmVxdWVzdGVkLiAoJHtkYXRhLmxlbmd0aH0pYCwgYG1hdGNoIEAgJHttLmluZGV4fTogJHttWzBdfWApOwogICAgICB9Ki8KCiAgICAgIGZpbGVzLmFkZChmaWxlKTsKICAgIH0KICAgIG5leHQoKTsKICB9KTsKICBhcHAudXNlKCcvc3RhdGljJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHAsICdzdGF0aWMnKSkpOwogIGFwcC51c2UoJy9tb2R1bGVzJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHAsICdub2RlX21vZHVsZXMnKSkpOwogIGFwcC51c2UoJy9odG0nLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4ocCwgJ2h0bScpKSk7CiAgYXBwLnVzZSgnL25vZGVfbW9kdWxlcycsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihwLCAnbm9kZV9tb2R1bGVzJykpKTsKICBhcHAudXNlKCcvb3ZlcnJpZGVzJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHAsICdvdmVycmlkZXMnKSkpOwogIGFwcC51c2UoJy9jb21wb25lbnRzJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHAsICdjb21wb25lbnRzJykpKTsKICBhcHAudXNlKCcvbGliJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHAsICdsaWInKSkpOwogIGFwcC51c2UoJy90bXAnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4ocCwgJ3RtcCcpKSk7CgogIGFwcC51c2UoJy8nLCBleHByZXNzLnN0YXRpYyhwKSk7CgogIGZ1bmN0aW9uIEZpbmRGaWxlKHJlbGF0aXZlKSB7CiAgICBmb3IobGV0IG1udCBvZiBtb3VudERpcnMpIHsKICAgICAgbGV0IGZpbGUgPSBwYXRoLmpvaW4obW50LCByZWxhdGl2ZSk7CiAgICAgIGNvbnN0IGV4aXN0cyA9IGZzLmV4aXN0c1N5bmMoZmlsZSk7CiAgICAgIC8vY29uc29sZS5sb2coJ0ZJTEUnLCBmaWxlLGV4aXN0cyk7CgogICAgICBpZihleGlzdHMpIHJldHVybiBtbnQ7CiAgICB9CiAgfQoKICBhcHAuZ2V0KC9eXC8/KGRhdGF8dG1wfHZmcylcLy8sIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgZmlsZSA9IHJlcS51cmwucmVwbGFjZSgvXlwvPyhkYXRhfHRtcHx2ZnMpXC8vLCAnJyk7CiAgICBjb25zdCBkaXIgPSBkaXJzW2ZpbGVdID8/IEZpbmRGaWxlKGZpbGUpOwogICAgY29uc3QgcCA9IHBhdGgucmVzb2x2ZShkaXIsIGZpbGUpOwogICAgY29uc29sZS5sb2coJ0RBVEEnLCBmaWxlLCBkaXIsIHApOwogICAgbGV0IGRhdGEgPSBhd2FpdCBmc1Byb21pc2VzLnJlYWRGaWxlKHAsICd1dGYtOCcpOwogICAgcmV0dXJuIHJlcy50eXBlKCdhcHBsaWNhdGlvbi9qc29uJykuc3RhdHVzKDIwMCkuc2VuZChkYXRhKTsKCiAgICAvLyAgIHJldHVybiByZXMuc2VuZEZpbGUocCk7CiAgfSk7CgogIGFwcC5nZXQoJy9mYXZpY29uLmljbycsIChyZXEsIHJlcykgPT4KICAgIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4ocCwgJ2xpYi9lYWdsZS9pY29uL2VhZ2xlaWNvbi5pY28nKSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdpbWFnZS94LWljb24nCiAgICAgIH0KICAgIH0pCiAgKTsKICBhcHAuZ2V0KC9cL1teXC9dKlwuanMkLywgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXMuc2VuZEZpbGUocGF0aC5qb2luKHAsIHJlcS5wYXRoKSkpOwoKICAvL2FwcC5nZXQoJy9jb21wb25lbnRzLmpzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXMuc2VuZEZpbGUocGF0aC5qb2luKHAsICdjb21wb25lbnRzLmpzJykpKTsKCiAgYXBwLmdldCgvXC9bXlwvXSpcLmNzcyQvLCBhc3luYyAocmVxLCByZXMpID0+CiAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKHAsICdzdHlsZS5jc3MnKSwgewogICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAndGV4dC9jc3MnLCBjYWNoZUNvbnRyb2w6IGZhbHNlIH0KICAgIH0pCiAgKTsKCiAgZnVuY3Rpb24gR2V0VkZTUGF0aChmaWxlKSB7CiAgICBsZXQgZGlyID0gZGlyc1tmaWxlXTsKICAgIGxldCByZXQgPSBmaWxlOwogICAgaWYoZGlyKSByZXQgPSBwYXRoLmpvaW4oZGlyLCBmaWxlKTsKCiAgICAvLyBpZihyZXQgIT0gZmlsZSkgY29uc29sZS5sb2coJ0dldFZGU1BhdGgnLCBkaXIsIGZpbGUpOwogICAgcmV0dXJuIHJldDsKICB9CgogIGFzeW5jIGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uKGZpbGUpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdnZXREZXNjcmlwdGlvbigpJywgeyBmaWxlfSk7CiAgICBsZXQgc3RyID0gYXdhaXQgZnNQcm9taXNlcy5yZWFkRmlsZShHZXRWRlNQYXRoKGZpbGUpKS50aGVuKHIgPT4gci50b1N0cmluZygpKTsKICAgIGxldCByID0gWy4uLm1hdGNoQWxsKCc8KC8pPyhib2FyZHxzY2hlbWF0aWN8bGlicmFyeSlbID5dJywgc3RyKV0KICAgICAgLm1hcChtID0+IG0uaW5kZXgpCiAgICAgIC5zb3J0KChhLCBiKSA9PiBhIC0gYikKICAgICAgLnNsaWNlKDAsIDIpOwogICAgbGV0IGNodW5rID0gc3RyLnN1YnN0cmluZyguLi5yKTsKICAgIGxldCBhID0gWyc8ZGVzY3JpcHRpb24+JywgJzwvZGVzY3JpcHRpb24+J107CiAgICBsZXQgaW5kZXhlcyA9IGEKICAgICAgLm1hcChzID0+IG5ldyBSZWdFeHAocykpCiAgICAgIC5tYXAocmUgPT4gcmUuZXhlYyhjaHVuaykpCiAgICAgIC5tYXAobSA9PiBtICYmIG0uaW5kZXgpOwogICAgbGV0IGQgPSBjaHVuay5zdWJzdHJpbmcoLi4uaW5kZXhlcyk7CiAgICBpZihkLnN0YXJ0c1dpdGgoJzxkZXNjcmlwdGlvbicpKSByZXR1cm4gVXRpbC5kZWNvZGVIVE1MRW50aXRpZXMoZC5zdWJzdHJpbmcoYVswXS5sZW5ndGgpKTsKICAgIHJldHVybiAnJzsKICB9CgogIGNvbnN0IGRlc2NNYXAgPSB3ZWFrTWFwcGVyKGdldERlc2NyaXB0aW9uLCBuZXcgTWFwKCkpOwoKICBhc3luYyBmdW5jdGlvbiBHZXRGaWxlc0xpc3QoZGlyID0gJy4vdG1wJywgb3B0cyA9IHt9KSB7CiAgICBsZXQgeyBmaWx0ZXIgPSAnLipcXC4oYnJkfHNjaHxsYnJ8R0JMfEdUTHxHS098bmdjKSQnLCBkZXNjcmlwdGlvbnMgPSBmYWxzZSwgbmFtZXMgfSA9IG9wdHM7CiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoZmlsdGVyLCAnaScpOwogICAgY29uc3QgZiA9IGVudCA9PiByZS50ZXN0KGVudCk7CgogICAgY29uc29sZS5sb2coJ0dldEZpbGVzTGlzdCgpJywgeyBmaWx0ZXIsIGRlc2NyaXB0aW9ucyB9LCAuLi4obmFtZXMgPyBbbmFtZXMubGVuZ3RoXSA6IFtdKSk7CgogICAgbGV0IGRpcm1hcCA9IHt9OwoKICAgIC8vICAgIGlmKCFuYW1lcykgbmFtZXMgPSBbLi4uKGF3YWl0IGZzUHJvbWlzZXMucmVhZGRpcihkaXIpKV0uZmlsdGVyKGYpOwogICAgZGlybWFwID0gbW91bnREaXJzLnJlZHVjZSgoYWNjLCBkaXIpID0+IHsKICAgICAgY29uc29sZS5sb2coJ1JlYWREaXJSZWN1cnNpdmUnLCBkaXIpOwogICAgICBmb3IobGV0IGVudHJ5IG9mIFJlYWREaXJSZWN1cnNpdmUoZGlyKSkgewogICAgICAgIGlmKGVudHJ5LmVuZHNXaXRoKCcvJykpIGNvbnRpbnVlOwogICAgICAgIGlmKCFmKGVudHJ5KSkgY29udGludWU7CiAgICAgICAgbGV0IHJlbGF0aXZlID0gZW50cnkuc3RhcnRzV2l0aChkaXIgKyAnLycpID8gZW50cnkuc2xpY2UoZGlyLmxlbmd0aCArIDEpIDogZW50cnk7CiAgICAgICAgYWNjW3JlbGF0aXZlXSA9IGRpcjsKICAgICAgICBkaXJzW3JlbGF0aXZlXSA9IGRpcjsKICAgICAgfQogICAgICByZXR1cm4gYWNjOwogICAgfSwge30pOwoKICAgIC8vICAgY29uc29sZS5sb2coJ2Rpcm1hcCcsIGRpcm1hcCk7CiAgICBpZighbmFtZXMpIG5hbWVzID0gT2JqZWN0LmtleXMoZGlybWFwKTsKICAgIGNvbnNvbGUubG9nKCduYW1lcycsIG5hbWVzLmxlbmd0aCk7CiAgICByZXR1cm4gUHJvbWlzZS5hbGwoCiAgICAgIG5hbWVzCiAgICAgICAgLy8ubWFwKGVudHJ5ID0+IGRpcnNbZW50cnldICsnLycrZW50cnkpCiAgICAgICAgLnJlZHVjZSgoYWNjLCBmaWxlKSA9PiB7CiAgICAgICAgICBsZXQgZGlyID0gZGlyc1tmaWxlXTsKICAgICAgICAgIGxldCBhYnMgPSBkaXIgKyAnLycgKyBmaWxlOwogICAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25zID8gZGVzY01hcChmaWxlKSA6IGRlc2NNYXAuZ2V0KGZpbGUpOwogICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnZGVzY01hcDonLCB1dGlsLmluc3BlY3QoZGVzY01hcCwgeyBkZXB0aDogMSB9KSk7CiAgICAgICAgICBsZXQgb2JqID0gewogICAgICAgICAgICBuYW1lOiBmaWxlLAogICAgICAgICAgICAvL2ZpbGUsCiAgICAgICAgICAgIGRpcjogZGlyc1tmaWxlXQogICAgICAgICAgfTsKICAgICAgICAgIGlmKHR5cGVvZiBkZXNjcmlwdGlvbiA9PSAnc3RyaW5nJykgb2JqLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247CiAgICAgICAgICBhY2MucHVzaCgKICAgICAgICAgICAgZnNQcm9taXNlcwogICAgICAgICAgICAgIC5zdGF0KGFicykKICAgICAgICAgICAgICAudGhlbigoeyBjdGltZSwgbXRpbWUsIG1vZGUsIHNpemUgfSkgPT4KICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7CiAgICAgICAgICAgICAgICAgIG10aW1lOiB0b1VuaXhUaW1lKG10aW1lKSwKICAgICAgICAgICAgICAgICAgdGltZTogdG9Vbml4VGltZShjdGltZSksCiAgICAgICAgICAgICAgICAgIG1vZGU6IGAwJHsobW9kZSAmIDB4MDlmZikudG9TdHJpbmcoOCl9YCwKICAgICAgICAgICAgICAgICAgc2l6ZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7fSkKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgIH0sIFtdKQogICAgKS50aGVuKGEgPT4gYS5maWx0ZXIoaSA9PiBpICE9IG51bGwpKTsKICB9CgogIGZ1bmN0aW9uIEZpbGVzVVJMcyhsaXN0KSB7CiAgICBpZihsaXN0Lmxlbmd0aCA9PSAwKSByZXR1cm4gbnVsbDsKCiAgICBjb25zdCBiYXNlX3VybCA9IGxpc3RbMF0ucmVwbGFjZSgvXC9bXlwvXSokLywgJycpOwogICAgY29uc3QgZmlsZXMgPSBsaXN0Lm1hcCh1cmwgPT4gdXJsLnJlcGxhY2UoLy4qXC8vZywgJycpKTsKICAgIHJldHVybiB7IGJhc2VfdXJsLCBmaWxlcyB9OwogIH0KICAvL2FwcC51c2UoIi9zZXJpYWxwb3J0IiwgcmVtb3RlU2VyaWFsUG9ydC5odHRwKHsgdmVyYm9zZTogdHJ1ZSB9KSk7CgogIGFwcC5nZXQoL1wvbGlzdC1zZXJpYWwvLCBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IGxpc3QgPSBhd2FpdCBTZXJpYWxQb3J0Lmxpc3QoKTsKCiAgICByZXMuanNvbihsaXN0LmZpbHRlcihwb3J0ID0+IFsnbWFudWZhY3R1cmVyJywgJ3BucElkJywgJ3ZlbmRvcklkJywgJ3Byb2R1Y3RJZCddLnNvbWUoa2V5ID0+IHBvcnRba2V5XSkpKTsKICB9KTsKCiAgYXBwLndzKCcvc2VyaWFsJywgYXN5bmMgKHdzLCByZXEpID0+IHsKICAgIGNvbnN0IHsgcG9ydCB9ID0gcmVxLmJvZHk7CiAgICBjb25zb2xlLmRlYnVnKCdPYmplY3Qua2V5cyhyZXEpJywgT2JqZWN0LmtleXMocmVxKSk7CgogICAgY29uc3QgZHVwbGV4ID0gV2ViU29ja2V0LmNyZWF0ZVdlYlNvY2tldFN0cmVhbSh3cywgeyBlbmNvZGluZzogJ3V0ZjgnIH0pOwoKICAgIGxldCBzZXJpYWwgPSBuZXcgU2VyaWFsU3RyZWFtKHBvcnQgfHwgJy9kZXYvdG50MScpOwoKICAgIGR1cGxleC5vbignZGF0YScsIGFzeW5jIGRhdGEgPT4gewogICAgICBkYXRhID0gZGF0YSArICcnICsgJ1xyXG4nOwoKICAgICAgY29uc29sZS5kZWJ1Zygnd3MgLT4gc2VyaWFsOicsIGVzY2FwZShkYXRhKSk7CgogICAgICBzZXJpYWwud3JpdGUoZGF0YSk7CiAgICAgIHNlcmlhbC5mbHVzaCgpOwogICAgfSk7CgogICAgc2VyaWFsLm9uKCdkYXRhJywgYXN5bmMgZGF0YSA9PiB7CiAgICAgIGRhdGEgPSAoZGF0YSArICcnKS5yZXBsYWNlKC9ccj9cbj8kLywgJycpOwoKICAgICAgY29uc29sZS5kZWJ1Zygnc2VyaWFsIC0+IHdzOicsIGVzY2FwZShkYXRhKSk7CiAgICAgIGR1cGxleC53cml0ZShkYXRhKTsKICAgIH0pOwoKICAgIGNvbnNvbGUuZGVidWcoJ3dlYnNvY2tldDonLCBnZXRNZXRob2RzKHdzLCBJbmZpbml0eSwgMCkpOwogIH0pOwoKICBhcHAucG9zdCgvXC9zZXJpYWwvLCBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxOwogICAgY29uc3QgeyBwb3J0IH0gPSBib2R5OwogIH0pOwogIGNvbnN0IGNvbmZpZ0ZpbGUgPSAnY29uZmlnLmpzb24nOwogIGNvbnN0IHNhZmVTdGF0ID0gdHJ5RnVuY3Rpb24oCiAgICBmID0+IGZpbGVzeXN0ZW0uc3RhdChmKSwKICAgIHN0ID0+IHN0LAogICAgKCkgPT4ge30KICApOwoKICBhcHAuZ2V0KC9cL2NvbmZpZy8sIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgbGV0IHN0ciA9ICcnLAogICAgICBkYXRhID0ge30sCiAgICAgIHRpbWUgPSAwOwogICAgdHJ5Q2F0Y2goCiAgICAgICgpID0+IGZpbGVzeXN0ZW0ucmVhZEZpbGVTeW5jKGNvbmZpZ0ZpbGUpLAogICAgICBjID0+IHsKICAgICAgICBzdHIgPSBjOwogICAgICAgIGxldCBzdGF0ID0gc2FmZVN0YXQoY29uZmlnRmlsZSk7CiAgICAgICAgY29uc29sZS5sb2coJ3N0YXQ6Jywgc3RhdCk7CiAgICAgICAgaWYoaXNPYmplY3Qoc3RhdC5tdGltZSkpIHRpbWUgPSBzdGF0Lm10aW1lLmdldFRpbWUoKTsKICAgICAgfSwKICAgICAgKCkgPT4gKHN0ciA9ICd7fScpCiAgICApOwogICAgbGV0IGNvbmZpZyA9IHRyeUNhdGNoKAogICAgICAoKSA9PiBKU09OLnBhcnNlKHN0ciksCiAgICAgIG8gPT4gbywKICAgICAgKCkgPT4gKHt9KQogICAgKTsKICAgIGNvbnNvbGUubG9nKCdjb25maWc6JywgY29uZmlnKTsKCiAgICByZXMuanNvbih7IGNvbmZpZywgdGltZSwgaGFzaDogaGFzaFN0cmluZyhzdHIpIH0pOwogIH0pOwogIGFwcC5wb3N0KC9cL2NvbmZpZy8sIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyBib2R5IH0gPSByZXE7CiAgICBsZXQgdGV4dCA9IGJvZHkudG9TdHJpbmcoKTsKICAgIGNvbnNvbGUubG9nKCd0ZXh0OicsIHRleHQpOwogICAgbGV0IHJldCA9IGZpbGVzeXN0ZW0ud3JpdGVGaWxlKGNvbmZpZ0ZpbGUsIHRleHQpOwogICAgY29uc29sZS5sb2coJ3JldDonLCByZXQpOwogICAgbGV0IHN0YXQgPSBzYWZlU3RhdChjb25maWdGaWxlKTsKICAgIHJlcy5qc29uKHsKICAgICAgc2l6ZTogcmV0LAogICAgICB0aW1lOiBzdGF0Lm10aW1lLmdldFRpbWUoKSwKICAgICAgaGFzaDogaGFzaFN0cmluZyh0ZXh0KQogICAgfSk7CiAgfSk7CgogIGFwcC5nZXQoL1wvZ2l0aHViLywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICB0cnlDYXRjaCgKICAgICAgYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxOwogICAgICAgIGNvbnNvbGUubG9nKCdyZXEnLCBPYmplY3Qua2V5cyhyZXEpKTsKICAgICAgICBjb25zb2xlLmxvZygncmVxLnVybCcsIHJlcS51cmwpOwogICAgICAgIGNvbnN0IGxvY2F0aW9uID0gcmVxLnVybCArICcnOyAvLyBVdGlsLnBhcnNlVVJMKHJlcS51cmwpOwogICAgICAgIC8vL2NvbnN0IHsgbG9jYXRpb24sIHF1ZXJ5IH0gPSB1cmw7CiAgICAgICAgY29uc3QgeyBxdWVyeSB9ID0gcmVxOwogICAgICAgIGxldCBhcmdzID0gbG9jYXRpb24uc3BsaXQoL1wvL2cpLmZpbHRlcihwID0+ICEvKF5naXRodWIkfF4kKS8udGVzdChwKSk7CiAgICAgICAgbGV0IG9wdGlvbnMgPSB7IC8qLi4ucXVlcnksKi8gLi4uYm9keSB9OwoKICAgICAgICBpZihhcmdzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGNvbnN0IFtvd25lciwgcmVwbywgZGlyLCBmaWx0ZXJdID0gYXJnczsKICAgICAgICAgIHdlYWtBc3NpZ24ob3B0aW9ucywgeyBvd25lciwgcmVwbywgZGlyLCBmaWx0ZXIgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZyhgR0VUICR7bG9jYXRpb259YCwgeyBhcmdzLCBxdWVyeSwgb3B0aW9ucyB9KTsKCiAgICAgICAgbGV0IHJlc3VsdDsKICAgICAgICBjb25zdCB7IG93bmVyLCByZXBvLCBkaXIsIGZpbHRlciwgdGFiLCBhZnRlciB9ID0gb3B0aW9uczsKICAgICAgICBjb25zb2xlLmxvZygnZ2l0aHViJywgeyBvd25lciwgcmVwbywgZGlyIH0pOwoKICAgICAgICBpZihvd25lciAmJiByZXBvICYmIGRpcikgcmVzdWx0ID0gYXdhaXQgR2l0aHViTGlzdENvbnRlbnRzKG93bmVyLCByZXBvLCBkaXIsIGZpbHRlciAmJiBuZXcgUmVnRXhwKGZpbHRlciwgJ2cnKSk7CiAgICAgICAgLyppZihvd25lciAmJiAodGFiIHx8IGFmdGVyKSkqLyBlbHNlIHsKICAgICAgICAgIGxldCBwcm94eVVybCA9IFV0aWwubWFrZVVSTCh7CiAgICAgICAgICAgIC4uLnVybCwKICAgICAgICAgICAgcHJvdG9jb2w6ICdodHRwcycsCiAgICAgICAgICAgIGhvc3Q6ICdnaXRodWIuY29tJywKICAgICAgICAgICAgbG9jYXRpb246IFsnJywgLi4uYXJnc10uam9pbignLycpCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKGBQUk9YWSAke3Byb3h5VXJsfWApOwoKICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTsKICAgICAgICAgIGxldCB0eXBlID0gcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ107CgogICAgICAgICAgY29uc29sZS5sb2coYFJFU1BPTlNFYCwgcmVzcG9uc2UudXJsLCB0eXBlKTsKICAgICAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOwogICAgICAgICAgcmVzLnNlbmQoZGF0YSk7CiAgICAgICAgICAvLywgMjAwLCB7IGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6IHR5cGUgfX0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzLmpzb24oRmlsZXNVUkxzKHJlc3VsdC5tYXAoZmlsZSA9PiBmaWxlLmRvd25sb2FkX3VybCkpKTsKICAgICAgfSwKICAgICAgKCkgPT4ge30sCiAgICAgIGVycm9yID0+IGNvbnNvbGUubG9nKCdFeGNlcHRpb246JywgZXJyb3IubWVzc2FnZSArICdcbicgKyBlcnJvci5zdGFjaykKICAgICk7CiAgfSk7CgogIGFwcC5wb3N0KC9cL2dpdGh1Yi4qLywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCB7IGJvZHkgfSA9IHJlcTsKICAgIGxldCByZXN1bHQ7CiAgICBjb25zdCB7IG93bmVyLCByZXBvLCBkaXIsIGZpbHRlciB9ID0gYm9keTsKICAgIGNvbnNvbGUubG9nKCdQT1NUIGdpdGh1YicsIHsgb3duZXIsIHJlcG8sIGRpciwgZmlsdGVyIH0pOwoKICAgIHJlcy5qc29uKAogICAgICBhd2FpdCBHaXRodWJMaXN0Q29udGVudHMob3duZXIsIHJlcG8sIGRpciwgZmlsdGVyICYmIG5ldyBSZWdFeHAoZmlsdGVyLCAnZycpKQogICAgICAgIC50aGVuKHJlc3VsdCA9PiBGaWxlc1VSTHMocmVzdWx0Lm1hcChmaWxlID0+IGZpbGUuZG93bmxvYWRfdXJsKSkpCiAgICAgICAgLmNhdGNoKGVycm9yID0+ICh7IGVycm9yIH0pKQogICAgKTsKICB9KTsKCiAgYXBwLmdldCgvXlwvIXVybHMvLCBhc3luYyAocmVxLCByZXMpID0+IHJlcy5qc29uKHsgZmlsZXM6IFsuLi5maWxlc10uc29ydCgpIH0pKTsKICBhcHAuZ2V0KC9eXC9maWxlcy8sIGFzeW5jIChyZXEsIHJlcykgPT4gcmVzLmpzb24oeyBmaWxlczogYXdhaXQgR2V0RmlsZXNMaXN0KCkgfSkpOwogIGFwcC5wb3N0KC9eXC8oZmlsZXN8bGlzdCkoLmh0bWx8KS8sIGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyBib2R5IH0gPSByZXE7CiAgICBsZXQgeyBmaWx0ZXIgPSAnLionLCBkZXNjcmlwdGlvbnMsIG5hbWVzIH0gPSBib2R5OwogICAgbGV0IG9wdHMgPSB7IGZpbHRlciB9OwogICAgaWYoZGVzY3JpcHRpb25zKSBvcHRzLmRlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9uczsKCiAgICBpZihuYW1lcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGlmKHR5cGVvZiBuYW1lcyA9PSAnc3RyaW5nJykgbmFtZXMgPSBuYW1lcy5zcGxpdCgvXG4vZyk7CiAgICAgIGlmKEFycmF5LmlzQXJyYXkobmFtZXMpKSBuYW1lcyA9IG5hbWVzLm1hcChuYW1lID0+IG5hbWUucmVwbGFjZSgvLipcLy9nLCAnJykpOwogICAgICBvcHRzLm5hbWVzID0gbmFtZXM7CiAgICB9CiAgICBsZXQgZmlsZXMgPSBhd2FpdCBHZXRGaWxlc0xpc3QoJ3RtcCcsIG9wdHMpOwogICAgY29uc29sZS5sb2coJ1BPU1QgZmlsZXMnLCB1dGlsLmluc3BlY3QoZmlsZXMsIHsgYnJlYWtMZW5ndGg6IEluZmluaXR5LCBjb2xvcnM6IHRydWUsIG1heEFycmF5TGVuZ3RoOiAxMCwgY29tcGFjdDogMSB9KSk7CiAgICByZXMuanNvbih7CiAgICAgIGZpbGVzCiAgICB9KTsKICB9KTsKCiAgYXBwLmdldCgnL2luZGV4Lmh0bWwnLCBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGxldCBkYXRhID0gYXdhaXQgZnNQcm9taXNlcy5yZWFkRmlsZShwYXRoLmpvaW4ocCwgJ2luZGV4Lmh0bWwnKSk7CiAgICByZXMuc2VuZChkYXRhLnRvU3RyaW5nKCkucmVwbGFjZSgvPFRTPi9nLCB1bml4VGltZSgpICsgJycpKTsKICB9KTsKICBhcHAuZ2V0KCcvY29udG91cnMnLCBSZXF1ZXN0Q29udG91cnMpOwogIGFwcC5wb3N0KCcvY29udG91cnMnLCBSZXF1ZXN0Q29udG91cnMpOwoKICBhcHAucG9zdCgnL3NhdmUnLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsKICAgIC8vICAgY29uc3QgZmlsZW5hbWUgPSAocmVxLmhlYWRlcnNbJ2NvbnRlbnQtZGlzcG9zaXRpb24nXXx8JycpLnJlcGxhY2UobmV3IFJlZ0V4cCgnLioiKFteIl0qKSIuKicsJ2cnKSwgJyQxJykgfHwgJ291dHB1dC5zdmcnOwogICAgLyogICAgY29uc3QgZmlsZW5hbWUgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3RtcCcsICd1cGxvYWQtJyArIHRvVW5peFRpbWUoRGF0ZS5ub3coKSkgKyAnLnR4dCcpOwogICAgbGV0IG91dHB1dCA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGZpbGVuYW1lLCB7IGF1dG9DbG9zZTogdHJ1ZSwgZW1pdENsb3NlOiB0cnVlIH0pOwogICAgbGV0IHMgPSByZXEucGlwZShvdXRwdXQpOwogICAgY29uc29sZS5sb2coJ3MnLCBjbGFzc05hbWUocykpOwogICAgbGV0IGRhdGE7CiAgICBzLm9uKCdjbG9zZScsICgpID0+IHdhaXRGb3IoMTAwMCkudGhlbigoKSA9PiBlbmQoKSkpOwoKICAgIC8vICByZXEub24oJ2VuZCcsICgpID0+IHdhaXRGb3IoNTAwKS50aGVuKCgpID0+IGVuZCgpKSk7CgogICAgZnVuY3Rpb24gZW5kKCkgewogICAgICBkYXRhID0gZnMucmVhZEZpbGVTeW5jKGZpbGVuYW1lKS50b1N0cmluZygpOwogICAgICBjb25zb2xlLmxvZygncmVxIGVuZCcsIHsgZGF0YSB9KTsKICAgICAgcmVzLmVuZChkYXRhICsgJ1xuXG5VcGxvYWQgY29tcGxldGUnKTsKICAgICAgbmV4dCgpOwogICAgfQoqLwoKICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxOwogICAgY29uc29sZS5sb2coJ3JlcS5oZWFkZXJzOicsIHJlcS5oZWFkZXJzKTsKICAgIGNvbnNvbGUubG9nKCdib2R5OicsIGFiYnJldmlhdGUoYm9keSksIGNsYXNzTmFtZShib2R5KSwgaW5zcGVjdChib2R5KSk7CiAgICBjb25zb2xlLmxvZygnc2F2ZSBib2R5OicsIHR5cGVvZiBib2R5ID09ICdzdHJpbmcnID8gYWJicmV2aWF0ZShib2R5LCAxMDApIDogYm9keSk7CiAgICBsZXQgc3QsCiAgICAgIGVyciwKICAgICAgZmlsZW5hbWUgPSAocmVxLmhlYWRlcnNbJ2NvbnRlbnQtZGlzcG9zaXRpb24nXSB8fCAnJykucmVwbGFjZShuZXcgUmVnRXhwKCcuKiIoW14iXSopIi4qJywgJ2cnKSwgJyQxJykgfHwgJ291dHB1dC5zdmcnOwogICAgZmlsZW5hbWUgPSAndG1wLycgKyBmaWxlbmFtZS5yZXBsYWNlKC9edG1wXC8vLCAnJyk7CiAgICBhd2FpdCBmc1Byb21pc2VzCiAgICAgIC53cml0ZUZpbGUoZmlsZW5hbWUsIGJvZHksIHsgbW9kZTogMHgwMTgwLCBmbGFnOiAndycgfSkKICAgICAgLnRoZW4oKCkgPT4gKHN0ID0gZnMuc3RhdFN5bmMoZmlsZW5hbWUpKSkKICAgICAgLmNhdGNoKGVycm9yID0+IChlcnIgPSBlcnJvcikpOwoKICAgIGlmKGVycikgewogICAgICBjb25zb2xlLmxvZygnc2F2ZSBlcnJvcjonLCBlcnIpOwogICAgICByZXMuanNvbihlcnIpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coJ3NhdmVkOicsIGZpbGVuYW1lLCBgJHtzdC5zaXplfSBieXRlc2ApOwogICAgICByZXMuanNvbih7IHNpemU6IHN0LnNpemUsIGZpbGVuYW1lIH0pOwogICAgfQogIH0pOwoKICBhcHAud3MoJy93cycsIFNvY2tldC5lbmRwb2ludCk7CiAgYXBwLndzKCcvLndlYnNvY2tldCcsIFNvY2tldC5lbmRwb2ludCk7CiAgYXBwLndzKCcvd3MvLndlYnNvY2tldCcsIFNvY2tldC5lbmRwb2ludCk7CgogIGFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHsKICAgIHJlcy5yZWRpcmVjdCgzMDIsICcvaW5kZXguaHRtbCcpOwogIH0pOwoKICBhcHAubGlzdGVuKHBvcnQsICgpID0+IHsKICAgIGNvbnNvbGUubG9nKGBSZWFkeSBhdCBodHRwOi8vMTI3LjAuMC4xOiR7cG9ydH1gKTsKICB9KTsKfQovKgp0cnkgewogIGF3YWl0IG1haW4oKTsKfSBjYXRjaChlcnIpIHsKICBVdGlsLnB1dEVycm9yKGVycik7Cn0qLwptYWluKC4uLnByb2Nlc3MuYXJndi5zbGljZSgxKSk7CgAAAAAAAAAAdmwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8zsAAAAAAADzOwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/util.js",
			"redo_stack":
			[
				[
					247,
					1,
					"paste",
					null,
					"AQAAADT6AQAAAAAANPoBAAAAAADoAAAALnJlcGxhY2UobmV3IFJlZ0V4cCgnJihbXjtdKyk7JywgJ2dtJyksIChtYXRjaCwgZW50aXR5KSA9PiB7CiAgICBhbXA6ICcmJywKICAgIGFwb3M6ICInIiwKICAgICcjeDI3JzogIiciLAogICAgJyN4MkYnOiAnLycsCiAgICAnIzM5JzogIiciLAogICAgJyM0Nyc6ICcvJywKICAgIGx0OiAnPCcsCiAgICBndDogJz4nLAogICAgbmJzcDogJyAnLAogICAgcXVvdDogJyInCiAgfVtlbnRpdHldIHx8IG1hdGNoKQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAc+wEAAAAAABz7AQAAAAAAAAAAAAAA8L8"
				],
				[
					246,
					1,
					"cut",
					null,
					"AQAAADT6AQAAAAAAHPsBAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA0+gEAAAAAADT6AQAAAAAAAAAAAAAA8L8"
				],
				[
					223,
					1,
					"cut",
					null,
					"AQAAACf6AQAAAAAAOvoBAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAn+gEAAAAAACf6AQAAAAAAAAAAAAAA8L8"
				],
				[
					196,
					1,
					"paste",
					null,
					"AgAAAB37AQAAAAAAJfsBAAAAAAAAAAAAgvoBAAAAAACC+gEAAAAAAJsAAAB7CiAgICBhbXA6ICcmJywKICAgIGFwb3M6ICInIiwKICAgICcjeDI3JzogIiciLAogICAgJyN4MkYnOiAnLycsCiAgICAnIzM5JzogIiciLAogICAgJyM0Nyc6ICcvJywKICAgIGx0OiAnPCcsCiAgICBndDogJz4nLAogICAgbmJzcDogJyAnLAogICAgcXVvdDogJyInCiAgfQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAd+wEAAAAAAB37AQAAAAAAAAAAAAAA8L8"
				],
				[
					191,
					1,
					"cut",
					null,
					"AQAAADj6AQAAAAAA0/oBAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA4+gEAAAAAADj6AQAAAAAAAAAAAAAA8L8"
				]
			],
			"settings":
			{
				"buffer_size": 185739,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					77,
					1,
					"cut",
					null,
					"AQAAANPeAQAAAAAA094BAAAAAAAwAAAAKHggPDwgbikgfCAoKHggPj4gKDMyIC0gbikpICYgfigoLTEgPj4gbikgPDwgbikp",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADT3gEAAAAAAAPfAQAAAAAAAAAAAAAA8L8"
				],
				[
					78,
					1,
					"paste",
					null,
					"AQAAANPeAQAAAAAAA98BAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADT3gEAAAAAANPeAQAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "string-helpers.js",
			"settings":
			{
				"buffer_size": 4518,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					9,
					1,
					"paste",
					null,
					"AQAAAPMOAAAAAAAAUxAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzDgAAAAAAAPMOAAAAAAAAAAAAAAAA8L8"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "function"
					},
					"CAAAAPMOAAAAAAAA9A4AAAAAAAAAAAAA9A4AAAAAAAD1DgAAAAAAAAAAAAD1DgAAAAAAAPYOAAAAAAAAAAAAAPYOAAAAAAAA9w4AAAAAAAAAAAAA9w4AAAAAAAD4DgAAAAAAAAAAAAD4DgAAAAAAAPkOAAAAAAAAAAAAAPkOAAAAAAAA+g4AAAAAAAAAAAAA+g4AAAAAAAD7DgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzDgAAAAAAAPMOAAAAAAAAAAAAAAAAAAA"
				],
				[
					14,
					1,
					"insert",
					{
						"characters": " W"
					},
					"AgAAAPsOAAAAAAAA/A4AAAAAAAAAAAAA/A4AAAAAAAD9DgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD7DgAAAAAAAPsOAAAAAAAAAAAAAAAA8L8"
				],
				[
					15,
					1,
					"left_delete",
					null,
					"AQAAAPwOAAAAAAAA/A4AAAAAAAABAAAAVw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9DgAAAAAAAP0OAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "wordWrap"
					},
					"CAAAAPwOAAAAAAAA/Q4AAAAAAAAAAAAA/Q4AAAAAAAD+DgAAAAAAAAAAAAD+DgAAAAAAAP8OAAAAAAAAAAAAAP8OAAAAAAAAAA8AAAAAAAAAAAAAAA8AAAAAAAABDwAAAAAAAAAAAAABDwAAAAAAAAIPAAAAAAAAAAAAAAIPAAAAAAAAAw8AAAAAAAAAAAAAAw8AAAAAAAAEDwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8DgAAAAAAAPwOAAAAAAAAAAAAAAAA8L8"
				],
				[
					20,
					2,
					"left_delete",
					null,
					"AgAAAB0PAAAAAAAAHQ8AAAAAAAABAAAAPhwPAAAAAAAAHA8AAAAAAAABAAAAPQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAeDwAAAAAAAB4PAAAAAAAAAAAAAAAA8L8"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "export"
					},
					"BgAAAPMOAAAAAAAA9A4AAAAAAAAAAAAA9A4AAAAAAAD1DgAAAAAAAAAAAAD1DgAAAAAAAPYOAAAAAAAAAAAAAPYOAAAAAAAA9w4AAAAAAAAAAAAA9w4AAAAAAAD4DgAAAAAAAAAAAAD4DgAAAAAAAPkOAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzDgAAAAAAAPMOAAAAAAAAAAAAAAAA8L8"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPkOAAAAAAAA+g4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD5DgAAAAAAAPkOAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAPIOAAAAAAAA8w4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyDgAAAAAAAPIOAAAAAAAAAAAAAAAATEA"
				],
				[
					29,
					1,
					"ensure_newline_at_eof",
					null,
					"AQAAAGoQAAAAAAAAaxAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD0DgAAAAAAAPQOAAAAAAAAAAAAAAAA8L8"
				],
				[
					38,
					1,
					"left_delete",
					null,
					"AQAAAGkQAAAAAAAAaRAAAAAAAAABAAAAOw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqEAAAAAAAAGoQAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGkQAAAAAAAAahAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpEAAAAAAAAGkQAAAAAAAAAAAAAAAA8L8"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAAGoQAAAAAAAAaxAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqEAAAAAAAAGoQAAAAAAAAAAAAAAAA8L8"
				],
				[
					43,
					1,
					"left_delete",
					null,
					"AQAAAGoQAAAAAAAAahAAAAAAAAABAAAAfQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrEAAAAAAAAGsQAAAAAAAAAAAAAAAA8L8"
				],
				[
					50,
					2,
					"right_delete",
					null,
					"AgAAACgQAAAAAAAAKBAAAAAAAAAEAAAAVXRpbCgQAAAAAAAAKBAAAAAAAAABAAAALg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAoEAAAAAAAACwQAAAAAAAAAAAAAAAA8L8"
				],
				[
					67,
					1,
					"paste",
					null,
					"AQAAAGYQAAAAAAAAixEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABmEAAAAAAAAGYQAAAAAAAAAAAAAAAAAAA"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "export"
					},
					"BgAAAGYQAAAAAAAAZxAAAAAAAAAAAAAAZxAAAAAAAABoEAAAAAAAAAAAAABoEAAAAAAAAGkQAAAAAAAAAAAAAGkQAAAAAAAAahAAAAAAAAAAAAAAahAAAAAAAABrEAAAAAAAAAAAAABrEAAAAAAAAGwQAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABmEAAAAAAAAGYQAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGwQAAAAAAAAbRAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABsEAAAAAAAAGwQAAAAAAAAAAAAAAAA8L8"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": " decodeH"
					},
					"CAAAAHUQAAAAAAAAdhAAAAAAAAAAAAAAdhAAAAAAAAB3EAAAAAAAAAAAAAB3EAAAAAAAAHgQAAAAAAAAAAAAAHgQAAAAAAAAeRAAAAAAAAAAAAAAeRAAAAAAAAB6EAAAAAAAAAAAAAB6EAAAAAAAAHsQAAAAAAAAAAAAAHsQAAAAAAAAfBAAAAAAAAAAAAAAfBAAAAAAAAB9EAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1EAAAAAAAAHUQAAAAAAAAAAAAAAAA8L8"
				],
				[
					79,
					1,
					"paste",
					null,
					"AgAAAHYQAAAAAAAAiBAAAAAAAAAAAAAAiBAAAAAAAACIEAAAAAAAAAcAAABkZWNvZGVI",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB2EAAAAAAAAH0QAAAAAAAAAAAAAAAA8L8"
				],
				[
					80,
					1,
					"ensure_newline_at_eof",
					null,
					"AQAAAKURAAAAAAAAphEAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACIEAAAAAAAAIgQAAAAAAAAAAAAAAAA8L8"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"out",
				"Browse Mode: Outline (Right)"
			],
			[
				"outline",
				"Browse Mode: Outline (Right)"
			],
			[
				"prettier",
				"JsPrettier: Format Code"
			],
			[
				"pre",
				"Project: Edit Project"
			],
			[
				"prett",
				"JsPrettier: Format Code"
			],
			[
				"",
				"Auto indent"
			],
			[
				"list pack",
				"Package Control: List Packages"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"edit ",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"edit",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"remove",
				"Package Control: Remove Package"
			],
			[
				"outli",
				"Browse Mode: Outline (Right)"
			],
			[
				"debugger",
				"Preferences: Debugger Settings"
			],
			[
				"add re",
				"Package Control: Add Repository"
			],
			[
				"scheme",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"outlin",
				"Browse Mode: Outline (Right)"
			],
			[
				"INSTALL",
				"Package Control: Install Package"
			],
			[
				"disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: ",
				"Package Control: Disable Package"
			],
			[
				"adap",
				"Debugger: Install Adapters"
			],
			[
				"install ada",
				"Debugger: Install Adapters"
			],
			[
				"adapter",
				"Debugger: Install Adapters"
			],
			[
				"debug",
				"Debugger: Install Adapters"
			],
			[
				"Package Control: remove",
				"Package Control: Remove Package"
			],
			[
				"debu",
				"Debugger: Install Adapters"
			],
			[
				"instal",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 289.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/roman/Projects/plot-cv",
		"/home/roman/Projects/plot-cv/leafletjs.com",
		"/home/roman/Projects/plot-cv/leafletjs.com/SlavaUkraini"
	],
	"file_history":
	[
		"/home/roman/Projects/plot-cv/lib/util.js",
		"/home/roman/Projects/plot-cv/lib/xml.js",
		"/home/roman/Projects/plot-cv/lib/proxy/observableMembrane.js",
		"/home/roman/Projects/plot-cv/lib/xml/util.js",
		"/home/roman/Projects/plot-cv/lib/xml/xpath.js",
		"/home/roman/Projects/plot-cv/lib/json/path.js",
		"/home/roman/Projects/plot-cv/lib/json/pathMapper.js",
		"/home/roman/Projects/plot-cv/lib/dom/preactComponent.js",
		"/home/roman/Projects/plot-cv/quickjs/quickjs-libc.c",
		"/home/roman/Projects/plot-cv/lib/geom/trbl.js",
		"/home/roman/Projects/plot-cv/lib/geom/size.js",
		"/home/roman/Projects/plot-cv/lib/geom/point.js",
		"/home/roman/Projects/plot-cv/lib/geom/polyline.js",
		"/home/roman/Projects/plot-cv/lib/geom/lineList.js",
		"/home/roman/Projects/plot-cv/lib/geom.js",
		"/home/roman/Projects/plot-cv/lib/misc.js",
		"/home/roman/Projects/plot-cv/lib/geom/rect.js",
		"/home/roman/Projects/plot-cv/token-rules.js",
		"/home/roman/Projects/plot-cv/param.js",
		"/home/roman/Projects/plot-cv/lib/jpeg.js",
		"/home/roman/Projects/plot-cv/test-opencv.js",
		"/home/roman/Projects/plot-cv/test-libbpg.js",
		"/home/roman/Projects/plot-cv/test-kolorwheel.js",
		"/home/roman/Projects/plot-cv/test-jpg.js",
		"/home/roman/Projects/plot-cv/upload-server.js",
		"/home/roman/Projects/plot-cv/lib/eagle/project.js",
		"/home/roman/Projects/plot-cv/lib/pointer.js",
		"/home/roman/Projects/plot-cv/lib/eagle/svgRenderer.js",
		"/home/roman/Projects/plot-cv/lib/eagle/nodeMap.js",
		"/home/roman/Projects/plot-cv/lib/eagle/nodeList.js",
		"/home/roman/Projects/plot-cv/lib/eagle/node.js",
		"/home/roman/Projects/plot-cv/lib/eagle/common.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/environment.js",
		"/home/roman/Projects/plot-cv/lib/eventEmitter.js",
		"/home/roman/Projects/plot-cv/lib/devtools.js",
		"/home/roman/Projects/plot-cv/lib/gcode/parser.js",
		"/home/roman/Projects/plot-cv/lib/dom/svg.js",
		"/home/roman/Projects/plot-cv/lib/log.js",
		"/home/roman/Projects/plot-cv/lib/dom/cache.js",
		"/home/roman/Projects/plot-cv/lib/autoStore.js",
		"/home/roman/Projects/plot-cv/test-description.js",
		"/home/roman/Projects/plot-cv/test-features2d.js",
		"/home/roman/Projects/plot-cv/test-cv.js",
		"/home/roman/Projects/plot-cv/test-pointlist.js",
		"/home/roman/Projects/plot-cv/draw-utils.js",
		"/home/roman/Projects/plot-cv/gl.js",
		"/home/roman/Projects/plot-cv/test-nanovg.js",
		"/home/roman/Projects/plot-cv/test-wasm.js",
		"/home/roman/Projects/plot-cv/test-svgpath.js",
		"/home/roman/Projects/plot-cv/test-proxy.js",
		"/home/roman/Projects/plot-cv/test-path.js",
		"/home/roman/Projects/plot-cv/tokenize.js",
		"/home/roman/Projects/plot-cv/lib/clipper-lib.js",
		"/home/roman/Projects/plot-cv/lib/clipper.js",
		"/home/roman/Projects/plot-cv/test-coverage.js",
		"/home/roman/Projects/plot-cv/test-console.js",
		"/home/roman/Projects/plot-cv/test-clipper.js",
		"/home/roman/Projects/plot-cv/dump-ast.js",
		"/home/roman/Projects/plot-cv/test-clexer.js",
		"/home/roman/Projects/plot-cv/test-childprocess.js",
		"/home/roman/Projects/plot-cv/test-call.js",
		"/home/roman/Projects/plot-cv/test-bitset.js",
		"/home/roman/Projects/plot-cv/test-autoplacer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/utils.c",
		"/home/roman/Projects/plot-cv/test-membrane.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/interpreter.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/printer.js",
		"/home/roman/Projects/plot-cv/lib/hooks/useTrkl.js",
		"/home/roman/Projects/plot-cv/lib/json/treeObserver.js",
		"/home/roman/Projects/plot-cv/lib/color/rgba.js",
		"/home/roman/Projects/plot-cv/test-date.js",
		"/home/roman/Projects/plot-cv/test-debuggerprotocol.js",
		"/home/roman/Projects/plot-cv/test-dom.js",
		"/home/roman/Projects/plot-cv/test-export.js",
		"/home/roman/Projects/plot-cv/lib/eagle/renderer.js",
		"/home/roman/Projects/plot-cv/lib/eagle/renderUtils.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/text.js",
		"/home/roman/Projects/plot-cv/lib/geom/matrix.js",
		"/home/roman/Projects/plot-cv/lib/eagle/element.js",
		"/home/roman/Projects/plot-cv/lib/geom/transformation.js",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.c",
		"/home/roman/Projects/plot-cv/test-ast.js",
		"/home/roman/Projects/plot-cv/test-antlr.js",
		"/home/roman/Projects/plot-cv/test-alea.js",
		"/home/roman/Projects/plot-cv/test-util.js",
		"/home/roman/Projects/plot-cv/lib/swipeTracker.js",
		"/home/roman/Projects/plot-cv/lib/axios.js",
		"/home/roman/Projects/plot-cv/lib/iterator.js",
		"/home/roman/Projects/plot-cv/lib/sourceMap.js",
		"/home/roman/Projects/plot-cv/eagle-shell.js",
		"/home/roman/Projects/plot-cv/clang-ast.js",
		"/home/roman/Projects/plot-cv/lib/dom/css.js",
		"/home/roman/Projects/plot-cv/lib/c/commons.js",
		"/home/roman/Projects/plot-cv/lib/c/rules.js",
		"/home/roman/Projects/plot-cv/lib/lua.js",
		"/home/roman/Projects/plot-cv/lib/draw/colorMap.js",
		"/home/roman/Projects/plot-cv/lib/fetch.js",
		"/home/roman/Projects/plot-cv/lib/json/util.js",
		"/home/roman/Projects/plot-cv/lib/stream/writableStream.js",
		"/home/roman/Projects/plot-cv/lib/stream/transformStream.js",
		"/home/roman/Projects/plot-cv/lib/stream/utils.js",
		"/home/roman/Projects/plot-cv/lib/lazyInitializer.js",
		"/home/roman/Projects/plot-cv/lib/xml/parse.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/extendArray.js",
		"/home/roman/Projects/plot-cv/lib/geom/graph.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/resolve-imports.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-misc.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
		"/home/roman/Projects/plot-cv/eagle2svg.js",
		"/home/roman/Projects/plot-cv/lib/geom/bbox.js",
		"/home/roman/Projects/plot-cv/lib/svg/path-parser.js",
		"/home/roman/Projects/plot-cv/lib/svg/path.js",
		"/home/roman/Projects/plot-cv/miscFixed613.js",
		"/home/roman/Projects/plot-cv/lib/eagle/components/svg.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/xml-shell.js",
		"/home/roman/Projects/plot-cv/lib/geom/polygon.js",
		"/home/roman/Projects/plot-cv/lib/devpane.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/parser2.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/parser.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/token.js",
		"/home/roman/Projects/plot-cv/lib/ecmascript/estree.js",
		"/home/roman/Projects/plot-cv/xml2js.js",
		"/home/roman/Projects/plot-cv/webSocket.js",
		"/home/roman/Projects/plot-cv/test-websocket.js",
		"/home/roman/Projects/plot-cv/test-voronoi.js",
		"/home/roman/Projects/plot-cv/test-stack.js",
		"/home/roman/Projects/plot-cv/test-renderer.js"
	],
	"find":
	{
		"height": 38.0
	},
	"find_in_files":
	{
		"height": 142.0,
		"where_history":
		[
			"/home/roman/Projects/plot-cv,*.c,*.h,*.js",
			"/home/roman/Projects/plot-cv,*.js",
			"/home/roman/Projects/plot-cv,*.c,*.h,*.js",
			""
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"MutableXPath",
			"XPath",
			"xpath.js",
			"importRepl",
			"json",
			"/json",
			"8",
			"relative",
			"importReplace",
			"\\bjs\\b",
			"js",
			"unique",
			"GetReplaceMap",
			"ReadJSON",
			"io-help",
			"util",
			"\\.js",
			"\\$.js",
			"replace",
			"apply\\(",
			"deref",
			"findIndex",
			"\\.toPointer\\(",
			"getSiblings",
			"XPath",
			" Node,",
			"Node,",
			"ThenElse",
			"lastChild",
			" concat\\(",
			"concat =",
			"concat",
			"inspect",
			"inspect\\(",
			"'findD",
			"inspect\\(",
			"xml\\.",
			"xml.write",
			"xml",
			"className",
			"util'",
			"exit\\(",
			"getArgs",
			"equals\\(",
			"equals",
			"equalsd",
			"callMain",
			"ion hasGetSet",
			"hasGetSet",
			"remover",
			"decodeHTMLEntities",
			"misc.js",
			"isObject",
			"wordWrap",
			"word",
			"wordWrap =",
			"wordWrap",
			"isoDate",
			"misc.js",
			"FilesURLs",
			"ListContents",
			"ListCont",
			"query",
			"hashString",
			"Util\\.",
			"hashString",
			"matchAll",
			"Util\\.",
			"filterKeys",
			"Util\\.",
			"try",
			"Util\\.",
			"toSource",
			"Util\\.",
			"misc.js",
			", filter",
			"filter =",
			"filter\\(",
			"filter",
			"filter, ",
			"FetchCached",
			"Util.cachedFetch",
			"achedFetch",
			"fetch",
			"\\.caches",
			"cachedFetch",
			"getset",
			"getSet",
			"ZoomLog",
			"deriveGetSet",
			"rn this.store",
			"rn ",
			"keys\\(",
			"keys",
			"debounceAsync",
			"debounce",
			"ColoredText",
			"\\, ColoredText",
			"ColoredText",
			"colorCtor",
			"ColoredText",
			"text\\(",
			"\\b(text|concat)\\(",
			"text\\(",
			"concat\\(",
			"Util\\.(define|isObject|className)",
			"Util\\.",
			"text\\(",
			"export",
			"ansi\\(",
			"import.*\\bansi\\b",
			" concat\\(",
			"concat\\(",
			"text\\(",
			"(coloring|concat|ansi).*from.*common.js'",
			"from.*common.js'",
			"from.*common.js",
			"(concat|ansi|text)\\(",
			"coloring",
			"\\brpc\\b",
			"rpc\\b",
			"rpc\\.",
			"SyscallEr",
			"extendArray",
			"object2Array",
			"  ",
			"Object2Array",
			"pushUnique"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"",
			"debounce",
			"",
			"\\1",
			"functionName",
			"",
			"\\1",
			"functionName",
			"unique",
			"",
			"AddRule",
			"addRule\\('\\1',",
			"lexer\\.addRule\\('\\1',",
			"lexer\\.addRule\\(tokenRules\\['\\1'\\]\\,",
			"filesystem.\\1Sync(",
			"",
			"filesystem.\\1Sync(",
			"",
			"MakePoint",
			"",
			"define",
			"PointList\\.prototype",
			"};\\n\nPointList.",
			"}\\n\nfunction",
			"",
			"isObject",
			"roundTo",
			"define",
			"padding"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5635,
						"regions":
						{
						},
						"selection":
						[
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"current_file": "/home/roman/Projects/plot-cv/main.js",
							"function_name_status_row": -1,
							"outline_rename_mode": false,
							"symkeys":
							[
								[
									9322,
									9327
								],
								[
									9509,
									9515
								],
								[
									9568,
									9573
								],
								[
									9626,
									9630
								],
								[
									9704,
									9708
								],
								[
									9730,
									9739
								],
								[
									10398,
									10417
								],
								[
									10516,
									10520
								],
								[
									10692,
									10699
								],
								[
									10730,
									10740
								],
								[
									10997,
									11021
								],
								[
									11062,
									11083
								],
								[
									11085,
									11090
								],
								[
									11098,
									11103
								],
								[
									11125,
									11160
								],
								[
									11274,
									11292
								],
								[
									11374,
									11379
								],
								[
									11566,
									11587
								],
								[
									11720,
									11738
								],
								[
									12417,
									12442
								],
								[
									12488,
									12506
								],
								[
									13483,
									13510
								],
								[
									13865,
									13890
								],
								[
									14229,
									14263
								],
								[
									14779,
									14811
								],
								[
									14986,
									14996
								],
								[
									15129,
									15139
								],
								[
									15258,
									15268
								],
								[
									15435,
									15459
								],
								[
									15518,
									15567
								],
								[
									15808,
									15830
								],
								[
									15837,
									15861
								],
								[
									15869,
									15898
								],
								[
									16705,
									16757
								],
								[
									17210,
									17214
								],
								[
									17241,
									17246
								],
								[
									17681,
									17767
								],
								[
									17965,
									17987
								],
								[
									18500,
									18532
								],
								[
									18860,
									18894
								],
								[
									19009,
									19014
								],
								[
									19039,
									19075
								],
								[
									19264,
									19289
								],
								[
									19480,
									19505
								],
								[
									19560,
									19564
								],
								[
									19619,
									19623
								],
								[
									20065,
									20082
								],
								[
									20271,
									20286
								],
								[
									20409,
									20426
								],
								[
									20478,
									20482
								],
								[
									20527,
									20531
								],
								[
									20562,
									20566
								],
								[
									20604,
									20609
								],
								[
									20696,
									20715
								],
								[
									20888,
									20923
								],
								[
									20961,
									20969
								],
								[
									21038,
									21042
								],
								[
									21605,
									21609
								],
								[
									21668,
									21672
								],
								[
									22241,
									22247
								],
								[
									22422,
									22426
								],
								[
									22447,
									22451
								],
								[
									22486,
									22490
								],
								[
									22750,
									22763
								],
								[
									22886,
									22890
								],
								[
									23084,
									23100
								],
								[
									23366,
									23371
								],
								[
									23484,
									23493
								],
								[
									23565,
									23574
								],
								[
									23651,
									23660
								],
								[
									24300,
									24322
								],
								[
									24499,
									24559
								],
								[
									24808,
									24828
								],
								[
									24839,
									24848
								],
								[
									24903,
									24915
								],
								[
									24960,
									24967
								],
								[
									25053,
									25084
								],
								[
									25406,
									25439
								],
								[
									26478,
									26531
								],
								[
									26581,
									26590
								],
								[
									26665,
									26708
								],
								[
									26787,
									26791
								],
								[
									26920,
									26927
								],
								[
									26954,
									26961
								],
								[
									27039,
									27060
								],
								[
									27315,
									27357
								],
								[
									27480,
									27501
								],
								[
									27736,
									27781
								],
								[
									27926,
									27933
								],
								[
									27975,
									28045
								],
								[
									28482,
									28507
								],
								[
									28530,
									28534
								],
								[
									28554,
									28567
								],
								[
									28683,
									28755
								],
								[
									28974,
									28981
								],
								[
									29064,
									29073
								],
								[
									29505,
									29570
								],
								[
									29657,
									29683
								],
								[
									29896,
									29921
								],
								[
									29944,
									29948
								],
								[
									29968,
									29981
								],
								[
									30035,
									30086
								],
								[
									30088,
									30094
								],
								[
									30103,
									30105
								],
								[
									30130,
									30137
								],
								[
									30161,
									30250
								],
								[
									30257,
									30280
								],
								[
									30343,
									30370
								],
								[
									30379,
									30399
								],
								[
									30534,
									30538
								],
								[
									30708,
									30727
								],
								[
									30811,
									30830
								],
								[
									30923,
									30938
								],
								[
									31798,
									31813
								],
								[
									31899,
									31914
								],
								[
									32571,
									32612
								],
								[
									32812,
									32816
								],
								[
									32846,
									32857
								],
								[
									32940,
									32960
								],
								[
									33165,
									33189
								],
								[
									33247,
									33287
								],
								[
									33659,
									33678
								],
								[
									33729,
									33748
								],
								[
									34610,
									34638
								],
								[
									34838,
									34850
								],
								[
									34881,
									34893
								],
								[
									35404,
									35452
								],
								[
									35677,
									35683
								],
								[
									35828,
									35833
								],
								[
									35859,
									35866
								],
								[
									35924,
									35929
								],
								[
									35957,
									35964
								],
								[
									36587,
									36603
								],
								[
									36726,
									36730
								],
								[
									37238,
									37246
								],
								[
									37689,
									37697
								],
								[
									37750,
									37755
								],
								[
									37796,
									37804
								],
								[
									37944,
									37949
								],
								[
									38036,
									38052
								],
								[
									39723,
									39728
								],
								[
									40361,
									40412
								],
								[
									40815,
									40820
								],
								[
									40839,
									40844
								],
								[
									41152,
									41169
								],
								[
									41329,
									41335
								],
								[
									41464,
									41484
								],
								[
									41561,
									41591
								],
								[
									41767,
									41775
								],
								[
									41874,
									41885
								],
								[
									42001,
									42005
								],
								[
									42732,
									42773
								],
								[
									43396,
									43419
								],
								[
									44008,
									44012
								],
								[
									44156,
									44160
								],
								[
									44672,
									44676
								],
								[
									44691,
									44721
								],
								[
									44769,
									44773
								],
								[
									44787,
									44817
								],
								[
									44871,
									44875
								],
								[
									44894,
									44918
								],
								[
									44983,
									44987
								],
								[
									45027,
									45051
								],
								[
									45169,
									45173
								],
								[
									45199,
									45203
								],
								[
									45273,
									45277
								],
								[
									45303,
									45307
								],
								[
									45400,
									45404
								],
								[
									45762,
									45797
								],
								[
									45908,
									45921
								],
								[
									46362,
									46402
								],
								[
									46448,
									46457
								],
								[
									46473,
									46484
								],
								[
									46576,
									46587
								],
								[
									46633,
									46689
								],
								[
									46696,
									46702
								],
								[
									46784,
									46804
								],
								[
									46851,
									46909
								],
								[
									46916,
									46922
								],
								[
									46965,
									46972
								],
								[
									46989,
									47010
								],
								[
									47072,
									47083
								],
								[
									47313,
									47331
								],
								[
									47371,
									47377
								],
								[
									47410,
									47438
								],
								[
									47476,
									47498
								],
								[
									47583,
									47607
								],
								[
									47608,
									47622
								],
								[
									48742,
									48775
								],
								[
									48784,
									48785
								],
								[
									48837,
									48861
								],
								[
									48902,
									48933
								],
								[
									48942,
									48943
								],
								[
									49187,
									49230
								],
								[
									49544,
									49571
								],
								[
									49864,
									49875
								],
								[
									50081,
									50097
								],
								[
									50411,
									50431
								],
								[
									51316,
									51363
								],
								[
									51746,
									51761
								],
								[
									51978,
									51991
								],
								[
									52268,
									52281
								],
								[
									52487,
									52500
								],
								[
									52719,
									52725
								],
								[
									52775,
									52796
								],
								[
									56792,
									56803
								],
								[
									57639,
									57643
								],
								[
									58057,
									58062
								],
								[
									58211,
									58225
								],
								[
									58243,
									58248
								],
								[
									58361,
									58382
								],
								[
									58440,
									58445
								],
								[
									58553,
									58574
								],
								[
									58799,
									58812
								],
								[
									58813,
									58840
								],
								[
									58957,
									58980
								],
								[
									59262,
									59277
								],
								[
									59302,
									59319
								],
								[
									59386,
									59394
								],
								[
									59467,
									59472
								],
								[
									59578,
									59602
								],
								[
									60363,
									60370
								],
								[
									60400,
									60407
								],
								[
									60729,
									60756
								],
								[
									60852,
									60856
								],
								[
									61221,
									61257
								],
								[
									61390,
									61399
								],
								[
									61434,
									61445
								],
								[
									61497,
									61511
								],
								[
									62091,
									62095
								],
								[
									62770,
									62778
								],
								[
									62894,
									62902
								],
								[
									63022,
									63030
								],
								[
									63145,
									63153
								],
								[
									63210,
									63218
								],
								[
									63690,
									63698
								],
								[
									63883,
									63930
								],
								[
									64076,
									64089
								],
								[
									64252,
									64270
								],
								[
									64438,
									64442
								],
								[
									64514,
									64521
								],
								[
									64769,
									64788
								],
								[
									64820,
									64838
								],
								[
									65364,
									65384
								],
								[
									65634,
									65651
								],
								[
									65859,
									65877
								],
								[
									66154,
									66177
								],
								[
									66628,
									66645
								],
								[
									66737,
									66745
								],
								[
									66964,
									66978
								],
								[
									67116,
									67156
								],
								[
									67221,
									67235
								],
								[
									67810,
									67826
								],
								[
									67864,
									67939
								],
								[
									68174,
									68195
								],
								[
									68299,
									68303
								],
								[
									68782,
									68796
								],
								[
									69086,
									69090
								],
								[
									69157,
									69161
								],
								[
									69438,
									69455
								],
								[
									69623,
									69631
								],
								[
									69824,
									69828
								],
								[
									69924,
									69939
								],
								[
									70185,
									70189
								],
								[
									70396,
									70413
								],
								[
									70505,
									70520
								],
								[
									71313,
									71325
								],
								[
									71332,
									71345
								],
								[
									71383,
									71398
								],
								[
									71502,
									71522
								],
								[
									71702,
									71729
								],
								[
									71783,
									71795
								],
								[
									71913,
									71921
								],
								[
									72370,
									72378
								],
								[
									73200,
									73209
								],
								[
									73444,
									73451
								],
								[
									73550,
									73570
								],
								[
									73757,
									73777
								],
								[
									74138,
									74148
								],
								[
									74951,
									74955
								],
								[
									75030,
									75034
								],
								[
									75048,
									75062
								],
								[
									75319,
									75326
								],
								[
									77669,
									77701
								],
								[
									78098,
									78102
								],
								[
									78308,
									78312
								],
								[
									78380,
									78384
								],
								[
									78468,
									78475
								],
								[
									78554,
									78558
								],
								[
									79617,
									79663
								],
								[
									80093,
									80102
								],
								[
									81204,
									81219
								],
								[
									81433,
									81449
								],
								[
									81610,
									81626
								],
								[
									81801,
									81817
								],
								[
									82840,
									82858
								],
								[
									83056,
									83079
								],
								[
									83121,
									83136
								],
								[
									83492,
									83507
								],
								[
									83920,
									83940
								],
								[
									84393,
									84411
								],
								[
									85127,
									85136
								],
								[
									85179,
									85183
								],
								[
									85395,
									85433
								],
								[
									85608,
									85631
								],
								[
									85765,
									85770
								],
								[
									85809,
									85819
								],
								[
									85978,
									85982
								],
								[
									86119,
									86123
								],
								[
									86162,
									86167
								],
								[
									86572,
									86576
								],
								[
									86610,
									86624
								],
								[
									86628,
									86642
								],
								[
									86649,
									86653
								],
								[
									86674,
									86689
								],
								[
									86720,
									86734
								],
								[
									86841,
									86852
								],
								[
									86897,
									86902
								],
								[
									86957,
									86962
								],
								[
									87412,
									87422
								],
								[
									87513,
									87523
								],
								[
									87536,
									87540
								],
								[
									87714,
									87718
								],
								[
									87879,
									87900
								],
								[
									88970,
									88974
								],
								[
									89081,
									89085
								],
								[
									89374,
									89402
								],
								[
									89853,
									89857
								],
								[
									90313,
									90322
								],
								[
									90406,
									90415
								],
								[
									90519,
									90527
								],
								[
									91033,
									91042
								],
								[
									91191,
									91195
								],
								[
									91260,
									91286
								],
								[
									91926,
									91931
								],
								[
									92206,
									92228
								],
								[
									93234,
									93255
								],
								[
									93460,
									93488
								],
								[
									93855,
									93898
								],
								[
									95223,
									95232
								],
								[
									96012,
									96016
								],
								[
									96751,
									96778
								],
								[
									96901,
									96914
								]
							],
							"symlist":
							[
								"() =>",
								"  res =>",
								"() =>",
								"  r =>",
								"  r =>",
								"  entries()",
								"GetProject = arg =>",
								"  p =>",
								"\t() =>",
								"\tvalue =>",
								"  add = (arr, ...items) =>",
								"  useSlot = (arr, i) =>",
								"() =>",
								"\tv =>",
								"  trklGetSet = (get, set) => value =>",
								"MouseEvents = h =>",
								"() =>",
								"(parent, delegate) =>",
								"  append_to(elem, p)",
								"DrawSVG(...args)",
								"  append_to(elem, p)",
								"  adjustViewBox(e)",
								"  calcViewBox(box)",
								"  setViewBox(svgOwner, box)",
								"ElementToXML = (e, predicate) =>",
								"\t(v, k) =>",
								"\t(v, k) =>",
								"\t(v, k) =>",
								"  readFile(filename)",
								"  writeFile(filename, data, overwrite = true)",
								"  exists(filename)",
								"  realpath(filename)",
								"LoadFile(file)",
								"SaveFile(filename, data, contentType)",
								"  s =>",
								"() =>",
								"SaveSVG(filename, layers = [1, 16, 20, 21, 22, 23, 25, 27, 47, 48, 51])",
								"  predicate = element =>",
								"LoadSVG(filename)",
								"LoadImage(filename)",
								"() =>",
								"RenderComponent(component)",
								"ModifyColors = fn => e =>",
								"FindLayer = name_or_id =>",
								"  n =>",
								"  l =>",
								"(id = '#geom') =>",
								"(props = {}) =>",
								"  maxZIndex = () =>",
								"  e =>",
								"  z =>",
								"  z =>",
								"() =>",
								"  randomColor = () =>",
								"DrawArc(start, end, angle)",
								"  props =>",
								"  p =>",
								"  a =>",
								"  m =>",
								"  hex =>",
								"  p =>",
								"  p =>",
								"  p =>",
								"({ x, y }) =>",
								"  a =>",
								"({ x, y }, i) =>",
								"\te =>",
								"(l, i) =>",
								"(p, i) =>",
								"(p, i) =>",
								"  add = (level, item) =>",
								"RecurseBinaryNode(node, parent = null, depth = 0)",
								"(nodes, i, level) =>",
								"  fx = j =>",
								"(node, j) =>",
								"  item =>",
								"DrawNode(x, y, node)",
								"DrawEdge(item, parent)",
								"GetPaths(query, parent = project.svgElement)",
								"(a, e) =>",
								"PathToPolylines(path, step = 0.01)",
								"  p =>",
								"  poly =>",
								"  poly =>",
								"\t(p, d, set, stop) =>",
								"PathToPolyline(path, step = 0.01)",
								"\t(p, d, set, stop) =>",
								"PathsToPolylines(paths, step = 0.01)",
								"  path =>",
								"OutsetPath(path, offset, miterLimit = 2, arcTolerance = 0.01)",
								"  .toPolylines = function()",
								"  p =>",
								"({ X, Y }) =>",
								"OutsetPaths(paths, offset, miterLimit = 2, arcTolerance = 0.25)",
								"  path =>",
								"(a, p) =>",
								"ClipPath(path, clip, mode = ClipperLib.ClipType.ctUnion)",
								"  add = (p, clip = false) =>",
								"  .toPolylines = function()",
								"  p =>",
								"({ X, Y }) =>",
								"  saveItemStates(itemList, get = item => is.",
								"(item.",
								"))",
								"  item =>",
								"  restoreItemStates(itemStates, /*prettier-ignore */ set = (item, value) => item.",
								"(value ? 'yes' : 'no'))",
								"EagleMaps(project)",
								"  transformPath = p =>",
								"  e =>",
								"  dom2eagle = node =>",
								"  eagle2dom = elem =>",
								"  path2dom = p =>",
								"(key, value) =>",
								"(key, value) =>",
								"PackageNames(doc = project.doc)",
								"  e =>",
								"([e, b]) =>",
								"([e, w, h, m, v]) =>",
								"({ index, ...match }) =>",
								"\t({ s, v, indexes }, match, i) =>",
								"([token, index]) =>",
								"([token, index]) =>",
								"NextDocument(n = 1)",
								"\t(idx, i) =>",
								"\t(idx, i) =>",
								"LoadDocument(project, parentElem)",
								"  err =>",
								"() =>",
								"\tent =>",
								"() =>",
								"\tent =>",
								"  renamePackages()",
								"  a =>",
								"  value =>",
								"  layer =>",
								"() =>",
								"  layer =>",
								"() =>",
								"  fn = function(v)",
								"() =>",
								"  .makeGroup = function({ transform, ...props } = {})",
								"  id =>",
								"() =>",
								"  xx()",
								"\t() =>",
								"(transform)",
								"\t(tag, attr, children = []) =>",
								"  value =>",
								"() =>",
								"Rect",
								"ChooseDocument(project, i)",
								"GenerateVoronoi = () =>",
								"Rect",
								"  p =>",
								"  e =>",
								"({ lSite, rSite, ...edge }) =>",
								"  e =>",
								"({ lSite, rSite, ...edge }) =>",
								"  e =>",
								"({ va, vb, ...edge }) =>",
								"  v =>",
								"  add = (arr, ...items) =>",
								"  l =>",
								"  t =>",
								"  l =>",
								"  t =>",
								"  p =>",
								"\t(acc, { site, halfedges }) =>",
								"({ site }) =>",
								"PackageChildren(element, layer)",
								"(c, i) =>",
								"([i, p]) =>",
								"([i, e]) =>",
								"ElementChildren(layer = 'tPlace', rfn = ent => ",
								"(ent))",
								"([name, element]) =>",
								"ElementGeometries(layer = 'tPlace', rfn = ent => ",
								"(ent))",
								"\tent =>",
								"([name, children]) =>",
								"([i, e]) =>",
								"([name, lines]) =>",
								"  pts =>",
								"([name, lines, polygons]) =>",
								"NewPath(path)",
								"MakeFitAction = index =>",
								"  event =>",
								"ZoomFactor(val = config.",
								")",
								"ZoomLog(factor)",
								"AdjustZoom(l = config.",
								")",
								"CreateGrblSocket = (port = 'tnt1') =>",
								"HandleMessage(msg)",
								"  pointStr =>",
								"  socketFn = () =>",
								"  .send = (...args) =>",
								"AuthorizationDialog = ({ onAuth, ...props }) =>",
								"  onSubmit: () =>",
								"  onInput: e =>",
								"  onInput: e =>",
								"  onClick: e =>",
								"  arg =>",
								"  .onload = () =>",
								"  response =>",
								"  e =>",
								"\tv =>",
								"TestArc: () =>",
								"() =>",
								"(push, stop) =>",
								"() =>",
								"(push, stop) =>",
								"\ttarget =>",
								"\t(key, modifiers = 0) =>",
								"  .focusSearch = state =>",
								"  children: () =>",
								"  geometries: () =>",
								"  value =>",
								"() =>",
								"  testComponent = props =>",
								"  resp =>",
								"  json =>",
								"File(obj, i)",
								"File",
								"File.prototype.toString = function()",
								"(a, b) =>",
								"(obj, i) =>",
								"(acc, file) =>",
								"  i =>",
								"  value =>",
								"  value =>",
								"  value =>",
								"  value =>",
								"  value =>",
								"  value =>",
								"  updateIfChanged = (trkl, newValue, callback) =>",
								"\t(elem, i) =>",
								"  changeInput = e =>",
								"  p =>",
								"\targ =>",
								"Consumer = props =>",
								"()",
								"  log(type, time, msg)",
								"Logger = props =>",
								"()",
								"([type, d, t, m], i) =>",
								"Dumper = props =>",
								"  value =>",
								"([k, v], i) =>",
								"Commander = ({ onCommand, ...props }) =>",
								"  handler = e =>",
								"  toggle = trkl =>",
								"Layer = ({ title, name, label, i, color, element, className, ...props }) =>",
								"  setVisible = value =>",
								"  e =>",
								"\te =>",
								"  l =>",
								"  l =>",
								"\t(item, value) =>",
								"\titem =>",
								"  l =>",
								"([l, state]) =>",
								"  e =>",
								"  onMouseMove: e =>",
								"  onMouseUp: e =>",
								"DocumentList",
								"  constructor()",
								"(push, stop) =>",
								"  add(name, component)",
								"  addEntry([name, component])",
								"  remove(name)",
								"  update()",
								"  fn: e =>",
								"  fn: () =>",
								"  open =>",
								"\tprops =>",
								"\tprops =>",
								"  e =>",
								"  i =>",
								"  i =>",
								"({ coord }) =>",
								"  side =>",
								"  create: (project, props = {}) =>",
								"  a =>",
								"  e =>",
								"  e =>",
								"  name =>",
								"  e =>",
								"  makeLayerName(name, side)",
								"  fn: () =>",
								"  onChange(event)",
								"\tprops =>",
								"\tprops =>",
								"\tprops =>",
								"(e, p, i) =>",
								"  makeSortCompare: key =>",
								"\tfunction(a, b)",
								"\tfunction(a, b)",
								"  onCommand: cmdStr =>",
								"  handleChange: e =>",
								"\tevent =>",
								"  e =>",
								"MoveEvent(event, prevEvent)",
								"WalkUp(e)",
								"\te =>",
								"\tz =>",
								"  p =>",
								"  e =>",
								"\te =>",
								"  e =>",
								"\tv =>",
								"\tl =>",
								"  e =>",
								"\t() =>",
								"\t(e, depth) =>",
								"\tclasses =>",
								"\te =>",
								"\te =>",
								"\t(a, b) =>",
								"\t(a, b) =>",
								"Node",
								"  e =>",
								"\t(p, d, set, stop) =>",
								"  e =>",
								"  e =>",
								"TouchEvent(event)",
								"  e =>",
								"(p, i) =>",
								"(a, b) =>",
								"\tsize =>",
								"  border =>",
								"  r =>",
								"  mod(n, m)",
								"() =>",
								"\t(pos, last, first) =>",
								"  cancel()",
								"  .oncontextmenu = function(e)",
								"  .processEvents = function eventLoop()",
								"\tevent =>",
								"  e =>",
								"  onRuntimeInitialized: () =>",
								"  print: txt =>"
							],
							"syntax": "Packages/Outline/outline.hidden-tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681034197.78,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 1,
					"file": "main.js",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 96951,
						"regions":
						{
							"col_00000001":
							{
								"flags": 16,
								"regions":
								[
									[
										88902,
										88911
									]
								],
								"scope": "col_00000001"
							},
							"col_00000001_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00000001_circle.png",
								"regions":
								[
									[
										88806,
										88806
									]
								],
								"scope": "col_gutter"
							},
							"col_0000FFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										45522,
										45526
									]
								],
								"scope": "col_0000FFFF"
							},
							"col_0000FFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_0000FFFF_circle.png",
								"regions":
								[
									[
										45505,
										45505
									]
								],
								"scope": "col_gutter"
							},
							"col_0078F0FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22074,
										22081
									]
								],
								"scope": "col_0078F0FF"
							},
							"col_0078F0FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_0078F0FF_circle.png",
								"regions":
								[
									[
										22024,
										22024
									]
								],
								"scope": "col_gutter"
							},
							"col_00DD0080":
							{
								"flags": 16,
								"regions":
								[
									[
										24148,
										24157
									]
								],
								"scope": "col_00DD0080"
							},
							"col_00DD0080_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00DD0080_circle.png",
								"regions":
								[
									[
										24135,
										24135
									]
								],
								"scope": "col_gutter"
							},
							"col_00FF00FF":
							{
								"flags": 16,
								"regions":
								[
									[
										24212,
										24216
									]
								],
								"scope": "col_00FF00FF"
							},
							"col_00FF00FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00FF00FF_circle.png",
								"regions":
								[
									[
										24166,
										24166
									]
								],
								"scope": "col_gutter"
							},
							"col_00FFFFBF":
							{
								"flags": 16,
								"regions":
								[
									[
										45664,
										45684
									]
								],
								"scope": "col_00FFFFBF"
							},
							"col_00FFFFBF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00FFFFBF_circle.png",
								"regions":
								[
									[
										45565,
										45565
									]
								],
								"scope": "col_gutter"
							},
							"col_00FFFFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										23623,
										23627
									]
								],
								"scope": "col_00FFFFFF"
							},
							"col_00FFFFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00FFFFFF_circle.png",
								"regions":
								[
									[
										23549,
										23549
									]
								],
								"scope": "col_gutter"
							},
							"col_010101FF":
							{
								"flags": 16,
								"regions":
								[
									[
										12031,
										12035
									],
									[
										23222,
										23227
									],
									[
										23756,
										23760
									],
									[
										23927,
										23931
									],
									[
										25161,
										25165
									],
									[
										25731,
										25735
									],
									[
										29311,
										29316
									],
									[
										29387,
										29392
									],
									[
										45222,
										45226
									],
									[
										78663,
										78675
									],
									[
										86504,
										86508
									],
									[
										88339,
										88343
									],
									[
										88468,
										88472
									]
								],
								"scope": "col_010101FF"
							},
							"col_010101FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_010101FF_circle.png",
								"regions":
								[
									[
										11952,
										11952
									],
									[
										23207,
										23207
									],
									[
										23741,
										23741
									],
									[
										23914,
										23914
									],
									[
										25146,
										25146
									],
									[
										25716,
										25716
									],
									[
										29256,
										29256
									],
									[
										29336,
										29336
									],
									[
										45151,
										45151
									],
									[
										78620,
										78620
									],
									[
										86444,
										86444
									],
									[
										88286,
										88286
									],
									[
										88383,
										88383
									]
								],
								"scope": "col_gutter"
							},
							"col_1EE67BFF":
							{
								"flags": 16,
								"regions":
								[
									[
										22311,
										22318
									]
								],
								"scope": "col_1EE67BFF"
							},
							"col_1EE67BFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_1EE67BFF_circle.png",
								"regions":
								[
									[
										22260,
										22260
									]
								],
								"scope": "col_gutter"
							},
							"col_2E17B3FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22115,
										22122
									]
								],
								"scope": "col_2E17B3FF"
							},
							"col_2E17B3FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_2E17B3FF_circle.png",
								"regions":
								[
									[
										22096,
										22096
									]
								],
								"scope": "col_gutter"
							},
							"col_3394E8FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22322,
										22329
									]
								],
								"scope": "col_3394E8FF"
							},
							"col_3394E8FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_3394E8FF_circle.png",
								"regions":
								[
									[
										22260,
										22260
									]
								],
								"scope": "col_gutter"
							},
							"col_34DB05FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22063,
										22070
									]
								],
								"scope": "col_34DB05FF"
							},
							"col_34DB05FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_34DB05FF_circle.png",
								"regions":
								[
									[
										22024,
										22024
									]
								],
								"scope": "col_gutter"
							},
							"col_3578E6FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22137,
										22144
									]
								],
								"scope": "col_3578E6FF"
							},
							"col_3578E6FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_3578E6FF_circle.png",
								"regions":
								[
									[
										22096,
										22096
									]
								],
								"scope": "col_gutter"
							},
							"col_554D85FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22126,
										22133
									]
								],
								"scope": "col_554D85FF"
							},
							"col_554D85FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_554D85FF_circle.png",
								"regions":
								[
									[
										22096,
										22096
									]
								],
								"scope": "col_gutter"
							},
							"col_657FFFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										80197,
										80214
									]
								],
								"scope": "col_657FFFFF"
							},
							"col_657FFFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_657FFFFF_circle.png",
								"regions":
								[
									[
										80176,
										80176
									]
								],
								"scope": "col_gutter"
							},
							"col_7F7F7F54":
							{
								"flags": 16,
								"regions":
								[
									[
										12248,
										12269
									]
								],
								"scope": "col_7F7F7F54"
							},
							"col_7F7F7F54_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_7F7F7F54_circle.png",
								"regions":
								[
									[
										12201,
										12201
									]
								],
								"scope": "col_gutter"
							},
							"col_808080FF":
							{
								"flags": 16,
								"regions":
								[
									[
										68617,
										68621
									],
									[
										70976,
										70980
									]
								],
								"scope": "col_808080FF"
							},
							"col_808080FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_808080FF_circle.png",
								"regions":
								[
									[
										68561,
										68561
									],
									[
										70908,
										70908
									]
								],
								"scope": "col_gutter"
							},
							"col_8D1AE6FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22085,
										22092
									]
								],
								"scope": "col_8D1AE6FF"
							},
							"col_8D1AE6FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_8D1AE6FF_circle.png",
								"regions":
								[
									[
										22024,
										22024
									]
								],
								"scope": "col_gutter"
							},
							"col_B35917FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22159,
										22166
									]
								],
								"scope": "col_B35917FF"
							},
							"col_B35917FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_B35917FF_circle.png",
								"regions":
								[
									[
										22096,
										22096
									]
								],
								"scope": "col_gutter"
							},
							"col_D0E634FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22300,
										22307
									]
								],
								"scope": "col_D0E634FF"
							},
							"col_D0E634FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_D0E634FF_circle.png",
								"regions":
								[
									[
										22260,
										22260
									]
								],
								"scope": "col_gutter"
							},
							"col_E64535FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22278,
										22285
									]
								],
								"scope": "col_E64535FF"
							},
							"col_E64535FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_E64535FF_circle.png",
								"regions":
								[
									[
										22260,
										22260
									]
								],
								"scope": "col_gutter"
							},
							"col_E6AA4CFF":
							{
								"flags": 16,
								"regions":
								[
									[
										22289,
										22296
									]
								],
								"scope": "col_E6AA4CFF"
							},
							"col_E6AA4CFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_E6AA4CFF_circle.png",
								"regions":
								[
									[
										22260,
										22260
									]
								],
								"scope": "col_gutter"
							},
							"col_E9B470FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22148,
										22155
									]
								],
								"scope": "col_E9B470FF"
							},
							"col_E9B470FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_E9B470FF_circle.png",
								"regions":
								[
									[
										22096,
										22096
									]
								],
								"scope": "col_gutter"
							},
							"col_EB1F00FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22041,
										22048
									]
								],
								"scope": "col_EB1F00FF"
							},
							"col_EB1F00FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_EB1F00FF_circle.png",
								"regions":
								[
									[
										22024,
										22024
									]
								],
								"scope": "col_gutter"
							},
							"col_F0CC11FF":
							{
								"flags": 16,
								"regions":
								[
									[
										22052,
										22059
									]
								],
								"scope": "col_F0CC11FF"
							},
							"col_F0CC11FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_F0CC11FF_circle.png",
								"regions":
								[
									[
										22024,
										22024
									]
								],
								"scope": "col_gutter"
							},
							"col_FF0000FF":
							{
								"flags": 16,
								"regions":
								[
									[
										7868,
										7871
									],
									[
										20333,
										20337
									],
									[
										29479,
										29482
									],
									[
										45326,
										45330
									]
								],
								"scope": "col_FF0000FF"
							},
							"col_FF0000FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FF0000FF_circle.png",
								"regions":
								[
									[
										7857,
										7857
									],
									[
										20320,
										20320
									],
									[
										29415,
										29415
									],
									[
										45255,
										45255
									]
								],
								"scope": "col_gutter"
							},
							"col_FF00FFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										45962,
										45966
									]
								],
								"scope": "col_FF00FFFF"
							},
							"col_FF00FFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FF00FFFF_circle.png",
								"regions":
								[
									[
										45941,
										45941
									]
								],
								"scope": "col_gutter"
							},
							"col_FF65FEFF":
							{
								"flags": 16,
								"regions":
								[
									[
										80156,
										80173
									]
								],
								"scope": "col_FF65FEFF"
							},
							"col_FF65FEFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FF65FEFF_circle.png",
								"regions":
								[
									[
										80134,
										80134
									]
								],
								"scope": "col_gutter"
							},
							"col_FF6F00FF":
							{
								"flags": 16,
								"regions":
								[
									[
										87138,
										87145
									]
								],
								"scope": "col_FF6F00FF"
							},
							"col_FF6F00FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FF6F00FF_circle.png",
								"regions":
								[
									[
										87121,
										87121
									]
								],
								"scope": "col_gutter"
							},
							"col_FFFF00FF":
							{
								"flags": 16,
								"regions":
								[
									[
										23734,
										23738
									],
									[
										88679,
										88683
									]
								],
								"scope": "col_FFFF00FF"
							},
							"col_FFFF00FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FFFF00FF_circle.png",
								"regions":
								[
									[
										23721,
										23721
									],
									[
										88656,
										88656
									]
								],
								"scope": "col_gutter"
							},
							"col_FFFFFFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										25181,
										25185
									],
									[
										65106,
										65111
									]
								],
								"scope": "col_FFFFFFFF"
							},
							"col_FFFFFFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FFFFFFFF_circle.png",
								"regions":
								[
									[
										25168,
										25168
									],
									[
										65088,
										65088
									]
								],
								"scope": "col_gutter"
							}
						},
						"selection":
						[
							[
								55885,
								55885
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 1484,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681090616.54,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 136.0,
						"translation.y": 21534.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "eagle-shell.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 39474,
						"regions":
						{
							"col_00AFFFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										13769,
										13782
									]
								],
								"scope": "col_00AFFFFF"
							},
							"col_00AFFFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00AFFFFF_circle.png",
								"regions":
								[
									[
										13703,
										13703
									]
								],
								"scope": "col_gutter"
							},
							"col_D700FFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										13745,
										13759
									]
								],
								"scope": "col_D700FFFF"
							},
							"col_D700FFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_D700FFFF_circle.png",
								"regions":
								[
									[
										13703,
										13703
									]
								],
								"scope": "col_gutter"
							},
							"col_FFFFFFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										31797,
										31804
									],
									[
										32657,
										32661
									]
								],
								"scope": "col_FFFFFFFF"
							},
							"col_FFFFFFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FFFFFFFF_circle.png",
								"regions":
								[
									[
										31757,
										31757
									],
									[
										32642,
										32642
									]
								],
								"scope": "col_gutter"
							}
						},
						"selection":
						[
							[
								2850,
								2850
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 24,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681036407.07,
							"tabs_extra_last_activated_sheet_index": 1,
							"tabs_extra_moving":
							[
								3,
								1
							],
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "lib/xml/xpath.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 12291,
						"regions":
						{
						},
						"selection":
						[
							[
								4256,
								4269
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 110,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681036577.76,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1391.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "lib/json/path.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 18767,
						"regions":
						{
						},
						"selection":
						[
							[
								9643,
								9643
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 334,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681045441.56,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 4059.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "lib/eagle/ref.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3417,
						"regions":
						{
						},
						"selection":
						[
							[
								1,
								2
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681030411.88,
							"tabs_extra_last_activated_sheet_index": 1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "lib/dom/element.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 35545,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681030446.66,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "lib/eagle/element.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 33278,
						"regions":
						{
						},
						"selection":
						[
							[
								414,
								428
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 8,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681033267.71,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "lib/eagle/project.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7861,
						"regions":
						{
						},
						"selection":
						[
							[
								3758,
								3758
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 147,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681031998.36,
							"tabs_extra_last_activated_sheet_index": 5,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1826.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "lib/eagle/document.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 11315,
						"regions":
						{
						},
						"selection":
						[
							[
								3180,
								3183
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 100,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681036170.42,
							"tabs_extra_last_activated_sheet_index": 7,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 716.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "lib/eagle/node.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 16502,
						"regions":
						{
						},
						"selection":
						[
							[
								12516,
								12516
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 398,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681036509.73,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5651.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "lib/eagle/common.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3953,
						"regions":
						{
						},
						"selection":
						[
							[
								358,
								358
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 13,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681032394.34,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "lib/misc.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 65534,
						"regions":
						{
						},
						"selection":
						[
							[
								16602,
								16602
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 503,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681030751.79,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 6938.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "components.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 41728,
						"regions":
						{
						},
						"selection":
						[
							[
								305,
								305
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 2,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681030286.79,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 17,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "events.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1632,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								77
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681028367.53,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 21,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "lib/tlite.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6293,
						"regions":
						{
						},
						"selection":
						[
							[
								19,
								19
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681028424.49,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 20,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "commands.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 12259,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681030172.53,
							"tabs_extra_last_activated_sheet_index": 5,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 18,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "lib/fetch.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2433,
						"regions":
						{
						},
						"selection":
						[
							[
								2329,
								2396
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 73,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681028776.45,
							"tabs_extra_last_activated_sheet_index": 6,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 495.0,
						"zoom_level": 1.0
					},
					"stack_index": 19,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "importReplacer.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 860,
						"regions":
						{
						},
						"selection":
						[
							[
								681,
								681
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 18,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681048397.74,
							"tabs_extra_last_activated_sheet_index": 17,
							"tabs_extra_moving":
							[
								9,
								1
							],
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 19,
					"file": "lib/path.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 16439,
						"regions":
						{
						},
						"selection":
						[
							[
								5745,
								5753
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 187,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681048400.9,
							"tabs_extra_last_activated_sheet_index": 18,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2379.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "server.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 27766,
						"regions":
						{
						},
						"selection":
						[
							[
								15347,
								15347
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 446,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681048970.89,
							"tabs_extra_last_activated_sheet_index": 19,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 6204.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 21,
					"file": "lib/util.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 185739,
						"regions":
						{
						},
						"selection":
						[
							[
								8773,
								8784
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 281,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681030632.41,
							"tabs_extra_last_activated_sheet_index": 12,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3836.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "string-helpers.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4518,
						"regions":
						{
						},
						"selection":
						[
							[
								4214,
								4232
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 155,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1681030457.67,
							"tabs_extra_last_activated_sheet_index": 13,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1778.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
>>>>>>> 979c935d7a4c83106f43a8bb0ed4bf294e82e26a
					"stack_multiselect": false,
					"type": "text"
				}
			]
<<<<<<< HEAD
		},
		{
			"sheets":
			[
				{
					"buffer": 1,
					"file": "svg-crop-pad.js",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 15965,
						"regions":
						{
						},
						"selection":
						[
							[
								1694,
								1695
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 28,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1680984490.64,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 0.0
	},
	"input":
	{
		"height": 0.0
	},
	"layout":
	{
		"cells":
		[
			[
				2,
				0,
				3,
				2
			],
			[
				0,
				0,
				2,
				2
			]
		],
		"cols":
		[
			0.0,
			0.2,
			0.8,
			1.0
		],
		"rows":
		[
			0.0,
			0.5,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "",
	"project": "plot-cv.sublime-project",
	"replace":
	{
		"height": 44.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"svg-cr",
				"svg-crop-pad.js"
=======
		}
	],
	"incremental_find":
	{
		"height": 24.0
	},
	"input":
	{
		"height": 42.0
	},
	"layout":
	{
		"cells":
		[
			[
				2,
				0,
				3,
				2
			],
			[
				0,
				0,
				2,
				2
			]
		],
		"cols":
		[
			0.0,
			0.2,
			0.8,
			1.0
		],
		"rows":
		[
			0.0,
			0.5,
			1.0
		]
	},
	"menu_visible": true,
	"output.exec":
	{
		"height": 102.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "Run with qjsm",
	"project": "plot-cv.sublime-project",
	"replace":
	{
		"height": 68.0
	},
	"save_all_on_build": false,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"main.js",
				"main.js"
			],
			[
				"server",
				"server.js"
			],
			[
				"lib/path",
				"lib/path.js"
			],
			[
				"server.js",
				"server.js"
			],
			[
				"json/path",
				"lib/json/path.js"
			],
			[
				"xpath.js",
				"lib/xml/xpath.js"
			],
			[
				"eagle-she",
				"eagle-shell.js"
			],
			[
				"element.js",
				"lib/eagle/element.js"
			],
			[
				"common.j",
				"lib/eagle/common.js"
			],
			[
				"node",
				"lib/eagle/node.js"
			],
			[
				"docu",
				"lib/eagle/document.js"
			],
			[
				"node.js",
				"lib/eagle/node.js"
			],
			[
				"project",
				"lib/eagle/project.js"
			],
			[
				"eagle-shel",
				"eagle-shell.js"
			],
			[
				"eagle-shell",
				"eagle-shell.js"
			],
			[
				"main",
				"main.js"
			],
			[
				"string-he",
				"string-helpers.js"
			],
			[
				"eagle/ele",
				"lib/eagle/element.js"
			],
			[
				"eleme",
				"lib/dom/element.js"
			],
			[
				"ref.js",
				"lib/eagle/ref.js"
			],
			[
				"comp",
				"components.js"
			],
			[
				"comman",
				"commands.js"
			],
			[
				"misc.js",
				"lib/misc.js"
			],
			[
				"util",
				"lib/util.js"
			],
			[
				"commands",
				"commands.js"
			],
			[
				"util.js",
				"lib/util.js"
			],
			[
				"tlite.js",
				"lib/tlite.js"
			],
			[
				"events.js",
				"events.js"
			],
			[
				"componen",
				"components.js"
			],
			[
				"fetch.js",
				"lib/fetch.js"
			],
			[
				"util.",
				"lib/util.js"
			],
			[
				"autoSt",
				"lib/autoStore.js"
			],
			[
				"nodeMap",
				"lib/eagle/nodeMap.js"
			],
			[
				"log.js",
				"lib/log.js"
			],
			[
				"cache.js",
				"lib/dom/cache.js"
			],
			[
				"svgRe",
				"lib/eagle/svgRenderer.js"
			],
			[
				"nodeList",
				"lib/eagle/nodeList.js"
			],
			[
				"common.js",
				"lib/eagle/common.js"
			],
			[
				"envi",
				"lib/ecmascript/environment.js"
			],
			[
				"interp",
				"lib/ecmascript/interpreter.js"
			],
			[
				"lib/ut",
				"lib/util.js"
			],
			[
				"interpret",
				"lib/ecmascript/interpreter.js"
			],
			[
				"printer",
				"lib/ecmascript/printer.js"
			],
			[
				"useTrkl",
				"lib/hooks/useTrkl.js"
			],
			[
				"treeOb",
				"lib/json/treeObserver.js"
			],
			[
				"eventE",
				"lib/eventEmitter.js"
			],
			[
				"devtoo",
				"lib/devtools.js"
			],
			[
				"preactCom",
				"lib/dom/preactComponent.js"
			],
			[
				"pointer.js",
				"lib/pointer.js"
			],
			[
				"devtool",
				"lib/devtools.js"
			],
			[
				"lib/u",
				"lib/util.js"
			],
			[
				"gcode/par",
				"lib/gcode/parser.js"
			],
			[
				"dom/svg",
				"lib/dom/svg.js"
			],
			[
				"svg.js",
				"lib/dom/svg.js"
			],
			[
				"upload-ser",
				"upload-server.js"
			],
			[
				"eagle/proj",
				"lib/eagle/project.js"
			],
			[
				"main.j",
				"main.js"
			],
			[
				"test-expo",
				"test-export.js"
			],
			[
				"draw-ut",
				"draw-utils.js"
			],
			[
				"gl.js",
				"gl.js"
			],
			[
				"draw-utils",
				"draw-utils.js"
			],
			[
				"test-nan",
				"test-nanovg.js"
			],
			[
				"test-wasm",
				"test-wasm.js"
			],
			[
				"test-svgp",
				"test-svgpath.js"
			],
			[
				"test-proxy",
				"test-proxy.js"
			],
			[
				"test-path",
				"test-path.js"
			],
			[
				"test-opencv",
				"test-opencv.js"
			],
			[
				"test-libb",
				"test-libbpg.js"
			],
			[
				"test-ko",
				"test-kolorwheel.js"
			],
			[
				"jpeg.js",
				"lib/jpeg.js"
			],
			[
				"test-jpg",
				"test-jpg.js"
			],
			[
				"test-dom",
				"test-dom.js"
			],
			[
				"test-debu",
				"test-debuggerprotocol.js"
			],
			[
				"test-da",
				"test-date.js"
			],
			[
				"test-desc",
				"test-description.js"
			],
			[
				"test-fea",
				"test-features2d.js"
			],
			[
				"test-cv",
				"test-cv.js"
			],
			[
				"param.j",
				"param.js"
			],
			[
				"test-poin",
				"test-pointlist.js"
			],
			[
				"token-rul",
				"token-rules.js"
			],
			[
				"tokenize",
				"tokenize.js"
			],
			[
				"test-clexer",
				"test-clexer.js"
			],
			[
				"test-cov",
				"test-coverage.js"
			],
			[
				"test-con",
				"test-console.js"
			],
			[
				"test-clip",
				"test-clipper.js"
			],
			[
				"clipper-lib",
				"lib/clipper-lib.js"
			],
			[
				"clipper.js",
				"lib/clipper.js"
			],
			[
				"test-c",
				"test-clipper.js"
			],
			[
				"test-clpp",
				"test-clipper.js"
			],
			[
				"dump-ast",
				"dump-ast.js"
			],
			[
				"tok",
				"tokenize.js"
			],
			[
				"test-cle",
				"test-clexer.js"
			],
			[
				"test-bit",
				"test-bitset.js"
			],
			[
				"test-au",
				"test-autoplacer.js"
			],
			[
				"rect.js",
				"lib/geom/rect.js"
			],
			[
				"trbl",
				"lib/geom/trbl.js"
			],
			[
				"olyli",
				"lib/geom/polyline.js"
			],
			[
				"lineList",
				"lib/geom/lineList.js"
			],
			[
				"geom.js",
				"lib/geom.js"
			],
			[
				"size.js",
				"lib/geom/size.js"
			],
			[
				"point.js",
				"lib/geom/point.js"
			],
			[
				"test-auo",
				"test-autoplacer.js"
			],
			[
				"utils.c",
				"quickjs/qjs-modules/src/utils.c"
			],
			[
				"qjsm",
				"quickjs/qjs-modules/src/qjsm.c"
			],
			[
				"qjsm.c",
				"quickjs/qjs-modules/src/qjsm.c"
			],
			[
				"pathMap",
				"lib/json/pathMapper.js"
			],
			[
				"test-membr",
				"test-membrane.js"
			],
			[
				"observab",
				"lib/proxy/observableMembrane.js"
			],
			[
				"xml/util",
				"lib/xml/util.js"
			],
			[
				"path.js",
				"lib/json/path.js"
			],
			[
				"xml/xpa",
				"lib/xml/xpath.js"
			],
			[
				"test-mem",
				"test-membrane.js"
			],
			[
				"xml.js",
				"lib/xml.js"
			],
			[
				"treeob",
				"lib/json/treeObserver.js"
			],
			[
				"lib/util",
				"lib/util.js"
			],
			[
				"test-m",
				"test-membrane.js"
			],
			[
				"test-ast",
				"test-ast.js"
			],
			[
				"test-antlr",
				"test-antlr.js"
			],
			[
				"test-ale",
				"test-alea.js"
			],
			[
				"test-u",
				"test-util.js"
			],
			[
				"test-ut",
				"test-util.js"
			],
			[
				"dom/cache",
				"lib/dom/cache.js"
			],
			[
				"clang-as",
				"clang-ast.js"
			],
			[
				"fd-gra",
				"lib/fd-graph.js"
			],
			[
				"circl",
				"lib/geom/circle.js"
			],
			[
				"deep.js",
				"lib/deep.js"
			],
			[
				"parse/gramma",
				"lib/parse/grammar.js"
			],
			[
				"geom/poly",
				"lib/geom/polygon.js"
>>>>>>> 979c935d7a4c83106f43a8bb0ed4bf294e82e26a
			]
		],
		"width": 0.0
	},
	"select_project":
	{
<<<<<<< HEAD
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
=======
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"~/Projects/plot-cv/plot-cv.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 309.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"WS"
			]
		],
		"width": 784.0
>>>>>>> 979c935d7a4c83106f43a8bb0ed4bf294e82e26a
	},
	"selected_group": 1,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
<<<<<<< HEAD
	"side_bar_width": 150.0,
=======
	"side_bar_width": 248.0,
>>>>>>> 979c935d7a4c83106f43a8bb0ed4bf294e82e26a
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
